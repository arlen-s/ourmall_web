(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["settings"],{"292d":function(e,t,a){"use strict";a("3db4")},"3db4":function(e,t,a){},"3f42":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"contentpanel settings-page"},[t("div",{staticClass:"pagetitle"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/dashboard"}}},[e._v("Dashboard")]),t("el-breadcrumb-item",[e._v("Settings")])],1)],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pagebody"},[t("el-row",{staticClass:"mg-b-20",attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-card",[t("el-alert",{staticStyle:{"margin-bottom":"25px"},attrs:{title:"According to the new European VAT e-commerce rules, declaration without lOSS will result in a delay in customs clearance and the recipient will be required to pay VAT, as the parcel will be detained when contact of the recipient is incorrect.",type:"info","show-icon":"",closable:!1}}),t("div",{staticClass:"options-wrap"},[t("h3",[e._v("IOSS Options")]),t("div",[t("el-radio",{attrs:{label:!1},on:{change:e.openIoss},model:{value:e.isOpenIoss,callback:function(t){e.isOpenIoss=t},expression:"isOpenIoss"}},[e._v("No IOSS")]),t("p",{staticClass:"mg-b-15"},[e._v("The amount of the orders (shipping cost included) will be declared and recipients will be required by the customs to pay VAT when parcels arrive in the destination countries of EU")]),t("el-radio",{attrs:{label:!0},on:{change:e.openIoss},model:{value:e.isOpenIoss,callback:function(t){e.isOpenIoss=t},expression:"isOpenIoss"}},[e._v("Declare with my own IOSS")]),t("p",[e._v("Please enter correct and valid IOSS IDs, which should be linked to corresponding destination countries. IOSS ID will not be applied if the destination country is not linked to a correct IOSS ID")])],1)]),t("div",{staticClass:"settings-wrap"},[t("h3",[e._v("My IOSS Settings")]),t("div",{staticClass:"action d-flex"},[t("div",{staticClass:"left"},[t("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small",plain:""},on:{click:function(t){return e.openEditIOSS()}}},[e._v("Add IOSS")])],1),t("div",{staticClass:"right"},[t("span",[e._v("Linked Countries: "),t("b",{staticStyle:{color:"#5c6ac4"}},[e._v(e._s(e.linked.linkedNum))])]),t("span",[e._v("Unlinked Countries: "),t("b",{staticStyle:{color:"#909399"}},[e._v(e._s(e.linked.unlinkedNum))])])])]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.items,stripe:""}},[t("el-table-column",{attrs:{label:"Description",prop:"name"}}),t("el-table-column",{attrs:{label:"IOSS ID",prop:"iossId",width:"200"}}),t("el-table-column",{attrs:{label:"Destination Country"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",e._l(a.row.countrys,(function(a){return t("el-tag",{key:a,staticStyle:{margin:"5px"}},[e._v(" "+e._s(e.showCountry(a))+" ")])})),1)]}}])}),t("el-table-column",{attrs:{label:"Action"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[t("el-link",{staticStyle:{"margin-right":"20px"},attrs:{icon:"el-icon-edit",type:"primary"},on:{click:function(t){return e.openEditIOSS(a.row)}}}),t("el-link",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(t){return e.delIOSS(a.row,a.$index)}}})],1)]}}])})],1)],1)],1)],1)],1)],1),t("DialogEditIOSS",{ref:"editIoss",attrs:{countryArr:e.countryArr,linked:e.linked,data:e.dialogEditIOSSData},on:{saveIOSSSuccess:e.saveIOSSSuccess}})],1)},i=[],l=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:(e.data.id?"Edit":"Add")+" IOSS",visible:e.data.isShow,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){return e.$set(e.data,"isShow",t)},open:e.opened,close:e.closed}},[t("el-divider"),t("div",{staticClass:"d-body"},[t("el-form",{ref:"ruleForm",attrs:{model:e.data.form,rules:e.rules,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"Description:",prop:"name"}},[t("el-input",{attrs:{placeholder:"Please enter description"},model:{value:e.data.form.name,callback:function(t){e.$set(e.data.form,"name",t)},expression:"data.form.name"}})],1),t("el-form-item",{attrs:{label:"IOSS ID:",prop:"iossId"}},[t("el-input",{attrs:{placeholder:"Please enter IOSS ID"},model:{value:e.data.form.iossId,callback:function(t){e.$set(e.data.form,"iossId",t)},expression:"data.form.iossId"}})],1),t("el-form-item",{attrs:{label:"Destination Country:",prop:"countrys",required:""}},[t("el-select",{staticStyle:{width:"412px"},attrs:{multiple:"",filterable:"","default-first-option":"",placeholder:"Please select destination country"},model:{value:e.data.form.countrys,callback:function(t){e.$set(e.data.form,"countrys",t)},expression:"data.form.countrys"}},e._l(e.countryArr,(function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value,disabled:e.linked.arr.indexOf(a.value)>-1&&e.data.oldCountrys.indexOf(a.value)<0}})})),1)],1)],1)],1),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.data.isShow=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{loading:e.data.loading,type:"primary"},on:{click:function(t){return e.save("ruleForm")}}},[e._v("Save")])],1)],1)},o=[],r=(a("6e9f"),{props:["data","countryArr","linked"],data(){let e=(e,t,a)=>{setTimeout(()=>{t&&t.length||a(new Error("Please select at least 1 destination country.")),a()},100)},t=(e,t,a)=>{setTimeout(()=>{(!t||t.length<12||!/^[0-9A-Za-z]*$/.test(t))&&a(new Error("Please enter an IOSS ID with 12 alphanumeric characters.")),a()},100)};return{rules:{name:[{required:!0,message:"Please enter description.",trigger:"blur"}],iossId:[{required:!0,message:"Please enter an IOSS ID with 12 alphanumeric characters.",trigger:"blur"},{validator:t,trigger:"blur"}],countrys:[{validator:e,trigger:"change"}]}}},methods:{save(e){this.data.loading=!0,this.$refs[e].validate(e=>{if(!e)return this.data.loading=!1,!1;{let e={name:this.data.form.name,iossId:this.data.form.iossId,countrys:this.data.form.countrys.join(",")};this.data.id?(e.id=this.data.id,this.$confirm("After saving, your IOSS will be updated to the corresponding order. Are you sure to save?",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"info"}).then(()=>{this.setSave(e)}).catch(()=>{this.data.loading=!1})):this.setSave(e)}})},setSave(e){this.$apiCall("api.User.editIoss",e,e=>{this.data.loading=!1,"9999"==e.ErrorCode?this.$emit("saveIOSSSuccess"):this.$message({message:e.Message,type:"error"})})},opened(){setTimeout(()=>{this.$refs["ruleForm"].clearValidate()},150)},closed(){this.$refs["ruleForm"].clearValidate()}}}),n=r,d=a("e607"),c=Object(d["a"])(n,l,o,!1,null,null,null),u=c.exports,p={data(){return{loading:!1,isOpenIoss:!1,items:[],dialogEditIOSSData:{isShow:!1,loading:!1,id:"",form:{name:"",iossId:"",countrys:[]},oldCountrys:[]},defaultDialogEditIOSSData:"{}",countryArr:[{value:"AT",label:"Austria"},{value:"BE",label:"Belgium"},{value:"BG",label:"Bulgaria"},{value:"CY",label:"Cyprus"},{value:"CZ",label:"Czechia"},{value:"DE",label:"Germany"},{value:"DK",label:"Denmark"},{value:"EE",label:"Estonia"},{value:"ES",label:"Spain"},{value:"FI",label:"Finland"},{value:"FR",label:"France"},{value:"GR",label:"Greece"},{value:"HR",label:"Croatia"},{value:"HU",label:"Hungary"},{value:"IE",label:"Ireland"},{value:"IT",label:"Italy"},{value:"LT",label:"Lithuania"},{value:"LU",label:"Luxembourg"},{value:"LV",label:"Latvia"},{value:"MT",label:"Malta"},{value:"NL",label:"Netherlands (the)"},{value:"PL",label:"Poland"},{value:"PT",label:"Portugal"},{value:"RO",label:"Romania"},{value:"SE",label:"Sweden"},{value:"SI",label:"Slovenia"},{value:"SK",label:"Slovakia"}]}},components:{DialogEditIOSS:u},computed:{linked(){let e=[];return this.items.forEach(t=>{e=e.concat(t.countrys)}),e=[...new Set(e)],{arr:e,linkedNum:e.length,unlinkedNum:this.countryArr.length-e.length}}},mounted(){this.defaultDialogEditIOSSData=JSON.stringify(this.dialogEditIOSSData),this.getItem()},methods:{openIoss(){this.$apiCall("api.User.setIoss",{isOpenIoss:this.isOpenIoss},e=>{"9999"!=e.ErrorCode&&(this.isOpenIoss=!this.isOpenIoss,this.$message({message:e.Message,type:"error"}))})},delIOSS(e,t){this.$confirm("Are you sure to delete the IOSS?",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",confirmButtonClass:" el-button--danger",type:"warning"}).then(()=>{this.loading=!0,this.$apiCall("api.User.deleteIoss",{id:e.id},e=>{this.loading=!1,"9999"==e.ErrorCode?this.items.splice(t,1):this.$message({message:e.Message,type:"error"})})}).catch()},getItem(){this.loading=!0,this.$apiCall("api.User.getIoss",{},e=>{if(this.loading=!1,"9999"==e.ErrorCode){let t=e.Data.Results;this.isOpenIoss=!!t.isOpenIoss,this.items=t.iossSettings.length?t.iossSettings.map(e=>(e.countrys=e.countrys.split(","),e)):[]}else this.$message({message:e.Message,type:"error"})})},saveIOSSSuccess(){this.dialogEditIOSSData.isShow=!1,this.getItem()},openEditIOSS(e){this.dialogEditIOSSData=JSON.parse(this.defaultDialogEditIOSSData),e&&(this.dialogEditIOSSData.form.name=e.name,this.dialogEditIOSSData.form.iossId=e.iossId,this.dialogEditIOSSData.id=e.id,this.dialogEditIOSSData.isShow=!0,this.dialogEditIOSSData.oldCountrys=JSON.parse(JSON.stringify(e.countrys)),setTimeout(()=>{this.$set(this.dialogEditIOSSData.form,"countrys",JSON.parse(JSON.stringify(e.countrys)))},100)),this.dialogEditIOSSData.isShow=!0},showCountry(e){let t="";return this.countryArr.forEach(a=>{a.value==e&&(t=a.label)}),t}}},S=p,h=(a("292d"),Object(d["a"])(S,s,i,!1,null,"247a3dde",null));t["default"]=h.exports}}]);
//# sourceMappingURL=settings.3c71774c.js.map