{"version":3,"sources":["webpack:///./src/views/Settings/Settings.vue?1c79","webpack:///./src/views/Settings/Settings.vue","webpack:///./src/views/Settings/DialogEditIOSS.vue","webpack:///src/views/Settings/DialogEditIOSS.vue","webpack:///./src/views/Settings/DialogEditIOSS.vue?2708","webpack:///./src/views/Settings/DialogEditIOSS.vue?f2b7","webpack:///src/views/Settings/Settings.vue","webpack:///./src/views/Settings/Settings.vue?258a","webpack:///./src/views/Settings/Settings.vue?94a9"],"names":["render","_vm","this","_c","_self","staticClass","attrs","path","_v","directives","name","rawName","value","loading","expression","staticStyle","on","openIoss","model","isOpenIoss","callback","$$v","$event","openEditIOSS","_s","linked","linkedNum","unlinkedNum","items","scopedSlots","_u","key","fn","scope","_l","row","countrys","c","showCountry","delIOSS","$index","ref","countryArr","dialogEditIOSSData","saveIOSSSuccess","staticRenderFns","data","id","isShow","$set","opened","closed","form","rules","iossId","label","arr","indexOf","oldCountrys","slot","save","props","setTimeout","required","message","trigger","validator","methods","params","confirmButtonText","cancelButtonText","type","setSave","component","defaultDialogEditIOSSData","components","DialogEditIOSS","computed","mounted","confirmButtonClass","getItem","e","txt"],"mappings":"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oBAQAC,WACA,wCACA,qBACA,oBACA,8BAEA,eAAAR,kBAAAO,kBAIArB,SACAY,gBACA,wCACA,MAEAX,SACA,2CC/H4c,I,YCOxcsB,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QC6DA,GACf3B,OACA,OACAjC,WACAM,cACAS,SACAe,oBACAK,UACAnC,WACAkC,MACAK,MACA1C,QACA4C,UACAlB,aAEAsB,gBAEAgB,+BACAhC,YACA,CACA9B,WACA2C,iBAEA,CACA3C,WACA2C,iBAEA,CACA3C,WACA2C,kBAEA,CACA3C,WACA2C,gBAEA,CACA3C,WACA2C,iBAEA,CACA3C,WACA2C,iBAEA,CACA3C,WACA2C,iBAEA,CACA3C,WACA2C,iBAEA,CACA3C,WACA2C,eAEA,CACA3C,WACA2C,iBAEA,CACA3C,WACA2C,gBAEA,CACA3C,WACA2C,gBAEA,CACA3C,WACA2C,iBAEA,CACA3C,WACA2C,iBAEA,CACA3C,WACA2C,iBAEA,CACA3C,WACA2C,eAEA,CACA3C,WACA2C,mBAEA,CACA3C,WACA2C,oBAEA,CACA3C,WACA2C,gBAEA,CACA3C,WACA2C,eAEA,CACA3C,WACA2C,2BAEA,CACA3C,WACA2C,gBAEA,CACA3C,WACA2C,kBAEA,CACA3C,WACA2C,iBAEA,CACA3C,WACA2C,gBAEA,CACA3C,WACA2C,kBAEA,CACA3C,WACA2C,qBAKAoB,YACAC,kBAEAC,UACApD,SACA,SAKA,OAJA,uBACA+B,yBAEAA,kBACA,CACAA,MACA9B,mBACAC,+CAIAmD,UACA,uEACA,gBAEAX,SACAlD,WACA,kCAAAE,4BAAA,IACA,sBACA,iCACA,eAAA6C,kBAAAO,mBAIAhC,aACA,kDACA8B,4BACAC,0BACAS,wCACAR,iBACA,UACA,gBACA,qCAAAxB,SAAA,IACA,gBACA,oBACA,uBAEA,eAAAiB,kBAAAO,mBAGA,SAEAS,UACA,gBACA,wCAEA,GADA,gBACA,qBACA,qBACA,+BACA,wDACAC,iCACA,IACA,QAEA,eAAAjB,kBAAAO,kBAIA3B,kBACA,kCACA,gBAEArB,gBACA,mEACA,IACA,yCACA,6CACA,gCACA,kCACA,2EACAuC,gBACA,2FACA,MAEA,mCAGAxB,eACA,SAMA,OALA,4BACA,aACA4C,aAGA,KC3Ssc,ICQlc,G,UAAY,eACd,EACAlF,EACA6C,GACA,EACA,KACA,WACA,OAIa,e","file":"js/settings.3c71774c.js","sourcesContent":["export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader@15.10.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&id=247a3dde&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"contentpanel settings-page\"},[_c('div',{staticClass:\"pagetitle\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{path: '/dashboard'}}},[_vm._v(\"Dashboard\")]),_c('el-breadcrumb-item',[_vm._v(\"Settings\")])],1)],1),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"pagebody\"},[_c('el-row',{staticClass:\"mg-b-20\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":24}},[_c('el-card',[_c('el-alert',{staticStyle:{\"margin-bottom\":\"25px\"},attrs:{\"title\":\"According to the new European VAT e-commerce rules, declaration without lOSS will result in a delay in customs clearance and the recipient will be required to pay VAT, as the parcel will be detained when contact of the recipient is incorrect.\",\"type\":\"info\",\"show-icon\":\"\",\"closable\":false}}),_c('div',{staticClass:\"options-wrap\"},[_c('h3',[_vm._v(\"IOSS Options\")]),_c('div',[_c('el-radio',{attrs:{\"label\":false},on:{\"change\":_vm.openIoss},model:{value:(_vm.isOpenIoss),callback:function ($$v) {_vm.isOpenIoss=$$v},expression:\"isOpenIoss\"}},[_vm._v(\"No IOSS\")]),_c('p',{staticClass:\"mg-b-15\"},[_vm._v(\"The amount of the orders (shipping cost included) will be declared and recipients will be required by the customs to pay VAT when parcels arrive in the destination countries of EU\")]),_c('el-radio',{attrs:{\"label\":true},on:{\"change\":_vm.openIoss},model:{value:(_vm.isOpenIoss),callback:function ($$v) {_vm.isOpenIoss=$$v},expression:\"isOpenIoss\"}},[_vm._v(\"Declare with my own IOSS\")]),_c('p',[_vm._v(\"Please enter correct and valid IOSS IDs, which should be linked to corresponding destination countries. IOSS ID will not be applied if the destination country is not linked to a correct IOSS ID\")])],1)]),_c('div',{staticClass:\"settings-wrap\"},[_c('h3',[_vm._v(\"My IOSS Settings\")]),_c('div',{staticClass:\"action d-flex\"},[_c('div',{staticClass:\"left\"},[_c('el-button',{attrs:{\"icon\":\"el-icon-plus\",\"type\":\"primary\",\"size\":\"small\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.openEditIOSS()}}},[_vm._v(\"Add IOSS\")])],1),_c('div',{staticClass:\"right\"},[_c('span',[_vm._v(\"Linked Countries: \"),_c('b',{staticStyle:{\"color\":\"#5c6ac4\"}},[_vm._v(_vm._s(_vm.linked.linkedNum))])]),_c('span',[_vm._v(\"Unlinked Countries: \"),_c('b',{staticStyle:{\"color\":\"#909399\"}},[_vm._v(_vm._s(_vm.linked.unlinkedNum))])])])]),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.items,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"Description\",\"prop\":\"name\"}}),_c('el-table-column',{attrs:{\"label\":\"IOSS ID\",\"prop\":\"iossId\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"label\":\"Destination Country\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',_vm._l((scope.row.countrys),function(c){return _c('el-tag',{key:c,staticStyle:{\"margin\":\"5px\"}},[_vm._v(\" \"+_vm._s(_vm.showCountry(c))+\" \")])}),1)]}}])}),_c('el-table-column',{attrs:{\"label\":\"Action\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-link',{staticStyle:{\"margin-right\":\"20px\"},attrs:{\"icon\":\"el-icon-edit\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.openEditIOSS(scope.row)}}}),_c('el-link',{attrs:{\"icon\":\"el-icon-delete\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.delIOSS(scope.row, scope.$index)}}})],1)]}}])})],1)],1)],1)],1)],1)],1),_c('DialogEditIOSS',{ref:\"editIoss\",attrs:{\"countryArr\":_vm.countryArr,\"linked\":_vm.linked,\"data\":_vm.dialogEditIOSSData},on:{\"saveIOSSSuccess\":_vm.saveIOSSSuccess}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"title\":`${_vm.data.id ? 'Edit' : 'Add'} IOSS`,\"visible\":_vm.data.isShow,\"close-on-click-modal\":false,\"width\":\"600px\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.data, \"isShow\", $event)},\"open\":_vm.opened,\"close\":_vm.closed}},[_c('el-divider'),_c('div',{staticClass:\"d-body\"},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.data.form,\"rules\":_vm.rules,\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"Description:\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"Please enter description\"},model:{value:(_vm.data.form.name),callback:function ($$v) {_vm.$set(_vm.data.form, \"name\", $$v)},expression:\"data.form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"IOSS ID:\",\"prop\":\"iossId\"}},[_c('el-input',{attrs:{\"placeholder\":\"Please enter IOSS ID\"},model:{value:(_vm.data.form.iossId),callback:function ($$v) {_vm.$set(_vm.data.form, \"iossId\", $$v)},expression:\"data.form.iossId\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Destination Country:\",\"prop\":\"countrys\",\"required\":\"\"}},[_c('el-select',{staticStyle:{\"width\":\"412px\"},attrs:{\"multiple\":\"\",\"filterable\":\"\",\"default-first-option\":\"\",\"placeholder\":\"Please select destination country\"},model:{value:(_vm.data.form.countrys),callback:function ($$v) {_vm.$set(_vm.data.form, \"countrys\", $$v)},expression:\"data.form.countrys\"}},_vm._l((_vm.countryArr),function(c){return _c('el-option',{key:c.value,attrs:{\"label\":c.label,\"value\":c.value,\"disabled\":_vm.linked.arr.indexOf(c.value) > -1 && _vm.data.oldCountrys.indexOf(c.value) < 0}})}),1)],1)],1)],1),_c('el-divider'),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.data.isShow = false}}},[_vm._v(\"Cancel\")]),_c('el-button',{attrs:{\"loading\":_vm.data.loading,\"type\":\"primary\"},on:{\"click\":function($event){return _vm.save('ruleForm')}}},[_vm._v(\"Save\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog\r\n    :title=\"`${data.id ? 'Edit' : 'Add'} IOSS`\"\r\n    :visible.sync=\"data.isShow\"\r\n    :close-on-click-modal=\"false\"\r\n    width=\"600px\"\r\n    @open=\"opened\"\r\n    @close=\"closed\"\r\n  >\r\n    <el-divider></el-divider>\r\n    <div class=\"d-body\">\r\n      <el-form :model=\"data.form\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"150px\">\r\n        <el-form-item label=\"Description:\" prop=\"name\" >\r\n          <el-input v-model=\"data.form.name\" placeholder=\"Please enter description\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"IOSS ID:\" prop=\"iossId\">\r\n          <el-input v-model=\"data.form.iossId\" placeholder=\"Please enter IOSS ID\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"Destination Country:\" prop=\"countrys\" required>\r\n          <el-select v-model=\"data.form.countrys\"\r\n            multiple\r\n            filterable\r\n            default-first-option\r\n            placeholder=\"Please select destination country\"\r\n            style=\"width: 412px\"\r\n          >\r\n            <!-- disabled 选过的不能选 -->\r\n            <el-option\r\n              v-for=\"c in countryArr\" :key=\"c.value\"\r\n              :label=\"c.label\"\r\n              :value=\"c.value\" \r\n              :disabled=\"linked.arr.indexOf(c.value) > -1 && data.oldCountrys.indexOf(c.value) < 0\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>  \r\n      </el-form>  \r\n    </div>\r\n    <el-divider></el-divider>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"data.isShow = false\">Cancel</el-button>\r\n      <el-button :loading=\"data.loading\" type=\"primary\" @click=\"save('ruleForm')\">Save</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: [\"data\", \"countryArr\", \"linked\"],\r\n  data(){\r\n    let checkCountrys = (rule, value, callback) => { //验证国家\r\n      setTimeout(()=>{\r\n        if(!value || !value.length){\r\n          callback(new Error('Please select at least 1 destination country.'))\r\n        }\r\n        callback();\r\n      },100);\r\n    }\r\n    let iossIdLen = (rule, value, callback) => { //验证ioss\r\n      setTimeout(() => {\r\n        if(!value || value.length < 12 || !/^[0-9A-Za-z]*$/.test(value)){ \r\n        callback(new Error('Please enter an IOSS ID with 12 alphanumeric characters.'))\r\n      }\r\n      callback();\r\n      },100);\r\n    }\r\n    return {\r\n      rules:{\r\n        name: [\r\n          {required: true, message: 'Please enter description.', trigger: 'blur'},\r\n        ],\r\n        iossId: [\r\n          {required: true, message: 'Please enter an IOSS ID with 12 alphanumeric characters.', trigger: 'blur'},\r\n          {validator: iossIdLen, trigger: 'blur'},\r\n        ],\r\n        countrys: [\r\n          {validator: checkCountrys, trigger: 'change'}\r\n        ],\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    save(formName){\r\n      this.data.loading = true;\r\n      this.$refs[formName].validate((valid) => {\r\n        if(valid){\r\n          let params = {\r\n            name: this.data.form.name,\r\n            iossId: this.data.form.iossId,\r\n            countrys: this.data.form.countrys.join(',')\r\n          }\r\n          if(this.data.id){  //修改保存\r\n            params.id = this.data.id;\r\n            this.$confirm(\"After saving, your IOSS will be updated to the corresponding order. Are you sure to save?\", {\r\n              confirmButtonText: \"Confirm\",\r\n              cancelButtonText: \"Cancel\",\r\n              type: \"info\",\r\n            },).then(()=>{\r\n              this.setSave(params)\r\n            }).catch(()=>{\r\n              this.data.loading = false;\r\n            }); \r\n          }else{ //新建保存\r\n            this.setSave(params);\r\n          }\r\n        }else{\r\n          this.data.loading = false;\r\n          return false;\r\n        }\r\n      })\r\n    },\r\n    setSave(params){\r\n      this.$apiCall('api.User.editIoss', params, r => {\r\n        this.data.loading = false;\r\n        if (r.ErrorCode == '9999') {\r\n          this.$emit('saveIOSSSuccess')\r\n        }else{\r\n          this.$message({message: r.Message, type: \"error\"});\r\n        }\r\n      })\r\n    },\r\n    opened(){\r\n      setTimeout(()=>{\r\n        this.$refs['ruleForm'].clearValidate();\r\n      },150)\r\n    },\r\n    closed(){\r\n      this.$refs['ruleForm'].clearValidate();\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!./DialogEditIOSS.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!./DialogEditIOSS.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DialogEditIOSS.vue?vue&type=template&id=08c63116&\"\nimport script from \"./DialogEditIOSS.vue?vue&type=script&lang=js&\"\nexport * from \"./DialogEditIOSS.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.10.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"contentpanel settings-page\">\r\n    <div class=\"pagetitle\">\r\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{path: '/dashboard'}\"\r\n          >Dashboard</el-breadcrumb-item\r\n        >\r\n        <el-breadcrumb-item>Settings</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n    <div v-loading=\"loading\" class=\"pagebody\">\r\n      <el-row :gutter=\"20\" class=\"mg-b-20\">\r\n        <el-col :span=\"24\">\r\n          <el-card>\r\n            <el-alert\r\n              title=\"According to the new European VAT e-commerce rules, declaration without lOSS will result in a delay in customs clearance and the recipient will be required to pay VAT, as the parcel will be detained when contact of the recipient is incorrect.\"\r\n              type=\"info\"\r\n              show-icon\r\n              :closable=\"false\"\r\n              style=\" margin-bottom: 25px;\"\r\n            >\r\n            </el-alert>\r\n            <div class=\"options-wrap\">\r\n              <h3>IOSS Options</h3>\r\n              <div>\r\n                <el-radio v-model=\"isOpenIoss\" :label=\"false\" @change=\"openIoss\">No IOSS</el-radio>\r\n                <p class=\" mg-b-15\">The amount of the orders (shipping cost included) will be declared and recipients will be required by the customs to pay VAT when parcels arrive in the destination countries of EU</p>\r\n                <el-radio v-model=\"isOpenIoss\" :label=\"true\"  @change=\"openIoss\">Declare with my own IOSS</el-radio>\r\n                <p>Please enter correct and valid IOSS IDs, which should be linked to corresponding destination countries. IOSS ID will not be applied if the destination country is not linked to a correct IOSS ID</p>\r\n              </div>\r\n            </div>\r\n            <div class=\"settings-wrap\">\r\n              <h3>My IOSS Settings</h3>\r\n              <div class=\" action d-flex\">\r\n                <div class=\"left\">\r\n                  <el-button icon=\"el-icon-plus\" type=\"primary\" size=\"small\" plain @click=\"openEditIOSS()\">Add IOSS</el-button>\r\n                </div>\r\n                <div class=\"right\">\r\n                  <span>Linked Countries: <b style=\" color: #5c6ac4;\">{{linked.linkedNum}}</b></span>\r\n                  <span>Unlinked Countries: <b style=\" color: #909399;\">{{linked.unlinkedNum}}</b></span>\r\n                </div>\r\n              </div>\r\n              <el-table\r\n                :data=\"items\"\r\n                stripe\r\n                style=\"width: 100%\"\r\n              >\r\n                <el-table-column label=\"Description\" prop=\"name\"></el-table-column>\r\n                <el-table-column label=\"IOSS ID\" prop=\"iossId\" width=\"200\"></el-table-column>\r\n                <el-table-column label=\"Destination Country\" >\r\n                  <template slot-scope=\"scope\">\r\n                    <div>\r\n                      <el-tag v-for=\"c in scope.row.countrys\" :key=\"c\" style=\" margin: 5px;\">\r\n                        {{showCountry(c)}}\r\n                      </el-tag>\r\n                    </div>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"Action\" >\r\n                  <template slot-scope=\"scope\">\r\n                    <div>\r\n                      <el-link icon=\"el-icon-edit\" type=\"primary\" style=\" margin-right: 20px;\" @click=\"openEditIOSS(scope.row)\"></el-link>\r\n                      <el-link icon=\"el-icon-delete\" type=\"danger\" @click=\"delIOSS(scope.row, scope.$index)\"></el-link>\r\n                    </div>\r\n                  </template>\r\n                </el-table-column>\r\n\r\n              </el-table>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <DialogEditIOSS ref=\"editIoss\" :countryArr=\"countryArr\" :linked=\"linked\" :data=\"dialogEditIOSSData\" @saveIOSSSuccess=\"saveIOSSSuccess\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DialogEditIOSS from '@/views/Settings/DialogEditIOSS' \r\nexport default {\r\n  data(){\r\n    return {\r\n      loading: false,\r\n      isOpenIoss: false,\r\n      items: [],\r\n      dialogEditIOSSData: {\r\n        isShow: false,\r\n        loading: false,\r\n        id: '',\r\n        form: {\r\n          name: '',\r\n          iossId: '',\r\n          countrys: [],\r\n        },\r\n        oldCountrys: [],\r\n      },\r\n      defaultDialogEditIOSSData: '{}',\r\n      countryArr: [\r\n          {\r\n            value: 'AT',\r\n            label: 'Austria',\r\n          },\r\n          {\r\n            value: 'BE',\r\n            label: 'Belgium',\r\n          },\r\n          {\r\n            value: 'BG',\r\n            label: 'Bulgaria',\r\n          },\r\n          {\r\n            value: 'CY',\r\n            label: 'Cyprus',\r\n          },\r\n          {\r\n            value: 'CZ',\r\n            label: 'Czechia',\r\n          },\r\n          {\r\n            value: 'DE',\r\n            label: 'Germany',\r\n          },\r\n          {\r\n            value: 'DK',\r\n            label: 'Denmark',\r\n          },\r\n          {\r\n            value: 'EE',\r\n            label: 'Estonia',\r\n          },\r\n          {\r\n            value: 'ES',\r\n            label: 'Spain',\r\n          },\r\n          {\r\n            value: 'FI',\r\n            label: 'Finland',\r\n          },\r\n          {\r\n            value: 'FR',\r\n            label: 'France',\r\n          },\r\n          {\r\n            value: 'GR',\r\n            label: 'Greece',\r\n          },\r\n          {\r\n            value: 'HR',\r\n            label: 'Croatia',\r\n          },\r\n          {\r\n            value: 'HU',\r\n            label: 'Hungary',\r\n          },\r\n          {\r\n            value: 'IE',\r\n            label: 'Ireland',\r\n          },\r\n          {\r\n            value: 'IT',\r\n            label: 'Italy',\r\n          },\r\n          {\r\n            value: 'LT',\r\n            label: 'Lithuania',\r\n          },\r\n          {\r\n            value: 'LU',\r\n            label: 'Luxembourg',\r\n          },\r\n          {\r\n            value: 'LV',\r\n            label: 'Latvia',\r\n          },\r\n          {\r\n            value: 'MT',\r\n            label: 'Malta',\r\n          },\r\n          {\r\n            value: 'NL',\r\n            label: 'Netherlands (the)',\r\n          },\r\n          {\r\n            value: 'PL',\r\n            label: 'Poland',\r\n          },\r\n          {\r\n            value: 'PT',\r\n            label: 'Portugal',\r\n          },\r\n          {\r\n            value: 'RO',\r\n            label: 'Romania',\r\n          },\r\n          {\r\n            value: 'SE',\r\n            label: 'Sweden',\r\n          },\r\n          {\r\n            value: 'SI',\r\n            label: 'Slovenia',\r\n          },\r\n          {\r\n            value: 'SK',\r\n            label: 'Slovakia',\r\n          },\r\n        ]\r\n    }\r\n  },\r\n  components: {\r\n    DialogEditIOSS,\r\n  },\r\n  computed: {\r\n    linked(){\r\n      let arr = [];\r\n      this.items.forEach(item => {\r\n        arr = arr.concat(item.countrys)\r\n      })\r\n      arr = [...new Set(arr)]\r\n      return {\r\n        arr,\r\n        linkedNum: arr.length,\r\n        unlinkedNum: this.countryArr.length - arr.length,\r\n      }\r\n    },\r\n  },\r\n  mounted(){\r\n    this.defaultDialogEditIOSSData = JSON.stringify(this.dialogEditIOSSData)\r\n    this.getItem();\r\n  },\r\n  methods:{\r\n    openIoss(){ //Ioss options\r\n      this.$apiCall('api.User.setIoss', {isOpenIoss: this.isOpenIoss}, r => {\r\n        if (r.ErrorCode != '9999') { //失败\r\n          this.isOpenIoss = !this.isOpenIoss\r\n          this.$message({message: r.Message, type: \"error\"});\r\n        }\r\n      })\r\n    },\r\n    delIOSS(item, i){\r\n      this.$confirm(\"Are you sure to delete the IOSS?\", {\r\n        confirmButtonText: \"Confirm\",\r\n        cancelButtonText: \"Cancel\",\r\n        confirmButtonClass: \" el-button--danger\",\r\n        type: \"warning\",\r\n      }).then(()=>{\r\n        this.loading = true;\r\n        this.$apiCall('api.User.deleteIoss', {id: item.id}, r => {\r\n          this.loading = false;\r\n          if (r.ErrorCode == '9999') {\r\n            this.items.splice(i, 1);\r\n          }else{\r\n            this.$message({message: r.Message, type: \"error\"});\r\n          }\r\n        })\r\n      }).catch(); \r\n    },\r\n    getItem(){\r\n      this.loading = true;\r\n      this.$apiCall('api.User.getIoss', {}, r => {\r\n        this.loading = false;\r\n        if (r.ErrorCode == '9999') {\r\n          let data = r.Data.Results\r\n          this.isOpenIoss = data.isOpenIoss ? true : false;\r\n          this.items = data.iossSettings.length ? data.iossSettings.map(e => {\r\n            e.countrys = e.countrys.split(','); \r\n            return e;\r\n            }) : [];\r\n        }else{\r\n          this.$message({message: r.Message, type: \"error\"});\r\n        }\r\n      })\r\n    },\r\n    saveIOSSSuccess(){ //ioss保存成功\r\n      this.dialogEditIOSSData.isShow = false;\r\n      this.getItem();\r\n    },\r\n    openEditIOSS(item){ //打开编辑ioss\r\n      this.dialogEditIOSSData = JSON.parse(this.defaultDialogEditIOSSData)\r\n      if(item){ //编辑 \r\n        this.dialogEditIOSSData.form.name = item.name;\r\n        this.dialogEditIOSSData.form.iossId = item.iossId;\r\n        this.dialogEditIOSSData.id = item.id;\r\n        this.dialogEditIOSSData.isShow = true;\r\n        this.dialogEditIOSSData.oldCountrys = JSON.parse(JSON.stringify(item.countrys));\r\n        setTimeout(()=>{\r\n          this.$set(this.dialogEditIOSSData.form, 'countrys', JSON.parse(JSON.stringify(item.countrys)))\r\n        },100)\r\n      }\r\n      this.dialogEditIOSSData.isShow = true;\r\n      \r\n    },\r\n    showCountry(code){\r\n      let txt = '';\r\n      this.countryArr.forEach(e => {\r\n        if(e.value == code){\r\n          txt = e.label;\r\n        }\r\n      })\r\n      return txt;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.options-wrap{\r\n  margin-bottom: 25px;\r\n  h3{\r\n    margin-bottom: 15px;\r\n    font-weight: bold;\r\n    font-size: 16px;\r\n  }\r\n  p{\r\n    color: #909399;\r\n  }\r\n}\r\n.settings-wrap{\r\n  margin-bottom: 25px;\r\n  h3{\r\n    margin-bottom: 15px;\r\n    font-weight: bold;\r\n    font-size: 16px;\r\n  }\r\n  .action{\r\n    margin-bottom: 10px;\r\n    justify-content: space-between;\r\n    .right{\r\n      > span{\r\n        margin-right: 20px;\r\n        > b{\r\n          margin: 0 5px;\r\n          font-size: 24px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.10.1@vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=247a3dde&scoped=true&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Settings.vue?vue&type=style&index=0&id=247a3dde&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.10.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"247a3dde\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}