(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["transactionDetail"],{"0a30":function(e,t,a){"use strict";a("ed97")},1622:function(e,t,a){"use strict";a("6da1")},"6da1":function(e,t,a){},7085:function(e,t,a){"use strict";a("f132")},c330:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"contentpanel transaction-page"},[t("div",{ref:"pageHeader",staticClass:"pagetitle"},[e._m(0),t("div",{staticClass:"right"})]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pagebody"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"normal bill",name:"2"}},[t("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("el-card",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("div",{ref:"pageFilter",staticClass:"page-filter"},[t("el-form",{attrs:{inline:!0,size:"mini"}},[t("el-form-item",{attrs:{label:"Create Date"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(t){return e.clearFilter("date")},change:e.dateChange},model:{value:e.filterParams.date,callback:function(t){e.$set(e.filterParams,"date",t)},expression:"filterParams.date"}})],1),t("el-form-item",[t("el-radio-group",{attrs:{size:"mini"},on:{change:e.filterDate},model:{value:e.dateFilter,callback:function(t){e.dateFilter=t},expression:"dateFilter"}},[t("el-radio-button",{attrs:{label:"1"}},[e._v("Today")]),t("el-radio-button",{attrs:{label:"2"}},[e._v("Yestoday ")]),t("el-radio-button",{attrs:{label:"3"}},[e._v("Last 7 days ")]),t("el-radio-button",{attrs:{label:"4"}},[e._v("Last 30 days ")])],1)],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"Payment code",clearable:""},on:{clear:function(t){return e.clearFilter("paymentCode")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.filterParams.paymentCode,callback:function(t){e.$set(e.filterParams,"paymentCode",t)},expression:"filterParams.paymentCode"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"Third Party Number",clearable:""},on:{clear:function(t){return e.clearFilter("code")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.filterParams.code,callback:function(t){e.$set(e.filterParams,"code",t)},expression:"filterParams.code"}})],1),t("el-form-item",{attrs:{label:"Trade type: "}},[t("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:e.filterItem,clear:function(t){return e.clearFilter("tradeType")}},model:{value:e.filterParams.tradeType,callback:function(t){e.$set(e.filterParams,"tradeType",t)},expression:"filterParams.tradeType"}},e._l(e.tradeTypeArr,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"Trade status: "}},[t("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:e.filterItem,clear:function(t){return e.clearFilter("tradeStatus")}},model:{value:e.filterParams.tradeStatus,callback:function(t){e.$set(e.filterParams,"tradeStatus",t)},expression:"filterParams.tradeStatus"}},e._l(e.tradeStatusArr,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"Account payee: "}},[t("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:e.filterItem,clear:function(t){return e.clearFilter("accountPayee")}},model:{value:e.filterParams.accountPayee,callback:function(t){e.$set(e.filterParams,"accountPayee",t)},expression:"filterParams.accountPayee"}},e._l(e.accountPayeeArr,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"Order number",clearable:""},on:{clear:function(t){return e.clearFilter("shopifyOrder")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.filterParams.shopifyOrder,callback:function(t){e.$set(e.filterParams,"shopifyOrder",t)},expression:"filterParams.shopifyOrder"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.filterItem}},[e._v("Filter")]),t("el-button",{attrs:{type:"danger"},on:{click:e.clearFilter}},[e._v("Clear")])],1)],1)],1)])],1),t("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,"tooltip-effect":"dark","row-key":e=>e.id},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{label:"Create Date",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.moment.unix(a.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),t("el-table-column",{attrs:{label:"Payment code",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.sysCode||"---"))])]}}])}),t("el-table-column",{attrs:{label:"Third Party Number","min-width":"350"},scopedSlots:e._u([{key:"default",fn:function(a){return["96"==a.row.code||"97"==a.row.code||"98"==a.row.code||"99"==a.row.code?t("span",[e._v("---")]):t("span",[e._v(e._s(a.row.code||"---"))])]}}])}),t("el-table-column",{attrs:{label:"Trade type",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.filterText("tradeType",a.row.type)))])]}}])}),t("el-table-column",{attrs:{label:`Trade amount(${e.$store.state.country.symbol})`,width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[3==a.row.status?t("span",{staticClass:"tx-danger"},[e._v("- "+e._s(a.row.totalAmount))]):t("span",[e._v(e._s(a.row.totalAmount))])]}}])}),t("el-table-column",{attrs:{label:"Trade status",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.filterText("tradeStatus",a.row.status)))])]}}])}),t("el-table-column",{attrs:{label:"Payment type",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.filterText("platformType",a.row.platformType)))])]}}])}),t("el-table-column",{attrs:{label:"Remark"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.remark||"---"))])]}}])}),t("el-table-column",{attrs:{label:"Operate",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[t("el-link",{staticClass:"mg-r-20",attrs:{disabled:"1"!=a.row.type,type:"primary"},on:{click:function(t){return e.openExportDetail(a.row)}}},[e._v(" View detail ")])],1)]}}])})],1)],1)],1)],1),e.items.length?t("el-row",{attrs:{gutter:20}},[t("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[t("div",[t("el-pagination",{attrs:{"current-page":e.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.pageSizes,"page-size":e.rowsPerPage,total:Number(e.total)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e()],1),t("el-tab-pane",{attrs:{label:"abnormal bill",name:"1"}},[t("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("el-card",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("div",{ref:"pageFilter",staticClass:"page-filter"},[t("el-form",{attrs:{inline:!0,size:"mini"}},[t("el-form-item",{attrs:{label:"Create Date"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(t){return e.clearFilter("date")},change:e.dateChange},model:{value:e.filterParams.date,callback:function(t){e.$set(e.filterParams,"date",t)},expression:"filterParams.date"}})],1),t("el-form-item",[t("el-radio-group",{attrs:{size:"mini"},on:{change:e.filterDate},model:{value:e.dateFilter,callback:function(t){e.dateFilter=t},expression:"dateFilter"}},[t("el-radio-button",{attrs:{label:"1"}},[e._v("Today")]),t("el-radio-button",{attrs:{label:"2"}},[e._v("Yestoday ")]),t("el-radio-button",{attrs:{label:"3"}},[e._v("Last 7 days ")]),t("el-radio-button",{attrs:{label:"4"}},[e._v("Last 30 days ")])],1)],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"Payment code",clearable:""},on:{clear:function(t){return e.clearFilter("paymentCode")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.filterParams.paymentCode,callback:function(t){e.$set(e.filterParams,"paymentCode",t)},expression:"filterParams.paymentCode"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"Third Party Number",clearable:""},on:{clear:function(t){return e.clearFilter("code")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.filterParams.code,callback:function(t){e.$set(e.filterParams,"code",t)},expression:"filterParams.code"}})],1),t("el-form-item",{attrs:{label:"Trade type: "}},[t("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:e.filterItem,clear:function(t){return e.clearFilter("tradeType")}},model:{value:e.filterParams.tradeType,callback:function(t){e.$set(e.filterParams,"tradeType",t)},expression:"filterParams.tradeType"}},e._l(e.tradeTypeArr,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"Trade status: "}},[t("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:e.filterItem,clear:function(t){return e.clearFilter("tradeStatus")}},model:{value:e.filterParams.tradeStatus,callback:function(t){e.$set(e.filterParams,"tradeStatus",t)},expression:"filterParams.tradeStatus"}},e._l(e.tradeStatusArr,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"Account payee: "}},[t("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:e.filterItem,clear:function(t){return e.clearFilter("accountPayee")}},model:{value:e.filterParams.accountPayee,callback:function(t){e.$set(e.filterParams,"accountPayee",t)},expression:"filterParams.accountPayee"}},e._l(e.accountPayeeArr,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"Order number",clearable:""},on:{clear:function(t){return e.clearFilter("shopifyOrder")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.filterParams.shopifyOrder,callback:function(t){e.$set(e.filterParams,"shopifyOrder",t)},expression:"filterParams.shopifyOrder"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.filterItem}},[e._v("Filter")]),t("el-button",{attrs:{type:"danger"},on:{click:e.clearFilter}},[e._v("Clear")])],1)],1)],1)])],1),t("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,"tooltip-effect":"dark","row-key":e=>e.id},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{label:"Create Date",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.moment.unix(a.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),t("el-table-column",{attrs:{label:"Payment code",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.sysCode||"---"))])]}}])}),t("el-table-column",{attrs:{label:"Third Party Number","min-width":"350"},scopedSlots:e._u([{key:"default",fn:function(a){return["96"==a.row.code||"97"==a.row.code||"98"==a.row.code||"99"==a.row.code?t("span",[e._v("---")]):t("span",[e._v(e._s(a.row.code||"---"))])]}}])}),t("el-table-column",{attrs:{label:"Trade type",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.filterText("tradeType",a.row.type)))])]}}])}),t("el-table-column",{attrs:{label:" Amount paid/Credit payment",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"tx-danger"},[e._v(" "+e._s(Number(a.row.bonusAmount).toFixed(2)))]),e._v(" "),t("br"),t("span",[e._v(e._s(Number(a.row.creditAmount).toFixed(2)))])]}}])}),t("el-table-column",{attrs:{label:"Trade status",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.filterText("tradeStatus",a.row.status)))])]}}])}),t("el-table-column",{attrs:{label:"Payment type",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.filterText("platformType",a.row.platformType)))])]}}])}),t("el-table-column",{attrs:{label:"Remark"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.remark||"---"))])]}}])}),t("el-table-column",{attrs:{label:"Operate",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[t("el-link",{staticClass:"mg-r-20",attrs:{disabled:"1"!=a.row.type,type:"primary"},on:{click:function(t){return e.openExportDetail(a.row)}}},[e._v(" View detail ")])],1)]}}])})],1)],1)],1)],1),e.items.length?t("el-row",{attrs:{gutter:20}},[t("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[t("div",[t("el-pagination",{attrs:{"current-page":e.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.pageSizes,"page-size":e.rowsPerPage,total:Number(e.total)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e()],1)],1)],1),t("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:20}}),t("el-dialog",{staticClass:"dialog-open-custom",attrs:{title:"Detail export records",visible:e.viewDetail.isShow,width:"50%"},on:{close:function(t){e.viewDetail.isShow=!1}}},[t("el-divider"),t("div",{staticClass:"dialog-body"},[t("el-row",{staticClass:"tltle"},[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content"},[e._v(" The export of time："+e._s(e.moment().format("YYYY-MM-DD HH:mm:ss"))+" ")])]),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content"},[e._v(" Petitioner："+e._s(e.$store.state.userInfo.name)+" ")])])],1),e._l(e.viewDetail.items,(function(a){return t("div",{staticClass:"item-wrap"},[t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content"},[e._v(" Create Date："+e._s(e.moment.unix(a.timeCreated).format("YYYY-MM-DD HH:mm:ss"))+" ")])]),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content"},[e._v(" Payment code："+e._s(a.sysCode)+" ")])])],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content"},[e._v(" Trade type："+e._s(e.filterText("tradeType",a.type))+" ")])]),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content"},[e._v(" Trade amount("+e._s(e.$store.state.country.symbol)+")："+e._s(e.$exchangeRate(a.totalAmount))+" ")])])],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content"},[e._v(" Third Party Number："+e._s(a.code)+" ")])])],1)],1)}))],2),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.viewDetail.isShow=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary",loading:e.viewDetail.exportLoading},on:{click:e.exportDetailFn}},[e._v(" Export ")])],1)],1),t("DialogDetail",{attrs:{data:e.dialogDetailData}})],1)},l=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"left"},[t("div",{staticClass:"title"},[t("i",{staticClass:"el-icon-s-finance"}),t("h2",[e._v("Transaction")])])])}],i=(a("149f"),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"Billing Detail",visible:e.data.isShow,width:"960px","custom-class":"d-detail"},on:{"update:visible":function(t){return e.$set(e.data,"isShow",t)}}},[t("el-divider"),t("div",{staticClass:"d-body"},[t("div",{staticClass:"t-table"},[t("div",{staticClass:"t-header"},[t("div",{staticClass:"c c1"},[e._v("Your shop order num")]),t("div",{staticClass:"c c2"},[e._v("Order Number")]),t("div",{staticClass:"c c3"},[e._v("Total Payment("+e._s(e.$store.state.country.symbol)+")")]),t("div",{staticClass:"c c4"},[e._v("Freight("+e._s(e.$store.state.country.symbol)+")")]),t("div",{staticClass:"c c5"},[e._v("Total Merchandise("+e._s(e.$store.state.country.symbol)+")")]),t("div",{staticClass:"c c6"},[e._v("SKU Details")]),t("div",{staticClass:"c c7"},[e._v("Commodity Price("+e._s(e.$store.state.country.symbol)+")")]),t("div",{staticClass:"c c8"},[e._v("Quantity")]),t("div",{staticClass:"c c9"},[e._v("weight(g)")])]),t("div",{staticClass:"t-body"},e._l(e.data.items,(function(a){return t("div",{key:a.id,staticClass:"t-row"},[t("div",{staticClass:"c c1"},[e._v(e._s(a.codeName))]),t("div",{staticClass:"c c2"},[e._v(e._s(a.orderId))]),t("div",{staticClass:"c c3"},[e._v(e._s(a.payTotalAmount))]),t("div",{staticClass:"c c4"},[e._v(e._s(a.shippingAllAmount))]),t("div",{staticClass:"c c5"},[e._v(e._s(a.itemAllAmount))]),t("div",{staticClass:"c c6-9"},e._l(a.items,(function(a){return t("div",{key:a.id,staticClass:"c-sub"},[t("div",{staticClass:"c c6"},[e._v(e._s(a.vendorSku))]),t("div",{staticClass:"c c7"},[e._v(e._s(a.vendorPrice))]),t("div",{staticClass:"c c8"},[e._v(e._s(a.quantity))]),t("div",{staticClass:"c c9"},[e._v(e._s(Number(a.weight)*Number(a.quantity)))])])})),0)])})),0)])]),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.data.isShow=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary",loading:e.data.loading},on:{click:e.exportDetailFn}},[e._v(" Export ")])],1)],1)}),s=[],o={props:["data"],methods:{exportDetailFn(){this.data.loading=!0,0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>'),this.$apiCall("api.AccountPayment.exportPayment",{ids:this.data.ids,isNew:1},e=>{this.data.loading=!1,"9999"==e.ErrorCode?(document.getElementById("ifilePro").src=e.Data.Results.file,this.$elementMessage("Export success","success"),this.data.isShow=!1):this.$elementMessage(e.Message,"error")})}}},n=o,c=(a("7085"),a("e607")),d=Object(c["a"])(n,i,s,!1,null,"02b6728c",null),m=d.exports,u={data(){return{loading:!1,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("c_transactionRowsPerPage")?Number(localStorage.getItem("c_transactionRowsPerPage")):10,items:[],total:0,activeName:"2",totalPage:0,filterParams:{verdorName:"",paymentCode:"",code:"",accountPayee:"",tradeStatus:"",tradeType:"",date:[],timeCreatedFrom:"",timeCreatedTo:"",shopifyOrder:"",creditStatus:"2"},filterParamsDefault:"{}",dateFilter:"",viewDetail:{isShow:!1,exportLoading:!1,items:[]},tradeTypeArr:[{id:1,name:"Payment order"},{id:6,name:"Refund order"},{id:7,name:"Wallet card"},{id:8,name:"Manual deduction"}],tradeStatusArr:[{id:1,name:"Paying"},{id:2,name:"Account paid"},{id:3,name:"Refunded"},{id:9,name:"Cancel"}],accountPayeeArr:[{id:1,name:"stripe"},{id:2,name:"ebanx"},{id:3,name:"PayPal"},{id:4,name:"checkout"},{id:6,name:"Bonus balance"},{id:7,name:"Credit"},{id:8,name:"balance + credit"},{id:10,name:"dLocal"},{id:11,name:"PAYONEER"},{id:12,name:"Offline payment"}],checkItems:[],dialogDetailData:{isShow:!1,loading:!1,ids:[],items:[]},defaultDialogDetailData:"{}"}},components:{DialogDetail:m},watch:{$route:"gotoPage"},mounted(){this.defaultDialogDetailData=JSON.stringify(this.dialogDetailData),this.filterParamsDefault=JSON.stringify(this.filterParams),this.getItem()},methods:{openExportDetail(e){this.loading=!0,this.$apiCall("api.AccountPayment.getInvoiceShopifyInfo",{id:e.id},t=>{this.loading=!1,"9999"==t.ErrorCode?(this.dialogDetailData=JSON.parse(this.defaultDialogDetailData),this.dialogDetailData.ids=[e.id],this.dialogDetailData.items=Object.keys(t.Data.Results).map(e=>t.Data.Results[e]),this.dialogDetailData.isShow=!0):this.$elementMessage(t.Message,"error")})},setOrder(e){this.$apiCall("api.AccountPayment.changeCreditStatus",{id:e.id},e=>{this.loading=!1,"9999"==e.ErrorCode?(this.$elementMessage(e.Message,"success"),this.getItem()):this.$elementMessage(e.Message,"error")})},exportDetailFn(){let e=[];if(!this.viewDetail.items.length)return;this.viewDetail.items.forEach(t=>{e.push(t.id)}),this.viewDetail.exportLoading=!0,0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let t=e=>{document.getElementById("ifilePro").src=e},a="api.AccountPayment.exportPayment";this.$apiCall(a,{ids:e},e=>{this.viewDetail.exportLoading=!1,"9999"==e.ErrorCode?(this.$elementMessage("Export success","success"),t(e.Data.Results.file)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},handleClick(e,t){this.filterParams={verdorName:"",paymentCode:"",code:"",accountPayee:"",tradeStatus:"",tradeType:"",date:[],timeCreatedFrom:"",timeCreatedTo:"",shopifyOrder:"",creditStatus:e.name},this.$refs.gridTable.clearSelection(),this.getItem()},handleSelectionChange(e){this.viewDetail.items=[],this.checkItems=[],e.length&&(this.viewDetail.items=e,this.checkItems=e)},viewDetailFn(e,t){this.viewDetail.isShow=!0,"row"==e&&(this.viewDetail.items=[],this.viewDetail.items.push(t))},filterText(e,t){let a;switch(e){case"tradeType":this.tradeTypeArr.forEach(e=>{e.id==t&&(a=e)});break;case"tradeStatus":this.tradeStatusArr.forEach(e=>{e.id==t&&(a=e)});break;case"platformType":this.accountPayeeArr.forEach(e=>{e.id==t&&(a=e)});break;default:break}return a?a.name:"---"},toPage(e){e!=this.$route.query.page&&this.$router.push({query:{page:e}})},changePageSize(e){this.rowsPerPage=e,localStorage.setItem("c_transactionRowsPerPage",e),this.getItem()},gotoPage(){this.page=this.$route.query.page?Number(this.$route.query.page):1,this.getItem()},filterDate(){let e=Number(this.dateFilter),t=moment().format("YYYY-MM-DD"),a=moment().add(-1,"days").format("YYYY-MM-DD"),r=moment().add(-6,"days").format("YYYY-MM-DD"),l=moment().add(-29,"days").format("YYYY-MM-DD");switch(this.filterParams.timeCreatedTo=t,e){case 1:this.filterParams.timeCreatedFrom=t;break;case 2:this.filterParams.timeCreatedFrom=a,this.filterParams.timeCreatedTo=a;break;case 3:this.filterParams.timeCreatedFrom=r;break;case 4:this.filterParams.timeCreatedFrom=l;break;default:break}this.filterItem()},dateChange(){this.filterParams.date.length>1&&(this.filterParams.timeCreatedFrom=moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem())},clearFilter(e){switch(e){case"shopifyOrder":this.filterParams.shopifyOrder="";break;case"paymentCode":this.filterParams.paymentCode="";break;case"code":this.filterParams.code="";break;case"verdorName":this.filterParams.verdorName="";break;case"tradeType":this.filterParams.tradeType="";break;case"tradeStatus":this.filterParams.tradeStatus="";break;case"accountPayee":this.filterParams.accountPayee="";break;case"date":this.filterParams.date=[],this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="";break;default:this.dateFilter="",this.filterParams=JSON.parse(this.filterParamsDefault);break}this.filterItem()},filterItem(e){this.$refs.gridTable.clearSelection(),1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},getItem(e){this.loading=!0,this.$apiCall("api.AccountPayment.findByCustomer",{page:this.page,rowsPerPage:this.rowsPerPage,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,sysCode:this.filterParams.paymentCode,code:this.filterParams.code,platformType:this.filterParams.accountPayee,paymentType:this.filterParams.tradeType,status:this.filterParams.tradeStatus,shopifyOrder:this.filterParams.shopifyOrder,creditStatus:this.activeName},e=>{this.loading=!1,9999==e.ErrorCode?(this.items=e.Data.Results,this.total=Number(e.Data.Pagination.totalCount),this.totalPage=Number(e.Data.Pagination.totalPage)):this.$message({message:e.Message,type:"error"})})}}},f=u,p=(a("1622"),a("0a30"),Object(c["a"])(f,r,l,!1,null,"47955d84",null));t["default"]=p.exports},ed97:function(e,t,a){},f132:function(e,t,a){}}]);
//# sourceMappingURL=transactionDetail.625d2820.js.map