(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["invite"],{3373:function(t,e,s){"use strict";s("cf7f")},"62be":function(t,e,s){},"62c1":function(t,e,s){"use strict";s("62be")},cf7f:function(t,e,s){},da636:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-invite-reg"},[t._m(0),e("div",{staticClass:"body"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"content"},[e("p",{staticClass:"row1"},[t._v("Hello "+t._s(t.customerName)+",")]),e("p",{staticClass:"row2"},[t._v(" "+t._s(t.words)+" ")]),e("p",{staticClass:"row3"},[t._v("Yours,")]),e("p",{staticClass:"row4"},[t._v(t._s(t.vendorName))]),e("div",{staticClass:"reg"},[e("div",{staticClass:"reg-box"},[t._m(1),e("div",{staticClass:"row6"},[e("div",[e("span",{staticClass:"http"},[t._v("http://")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.shopUrl,expression:"shopUrl"}],attrs:{type:"text",placeholder:"Your Shopify store name"},domProps:{value:t.shopUrl},on:{input:[function(e){e.target.composing||(t.shopUrl=e.target.value)},function(e){return t.storeInput(e.target.value)}]}}),e("span",{staticClass:"domain"},[t._v(".myshopify.com")])]),e("el-button",{attrs:{loading:t.loading},on:{click:t.login}},[t._v(" "+t._s(t.loading?"Please Wait":"Connect")+" ")])],1)])])])]),e("div",{staticClass:"page-footer"},[e("div",[t._v("© 2021, Powered by "+t._s(t.$root.$children[0].pName.b)+" APP")])])])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("div",{staticClass:"content"},[e("h1")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row5"},[e("div",{staticClass:"s-logo"})])}],o=(s("149f"),{data(){return{pageLoading:!0,loading:!1,shopUrl:"",customerName:"",words:"",vendorName:""}},created(){$("body").addClass("primary-bg"),$("#viewport").attr("content","width=device-width,initial-scale=1.0")},beforeDestroy(){$("body").removeClass("primary-bg"),$("#viewport").attr("content","width=device-width, user-scalable=yes, initial-scale=0.3, maximum-scale=1.0, minimum-scale=0.3")},mounted(){this.getWords()},methods:{getWords(){this.pageLoading=!0,this.$apiCall("api.Relationship.getRelationshipByRid",{rid:decodeURIComponent(this.$route.query.rid)},t=>{this.pageLoading=!1,"9999"==t.ErrorCode?(this.customerName=t.Data.Results.customerName,this.words=t.Data.Results.words,this.vendorName=t.Data.Results.vendorName):this.$elementMessage(t.Data.Results.errorMessage,"error")})},getLoginStatus(){this.$apiCall("api.ShopifyAccount.getShopAuthStatus",{shopUrl:this.shopUrl},t=>{"9999"==t.ErrorCode?(localStorage.setItem("c_inviteShopUrl",this.shopUrl),t.Data.Results.status&&(clearInterval(this.time),1==t.Data.Results.status?(localStorage.setItem("c_apiUserId",t.Data.Results.userInfo.id),localStorage.setItem("c_apiUserToken",t.Data.Results.userInfo.apiUserToken),localStorage.setItem("c_ourMallUserInfo",JSON.stringify(t.Data.Results.userInfo)),this.$store.commit("setUserInfo",t.Data.Results.userInfo),this.$router.push({name:"dashboard"}),this.win.close()):(this.loading=!1,this.$elementMessage(t.Data.Results.errorMessage,"error"),this.win.close(),setTimeout(()=>{window.location.reload()},1e3)))):(clearInterval(this.time),this.$elementMessage(t.Message,"error"))})},login(){if(!this.shopUrl)return this.$elementMessage("Please enter Shopify store name","error"),!1;this.win=window.open("/blank.html","Shopify"),this.loading=!0,this.$apiCall("api.ShopifyAccount.addShopifyAccount",{shopUrl:this.shopUrl,getAuth:1,rid:this.$route.query.rid,ivc:localStorage.getItem("c_ivc")?localStorage.getItem("c_ivc"):"",utmSource:localStorage.getItem("c_utm")},t=>{"9999"==t.ErrorCode?(this.win.location=t.Data.Results,this.time=setInterval(()=>{this.getLoginStatus()},2e3)):this.$elementMessage(t.Message,"error")})},storeInput(t){let e=new RegExp("[A-Za-z0-9-_]+"),s=t.length,a="";for(var i=0;i<s;i++)e.test(t[i])&&(a+=t[i]);this.shopUrl=a}}}),r=o,l=(s("3373"),s("62c1"),s("e607")),n=Object(l["a"])(r,a,i,!1,null,"ce6a7e30",null);e["default"]=n.exports}}]);
//# sourceMappingURL=invite.9961c71e.js.map