(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["products-detail"],{5323:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("149f"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),_components_productQuotation__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ea9d");__webpack_exports__["a"]={props:{},data(){return{radio:"",shopMethod:[{time:"15-30 days",name:"EUB"},{time:"15-20 days",name:"CNE"},{time:"15-20 days",name:"YunExpress"},{time:"15-20 days",name:"4PX"}],activeName:"first",web:"",loading:!1,isFound:!0,proId:null,isAdd:null,name:"",moreName:"",imgUrl:"",imgList:[],type1:[],type2:[],typeImg:[],items:[],nowPro:{},price:"",typeTwoData:"",isActive:0,isActiveCate:-1,isChange:-1,products:{},shoppingDialog:!1,visible:!1,propValue:"",ball:{x:window.innerWidth/2,y:window.innerHeight/2,opacity:0}}},watch:{$route:"gotoPage"},filters:{typeOne(t){return t?t.split("||")[0]:""},typeTwo(t){return t?t.split("||")[1]:""}},mounted(){this.proId=this.$route.query.id,this.name=this.$route.query.name,this.getDetail(),this.getRecommend()},methods:{quotation(){this.visible=!0},gotoPage(){Object.assign(this.$data,this.$options.data()),this.proId=this.$route.query.id,this.name=this.$route.query.name,this.getDetail(),this.getRecommend()},getRecommend(){this.$apiCall("api.VendorShop.findProducts",{id:this.proId,rowsPerPage:12,page:1},t=>{this.items=t.Data.Results,this.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0})},filterType(t,e){this.isChange=e,this.typeTwoData=t,""!=this.propValue&&this.products.stocks.forEach(t=>{t.propertyValue==`${this.propValue}||${this.typeTwoData}`&&(this.nowPro=t,this.price=this.nowPro.price)})},returnMore(){let t=this.products.categorys.length-1;this.$router.push({name:"more",query:{id:this.products.categorys[t].id}})},getDetail(){this.loading=!0,this.$apiCall("api.VendorShop.productDetail",{id:this.proId},r=>{if(this.loading=!1,9999==r.ErrorCode){this.isFound=!0,this.imgUrl=r.Data.Results.imgUrl,this.price=r.Data.Results.cost,this.imgList=eval(r.Data.Results.imgUrlJson),this.products=r.Data.Results,this.isAdd=r.Data.Results.hasImport,this.web=r.Data.Results.description.web;const num=r.Data.Results.categorys.length-1;this.moreName=r.Data.Results.categorys[num].name,r.Data.Results.stocks.forEach(t=>{this.type1.push(t.propertyValue.split("||")[0]),this.type2.push(t.propertyValue.split("||")[1])}),this.type1=[...new Set(this.type1)],this.type2=[...new Set(this.type2)];let arr=[];this.type1.forEach(t=>{arr.push(r.Data.Results.stocks.filter(e=>e.propertyValue.split("||")[0]==t))}),arr.forEach(t=>{this.typeImg.push(t[0].propertyImage)})}else this.isFound=!1})},change(t){this.isActive=t,this.imgUrl=this.imgList[t]},changeCate(t){this.isActiveCate=t,this.isActive=-1,this.propValue=this.type1[t],this.imgUrl=this.typeImg[t],""!=this.typeTwoData&&this.products.stocks.forEach(t=>{t.propertyValue==`${this.propValue}||${this.typeTwoData}`&&(this.nowPro=t,this.price=this.nowPro.price)})},import_Recommend(t,e){this.$apiCall("api.Product.addFromVendorShopProduct",{id:t.id},i=>{if(9999==i.ErrorCode){t.hasImport=1,t.imports++,this.$message.success("Import Success !"),this.ball.x=e.clientX,this.ball.y=e.clientY,setTimeout(()=>{this.ball.opacity=1},500);const i=t=>{let e=t.offsetTop,i=t.offsetLeft,s=t.offsetParent;while(null!==s)e+=s.offsetTop,i+=s.offsetLeft,s=s.offsetParent;return{left:i,top:e}};let s=i(document.querySelector("[data-name='Import List']"));setTimeout(()=>{this.ball.x=s.left+65,this.ball.y=s.top+15},1e3),setTimeout(()=>{this.ball.opacity=0},1500)}else this.$message.error(i.Message)})},goHome(){this.$router.push("/find-products")},goToDetail(t){this.$router.push({name:"productDetail",query:{id:t.id,name:t.name,isAdd:t.hasImport}})},import_pro(t){this.$apiCall("api.Product.addFromVendorShopProduct",{id:this.products.id},e=>{if(9999==e.ErrorCode){this.products.imports++,this.isAdd=1,this.$message.success("Import Success !"),this.ball.x=t.clientX,this.ball.y=t.clientY,setTimeout(()=>{this.ball.opacity=1},500);const e=t=>{let e=t.offsetTop,i=t.offsetLeft,s=t.offsetParent;while(null!==s)e+=s.offsetTop,i+=s.offsetLeft,s=s.offsetParent;return{left:i,top:e}};let i=e(document.querySelector("[data-name='Import List']"));setTimeout(()=>{this.ball.x=i.left+65,this.ball.y=i.top+15},1e3),setTimeout(()=>{this.ball.opacity=0},1500)}else this.$message.error(e.Message)})}},components:{Quotation:_components_productQuotation__WEBPACK_IMPORTED_MODULE_1__["a"]}}},"919f":function(t,e,i){},"91e6":function(t,e,i){"use strict";i("919f")},c157:function(t,e,i){},dba4:function(t,e,i){"use strict";i("c157")},ea9d:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:"Request a quotation for products",visible:t.openCardDialog},on:{"update:visible":function(e){t.openCardDialog=e},close:t.closeDialog}},[e("el-divider"),t.imgView?e("div",{staticClass:"proQuotation"},[e("div",{staticClass:"quotationTit"},[t._v("products for quotation")]),e("div",{staticStyle:{display:"flex"}},[e("div",{staticClass:"imgList"},t._l(t.imgList,(function(t){return e("img",{key:t,staticClass:"upload imgItem",attrs:{src:t}})})),0),e("div",{staticClass:"upload",on:{click:t.openForm}},[e("i",{staticClass:"el-icon-plus"})])])]):t._e(),t.isForm?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"formRole"},[e("div",{staticClass:"quotationTit"},[t._v("Product information")]),e("el-form",{attrs:{model:t.form,"label-position":"left","label-width":"150px"}},[e("el-form-item",{attrs:{label:"Product images:",required:""}},[e("div",{staticClass:"upload",on:{click:t.uploadOpen}},[t.form.imgUrl?e("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.form.imgUrl,fit:"cover"}}):e("i",{staticClass:"el-icon-plus"})],1)]),e("el-form-item",{attrs:{label:"Details:",required:""}},[e("el-input",{attrs:{placeholder:"Product name / URL / description or anything you can tell us"},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),e("el-form-item",{attrs:{label:"Expected price (US$):"}},[e("el-input-number",{attrs:{controls:!1},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),e("el-form-item",{attrs:{label:"Remarks:"}},[e("el-input",{attrs:{placeholder:`Leave your message that you want to tell ${t.$root.$children[0].pName.a} Vendors`},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),e("el-button",{staticClass:"save",attrs:{type:"primary"},on:{click:t.saveQuotation}},[t._v("Save")])],1):t._e(),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("Submit Request")]),e("el-button",{on:{click:t.closeQuotation}},[t._v("Discard")])],1)],1),e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"imgFile",accept:".jpg,.png,.gif"},on:{change:function(e){return t.Base64(e)}}})],1)},a=[],o=(i("149f"),{props:{visible:{type:Boolean,default:!1}},data(){return{form:{imgUrl:"",details:"",price:void 0,remark:""},imgView:!1,outerVisible:!1,innerVisible:!1,isForm:!0,loading:!1,dialogVisible:!1,imgList:[],detailsList:[],priceList:[],remarkList:[]}},computed:{openCardDialog:{get(){return this.visible},set(t){this.$emit("update:visible",t)}}},mounted(){},methods:{openForm(){this.isForm=!0,this.loading=!0,setTimeout(()=>{this.loading=!1},800)},uploadOpen(){document.getElementById("imgFile").click()},Base64(t){if(t.target.value){let e=new FileReader,i=new Image,s="";e.onload=t=>{i.src=t.target.result;let e=t.target.result.match(/data:image\/(.*);base64,.*/);s=e[1]},i.onload=e=>{base64Image({file:t.target,callback:t=>{let e=t.split("base64,").pop();this.uploadImgBase64(e,s)}})},e.readAsDataURL(t.target.files[0])}},uploadImgBase64(t,e){this.loading=!0,this.$apiCall("api.User.uploadImgBase64",{imgUrlBase64:t,ext:e},t=>{this.loading=!1,9999==t.ErrorCode?this.form.imgUrl=t.Data.Results.imgUrl:this.$message.error(t.Message)})},saveQuotation(){return""==this.form.imgUrl?(this.$message.error("Please select a picture !"),!1):""==this.form.details?(this.$message.error("Please fill in the details !"),!1):(this.imgView=!0,this.isForm=!1,this.imgList.push(this.form.imgUrl),this.detailsList.push(this.form.details),this.priceList.push(this.form.price),this.remarkList.push(this.form.remark),void(this.form={imgUrl:"",details:"",price:void 0,remark:""}))},closeQuotation(){this.openCardDialog=!1,this.form={imgUrl:"",details:"",price:void 0,remark:""},this.imgList=[],this.detailsList=[],this.priceList=[],this.remarkList=[],this.isForm=!0,this.imgView=!1},closeDialog(){this.closeQuotation()},submit(){let t=[];for(let e=0;e<this.imgList.length;e++)t.push({detail:this.detailsList[e],imgUrl:this.imgList[e],expectPrice:this.priceList[e],remarks:this.remarkList[e]});this.$apiCall("api.OfferList.genOfferProduct",{products:t},t=>{9999==t.ErrorCode?(this.$message.success("Submit Success !"),this.closeQuotation(),this.$router.push("/Waiting-for-vendors-respond")):this.$message.error(t.Message)})}},components:{}}),r=o,l=(i("91e6"),i("e607")),n=Object(l["a"])(r,s,a,!1,null,"6167711f",null);e["a"]=n.exports},fb36:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"detail"},[e("div",{staticClass:"contentpanel box"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-goods"}),e("h2",[t._v(t._s(t.$root.$children[0].pName.a)+" Products Market")])])]),e("div",{staticClass:"right"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.quotation()}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" Request Quotation ")])],1)]),e("div",{staticClass:"pagetitle"},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/find-products"}}},[t._v(" "+t._s(t.$root.$children[0].pName.a)+" Products Market ")]),e("el-breadcrumb-item",[e("span",{staticClass:"moreName",on:{click:t.returnMore}},[t._v(" "+t._s(t.moreName)+" ")])])],1)],1),1==t.isFound?e("el-card",[e("div",{staticClass:"detailBox"},[e("div",{staticClass:"img_view"},[e("div",{staticClass:"show_img"},[e("div",{staticClass:"magnifier",on:{click:function(e){return t.clickImg(t.imgUrl)}}},[e("vue-photo-zoom-pro",{attrs:{url:t.imgUrl,scale:3,width:200,mask:!1}})],1)]),e("ul",{staticClass:"img_view_list"},t._l(t.imgList,(function(i,s){return e("li",{key:s,class:{active:t.isActive==s},on:{mouseover:function(e){return t.change(s)}}},[e("div",{staticClass:"images-view-item"},[e("img",{attrs:{src:i,alt:""}})])])})),0)]),e("div",{staticClass:"pro_detail"},[e("div",{staticClass:"pro_name_w"},[t._v(t._s(t.products.name))]),e("div",{staticClass:"imports"}),e("el-divider"),e("b",{staticClass:"proCost"},[t._v(" US $"+t._s(t.price)+" ")]),e("el-divider"),t.products.propertyName?e("div",[t._v(t._s(t._f("typeOne")(t.products.propertyName))+": "),e("span",{staticStyle:{color:"rgb(144, 147, 153)"}},[t._v(t._s(t.propValue))])]):t._e(),e("ul",{staticClass:"img_view_list"},t._l(t.typeImg,(function(i,s){return e("li",{key:s,class:{active:t.isActiveCate==s}},[""==i?e("div",{class:{active:t.isActiveCate==s,but:!0},on:{click:function(e){return t.changeCate(s)}}},[""==t.type1[0]?e("span",[t._v("Default")]):e("span",[t._v(t._s(t.type1[s]))])]):e("div",[""==t.type1[0]?e("div",{staticClass:"images-view-item",on:{click:function(e){return t.changeCate(s)}}},[e("img",{attrs:{src:i}})]):e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.type1[s],placement:"bottom"}},[e("div",{staticClass:"images-view-item",on:{click:function(e){return t.changeCate(s)}}},[e("img",{attrs:{src:i}})])])],1)])})),0),t.products.propertyName&&-1!=t.products.propertyName.indexOf("||")?e("div",[t._v(t._s(t._f("typeTwo")(t.products.propertyName))+": "),e("span",{staticStyle:{color:"rgb(144, 147, 153)"}},[t._v(t._s(t.typeTwoData))])]):t._e(),t.type2[0]?e("div",{staticClass:"img_view_list"},t._l(t.type2,(function(i,s){return e("div",{key:s,staticStyle:{"margin-right":"11px","margin-bottom":"10px"}},[e("div",{class:{active:t.isChange==s,but:!0},on:{click:function(e){return t.filterType(i,s)}}},[t._v(t._s(i))])])})),0):t._e(),e("el-divider"),e("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("Delivery: Varies for items shipped from an international location "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Shipping Method",placement:"top"}},[e("i",{staticClass:"el-icon-info",staticStyle:{"font-size":"12px",width:"12px",cursor:"pointer"},on:{click:function(e){t.shoppingDialog=!0}}})])],1),e("el-dropdown",[e("el-button",{attrs:{type:"primary"}},[t._v(" Add to Import List"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{staticClass:"importBut",attrs:{disabled:1==t.isAdd},nativeOn:{click:function(e){return t.import_pro(t.item,e)}}},[t._v("Add to Import List")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.goToDetail(t.item)}}},[t._v("Add to Cart")])],1)],1)],1)]),e("div",{staticClass:"descript"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"Description",name:"first"}},[e("div",{staticClass:"detail-desc",domProps:{innerHTML:t._s(t.web)}})])],1)],1)]):e("el-card",[e("div",{staticClass:"notFound"},[e("div",{staticClass:"back"}),e("div",{staticClass:"text"},[t._v("This product has been removed from the shelves")]),e("div",{staticClass:"goHome"},[e("el-button",{attrs:{type:"primary"},on:{click:t.goHome}},[t._v("Return ")])],1)])]),0!=t.items.length?e("el-card",{staticStyle:{"margin-top":"20px"}},[e("div",{staticClass:"recommend"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"Recommended Products",name:"first"}},[e("div",{staticClass:"list"},t._l(t.items,(function(i){return e("el-col",{key:i.id,staticStyle:{"margin-bottom":"20px"},attrs:{sm:12,md:8,lg:6,xl:4}},[e("div",{staticClass:"pro_box"},[e("div",{staticClass:"pro_img"},[e("div",{staticClass:"img-wrap"},[e("el-image",{staticStyle:{position:"absolute",width:"100%",height:"100%"},attrs:{fit:"cover",src:i.imgUrl},on:{click:function(e){return t.goToDetail(i)}}})],1)]),e("div",{staticClass:"pro_name",on:{click:function(e){return t.goToDetail(i)}}},[e("a",[t._v(t._s(i.name))])]),e("div",{staticClass:"price"},[e("span",{staticClass:"pro_cost"},[t._v("US $"+t._s(i.cost))])]),e("div",{staticClass:"imports_"}),e("div",{staticStyle:{display:"flex",width:"100%","justify-content":"center","margin-top":"15px"}},[e("el-dropdown",[e("el-button",{attrs:{type:"primary"}},[t._v(" Add to Import List"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{staticClass:"importBut",attrs:{disabled:1==i.hasImport},nativeOn:{click:function(e){return t.import_pro(i,e)}}},[t._v("Add to Import List")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.goToDetail(i)}}},[t._v("Add to Cart")])],1)],1)],1)])])})),1)])],1)],1)]):t._e()],1),e("div"),e("el-dialog",{attrs:{title:"Shipping Method",visible:t.shoppingDialog,width:"40%"},on:{"update:visible":function(e){t.shoppingDialog=e}}},[e("el-divider"),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.shopMethod,"highlight-current-row":""}},[e("el-table-column",{attrs:{label:"",width:"80"}}),e("el-table-column",{attrs:{property:"time",label:"Estimated Delivery",width:"200"}}),e("el-table-column",{attrs:{property:"track",label:"Tracking",width:"150"}},[e("i",{staticClass:"el-icon-check"})]),e("el-table-column",{attrs:{property:"name",label:"Carrier"}})],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.shoppingDialog=!1}}},[t._v("Close")])],1)],1),e("div",{staticClass:"ball",style:{top:t.ball.y+"px",left:t.ball.x+"px",opacity:t.ball.opacity}}),e("Quotation",{attrs:{visible:t.visible},on:{"update:visible":function(e){t.visible=e}}}),e("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:120}})],1)},a=[],o=i("5323"),r=o["a"],l=(i("dba4"),i("e607")),n=Object(l["a"])(r,s,a,!1,null,"4c9455e9",null);e["default"]=n.exports}}]);
//# sourceMappingURL=products-detail.c0e100a4.js.map