(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Rechareg"],{"2ae6":function(t,e,a){"use strict";a("a7ea")},3755:function(t,e,a){"use strict";a("9613")},"3ef2":function(t,e,a){"use strict";var s=a("597a"),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw i("Cannot delete property "+s(e)+" of "+s(t))}},"51a7":function(t,e,a){"use strict";a("c0da")},"574e":function(t,e,a){},7557:function(t,e,a){},"92e7":function(t,e,a){"use strict";a("574e")},9314:function(t,e,a){"use strict";a("7557")},9538:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.data.loading,expression:"data.loading"}],attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,title:"Check Out",visible:t.data.isShow,width:"500px"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)},opened:t.opened}},[e("el-divider"),e("div",{staticClass:"card-msg"},[e("el-alert",{attrs:{title:"Pay securely using your credit card.",type:"info",closable:!1}})],1),e("form",{attrs:{id:"payment-form",method:"POST",action:"https://merchant.com/charge-card"}},[e("div",{staticClass:"one-liner"},[e("div",{staticClass:"card-label"},[e("div",[e("div",[t._v("Card Number "),e("span",[t._v("*")])])]),e("div",{staticClass:"right"},[e("div",{staticClass:"mg-r-5"},[t._v("Expiration"),e("span",[t._v("*")])]),e("div",[t._v("CVV"),e("span",[t._v("*")])])])]),e("div",{staticClass:"card-frame"}),e("div",{staticClass:"pay-btn-wrap"},[e("div",{staticClass:"secure"}),e("button",{attrs:{id:"pay-button",disabled:""}},[t._v(" PAY ")])])]),e("p",{staticClass:"success-payment-message"})])],1)],1)},i=[],o={props:["data"],data(){return{}},mounted(){},methods:{opened(){this.getCheckoutKey()},getCheckoutKey(){this.data.loading=!0,this.$apiCall("api.User.getCheckoutKey",{},t=>{this.data.loading=!1,"9999"==t.ErrorCode?(this.data.token=t.Data.Results,this.$nextTick(()=>{var t=document.getElementById("pay-button"),e=document.getElementById("payment-form");Frames.init(this.data.token),Frames.addEventHandler(Frames.Events.CARD_VALIDATION_CHANGED,(function(e){console.log("CARD_VALIDATION_CHANGED: %o",e),t.disabled=!Frames.isCardValid()})),Frames.addEventHandler(Frames.Events.CARD_TOKENIZED,t=>{this.$emit("payCheckOut",t.token),Frames.removeEventHandler(Frames.Events.CARD_TOKENIZED,t=>{}),console.log(t.token)}),e.addEventListener("submit",(function(t){t.preventDefault(),Frames.submitCard()}))})):this.$elementMessage(t.Message,"error")})}}},c=o,r=(a("92e7"),a("e607")),l=Object(r["a"])(c,s,i,!1,null,"37771618",null);e["a"]=l.exports},9613:function(t,e,a){},a7ea:function(t,e,a){},c0da:function(t,e,a){},fae6:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"contentpanel recharge-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[t._m(0),e("div",{staticClass:"right"},[e("el-link",{attrs:{type:"primary"},on:{click:t.gotoPayRecord}},[t._v("Payment Record")])],1)]),e("div",{staticClass:"pagebody mg-b-20"},[e("el-card",[e("div",{staticClass:"pay-title"},[t._v("Choose your payment method")]),e("SelectPayMethod",{staticStyle:{"margin-bottom":"50px"},attrs:{payMethodAcitve:t.payMethodAcitve},on:{selectPay:t.selectPay}}),3==t.payMethodAcitve?e("div",{staticClass:"free",on:{click:t.tawk}}):[e("div",{staticClass:"pay-title"},[t._v("Choose your recharge package")]),e("ChooseRechargePackage",{staticStyle:{"margin-bottom":"35px"},attrs:{items:t.packages,vipType:t.vipType},on:{choose:t.choosePackage}}),e("div",{staticClass:"bottom-action"},[e("div",{staticClass:"checkBox",staticStyle:{"margin-bottom":"15px"}},[e("el-checkbox",{model:{value:t.check1,callback:function(e){t.check1=e},expression:"check1"}},[t._v("Â ")]),t._v(" I agree the "),e("el-link",{on:{click:function(e){return t.gotoHelp("terms")}}},[t._v("Terms of use")]),t._v(" and "),e("el-link",{on:{click:function(e){return t.gotoHelp("refund")}}},[t._v("Refund Policy")])],1),e("el-button",{attrs:{disabled:0==t.check1||0==t.check2,loading:t.payLoading,type:"primary"},on:{click:t.payNow}},[t._v("Pay NOW")])],1)]],2)],1),e("DialogPayStatusAlert",{attrs:{data:t.dialogPayAlert},on:{closePayPage:t.closePayPage}}),t.isShowMask?e("div",{staticClass:"mask",on:{click:function(e){t.isShowMask=!1}}}):t._e(),e("checkout",{attrs:{data:t.dialogCheckOut},on:{payCheckOut:t.payCheckOut}})],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"fa fa-usd",attrs:{"aria-hidden":"true"}}),e("h2",[t._v("Package")])])])}],o=(a("149f"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-pay-method"},[e("a",{staticClass:"pay",class:{active:3==t.payMethodAcitve},attrs:{href:"javascript:;"},on:{click:function(e){return t.selectPay(3)}}},[e("i",{staticClass:"el-icon-success"})]),e("a",{staticClass:"pay paypay",class:{active:1==t.payMethodAcitve},attrs:{href:"javascript:;"},on:{click:function(e){return t.selectPay(1)}}},[e("i",{staticClass:"el-icon-success"})]),e("a",{staticClass:"pay credit-card",class:{active:4==t.payMethodAcitve},attrs:{href:"javascript:;"},on:{click:function(e){return t.selectPay(4)}}},[e("i",{staticClass:"el-icon-success"})])])}),c=[],r={props:["payMethodAcitve"],methods:{selectPay(t){this.$emit("selectPay",t)}}},l=r,n=(a("9314"),a("e607")),d=Object(n["a"])(l,o,c,!1,null,"1b39a0ef",null),h=d.exports,p=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"pay-package"},t._l(t.items,(function(a){return e("li",{key:a.id,class:{active:a.id==t.vipType},on:{click:function(e){return t.choose(a)}}},[e("i",{directives:[{name:"show",rawName:"v-show",value:a.id==t.vipType,expression:"item.id == vipType"}],staticClass:"el-icon-success"}),e("div",{staticClass:"num"},[t._v(t._s(t._f("toThousands")(a.count)))]),e("div",{staticClass:"unit"},[t._v("Orders")]),e("div",{staticClass:"price"},[t._v(" US$ "),e("span",[t._v(t._s(t._f("toThousands")(a.price)))])]),e("div",{staticClass:"msg"},[a.first?e("div",[t._v(" Extra +"),e("b",[t._v(t._s(a.rewards))]),t._v(" orders for first recharge ")]):e("div",[t._v(" US$ "),e("b",[t._v(t._s(a.per))]),t._v(" per order ")])])])})),0)},u=[],v=(a("fef2"),{props:["items","vipType"],filters:{toThousands(t){var e=[],a=0;t=(t||0).toString().split("");for(var s=t.length-1;s>=0;s--)a++,e.unshift(t[s]),a%3||0==s||e.unshift(",");return e.join("")}},methods:{choose(t){this.$emit("choose",t.id)}}}),g=v,y=(a("2ae6"),Object(n["a"])(g,p,u,!1,null,"4e086b83",null)),m=y.exports,f=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.data.isShow,width:"600px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,title:"Pay Package"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)}}},[e("el-divider"),e("div",{staticClass:"body-wrap"},[t.data.payItem?e("el-card",{staticClass:"pay-card"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"title"},[t._v("Amount")]),e("span",{staticClass:"val success"},[t._v("US$ "+t._s(t.data.payItem.price))])]),e("el-col",{attrs:{span:12}},[e("span",{staticClass:"title"},[t._v("Orders")]),e("span",{staticClass:"val"},[t._v(t._s(t.data.payItem.count))])])],1)],1):t._e(),1==t.data.status?e("el-row",{staticClass:"pay-loading",attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"loading"},[e("i",{staticClass:"el-icon-loading"})]),e("div",{staticClass:"tx t1"},[t._v(" Payment Processing ")]),e("div",{staticClass:"tx t2"},[t._v(" Please leave window open ")])])],1):t._e(),1!=t.data.status?e("el-row",{staticClass:"pay-status",attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"status-icon"},[2==t.data.status?e("i",{staticClass:"el-icon-success"}):t._e(),3==t.data.status?e("i",{staticClass:"el-icon-error"}):t._e()]),2==t.data.status?[e("div",{staticClass:"tx t1"},[t._v(" Charge Submitted ")]),e("div",{staticClass:"tx t2"},[t._v(" Your payment has been successfully scheduled for processing. You will receive a confirmation email within 5 business days once the payment has been processed. ")])]:t._e(),3==t.data.status?[e("div",{staticClass:"tx t3"},[t._v(" "+t._s(t.data.errorMsg)+" ")])]:t._e()],2)],1):t._e()],1),e("div",{staticClass:"footer"},[e("i",{staticClass:"el-icon-lock"}),t._v(" Secure Payment "),1!=t.data.status?e("el-button",{staticClass:"btn-done",attrs:{loading:t.doneLoading,type:"primary",size:"small"},on:{click:t.resetPage}},[t._v("Done")]):t._e()],1)],1)},C=[],k={props:["data"],data(){return{doneLoading:!1}},methods:{resetPage(){this.doneLoading=!0,this.$emit("closePayPage"),this.$apiCall("api.User.checkLoginStatus",{},t=>{localStorage.setItem("c_apiUserToken",t.Data.Results.apiUserToken),localStorage.setItem("c_apiUserId",t.Data.Results.id),localStorage.setItem("c_userInfo",JSON.stringify(t.Data.Results)),location.reload()})}}},_=k,P=(a("3755"),Object(n["a"])(_,f,C,!1,null,"48a85b25",null)),w=P.exports,b=a("9538"),S={data(){return{check1:!0,check2:!0,loading:!1,payLoading:!1,packages:[],vipType:"",newWin:null,payTime:0,dialogPayAlert:{isShow:!1,errorMsg:"",payItem:null,status:1},payMethodAcitve:1,isShowMask:!1,dialogCheckOut:{isShow:!1,loading:!1,packages:null,token:""},dialogCheckOutDefault:"{}"}},components:{SelectPayMethod:h,ChooseRechargePackage:m,DialogPayStatusAlert:w,checkout:b["a"]},mounted(){this.dialogCheckOutDefault=JSON.stringify(this.dialogCheckOut),this.check1=this.check2=!0,this.getPackage(),this.$store.state.userInfo&&(this.payMethodAcitve="0"==this.$store.state.userInfo.timeLastPaid?3:1)},beforeDestroy(){},watch:{"$store.state.userInfo"(){this.payMethodAcitve="0"==this.$store.state.userInfo.timeLastPaid?3:1}},methods:{payCheckOut(t){this.dialogCheckOut.loading=!0,this.newWin=window.open(("/my"==this.$root.$children[0].baseUrl?"/my":"")+"/blank.html","pay"),this.dialogPayAlert.isShow=!0,this.packages.forEach(t=>{t.id==this.vipType&&(this.dialogPayAlert.payItem=t)}),this.$apiCall("api.User.goToPayByCustomer",{vipType:this.vipType,paymentType:2,token:t},t=>{this.dialogCheckOut.loading=!1,"9999"==t.ErrorCode&&t.Data.Results?(this.newWin.location=t.Data.Results,this.payTime=setInterval(()=>{this.getPayStatus()},2e3)):(this.dialogPayAlert.isShow=!1,this.dialogCheckOut.isShow=!1,this.$elementMessage("9999"==t.ErrorCode?"fail":t.Message,"error"),this.newWin.close())})},openDialogCheckOut(){this.dialogCheckOut=JSON.parse(this.dialogCheckOutDefault),this.dialogCheckOut.isShow=!0,this.packages.forEach(t=>{t.id==this.vipType&&(this.dialogCheckOut.packages={...t})})},gotoHelp(t){let e=this.$router.resolve({name:t});window.open(e.href,"_blank"),this.check1=this.check2=!0},gotoPayRecord(){this.$router.push({name:"payList"})},tawk(){this.$root.$children[0].$refs["chatBtn"].openChatWin()},selectPay(t){this.payMethodAcitve=t},getPayStatus(){this.$apiCall("api.User.getPayStatusByCustomer",{},t=>{if("9999"==t.ErrorCode){let e=t.Data.Results.status;1!=e&&clearInterval(this.payTime),2==e?(this.dialogPayAlert.status=2,this.closePayPage(),this.$apiCall("api.User.checkLoginStatus",{},t=>{localStorage.setItem("c_apiUserToken",t.Data.Results.apiUserToken),localStorage.setItem("c_apiUserId",t.Data.Results.id),localStorage.setItem("c_userInfo",JSON.stringify(t.Data.Results))})):3==e&&(this.dialogPayAlert.status=3,this.dialogPayAlert.msg=t.Data.Results.message,this.$elementMessage(t.Data.Results.message,"error"),this.closePayPage())}else this.dialogPayAlert.msg=t.Message,this.$elementMessage(t.Message,"error"),clearInterval(this.payTime)})},payNow(){4!=this.payMethodAcitve?(this.newWin=window.open(("/my"==this.$root.$children[0].baseUrl?"/my":"")+"/blank.html","pay"),this.dialogPayAlert.isShow=!0,this.packages.forEach(t=>{t.id==this.vipType&&(this.dialogPayAlert.payItem=t)}),this.payLoading=!0,this.$apiCall("api.User.goToPayByCustomer",{vipType:this.vipType,paymentType:this.payMethodAcitve},t=>{this.payLoading=!1,"9999"==t.ErrorCode?(this.newWin.location=t.Data.Results,this.payTime=setInterval(()=>{this.getPayStatus()},2e3)):this.$elementMessage(t.Message,"error")})):this.openDialogCheckOut()},choosePackage(t){this.vipType=t},getPackage(){this.loading=!0,this.$apiCall("api.User.getCustomerVip",{},t=>{if(this.loading=!1,"9999"==t.ErrorCode){let e=t.Data.Results;this.packages=Object.keys(e.vip).map(t=>(e.vip[t].id=t,e.vip[t])),this.vipType=this.packages[0].id}else this.$elementMessage(t.Message,"error")})},closePayPage(){this.newWin.close(),clearInterval(this.payTime)}}},T=S,A=(a("51a7"),Object(n["a"])(T,s,i,!1,null,"9f5ea480",null));e["default"]=A.exports},fef2:function(t,e,a){"use strict";var s=a("6dec"),i=a("c197"),o=a("1cc9"),c=a("e300"),r=a("3ef2"),l=a("7f69"),n=1!==[].unshift(0),d=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}();s({target:"Array",proto:!0,arity:1,forced:n||d},{unshift:function(t){var e=i(this),a=o(e),s=arguments.length;if(s){l(a+s);var n=a;while(n--){var d=n+s;n in e?e[d]=e[n]:r(e,d)}for(var h=0;h<s;h++)e[h]=arguments[h]}return c(e,a+s)}})}}]);
//# sourceMappingURL=Rechareg.daed28ed.js.map