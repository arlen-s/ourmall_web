(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["MyVendors"],{2789:function(e,t,i){"use strict";i("6748")},"30a6":function(e,t,i){e.exports=i.p+"img/Invite1.91215003.jpg"},6748:function(e,t,i){},d17b:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"orders-page"},[t("div",{staticClass:"pagebody mg-b-20"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("div",{ref:"tablefilter",staticClass:"page-filter"},[t("el-form",{attrs:{inline:!0,size:"mini"}},[t("el-form-item",[t("el-input",{attrs:{placeholder:e.$root.$children[0].pName.a+" ID"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterGetItem.apply(null,arguments)}},model:{value:e.filterParams.vendorId,callback:function(t){e.$set(e.filterParams,"vendorId",t)},expression:"filterParams.vendorId"}})],1),t("el-form-item",[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Vendor name / contact / shop name etc."},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterGetItem.apply(null,arguments)}},model:{value:e.filterParams.vendorLike,callback:function(t){e.$set(e.filterParams,"vendorLike",t)},expression:"filterParams.vendorLike"}})],1),t("el-form-item",[t("el-autocomplete",{staticStyle:{width:"300px"},attrs:{"fetch-suggestions":e.getProductSelectList,placeholder:"My sourcing products","trigger-on-focus":!1},on:{select:e.selectClick},scopedSlots:e._u([{key:"default",fn:function({item:i}){return[t("div",{staticClass:"name",staticStyle:{width:"100%"}},[e._v(e._s(i.name))])]}}]),model:{value:e.filterParams.productName,callback:function(t){e.$set(e.filterParams,"productName",t)},expression:"filterParams.productName"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.filterGetItem}},[e._v("Filter")]),t("el-button",{attrs:{type:""},on:{click:e.clearFilter}},[e._v("Clear")])],1)],1)],1)])],1),t("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:e.items,stripe:"","row-key":"id"}},[t("el-table-column",{attrs:{label:"Vendor information","min-width":"260"},scopedSlots:e._u([{key:"default",fn:function({row:i}){return[t("div",{staticStyle:{color:"#909399"}},[e._v(" OM ID: "),i.vendorId?t("span",{staticStyle:{color:"#303133"}},[e._v(" "+e._s(i.vendorId))]):t("span",{staticStyle:{color:"#303133"}},[e._v(" --- "),t("span",{staticStyle:{color:"#909399"}},[e._v("(NOT Joined)")])])]),t("div",{staticStyle:{color:"#909399"}},[e._v(" Vender Name: "),t("span",{staticStyle:{color:"#303133"}},[e._v(e._s(i.vendorName||"---"))]),i.vendorRemark?t("span",{staticClass:"mg-l-5 vendorRemark"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:i.vendorRemark,placement:"top"}},[t("i",{staticClass:"el-icon-info"})])],1):e._e()]),t("div",{staticStyle:{color:"#909399"}},[e._v(" AliExpress Shop Name: "),i.shopName?t("span",{staticStyle:{color:"#303133"}},[t("a",{staticStyle:{color:"#5c6ac4"},attrs:{href:i.shopUrl,target:"_blank",title:i.shopUrl}},[e._v(e._s(i.shopName))])]):t("span",{staticStyle:{color:"#909399"}},[e._v("---")])])]}}])}),t("el-table-column",{attrs:{label:"Vendor Contact","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticClass:"customer-info-box"},[i.row.vendorEmail?t("div",[t("span",{staticStyle:{color:"#606266"}},[t("i",{staticClass:"iconfont icon-email"})]),t("a",{attrs:{href:"mailto:"+i.row.vendorEmail,target:"_blank"}},[e._v(e._s(i.row.vendorEmail))])]):e._e(),i.row.vendorWeChat?t("div",[t("span",{staticStyle:{color:"#55a947"}},[t("i",{staticClass:"iconfont icon-wechat"})]),e._v(" "+e._s(i.row.vendorWeChat)+" ")]):e._e(),i.row.vendorSkype?t("div",[t("span",{staticStyle:{color:"#00b0f6"}},[t("i",{staticClass:"iconfont icon-skype"})]),t("a",{attrs:{href:`skype:${i.row.vendorSkype}?chat`,target:"_blank"}},[e._v(" "+e._s(i.row.vendorSkype)+" ")])]):e._e(),i.row.vendorLine?t("div",[t("span",{staticStyle:{color:"#00c300"}},[t("i",{staticClass:"iconfont icon-line"})]),e._v(" "+e._s(i.row.vendorLine)+" ")]):e._e(),i.row.vendorQQ?t("div",[t("span",{staticStyle:{color:"#1e6fff"}},[t("i",{staticClass:"iconfont icon-qq"})]),t("a",{attrs:{href:`tencent://message/?uin=${i.row.vendorQQ}&Site=5yoho&Menu=yes`}},[e._v(" "+e._s(i.row.vendorQQ)+" ")])]):e._e(),i.row.vendorWangwang?t("div",[t("span",{staticStyle:{color:"#009fff"}},[t("i",{staticClass:"iconfont icon-wangwang"})]),t("a",{attrs:{href:`http://amos.alicdn.com/msg.aw?v=2&uid=${i.row.vendorWangwang}&site=cnalichn&s=11&charset=UTF-8`,target:"_blank"}},[e._v(" "+e._s(i.row.vendorWangwang)+" ")])]):e._e(),i.row.vendorWhatsapp?t("div",[t("span",{staticStyle:{color:"#109d58"}},[t("i",{staticClass:"iconfont icon-whatsapp"})]),t("a",{attrs:{href:"https://wa.me/"+i.row.vendorWhatsapp,target:"_blank"}},[e._v(" "+e._s(i.row.vendorWhatsapp)+" ")])]):e._e()])]}}])}),t("el-table-column",{attrs:{label:"Bonus Balance（$）","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(i){return[2!=i.row.bonusStatus?t("div",[t("div",[e._v(e._s(i.row.bonus))]),t("div",[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.openBonusDetail(i.row.id)}}},[e._v(" View Detail ")])],1)]):t("span",{staticStyle:{color:"#909399"}},[e._v("---")])]}}])}),t("el-table-column",{attrs:{label:"Sales statistics","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{color:"#909399"}},[e._v(" Product allocated: "),t("span",{staticStyle:{color:"#303133"}},[t("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:function(t){return e.gotoProduct(i.row.id)}}},[e._v(e._s(i.row.allocatedNum))])],1)]),t("div",{staticStyle:{color:"#909399"}},[e._v(" Purchase amount: "),t("span",{staticStyle:{color:"#303133"}},[t("el-link",{staticClass:"purchase-amount",attrs:{type:"primary"},on:{click:function(t){return e.goPurchase(i.row.id,i.row.vendorName)}}},[e._v("US$ "+e._s(i.row.totalAmount))])],1)])]}}])}),t("el-table-column",{attrs:{label:"Date","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{color:"#909399"}},[e._v(" Created at: "),t("span",{staticStyle:{color:"#303133"}},[e._v(e._s(i.row.timeCreated?e.moment(i.row.timeCreated).format("ll"):"---"))])]),t("div",{staticStyle:{color:"#909399"}},[e._v(" Latest cooperation at: "),t("span",{staticStyle:{color:"#303133"}},[e._v(e._s(i.row.timeCooperated?e.moment(i.row.timeCooperated).format("ll"):"---"))])])]}}])}),t("el-table-column",{attrs:{label:"Action",width:"130"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",[t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(t){return e.newEditVendor(i.row)}}},[e._v("Edit")]),i.row.canDelete?t("el-link",{attrs:{type:"danger"},on:{click:function(t){return e.delVendor(i.row)}}},[e._v("Delete")]):e._e()],1),t("div",[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.gotoInvoice(i.row)}}},[e._v("Sourcing Now")]),i.row.vendorId?e._e():t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.openInviteDialog(i.row.id)}}},[e._v("Invite Vendor")])],1)]}}])})],1)],1),e.items.length?t("el-row",{attrs:{gutter:20}},[t("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[t("div",{ref:"tableFooter"},[t("el-pagination",{attrs:{"current-page":Number(e.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.pageSizes,"page-size":e.rowsPerPage,total:Number(e.total)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e(),t("el-dialog",{attrs:{title:"Add Vendor",visible:e.newAddVendorDialog.visible,width:"600px","before-close":e.handleClosenewAddVendor}},[t("div",{staticStyle:{margin:"20px"}},[t("span",{staticClass:"mg-r-5"},[e._v(" How to add:")]),t("el-radio-group",{staticClass:"add-vendor",on:{change:e.addVendoorChange},model:{value:e.newAddVendorDialog.radio,callback:function(t){e.$set(e.newAddVendorDialog,"radio",t)},expression:"newAddVendorDialog.radio"}},[t("el-radio",{attrs:{label:1}},[e._v("By Vendor Name")]),t("el-radio",{attrs:{label:2}},[e._v("By AliExpress Url")]),t("el-radio",{attrs:{label:3}},[e._v("By "+e._s(e.$root.$children[0].pName.a)+" ID")])],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:1===e.newAddVendorDialog.radio,expression:"newAddVendorDialog.radio === 1"}],staticStyle:{margin:"20px"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticStyle:{flex:"0 0 20%"}},[e._v("Vendor's Name: ")]),t("el-input",{staticStyle:{flex:"0 0 50%"},attrs:{size:"small",placeholder:"Please enter your vendor's name"},model:{value:e.newAddVendorDialog.name,callback:function(t){e.$set(e.newAddVendorDialog,"name",t)},expression:"newAddVendorDialog.name"}})],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:2===e.newAddVendorDialog.radio,expression:"newAddVendorDialog.radio === 2"}],staticStyle:{margin:"0 20px"}},[t("p",{staticClass:"mg-b-10",staticStyle:{color:"#333"}},[e._v(" Vendor's AliExpress shop or product URL "),t("el-tooltip",{attrs:{effect:"dark",placement:"bottom"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",[e._v("How to get the vendor's AliExpress shop / product URL?")]),t("div",[t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.inviteImage1,fit:"contain","preview-src-list":[e.inviteImage1,e.inviteImage2]}}),t("el-image",{staticStyle:{width:"100px",height:"100px","margin-left":"20px"},attrs:{src:e.inviteImage2,fit:"scale-down","preview-src-list":[e.inviteImage2,e.inviteImage1]}})],1)]),t("i",{staticClass:"el-icon-question",staticStyle:{color:"#5c6ac4"}})])],1),t("el-input",{attrs:{placeholder:"Vendor's AliExpress shop / product URL"},model:{value:e.newAddVendorDialog.content,callback:function(t){e.$set(e.newAddVendorDialog,"content",t)},expression:"newAddVendorDialog.content"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:3===e.newAddVendorDialog.radio,expression:"newAddVendorDialog.radio === 3"}],staticStyle:{margin:"20px"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticStyle:{flex:"0 0 26%"}},[e._v("Vendor's "+e._s(e.$root.$children[0].pName.a)+" ID: ")]),t("el-input",{staticStyle:{flex:"0 0 50%"},attrs:{size:"small",placeholder:`Vendor's ${e.$root.$children[0].pName.a} ID`},model:{value:e.newAddVendorDialog.ourmallId,callback:function(t){e.$set(e.newAddVendorDialog,"ourmallId",t)},expression:"newAddVendorDialog.ourmallId"}})],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.newAddVendorDialog.btnNextLoading},on:{click:e.getShopUrl}},[e._v("Next")])],1)]),t("el-dialog",{attrs:{title:"Edit Vendor",visible:e.newEditDialog.visible,width:"600px","before-close":e.handleCloseNewEditDialog}},[t("div",[t("el-form",{staticClass:"new-edit-from",attrs:{"label-position":"left","label-width":"130px"}},[t("el-form-item",{attrs:{label:e.$root.$children[0].pName.a+" ID："}},[t("div",[e._v(e._s(this.newEditDialog.vendorId||"--- (NOT Joined)"))])]),t("el-form-item",{attrs:{label:"Vendor name："}},[t("el-input",{attrs:{placeholder:"Vendor name",size:"mini"},model:{value:e.newEditDialog.name,callback:function(t){e.$set(e.newEditDialog,"name",t)},expression:"newEditDialog.name"}})],1),t("el-form-item",{attrs:{label:"AilExpress shop："}},[t("div",{staticClass:"newEditurl"},[t("el-input",{attrs:{placeholder:"Vendor's AliExpress shop / product URL",size:"mini"},model:{value:e.newEditDialog.shopUrl,callback:function(t){e.$set(e.newEditDialog,"shopUrl",t)},expression:"newEditDialog.shopUrl"}})],1)])],1),t("div",{staticClass:"contact-wrapper"},[t("div",{staticClass:"mg-b-10 contact",staticStyle:{cursor:"pointer"},on:{click:function(t){e.newEditDialog.isUnfold=!e.newEditDialog.isUnfold}}},[e._v(" Contact："),t("i",{class:e.newEditDialog.isUnfold?"el-icon-caret-top":"el-icon-caret-bottom"})]),t("el-collapse-transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.newEditDialog.isUnfold,expression:"newEditDialog.isUnfold"}]},[t("el-row",{staticClass:"contact-list",attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"(Optional) Email",size:"small"},model:{value:e.newEditDialog.email,callback:function(t){e.$set(e.newEditDialog,"email",t)},expression:"newEditDialog.email"}})],1),t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"(Optional) WeChat",size:"small"},model:{value:e.newEditDialog.weChat,callback:function(t){e.$set(e.newEditDialog,"weChat",t)},expression:"newEditDialog.weChat"}})],1),t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"(Optional) Skype",size:"small"},model:{value:e.newEditDialog.skype,callback:function(t){e.$set(e.newEditDialog,"skype",t)},expression:"newEditDialog.skype"}})],1),t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"(Optional) Line",size:"small"},model:{value:e.newEditDialog.line,callback:function(t){e.$set(e.newEditDialog,"line",t)},expression:"newEditDialog.line"}})],1),t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"(Optional) QQ",size:"small"},model:{value:e.newEditDialog.QQ,callback:function(t){e.$set(e.newEditDialog,"QQ",t)},expression:"newEditDialog.QQ"}})],1),t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"(Optional) Ail WangWang",size:"small"},model:{value:e.newEditDialog.wangwang,callback:function(t){e.$set(e.newEditDialog,"wangwang",t)},expression:"newEditDialog.wangwang"}})],1),t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"(Optional) WhatsApp",size:"small"},model:{value:e.newEditDialog.whatsapp,callback:function(t){e.$set(e.newEditDialog,"whatsapp",t)},expression:"newEditDialog.whatsapp"}})],1)],1),t("div",[t("el-input",{attrs:{placeholder:"(Optional) Remark",size:"small"},model:{value:e.newEditDialog.remark,callback:function(t){e.$set(e.newEditDialog,"remark",t)},expression:"newEditDialog.remark"}})],1)],1)])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.newEditDialog.visible=!1}}},[e._v("Close")]),t("el-button",{attrs:{type:"primary",loading:e.newEditDialog.loading},on:{click:e.newSaveVendor}},[e._v("Save")])],1)]),t("el-dialog",{attrs:{title:"Invite Vendor",visible:e.inviteDialog.visible,width:"600px","before-close":e.closeInviteDialog}},[t("el-form",{staticStyle:{"margin-bottom":"0"},attrs:{"label-position":"left"}},[t("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"Invite Link: "}},[t("span",[t("a",{staticStyle:{color:"#409eff"},attrs:{href:e.inviteDialog.inviteCode,target:"_blank"}},[e._v(e._s(this.inviteDialog.inviteCode)+" ")]),t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.inviteDialog.inviteCode,expression:"inviteDialog.inviteCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],attrs:{size:"mini",type:"success"}},[e._v("Copy Link")])],1)])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.inviteDialog.visible=!1}}},[e._v("Close")])],1)],1),t("el-dialog",{attrs:{title:"Bonus Detail",visible:e.BonusVisible,"before-close":e.closeBonusVisible,width:"60%"}},[t("div",{staticClass:"mg-l-20 mg-b-20 mg-r-20",attrs:{loading:e.Bonusloading}},[t("div",{staticClass:"tableBox"},[t("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{height:"400",data:e.BonusList,stripe:""}},[t("el-table-column",{attrs:{label:"Type"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(1==i.row.symbol?"Recharge":"Expenditure"))])]}}])}),t("el-table-column",{attrs:{label:"Transaction Flow Line",prop:"code"}}),t("el-table-column",{attrs:{label:"Recharge Time"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(e.moment.unix(i.row.timeCreated).format("YYYY-MM-DD HH:mm:ss"))+" ")])]}}])}),t("el-table-column",{attrs:{label:"Amount（$）",prop:"amount"}}),t("el-table-column",{attrs:{label:"Remarks"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(i.row.remark))]),i.row.remark?e._e():t("span",[e._v("---")])]}}])})],1)],1),e.items.length?t("el-row",{attrs:{gutter:20}},[t("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[t("div",{staticStyle:{"margin-top":"15px"}},[t("el-pagination",{attrs:{"current-page":Number(e.BonusDialog.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.BonusDialog.pageSizes,"page-size":e.BonusDialog.rowsPerPage,total:Number(e.BonusDialog.total)},on:{"current-change":e.toBonusVisiblePage,"size-change":e.changeBonusVisiblePageSize}})],1)])],1):e._e()],1),t("el-divider"),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.BonusVisible=!1}}},[e._v("Close")])],1)],1),t("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:120}})],1)},o=[],s=(i("149f"),{data(){return{Bonusloading:!1,BonusList:[],BonusVisible:!1,inviteImage1:i("30a6"),inviteImage2:i("f80b"),inviteDialog:{visible:!1,inviteContents:"",inviteCode:""},BonusDialog:{id:"",page:1,pageSizes:[10,20,50,100],rowsPerPage:10,items:[],total:0,totalPage:0},newEditDialog:{isUnfold:!0,visible:!1,loading:!1,name:"",shopUrl:"",remark:"",email:"",id:"",weChat:"",skype:"",line:"",QQ:"",wangwang:"",whatsapp:"",vendorId:null},newAddVendorDialog:{visible:!1,content:"",btnNextLoading:!0,radio:1,ourmallId:"",name:""},loading:!1,tableHeight:400,reSizeTime:0,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("c_myVendorPerPage")?Number(localStorage.getItem("c_myVendorPerPage")):10,items:[],total:0,totalPage:0,filterParams:{vendorId:"",vendorLike:"",isRegister:"",productId:"",productName:""},filterParamsDefault:"{}",addVendorDialog:{isShow:!1,loading:!1,labelW:"120px",name:"",remark:"",email:"",id:"",weChat:"",skype:"",line:"",QQ:"",wangwang:"",whatsapp:""},addVendorDialogDefault:"{}"}},components:{},watch:{$route:"gotoPage"},computed:{},mounted(){this.addVendorDialogDefault=JSON.stringify(this.addVendorDialog),this.filterParamsDefault=JSON.stringify(this.filterParams),this.getItem()},beforeDestroy(){},methods:{changeBonusVisiblePageSize(e){this.BonusDialog.rowsPerPage=e,this.getBonus()},toBonusVisiblePage(e){this.BonusDialog.page=e,this.getBonus()},closeBonusVisible(){this.BonusDialog={id:"",page:1,pageSizes:[10,20,50,100],rowsPerPage:10,items:[],total:0,totalPage:0},this.BonusVisible=!1,this.BonusList=[]},openBonusDetail(e){this.BonusDialog.id=e,this.getBonus(),this.BonusVisible=!0},getBonus(){this.Bonusloading=!0,this.$apiCall("api.Relationship.bonusList",{relationshipId:this.BonusDialog.id,page:this.BonusDialog.page,rowsPerPage:this.BonusDialog.rowsPerPage},e=>{this.Bonusloading=!1,9999==e.ErrorCode?(this.BonusList=e.Data.Results,this.BonusDialog.total=Number(e.Data.Pagination.totalCount),this.BonusDialog.totalPage=Number(e.Data.Pagination.totalPage),$(".el-table__body-wrapper").eq(1).scrollTop(0)):this.$message({message:e.Message,type:"error"})})},gotoProduct(e){this.$router.push({name:"allocatedProducts",params:{vendorId:e}})},addVendoorChange(){this.newAddVendorDialog.ourmallId="",this.newAddVendorDialog.content=""},selectClick(e){const{shopifyId:t,name:i}=e;this.filterParams.productId=t,this.filterParams.productName=i,this.filterGetItem()},getProductSelectList(e,t){""!==e&&this.$apiCall("api.Product.findByUser",{name:e},e=>{9999==e.ErrorCode?t(e.Data.Results):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure())})},goPurchase(e,t){this.$router.push({path:"/Orders-processing",query:{rid:e,name:t}})},onCopy(){this.$elementMessage("Copy success","success")},onError(){this.$elementMessage("Copy failed","error")},closeInviteDialog(){this.inviteDialog.visible=!1},openInviteDialog(e){this.$showLoading(),this.inviteDialog.inviteCode="",this.inviteDialog.visible=!0,this.$apiCall("api.Relationship.getInviteContents",{relationshipId:e},e=>{if(9999==e.ErrorCode){let t=window.location.hostname.split(".");window.location.host.toLowerCase().indexOf("sandbox")>=0?this.inviteDialog.inviteCode=`http://sandboxvendor.${/^(\w+\.)+[a-zA-Z]+$/.test(window.location.hostname)?t[t.length-2]:"ourmall"}.com/#/invite?rid=${e.Data.Results.inviteCode}`:this.inviteDialog.inviteCode=`https://vendor.${/^(\w+\.)+[a-zA-Z]+$/.test(window.location.hostname)?t[t.length-2]:"ourmall"}.com/#/invite?rid=${e.Data.Results.inviteCode}`}else this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure();this.$hideLoading()})},handleCloseNewEditDialog(){this.newEditDialog.visible=!1},handleClosenewAddVendor(){this.newAddVendorDialog.visible=!1},gotoInvoice(e){this.$router.push({name:"WaitingForSourcing",params:{id:e.id,name:e.vendorName}})},delVendor(e){this.$confirm("Are you sure you want to delete it?","",{confirmButtonText:"Delete",cancelButtonText:"Discard",type:"error"}).then(()=>{this.$apiCall("api.Relationship.deleteByCustomer",{relationshipId:e.id},e=>{9999==e.ErrorCode?(this.$message({message:"Success",type:"success"}),this.getItem(!0),this.$emit("getNum")):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure())})}).catch(()=>{})},newEditVendor(e,t=!0){this.newEditDialog.isUnfold=t,this.newEditDialog.shopUrl=e.shopUrl,this.newEditDialog.name=e.vendorName,this.newEditDialog.id=e.id,this.newEditDialog.vendorId=e.vendorId,this.newEditDialog.shopName=e.shopName,this.newEditDialog.email=e.vendorEmail,this.newEditDialog.remark=e.vendorRemark,this.newEditDialog.weChat=e.vendorWeChat,this.newEditDialog.skype=e.vendorSkype,this.newEditDialog.line=e.vendorLine,this.newEditDialog.QQ=e.vendorQQ,this.newEditDialog.wangwang=e.vendorWangwang,this.newEditDialog.whatsapp=e.vendorWhatsapp,this.newEditDialog.loading=!1,this.newEditDialog.visible=!0},newSaveVendor(){if(!this.newEditDialog.name)return void this.$elementMessage("Customer name required","error");this.newEditDialog.loading=!0;let e="api.Relationship.addByCustomer",t={name:this.newEditDialog.name,email:this.newEditDialog.email,remark:this.newEditDialog.remark,weChat:this.newEditDialog.weChat,skype:this.newEditDialog.skype,line:this.newEditDialog.line,QQ:this.newEditDialog.QQ,wangwang:this.newEditDialog.wangwang,whatsapp:this.newEditDialog.whatsapp,shopUrl:this.newEditDialog.shopUrl};this.newEditDialog.id&&(t.relationshipId=this.newEditDialog.id,e="api.Relationship.changeByCustomer"),this.$apiCall(e,t,e=>{this.addVendorDialog.loading=!1,9999==e.ErrorCode?(this.newEditDialog.visible=!1,this.$elementMessage(this.newEditDialog.id?"customer successfully edited":"customer successfully added","success"),this.getItem(!0)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure()),this.newEditDialog.loading=!1})},openAddVendor(){this.newAddVendorDialog.content="",this.newAddVendorDialog.vendorId="",this.newAddVendorDialog.radio=1,this.newAddVendorDialog.btnNextLoading=!1,this.newAddVendorDialog.name="",this.newAddVendorDialog.visible=!0},getShopUrl(){const e={};1===this.newAddVendorDialog.radio?e.name=this.newAddVendorDialog.name:2===this.newAddVendorDialog.radio?e.url=this.newAddVendorDialog.content:e.ourmallId=this.newAddVendorDialog.ourmallId,this.newAddVendorDialog.btnNextLoading=!0,this.$apiCall("api.Relationship.addUrlByCustomer",e,e=>{9999==e.ErrorCode?(this.newAddVendorDialog.visible=!1,this.newEditVendor({shopUrl:e.Data.Results.shopUrl,id:e.Data.Results.id,vendorName:e.Data.Results.vendorName,shopName:e.Data.Results.shopName,vendorId:e.Data.Results.vendorId},!1),this.getItem(!0),this.$emit("getNum")):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure()),this.newAddVendorDialog.btnNextLoading=!1})},addVendorSaveSuccess(){this.getItem(!0)},clearFilter(){this.filterParams=JSON.parse(this.filterParamsDefault),1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},filterGetItem(){1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},getItem(e){this.$showLoading(),this.$apiCall("api.Relationship.findByCustomer",{page:this.page,rowsPerPage:this.rowsPerPage,vendorId:this.filterParams.vendorId,vendorLike:this.filterParams.vendorLike,isRegister:this.filterParams.isRegister,shopifyProductId:this.filterParams.productId},t=>{"9999"==t.ErrorCode?(this.items=t.Data.Results,this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage),e||(this.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0)):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure()),this.$hideLoading()})},toPage(e){e!=this.$route.query.page&&this.$router.push({query:{page:e}})},changePageSize(e){this.rowsPerPage=e,localStorage.setItem("c_myVendorPerPage",e),this.getItem()},gotoPage(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()}}}),l=s,n=(i("ff29"),i("2789"),i("e607")),r=Object(n["a"])(l,a,o,!1,null,"2912cb9a",null);t["default"]=r.exports},d444:function(e,t,i){},f80b:function(e,t,i){e.exports=i.p+"img/Invite2.ca223b3f.jpg"},ff29:function(e,t,i){"use strict";i("d444")}}]);
//# sourceMappingURL=MyVendors.5f4b2745.js.map