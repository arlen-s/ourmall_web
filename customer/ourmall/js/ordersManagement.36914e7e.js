(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ordersManagement"],{"07ac":function(e,t,a){var s=a("23e7"),o=a("6f53").values;s({target:"Object",stat:!0},{values:function(e){return o(e)}})},"088f":function(e,t,a){"use strict";a("994d")},"13d5":function(e,t,a){"use strict";var s=a("23e7"),o=a("d58f").left,r=a("a640"),i=a("2d00"),n=a("605d"),l=r("reduce"),c=!n&&i>79&&i<83;s({target:"Array",proto:!0,forced:!l||c},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2141:function(e,t,a){var s={"./n1.png":"79db","./n10.png":"c171","./n12.png":"6b31","./n2.png":"bbde","./n3.png":"955b","./n4.png":"dbe3"};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=r,e.exports=o,o.id="2141"},"6bca":function(e,t,a){"use strict";a("d4dc")},"6f53":function(e,t,a){var s=a("83ab"),o=a("df75"),r=a("fc6a"),i=a("d1e7").f,n=function(e){return function(t){var a,n=r(t),l=o(n),c=l.length,d=0,u=[];while(c>d)a=l[d++],s&&!i.call(n,a)||u.push(e?[a,n[a]]:n[a]);return u}};e.exports={entries:n(!0),values:n(!1)}},"7acd":function(e,t,a){"use strict";a("da1a")},"994d":function(e,t,a){},a15b:function(e,t,a){"use strict";var s=a("23e7"),o=a("44ad"),r=a("fc6a"),i=a("a640"),n=[].join,l=o!=Object,c=i("join",",");s({target:"Array",proto:!0,forced:l||!c},{join:function(e){return n.call(r(this),void 0===e?",":e)}})},a4ce:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"contentpanel my-custom-page"},[s("div",{ref:"pageHeader",staticClass:"pagetitle"},[s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[s("i",{staticClass:"el-icon-s-order"}),s("h2",[e._v(e._s(e.$t("Order Management")))])])]),s("div",{staticClass:"right"},[1==e.status||2==e.status?s("el-button",{attrs:{type:"primary",disabled:e.isDisabled},on:{click:e.updateFn}},[e._v(" "+e._s(e.$t("Update order"))+" ")]):e._e(),1==e.status?s("el-button",{attrs:{type:"primary"},on:{click:e.ImportFn}},[e._v(e._s(e.$t("Import order")))]):e._e(),2!=e.status||2!=e.activeName&&3!=e.activeName?s("el-button",{attrs:{type:"primary"},on:{click:e.exportOrder}},[e._v(" "+e._s(e.$t("Export order")))]):e._e()],1)]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pagebody"},[s("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[s("el-col",{attrs:{span:24}},[s("el-card",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("div",{ref:"pageFilter",staticClass:"page-filter"},[s("el-form",{attrs:{inline:!0,size:"mini"}},[2!=e.status||2!=e.activeName&&3!=e.activeName?[s("el-form-item",[s("el-input",{attrs:{placeholder:e.$t("Your No."),clearable:""},on:{clear:function(t){return e.clearFilter("codeName")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.codeName,callback:function(t){e.$set(e.filterParams,"codeName",t)},expression:"filterParams.codeName"}})],1),s("el-form-item",[s("el-input",{attrs:{placeholder:e.$t("Order Number"),clearable:""},on:{clear:function(t){return e.clearFilter("orderId")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.orderId,callback:function(t){e.$set(e.filterParams,"orderId",t)},expression:"filterParams.orderId"}})],1),s("el-form-item",[s("el-input",{attrs:{placeholder:e.$t("Customer"),clearable:""},on:{clear:function(t){return e.clearFilter("receiverName")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.receiverName,callback:function(t){e.$set(e.filterParams,"receiverName",t)},expression:"filterParams.receiverName"}})],1),s("el-form-item",{attrs:{label:e.$t("Shop name")}},[s("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:e.filterItem,clear:function(t){return e.clearFilter("accountIds")}},model:{value:e.filterParams.accountIds,callback:function(t){e.$set(e.filterParams,"accountIds",t)},expression:"filterParams.accountIds"}},e._l(e.storeList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.shopName,value:e.id}})})),1)],1),6==e.status?[s("el-form-item",[s("el-input",{attrs:{placeholder:e.$t("Payment Number"),clearable:""},on:{clear:function(t){return e.clearFilter("sysCode")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.sysCode,callback:function(t){e.$set(e.filterParams,"sysCode",t)},expression:"filterParams.sysCode"}})],1),s("el-form-item",{attrs:{label:"Created Time"}},[s("el-date-picker",{key:"date2",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(t){return e.clearFilter("date2")},change:e.dateChange2},model:{value:e.filterParams.date2,callback:function(t){e.$set(e.filterParams,"date2",t)},expression:"filterParams.date2"}})],1)]:e._e()]:[s("el-form-item",[s("el-input",{attrs:{placeholder:"Payment Number",clearable:""},on:{clear:function(t){return e.clearFilter("sysCode")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.sysCode,callback:function(t){e.$set(e.filterParams,"sysCode",t)},expression:"filterParams.sysCode"}})],1),s("el-form-item",{attrs:{label:"Payment time"}},[s("el-date-picker",{key:"date2",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(t){return e.clearFilter("date2")},change:e.dateChange2},model:{value:e.filterParams.date2,callback:function(t){e.$set(e.filterParams,"date2",t)},expression:"filterParams.date2"}})],1)],s("el-form-item",{attrs:{label:"spu"}},[s("el-input",{attrs:{placeholder:e.$t("please enter"),clearable:""},on:{clear:function(t){return e.clearFilter("spuLike")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.spuLike,callback:function(t){e.$set(e.filterParams,"spuLike",t)},expression:"filterParams.spuLike"}})],1),s("el-form-item",{attrs:{label:"goods name"}},[s("el-input",{attrs:{placeholder:e.$t("please enter"),clearable:""},on:{clear:function(t){return e.clearFilter("nameLike")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.nameLike,callback:function(t){e.$set(e.filterParams,"nameLike",t)},expression:"filterParams.nameLike"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.filterItem}},[e._v(e._s(e.$t("Filter")))]),s("el-button",{attrs:{type:"danger"},on:{click:e.clearFilter}},[e._v(e._s(e.$t("Clear")))])],1),s("el-form-item",{staticStyle:{width:"200px"}}),s("el-form-item",{staticClass:"btns-wrap"},[1==e.status&&1==e.activeName?[s("el-button",{attrs:{type:"primary"},on:{click:e.quoteFn}},[e._v(e._s(e.$t("Create a quote"))+" ")]),s("el-button",{attrs:{type:"primary"},on:{click:e.quoteCancelFn}},[e._v(e._s(e.$t("Quit quotation"))+" ")])]:e._e(),2==e.status&&1==e.activeName?[s("el-button",{attrs:{type:"primary"},on:{click:e.payFn}},[e._v(e._s(e.$t("Bulk payment")))]),s("el-button",{attrs:{type:"primary"},on:{click:e.payCancelFn}},[e._v(e._s(e.$t("Cancel payment"))+" ")])]:e._e(),4==e.status&&1==e.activeName?[s("el-button",{attrs:{type:"primary"},on:{click:e.syncFn}},[e._v(e._s(e.$t("Manually synced"))+" ")])]:e._e(),4!=e.status||2!=e.activeName&&3!=e.activeName?e._e():[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BatchContinuePay(1)}}},[e._v(e._s(e.$t("Continue Pay"))+" ")])],4==e.status&&3==e.activeName?[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BatchContinuePay(2)}}},[e._v(e._s(e.$t("Re quote"))+" ")])]:e._e()],2)],2)],1),e._l(e.tabList,(function(t,a){return s("el-tab-pane",{key:a,attrs:{name:t.name+""}},[s("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(t.title)+" "),s("span",{staticClass:"tx-danger"},[e._v("("+e._s(e.customerAllOrderCntText(t.id))+")")])])])}))],2)],1)],1),1!=e.status&&2!=e.status&&4!=e.status||1!=e.activeName?2==e.status?[s("el-table",{key:"gridTable2",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,"tooltip-effect":"dark","row-key":function(e){return e.id}},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),s("el-table-column",{attrs:{type:"expand",width:"25","reserve-selection":!0},scopedSlots:e._u([{key:"header",fn:function(){return[e.isExpansion?s("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[s("i",{staticClass:"el-icon-minus"})]):e._e(),e.isExpansion?e._e():s("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[s("i",{staticClass:"el-icon-plus"})])]},proxy:!0},{key:"default",fn:function(t){return[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-left":"0"},attrs:{data:t.row.items,"max-height":"360","row-style":e.rowStyle,"header-cell-style":e.rowStyle,"cell-style":e.rowStyle,"cell-class-name":e.cellClassName}},[s("el-table-column",{attrs:{prop:"",label:"Product Images",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.row.imgUrl,fit:"cover"}})]}}],null,!0)}),s("el-table-column",{attrs:{prop:"vendorProductName",label:"SKU number/quantity/name",width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.isManage||t.row.vendorPrice?e._e():s("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.unable(t.row)}}},[e._v(e._s(e.$t("Unable to be sourced")))]),s("p",{},[2==t.row.isManage?[s("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(t.row.vendorSku+"Unable to purchase")+" "),s("span",[s("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),s("el-badge",{staticClass:"mark",attrs:{value:t.row.quantity}})],1)])]:[1!=t.row.status?[s("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(t.row.vendorSku?t.row.vendorSku+" Products Off shelf":e.$t("null Please make an offer"))+" "),s("span",[s("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),s("el-badge",{staticClass:"mark",attrs:{value:t.row.quantity}})],1)])]:[s("span",{staticStyle:{display:"inline-block"}},[e._v(" "+e._s(t.row.vendorSku||"null Please make an offer")+" "),s("span",[s("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),s("el-badge",{staticClass:"mark",attrs:{value:t.row.quantity}})],1)])]]],2),s("span",[e._v(e._s(t.row.name))])]}}],null,!0)}),s("el-table-column",{attrs:{prop:"",label:"Attribute Value",width:"180",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.propertyValue))])]}}],null,!0)}),s("el-table-column",{attrs:{prop:"vendorSku",label:"Supplier Prices",width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[s("span",{staticStyle:{display:"inline-block"}},[a.row.vendorSku?s("span",[1!=t.row.discountType&&2!=t.row.discountType||2==a.row.isManage?[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))]:[s("span",[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number((a.row.amount-a.row.amount/t.row.productAmount*t.row.couponAmount)/a.row.quantity).toFixed(2))+" ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))])])]],2):s("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.$t("Please make an offer")))])])]}}],null,!0)}),s("el-table-column",{attrs:{prop:"phone",label:"Customer selling price",width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[s("span",[e._v(e._s(t.row.currency)+" "+e._s(Number(a.row.price).toFixed(2)))])]}}],null,!0)}),s("el-table-column",{attrs:{label:""}})],1)]}}])}),s("el-table-column",{attrs:{label:e.$t("Payment number"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.accountPayment&&t.row.accountPayment.sysCode?t.row.accountPayment.sysCode:"---"))])]}}])}),s("el-table-column",{attrs:{label:e.$t("Payment time"),width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e.moment.unix(t.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")||"---"))])]}}])}),s("el-table-column",{attrs:{label:e.$t("Payment amount")+"("+e.$store.state.country.symbol+")",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.discountType?s("span",[s("span",[e._v(e._s(t.row.payAmount?e.$exchangeRate(t.row.payAmount):"---")+" ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(e._s(t.row.totalAmount?e.$exchangeRate(t.row.totalAmount):"---"))])])]):s("span",[e._v(e._s(t.row.realAmount?e.$exchangeRate(t.row.realAmount):"---"))])]}}])}),2==e.activeName?[s("el-table-column",{attrs:{label:e.$t("Inventory lock remaining time"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.timeLeft))])]}}],null,!1,1366182696)})]:e._e(),s("el-table-column",{attrs:{label:e.$t("Order quantity"),"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.shopifyOrderCnt?s("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.shopifyOrderCnt(t.row)}}},[e._v(" "+e._s(t.row.shopifyOrderCnt)+" ")]):s("span",[e._v("---")])]}}])}),2==e.activeName?[s("el-table-column",{attrs:{label:e.$t("Status"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[[t.row.accountPayment?s("span",[e._v(e._s(e.statusPayArr[t.row.accountPayment.status]?e.statusPayArr[t.row.accountPayment.status].text:"---"))]):s("span",[e._v("---")])]]}}],null,!1,2727244090)})]:e._e(),3==e.activeName?[s("el-table-column",{attrs:{label:e.$t("Status"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[[t.row.paymentType?s("span",[e._v(e._s(e.paymentTypeArr[t.row.paymentType]?e.paymentTypeArr[t.row.paymentType].text:"---"))]):s("span",[e._v("---")])]]}}],null,!1,321751683)})]:e._e(),2==e.activeName?s("el-table-column",{attrs:{label:"Action",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.payCancelFn("row",t.row)}}},[e._v(" Cancel payment ")]),s("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.repayFn(t.row)}}},[e._v(" Repay ")]),s("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.handleCancel(t.row)}}},[e._v("Cancel")])],1)]}}],null,!1,1073893987)}):e._e(),3==e.activeName?s("el-table-column",{attrs:{label:"Action",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.handleCancel(t.row)}}},[e._v("Cancel")])],1)]}}],null,!1,3255363095)}):e._e()],2)]:[s("el-table",{key:"gridTable3",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,"tooltip-effect":"dark","row-key":function(e){return e.id}},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),s("el-table-column",{attrs:{type:"expand",width:"25","reserve-selection":!0},scopedSlots:e._u([{key:"header",fn:function(){return[e.isExpansion?s("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[s("i",{staticClass:"el-icon-minus"})]):e._e(),e.isExpansion?e._e():s("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[s("i",{staticClass:"el-icon-plus"})])]},proxy:!0},{key:"default",fn:function(t){return[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-left":"0"},attrs:{data:t.row.items,"max-height":"360","row-style":e.rowStyle,"header-cell-style":e.rowStyle,"cell-style":e.rowStyle,"cell-class-name":e.cellClassName}},[s("el-table-column",{attrs:{prop:"",label:"Product Images",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.row.imgUrl,fit:"cover"}})]}}],null,!0)}),s("el-table-column",{attrs:{prop:"vendorProductName",label:"SKU number/quantity/name",width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.isManage||t.row.vendorPrice?e._e():s("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.unable(t.row)}}},[e._v(e._s(e.$t("Unable to be sourced")))]),s("p",{},[2==t.row.isManage?[s("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(t.row.vendorSku+"Unable to purchase")+" "),s("span",[s("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),s("el-badge",{staticClass:"mark",attrs:{value:t.row.quantity}})],1)])]:[1!=t.row.status?[s("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(t.row.vendorSku?t.row.vendorSku+" Products Off shelf":"null Please make an offer")+" "),s("span",[s("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),s("el-badge",{staticClass:"mark",attrs:{value:t.row.quantity}})],1)])]:[s("span",{staticStyle:{display:"inline-block"}},[e._v(" "+e._s(t.row.vendorSku||"null Please make an offer")+" "),s("span",[s("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),s("el-badge",{staticClass:"mark",attrs:{value:t.row.quantity}})],1)])]]],2),s("span",[e._v(e._s(t.row.name))])]}}],null,!0)}),s("el-table-column",{attrs:{prop:"",label:"Attribute Value",width:"180",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.propertyValue))])]}}],null,!0)}),s("el-table-column",{attrs:{prop:"vendorSku",label:"Supplier Prices",width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[s("span",{staticStyle:{display:"inline-block"}},[a.row.vendorSku?s("span",[1!=t.row.discountType&&2!=t.row.discountType||2==a.row.isManage?[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))]:[s("span",[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number((a.row.amount-a.row.amount/t.row.productAmount*t.row.couponAmount)/a.row.quantity).toFixed(2))+" ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))])])]],2):s("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.$t("Please make an offer")))])])]}}],null,!0)}),s("el-table-column",{attrs:{prop:"phone",label:"Customer selling price",width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[s("span",[e._v(e._s(t.row.currency)+" "+e._s(Number(a.row.price).toFixed(2)))])]}}],null,!0)}),s("el-table-column",{attrs:{label:""}})],1)]}}])}),3==e.status?s("el-table-column",{attrs:{label:"order type"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v(e._s(1==t.row.shippingType?e.$t("Wholesale order"):e.$t("offline order")))])]}}],null,!1,622639079)}):e._e(),s("el-table-column",{attrs:{label:"Your shop order num",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{ref:"popover"+t.row.codeName,attrs:{width:"1000",trigger:"hover",placement:"top-start"}},[s("div",{staticClass:"items"},e._l(t.row.items,(function(a,o){return s("div",{key:t.row.orderId+t.row.codeName+o,staticClass:"d-flex mg-b-15"},[s("img",{attrs:{src:a.imgUrl,width:"80",height:"80"}}),s("div",{staticClass:"mg-l-10"},[s("p",{staticClass:"mg-b-10",staticStyle:{width:"600px"}},[a.vendorProductId?s("el-link",{attrs:{type:"primary",href:148982!=e.vendorId&&146428!=e.vendorId&&144875!=e.vendorId&&144843!=e.vendorId&&143779!=e.vendorId&&143654!=e.vendorId&&74!=e.vendorId?"/item/"+a.vendorProductId+"/"+a.vendorProductName+".html":"/itemOld/"+a.vendorProductId+"/"+a.vendorProductName+".html",target:"_blank"}},[e._v(" "+e._s(a.vendorProductName)+" ")]):s("span",[e._v(e._s(a.name))])],1),s("p",{staticClass:"mg-b-10"},[2==a.isManage?[s("span",{staticStyle:{width:"350px",display:"inline-block",color:"#F56C6C"}},[e._v("SKU: "+e._s(a.vendorSku+"Unable to purchase"))])]:[1!=a.status?[s("span",{staticStyle:{width:"350px",display:"inline-block",color:"#F56C6C"}},[e._v("SKU: "+e._s(a.vendorSku?a.vendorSku+" Products Off shelf":e.$t("null Please make an offer")))])]:[s("span",{staticStyle:{width:"350px",display:"inline-block"}},[e._v("SKU: "+e._s(a.vendorSku||e.$t("null Please make an offer")))])]]],2),s("p",[s("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" "+e._s(e.$t("Shop price"))+"："+e._s(t.row.currency)+" "+e._s(Number(a.price).toFixed(2)))]),s("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" "+e._s(e.$t("Supply unit price"))+"： "),a.vendorSku?s("span",[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.vendorPrice).toFixed(2)))]:[s("span",[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number((a.amount-a.amount/t.row.productAmount*t.row.couponAmount)/a.quantity).toFixed(2))+" ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.vendorPrice).toFixed(2)))])])]],2):s("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.$t("Please make an offer")))])]),s("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[e._v("* "+e._s(a.quantity))]),s("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.quantity*a.vendorPrice).toFixed(2)))]:[s("span",[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.amount-a.amount/t.row.productAmount*t.row.couponAmount).toFixed(2))+" ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.amount).toFixed(2)))])])]],2),2==a.isManage?s("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"right",color:"red"}},[e._v(" "+e._s(e.$t("Removed")))]):e._e()])])])})),0),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("span",[e._v(e._s(t.row.codeName))])])])]}}])}),s("el-table-column",{attrs:{label:"Order Number",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{ref:"popover"+t.row.orderId,attrs:{width:"1000",trigger:"hover",placement:"top-start"}},[s("div",{staticClass:"items"},e._l(t.row.items,(function(a,o){return s("div",{key:t.row.orderId+t.row.codeName+o,staticClass:"d-flex mg-b-15"},[s("img",{attrs:{src:a.imgUrl,width:"80",height:"80"}}),s("div",{staticClass:"mg-l-10"},[s("p",{staticClass:"mg-b-10",staticStyle:{width:"600px"}},[a.vendorProductId?s("el-link",{attrs:{type:"primary",href:148982!=e.vendorId&&146428!=e.vendorId&&144875!=e.vendorId&&144843!=e.vendorId&&143779!=e.vendorId&&143654!=e.vendorId&&74!=e.vendorId?"/item/"+a.vendorProductId+"/"+a.vendorProductName+".html":"/itemOld/"+a.vendorProductId+"/"+a.vendorProductName+".html",target:"_blank"}},[e._v(e._s(a.vendorProductName))]):s("span",[e._v(" "+e._s(a.name)+" ")])],1),s("p",{staticClass:"mg-b-10"},[2==a.isManage?[s("span",{staticStyle:{width:"350px",display:"inline-block",color:"#F56C6C"}},[e._v(" SKU: "+e._s(a.vendorSku+"Unable to purchase")+" ")])]:[1!=a.status?[s("span",{staticStyle:{width:"350px",display:"inline-block",color:"#F56C6C"}},[e._v(" SKU: "+e._s(a.vendorSku?a.vendorSku+" Products Off shelf":e.$t("null Please make an offer")))])]:[s("span",{staticStyle:{width:"350px",display:"inline-block"}},[e._v("SKU: "+e._s(a.vendorSku||e.$t("null Please make an offer")))])]]],2),s("p",[s("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" "+e._s(e.$t("Shop price"))+"："+e._s(t.row.currency)+" "+e._s(Number(a.price).toFixed(2)))]),s("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" "+e._s(e.$t("Supply unit price"))+"： "),a.vendorSku?s("span",[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v(" "+e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.vendorPrice).toFixed(2))+" ")]:[s("span",[e._v(" "+e._s(e.$store.state.country.symbol)+" "+e._s(Number((a.amount-a.amount/t.row.productAmount*t.row.couponAmount)/a.quantity).toFixed(2))+" ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(" "+e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.vendorPrice).toFixed(2))+" ")])])]],2):s("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.$t("Please make an offer")))])]),s("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[e._v("* "+e._s(a.quantity))]),s("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v(" "+e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.quantity*a.vendorPrice).toFixed(2))+" ")]:[s("span",[e._v(" "+e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.amount-a.amount/t.row.productAmount*t.row.couponAmount).toFixed(2))+" ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(" "+e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.amount).toFixed(2))+" ")])])]],2),2==a.isManage?s("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"right",color:"red"}},[e._v(" "+e._s(e.$t("Removed"))+" ")]):e._e()])])])})),0),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("span",[e._v(e._s(t.row.orderId||"---"))]),1!=e.status&&1==t.row.isSplit?s("img",{staticStyle:{"margin-left":"10px"},attrs:{src:a("c33b")}}):e._e()])])]}}])}),s("el-table-column",{attrs:{label:"Shop",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.store||"---"))])]}}])}),s("el-table-column",{attrs:{label:e.$t("Created Time"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(" "+e._s(e.moment(t.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")||"---")+" ")])]}}])}),s("el-table-column",{attrs:{label:e.$t("Shipping address"),"min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.zip?t.row.shippingJsonInfo.zip:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.address1?t.row.shippingJsonInfo.address1:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.city?t.row.shippingJsonInfo.city:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.province?t.row.shippingJsonInfo.province:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.country?t.row.shippingJsonInfo.country:"---")+" ")]),s("span",[e._v(e._s(t.row.receiverAddress||"---"))])])]}}])}),s("el-table-column",{attrs:{label:e.$t("Customer"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.receiverName||"---"))])]}}])}),148982!=e.vendorId||146428!=e.vendorId||144875!=e.vendorId||144843!=e.vendorId||143779!=e.vendorId||143654!=e.vendorId||140694!=e.vendorId||74!=e.vendorId?s("el-table-column",{attrs:{label:e.$t("warehouse"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.warehouseName||"---"))])]}}],null,!1,2097300393)}):e._e(),148982!=e.vendorId||146428!=e.vendorId||144875!=e.vendorId||144843!=e.vendorId||143779!=e.vendorId||143654!=e.vendorId||140694!=e.vendorId||74!=e.vendorId?s("el-table-column",{attrs:{label:e.$t("address"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.warehouseAddress,placement:"top-start"}},[s("i",{staticClass:"el-icon-chat-dot-square"})])]}}],null,!1,763579945)}):e._e(),4!=e.status||2!=e.activeName&&3!=e.activeName?e._e():s("el-table-column",{attrs:{label:"Operate",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[3==e.activeName?s("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.AbnormalContinuePay(t.row,2)}}},[e._v(e._s(e.$t("Re quote")))]):e._e()],1),s("div",[s("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.AbnormalContinuePay(t.row,1)}}},[e._v(" "+e._s(e.$t("Continue Pay")))])],1)]}}],null,!1,1718419583)}),16==e.status?s("el-table-column",{attrs:{label:"Operate",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.changeAor(t.row)}}},[e._v("resumption")])]}}],null,!1,2704993948)}):e._e(),1==e.status?[s("el-table-column",{attrs:{label:"Products",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.unBindQuantity||"---"))])]}}],null,!1,1107560650)})]:e._e(),1==e.status&&2==e.activeName&&"146445"==e.apiUserId?[s("el-table-column",{attrs:{label:"Action",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.addTracking(t.row)}}},[e._v(e._s(e.$t("Request Fullfill")))])]}}],null,!1,1884083721)})]:e._e(),3==e.status||5==e.status||6==e.status?[s("el-table-column",{attrs:{label:e.$t("Shipping Method"),width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(" "+e._s(t.row.trackCompany?t.row.trackCompany+(t.row.trackNumber?":"+t.row.trackNumber+" ["+(t.row.agingDaysBegin?t.row.agingDaysBegin:0)+"-"+(t.row.agingDaysEnd?t.row.agingDaysEnd:0)+"days]":"["+(t.row.agingDaysBegin?t.row.agingDaysBegin:0)+"-"+(t.row.agingDaysEnd?t.row.agingDaysEnd:0)+"days]"):"No logistics")+" ")])]}}],null,!1,3818381132)}),s("el-table-column",{attrs:{label:e.$t("Shipping cost")+"("+e.$store.state.country.symbol+")",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.discountType?s("span",[s("span",[e._v("0 ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(" "+e._s(t.row.trackFee?e.$exchangeRate(t.row.trackFee):"---")+" ")])])]):s("span",[e._v(" "+e._s(t.row.trackFee?e.$exchangeRate(t.row.trackFee):"---")+" ")])]}}],null,!1,698866347)}),s("el-table-column",{attrs:{label:e.$t("pay total")+"("+e.$store.state.country.symbol+")",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.discountType?s("span",[s("span",[e._v(" "+e._s(t.row.payAmount?e.$exchangeRate(t.row.payAmount):"---")+" ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(" "+e._s(t.row.realAmount?e.$exchangeRate(t.row.realAmount):"---")+" ")])])]):s("span",[e._v(" "+e._s(t.row.realAmount?e.$exchangeRate(t.row.realAmount):"---")+" ")])]}}],null,!1,1618285713)})]:e._e(),6==e.status?[s("el-table-column",{attrs:{label:e.$t("status"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(" "+e._s(e.statusArr[t.row.status]?e.statusArr[t.row.status].text:"---")+" ")])]}}],null,!1,3845386045)})]:e._e(),1!=e.status?[s("el-table-column",{attrs:{label:"Remark",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("div",[e._v(e._s(t.row.remark||"---"))])])]}}],null,!1,554469170)})]:e._e(),3==e.status||5==e.status?[s("el-table-column",{attrs:{label:"Action",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.afterFn("row",t.row)}}},[e._v(e._s(e.$t("after sales")))])]}}],null,!1,3683772086)})]:e._e()],2)]:[s("el-table",{key:"gridTable",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,"tooltip-effect":"dark","row-key":function(e){return e.id}},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),s("el-table-column",{attrs:{type:"expand",width:"25","reserve-selection":!0},scopedSlots:e._u([{key:"header",fn:function(){return[e.isExpansion?s("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[s("i",{staticClass:"el-icon-minus"})]):e._e(),e.isExpansion?e._e():s("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[s("i",{staticClass:"el-icon-plus"})])]},proxy:!0},{key:"default",fn:function(t){return[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-left":"0"},attrs:{data:t.row.items,"max-height":"360","row-style":e.rowStyle,"header-cell-style":e.rowStyle,"cell-style":e.rowStyle,"cell-class-name":e.cellClassName}},[s("el-table-column",{attrs:{prop:"",label:e.$t("Product Images"),width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.row.imgUrl,fit:"cover"}})]}}],null,!0)}),s("el-table-column",{attrs:{prop:"vendorProductName",label:"SKU number/quantity/name",width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.isManage||t.row.vendorPrice?e._e():s("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.unable(t.row)}}},[e._v(e._s(e.$t("Unable to be sourced")))]),s("p",{},[2==t.row.isManage?[s("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(t.row.vendorSku+"Unable to purchase")+" "),s("span",[s("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),s("el-badge",{staticClass:"mark",attrs:{value:t.row.quantity}})],1)])]:[1!=t.row.status?[s("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(t.row.vendorSku?t.row.vendorSku+" Products Off shelf":e.$t("null Please make an offer"))+" "),s("span",[s("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),s("el-badge",{staticClass:"mark",attrs:{value:t.row.quantity}})],1)])]:[s("span",{staticStyle:{display:"inline-block"}},[e._v(" "+e._s(t.row.vendorSku||e.$t("null Please make an offer"))+" "),s("span",[s("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),s("el-badge",{staticClass:"mark",attrs:{value:t.row.quantity}})],1)])]]],2),s("span",[e._v(e._s(t.row.name))])]}}],null,!0)}),s("el-table-column",{attrs:{prop:"",label:e.$t("Attribute Value"),width:"180",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.propertyValue))])]}}],null,!0)}),s("el-table-column",{attrs:{prop:"vendorSku",label:"Supplier Prices",width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[s("span",{staticStyle:{display:"inline-block"}},[a.row.vendorSku?s("span",[1!=t.row.discountType&&2!=t.row.discountType||2==a.row.isManage?[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))]:[s("span",[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number((a.row.amount-a.row.amount/t.row.productAmount*t.row.couponAmount)/a.row.quantity).toFixed(2))+" ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))])])]],2):s("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.$t("Please make an offer")))])])]}}],null,!0)}),s("el-table-column",{attrs:{prop:"phone",label:"Customer selling price",width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[s("span",[e._v(e._s(t.row.currency)+" "+e._s(Number(a.row.price).toFixed(2)))])]}}],null,!0)}),s("el-table-column",{attrs:{label:""}})],1)]}}],null,!1,3045281611)}),3==e.status?s("el-table-column",{attrs:{label:"order type"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v(e._s(1==t.row.shippingType?e.$t("Wholesale order"):e.$t("offline order")))])]}}],null,!1,622639079)}):e._e(),s("el-table-column",{attrs:{label:e.$t("Your shop order num"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.codeName))])]}}],null,!1,2865335244)}),s("el-table-column",{attrs:{label:e.$t("Order Number"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.orderId||"---"))])]}}],null,!1,3300786664)}),s("el-table-column",{attrs:{label:"Shop",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.store||"---"))])]}}],null,!1,3967041172)}),s("el-table-column",{attrs:{label:e.$t("Created Time"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e.moment(t.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")||"---"))])]}}],null,!1,274524835)}),s("el-table-column",{attrs:{label:e.$t("Shipping address"),"min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.zip?t.row.shippingJsonInfo.zip:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.address1?t.row.shippingJsonInfo.address1:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.city?t.row.shippingJsonInfo.city:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.province?t.row.shippingJsonInfo.province:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.country?t.row.shippingJsonInfo.country:"---")+" ")]),s("span",[e._v(e._s(t.row.receiverAddress||"---"))])])]}}],null,!1,2250560732)}),148982!=e.vendorId&&146428!=e.vendorId&&144875!=e.vendorId&&144843!=e.vendorId&&143779!=e.vendorId&&143654!=e.vendorId&&74!=e.vendorId?s("el-table-column",{attrs:{label:e.$t("warehouse"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.warehouseName||"---"))])]}}],null,!1,2097300393)}):e._e(),148982!=e.vendorId&&146428!=e.vendorId&&144875!=e.vendorId&&144843!=e.vendorId&&143779!=e.vendorId&&143654!=e.vendorId&&74!=e.vendorId?s("el-table-column",{attrs:{label:e.$t("address"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.warehouseAddress,placement:"top-start"}},[s("i",{staticClass:"el-icon-chat-dot-square"})])]}}],null,!1,763579945)}):e._e(),s("el-table-column",{attrs:{label:e.$t("Customer"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.receiverName||"---"))])]}}],null,!1,2665680341)}),1==e.status?[s("el-table-column",{attrs:{label:e.$t("Products"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.unBindQuantity||"---"))])]}}],null,!1,1107560650)})]:e._e(),2==e.status||4==e.status?[s("el-table-column",{attrs:{label:e.$t("Shipping Method"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isMailFree?s("div",[e._v(" Kostenloser Versand ")]):s("div",[t.row.shippingMethodArr&&t.row.shippingMethodArr.length?[s("el-select",{attrs:{size:"small"},on:{change:function(a){return e.filterShippingMethod(a,t.row)}},model:{value:t.row.shippingMethodId,callback:function(a){e.$set(t.row,"shippingMethodId",a)},expression:"scope.row.shippingMethodId"}},e._l(t.row.shippingMethodArr,(function(e){return s("el-option",{key:e.id,attrs:{label:(e.nameDisplay?e.nameDisplay:e.name)+" ["+(e.agingDaysBegin?e.agingDaysBegin:0)+"-"+(e.agingDaysEnd?e.agingDaysEnd:0)+"days]",value:e.id}})})),1)]:s("div",{staticClass:"tx-middle"},[s("div",[e._v(" --- "),s("i",{staticClass:"el-icon-warning",staticStyle:{"font-size":"20px",cursor:"pointer"},on:{click:function(a){return e.shippedFn(t.row)}}})])])],2)]}}],null,!1,2163511535)}),s("el-table-column",{attrs:{label:e.$t("Shipping cost")+"("+e.$store.state.country.symbol+")",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.discountType?s("span",[s("span",[e._v("0 ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(" "+e._s(t.row.shippingMethodItem?e.$exchangeRate(t.row.shippingMethodItem.fee):"---")+" ")])])]):s("span",[e._v(" "+e._s(t.row.shippingMethodItem?e.$exchangeRate(t.row.shippingMethodItem.fee):"---")+" ")])]}}],null,!1,3634372523)})]:e._e(),2==e.status?[s("el-table-column",{attrs:{label:e.$t("Total")+"("+e.$store.state.country.symbol+")",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(" "+e._s(t.row.totalAllAmount?e.$exchangeRate(t.row.totalAllAmount):"---")+" ")])]}}],null,!1,1144893202)})]:e._e(),4==e.status?[s("el-table-column",{attrs:{label:e.$t("pay total")+"("+e.$store.state.country.symbol+")",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.discountType?s("span",[s("span",[e._v(" "+e._s(t.row.payAmount?e.$exchangeRate(t.row.payAmount):"---")+" ")]),s("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[s("span",{staticStyle:{color:"#606266"}},[e._v(" "+e._s(t.row.realAmount?e.$exchangeRate(t.row.realAmount):"---")+" ")])])]):s("span",[e._v(" "+e._s(t.row.realAmount?e.$exchangeRate(t.row.realAmount):"---")+" ")])]}}],null,!1,1618285713)})]:e._e(),s("el-table-column",{attrs:{label:"Action",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[1==e.status?s("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.quoteFn("row",t.row)}}},[e._v("Quote")]):e._e(),2==e.status&&t.row.shippingMethodArr&&t.row.shippingMethodArr.length||2==e.status&&1==t.row.isMailFree?s("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.payFn("row",t.row)}}},[e._v(" "+e._s(e.$t("Pay"))+" ")]):e._e(),4==e.status?s("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.syncFn("row",t.row)}}},[e._v(e._s(e.$t("Manually synced"))+" ")]):e._e(),4==e.status?s("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.afterFn("row",t.row)}}},[e._v(e._s(e.$t("after sales")))]):e._e(),s("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.handleCancel(t.row)}}},[e._v("Cancel")])],1)]}}],null,!1,1769799629)}),1!=e.status?[s("el-table-column",{attrs:{label:"Remark",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("div",[e._v(e._s(t.row.remark||"---"))])])]}}],null,!1,554469170)})]:e._e()],2)]],2)],1)],1),e.items.length?s("el-row",{attrs:{gutter:20}},[s("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[s("div",[s("el-pagination",{attrs:{"current-page":e.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.pageSizes,"page-size":e.rowsPerPage,total:Number(e.total)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e()],1),s("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:120}}),s("el-dialog",{staticClass:"pay-dialog",attrs:{visible:e.dialogPay.isShow,loading:e.dialogPay.loading,width:"30%","before-close":e.handlePayClose,"close-on-press-escape":!1,"close-on-click-modal":!1,title:"Select Payment Method"}},[s("el-divider"),s("div",{staticClass:"pay-info"},[e.dialogPay.orderNum?s("div",{staticClass:"mg-b-10"},[e._v(" "+e._s(e.$t("Order Number"))+": "),s("b",[e._v(e._s(e.dialogPay.orderNum))])]):e._e(),e.dialogPay.amount?s("div",[e._v(" "+e._s(e.$t("Total Amount"))+": "),s("b",{staticClass:"tx-danger"},[e._v(e._s(e.$exchangeRate(e.dialogPay.amount.toFixed(2)))+" "+e._s(e.$store.state.country.symbol))])]):e._e()]),1==e.dialogPay.step?[s("div",{staticClass:"pay-platform"},[s("div",{staticClass:"d-flex title"},[s("el-alert",{attrs:{title:"All transactions are secure and encrypted.",type:"info",closable:!1}})],1),s("div",{staticClass:"platform-select"},[e._l(e.dialogPay.payTypes,(function(t){return s("div",{key:t.accountType},[s("a",{class:{active:e.dialogPay.platformType==t.accountType},attrs:{href:"javascript:;"},on:{click:function(a){return e.changePlatform(t.accountType)}}},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"icon-wrap",staticStyle:{width:"150px"}},[s("img",{attrs:{src:t.icon,alt:"",height:"30"}})]),s("span",[e._v(e._s(e.$t("Pay with"))+" "+e._s(t.name))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogPay.platformType!=t.accountType,expression:"dialogPay.platformType != type.accountType"}],staticClass:"active"},[s("img",{attrs:{src:a("3143"),alt:"",height:"20"}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogPay.platformType==t.accountType,expression:"dialogPay.platformType == type.accountType"}],staticClass:"active-icon"},[s("img",{attrs:{src:a("f753"),alt:"",height:"20"}})])])])})),e.invoiceInfo&&e.invoiceInfo.relationship&&1==e.invoiceInfo.relationship.bonusStatus?s("div",{class:{dis:0==e.invoiceInfo.relationship.bonus}},[s("a",{class:{active:6==e.dialogPay.platformType},attrs:{href:"javascript:;"},on:{click:function(t){return e.changePlatform(6)}}},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"icon-wrap",staticStyle:{width:"150px"}},[s("img",{attrs:{src:a("2f78"),alt:"",height:"30"}})]),s("span",[e._v(e._s(e.$t("Bonus"))+"($"+e._s(Number((e.invoiceInfo.relationship||{}).bonus))+")")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:6!=e.dialogPay.platformType,expression:"dialogPay.platformType != 6"}],staticClass:"active"},[e.invoiceInfo&&e.invoiceInfo.relationship&&e.invoiceInfo.relationship.bonus>0?s("img",{attrs:{src:a("3143"),alt:"",height:"20"}}):s("div",{staticClass:"disable-bonus"})]),s("div",{directives:[{name:"show",rawName:"v-show",value:6==e.dialogPay.platformType&&0!=e.invoiceInfo.relationship.bonus,expression:"\n                    dialogPay.platformType == 6 &&\n                      invoiceInfo.relationship.bonus != 0\n                  "}],staticClass:"active-icon"},[s("img",{attrs:{src:a("f753"),alt:"",height:"20"}})])])]):e._e(),0==e.dialogPay.payTypes.length&&e.invoiceInfo&&e.invoiceInfo.relationship&&2==e.invoiceInfo.relationship.bonusStatus?s("div",[e._v(" "+e._s(e.$t("There is no alternative method of payment"))+" ")]):e._e()],2),s("div",{staticClass:"action"},[s("el-button",{staticStyle:{width:"120px","font-size":"18px"},attrs:{loading:e.dialogPay.payLoading,type:"primary",round:""},on:{click:e.orderPay}},[e._v("Pay")])],1)])]:e._e(),2==e.dialogPay.step?[s("div",{staticClass:"paying"},[s("i",{staticClass:"mg-r-10 el-icon-loading"}),s("p",[e._v(e._s(e.$t("Please do not close the page during payment")))])]),s("div",{staticClass:"close-pay",on:{click:e.closePay}},[s("el-button",{attrs:{type:"info",round:"",plain:""}},[e._v(e._s(e.$t("Close pay")))])],1)]:e._e(),3==e.dialogPay.step?[e.dialogPay.msg?s("div",{staticClass:"pay-success error"},[s("i",{staticClass:"el-icon-circle-close"}),s("p",[e._v(e._s(e.dialogPay.msg))])]):s("div",{staticClass:"pay-success"},[s("i",{staticClass:"el-icon-success"}),s("p",[e._v(" "+e._s(e.$t("Your order has been successfully paid"))+" "),e._v(" . ")])]),s("div",{staticClass:"close-pay",on:{click:e.closePay}},[s("el-button",{attrs:{type:"info",round:"",plain:""}},[e._v(e._s(e.$t("Close pay")))])],1)]:e._e()],2),s("checkout",{attrs:{data:e.dialogCheckOut},on:{payCheckOut:e.payCheckOut}}),s("underline",{attrs:{data:e.dialogUnderline},on:{submitUnderline:e.submitUnderline}}),s("dlocal",{attrs:{data:e.dialogDlocal},on:{submitDlocal:e.submitDlocal}}),s("checkStock",{attrs:{data:e.dialogCheckStock},on:{continuePay:e.continuePay}}),s("dialogLogistic",{attrs:{dialogLogistic:e.dialogLogistic}}),s("orderCnt",{attrs:{data:e.dialogOrderCnt}}),s("el-dialog",{attrs:{visible:e.abnormalStatus,"before-close":e.abnormalClose,width:"550px"}},[s("div",{staticClass:"abnormal-dialog"},[1!=e.abnormalType||e.canPay?e._e():s("h1",[e._v(" "+e._s(e.$t("The selected orders are abnormal and payment cannot be continued"))+" ")]),1==e.abnormalType&&e.canPay?s("h1",[e._v(" "+e._s(e.$t("Payment can continue after excluding the following goods"))+" ")]):e._e(),2==e.abnormalType?s("h1",[e._v(" "+e._s(e.$t("After removing the off shelf goods, the order will be returned to the"))+e._s(e.$t("price to be quoted"))+" ")]):e._e(),s("el-table",{attrs:{data:e.abnormalData}},[s("el-table-column",{attrs:{label:"Goods SKU"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.items.vendorSku||"--"))]}}])}),s("el-table-column",{attrs:{label:"Order Number",prop:"codeName"}}),s("el-table-column",{attrs:{label:"Status",prop:"reason"}})],1),s("div",{staticClass:"btn-area"},[e.canPay?s("el-button",{attrs:{size:"small"},on:{click:e.abnormalClose}},[e._v(e._s(e.$t("Cancel")))]):e._e(),s("el-button",{attrs:{size:"small",loading:e.abnormalBtnVisible,type:"primary"},on:{click:e.AbnormalReClick}},[e._v(" "+e._s(e.$t("Confirm")))])],1)],1)]),s("el-dialog",{attrs:{title:"Create Order",visible:e.createVisible,"before-close":e.ImportCancel,width:"400px"}},[s("div",{staticClass:"create-order"},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","auto-upload":!1,"file-list":e.uploadfileList,"on-change":e.fileBeforeUpload,action:""}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.$t("选取文件")))]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[s("div",[e._v(" "+e._s(e.$t("点击下载"))+" "),s("a",{staticClass:"template",on:{click:e.downloadFile}},[e._v(e._s(e.$t("订单导入模板")))])]),e._v(" "+e._s(e.$t("请按规范填写表格，仅支持xlsx格式文件"))),s("br"),e._v(" "+e._s(e.$t("上传的文件不能超过2M，只处理前99条数据"))+" ")])],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"mini"},on:{click:e.ImportCancel}},[e._v("cancel")]),s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.createUpload}},[e._v(e._s(e.$t("submit")))])],1)]),e.addTrackingDialog.visible?s("add-tracking-dialog",{attrs:{dialog:e.addTrackingDialog}}):e._e(),s("dialogSales",{attrs:{salesData:e.afterData},on:{callBackSale:e.changeTr}})],1)},o=[],r=(a("99af"),a("4de4"),a("13d5"),a("b0c0"),a("a9e3"),a("b64b"),a("ac1f"),a("5319"),a("159b"),a("ade3")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogLogistic.isShow,width:"800px","show-close":!1,title:""},on:{"update:visible":function(t){return e.$set(e.dialogLogistic,"isShow",t)}}},[a("el-row",{staticStyle:{"word-break":"break-word"}},[a("el-row",{staticClass:"tx-center pd-15"},[1==e.dialogLogistic.errorType?a("div",[e._v(e._s(e.$t("The receiving address has no logistics method set")))]):e._e(),3==e.dialogLogistic.errorType?a("div",[e._v(e._s(e.$t("The order is below the minimum deliverable weight"))+"("+e._s(e.dialogLogistic.min)+"g)")]):e._e(),2==e.dialogLogistic.errorType?a("div",[e._v(e._s(e.$t("The order is below the minimum deliverable volume"))+"("+e._s(e.dialogLogistic.min)+"cm"),a("sup",[e._v("3")]),e._v(")")]):e._e(),5==e.dialogLogistic.errorType?a("div",[e._v(e._s(e.$t("The order is higher than the maximum deliverable weight"))+"("+e._s(e.dialogLogistic.max)+"g)")]):e._e(),4==e.dialogLogistic.errorType?a("div",[e._v(e._s(e.$t("The order is higher than the maximum deliverable volume"))+"("+e._s(e.dialogLogistic.max)+"cm"),a("sup",[e._v("3")]),e._v(")")]):e._e(),6==e.dialogLogistic.errorType?a("div",[e._v(e._s(e.$t("The following product attributes of this order do not meet the attribute requirements of deliverable products")))]):e._e(),7==e.dialogLogistic.errorType?a("div",[e._v(e._s(e.$t("The total weight of the goods in this order does not meet the deliverable requirements")))]):e._e()]),3==e.dialogLogistic.errorType||5==e.dialogLogistic.errorType?a("el-row",{staticClass:"tx-center pd-15"},[a("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:e.items}},[a("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),a("el-table-column",{attrs:{label:e.$t("Weight")+"(g)",prop:"weight"}}),a("el-table-column",{attrs:{label:e.$t("Quantity"),prop:"number"}}),a("el-table-column",{attrs:{label:e.$t("Total weight")+"(g)",prop:"weightTotal"}})],1)],1):e._e(),2==e.dialogLogistic.errorType||4==e.dialogLogistic.errorType?a("el-row",{staticClass:"tx-center pd-15"},[a("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:e.items}},[a("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),a("el-table-column",{attrs:{prop:"volume"}},[a("template",{slot:"header"},[e._v(" Volume(cm"),a("sup",[e._v("3")]),e._v(") ")])],2),a("el-table-column",{attrs:{label:e.$t("Quantity"),prop:"number"}}),a("el-table-column",{attrs:{prop:"volumeTotal"}},[a("template",{slot:"header"},[e._v(" Total volume(cm"),a("sup",[e._v("3")]),e._v(") ")])],2)],1)],1):e._e(),6==e.dialogLogistic.errorType?a("el-row",{staticClass:"tx-center pd-15"},[a("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:e.items}},[a("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),a("el-table-column",{attrs:{label:e.$t("Attribute")},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.productType,(function(t,s){return a("div",{key:s},[e._v(" "+e._s(e.$dict.productType[t]?e.$dict.productType[t].text:"")+" ")])}))}}],null,!1,3137592593)})],1)],1):e._e(),a("el-row",{staticClass:"tx-center"},[a("el-button",{staticClass:"mt-15",attrs:{type:"primary"},on:{click:e.closeHandle}},[e._v(e._s(e.$t("I Know")))])],1)],1)],1)},n=[],l=(a("07ac"),{props:["dialogLogistic"],data:function(){return{items:[]}},watch:{"dialogLogistic.items":{handler:function(){this.dialogLogistic.items&&(this.items=Object.values(this.dialogLogistic.items))},deep:!0,immediate:!0}},mounted:function(){},methods:{closeHandle:function(){this.dialogLogistic.isShow=!1,this.dialogLogistic.items=[],this.dialogLogistic.errorType=null,this.dialogLogistic.min="",this.dialogLogistic.max=""}}}),c=l,d=(a("6bca"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"4989fc5e",null),p=u.exports,m=a("9538"),h=a("86f8"),f=a("1ce8"),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.data.loading,expression:"data.loading"}],attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,title:"The following orders are out of stock or the products have been off the shelves, whether to delete these orders and continue to pay",visible:e.data.isShow,width:"800px"},on:{"update:visible":function(t){return e.$set(e.data,"isShow",t)}}},[a("el-divider"),a("div",{staticClass:"pd-x-20 mg-y-30"},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.data.items}},[a("el-table-column",{attrs:{label:"Abnormal SKU",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"d-flex"},[a("img",{attrs:{src:t.row.imgUrl,width:"60",height:"60"}}),a("div",{staticClass:"mg-l-20"},[a("p",[e._v(e._s(t.row.name))]),a("p",[e._v("SPU: "+e._s(t.row.spu))]),a("p",[e._v("SKU: "+e._s(t.row.sku))])])])]}}])}),a("el-table-column",{attrs:{prop:"codeName",label:"Order Number",width:"150"}}),a("el-table-column",{attrs:{prop:"reason",label:"Reason for abnormal case",width:"250"}})],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},on:{click:function(t){e.data.isShow=!1}},slot:"footer"},[a("el-button",[e._v(" "+e._s(e.$t("Cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.continuePay()}}},[e._v(" Pay ")])],1)],1)],1)},g=[],b={props:["data"],data:function(){return{}},created:function(){},mounted:function(){},methods:{continuePay:function(){this.$emit("continuePay")}}},v=b,w=Object(d["a"])(v,y,g,!1,null,"19cc31c8",null),_=w.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.data.loading,expression:"data.loading"}],attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,title:"订单信息",visible:e.data.isShow,width:"800px"},on:{"update:visible":function(t){return e.$set(e.data,"isShow",t)}}},[a("el-divider"),a("div",{staticClass:"pd-x-20 mg-y-30"},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.data.items}},[a("el-table-column",{attrs:{prop:"codeName",label:e.$t("第三方订单编号"),width:"150"}}),a("el-table-column",{attrs:{prop:"orderId",label:e.$t("订单编号"),width:"200"}}),a("el-table-column",{attrs:{prop:"store",label:e.$t("店铺"),width:"150"}}),a("el-table-column",{attrs:{prop:"timeCreated",label:"创建时间",width:"250"}})],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},on:{click:function(t){e.data.isShow=!1}},slot:"footer"},[a("el-button",[e._v(" "+e._s(e.$t("取消"))+" ")])],1)],1)],1)},S=[],C={props:["data"],data:function(){return{}},created:function(){},mounted:function(){},methods:{}},P=C,I=Object(d["a"])(P,k,S,!1,null,"3ec32684",null),x=I.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.$t("Add Tracking"),visible:e.dialog.visible,"close-on-click-modal":!1,"before-close":e.initDialog,top:"10vh"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[a("div",{staticClass:"scroll-box"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:e.$t("Track number"),prop:"number"}},[a("el-input",{attrs:{placeholder:e.$t("Please input the tracking number")},model:{value:e.ruleForm.number,callback:function(t){e.$set(e.ruleForm,"number",t)},expression:"ruleForm.number"}})],1),a("el-form-item",{attrs:{label:e.$t("Track company"),prop:"company"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("Please select logistics company")},model:{value:e.ruleForm.company,callback:function(t){e.$set(e.ruleForm,"company",t)},expression:"ruleForm.company"}},e._l(e.companyList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.key}})})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("ruleForm")}}},[e._v(" "+e._s(e.$t("Confirm"))+" ")]),a("el-button",{on:{click:function(t){return e.initDialog()}}},[e._v(" "+e._s(e.$t("Cancel"))+" ")])],1)])},T=[],A={name:"name",props:{dialog:{type:Object,default:function(){return{visible:!1,row:{}}}}},data:function(){return{dialogModal:this.dialog,ruleForm:{number:"",company:""},rules:{number:[{required:!0,message:this.$t("Please input the tracking number"),trigger:"blur"}],company:[{required:!0,message:this.$t("Please select logistics company"),trigger:"change"}]},companyList:[]}},watch:{dialog:{handler:function(){this.getCompany()},deep:!0,immediate:!0}},methods:{getCompany:function(){var e=this;this.$apiCall("api.Invoice.getShopifyCompany",{},(function(t){"9999"==t.ErrorCode?e.companyList=t.Data.Results:e.$elementMessage(t.Message,"error")}))},initDialog:function(){this.dialog.visible=!1,this.dialog.row={},this.$refs.ruleForm.resetFields()},save:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var a={id:t.dialogModal.row.id,trackNumber:t.ruleForm.number,trackKey:t.ruleForm.company};t.$apiCall("api.ShopifyOrder.insertDeliverShopify",a,(function(e){"9999"==e.ErrorCode?(t.$elementMessage(t.$t("Your request has been sent"),"success"),t.initDialog(),t.$parent.getItem()):t.$elementMessage(e.Message,"error")}))}))}}},N=A,O=(a("7acd"),Object(d["a"])(N,M,T,!1,null,"538deba3",null)),D=O.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-dialog",{attrs:{title:e.$t("after sales"),visible:e.salesData.dialogVisible,width:"30%","before-close":e.cancel},on:{"update:visible":function(t){return e.$set(e.salesData,"dialogVisible",t)},open:function(t){return e.open()}}},[a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"140px"}},[a("el-form-item",{attrs:{label:e.$t("交易类型"),required:""}},[a("el-select",{attrs:{placeholder:e.$t("Please select")},model:{value:e.form.dealType,callback:function(t){e.$set(e.form,"dealType",t)},expression:"form.dealType"}},[a("el-option",{attrs:{label:e.$t("退款"),value:"1"}}),a("el-option",{attrs:{label:e.$t("更换"),value:"2"}})],1)],1),a("el-form-item",{attrs:{label:e.$t("问题类型"),required:""}},[a("el-select",{attrs:{placeholder:e.$t("Please select")},model:{value:e.form.problemType,callback:function(t){e.$set(e.form,"problemType",t)},expression:"form.problemType"}},e._l(e.questionList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:e.$t("问题描述")}},[a("el-input",{attrs:{type:"textarea",placeholder:e.$t("选填")},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("取消")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v(e._s(e.$t("确定")))])],1)])],1)},F=[],E={props:["salesData"],components:{},data:function(){return{form:{dealType:"",problemType:"",desc:""},questionList:[{label:this.$t("修改客户相关信息"),id:1},{label:this.$t("取消订单"),id:2},{label:this.$t("无跟踪信息"),id:3},{label:this.$t("跟踪信息长时间未更新"),id:4},{label:this.$t("物品损坏"),id:5},{label:this.$t("物品丢失"),id:6},{label:this.$t("发送错误产品"),id:7},{label:this.$t("发送错误地址"),id:8},{label:this.$t("订单暂停"),id:9}]}},computed:{},watch:{},methods:{handleClose:function(){},cancel:function(){this.form.dealType="",this.form.problemType="",this.form.desc="",this.$emit("callBackSale")},open:function(){this.form.dealType="",this.form.problemType="",this.form.desc=""},save:function(){var e=this,t={accountId:this.salesData.shopifyAccountId,orderId:this.salesData.orderId,type:this.form.dealType,reasonType:this.form.problemType,description:this.form.desc};this.$emit("callBackSale"),this.$apiCall("api.OrderRefund.afterService",t,{},(function(t){console.log(t,"35235"),"9999"==t.ErrorCode?(e.form.dealType="",e.form.problemType="",e.form.desc="",e.$emit("callBackSale")):e.$elementMessage(t.Message,"error")}))}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},R=E,U=Object(d["a"])(R,L,F,!1,null,"d66bb2c8",null),Y=U.exports,z={data:function(){return{apiUserId:localStorage.getItem("c_apiUserId"),dialogLogisticDefault:"{}",dialogLogistic:{isShow:!1,errorType:null,items:[],max:"",min:""},formHouse:{type:[]},afterData:{dialogVisible:!1,shopifyAccountId:"",orderId:""},dialogVisibleHouse:!1,isExpansion:!1,vendorId:localStorage.getItem("vendorId"),details:{},createVisible:!1,abnormalStatus:!1,uploadfileList:[],abnormalSelection:[],abnormalData:[],batchChange:!1,abnormalBtnVisible:!1,abnormalType:0,canPay:!1,loading:!1,tableHeight:400,reSizeTime:0,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("c_ordersRowsPerPage")?Number(localStorage.getItem("c_ordersRowsPerPage")):10,items:[],total:0,totalPage:0,status:this.$route.params.status?Number(this.$route.params.status):1,activeName:"1",tabList:[],storeList:[],checkIds:[],checkItems:[],customerAllOrderCnt:{},filterParams:Object(r["a"])({date:[],dateFrom:"",dateTo:"",date2:[],dateFrom2:"",dateTo2:"",accountIds:"",orderId:"",codeName:"",receiverName:"",sysCode:"",spuLike:""},"spuLike",""),filterParamsDefault:"{}",dialogPay:{isShow:!1,loading:!1,orderNum:"",amount:"",platformType:"",payLoading:!1,step:1,msg:"",payTypes:[],params:"",openType:""},dialogPayDefault:"{}",dialogCheckStock:{isShow:!1,loading:!1,params:"",openType:"",items:[]},dialogCheckStockDefault:"{}",dialogCheckOut:{isShow:!1,loading:!1,packages:null,orderPay:null,token:""},dialogUnderline:{isShow:!1,loading:!1,paymentId:"",params:"",payAmount:0},dialogDlocal:{isShow:!1,invoiceId:"",loading:!1},dialogOrderCnt:{isShow:!1,items:[]},payTime:0,payAmount:0,newWin:null,storehouseList:[],invoiceInfo:{id:"",relationship:{bonus:0,bonusStatus:""}},statusArr:{2:{text:this.$t("Vendor quoted order"),type:"warning",val:2},4:{text:this.$t("Payment Not Received"),type:"warning",val:4},3:{text:this.$t("Pending payment"),type:"warning",val:3},5:{text:this.$t("Waiting for fulfill"),type:"warning",val:5},6:{text:this.$t("Fulfilled"),type:"success",val:6},7:{text:this.$t("Completed"),type:"success",val:7},8:{text:this.$t("Logistics synchronization failed"),type:"info",val:8},9:{text:this.$t("Unable to purchase"),type:"info",val:9},10:{text:this.$t("Products Off shelf"),type:"info",val:10},11:{text:this.$t("Payment to be completed"),type:"warning",val:11},12:{text:this.$t("Waiting for fulfill"),type:"warning",val:12},14:{text:this.$t("Quit quotation"),type:"warning",val:14}},statusPayArr:{1:{text:this.$t("Pending Payment"),type:"danger",val:1},4:{text:this.$t("Payment failed"),type:"warning",val:4},5:{text:this.$t("Vendor Verifying Payment"),type:"warning",val:5}},paymentTypeArr:{1:{text:this.$t("Vendor Verifying Payment"),type:"danger",val:1},4:{text:this.$t("Payment result to be returned"),type:"warning",val:4}},isDisabled:!1,count:"",timer:null,addTrackingDialog:{visible:!1,row:{}}}},components:{checkout:m["a"],dialogLogistic:p,underline:h["a"],dlocal:f["a"],checkStock:_,orderCnt:x,AddTrackingDialog:D,dialogSales:Y},watch:{$route:function(e,t){this.status=this.$route.params.status?Number(this.$route.params.status):2,this.activeName=this.activeName?this.activeName:"1",e.params.status!==t.params.status&&(this.filterParams=JSON.parse(this.filterParamsDefault)),this.gotoPage(),this.gettabList()},status:function(){this.$refs.gridTable.clearSelection(),this.filterParams=JSON.parse(this.filterParamsDefault),this.activeName="1"},activeName:function(){this.$refs.gridTable.clearSelection(),this.toPage(1)}},mounted:function(){var e=this;this.$route.query.type&&(this.activeName=String(this.$route.query.type)),this.getItem(),this.dialogPayDefault=JSON.stringify(this.dialogPay),this.dialogCheckStockDefault=JSON.stringify(this.dialogCheckStock);var t=this.$route.params.status?Number(this.$route.params.status):1,a=this.$route.query.paystatus?Number(this.$route.query.paystatus):1;if(2==t&&"1"==this.activeName&&(2==a||3==a)){var s=localStorage.getItem("c_returnPayId")||"",o=localStorage.getItem("c_returnPaySessionId")||"";2==a&&this.paySuccess(s,o),localStorage.setItem("c_returnPayStatus",a)}window.addEventListener("storage",(function(t){if("returnPayStatus"==t.key&&e.dialogPay.isShow){var a=localStorage.getItem("c_returnPayStatus")||"";2==a?(e.dialogPay.step=3,e.closePayPage()):(e.dialogPay.step=3,e.dialogPay.msg="Payment failed",e.closePayPage())}})),setInterval((function(){}),1e3)},beforeDestroy:function(){},methods:{addTracking:function(e){this.addTrackingDialog={visible:!0,row:e}},shippedFn:function(e){this.dialogLogistic.errorType=e.shippingMethodArr.errorType,e.shippingMethodArr.errorSkuList&&(this.dialogLogistic.items=e.shippingMethodArr.errorSkuList),this.dialogLogistic.max=e.shippingMethodArr.max,this.dialogLogistic.min=e.shippingMethodArr.min,this.dialogLogistic.isShow=!0},deleteOrder:function(e,t){var a=this,s=[];t.items.forEach((function(e){e.check&&s.push(e.id)})),0==s.length&&s.push(e.id),this.$confirm(this.$t("确定删除该商品？"),"Tips",{confirmButtonText:this.$t("确定"),cancelButtonText:this.$t("取消"),type:"warning"}).then((function(){a.$apiCall("api.ShopifyOrder.delshopifyItem",{ids:s},(function(e){9999==e.ErrorCode?(a.getItem(),a.$elementMessage(a.$t("Delete Successful!"),"success")):a.$elementMessage(e.Message,"error")}))})).catch((function(){a.$message({type:"info",message:"已取消"})}))},handlePurchaseChange:function(e){var t=this;this.abnormalSelection=[],e.forEach((function(e){t.abnormalSelection.push(e.id)}))},ImportFn:function(){this.createVisible=!0},batchWareHouse:function(){0!=this.checkIds.length?this.dialogVisibleHouse=!0:this.$message.error(this.$t("Please select an order"))},buildOrder:function(){var e=this,t={id:this.checkIds,warehouseId:this.formHouse.type};this.$apiCall("api.ShopifyOrder.orderChooseWarehouse",t,(function(t){9999==t.ErrorCode?(e.$message.success("Binding succeeded!"),e.dialogVisibleHouse=!1,e.formHouse.type=[]):e.$message({message:t.Message,type:"error"})}))},openStorehouse:function(){var e=this;this.$apiCall("api.Warehouse.finds",{},(function(t){9999==t.ErrorCode?(e.storehouseList=t.Data.Results,0==t.Data.Results.length&&e.$message.error("There is no warehouse, please go to add！")):e.$message({message:t.Message,type:"error"})}))},ImportCancel:function(){this.createVisible=!1},createUpload:function(){var e=this;if(this.uploadfileList.length)if(this.uploadfileList[0].raw.size/1024/1024>2)this.$message({message:this.$t("file cannot over 2MB"),type:"error"});else{var t=this.uploadfileList[0].raw;this.$showLoading(),0==$("#ifileProCreate").length&&$("body").append('<iframe id="ifileProCreate" style="display:none"></iframe>');var a=function(e){document.getElementById("ifileProCreate").src=e},s="api.ShopifyOrder.importOrderExcel",o={"@file":t};this.$apiCall(s,o,(function(t){"9999"==t.ErrorCode?(e.$elementMessage(e.$t("Create Success"),"success"),a(t.Data.Results.file),e.getItem(),e.createVisible=!1,e.uploadfileList=[]):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e)),e.$hideLoading()}))}else this.$elementMessage(this.$t("Please choose file"),"error")},downloadFile:function(){var e="/newFile/orders_create.xlsx";0==$("#downloadFile").length&&$("body").append('<iframe id="downloadFile" style="display:none"></iframe>');var t=function(e){document.getElementById("downloadFile").src=e};t(e)},fileBeforeUpload:function(e){this.uploadfileList=[],this.uploadfileList.push(e)},abnormalClose:function(){this.batchChange=!1,this.abnormalStatus=!1,this.abnormalData=[]},AbnormalReClick:function(){var e=this;this.canPay||1!=this.abnormalType?(this.abnormalBtnVisible=!0,this.batchChange?this.$apiCall("api.ShopifyOrder.reOfferOrPay",{ids:this.abnormalSelection,type:this.abnormalType},(function(t){e.abnormalBtnVisible=!1,e.abnormalStatus=!1,9999==t.ErrorCode&&t.Data.Results&&(e.$elementMessage("Change Success","success"),1==e.abnormalType?e.$router.push({path:"/ordersManage/2"}):2==e.abnormalType&&e.$router.push({path:"/ordersManage/1",query:{type:2}}))})):this.$apiCall("api.ShopifyOrder.reOfferOrPay",{ids:[this.details.id],type:this.abnormalType},(function(t){e.abnormalBtnVisible=!1,e.abnormalStatus=!1,9999==t.ErrorCode&&t.Data.Results&&(e.$elementMessage("Change Success","success"),1==e.abnormalType?e.$router.push({path:"/ordersManage/2"}):2==e.abnormalType&&e.$router.push({path:"/ordersManage/1",query:{type:2}}))}))):this.abnormalStatus=!1},BatchContinuePay:function(e){var t=this;this.batchChange=!0,this.abnormalType=e,this.$apiCall("api.ShopifyOrder.checkOfferOrPay",{ids:this.abnormalSelection,type:e},(function(e){9999==e.ErrorCode?(t.canPay=e.Data.Results.isPayFlag,t.abnormalData=e.Data.Results.abnormalSkus,t.abnormalData.length>0?t.abnormalStatus=!0:0==t.abnormalData.length&&2==t.abnormalType?t.$elementMessage(t.$t("No goods need to be eliminated"),"error"):0==t.abnormalData.length&&1==t.abnormalType&&t.AbnormalReClick()):t.$elementMessage(e.Message,"error")}))},changeAor:function(e){var t=this;this.$apiCall("api.ShopifyOrder.orderStatusChange",{orderId:e.orderId,type:3},(function(e){9999==e.ErrorCode?"SUCCESS"==e.Message&&t.getItem():t.$message.error(e.Message)}))},AbnormalContinuePay:function(e,t){var a=this;this.abnormalType=t,this.details=e,this.$apiCall("api.ShopifyOrder.checkOfferOrPay",{ids:[e.id],type:this.abnormalType},(function(e){9999==e.ErrorCode&&(a.canPay=e.Data.Results.isPayFlag,a.abnormalData=e.Data.Results.abnormalSkus,a.abnormalData.length>0?a.abnormalStatus=!0:0==a.abnormalData.length&&2==a.abnormalType?a.$elementMessage(a.$t("No goods need to be eliminated"),"error"):0==a.abnormalData.length&&1==a.abnormalType&&a.AbnormalReClick())}))},show:function(e){var t=this;this.$refs["popover"+e.orderId].showPopper=!0,this.$nextTick((function(){t.$refs["popover"+e.orderId].updatePopper()}))},enter:function(e,t,a){this.show(e)},leave:function(e,t,a){this.$refs["popover"+e.orderId].showPopper=!1},shopifyOrderCnt:function(e){var t=this;this.$showLoading(),this.$apiCall("api.ShopifyOrder.shopifyOrders",{invoiceId:e.id,isAll:!0},(function(e){"9999"==e.ErrorCode?(t.dialogOrderCnt.items=e.Data.Results,t.dialogOrderCnt.isShow=!0):t.$elementMessage(e.Message,"error"),t.$hideLoading()}))},exportOrder:function(){var e=this;this.checkIds.length||this.$elementMessage(this.$t("Please select an order first"),"error"),this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var t=function(e){document.getElementById("ifilePro").src=e},a="api.ShopifyOrder.exportShopifyOrder2";this.$apiCall(a,{idList:this.checkIds},(function(a){"9999"==a.ErrorCode?(e.$elementMessage("Successfully","success"),t(a.Data.Results)):(e.$elementMessage(a.Message,"error"),"1002"!=a.ErrorCode&&"1003"!=a.ErrorCode||e.$userFailure(e)),e.$hideLoading()}))},paySuccess:function(e,t){var a=this;localStorage.removeItem("c_returnPayId"),localStorage.removeItem("c_returnPaySessionId"),this.$apiCall("api.ShopifyOrder.returnPay",{id:e,sessionId:t},(function(e){"9999"==e.ErrorCode?(a.$elementMessage("Successfully","success"),a.getItem()):a.$elementMessage(e.Message,"error")}))},toggleRowExpansion:function(){this.items.length&&(this.isExpansion=!this.isExpansion,this.toggleRowExpansionAll(this.items,this.isExpansion))},toggleRowExpansionAll:function(e,t){var a=this;console.log(e,"datas"),e.forEach((function(e){a.$refs.gridTable.toggleRowExpansion(e,t),void 0!==e.items&&null!==e.items&&a.toggleRowExpansionAll(e.items,t)}))},handleExpandChange:function(e,t){this.items.length==t.length?this.isExpansion=!0:this.isExpansion=!1},rowStyle:function(e){e.row,e.rowIndex;var t={background:"#DDDFEF",borderBottom:"1px solid #d9d9d9",fontWeight:"500"};return t},cellClassName:function(e){e.row,e.column,e.rowIndex;var t=e.columnIndex;return 0===t?"sub-table-cell":""},filterShippingMethod:function(e,t){var a=this;t.shippingMethodArr.forEach((function(s){s.id==e&&(a.$set(t,"shippingMethodItem",s),a.$set(t,"shippingMethodId",s.id),a.$set(t,"shippingMethodFee",s.fee))})),t.shippingMethodItem?this.$set(t,"totalAllAmount",(t.itemAmount?Number(t.itemAmount):0)+Number(t.shippingMethodItem.fee)):this.$set(t,"totalAllAmount",t.itemAmount?Number(t.itemAmount):0)},updateFn:function(){var e=this;this.$showLoading(),this.$apiCall("api.ShopifyAccount.updateShopifyOrderNow",{},(function(t){"9999"==t.ErrorCode?(e.$elementMessage("Successfully","success"),e.getItem()):e.$elementMessage(t.Message,"error"),e.$hideLoading(),e.updateCountDown()}))},updateCountDown:function(){var e=this,t=60;this.timer||(this.count=t,this.isDisabled=!0,this.timer=setInterval((function(){e.count>0&&e.count<=t?e.count--:(e.isDisabled=!1,clearInterval(e.timer),e.timer=null)}),1e3))},countDown:function(e){var t=this,a=e.timeCreated,s="";e.clock=setInterval((function(){moment.unix(a).format("YYYY-MM-DD HH:mm:ss");var o=moment.unix(a).add(2,"days").format("YYYY-MM-DD HH:mm:ss"),r=moment().format("YYYY-MM-DD HH:mm:ss"),i=moment(o).diff(moment(r));i>0?s=moment.duration(i).days()>0?"".concat(moment.duration(i).hours()+24," : ").concat(moment.duration(i).minutes()," : ").concat(moment.duration(i).seconds()):"".concat(moment.duration(i).hours()," : ").concat(moment.duration(i).minutes()," : ").concat(moment.duration(i).seconds()):(s="null",clearInterval(e.clock)),t.$set(e,"timeLeft",s)}),1e3)},payCheckOut:function(e){var t=this;if(!this.dialogCheckOut.loading){this.dialogCheckOut.loading=!0,this.$Burying({object:"9003",objectId:4});var a={success_url:window.location.origin+"/ordersManage/2?paystatus=2",cancel_url:window.location.origin+"/ordersManage/2?paystatus=3",platformType:4,token:e},s="api.ShopifyOrder.createPay";"repay"==this.dialogPay.openType?(a.id=Object.keys(this.dialogPay.params)[0],s="api.ShopifyOrder.reCreatePay"):a.ids=this.dialogPay.params,this.$apiCall(s,a,(function(e){t.dialogCheckOut.loading=!1,t.dialogCheckOut.isShow=!1,"9999"==e.ErrorCode&&e.Data.Results.url?(t.dialogPay.step=3,"repay"==t.dialogPay.openType?t.paySuccess(a.id,e.Data.Results.sessionId):t.paySuccess(e.Data.Results.id,e.Data.Results.sessionId)):t.$elementMessage("9999"==e.ErrorCode?"fail":e.Message,"error")}))}},submitUnderline:function(e,t){var a=this;this.dialogUnderline.loading=!0;var s={platformType:12,accountPayment:e,voucherUrl:t,paymentId:this.dialogUnderline.paymentId},o="api.ShopifyOrder.createPay";"repay"==this.dialogPay.openType?(s.id=Object.keys(this.dialogPay.params)[0],o="api.ShopifyOrder.reCreatePay"):s.ids=this.dialogPay.params,this.$apiCall(o,s,(function(e){a.dialogUnderline.loading=!1,a.dialogUnderline.isShow=!1,"9999"==e.ErrorCode?(a.dialogPay.step=3,"repay"==a.dialogPay.openType?a.paySuccess(s.id,e.Data.Results.sessionId):a.paySuccess(e.Data.Results.id,e.Data.Results.sessionId)):a.$elementMessage(e.Message,"error")}))},submitDlocal:function(e){var t=this;this.dialogDlocal.loading=!0,this.newWin=window.open(("/my"==this.$root.$children[0].baseUrl?"/my":"")+"/blank.html","pay");var a={methodId:e.methodId,platformType:10,domain:window.location.origin+"/",flow:"REDIRECT",country:e.country,name:e.name,city:e.city,street:e.street,number:e.number,document:e.document,phone:e.phone,email:e.email},s="api.ShopifyOrder.createPay";"repay"==this.dialogPay.openType?(a.id=Object.keys(this.dialogPay.params)[0],s="api.ShopifyOrder.reCreatePay"):a.ids=this.dialogPay.params,this.$apiCall(s,a,(function(e){t.dialogDlocal.loading=!1,t.dialogDlocal.isShow=!1,"9999"==e.ErrorCode&&e.Data.Results.url?(t.newWin.location=e.Data.Results.url,t.dialogPay.step=2):(t.$elementMessage("9999"==e.ErrorCode?"fail":e.Message,"error"),t.newWin.close())}))},orderPay:function(){var e=this;this.$Burying({object:"9003",objectId:this.dialogPay.platformType});var t={platformType:this.dialogPay.platformType,success_url:window.location.origin+"/ordersManage/2?paystatus=2",cancel_url:window.location.origin+"/ordersManage/2?paystatus=3"},a="",s="";switch(this.dialogPay.platformType&&!Number(this.dialogPay.platformType)&&-1!=this.dialogPay.platformType.indexOf("underline")?(s=this.dialogPay.platformType.substring(9),a=12):a=Number(this.dialogPay.platformType),a){case 12:this.dialogUnderline.isShow=!0,this.dialogUnderline.paymentId=s;var o=this.dialogPay.payTypes.filter((function(e){return e.id==s}));this.dialogUnderline.params=o.length&&o[0].params?JSON.parse(o[0].params):"",this.dialogUnderline.payAmount=this.payAmount;break;case 10:this.dialogDlocal.isShow=!0,this.dialogDlocal.invoiceId=this.invoiceInfo.id;break;case 4:this.dialogCheckOut.isShow=!0;break;case 3:this.newWin=window.open(("/my"==this.$root.$children[0].baseUrl?"/my":"")+"/blank.html","pay");break;case 2:this.newWin=window.open(("/my"==this.$root.$children[0].baseUrl?"/my":"")+"/blank.html","pay");break;case 1:break;default:break}if(4!=a&&10!=a&&12!=a){this.dialogPay.payLoading=!0;var r="api.ShopifyOrder.createPay";"repay"==this.dialogPay.openType?(t.id=Object.keys(this.dialogPay.params)[0],r="api.ShopifyOrder.reCreatePay"):t.ids=this.dialogPay.params,this.$apiCall(r,t,(function(a){if(e.dialogPay.payLoading=!1,"9999"==a.ErrorCode)if("repay"==e.dialogPay.openType?localStorage.setItem("c_returnPayId",t.id):localStorage.setItem("c_returnPayId",a.Data.Results.id),localStorage.setItem("c_returnPaySessionId",a.Data.Results.sessionId),6==e.dialogPay.platformType)e.dialogPay.step=3,"repay"==e.dialogPay.openType?e.paySuccess(t.id,a.Data.Results.sessionId):e.paySuccess(a.Data.Results.id,a.Data.Results.sessionId);else{if(1==e.dialogPay.platformType){var s=a.Data.Results,o=Stripe(s.pk);o.redirectToCheckout({sessionId:s.sessionId})}else e.newWin.location=a.Data.Results.url;e.dialogPay.step=2}else e.$elementMessage(a.Message,"error"),e.closePayPage()}))}},changePlatform:function(e){6==e&&0==(this.invoiceInfo.relationship||{}).bonus||(this.$set(this.dialogPay,"platformType",e),this.$Burying({object:"9002",objectId:e}))},openPay:function(e,t){var a=this;this.$showLoading();var s="api.ShopifyOrder.creatPayInvoice",o={};"repay"==t?(o.id=Object.keys(e)[0],s="api.ShopifyOrder.reCreatPayInvoice"):o.ids=e,this.$apiCall(s,o,(function(e){if(a.$hideLoading(),"9999"==e.ErrorCode){var s={type:t,invoice:e.Data.Results.invoice,items:[]};if(localStorage.setItem("accountPayment",e.Data.Results.accountPayment?JSON.stringify(e.Data.Results.accountPayment):""),e.Data.Results.shopifyOrders){for(var o in e.Data.Results.shopifyOrders)s.items.push(Object.assign({},e.Data.Results.shopifyOrders[o],{orderId:o}));localStorage.setItem("needPayOrders",JSON.stringify(s)),a.$router.push({path:"/orderPay"})}else localStorage.removeItem("needPayOrders")}else a.$elementMessage(e.Message,"error")}))},closePay:function(){this.newWin&&this.newWin.close(),this.dialogPay=JSON.parse(this.dialogPayDefault);var e=JSON.parse(JSON.stringify(this.$route.query));delete e.paystatus,this.$router.replace({query:e}),this.getItem()},closePayPage:function(){this.newWin&&this.newWin.close(),localStorage.removeItem("c_returnPayStatus")},handlePayClose:function(){this.dialogPay.isShow=!1},syncFn:function(e,t){"row"==e?this.sync(e,t):this.checkIds.length?this.sync():this.$elementMessage(this.$t("Please select an order first"),"error")},afterFn:function(e,t){"row"==e?(this.afterData.dialogVisible=!0,this.afterData.orderId=t.orderId,this.afterData.shopifyAccountId=t.shopifyAccountId):this.checkIds.length?this.sync():this.$elementMessage("Please select an order first","error")},changeTr:function(e){this.afterData.dialogVisible=!1},sync:function(e,t){var a=this,s=[];"row"==e?s.push(t.id):s=this.checkIds,this.$showLoading(),this.$apiCall("api.ShopifyOrder.setNotAbnormal",{ids:s},(function(e){"9999"==e.ErrorCode?(a.$elementMessage("Successfully","success"),a.getItem()):a.$elementMessage(e.Message,"error"),a.$hideLoading()}))},continuePay:function(){this.openPay(this.dialogCheckStock.params,this.dialogCheckStock.openType)},payFn:function(e,t){"row"==e?this.checkOpenPay(t):this.checkIds.length?this.checkOpenPay():this.$elementMessage("Please select an order first","error")},repayFn:function(e){this.checkOpenPay(e,"repay")},handleCancel:function(e){var t=this;this.$apiCall("api.ShopifyOrder.orderStatusChange",{orderId:e.orderId,type:2},(function(e){"9999"==e.ErrorCode?"SUCCESS"==e.Message?t.getItem():t.$message.error(e.Message):t.$elementMessage(e.Message,"error")}))},checkOpenPay:function(e,t){var a,s=this,o=0,r={};(e?e.isMailFree?r[e.id]=0:r[e.id]=e.shippingMethodItem?e.shippingMethodItem.id:"":this.checkItems.forEach((function(e){e.shippingMethodArr&&e.shippingMethodArr.length?r[e.id]=e.shippingMethodItem?e.shippingMethodItem.id:"":o++})),o>0)?this.$elementMessage(this.$t("No logistics"),"error"):(a="repay"==t?{invoiceId:e.id}:{ids:r},this.$showLoading(),this.$apiCall("api.ShopifyOrder.checkSkuStock",a,(function(e){s.$hideLoading(),"9999"==e.ErrorCode?(s.payAmount=e.Data.Results.realAmount,e.Data.Results&&e.Data.Results.abnormalSkus&&e.Data.Results.abnormalSkus.length?(s.dialogCheckStock=JSON.parse(s.dialogCheckStockDefault),s.dialogCheckStock.params=r,s.dialogCheckStock.openType=t,s.dialogCheckStock.items=[],e.Data.Results.abnormalSkus.forEach((function(e){e.items&&(e.items.codeName=e.codeName,e.items.reason=e.reason,e.items.lackQuantity=e.lackQuantity,s.dialogCheckStock.items.push(e.items))})),s.dialogCheckStock.isShow=!0):s.openPay(r,t)):s.$elementMessage(e.Message,"error")})))},payCancelFn:function(e,t){var a=this.$t("Are you sure to abandon payment for the selected order? After abandoning, the order will disappear from the list, which cannot be restored, please operate with caution");"row"==e?(a=this.$t("Are you sure to abandon payment for the selected order? After abandoning, the order will disappear from the list, which cannot be restored, please operate with caution"),this.payCancel(e,a,t)):this.checkIds.length?this.payCancel(e,a):this.$elementMessage(this.$t("Please select an order first"),"error")},payCancel:function(e,t,a){var s=this;this.$confirm(t,"",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:""}).then((function(){s.$showLoading(),"row"==e?s.$apiCall("api.ShopifyOrder.cancelPay",{id:a.id},(function(e){"9999"==e.ErrorCode?(s.$elementMessage("Successfully","success"),s.getItem()):s.$elementMessage(e.Message,"error"),s.$hideLoading()})):s.$apiCall("api.ShopifyOrder.cancel",{ids:s.checkIds},(function(e){"9999"==e.ErrorCode?(s.$elementMessage("Successfully","success"),s.getItem()):s.$elementMessage(e.Message,"error"),s.$hideLoading()}))})).catch((function(){}))},quoteFn:function(e,t){"row"==e?this.quote(e,t):this.checkIds.length?this.quote():this.$elementMessage(this.$t("Please select an order first"),"error")},quote:function(e,t){var a=this;this.$confirm("Are you sure to initiate a quotation for the selected order?","",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:""}).then((function(){var s=[];"row"==e?s.push(t.id):s=a.checkIds,a.$showLoading(),a.$apiCall("api.ShopifyOrder.commitOffer",{ids:s},(function(e){"9999"==e.ErrorCode?(a.$elementMessage("Successfully","success"),a.getItem()):a.$elementMessage(e.Message,"error"),a.$hideLoading()}))})).catch((function(){}))},quoteCancelFn:function(){var e=this;this.checkIds.length?this.$confirm("Are you sure to abandon the quotation for the selected order? After giving up, it cannot be restored, please operate with caution","",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:""}).then((function(){e.$showLoading(),e.$apiCall("api.ShopifyOrder.cancel",{ids:e.checkIds},(function(t){"9999"==t.ErrorCode?(e.$elementMessage("Successfully","success"),e.getItem()):e.$elementMessage(t.Message,"error"),e.$hideLoading()}))})).catch((function(){})):this.$elementMessage("Please select an order first","error")},handleSelectionChange:function(e){var t=this;this.checkIds=[],this.checkItems=[],e.length&&e.forEach((function(e){t.checkItems.push(e),t.checkIds.push(e.id)}))},dateChange:function(){this.filterParams.date&&this.filterParams.date.length>1?(this.filterParams.dateFrom=moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.dateTo=moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem()):this.clearFilter("date")},dateChange2:function(){this.filterParams.date2&&this.filterParams.date2.length>1?(this.filterParams.dateFrom2=moment(this.filterParams.date2[0]).format("YYYY-MM-DD"),this.filterParams.dateTo2=moment(this.filterParams.date2[1]).format("YYYY-MM-DD"),this.filterItem()):this.clearFilter("date2")},clearFilter:function(e){switch(e){case"codeName":this.filterParams.codeName="";break;case"orderId":this.filterParams.orderId="";break;case"receiverName":this.filterParams.receiverName="";break;case"accountIds":this.filterParams.accountIds="";break;case"date":this.filterParams.date=[],this.filterParams.dateFrom="",this.filterParams.dateTo="";break;case"date2":this.filterParams.date2=[],this.filterParams.dateFrom2="",this.filterParams.dateTo2="";break;case"sysCode":this.filterParams.sysCode="";break;case"sysCode":this.filterParams.spuLike="";break;case"sysCode":this.filterParams.nameLike="";break;default:this.filterParams=JSON.parse(this.filterParamsDefault);break}this.filterItem()},filterItem:function(e){1==this.$route.query.page?this.getItem():this.$router.push({path:"/ordersManage/".concat(Number(this.status)),query:{page:1}})},getStore:function(){var e=this;this.$apiCall("api.Invoice.findStores",{},(function(t){9999==t.ErrorCode?e.storeList=t.Data.Results:e.$message({message:t.Message,type:"error"})}))},gettabList:function(){switch(this.status){case 1:this.tabList=[{id:2,name:1,title:this.$t("Vendor quoted order")}];break;case 2:this.tabList=[{id:3,name:1,title:this.$t("Pending payment")},{id:22,name:2,title:this.$t("Payment to be completed")},{id:23,name:3,title:this.$t("Payment has not arrived")}];break;case 3:this.tabList=[{id:5,name:1,title:this.$t("Waiting for fulfillment")},{id:6,name:2,title:"Fulfilled"}];break;case 4:this.tabList=[{id:8,name:1,title:this.$t("Logistics synchronization failed")},{id:9,name:2,title:this.$t("Unable to purchase")},{id:10,name:3,title:this.$t("Products Off shelf")}];break;default:this.tabList=[];break}},getCustomerAllOrderCnt:function(){var e=this;this.$apiCall("api.ShopifyOrder.getCustomerAllOrderCnt",{},(function(t){9999==t.ErrorCode?e.customerAllOrderCnt=t.Data.Results:e.$message({message:t.Message,type:"error"})}))},customerAllOrderCntText:function(e){var t=0;return t=22==e?this.customerAllOrderCnt.waitCustomerPayCnt?this.customerAllOrderCnt.waitCustomerPayCnt:0:23==e?this.customerAllOrderCnt.waitVendorConfirmCnt?this.customerAllOrderCnt.waitVendorConfirmCnt:0:this.customerAllOrderCnt[e]?this.customerAllOrderCnt[e]:0,t},getItem:function(e){var t=this;this.getStore(),this.gettabList(),this.getCustomerAllOrderCnt(),this.items=[];var a,s="",o="api.ShopifyOrder.shopifyOrders",r={page:this.page,rowsPerPage:this.rowsPerPage,status:s,timeCreatedFrom:this.filterParams.dateFrom,timeCreatedTo:this.filterParams.dateTo,accountIds:[this.filterParams.accountIds],orderId:this.filterParams.orderId,keywords:this.filterParams.codeName,receiverName:this.filterParams.receiverName,spuLike:this.filterParams.spuLike,nameLike:this.filterParams.nameLike},i={page:this.page,rowsPerPage:this.rowsPerPage,status:s,sysCode:this.filterParams.sysCode,dateFrom:this.filterParams.dateFrom2,dateTo:this.filterParams.dateTo2};if(a=r,5==this.status)s=7;else if(6==this.status)s="",a=Object.assign(r,i),a.isAll=!0;else if(16==this.status)s=16;else if(17==this.status)s=17;else{var n=this.tabList.filter((function(e){return e.name==t.activeName}));n.length>0&&(s=n[0].id),2==this.status&&(2!=this.activeName&&3!=this.activeName||(s=this.activeName,a=i,o="api.ShopifyOrder.findByInvoice"))}this.loading=!0,a.status=s,this.$apiCall(o,a,(function(a){t.loading=!1,9999==a.ErrorCode?(t.items=a.Data.Results,t.items.forEach((function(e){2==t.status&&1!=t.activeName&&t.countDown(e),e.shippingMethodArr&&e.shippingMethodArr.length&&(t.$set(e,"shippingMethodItem",e.shippingMethodArr[0]),t.$set(e,"shippingMethodId",e.shippingMethodArr[0].id),t.$set(e,"shippingMethodFee",Number(e.shippingMethodArr[0].fee))),t.$set(e,"shippingJsonInfo",e.shippingJson?JSON.parse(e.shippingJson):""),e.items.length&&e.items.forEach((function(e){t.$set(e,"totalPrice",Number(e.vendorPrice)*Number(e.quantity))})),e.shippingMethodItem?t.$set(e,"totalAllAmount",(e.itemAmount?Number(e.itemAmount):0)+Number(e.shippingMethodItem.fee)+Number(e.taxAmount)):t.$set(e,"totalAllAmount",e.itemAmount?Number(e.itemAmount)+Number(e.taxAmount):0)})),t.total=Number(a.Data.Pagination.totalCount),t.totalPage=Number(a.Data.Pagination.totalPage),t.$getTableHeight(t),e||(t.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0)):t.$message({message:a.Message,type:"error"})}))},countTotal:function(e,t){var a=0;return a=e.reduce((function(e,a,s,o){return a[t]?e+a[t]:e}),0),a},toPage:function(e){e!=this.$route.query.page&&this.$router.push({path:"/ordersManage/".concat(Number(this.status)),query:{page:e}})},changePageSize:function(e){this.rowsPerPage=e,localStorage.setItem("c_ordersRowsPerPage",e),this.getItem()},gotoPage:function(){this.page=this.$route.query.page?Number(this.$route.query.page):1,this.getItem()},handleClick:function(e,t){this.filterParams=JSON.parse(this.filterParamsDefault),this.getItem()}}},B=z,j=(a("088f"),a("bd3c"),Object(d["a"])(B,s,o,!1,null,"1c134a05",null));t["default"]=j.exports},bd3c:function(e,t,a){"use strict";a("d5d4")},c33b:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGtmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0MzUyLCAyMDIwLzAxLzMwLTE1OjUwOjM4ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTEyLTI5VDEzOjUzOjU2KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0xMi0yOVQxMzo1ODoyMCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0xMi0yOVQxMzo1ODoyMCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjBhZmZlYzktMjhhNC0wNjQxLTk3NTEtMWEzM2RhNWJlYTlkIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZWNhNGVhYWItYWQzNy0yZjQ5LTlkMjAtMzlmOTQ3MDM0MTQzIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6N2IzOTMyZmMtNzZmMS05ZTQzLWExZjItMTcyOGVjOTZhNzE2Ij4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJTcGxpdCIgcGhvdG9zaG9wOkxheWVyVGV4dD0iU3BsaXQiLz4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdiMzkzMmZjLTc2ZjEtOWU0My1hMWYyLTE3MjhlYzk2YTcxNiIgc3RFdnQ6d2hlbj0iMjAyMS0xMi0yOVQxMzo1Mzo1NiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjYwYWZmZWM5LTI4YTQtMDY0MS05NzUxLTFhMzNkYTViZWE5ZCIgc3RFdnQ6d2hlbj0iMjAyMS0xMi0yOVQxMzo1ODoyMCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgfBp04AAADQSURBVDiNYwyK28BALmAiW+eoZjLAsZMP////f+HS86C4Df9hYMOW6w3tB////x8UtwGC/v//39B+EKIYrobF0kwuOW873Ky+KScYGBiKcizu3v+AZg0vD1vP1PPWp54V5VgEx29kYGBgevLsU0W+GbIiHh7W799/E+Xn+o6j37797m60h/CLcixiw/UWr7xElGYGBoYNW28JCXLBnR2TsW3n/ifEaGaZO8mTgYFh49YbEP7nL7+QGWsX+jMwMBRX74WLwBUwMDAwjmaMoaIZAAa0bJKUrm/sAAAAAElFTkSuQmCC"},d4dc:function(e,t,a){},d58f:function(e,t,a){var s=a("1c0b"),o=a("7b0b"),r=a("44ad"),i=a("50c4"),n=function(e){return function(t,a,n,l){s(a);var c=o(t),d=r(c),u=i(c.length),p=e?u-1:0,m=e?-1:1;if(n<2)while(1){if(p in d){l=d[p],p+=m;break}if(p+=m,e?p<0:u<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:u>p;p+=m)p in d&&(l=a(l,d[p],p,c));return l}};e.exports={left:n(!1),right:n(!0)}},d5d4:function(e,t,a){},da1a:function(e,t,a){}}]);
//# sourceMappingURL=ordersManagement.36914e7e.js.map