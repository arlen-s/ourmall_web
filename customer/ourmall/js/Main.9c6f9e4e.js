(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Main"],{"537d":function(e,t,i){},"691e":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"contentpanel orders-page"},[t("div",{ref:"pageHeader",staticClass:"header-diy"},[t("div",{staticClass:"pagetitle"},[e._m(0),t("div",{staticClass:"right"},[/AllOrders|WaitingForAllocated|WaitingForSourcing/.test(e.$route.name)?["WaitingForSourcing"!=e.$route.name?t("el-button",{attrs:{type:"primary",size:"medium",icon:"fa fa-download"},on:{click:e.openExportDialog}},[e._v(" Export ")]):e._e(),e.updateTime&&e.updateTime>e.now?[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"The update process has started, it will take a while to finish.",placement:"bottom"}},[t("el-button",{staticStyle:{color:"#FFFFFF","background-color":"#aeb5e2","border-color":"#aeb5e2"},attrs:{type:"primary",size:"medium",icon:"el-icon-refresh"}},[e._v(" Update Order ")])],1)]:[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Use this button to update your Order List if missing orders.The process may take a while to finish.",placement:"bottom"}},[t("el-button",{attrs:{icon:"el-icon-refresh",disabled:!!(e.updateTime&&e.updateTime>e.now),type:"primary",size:"medium",loading:e.updateOrderLoading},on:{click:e.updateOrder}},[e._v(" Update Order ")])],1)]]:e._e()],2)]),e.pendingPay?t("el-alert",{staticClass:"order-alert",attrs:{title:"Notice",type:"warning","show-icon":"",closable:!1}},[[t("p",[e._v("You have "),t("a",{staticClass:"mian-alert-a",on:{click:e.handlePendingPay}},[e._v(" "+e._s(e.pendingPay)+" purchase orders ")]),e._v(" NEED to finish payment")])]],2):e._e()],1),t("div",{staticClass:"pagebody headTab"},[t("el-card",[t("el-row",[t("el-col",{ref:"pageTabs",attrs:{span:24}},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"All orders",name:"AllOrders"}}),t("el-tab-pane",{attrs:{label:"Waiting for allocated",name:"WaitingForAllocated"}},[t("span",{attrs:{slot:"label"},slot:"label"},[e._v(" Waiting for allocated "),e.allocateCnt?t("span",{staticClass:"tx-warning"},[e._v("("+e._s(e.allocateCnt)+")")]):e._e()])]),t("el-tab-pane",{attrs:{label:"Waiting for sourcing",name:"WaitingForSourcing"}},[t("span",{attrs:{slot:"label"},slot:"label"},[e._v(" Waiting for sourcing "),e.sourcingCnt?t("span",{staticClass:"tx-warning"},[e._v("("+e._s(e.sourcingCnt)+")")]):e._e()])]),t("el-tab-pane",{attrs:{label:"Orders processing",name:"OrderProcessing"}},[t("span",{attrs:{slot:"label"},slot:"label"},[e._v(" Orders processing "),e.processingCnt?t("span",{staticClass:"tx-success"},[e._v("("+e._s(e.processingCnt)+")")]):e._e()])]),t("el-tab-pane",{attrs:{label:"Delivered",name:"Delivered"}}),t("el-tab-pane",{attrs:{label:"Abnormal order",name:"AbnormalOrder"}},[t("span",{attrs:{slot:"label"},slot:"label"},[e._v(" Abnormal order "),e.abnormalCnt?t("span",{staticClass:"tx-danger"},[e._v("("+e._s(e.abnormalCnt)+")")]):e._e()])])],1)],1),t("div",{staticClass:"btn-hide-group"},["WaitingForAllocated"==e.$route.name?t("el-button",{attrs:{type:"primary quoteOrder",size:"small"},on:{click:e.makeAnOffer}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Please select at least one order and quote for your order",placement:"top"}},[t("i",{staticClass:"el-icon-info"})]),e._v(" Quote for Orders ")],1):e._e(),t("el-button",{attrs:{type:"primary quoteProduct",size:"small"},on:{click:function(t){return e.quotation()}}},[e._v(" Quote for Product ")]),t("el-button",{attrs:{type:"primary recent",size:"small"},on:{click:e.openRecent}},[e._v(" Recent Quotations ")])],1),t("div",{staticClass:"btn-hide-dropdown recent"},["WaitingForAllocated"==e.$route.name?t("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"medium"},on:{click:e.makeAnOffer,command:e.handleCommand}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Please select at least one order and quote for your order",placement:"top"}},[t("i",{staticClass:"el-icon-info"})]),e._v(" Quote for Orders "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"quoteForProduct"}},[e._v("Quote for Product")]),t("el-dropdown-item",{attrs:{command:"recentQuotations"}},[e._v("Recent Quotations")])],1)],1):t("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"medium"},on:{click:function(t){return e.quotation()},command:e.handleCommand}},[e._v(" Quote for Product "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"recentQuotations"}},[e._v("Recent Quotations")])],1)],1)],1),t("el-col",{attrs:{span:24}},[t("router-view",{key:e.pageKey,ref:"subPage",attrs:{fulfillArr:e.fulfillArr,dateArr:e.dateArr},on:{getTableHeight:e.getTableHeight,getNum:e.getNum}})],1)],1)],1)],1),t("el-dialog",{attrs:{title:"Export orders",visible:e.exportDialog.isShow,width:"620px","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.exportDialog,"isShow",t)}}},[t("el-divider"),t("div",{staticStyle:{padding:"20px"}},[t("p",{staticClass:"mg-b-10"},[e._v("Export to "+e._s(e.$store.state.userInfo.email))]),t("el-radio-group",{staticStyle:{display:"flex","flex-direction":"column","padding-left":"15px"},model:{value:e.exportDialog.status,callback:function(t){e.$set(e.exportDialog,"status",t)},expression:"exportDialog.status"}},[t("el-radio",{attrs:{label:"1"}},[e._v("All orders")]),t("el-radio",{attrs:{label:"3",disabled:!Number(e.exportDialog.totalCount)}},[e._v(e._s(e.exportDialog.totalCount)+" orders matching your search")])],1)],1),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.exportDialog.isShow=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{size:"small",type:"primary",disabled:!e.exportDialog.status,loading:e.exportDialog.loading},on:{click:e.exportOrders}},[e._v("Export orders")])],1)],1),t("el-dialog",{attrs:{title:"How to process your orders?",visible:e.dialogHowToShopify.isShow,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialogHowToShopify,"isShow",t)}}},[t("el-divider"),t("div",{staticStyle:{padding:"20px"}},[t("p",{staticClass:"table-wrap",staticStyle:{"margin-bottom":"15px"}},[e._v(" You have "),t("span",{staticClass:"mg-r-15 tx-danger"},[e._v(e._s(e.allocateCnt))]),t("span",{staticClass:"el-tag el-tag--info el-tag--small el-tag--light"},[t("span",{staticClass:"-EFlq bg3"}),e._v(" Paid ")]),e._v(" + "),t("span",[t("span",{staticClass:"el-tag el-tag--warning el-tag--small el-tag--light"},[t("span",{staticClass:"-EFlq bg1"}),e._v(" Unfulfilled ")])]),e._v(" / "),t("span",[t("span",{staticClass:"shopfiy-status el-tag el-tag--danger el-tag--small el-tag--light"},[t("span",{staticClass:"-EFlq bg2"}),e._v(" Partially Fulfilled ")])]),e._v(" orders can be process, what do you want to do now? ")]),t("div",{staticClass:"how-to-process-btn-wrap"},[t("div",{on:{click:function(t){return e.goto("ReadyForMakeOffer")}}},[t("i",{staticClass:"icon iconfont icon-offer"}),t("div",[e._v(" Need new quotation for my orders "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Over 30000+ vendors waiting for offer you price",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1)]),t("div",{on:{click:function(t){return e.goto("WaitingForAllocated")}}},[t("i",{staticClass:"icon iconfont icon-shunt"}),t("div",[e._v(" Allocate my exist vendors "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"If you already have cooperative vendors, you can allocate orders to them",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1)]),t("div",{on:{click:function(t){return e.goto("WaitingForAllocated")}}},[t("i",{staticClass:"icon iconfont icon-check"}),t("div",[e._v(" Just check my orders ")])])])])],1),t("el-dialog",{attrs:{"close-on-click-modal":!1,title:"In order to keep you informed of the update of the order, we suggest you verify the email",visible:e.verifyEmail,"show-close":!1,width:"760px"},on:{"update:visible":function(t){e.verifyEmail=t}}},[t("ul",{staticClass:"verify"},[t("li",{staticStyle:{display:"flex","align-items":"center"}},[0==e.changeStart?t("label",{staticStyle:{width:"80px","font-weight":"700"}},[e._v("Email:")]):e._e(),0==e.changeStart?t("span",{staticStyle:{"margin-top":"-4px"}},[e._v(" "+e._s(e.form.email)+" "),t("el-link",{staticClass:"mg-l-10",staticStyle:{"margin-bottom":"3px"},attrs:{type:"primary",disabled:!e.canChange},on:{click:e.changeOpen}},[e.form.email?t("span",[e._v("Change")]):t("span",[e._v("Add")])])],1):t("el-input",{attrs:{placeholder:"Email","auto-complete":"off",disabled:e.time>0},model:{value:e.userEmail,callback:function(t){e.userEmail=t},expression:"userEmail"}})],1),e.failTx?t("li",{staticClass:"tx-danger"},[e._v(e._s(e.failTx))]):e._e(),t("li",[t("vue-simple-verify",{ref:"verify",attrs:{width:380,tips:"Hold down the slider and drag to the right",successTips:"Validation passed"},on:{success:e.successVerify}})],1),t("li",{staticStyle:{display:"flex"}},[t("el-input",{staticStyle:{flex:"1",width:"250px"},attrs:{placeholder:"Captcha"},model:{value:e.authcode,callback:function(t){e.authcode=t},expression:"authcode"}}),e.sendMsgDisabled?e._e():t("el-link",{staticClass:"mg-l-10",attrs:{underline:!1,type:"primary",disabled:!e.canSendAuthCode},on:{click:e.sendAuthCode}},[e._v("Get captcha")]),e.sendMsgDisabled?t("el-link",{staticClass:"mg-l-10",attrs:{underline:!1,type:"primary",disabled:!e.canSendAuthCode},on:{click:e.sendAuthCode}},[e._v(" try again in "+e._s(e.time)+" seconds ")]):e._e()],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.saveEmail}},[e._v("Confirm")]),t("el-button",{on:{click:function(t){e.verifyEmail=!1}}},[e._v("Discard")])],1)]),t("Quotation",{attrs:{visible:e.visible},on:{"update:visible":function(t){e.visible=t}}})],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"left"},[t("div",{staticClass:"title"},[t("i",{staticClass:"iconfont icon-shopify"}),t("h2",[e._v("Orders")])])])}],o=(i("149f"),i("ea9d")),r={data(){return{visible:!1,form:{email:""},tdShow:!1,canChange:!0,verifyEmail:!1,changeStart:!1,sendMsgDisabled:!1,canSaveEdit:!1,canSendAuthCode:!1,canSendAuthCodeAgain:!1,time:0,userEmail:"",authcode:"",failTx:"",pageKey:(new Date).valueOf(),pendingPay:0,activeName:"",reSizeTime:0,allocateCnt:0,sourcingCnt:0,processingCnt:0,abnormalCnt:0,fulfillArr:{fulfilled:{text:"Fulfilled",type:"info",r:3},unfulfilled:{text:"Unfulfilled",type:"warning",r:1},partial:{text:"Partially Fulfilled",type:"danger",r:2},refunded:{text:"Refunded",type:"info",r:3}},dateArr:{1:"Today",2:"Last 7 days",3:"Last 30 days",4:"Last 90 days",5:"Last 12 months",6:"Custom"},updateOrderLoading:!1,cnow:0,now:Date.parse(new Date)/1e3-this.$store.state.userInfo.timeDiff,updateTime:localStorage.getItem("c_orders-updateTime")?Number(localStorage.getItem("c_orders-updateTime")):0,exportDialog:{isShow:!1,loading:!1,status:"",selectData:[],totalCount:0},exportDialogDefault:"{}",dialogHowToShopify:{isShow:!1}}},components:{Quotation:o["a"]},mounted(){this.showPopup(),this.exportDialogDefault=JSON.stringify(this.exportDialog),this.activeName=this.$route.name,this.cnow=setInterval(()=>{this.now=Date.parse(new Date)/1e3-this.$store.state.userInfo.timeDiff},1e3),this.getNum(void 0,"first")},watch:{$route(){this.activeName=this.$route.name,this.getNum()}},methods:{handleCommand(e){switch(e){case"quoteForProduct":this.quotation();break;case"recentQuotations":this.openRecent();break}},makeAnOffer(){this.$refs.subPage.makeAnOffer()},quotation(){this.$Burying({object:"14001"}),this.visible=!0},openRecent(){this.$router.push("/make-offers")},showPopup(){var e=document.cookie;if(-1==e.indexOf("tdShow=1")){var t=new Date;t.setHours(t.getHours()+24),document.cookie="tdShow=1;expires="+t.toGMTString(),this.$nextTick((function(){"2"==JSON.parse(localStorage.getItem("c_ourMallUserInfo")).verifyEmail&&this.verifyEmailOpen(),this.tdShow=!0}))}else this.$nextTick((function(){this.tdShow=!1}))},saveEmail(){this.$apiCall("api.User.checkEmailToken",{email:1==this.changeStart?this.userEmail:this.form.email,token:this.authcode},e=>{if("9999"==e.ErrorCode){let e=JSON.parse(JSON.stringify(this.$store.state.userInfo));e.email=1==this.changeStart?this.userEmail:this.form.email,localStorage.setItem("c_ourMallUserInfo",JSON.stringify(e)),this.$elementMessage("User Email modified successfully","success"),this.verifyEmail=!1}else this.$elementMessage(e.Message,"error")})},changeOpen(){this.changeStart=!0,this.form.email=""},isCEmail(e){return!!e&&/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/.test(e)},successVerify(){this.userEmail&&this.isCEmail(this.userEmail)||this.form.email&&this.isCEmail(this.form.email)?(this.canSendAuthCode=!0,this.econfirmSuccess=!0,this.canChange=!1,this.failTx="",this.sendAuthCode()):(this.$refs.verify.reset(),this.canSendAuthCode=!1,this.econfirmSuccess=!1,this.failTx="Please fill in the correct Email address")},sendAuthCode(){this.$showLoading();let e=this;e.sendMsgDisabled=!0,e.canSendAuthCode=!1,e.canSendAuthCodeAgain=!0,this.$apiCall("api.User.checkEmail",{email:1==e.changeStart?e.userEmail:e.form.email},t=>{if(this.$hideLoading(),"9999"==t.ErrorCode){this.$message({type:"success",message:"The captcha was sent successfully"}),e.time=60;let t=window.setInterval((function(){e.time--<=0&&(e.time=0,e.sendMsgDisabled=!1,e.canSendAuthCode=!0,e.canSendAuthCodeAgain=!1,window.clearInterval(t))}),1e3)}else this.$message({message:t.Message,type:"error"}),e.sendMsgDisabled=!1,e.canSendAuthCode=!0,e.canSendAuthCodeAgain=!1})},verifyEmailOpen(){let e=JSON.parse(localStorage.getItem("c_ourMallUserInfo")).email;this.form.email=e,this.verifyEmail=!0},goto(e){this.$router.push({name:e}),this.dialogHowToShopify.isShow=!1},handlePendingPay(){"OrderProcessing"===this.$route.name&&(this.$refs.subPage.filterParams.status=2,this.$refs.subPage.getItem()),this.$router.push({path:"/Orders-processing",query:{status:2}})},exportOrders(){let e={email:this.$store.state.userInfo.email};if("AllOrders"==this.activeName){e.isAll=1;let t=this.$refs.subPage.filterParams;3==this.exportDialog.status&&(e.accountIds=t.shopifyStore,e.timeFilter=t.timeFilter>=6?"":t.timeFilter,e.dateFrom=t.dateFrom,e.dateTo=t.dateTo,e.fulfillmentStatus=t.fulfillStatus,e.sort=t.sortBy,e.keywords=t.codeName,e.financialStatus=t.financial_status)}if("WaitingForAllocated"==this.activeName){e.waitDispatch=1;let t=this.$refs.subPage.filterParams;3==this.exportDialog.status&&(e.accountIds=t.shopifyStore,e.timeFilter=t.timeFilter>=6?"":t.timeFilter,e.dateFrom=t.dateFrom,e.dateTo=t.dateTo,e.fulfillmentStatus=t.fulfillStatus,e.sort=t.sortBy,e.keywords=t.codeName)}this.exportDialog.loading=!0,this.$apiCall("api.Invoice.exportShopifyOrders",e,e=>{this.exportDialog.loading=!1,9999==e.ErrorCode?(this.exportDialog.isShow=!1,this.$message({offset:200,duration:0,dangerouslyUseHTMLString:!0,showClose:!0,message:`<strong>Your Orders are exporting</strong><br/>Your export will be delivered by email to: ${this.$store.state.userInfo.email}. <br/>Depending on how many Orders youâ€™re exporting, this could take some time.`,type:"success"})):this.$elementMessage(e.Message,"error")})},openExportDialog(){this.exportDialog=JSON.parse(this.exportDialogDefault),this.exportDialog.isShow=!0,this.exportDialog.loading=!1,"AllOrders"!=this.activeName&&"WaitingForAllocated"!=this.activeName||(this.exportDialog.totalCount=this.$refs.subPage.totalCount)},updateOrder(){this.updateOrderLoading=!0,this.$apiCall("api.ShopifyAccount.getOrderByHand",{},e=>{this.updateOrderLoading=!1,"9999"==e.ErrorCode?(this.updateTime=e.Data.Results,localStorage.setItem("c_orders-updateTime",e.Data.Results),this.$elementMessage("Update Order Success","success")):this.$elementMessage(e.Message,"error")})},getNum(e,t){this.$apiCall("api.Invoice.getOrderCnt",{},i=>{if("9999"==i.ErrorCode){let a=i.Data.Results,s=setInterval(()=>{(!e||(new Date).valueOf()>e+1500)&&(clearInterval(s),this.allocateCnt=Number(a.allocateCnt),this.sourcingCnt=Number(a.sourcingCnt))},100);this.processingCnt=Number(a.processingCnt),this.abnormalCnt=Number(a.abnormalCnt),"first"==t&&setTimeout(()=>{this.allocateCnt&&!Number(this.$store.state.userInfo.vendorCnt)&&(this.dialogHowToShopify.isShow=!0)},200)}else this.$elementMessage(i.Message,"error")}),this.$apiCall("api.Invoice.findByCustomer",{status:2},e=>{if("9999"==e.ErrorCode){let t=e.Data.Results;this.pendingPay=t.length}else this.$elementMessage(e.Message,"error")})},getTableHeight(e){clearTimeout(this.reSizeTime),this.reSizeTime=setTimeout(()=>{let t=this.$root.$children[0].$refs.mainScroll.wrap.offsetHeight-(this.$refs.pageHeader.offsetHeight+this.$refs.pageTabs.$el.offsetHeight+e.$refs.tablefilter.offsetHeight+e.$refs.tableFooter.offsetHeight)-120;"WaitingForAllocated"==this.activeName&&(t+=-10),e.tableHeight=t>200?t:200},500)},handleClick(e){e.name==this.$route.name?this.pageKey=(new Date).valueOf():this.$router.push({name:e.name})}}},l=r,n=(i("c8e6"),i("b842"),i("e607")),c=Object(n["a"])(l,a,s,!1,null,"7bebdb80",null);t["default"]=c.exports},"919f":function(e,t,i){},"91e6":function(e,t,i){"use strict";i("919f")},b842:function(e,t,i){"use strict";i("537d")},c8e6:function(e,t,i){"use strict";i("f130")},ea9d:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"Request a quotation for products",visible:e.openCardDialog},on:{"update:visible":function(t){e.openCardDialog=t},close:e.closeDialog}},[t("el-divider"),e.imgView?t("div",{staticClass:"proQuotation"},[t("div",{staticClass:"quotationTit"},[e._v("products for quotation")]),t("div",{staticStyle:{display:"flex"}},[t("div",{staticClass:"imgList"},e._l(e.imgList,(function(e){return t("img",{key:e,staticClass:"upload imgItem",attrs:{src:e}})})),0),t("div",{staticClass:"upload",on:{click:e.openForm}},[t("i",{staticClass:"el-icon-plus"})])])]):e._e(),e.isForm?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"formRole"},[t("div",{staticClass:"quotationTit"},[e._v("Product information")]),t("el-form",{attrs:{model:e.form,"label-position":"left","label-width":"150px"}},[t("el-form-item",{attrs:{label:"Product images:",required:""}},[t("div",{staticClass:"upload",on:{click:e.uploadOpen}},[e.form.imgUrl?t("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.form.imgUrl,fit:"cover"}}):t("i",{staticClass:"el-icon-plus"})],1)]),t("el-form-item",{attrs:{label:"Details:",required:""}},[t("el-input",{attrs:{placeholder:"Product name / URL / description or anything you can tell us"},model:{value:e.form.details,callback:function(t){e.$set(e.form,"details",t)},expression:"form.details"}})],1),t("el-form-item",{attrs:{label:"Expected price (US$):"}},[t("el-input-number",{attrs:{controls:!1},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),t("el-form-item",{attrs:{label:"Remarks:"}},[t("el-input",{attrs:{placeholder:`Leave your message that you want to tell ${e.$root.$children[0].pName.a} Vendors`},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),t("el-button",{staticClass:"save",attrs:{type:"primary"},on:{click:e.saveQuotation}},[e._v("Save")])],1):e._e(),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("Submit Request")]),t("el-button",{on:{click:e.closeQuotation}},[e._v("Discard")])],1)],1),t("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"imgFile",accept:".jpg,.png,.gif"},on:{change:function(t){return e.Base64(t)}}})],1)},s=[],o=(i("149f"),{props:{visible:{type:Boolean,default:!1}},data(){return{form:{imgUrl:"",details:"",price:void 0,remark:""},imgView:!1,outerVisible:!1,innerVisible:!1,isForm:!0,loading:!1,dialogVisible:!1,imgList:[],detailsList:[],priceList:[],remarkList:[]}},computed:{openCardDialog:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},mounted(){},methods:{openForm(){this.isForm=!0,this.loading=!0,setTimeout(()=>{this.loading=!1},800)},uploadOpen(){document.getElementById("imgFile").click()},Base64(e){if(e.target.value){let t=new FileReader,i=new Image,a="";t.onload=e=>{i.src=e.target.result;let t=e.target.result.match(/data:image\/(.*);base64,.*/);a=t[1]},i.onload=t=>{base64Image({file:e.target,callback:e=>{let t=e.split("base64,").pop();this.uploadImgBase64(t,a)}})},t.readAsDataURL(e.target.files[0])}},uploadImgBase64(e,t){this.loading=!0,this.$apiCall("api.User.uploadImgBase64",{imgUrlBase64:e,ext:t},e=>{this.loading=!1,9999==e.ErrorCode?this.form.imgUrl=e.Data.Results.imgUrl:this.$message.error(e.Message)})},saveQuotation(){return""==this.form.imgUrl?(this.$message.error("Please select a picture !"),!1):""==this.form.details?(this.$message.error("Please fill in the details !"),!1):(this.imgView=!0,this.isForm=!1,this.imgList.push(this.form.imgUrl),this.detailsList.push(this.form.details),this.priceList.push(this.form.price),this.remarkList.push(this.form.remark),void(this.form={imgUrl:"",details:"",price:void 0,remark:""}))},closeQuotation(){this.openCardDialog=!1,this.form={imgUrl:"",details:"",price:void 0,remark:""},this.imgList=[],this.detailsList=[],this.priceList=[],this.remarkList=[],this.isForm=!0,this.imgView=!1},closeDialog(){this.closeQuotation()},submit(){let e=[];for(let t=0;t<this.imgList.length;t++)e.push({detail:this.detailsList[t],imgUrl:this.imgList[t],expectPrice:this.priceList[t],remarks:this.remarkList[t]});this.$apiCall("api.OfferList.genOfferProduct",{products:e},e=>{9999==e.ErrorCode?(this.$message.success("Submit Success !"),this.closeQuotation(),this.$router.push("/Waiting-for-vendors-respond")):this.$message.error(e.Message)})}},components:{}}),r=o,l=(i("91e6"),i("e607")),n=Object(l["a"])(r,a,s,!1,null,"6167711f",null);t["a"]=n.exports},f130:function(e,t,i){}}]);
//# sourceMappingURL=Main.9c6f9e4e.js.map