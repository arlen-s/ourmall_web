(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cf06b91"],{"0232":function(t,i,e){"use strict";e.r(i);var s,a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"contentpanel get-order-page"},[e("div",{staticClass:"select-add-box"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[t._m(0),e("div",{staticClass:"right"})]),e("div",{staticClass:"pagebody"},[e("el-row",{staticClass:" mg-b-15",attrs:{gutter:10}},[e("el-col",{attrs:{span:24}},[e("el-card",{staticStyle:{"margin-bottom":"10px"},attrs:{shadow:"always"}},[e("div",{staticClass:"add-card-header"},[e("div",[e("router-link",{attrs:{to:"/cart"}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v(" Back")])],1),e("div",[e("el-link",{staticClass:"mg-r-20",attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(i){return t.openAddAdd()}}},[t._v(" Add New Address ")]),e("el-link",{attrs:{type:"primary"},on:{click:function(i){return t.$router.push({path:"/manage-addresses"})}}},[t._v("Manage-Addresses")])],1)]),t.addList.length?[e("swiper",{ref:"mySwiper",staticClass:"mg-b-20",attrs:{options:t.swiperOptions}},t._l(t.addList,(function(i){return e("swiper-slide",{key:i.id},[e("el-card",{staticClass:"add-card",class:{default:"1"==i.isDefault,active:i.id==t.activeAddressId},nativeOn:{click:function(e){return t.selectActive(i)}}},[e("div",{staticClass:"default-tx"},[t._v("Default Address")]),e("div",{staticClass:"name"},[t._v(t._s(i.firstName)+" "+t._s(i.lastName))]),e("el-divider"),e("div",{staticClass:"add-row tx-ellipsis1"},[t._v(" "+t._s(i.address1)+" ")]),e("div",{staticClass:"add-row tx-ellipsis1"},[t._v(t._s(i.province))]),e("div",{staticClass:"add-row tx-ellipsis1"},[t._v(t._s(t.codeToCountry(i.country))+" ("+t._s(i.country)+")")]),e("div",{staticClass:"add-row tx-ellipsis1"},[t._v(t._s(i.phone))]),e("div",{staticClass:"action"},[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.openAddAdd(i)}}},[t._v("Edit")])],1),e("div",{staticClass:"active-badge"},[e("i",{staticClass:"el-icon-check"})])],1)],1)})),1),e("div",{staticClass:"swiper-button swiper-button-prev",class:{disable:!t.activeIndex},on:{click:t.prev}},[e("i",{staticClass:"el-icon-arrow-left"})]),e("div",{staticClass:"swiper-button swiper-button-next",class:{disable:t.isEnd},on:{click:t.next}},[e("i",{staticClass:"el-icon-arrow-right"})]),e("div",{staticClass:"swiper-scrollbar"})]:e("div",{staticClass:"mg-b-20"},[e("el-row",{attrs:{gutter:25}},[e("el-col",{attrs:{span:8}},[e("el-card",{staticClass:"add-ads-placeholder",nativeOn:{click:function(i){return t.openAddAdd()}}},[e("span",[t._v("Add New Address")])])],1)],1)],1),t.activeAddressId?e("el-row",{staticClass:" mg-b-10",attrs:{gutter:10}},[e("el-col",{attrs:{span:24}},[t._v(" Address: "),e("b",{staticStyle:{color:"#909399"}},[t._v(t._s(t.activeAddObj.address1+" "+t.activeAddObj.street+" "+t.activeAddObj.city))])])],1):t._e(),t.activeAddressId?e("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.logisticLoading,expression:"logisticLoading"}],attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form",[!t.logisticLoading&&t.logisticList.length?e("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"Shipping Method"}},[e("el-select",{staticClass:" mg-r-15",attrs:{size:"small"},model:{value:t.activeLogistc,callback:function(i){t.activeLogistc=i},expression:"activeLogistc"}},t._l(t.logisticList,(function(i){return e("el-option",{key:i.expresstype,attrs:{label:i.expresstype,value:i.expresstype}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(i.expresstype))]),e("span",{staticStyle:{float:"right",color:"#909399","font-size":"12px"}},[t._v("$ "+t._s(i.freight))])])})),1),t.activeLogistic?e("span",{staticStyle:{color:"#909399"}},[t._v("$ "+t._s(t.activeLogistic.freight))]):t._e()],1):e("el-alert",{attrs:{title:"There is no Shipping method to reach the current address",type:"warning","show-icon":"",closable:!1}})],1)],1)],1):e("el-row",[e("el-col",{attrs:{span:8}},[e("el-alert",{attrs:{title:"Please select address",type:"warning","show-icon":"",closable:!1}})],1)],1)],2)],1)],1),e("el-row",{staticClass:"order-info-wrap",attrs:{gutter:10}},[e("el-col",{attrs:{span:24}},[e("h2",[t._v("Order Information")])]),e("el-col",{attrs:{span:24}},[e("el-card",{staticClass:" mg-b-15"},[e("el-table",{staticStyle:{"margin-bottom":"15px"},attrs:{data:t.skuList}},[e("el-table-column",{attrs:{label:"Product information"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"product-info"},[e("a",{attrs:{href:"/item/"+i.row.productId+"/"+i.row.name.replace(/\s+/g,"-").replace(/[^\w]/g,"_")+".html",target:"_blank"}},[e("el-image",{staticClass:"product-img",attrs:{fit:"cover",src:i.row.propertyImage,lazy:""}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"})])])],1),e("div",{staticClass:"right"},[e("a",{attrs:{href:"/item/"+i.row.productId+"/"+i.row.name.replace(/\s+/g,"-").replace(/[^\w]/g,"_")+".html",target:"_blank"}},[t._v(t._s(i.row.name))]),e("div",{staticClass:"tx-ellipsis1"},[t._v(t._s(t.formatAttr(i.row.propertyValue)))]),e("div",{staticClass:"sku"},[t._v("SKU: "),e("span",[t._v(t._s(i.row.sku))])])])])]}}])}),e("el-table-column",{attrs:{label:"Price",width:"140"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v("$ "+t._s(i.row.price))])]}}])}),e("el-table-column",{attrs:{label:"Quantity",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.quantity))])]}}])}),e("el-table-column",{attrs:{label:"Subtotal",width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{color:"#F56C6C","font-weight":"bold","font-size":"14px"}},[t._v(" $ "+t._s(Number(i.row.subtotal).toFixed(2))+" ")])]}}])})],1),e("div",{staticClass:"total-box"},[e("div",{staticClass:"total-row r1"},[e("span",{staticStyle:{"margin-right":"35px"}},[t._v("1 Unit")]),t._v(" Product Price: "),e("span",{staticClass:" mg-l-5"},[t._v("$"+t._s(t.priceTotal))])]),e("div",{staticClass:"total-row r2"},[t._v(" Shipping Cost: "),e("span",{staticClass:" mg-l-5"},[t._v(t._s(t.activeLogistic?"$ "+Number(t.activeLogistic.freight).toFixed(2):"---"))])]),e("div",{staticClass:"total-row r3"},[t._v(" Total Amount: "),e("span",{staticClass:" mg-l-5"},[t._v("$ "+t._s(t.totalAmount))])])])],1)],1),e("el-col",{attrs:{span:24}},[e("div",{staticClass:"submit-box"},[e("el-button",{staticClass:"submit-btn",attrs:{type:"primary",loading:t.placeOrderLoading,id:"placeOrderSubmit"},on:{click:t.setPlaceOrder}},[e("span",{attrs:{id:"placeOrderSubmitInner"}},[t._v("Submit")])])],1)])],1)],1)]),e("DialogEditAdd",{attrs:{data:t.dialogEditAdd},on:{setAdd:t.setAdd}})],1)},r=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-order"}),e("h2",[t._v("Place Order")])])])}],n=(e("4de4"),e("a15b"),e("d81d"),e("a434"),e("a9e3"),e("b680"),e("b64b"),e("ac1f"),e("1276"),e("498a"),e("159b"),e("2909")),d=e("c895"),o=e("79fe"),c={data:function(){return{loading:!1,countryArr:[],swiperOptions:{slidesPerView:3,spaceBetween:30,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"},on:{init:function(){s.activeIndex=this.activeIndex,s.isBeginning=this.isBeginning,s.isEnd=this.isEnd},slideChange:function(){s.activeIndex=this.activeIndex,s.isBeginning=this.isBeginning,s.isEnd=this.isEnd}}},activeIndex:0,isBeginning:!0,isEnd:!0,dialogEditAdd:{isShow:!1,loading:!1,firstName:"",lastName:"",address1:"",address2:"",country:"",province:"",city:"",street:"",company:"",phone:"",postcode:"",isDefault:!1,addressId:""},dialogEditAddDefault:"{}",addList:[],skuList:[],activeAddressId:"",logisticLoading:!1,logisticList:[],activeLogistc:"",placeOrderLoading:!1}},components:{DialogEditAdd:o["a"]},computed:{swiper:function(){return this.$refs.mySwiper.swiper},priceTotal:function(){var t=0;return this.skuList.forEach((function(i){t+=Number(i.subtotal)})),t},activeAddObj:function(){var t=this,i=null;return this.addList.some((function(e){if(e.id==t.activeAddressId)return i=e,!0})),i},activeLogistic:function(){var t=this,i=null;return this.logisticList.some((function(e){if(e.expresstype==t.activeLogistc)return i=e,!0})),i},totalWeight:function(){var t=0;return this.skuList.forEach((function(i){i.weight&&(t+=Number(i.weight)*Number(i.quantity))})),parseInt(t)},totalAmount:function(){var t="---";return this.activeLogistic&&this.skuList.length&&(t=(Number(this.priceTotal)+Number(this.activeLogistic.freight)).toFixed(2)),t}},watch:{activeAddressId:function(){var t=this;this.activeAddressId&&this.activeAddObj&&(this.logisticLoading=!0,this.$apiCall("api.PurchaseOrder.getLogisticFee",{countryCode:this.activeAddObj.country,weight:this.totalWeight?this.totalWeight:1},(function(i){t.logisticLoading=!1,"9999"==i.ErrorCode?t.logisticList=i.Data.Results:t.$elementMessage(i.Message,"error")})))}},created:function(){s=this},mounted:function(){var t=this;this.dialogEditAddDefault=JSON.stringify(this.dialogEditAdd),Object.keys(d).forEach((function(i){Object.keys(d[i]).forEach((function(e){t.countryArr.push({label:d[i][e].nameEN,value:d[i][e].code2})}))})),"place"==this.$route.query.a?this.skuList=JSON.parse(localStorage.getItem("c_cartSelectList")):this.$route.params.placeOrderArr&&this.$route.params.placeOrderArr.length&&(this.skuList=Object(n["a"])(this.$route.params.placeOrderArr)),this.getAddList(1)},methods:{setPlaceOrder:function(){var t=this;if(this.activeAddObj)if(this.activeLogistic){var i={addressId:this.activeAddressId,logistic:this.activeLogistc,stockIds:this.skuList.map((function(t){return t.stockId}))};this.placeOrderLoading=!0,this.$apiCall("api.PurchaseOrder.placeOrder",i,(function(i){t.placeOrderLoading=!1,"9999"==i.ErrorCode?(t.$Burying({object:"13005",objectId:i.Data.Results.id}),t.$router.push({name:"purchaseList",params:{action:"pay"}})):t.$elementMessage(i.Message,"error")}))}else this.$elementMessage("Please select a shipping method","error");else this.$elementMessage("Please select a shipping address","error")},selectActive:function(t){this.activeAddressId=t.id,this.activeLogistc=""},getAddList:function(t,i){var e=this;this.loading=!0,this.$apiCall("api.Address.addressList",{},(function(s){if(e.loading=!1,"9999"==s.ErrorCode){var a=null;if(e.addList=s.Data.Results,e.addList.length>1&&(e.addList.some((function(t,i){if("1"==t.isDefault)return a=t,e.addList.splice(i,1),!0})),a&&e.addList.unshift(a)),e.activeAddressId==i&&(e.activeAddressId="",setTimeout((function(){e.activeAddressId=i}),500)),!t)return;if(e.addList.length>3&&(e.isEnd=!1),e.activeAddressId)return;e.addList.some((function(t,i){if("1"==t.isDefault)return e.activeAddressId=t.id,!0}))}else e.$elementMessage(s.Message,"error")}))},codeToCountry:function(t){var i="";return this.countryArr.some((function(e){if(e.value==t)return i=e.label,!0})),i},prev:function(){this.swiper.slidePrev(),this.isBeginning=this.swiper.isBeginning,this.isEnd=this.swiper.isEnd},next:function(){this.swiper.slideNext(),this.isBeginning=this.swiper.isBeginning,this.isEnd=this.swiper.isEnd},openAddAdd:function(t){this.dialogEditAdd=JSON.parse(this.dialogEditAddDefault),t&&(this.dialogEditAdd.firstName=t.firstName,this.dialogEditAdd.lastName=t.lastName,this.dialogEditAdd.address1=t.address1,this.dialogEditAdd.address2=t.address2,this.dialogEditAdd.country=t.country,this.dialogEditAdd.province=t.province,this.dialogEditAdd.city=t.city,this.dialogEditAdd.street=t.street,this.dialogEditAdd.company=t.company,this.dialogEditAdd.phone=t.phone,this.dialogEditAdd.postcode=t.postcode,this.dialogEditAdd.isDefault=1==t.isDefault,this.dialogEditAdd.addressId=t.id),this.dialogEditAdd.isShow=!0},setAdd:function(){this.getAddList(void 0,this.dialogEditAdd.addressId),this.dialogEditAdd.isShow=!1,this.$elementMessage("save successfully","success")},formatAttr:function(t){t=t.split("||"),t=t.filter((function(t){return t&&t.trim()}));var i=t.join(",");return i}}},l=c,u=(e("b9f8"),e("9b3f"),e("2877")),p=Object(u["a"])(l,a,r,!1,null,"0fa7e62a",null);i["default"]=p.exports},"06c5":function(t,i,e){"use strict";e.d(i,"a",(function(){return a}));e("a630"),e("fb6a"),e("b0c0"),e("d3b7"),e("25f0"),e("3ca3");var s=e("6b75");function a(t,i){if(t){if("string"===typeof t)return Object(s["a"])(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Object(s["a"])(t,i):void 0}}},2909:function(t,i,e){"use strict";e.d(i,"a",(function(){return o}));var s=e("6b75");function a(t){if(Array.isArray(t))return Object(s["a"])(t)}e("a4d3"),e("e01a"),e("d28b"),e("a630"),e("d3b7"),e("3ca3"),e("ddb0");function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var n=e("06c5");function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t){return a(t)||r(t)||Object(n["a"])(t)||d()}},"498a":function(t,i,e){"use strict";var s=e("23e7"),a=e("58a8").trim,r=e("c8d2");s({target:"String",proto:!0,forced:r("trim")},{trim:function(){return a(this)}})},"4df4":function(t,i,e){"use strict";var s=e("0366"),a=e("7b0b"),r=e("9bdd"),n=e("e95a"),d=e("50c4"),o=e("8418"),c=e("35a1");t.exports=function(t){var i,e,l,u,p,f,g=a(t),v="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,b=void 0!==m,A=c(g),y=0;if(b&&(m=s(m,h>2?arguments[2]:void 0,2)),void 0==A||v==Array&&n(A))for(i=d(g.length),e=new v(i);i>y;y++)f=b?m(g[y],y):g[y],o(e,y,f);else for(u=A.call(g),p=u.next,e=new v;!(l=p.call(u)).done;y++)f=b?r(u,m,[l.value,y],!0):l.value,o(e,y,f);return e.length=y,e}},"6b75":function(t,i,e){"use strict";function s(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,s=new Array(i);e<i;e++)s[e]=t[e];return s}e.d(i,"a",(function(){return s}))},"9b3f":function(t,i,e){"use strict";e("c97e")},"9bdd":function(t,i,e){var s=e("825a"),a=e("2a62");t.exports=function(t,i,e,r){try{return r?i(s(e)[0],e[1]):i(e)}catch(n){throw a(t),n}}},a15b:function(t,i,e){"use strict";var s=e("23e7"),a=e("44ad"),r=e("fc6a"),n=e("a640"),d=[].join,o=a!=Object,c=n("join",",");s({target:"Array",proto:!0,forced:o||!c},{join:function(t){return d.call(r(this),void 0===t?",":t)}})},a630:function(t,i,e){var s=e("23e7"),a=e("4df4"),r=e("1c7e"),n=!r((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:n},{from:a})},b9f8:function(t,i,e){"use strict";e("f0e0")},c8d2:function(t,i,e){var s=e("d039"),a=e("5899"),r="​᠎";t.exports=function(t){return s((function(){return!!a[t]()||r[t]()!=r||a[t].name!==t}))}},c97e:function(t,i,e){},f0e0:function(t,i,e){},fb6a:function(t,i,e){"use strict";var s=e("23e7"),a=e("861d"),r=e("e8b5"),n=e("23cb"),d=e("50c4"),o=e("fc6a"),c=e("8418"),l=e("b622"),u=e("1dde"),p=u("slice"),f=l("species"),g=[].slice,v=Math.max;s({target:"Array",proto:!0,forced:!p},{slice:function(t,i){var e,s,l,u=o(this),p=d(u.length),h=n(t,p),m=n(void 0===i?p:i,p);if(r(u)&&(e=u.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)?a(e)&&(e=e[f],null===e&&(e=void 0)):e=void 0,e===Array||void 0===e))return g.call(u,h,m);for(s=new(void 0===e?Array:e)(v(m-h,0)),l=0;h<m;h++,l++)h in u&&c(s,l,u[h]);return s.length=l,s}})}}]);
//# sourceMappingURL=chunk-1cf06b91.8d094a6d.js.map