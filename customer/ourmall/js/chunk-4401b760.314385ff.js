(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4401b760"],{"0232":function(t,e,i){"use strict";i.r(e);var s,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"contentpanel get-order-page"},[i("div",{staticClass:"select-add-box"},[i("div",{ref:"pageHeader",staticClass:"pagetitle"},[t._m(0),i("div",{staticClass:"right"})]),i("div",{staticClass:"pagebody"},[i("el-row",{staticClass:" mg-b-15",attrs:{gutter:10}},[i("el-col",{attrs:{span:24}},[i("el-card",{staticStyle:{"margin-bottom":"10px"},attrs:{shadow:"always"}},[i("div",{staticClass:"add-card-header"},[i("div",[i("router-link",{attrs:{to:"/cart"}},[i("i",{staticClass:"el-icon-arrow-left"}),t._v(" Back")])],1),i("div",[i("el-link",{staticClass:"mg-r-20",attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(e){return t.openAddAdd()}}},[t._v(" Add New Address ")]),i("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({path:"/manage-addresses"})}}},[t._v("Manage-Addresses")])],1)]),t.addList.length?[i("swiper",{ref:"mySwiper",staticClass:"mg-b-20",attrs:{options:t.swiperOptions}},t._l(t.addList,(function(e){return i("swiper-slide",{key:e.id},[i("el-card",{staticClass:"add-card",class:{default:"1"==e.isDefault,active:e.id==t.activeAddressId},nativeOn:{click:function(i){return t.selectActive(e)}}},[i("div",{staticClass:"default-tx"},[t._v("Default Address")]),i("div",{staticClass:"name"},[t._v(t._s(e.firstName)+" "+t._s(e.lastName))]),i("el-divider"),i("div",{staticClass:"add-row tx-ellipsis1"},[t._v(" "+t._s(e.address1)+" ")]),i("div",{staticClass:"add-row tx-ellipsis1"},[t._v(t._s(e.province))]),i("div",{staticClass:"add-row tx-ellipsis1"},[t._v(t._s(t.codeToCountry(e.country))+" ("+t._s(e.country)+")")]),i("div",{staticClass:"add-row tx-ellipsis1"},[t._v(t._s(e.phone))]),i("div",{staticClass:"action"},[i("el-link",{attrs:{type:"primary"},on:{click:function(i){return i.stopPropagation(),t.openAddAdd(e)}}},[t._v("Edit")])],1),i("div",{staticClass:"active-badge"},[i("i",{staticClass:"el-icon-check"})])],1)],1)})),1),i("div",{staticClass:"swiper-button swiper-button-prev",class:{disable:!t.activeIndex},on:{click:t.prev}},[i("i",{staticClass:"el-icon-arrow-left"})]),i("div",{staticClass:"swiper-button swiper-button-next",class:{disable:t.isEnd},on:{click:t.next}},[i("i",{staticClass:"el-icon-arrow-right"})]),i("div",{staticClass:"swiper-scrollbar"})]:i("div",{staticClass:"mg-b-20"},[i("el-row",{attrs:{gutter:25}},[i("el-col",{attrs:{span:8}},[i("el-card",{staticClass:"add-ads-placeholder",nativeOn:{click:function(e){return t.openAddAdd()}}},[i("span",[t._v("Add New Address")])])],1)],1)],1),t.activeAddressId?i("el-row",{staticClass:" mg-b-10",attrs:{gutter:10}},[i("el-col",{attrs:{span:24}},[t._v(" Address: "),i("b",{staticStyle:{color:"#909399"}},[t._v(t._s(t.activeAddObj.address1+" "+t.activeAddObj.street+" "+t.activeAddObj.city))])])],1):t._e(),t.activeAddressId?i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.logisticLoading,expression:"logisticLoading"}],attrs:{gutter:10}},[i("el-col",{attrs:{span:12}},[i("el-form",[!t.logisticLoading&&t.logisticList.length?i("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"Shipping Method"}},[i("el-select",{staticClass:" mg-r-15",attrs:{size:"small"},model:{value:t.activeLogistc,callback:function(e){t.activeLogistc=e},expression:"activeLogistc"}},t._l(t.logisticList,(function(e){return i("el-option",{key:e.expresstype,attrs:{label:e.expresstype,value:e.expresstype}},[i("span",{staticStyle:{float:"left"}},[t._v(t._s(e.expresstype))]),i("span",{staticStyle:{float:"right",color:"#909399","font-size":"12px"}},[t._v("$ "+t._s(e.freight))])])})),1),t.activeLogistic?i("span",{staticStyle:{color:"#909399"}},[t._v("$ "+t._s(t.activeLogistic.freight))]):t._e()],1):i("el-alert",{attrs:{title:"There is no Shipping method to reach the current address",type:"warning","show-icon":"",closable:!1}})],1)],1)],1):i("el-row",[i("el-col",{attrs:{span:8}},[i("el-alert",{attrs:{title:"Please select address",type:"warning","show-icon":"",closable:!1}})],1)],1)],2)],1)],1),i("el-row",{staticClass:"order-info-wrap",attrs:{gutter:10}},[i("el-col",{attrs:{span:24}},[i("h2",[t._v("Order Information")])]),i("el-col",{attrs:{span:24}},[i("el-card",{staticClass:" mg-b-15"},[i("el-table",{staticStyle:{"margin-bottom":"15px"},attrs:{data:t.skuList}},[i("el-table-column",{attrs:{label:"Product information"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"product-info"},[i("a",{attrs:{href:"/item/"+e.row.productId+"/"+e.row.name.replace(/\s+/g,"-").replace(/[^\w]/g,"_")+".html",target:"_blank"}},[i("el-image",{staticClass:"product-img",attrs:{fit:"cover",src:e.row.propertyImage,lazy:""}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline"})])])],1),i("div",{staticClass:"right"},[i("a",{attrs:{href:"/item/"+e.row.productId+"/"+e.row.name.replace(/\s+/g,"-").replace(/[^\w]/g,"_")+".html",target:"_blank"}},[t._v(t._s(e.row.name))]),i("div",{staticClass:"tx-ellipsis1"},[t._v(t._s(t.formatAttr(e.row.propertyValue)))]),i("div",{staticClass:"sku"},[t._v("SKU: "),i("span",[t._v(t._s(e.row.sku))])])])])]}}])}),i("el-table-column",{attrs:{label:"Price",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v("$ "+t._s(e.row.price))])]}}])}),i("el-table-column",{attrs:{label:"Quantity",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.quantity))])]}}])}),i("el-table-column",{attrs:{label:"Subtotal",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticStyle:{color:"#F56C6C","font-weight":"bold","font-size":"14px"}},[t._v(" $ "+t._s(Number(e.row.subtotal).toFixed(2))+" ")])]}}])})],1),i("div",{staticClass:"total-box"},[i("div",{staticClass:"total-row r1"},[i("span",{staticStyle:{"margin-right":"35px"}},[t._v("1 Unit")]),t._v(" Product Price: "),i("span",{staticClass:" mg-l-5"},[t._v("$"+t._s(t.priceTotal))])]),i("div",{staticClass:"total-row r2"},[t._v(" Shipping Cost: "),i("span",{staticClass:" mg-l-5"},[t._v(t._s(t.activeLogistic?"$ "+Number(t.activeLogistic.freight).toFixed(2):"---"))])]),i("div",{staticClass:"total-row r3"},[t._v(" Total Amount: "),i("span",{staticClass:" mg-l-5"},[t._v("$ "+t._s(t.totalAmount))])])])],1)],1),i("el-col",{attrs:{span:24}},[i("div",{staticClass:"submit-box"},[i("el-button",{staticClass:"submit-btn",attrs:{type:"primary",loading:t.placeOrderLoading,id:"placeOrderSubmit"},on:{click:t.setPlaceOrder}},[i("span",{attrs:{id:"placeOrderSubmitInner"}},[t._v("Submit")])])],1)])],1)],1)]),i("DialogEditAdd",{attrs:{data:t.dialogEditAdd},on:{setAdd:t.setAdd}})],1)},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left"},[i("div",{staticClass:"title"},[i("i",{staticClass:"el-icon-s-order"}),i("h2",[t._v("Place Order")])])])}],n=i("6c65"),d=(i("e456"),i("af46"),i("f203"),i("2086"),i("5ad0"),i("a6d8"),i("09a7"),i("0d90"),i("cf33"),i("8f10"),i("ee0e"),i("b5b8"),i("89e3"),i("c8956")),o=i("79fe"),c={data:function(){return{loading:!1,countryArr:[],swiperOptions:{slidesPerView:3,spaceBetween:30,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"},on:{init:function(){s.activeIndex=this.activeIndex,s.isBeginning=this.isBeginning,s.isEnd=this.isEnd},slideChange:function(){s.activeIndex=this.activeIndex,s.isBeginning=this.isBeginning,s.isEnd=this.isEnd}}},activeIndex:0,isBeginning:!0,isEnd:!0,dialogEditAdd:{isShow:!1,loading:!1,firstName:"",lastName:"",address1:"",address2:"",country:"",province:"",city:"",street:"",company:"",phone:"",postcode:"",isDefault:!1,addressId:""},dialogEditAddDefault:"{}",addList:[],skuList:[],activeAddressId:"",logisticLoading:!1,logisticList:[],activeLogistc:"",placeOrderLoading:!1}},components:{DialogEditAdd:o["a"]},computed:{swiper:function(){return this.$refs.mySwiper.swiper},priceTotal:function(){var t=0;return this.skuList.forEach((function(e){t+=Number(e.subtotal)})),t},activeAddObj:function(){var t=this,e=null;return this.addList.some((function(i){if(i.id==t.activeAddressId)return e=i,!0})),e},activeLogistic:function(){var t=this,e=null;return this.logisticList.some((function(i){if(i.expresstype==t.activeLogistc)return e=i,!0})),e},totalWeight:function(){var t=0;return this.skuList.forEach((function(e){e.weight&&(t+=Number(e.weight)*Number(e.quantity))})),parseInt(t)},totalAmount:function(){var t="---";return this.activeLogistic&&this.skuList.length&&(t=(Number(this.priceTotal)+Number(this.activeLogistic.freight)).toFixed(2)),t}},watch:{activeAddressId:function(){var t=this;this.activeAddressId&&this.activeAddObj&&(this.logisticLoading=!0,this.$apiCall("api.PurchaseOrder.getLogisticFee",{countryCode:this.activeAddObj.country,weight:this.totalWeight?this.totalWeight:1},(function(e){t.logisticLoading=!1,"9999"==e.ErrorCode?t.logisticList=e.Data.Results:t.$elementMessage(e.Message,"error")})))}},created:function(){s=this},mounted:function(){var t=this;this.dialogEditAddDefault=JSON.stringify(this.dialogEditAdd),Object.keys(d).forEach((function(e){Object.keys(d[e]).forEach((function(i){t.countryArr.push({label:d[e][i].nameEN,value:d[e][i].code2})}))})),"place"==this.$route.query.a?this.skuList=JSON.parse(localStorage.getItem("c_cartSelectList")):this.$route.params.placeOrderArr&&this.$route.params.placeOrderArr.length&&(this.skuList=Object(n["a"])(this.$route.params.placeOrderArr)),this.getAddList(1)},methods:{setPlaceOrder:function(){var t=this;if(this.activeAddObj)if(this.activeLogistic){var e={addressId:this.activeAddressId,logistic:this.activeLogistc,stockIds:this.skuList.map((function(t){return t.stockId}))};this.placeOrderLoading=!0,this.$apiCall("api.PurchaseOrder.placeOrder",e,(function(e){t.placeOrderLoading=!1,"9999"==e.ErrorCode?(t.$Burying({object:"13005",objectId:e.Data.Results.id}),t.$router.push({name:"purchaseList",params:{action:"pay"}})):t.$elementMessage(e.Message,"error")}))}else this.$elementMessage("Please select a shipping method","error");else this.$elementMessage("Please select a shipping address","error")},selectActive:function(t){this.activeAddressId=t.id,this.activeLogistc=""},getAddList:function(t,e){var i=this;this.loading=!0,this.$apiCall("api.Address.addressList",{},(function(s){if(i.loading=!1,"9999"==s.ErrorCode){var a=null;if(i.addList=s.Data.Results,i.addList.length>1&&(i.addList.some((function(t,e){if("1"==t.isDefault)return a=t,i.addList.splice(e,1),!0})),a&&i.addList.unshift(a)),i.activeAddressId==e&&(i.activeAddressId="",setTimeout((function(){i.activeAddressId=e}),500)),!t)return;if(i.addList.length>3&&(i.isEnd=!1),i.activeAddressId)return;i.addList.some((function(t,e){if("1"==t.isDefault)return i.activeAddressId=t.id,!0}))}else i.$elementMessage(s.Message,"error")}))},codeToCountry:function(t){var e="";return this.countryArr.some((function(i){if(i.value==t)return e=i.label,!0})),e},prev:function(){this.swiper.slidePrev(),this.isBeginning=this.swiper.isBeginning,this.isEnd=this.swiper.isEnd},next:function(){this.swiper.slideNext(),this.isBeginning=this.swiper.isBeginning,this.isEnd=this.swiper.isEnd},openAddAdd:function(t){this.dialogEditAdd=JSON.parse(this.dialogEditAddDefault),t&&(this.dialogEditAdd.firstName=t.firstName,this.dialogEditAdd.lastName=t.lastName,this.dialogEditAdd.address1=t.address1,this.dialogEditAdd.address2=t.address2,this.dialogEditAdd.country=t.country,this.dialogEditAdd.province=t.province,this.dialogEditAdd.city=t.city,this.dialogEditAdd.street=t.street,this.dialogEditAdd.company=t.company,this.dialogEditAdd.phone=t.phone,this.dialogEditAdd.postcode=t.postcode,this.dialogEditAdd.isDefault=1==t.isDefault,this.dialogEditAdd.addressId=t.id),this.dialogEditAdd.isShow=!0},setAdd:function(){this.getAddList(void 0,this.dialogEditAdd.addressId),this.dialogEditAdd.isShow=!1,this.$elementMessage("save successfully","success")},formatAttr:function(t){t=t.split("||"),t=t.filter((function(t){return t&&t.trim()}));var e=t.join(",");return e}}},l=c,u=(i("b9f8"),i("9b3f"),i("cba8")),p=Object(u["a"])(l,a,r,!1,null,"0fa7e62a",null);e["default"]=p.exports},"4f84":function(t,e,i){"use strict";var s=i("7e70"),a=i("71fe"),r=i("3db2"),n=i("1ef5"),d=i("8c6b"),o=i("4839"),c=i("07d2"),l=i("bed2"),u=i("42ce"),p=i("4cd7"),f=i("2574"),g=i("f432"),v=f("slice"),h=p("species"),m=a.Array,b=Math.max;s({target:"Array",proto:!0,forced:!v},{slice:function(t,e){var i,s,a,p=l(this),f=c(p),v=o(t,f),A=o(void 0===e?f:e,f);if(r(p)&&(i=p.constructor,n(i)&&(i===m||r(i.prototype))?i=void 0:d(i)&&(i=i[h],null===i&&(i=void 0)),i===m||void 0===i))return g(p,v,A);for(s=new(void 0===i?m:i)(b(A-v,0)),a=0;v<A;v++,a++)v in p&&u(s,a,p[v]);return s.length=a,s}})},"5adc":function(t,e,i){},"6c65":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var s=i("88a6");function a(t){if(Array.isArray(t))return Object(s["a"])(t)}i("e749"),i("42c2"),i("e456"),i("2d78"),i("b141"),i("df9c"),i("d72f");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var n=i("e3b1");i("5e4f");function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t){return a(t)||r(t)||Object(n["a"])(t)||d()}},"88a6":function(t,e,i){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}i.d(e,"a",(function(){return s}))},"89e3":function(t,e,i){"use strict";var s=i("7e70"),a=i("add7"),r=i("adb7"),n=i("bed2"),d=i("160a"),o=a([].join),c=r!=Object,l=d("join",",");s({target:"Array",proto:!0,forced:c||!l},{join:function(t){return o(n(this),void 0===t?",":t)}})},"9b3f":function(t,e,i){"use strict";i("a9e9")},"9b67":function(t,e,i){"use strict";var s=i("71fe"),a=i("0db1"),r=i("6d92"),n=i("df65"),d=i("a1da"),o=i("ca5d"),c=i("1ef5"),l=i("07d2"),u=i("42ce"),p=i("63de"),f=i("4f1d"),g=s.Array;t.exports=function(t){var e=n(t),i=c(this),s=arguments.length,v=s>1?arguments[1]:void 0,h=void 0!==v;h&&(v=a(v,s>2?arguments[2]:void 0));var m,b,A,w,y,_,C=f(e),L=0;if(!C||this==g&&o(C))for(m=l(e),b=i?new this(m):g(m);m>L;L++)_=h?v(e[L],L):e[L],u(b,L,_);else for(w=p(e,C),y=w.next,b=i?new this:[];!(A=r(y,w)).done;L++)_=h?d(w,v,[A.value,L],!0):A.value,u(b,L,_);return b.length=L,b}},a1da:function(t,e,i){var s=i("986c"),a=i("bb9b");t.exports=function(t,e,i,r){try{return r?e(s(i)[0],i[1]):e(i)}catch(n){a(t,"throw",n)}}},a9e9:function(t,e,i){},b5b8:function(t,e,i){"use strict";var s=i("7e70"),a=i("e3c1").trim,r=i("ebca");s({target:"String",proto:!0,forced:r("trim")},{trim:function(){return a(this)}})},b9f8:function(t,e,i){"use strict";i("5adc")},d72f:function(t,e,i){var s=i("7e70"),a=i("9b67"),r=i("3c37"),n=!r((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:n},{from:a})},e3b1:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("4f84"),i("e456"),i("1baf"),i("d72f"),i("b141"),i("cf33"),i("1d94");var s=i("88a6");function a(t,e){if(t){if("string"===typeof t)return Object(s["a"])(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(s["a"])(t,e):void 0}}},ebca:function(t,e,i){var s=i("f995").PROPER,a=i("137b"),r=i("9add"),n="​᠎";t.exports=function(t){return a((function(){return!!r[t]()||n[t]()!==n||s&&r[t].name!==t}))}}}]);