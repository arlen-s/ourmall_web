(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["more"],{"6b14":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.allLoading,expression:"allLoading"}],staticClass:"contentpanel box"},[e("div",{ref:"pageHeader",staticClass:"pagetitle",staticStyle:{"padding-right":"0","flex-wrap":"wrap"}},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-goods"}),e("h2",[t._v(t._s(t.$root.$children[0].pName.a)+" Products Market")])])]),e("el-row",{staticStyle:{"margin-right":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:21}},[e("div",{staticStyle:{"margin-top":"5px"}},[e("el-input",{staticClass:"input-with-select",staticStyle:{"min-width":"550px"},attrs:{placeholder:"Search products"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[e("el-select",{attrs:{slot:"append",placeholder:"IN ALL CATEGORIES"},on:{change:t.search},slot:"append",model:{value:t.categoryId,callback:function(e){t.categoryId=e},expression:"categoryId"}},[e("el-option",{attrs:{label:"IN ALL CATEGORIES",value:""}}),t._l(t.commodityTypeMoreList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2),e("el-button",{attrs:{slot:"prepend",icon:"el-icon-search"},slot:"prepend"})],1)],1)]),e("el-col",{attrs:{span:3}},[e("el-button",{staticStyle:{"margin-top":"4px"},attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("SEARCH")])],1)],1),e("div",{staticClass:"right"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.quotation()}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" Request Quotation ")])],1)],1),e("div",{staticClass:"pagetitle",staticStyle:{height:"53px"}},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/find-products"}}},[t._v(t._s(t.$root.$children[0].pName.a)+" Products Market")]),this.content?e("el-breadcrumb-item",[e("span",[t._v("Keywords "),e("b",[t._v(t._s(this.content))]),t._v(" results")]),this.content&&this.categoryId?e("span",[t._v(" in "+t._s(this.categoryId))]):t._e()]):this.categoryId||this.content?e("el-breadcrumb-item",[t._v(" "+t._s(this.categoryId)+" ")]):e("el-breadcrumb-item",[t._v(" IN ALL CATEGORIES ")])],1)],1),t.items&&0==t.items.length?e("div",{staticStyle:{width:"100%"}},[e("el-card",[e("b",[t._v("There are no products in this category")])])],1):e("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"body-style":"padding:20px 0 20px 0;"}},[e("div",{staticClass:"list"},t._l(t.items,(function(i){return e("el-col",{key:i.id,staticStyle:{"margin-bottom":"20px"},attrs:{sm:12,md:8,lg:6,xl:4}},[e("div",{staticClass:"pro_box"},[e("div",{staticClass:"pro_img"},[e("div",{staticClass:"img-wrap"},[e("el-image",{staticStyle:{position:"absolute",width:"100%",height:"100%"},attrs:{fit:"cover",src:i.imgUrl},on:{click:function(e){return t.goToDetail(i)}}})],1)]),e("div",{staticClass:"pro_name",on:{click:function(e){return t.goToDetail(i)}}},[e("a",{attrs:{href:"javescript:;"}},[t._v(t._s(i.name))])]),e("div",{staticClass:"price"},[e("span",{staticClass:"pro_cost"},[t._v(t._s(t.$store.state.country.symbol)+" "+t._s(t.$exchangeRate(i.cost)))])]),e("div",{staticClass:"imports"}),e("div",{staticStyle:{display:"flex",width:"100%","justify-content":"center","margin-top":"15px"}},[e("el-dropdown",[e("el-button",{attrs:{type:"primary"}},[t._v(" Add to Import List"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{staticClass:"importBut",attrs:{disabled:1==i.hasImport},nativeOn:{click:function(e){return t.import_pro(i,e)}}},[t._v("Add to Import List")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.goToDetail(i)}}},[t._v("Add to Cart")])],1)],1)],1)])])})),1)])],1),t.items.length?e("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e(),e("div",{staticClass:"ball",style:{top:t.ball.y+"px",left:t.ball.x+"px",opacity:t.ball.opacity}}),e("Quotation",{attrs:{visible:t.visible},on:{"update:visible":function(e){t.visible=e}}}),e("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:120}})],1)},a=[],o=(i("149f"),i("ea9d")),r={props:{},data(){return{categoryId:null,name:"",items:[],commodityTypeMoreList:[],page:this.$route.query.page?Number(this.$route.query.page):"1",rowsPerPage:localStorage.getItem("c_importPerPage")?Number(localStorage.getItem("c_importPerPage")):12,pageSizes:[12,24,48],total:0,totalPage:0,input:"",content:"",visible:!1,loading:!0,allLoading:!0,ball:{x:window.innerWidth/2,y:window.innerHeight/2,opacity:0}}},mounted(){this.categoryId=this.$route.query.id,this.input=this.$route.query.input,this.content=this.input,this.getCategory()},watch:{$route:"gotoPage"},components:{Quotation:o["a"]},methods:{quotation(){this.visible=!0},goToDetail(t){const e=$(".el-breadcrumb__inner").eq(1).text();this.$router.push({name:"productDetail",query:{id:t.id,name:t.name,moreName:e}})},getCategory(){this.$apiCall("api.VendorShop.getAllCategorys",{},t=>{9999==t.ErrorCode&&(this.commodityTypeMoreList=t.Data.Results,this.getItems())})},getItems(){this.loading=!0,this.allLoading=!0,this.commodityTypeMoreList.forEach(t=>{t.name==this.categoryId&&(this.categoryId=t.id)}),this.$apiCall("api.VendorShop.findProducts",{name:this.input,categoryId:this.categoryId,page:this.page,rowsPerPage:this.rowsPerPage},t=>{this.allLoading=!1,this.loading=!1,this.commodityTypeMoreList.forEach(t=>{t.id==this.categoryId&&(this.name=t.name,this.categoryId=t.name)}),this.items=t.Data.Results,this.total=t.Data.Pagination.totalCount,this.totalPage=t.Data.Pagination.totalPage,this.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0})},search(){this.content=this.input,this.$router.push({query:{page:1,input:this.content,id:this.categoryId}})},changePageSize(t){this.rowsPerPage=t,localStorage.setItem("c_importPerPage",t),this.getItems()},gotoPage(){this.page=this.$route.query.page?this.$route.query.page:1,this.categoryId=this.$route.query.id,this.input=this.$route.query.input,this.getItems()},toPage(t){if(t!=this.$route.query.page){let e={};e.page=t,this.$route.query.id&&(e.id=this.$route.query.id),this.$route.query.input&&(e.input=this.$route.query.input),this.$router.push({name:"more",query:e})}},import_pro(t,e){this.$apiCall("api.Product.addFromVendorShopProduct",{id:t.id},i=>{if(9999==i.ErrorCode){t.hasImport=1,t.imports++,this.$message.success("Import Success !"),this.ball.x=e.clientX,this.ball.y=e.clientY,setTimeout(()=>{this.ball.opacity=1},500);const i=t=>{let e=t.offsetTop,i=t.offsetLeft,s=t.offsetParent;while(null!==s)e+=s.offsetTop,i+=s.offsetLeft,s=s.offsetParent;return{left:i,top:e}};let s=i(document.querySelector("[data-name='Import List']"));setTimeout(()=>{this.ball.x=s.left+65,this.ball.y=s.top+15},1e3),setTimeout(()=>{this.ball.opacity=0},1500)}else this.$message.error(i.Message)})}},computed:{product(){let t="";return this.commodityTypeMoreList.forEach(e=>{e.id==this.categoryId&&(t=e.name)}),t}}},l=r,n=(i("889d"),i("e607")),c=Object(n["a"])(l,s,a,!1,null,"ba061b0c",null);e["default"]=c.exports},"889d":function(t,e,i){"use strict";i("c953")},"919f":function(t,e,i){},"91e6":function(t,e,i){"use strict";i("919f")},c953:function(t,e,i){},ea9d:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:"Request a quotation for products",visible:t.openCardDialog},on:{"update:visible":function(e){t.openCardDialog=e},close:t.closeDialog}},[e("el-divider"),t.imgView?e("div",{staticClass:"proQuotation"},[e("div",{staticClass:"quotationTit"},[t._v("products for quotation")]),e("div",{staticStyle:{display:"flex"}},[e("div",{staticClass:"imgList"},t._l(t.imgList,(function(t){return e("img",{key:t,staticClass:"upload imgItem",attrs:{src:t}})})),0),e("div",{staticClass:"upload",on:{click:t.openForm}},[e("i",{staticClass:"el-icon-plus"})])])]):t._e(),t.isForm?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"formRole"},[e("div",{staticClass:"quotationTit"},[t._v("Product information")]),e("el-form",{attrs:{model:t.form,"label-position":"left","label-width":"150px"}},[e("el-form-item",{attrs:{label:"Product images:",required:""}},[e("div",{staticClass:"upload",on:{click:t.uploadOpen}},[t.form.imgUrl?e("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.form.imgUrl,fit:"cover"}}):e("i",{staticClass:"el-icon-plus"})],1)]),e("el-form-item",{attrs:{label:"Details:",required:""}},[e("el-input",{attrs:{placeholder:"Product name / URL / description or anything you can tell us"},model:{value:t.form.details,callback:function(e){t.$set(t.form,"details",e)},expression:"form.details"}})],1),e("el-form-item",{attrs:{label:"Expected price (US$):"}},[e("el-input-number",{attrs:{controls:!1},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),e("el-form-item",{attrs:{label:"Remarks:"}},[e("el-input",{attrs:{placeholder:`Leave your message that you want to tell ${t.$root.$children[0].pName.a} Vendors`},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),e("el-button",{staticClass:"save",attrs:{type:"primary"},on:{click:t.saveQuotation}},[t._v("Save")])],1):t._e(),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("Submit Request")]),e("el-button",{on:{click:t.closeQuotation}},[t._v("Discard")])],1)],1),e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"imgFile",accept:".jpg,.png,.gif"},on:{change:function(e){return t.Base64(e)}}})],1)},a=[],o=(i("149f"),{props:{visible:{type:Boolean,default:!1}},data(){return{form:{imgUrl:"",details:"",price:void 0,remark:""},imgView:!1,outerVisible:!1,innerVisible:!1,isForm:!0,loading:!1,dialogVisible:!1,imgList:[],detailsList:[],priceList:[],remarkList:[]}},computed:{openCardDialog:{get(){return this.visible},set(t){this.$emit("update:visible",t)}}},mounted(){},methods:{openForm(){this.isForm=!0,this.loading=!0,setTimeout(()=>{this.loading=!1},800)},uploadOpen(){document.getElementById("imgFile").click()},Base64(t){if(t.target.value){let e=new FileReader,i=new Image,s="";e.onload=t=>{i.src=t.target.result;let e=t.target.result.match(/data:image\/(.*);base64,.*/);s=e[1]},i.onload=e=>{base64Image({file:t.target,callback:t=>{let e=t.split("base64,").pop();this.uploadImgBase64(e,s)}})},e.readAsDataURL(t.target.files[0])}},uploadImgBase64(t,e){this.loading=!0,this.$apiCall("api.User.uploadImgBase64",{imgUrlBase64:t,ext:e},t=>{this.loading=!1,9999==t.ErrorCode?this.form.imgUrl=t.Data.Results.imgUrl:this.$message.error(t.Message)})},saveQuotation(){return""==this.form.imgUrl?(this.$message.error("Please select a picture !"),!1):""==this.form.details?(this.$message.error("Please fill in the details !"),!1):(this.imgView=!0,this.isForm=!1,this.imgList.push(this.form.imgUrl),this.detailsList.push(this.form.details),this.priceList.push(this.form.price),this.remarkList.push(this.form.remark),void(this.form={imgUrl:"",details:"",price:void 0,remark:""}))},closeQuotation(){this.openCardDialog=!1,this.form={imgUrl:"",details:"",price:void 0,remark:""},this.imgList=[],this.detailsList=[],this.priceList=[],this.remarkList=[],this.isForm=!0,this.imgView=!1},closeDialog(){this.closeQuotation()},submit(){let t=[];for(let e=0;e<this.imgList.length;e++)t.push({detail:this.detailsList[e],imgUrl:this.imgList[e],expectPrice:this.priceList[e],remarks:this.remarkList[e]});this.$apiCall("api.OfferList.genOfferProduct",{products:t},t=>{9999==t.ErrorCode?(this.$message.success("Submit Success !"),this.closeQuotation(),this.$router.push("/Waiting-for-vendors-respond")):this.$message.error(t.Message)})}},components:{}}),r=o,l=(i("91e6"),i("e607")),n=Object(l["a"])(r,s,a,!1,null,"6167711f",null);e["a"]=n.exports}}]);
//# sourceMappingURL=more.9bc11398.js.map