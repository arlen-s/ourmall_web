(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ee720ae"],{"0232":function(t,s,e){"use strict";e.r(s);e("149f");var i=function(){var t=this,s=t._self._c;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"contentpanel get-order-page"},[s("div",{staticClass:"select-add-box"},[s("div",{ref:"pageHeader",staticClass:"pagetitle"},[t._m(0),s("div",{staticClass:"right"})]),s("div",{staticClass:"pagebody"},[s("el-row",{staticClass:"mg-b-15",attrs:{gutter:10}},[s("el-col",{attrs:{span:24}},[s("el-card",{staticStyle:{"margin-bottom":"10px"},attrs:{shadow:"always"}},[s("div",{staticClass:"add-card-header"},[s("div",[s("router-link",{attrs:{to:"/cart"}},[s("i",{staticClass:"el-icon-arrow-left"}),t._v(" Back")])],1),s("div",[s("el-link",{staticClass:"mg-r-20",attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(s){return t.openAddAdd()}}},[t._v(" Add New Address ")]),s("el-link",{attrs:{type:"primary"},on:{click:function(s){return t.$router.push({path:"/manage-addresses"})}}},[t._v("Manage-Addresses")])],1)]),t.addList.length?[s("swiper",{ref:"mySwiper",staticClass:"mg-b-20",attrs:{options:t.swiperOptions}},t._l(t.addList,(function(e){return s("swiper-slide",{key:e.id},[s("el-card",{staticClass:"add-card",class:{default:"1"==e.isDefault,active:e.id==t.activeAddressId},nativeOn:{click:function(s){return t.selectActive(e)}}},[s("div",{staticClass:"default-tx"},[t._v("Default Address")]),s("div",{staticClass:"name"},[t._v(t._s(e.firstName)+" "+t._s(e.lastName))]),s("el-divider"),s("div",{staticClass:"add-row tx-ellipsis1"},[t._v(" "+t._s(e.address1)+" ")]),s("div",{staticClass:"add-row tx-ellipsis1"},[t._v(t._s(e.province))]),s("div",{staticClass:"add-row tx-ellipsis1"},[t._v(t._s(t.codeToCountry(e.country))+" ("+t._s(e.country)+")")]),s("div",{staticClass:"add-row tx-ellipsis1"},[t._v(t._s(e.phone))]),s("div",{staticClass:"action"},[s("el-link",{attrs:{type:"primary"},on:{click:function(s){return s.stopPropagation(),t.openAddAdd(e)}}},[t._v("Edit")])],1),s("div",{staticClass:"active-badge"},[s("i",{staticClass:"el-icon-check"})])],1)],1)})),1),s("div",{staticClass:"swiper-button swiper-button-prev",class:{disable:!t.activeIndex},on:{click:t.prev}},[s("i",{staticClass:"el-icon-arrow-left"})]),s("div",{staticClass:"swiper-button swiper-button-next",class:{disable:t.isEnd},on:{click:t.next}},[s("i",{staticClass:"el-icon-arrow-right"})]),s("div",{staticClass:"swiper-scrollbar"})]:s("div",{staticClass:"mg-b-20"},[s("el-row",{attrs:{gutter:25}},[s("el-col",{attrs:{span:8}},[s("el-card",{staticClass:"add-ads-placeholder",nativeOn:{click:function(s){return t.openAddAdd()}}},[s("span",[t._v("Add New Address")])])],1)],1)],1),t.activeAddressId?s("el-row",{staticClass:"mg-b-10",attrs:{gutter:10}},[s("el-col",{attrs:{span:24}},[t._v(" Address: "),s("b",{staticStyle:{color:"#909399"}},[t._v(t._s(`${t.activeAddObj.address1} ${t.activeAddObj.street} ${t.activeAddObj.city}`))])])],1):t._e(),t.activeAddressId?s("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.logisticLoading,expression:"logisticLoading"}],attrs:{gutter:10}},[s("el-col",{attrs:{span:12}},[s("el-form",[!t.logisticLoading&&t.logisticList.length?s("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"Shipping Method"}},[s("el-select",{staticClass:"mg-r-15",attrs:{size:"small"},model:{value:t.activeLogistc,callback:function(s){t.activeLogistc=s},expression:"activeLogistc"}},t._l(t.logisticList,(function(e){return s("el-option",{key:e.expresstype,attrs:{label:e.expresstype,value:e.expresstype}},[s("span",{staticStyle:{float:"left"}},[t._v(t._s(e.expresstype))]),s("span",{staticStyle:{float:"right",color:"#909399","font-size":"12px"}},[t._v("$ "+t._s(e.freight))])])})),1),t.activeLogistic?s("span",{staticStyle:{color:"#909399"}},[t._v("$ "+t._s(t.activeLogistic.freight))]):t._e()],1):s("el-alert",{attrs:{title:"There is no Shipping method to reach the current address",type:"warning","show-icon":"",closable:!1}})],1)],1)],1):s("el-row",[s("el-col",{attrs:{span:8}},[s("el-alert",{attrs:{title:"Please select address",type:"warning","show-icon":"",closable:!1}})],1)],1)],2)],1)],1),s("el-row",{staticClass:"order-info-wrap",attrs:{gutter:10}},[s("el-col",{attrs:{span:24}},[s("h2",[t._v("Order Information")])]),s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"mg-b-15"},[s("el-table",{staticStyle:{"margin-bottom":"15px"},attrs:{data:t.skuList}},[s("el-table-column",{attrs:{label:"Product information"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"product-info"},[148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?s("a",{attrs:{href:`/item/${e.row.productId}/${e.row.name.replace(/\s+/g,"-").replace(/[^\w]/g,"_")}.html`,target:"_blank"}},[s("el-image",{staticClass:"product-img",attrs:{fit:"cover",src:e.row.propertyImage,lazy:""}},[s("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline"})])])],1):t._e(),s("a",{attrs:{href:`/itemOld/${e.row.productId}/${e.row.name.replace(/\s+/g,"-").replace(/[^\w]/g,"_")}.html`,target:"_blank"}},[s("el-image",{staticClass:"product-img",attrs:{fit:"cover",src:e.row.propertyImage,lazy:""}},[s("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline"})])])],1),s("div",{staticClass:"right"},[148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?s("a",{attrs:{href:`/item/${e.row.productId}/${e.row.name.replace(/\s+/g,"-").replace(/[^\w]/g,"_")}.html`,target:"_blank"}},[t._v(t._s(e.row.name))]):s("a",{attrs:{href:`/itemOld/${e.row.productId}/${e.row.name.replace(/\s+/g,"-").replace(/[^\w]/g,"_")}.html`,target:"_blank"}},[t._v(t._s(e.row.name))]),s("div",{staticClass:"tx-ellipsis1"},[t._v(t._s(t.formatAttr(e.row.propertyValue)))]),s("div",{staticClass:"sku"},[t._v("SKU: "),s("span",[t._v(t._s(e.row.sku))])])])])]}}])}),s("el-table-column",{attrs:{label:"Price",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v("$ "+t._s(e.row.price))])]}}])}),s("el-table-column",{attrs:{label:"Quantity",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.quantity))])]}}])}),s("el-table-column",{attrs:{label:"Subtotal",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticStyle:{color:"#F56C6C","font-weight":"bold","font-size":"14px"}},[t._v(" $ "+t._s(Number(e.row.subtotal).toFixed(2))+" ")])]}}])})],1),s("div",{staticClass:"total-box"},[s("div",{staticClass:"total-row r1"},[s("span",{staticStyle:{"margin-right":"35px"}},[t._v("1 Unit")]),t._v(" Product Price: "),s("span",{staticClass:"mg-l-5"},[t._v("$"+t._s(t.priceTotal))])]),s("div",{staticClass:"total-row r2"},[t._v(" Shipping Cost: "),s("span",{staticClass:"mg-l-5"},[t._v(t._s(t.activeLogistic?"$ "+Number(t.activeLogistic.freight).toFixed(2):"---"))])]),s("div",{staticClass:"total-row r3"},[t._v(" Total Amount: "),s("span",{staticClass:"mg-l-5"},[t._v("$ "+t._s(t.totalAmount))])])])],1)],1),s("el-col",{attrs:{span:24}},[s("div",{staticClass:"submit-box"},[s("el-button",{staticClass:"submit-btn",attrs:{type:"primary",loading:t.placeOrderLoading,id:"placeOrderSubmit"},on:{click:t.setPlaceOrder}},[s("span",{attrs:{id:"placeOrderSubmitInner"}},[t._v("Submit")])])],1)])],1)],1)]),s("DialogEditAdd",{attrs:{data:t.dialogEditAdd},on:{setAdd:t.setAdd}})],1)},a=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[s("i",{staticClass:"el-icon-s-order"}),s("h2",[t._v("Place Order")])])])}],r=(e("fef2"),e("c895")),d=e("79fe");let l;var o={data(){return{loading:!1,countryArr:[],vendorId:localStorage.getItem("vendorId"),swiperOptions:{slidesPerView:3,spaceBetween:30,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"},on:{init(){l.activeIndex=this.activeIndex,l.isBeginning=this.isBeginning,l.isEnd=this.isEnd},slideChange(){l.activeIndex=this.activeIndex,l.isBeginning=this.isBeginning,l.isEnd=this.isEnd}}},activeIndex:0,isBeginning:!0,isEnd:!0,dialogEditAdd:{isShow:!1,loading:!1,firstName:"",lastName:"",address1:"",address2:"",country:"",province:"",city:"",street:"",company:"",phone:"",postcode:"",isDefault:!1,addressId:""},dialogEditAddDefault:"{}",addList:[],skuList:[],activeAddressId:"",logisticLoading:!1,logisticList:[],activeLogistc:"",placeOrderLoading:!1}},components:{DialogEditAdd:d["a"]},computed:{swiper(){return this.$refs.mySwiper.swiper},priceTotal(){let t=0;return this.skuList.forEach(s=>{t+=Number(s.subtotal)}),t},activeAddObj(){let t=null;return this.addList.some(s=>{if(s.id==this.activeAddressId)return t=s,!0}),t},activeLogistic(){let t=null;return this.logisticList.some(s=>{if(s.expresstype==this.activeLogistc)return t=s,!0}),t},totalWeight(){let t=0;return this.skuList.forEach(s=>{s.weight&&(t+=Number(s.weight)*Number(s.quantity))}),parseInt(t)},totalAmount(){let t="---";return this.activeLogistic&&this.skuList.length&&(t=(Number(this.priceTotal)+Number(this.activeLogistic.freight)).toFixed(2)),t}},watch:{activeAddressId(){this.activeAddressId&&this.activeAddObj&&(this.logisticLoading=!0,this.$apiCall("api.PurchaseOrder.getLogisticFee",{countryCode:this.activeAddObj.country,weight:this.totalWeight?this.totalWeight:1},t=>{this.logisticLoading=!1,"9999"==t.ErrorCode?this.logisticList=t.Data.Results:this.$elementMessage(t.Message,"error")}))}},created(){l=this},mounted(){this.dialogEditAddDefault=JSON.stringify(this.dialogEditAdd),Object.keys(r).forEach(t=>{Object.keys(r[t]).forEach(s=>{this.countryArr.push({label:r[t][s].nameEN,value:r[t][s].code2})})}),"place"==this.$route.query.a?this.skuList=JSON.parse(localStorage.getItem("c_cartSelectList")):this.$route.params.placeOrderArr&&this.$route.params.placeOrderArr.length&&(this.skuList=[...this.$route.params.placeOrderArr]),this.getAddList(1)},methods:{setPlaceOrder(){if(!this.activeAddObj)return void this.$elementMessage("Please select a shipping address","error");if(!this.activeLogistic)return void this.$elementMessage("Please select a shipping method","error");let t={addressId:this.activeAddressId,logistic:this.activeLogistc,stockIds:this.skuList.map(t=>t.stockId)};this.placeOrderLoading=!0,this.$apiCall("api.PurchaseOrder.placeOrder",t,t=>{this.placeOrderLoading=!1,"9999"==t.ErrorCode?(this.$Burying({object:"13005",objectId:t.Data.Results.id}),this.$router.push({name:"purchaseList",params:{action:"pay"}})):this.$elementMessage(t.Message,"error")})},selectActive(t){this.activeAddressId=t.id,this.activeLogistc=""},getAddList(t,s){this.loading=!0,this.$apiCall("api.Address.addressList",{},e=>{if(this.loading=!1,"9999"==e.ErrorCode){let i=null;if(this.addList=e.Data.Results,this.addList.length>1&&(this.addList.some((t,s)=>{if("1"==t.isDefault)return i=t,this.addList.splice(s,1),!0}),i&&this.addList.unshift(i)),this.activeAddressId==s&&(this.activeAddressId="",setTimeout(()=>{this.activeAddressId=s},500)),!t)return;if(this.addList.length>3&&(this.isEnd=!1),this.activeAddressId)return;this.addList.some((t,s)=>{if("1"==t.isDefault)return this.activeAddressId=t.id,!0})}else this.$elementMessage(e.Message,"error")})},codeToCountry(t){let s="";return this.countryArr.some(e=>{if(e.value==t)return s=e.label,!0}),s},prev(){this.swiper.slidePrev(),this.isBeginning=this.swiper.isBeginning,this.isEnd=this.swiper.isEnd},next(){this.swiper.slideNext(),this.isBeginning=this.swiper.isBeginning,this.isEnd=this.swiper.isEnd},openAddAdd(t){this.dialogEditAdd=JSON.parse(this.dialogEditAddDefault),t&&(this.dialogEditAdd.firstName=t.firstName,this.dialogEditAdd.lastName=t.lastName,this.dialogEditAdd.address1=t.address1,this.dialogEditAdd.address2=t.address2,this.dialogEditAdd.country=t.country,this.dialogEditAdd.province=t.province,this.dialogEditAdd.city=t.city,this.dialogEditAdd.street=t.street,this.dialogEditAdd.company=t.company,this.dialogEditAdd.phone=t.phone,this.dialogEditAdd.postcode=t.postcode,this.dialogEditAdd.isDefault=1==t.isDefault,this.dialogEditAdd.addressId=t.id),this.dialogEditAdd.isShow=!0},setAdd(){this.getAddList(void 0,this.dialogEditAdd.addressId),this.dialogEditAdd.isShow=!1,this.$elementMessage("save successfully","success")},formatAttr(t){t=t.split("||"),t=t.filter(t=>t&&t.trim());let s=t.join(",");return s}}},n=o,c=(e("d7fe"),e("59e8"),e("e607")),p=Object(c["a"])(n,i,a,!1,null,"ddc97156",null);s["default"]=p.exports},"277e":function(t,s,e){},"3ef2":function(t,s,e){"use strict";var i=e("597a"),a=TypeError;t.exports=function(t,s){if(!delete t[s])throw a("Cannot delete property "+i(s)+" of "+i(t))}},"59e8":function(t,s,e){"use strict";e("277e")},d51e:function(t,s,e){},d7fe:function(t,s,e){"use strict";e("d51e")},fef2:function(t,s,e){"use strict";var i=e("6dec"),a=e("c197"),r=e("1cc9"),d=e("e300"),l=e("3ef2"),o=e("7f69"),n=1!==[].unshift(0),c=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}();i({target:"Array",proto:!0,arity:1,forced:n||c},{unshift:function(t){var s=a(this),e=r(s),i=arguments.length;if(i){o(e+i);var n=e;while(n--){var c=n+i;n in s?s[c]=s[n]:l(s,c)}for(var p=0;p<i;p++)s[p]=arguments[p]}return d(s,e+i)}})}}]);
//# sourceMappingURL=chunk-1ee720ae.7a4097af.js.map