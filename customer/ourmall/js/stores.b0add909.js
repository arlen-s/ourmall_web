(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["stores"],{"0576":function(e,t,o){"use strict";o("1a84")},"1a84":function(e,t,o){},"340e":function(e,t,o){e.exports=o.p+"img/shopify_icon.862d4ffa.png"},"498a":function(e,t,o){"use strict";var a=o("23e7"),i=o("58a8").trim,s=o("c8d2");a({target:"String",proto:!0,forced:s("trim")},{trim:function(){return i(this)}})},"4d6b":function(e,t,o){e.exports=o.p+"img/lazada_icon.895bb3eb.png"},"52ae":function(e,t,o){e.exports=o.p+"img/shopify.7222219d.png"},"60c6":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"contentpanel my-custom-page"},[o("div",{ref:"pageHeader",staticClass:"pagetitle"},[e._m(0),o("div",{staticClass:"right"},[o("el-button",{attrs:{type:"primary"},on:{click:e.openConnectStore}},[e._v("Add a new store")])],1)]),o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pagebody"},[o("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[o("el-col",{attrs:{span:24}},[o("el-card",[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:24}},[o("div",{ref:"pageFilter",staticClass:"page-filter"},[o("el-form",{attrs:{inline:!0,size:"mini"}},[o("el-form-item",[o("el-input",{attrs:{placeholder:"Name"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterGetItem(t)}},model:{value:e.filterParams.name,callback:function(t){e.$set(e.filterParams,"name",t)},expression:"filterParams.name"}})],1),o("el-form-item",{attrs:{label:"Auth Status:"}},[o("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"All Status"},on:{change:e.filterGetItem},model:{value:e.filterParams.isAuth,callback:function(t){e.$set(e.filterParams,"isAuth",t)},expression:"filterParams.isAuth"}},[o("el-option",{attrs:{label:"All Status",value:""}}),o("el-option",{attrs:{label:"Authorized",value:"1"}}),o("el-option",{attrs:{label:"Unauthorized",value:"2"}})],1)],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.filterGetItem}},[e._v("Filter")]),o("el-button",{attrs:{type:"danger"},on:{click:e.clearFilter}},[e._v("Clear")])],1)],1)],1)])],1),o("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:e.items,stripe:"","row-key":"id"}},[o("el-table-column",{attrs:{label:"Store Name",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.shopName&&"3"!=t.row.platform?o("div",[o("shopCate",{attrs:{items:t.row}}),o("el-link",{attrs:{type:"primary",href:"//"+t.row.shopUrl,target:"_blank"}},[e._v(e._s(t.row.shopName))])],1):o("div",[e._v(e._s(t.row.shopName||"---"))])]}}])}),o("el-table-column",{attrs:{label:"Date"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{color:"#909399"}},[e._v(" Creation date: "),o("span",{staticStyle:{color:"#303133"}},[e._v(e._s(t.row.timeCreated?e.moment.unix(t.row.timeCreated).format("ll [at] LTS"):"---"))])]),o("div",{staticStyle:{color:"#909399"}},[e._v(" Auth date: "),o("span",{staticStyle:{color:"#303133"}},[e._v(e._s(t.row.timeAuth?e.moment.unix(t.row.timeAuth).format("ll [at] LTS"):"---"))])])]}}])}),o("el-table-column",{attrs:{label:"Whether to host"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{attrs:{value:Number(t.row.isDeposit),"active-value":1,"inactive-value":2,"active-color":"rgba(69, 219, 94, 1)"},on:{change:function(o){return e.changeDeposit(t.row)}}})]}}])}),o("el-table-column",{attrs:{label:"Status"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticClass:"s-label",class:1==t.row.authStatus?"label-success":"label-warning"},[e._v(e._s(1==t.row.authStatus?"Authorized":"Unauthorized"))])]}}])}),o("el-table-column",{attrs:{label:"Action",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-link",{attrs:{type:"danger"},on:{click:function(o){return e.delStore(t.row)}}},[e._v("Delete")])],1),t.row.vendorName?o("div",[o("el-link",{attrs:{type:"danger"},on:{click:function(o){return e.entrustedRemove(t.row)}}},[e._v("Remove entrusted vendor")])],1):e._e(),o("div",[o("el-link",{attrs:{type:"primary"},on:{click:function(o){return e.connectStoreAgain(t.row)}}},[e._v("Reauthorize")])],1)]}}])})],1)],1)],1)],1),e.items.length?o("el-row",{attrs:{gutter:20}},[o("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[o("div",[o("el-pagination",{attrs:{"current-page":e.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.pageSizes,"page-size":e.rowsPerPage,total:Number(e.total)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e()],1),o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.connectStoreLoading,expression:"connectStoreLoading"}],attrs:{title:e.modiWoo?"Reauthorization":"Add a new store","custom-class":"connectStore",visible:e.connectStoreOpen,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.connectStoreOpen=t}}},[o("el-divider"),o("el-form",{attrs:{"label-position":"left","label-width":"100px"}},[o("el-form-item",{attrs:{label:"Store type:"}},[o("div",{staticClass:"imgList"},[e._l(e.platformArr,(function(t,a){return[e.modiWoo&&"woo"!=a?e._e():o("div",{key:a,staticClass:"shopImg",class:{active:e.activePlatform==a,disable:!t.enabled},on:{click:function(o){return e.selectPlatform(a,t.enabled)}}},[o("img",{style:{opacity:t.enabled?1:.5},attrs:{src:e.shopImgList[a],alt:t.name}}),t.enabled?e._e():o("a",{staticClass:"comingSoon",attrs:{href:"javascript:;"}},[e._v("Coming Soon")])])]}))],2)]),"shopify"==e.activePlatform?o("el-form-item",{attrs:{label:"Store URL:"}},[o("div",[o("el-input",{attrs:{disabled:""!=e.errorMessage,size:"medium",placeholder:"Your store name"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.connectStoreFn(t)}},model:{value:e.shopifyUrl,callback:function(t){e.shopifyUrl=t},expression:"shopifyUrl"}},[o("template",{slot:"prepend"},[e._v("https://")]),o("template",{slot:"append"},[e._v(".myshopify.com")])],2)],1),e.vipData.service?e._e():o("div",[o("i",{staticClass:"el-icon-info"}),o("span",{staticClass:"mg-l-5"},[e._v(e._s(e.$root.$children[0].shopName))]),e._v(" vendor is authorizing the store on Ourmall Dropshipping App, please be noted. ")])]):e._e(),"woo"==e.activePlatform?[o("el-form-item",{attrs:{label:"Store URL:"}},[o("el-input",{staticStyle:{width:"70%"},attrs:{size:"medium",placeholder:"Your Woocommerce store name"},model:{value:e.shopifyUrl,callback:function(t){e.shopifyUrl=t},expression:"shopifyUrl"}})],1),o("el-form-item",{attrs:{label:"ApiKey:"}},[o("el-input",{staticStyle:{width:"50%"},attrs:{size:"medium"},model:{value:e.ApiKey,callback:function(t){e.ApiKey=t},expression:"ApiKey"}})],1),o("el-form-item",{attrs:{label:"ApiSecretKey:"}},[o("el-input",{staticStyle:{width:"50%"},attrs:{size:"medium"},model:{value:e.ApiSecretKey,callback:function(t){e.ApiSecretKey=t},expression:"ApiSecretKey"}})],1)]:e._e(),"shopee"==e.activePlatform?[o("el-form-item",{attrs:{label:"Store Name:"}},[o("el-row",[o("el-col",{attrs:{span:15}},[o("el-input",{attrs:{size:"medium",placeholder:"Your store name"},model:{value:e.shopeeShopName,callback:function(t){e.shopeeShopName=t},expression:"shopeeShopName"}})],1),o("el-col",{attrs:{span:7,offset:1}},[o("el-button",{attrs:{loading:e.authLoading,size:"medium",type:"primary",disabled:!e.shopeeShopName.trim()},on:{click:e.authShopee}},[e._v("Authroize")])],1)],1)],1),o("el-form-item",{attrs:{label:"Auth Code:"}},[o("el-row",[o("el-col",{attrs:{span:15}},[o("el-input",{attrs:{size:"medium",placeholder:"Auth Code"},model:{value:e.shopeeAuthCode,callback:function(t){e.shopeeAuthCode=t},expression:"shopeeAuthCode"}})],1)],1)],1)]:e._e()],2),o("el-divider"),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){e.connectStoreOpen=!1}}},[e._v("Close")]),""==e.errorMessage?o("el-button",{attrs:{size:"small",type:"primary",disabled:e.ableClick},on:{click:e.connectStoreFn}},[e._v("Connect")]):e._e()],1)],1),o("el-dialog",{attrs:{visible:e.depositDialog.isShow,title:e.depositDialog.title,width:"40%","custom-class":"hosted","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.depositDialog,"isShow",t)}},model:{value:e.depositDialog.loading,callback:function(t){e.$set(e.depositDialog,"loading",t)},expression:"depositDialog.loading"}},[1==e.depositDialog.type?[o("el-divider"),o("p",{staticStyle:{margin:"40px 12%",color:"rgba(127, 127, 127, 1)"}},[e._v(' Are you sure you want to cancel the hosting store "'+e._s(e.depositDialog.name)+'", after you close the hosting, the supplier will not be able to actively quote your order! ')]),o("el-divider"),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){e.depositDialog.isShow=!1}}},[e._v("Close")]),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.depositStore(e.depositDialog.row,2)}}},[e._v("Sure")])],1)]:e._e(),2==e.depositDialog.type?[o("div",{staticClass:"tips_success"},[o("div",{staticClass:"icon"},[o("i",{staticClass:"el-icon-check"})]),o("div",{staticClass:"txt"},[e._v(" You have successfully hosted the "+e._s(e.depositDialog.name)+" store. After the successful hosting, your supplier will take the initiative to quote for your pending orders! ")])])]:e._e()],2),o("el-dialog",{attrs:{title:"Set entrusted vendor",visible:e.DialogEntrustSet.isShow,width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){return e.$set(e.DialogEntrustSet,"isShow",t)}}},[o("el-divider"),o("div",{staticStyle:{padding:"0 25px"}},[o("p",{staticClass:"mg-t-20 mg-b-20"},[e._v("Choose a vendor")]),o("div",{style:{minHeight:e.DialogEntrustSet.inputVisible2?"450px":"200px"}},[o("el-popover",{ref:"popoverCustomer",attrs:{"popper-class":"with-shadow with-shadow2",trigger:"manual",width:"300",placement:"bottom"},on:{hide:e.hidepopoverCustomer},model:{value:e.DialogEntrustSet.inputVisible2,callback:function(t){e.$set(e.DialogEntrustSet,"inputVisible2",t)},expression:"DialogEntrustSet.inputVisible2"}},[o("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",staticStyle:{width:"350px"},attrs:{slot:"reference",size:"medium"},on:{focus:function(t){e.DialogEntrustSet.inputVisible2=!e.DialogEntrustSet.inputVisible2}},nativeOn:{keyup:[function(t){return e.changeCustomerName()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeCustomerName()}]},slot:"reference",model:{value:e.DialogEntrustSet.vendorName,callback:function(t){e.$set(e.DialogEntrustSet,"vendorName",t)},expression:"DialogEntrustSet.vendorName"}}),o("div",{staticClass:"tx-center change-customer"},[o("div",{staticStyle:{height:"280px","overflow-y":"scroll"}},[e.vendorData.length?o("div",{staticClass:"mg-t-10"},e._l(e.vendorData,(function(t,a){return t.vendorId?o("div",{key:a+t.id+t.customerName,staticClass:"text customer-item",class:{active:t.active},on:{click:function(o){return e.selectCustomer(t)}}},[o("div",[o("i",{staticClass:"el-icon-s-custom mg-r-5"}),e._v(e._s(t.vendorName?t.vendorName:"---")+" ")]),o("el-link",{staticStyle:{"font-weight":"normal"},attrs:{type:"primary",underline:!1}},[e._v("Select")])],1):e._e()})),0):o("div",{staticClass:"tx-center"},[e._v("No data")])]),o("el-divider"),""==e.DialogEntrustSet.vendorName||e.vendorData.length>0?[o("el-button",{attrs:{type:"primary",plain:""},on:{click:e.openAddVendor}},[o("i",{staticClass:"fa fa-user-plus mg-r-10"}),e._v("Add a new vendor")])]:e._e(),e.DialogEntrustSet.vendorName&&0==e.vendorData.length?[o("el-button",{attrs:{type:"primary",plain:""},on:{click:e.openAddVendor}},[o("i",{staticClass:"fa fa-user-plus mg-r-10"}),e._v('Add "'+e._s(e.DialogEntrustSet.vendorName)+'"')])]:e._e()],2)],1)],1)]),o("el-divider"),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("div",[o("el-button",{attrs:{disabled:e.DialogEntrustSet.loading},on:{click:function(t){e.DialogEntrustSet.isShow=!1,e.DialogEntrustSet.inputVisible2=!1}}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary",disabled:e.DialogEntrustSet.loading,loading:e.DialogEntrustSet.loading},on:{click:e.saveEntrustSet}},[e._v("Save")])],1)])],1),o("el-dialog",{staticClass:"add-vendor-dialog",attrs:{title:"Add a new vendor",visible:e.addVendorDialog.isShow,width:"620px","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.addVendorDialog,"isShow",t)}}},[o("el-divider"),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form",[o("el-form-item",{attrs:{label:"Name","label-width":e.addVendorDialog.labelW,required:""}},[o("el-input",{attrs:{placeholder:"Name","auto-complete":"off"},model:{value:e.addVendorDialog.name,callback:function(t){e.$set(e.addVendorDialog,"name",t)},expression:"addVendorDialog.name"}})],1),o("el-form-item",{attrs:{label:"Email","label-width":e.addVendorDialog.labelW}},[o("el-input",{attrs:{placeholder:"Email","auto-complete":"off"},model:{value:e.addVendorDialog.email,callback:function(t){e.$set(e.addVendorDialog,"email",t)},expression:"addVendorDialog.email"}})],1),o("el-form-item",{attrs:{label:"Remark","label-width":e.addVendorDialog.labelW}},[o("el-input",{attrs:{placeholder:"Remark","auto-complete":"off"},model:{value:e.addVendorDialog.remark,callback:function(t){e.$set(e.addVendorDialog,"remark",t)},expression:"addVendorDialog.remark"}})],1)],1)],1)],1),o("el-divider"),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){e.addVendorDialog.isShow=!1}}},[e._v("Close")]),o("el-button",{attrs:{size:"small",type:"primary",loading:e.addVendorDialog.loading},on:{click:function(t){return e.saveVendor(2)}}},[e._v("Save")])],1)],1),o("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:120}})],1)},i=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"left"},[o("div",{staticClass:"title"},[o("i",{staticClass:"el-icon-s-shop"}),o("h2",[e._v("My Stores")])])])}],s=(o("b0c0"),o("a9e3"),o("ac1f"),o("1276"),o("498a"),o("716a")),r={data:function(){return{apiUserId:localStorage.getItem("c_apiUserId"),userId:"",vipData:{},num:0,loading:!1,tableHeight:400,reSizeTime:0,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("c_storeRowsPerPage")?Number(localStorage.getItem("c_storeRowsPerPage")):10,items:[],shopImgList:{shopify:o("52ae"),woo:o("ec03"),shopee:o("94d6")},shopeeShopName:"",shopeeAuthCode:"",authLoading:!1,shopeeWindow:null,total:0,totalPage:0,filterParams:{name:"",status:"",isAuth:""},filterParamsDefault:"{}",connectStoreLoading:!1,connectStoreOpen:!1,shopifyUrl:"",ApiSecretKey:"",ApiKey:"",errorMessage:"",DialogEntrustSet:{isShow:!1,loading:!1,vendorName:"",vendorId:"",inputVisible2:!1,id:""},vendorData:[],addVendorDialog:{isShow:!1,loading:!1,labelW:"120px",name:"",remark:"",email:"",id:""},addVendorDialogDefault:"{}",platformArr:this.$dict.platformArr,activePlatform:"shopify",modiWoo:!1,shopifyWindow:null,depositDialog:{isShow:!1,loading:!1,type:"",title:"",row:{},name:""},depositDialogDefault:"{}",disabled:"",ableClick:!1}},components:{shopCate:s["a"]},watch:{$route:"gotoPage",connectStoreOpen:function(){this.connectStoreOpen||clearInterval(this.connectStoreWait)}},mounted:function(){var e=this;this.addVendorDialogDefault=JSON.stringify(this.addVendorDialog),this.depositDialogDefault=JSON.stringify(this.depositDialog),this.filterParamsDefault=JSON.stringify(this.filterParams),this.filterParams.isAuth=this.$route.query.isAuth?this.$route.query.isAuth:"",this.getItem(),this.getVendor(),this.getVipDetail(),this.getStatusNews(),this.$route.params.add&&(this.$route.params.add=!1,this.openConnectStore(),this.$route.params.val&&(this.shopifyUrl=this.$route.params.val))," "!==document.domain&&window.addEventListener("message",(function(t){t.data&&"string"===typeof t.data&&(console.log(t.data),e.messageCallback(t.data))}))},beforeDestroy:function(){},methods:{messageCallback:function(e){var t=this;if(e.indexOf("=||=")>-1){var o=e.split("=||=");this.shopeeAuthCode=o[0];var a={code:o[0],name:this.shopeeShopName.trim(),platformId:4,shop_id:o[1]};this.$apiCall("api.ShopifyAccount.authorizationErp",a,(function(e){9999==e.ErrorCode?(t.getItem(),t.$message.success(e.Message),t.shopeeWindow&&t.shopeeWindow.close(),t.connectStoreOpen=!1):t.$message.error(e.Message)}))}},getStatusNews:function(){var e=this;this.$apiCall("api.User.checkLoginStatusNews",{},(function(t){if(9999==t.ErrorCode){console.log(t,"1111");var o=t.Data.Results;o.isAutoJump&&1==o.isAutoJump?e.disabled="disabled":e.disabled=""}else e.$message.error(t.Message)}))},authShopee:function(){var e=this,t={platform:4,shopName:this.shopeeShopName.trim()};this.authLoading=!0,this.$apiCall("api.ShopifyAccount.addOtherAccount",t,(function(t){e.authLoading=!1,9999==t.ErrorCode?(t.Data.Results.url?e.shopeeWindow=window.open(t.Data.Results.url,"popup","width = 600, height = 600"):e.$message.error("error!"),console.log(e.shopeeWindow)):e.$message.error(t.Message)}))},getVipDetail:function(){var e=this;setTimeout((function(){e.userId=e.$store.state.userInfo.id,e.$apiCall("api.Admin.getVipDetail",{userId:e.userId},(function(t){9999==t.ErrorCode&&(e.vipData=t.Data.Results)}))}),500)},selectPlatform:function(e,t){t&&(this.activePlatform=e)},openAddVendor:function(){this.addVendorDialog=JSON.parse(this.addVendorDialogDefault),this.addVendorDialog.name=this.vendorName,this.addVendorDialog.isShow=!0},saveVendor:function(e){var t=this;if(this.addVendorDialog.name){this.addVendorDialog.loading=!0;var o="api.Relationship.addByCustomer",a={name:this.addVendorDialog.name,email:this.addVendorDialog.email,remark:this.addVendorDialog.remark};this.$apiCall(o,a,(function(e){t.addVendorDialog.loading=!1,9999==e.ErrorCode?(t.DialogEntrustSet.vendorName="",t.addVendorDialog.isShow=!1,t.$elementMessage("Customers successfully added","success"),t.getVendor()):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure())}))}else this.$elementMessage("Customer name required","error")},changeCustomerName:function(){var e=this,t=500;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.$showLoading(),e.$apiCall("api.Relationship.findByCustomer",{name:e.DialogEntrustSet.vendorName},(function(t){e.$hideLoading(),9999==t.ErrorCode?e.vendorData=t.Data.Results:(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure())}))}),t)},getVendor:function(){var e=this;this.$apiCall("api.Relationship.findByCustomer",{},(function(t){"9999"==t.ErrorCode?e.vendorData=t.Data.Results:(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure())}))},selectCustomer:function(e){var t=this;this.DialogEntrustSet.vendorName=e.vendorName,this.DialogEntrustSet.vendorId=e.vendorId,setTimeout((function(){t.DialogEntrustSet.inputVisible2=!1}),100)},hidepopoverCustomer:function(){var e=this;setTimeout((function(){e.DialogEntrustSet.inputVisible2=!1}),100)},saveEntrustSet:function(){var e=this,t={id:this.DialogEntrustSet.id,vendorId:this.DialogEntrustSet.vendorId};this.$apiCall("api.ShopifyAccount.bindVendor",t,(function(t){e.DialogEntrustSet.loading=!1,9999==t.ErrorCode?(e.$message({message:"Successfully set",type:"success"}),e.DialogEntrustSet.isShow=!1,e.DialogEntrustSet.inputVisible2=!1,e.getItem(!0)):e.$elementMessage(t.Message,"error")}))},entrustedSet:function(e){var t=this;this.DialogEntrustSet.isShow=!0,this.DialogEntrustSet.vendorName="",this.DialogEntrustSet.vendorId="",this.DialogEntrustSet.id=e.id,setTimeout((function(){t.$refs.saveTagInput.$refs.input.focus()}),300)},entrustedRemove:function(e){var t=this;this.$confirm("Are you sure you want to remove entrusted vendor? ","",{confirmButtonText:"Remove",cancelButtonText:"Cancel",type:"error"}).then((function(){t.$apiCall("api.ShopifyAccount.unbindVendor",{id:e.id},(function(e){9999==e.ErrorCode?(t.$message({message:"Successfully remove",type:"success"}),t.getItem(!0)):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure())}))})).catch((function(){}))},connectStoreAgain:function(e){var t=this;if(2==e.platform)return this.activePlatform="woo",void this.openConnectStore("woo",e.shopUrl);this.shopifyWindow=window.open("/blank.html","shopifyAccount-window",void 0,!0),this.$showLoading();var o={};"1"==e.platform?(this.activePlatform="shopify",o={shopUrl:e.subShopUrl,getAuth:1,fromList:1,platform:e.platform}):"3"==e.platform&&(this.activePlatform="lazada",o={ati:this.$getCookie("_ati"),platform:e.platform}),this.$apiCall("api.ShopifyAccount.addOtherAccount",o,(function(o){if(t.$hideLoading(),"9999"==o.ErrorCode){if("shopify"==t.activePlatform&&(t.shopifyWindow.location=o.Data.Results,t.shopifyUrl=e.subShopUrl,t.connectConfirmStart()),"lazada"==t.activePlatform){var a=o.Data.Results.state;t.shopifyWindow.location=o.Data.Results.url,t.connectConfirmStart(a)}}else t.$elementMessage(o.Message,"error")}))},connectStoreConfirmFn:function(){location.reload()},connectConfirmStart:function(e){var t=this;this.shopifyWindow.closed&&(this.shopifyWindow.close(),this.connectStoreLoading=!1,clearInterval(this.connectStoreWait));var o={};"shopify"==this.activePlatform&&(o.shopUrl=this.shopifyUrl),"lazada"==this.activePlatform&&(o.state=e),this.connectStoreWait=setInterval((function(){t.$apiCall("api.ShopifyAccount.getShopAuthStatus",o,(function(e){"9999"==e.ErrorCode?1==e.Data.Results.status?(clearInterval(t.connectStoreWait),t.shopifyWindow.close(),t.connectStoreLoading=!1,t.connectStoreOpen=!1,t.getItem(),t.$message({message:"Successful store authorization",type:"success",duration:0,showClose:!0})):2==e.Data.Results.status&&(t.shopifyWindow.close(),t.connectStoreLoading=!1,t.connectStoreOpen=!1,t.$elementMessage(e.Data.Results.errorMessage,"error"),clearInterval(t.connectStoreWait)):t.$elementMessage(e.Message,"error")}))}),1e3)},connectStoreFn:function(){var e=this,t={};if("shopify"==this.activePlatform){if(!this.shopifyUrl)return void this.$elementMessage("Please enter Shopify store URL","error");t={shopUrl:this.shopifyUrl,platform:1}}else if("woo"==this.activePlatform){if(!this.shopifyUrl)return void this.$elementMessage("Please enter Woocommerce store URL","error");t={shopUrl:this.shopifyUrl,apiKey:this.ApiKey,apiSecretKey:this.ApiSecretKey,ivc:localStorage.getItem("c_ivc")?localStorage.getItem("c_ivc"):"",utmSource:localStorage.getItem("c_utm"),platform:2}}else if("lazada"==this.activePlatform)t={platform:3,ati:this.$getCookie("_ati")};else if("shopee"==this.activePlatform)return t={platform:4},void this.$message.error("Please fulfill the store info!");this.connectStoreLoading=!0,this.$apiCall("api.ShopifyAccount.addOtherAccount",t,(function(t){if("9999"==t.ErrorCode){if("shopify"==e.activePlatform&&("disabled"==e.disabled?(console.log(11114),e.connectStoreLoading=!1,e.connectStoreOpen=!1,e.getItem(),e.$message({message:"Successful store authorization",type:"success",duration:0,showClose:!0})):(e.shopifyWindow=window.open(t.Data.Results),e.connectConfirmStart())),"lazada"==e.activePlatform){var o=t.Data.Results.state;e.shopifyWindow=window.open(t.Data.Results.url),e.connectConfirmStart(o)}"woo"==e.activePlatform&&(e.getItem(),e.connectStoreOpen=!1,e.$elementMessage("add a new store success","success"))}else e.connectStoreLoading=!1,e.$elementMessage(t.Message,"error")}))},openConnectStore:function(e,t){clearInterval(this.connectStoreWait),this.modiWoo=!1,this.connectStoreOpen=!0,this.connectStoreLoading=!1,this.activePlatform=this.$route.params.platform?this.$route.params.platform:"shopify",this.shopifyUrl="",this.errorMessage="",this.ApiKey=this.ApiSecretKey="","woo"==e&&(this.activePlatform="woo",this.shopifyUrl=t,this.modiWoo=!0)},delStore:function(e){var t=this;this.$confirm("Are you sure you want to delete it? ","",{confirmButtonText:"Delete",cancelButtonText:"Discard",type:"error"}).then((function(){t.$apiCall("api.Invoice.deleteStore",{shopId:e.id},(function(e){9999==e.ErrorCode?(t.$message({message:"Successfully delete",type:"success"}),t.getItem(!0)):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure())}))})).catch((function(){}))},changeDeposit:function(e){console.log(e),1==e.isDeposit?(this.depositDialog=JSON.parse(this.depositDialogDefault),this.depositDialog.type=1,this.depositDialog.title="Close",this.depositDialog.row=e,this.depositDialog.name=e.shopName,this.depositDialog.isShow=!0):this.depositStore(e,1)},depositStore:function(e,t){var o=this;2==t&&(this.depositDialog.loading=!0),this.$apiCall("api.ShopifyAccount.changeDeposit",{id:e.id,isDeposit:t},(function(a){2==t&&(o.depositDialog.loading=!1),9999==a.ErrorCode?(e.isDeposit=t,1==t?(o.depositDialog=JSON.parse(o.depositDialogDefault),o.depositDialog.type=2,o.depositDialog.title="",o.depositDialog.name=e.shopName,o.depositDialog.isShow=!0):(o.depositDialog.isShow=!1,o.$message({message:"Closed successfully",type:"success"}))):(o.$elementMessage(a.Message,"error"),"1002"!=a.ErrorCode&&"1003"!=a.ErrorCode||o.$userFailure())}))},clearFilter:function(){this.filterParams=JSON.parse(this.filterParamsDefault),1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},filterGetItem:function(){1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},getItem:function(e){var t=this;this.loading=!0,this.$apiCall("api.Invoice.findStores",{page:this.page,rowsPerPage:this.rowsPerPage,shopName:this.filterParams.name,authStatus:this.filterParams.isAuth},(function(o){t.loading=!1,9999==o.ErrorCode?(t.items=o.Data.Results,t.total=Number(o.Data.Pagination.totalCount),t.totalPage=Number(o.Data.Pagination.totalPage),t.$getTableHeight(t),e||(t.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0)):t.$message({message:o.Message,type:"error"})}))},toPage:function(e){e!=this.$route.query.page&&this.$router.push({query:{page:e}})},changePageSize:function(e){this.rowsPerPage=e,localStorage.setItem("c_storeRowsPerPage",e),this.getItem()},gotoPage:function(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()}}},l=r,n=(o("0576"),o("2877")),c=Object(n["a"])(l,a,i,!1,null,"81e3b78a",null);t["default"]=c.exports},"716a":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shop"},[1==e.items.platform?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Shopify",placement:"left"}},[a("img",{staticClass:"shopImg",attrs:{src:o("340e")}})]):2==e.items.platform?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Woocommerce",placement:"left"}},[a("img",{staticClass:"shopImg",attrs:{src:o("7e46")}})]):3==e.items.platform?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Lazada",placement:"left"}},[a("img",{staticClass:"shopImg",attrs:{src:o("4d6b")}})]):4==e.items.platform?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Shopee",placement:"left"}},[a("img",{staticClass:"shopImg",attrs:{src:o("e74a")}})]):e._e()],1)},i=[],s={props:["items"],data:function(){return{}},methods:{},components:{}},r=s,l=(o("8d80"),o("2877")),n=Object(l["a"])(r,a,i,!1,null,"7d79ad08",null);t["a"]=n.exports},"7e46":function(e,t,o){e.exports=o.p+"img/woo_icon.bbaca118.png"},"8d80":function(e,t,o){"use strict";o("efe5")},"94d6":function(e,t,o){e.exports=o.p+"img/shopee.58ed2826.jpg"},c8d2:function(e,t,o){var a=o("d039"),i=o("5899"),s="​᠎";e.exports=function(e){return a((function(){return!!i[e]()||s[e]()!=s||i[e].name!==e}))}},e74a:function(e,t,o){e.exports=o.p+"img/shopee_icon.c6765767.png"},ec03:function(e,t,o){e.exports=o.p+"img/woo.4d233337.jpg"},efe5:function(e,t,o){}}]);
//# sourceMappingURL=stores.b0add909.js.map