(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ordersManagement"],{"07ac":function(e,t,a){var i=a("23e7"),o=a("6f53").values;i({target:"Object",stat:!0},{values:function(e){return o(e)}})},"13d5":function(e,t,a){"use strict";var i=a("23e7"),o=a("d58f").left,s=a("a640"),r=a("2d00"),n=a("605d"),l=s("reduce"),c=!n&&r>79&&r<83;i({target:"Array",proto:!0,forced:!l||c},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2141:function(e,t,a){var i={"./n1.png":"79db","./n10.png":"c171","./n12.png":"6b31","./n2.png":"bbde","./n3.png":"955b","./n4.png":"dbe3"};function o(e){var t=s(e);return a(t)}function s(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=s,e.exports=o,o.id="2141"},"3d81":function(e,t,a){},"6f53":function(e,t,a){var i=a("83ab"),o=a("df75"),s=a("fc6a"),r=a("d1e7").f,n=function(e){return function(t){var a,n=s(t),l=o(n),c=l.length,d=0,u=[];while(c>d)a=l[d++],i&&!r.call(n,a)||u.push(e?[a,n[a]]:n[a]);return u}};e.exports={entries:n(!0),values:n(!1)}},a15b:function(e,t,a){"use strict";var i=a("23e7"),o=a("44ad"),s=a("fc6a"),r=a("a640"),n=[].join,l=o!=Object,c=r("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(e){return n.call(s(this),void 0===e?",":e)}})},a242:function(e,t,a){},a4ce:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"contentpanel my-custom-page"},[i("div",{ref:"pageHeader",staticClass:"pagetitle"},[e._m(0),i("div",{staticClass:"right"},[1==e.status||2==e.status?i("el-button",{attrs:{type:"primary",disabled:e.isDisabled},on:{click:e.updateFn}},[e._v(" Update order")]):e._e(),1==e.status?i("el-button",{attrs:{type:"primary"},on:{click:e.ImportFn}},[e._v("Import order")]):e._e(),2!=e.status||2!=e.activeName&&3!=e.activeName?i("el-button",{attrs:{type:"primary"},on:{click:e.exportOrder}},[e._v(" Export order")]):e._e()],1)]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pagebody"},[i("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[i("el-col",{attrs:{span:24}},[i("el-card",[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("div",{ref:"pageFilter",staticClass:"page-filter"},[i("el-form",{attrs:{inline:!0,size:"mini"}},[2!=e.status||2!=e.activeName&&3!=e.activeName?[i("el-form-item",[i("el-input",{attrs:{placeholder:"Your No.",clearable:""},on:{clear:function(t){return e.clearFilter("codeName")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.codeName,callback:function(t){e.$set(e.filterParams,"codeName",t)},expression:"filterParams.codeName"}})],1),i("el-form-item",[i("el-input",{attrs:{placeholder:"Order Number",clearable:""},on:{clear:function(t){return e.clearFilter("orderId")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.orderId,callback:function(t){e.$set(e.filterParams,"orderId",t)},expression:"filterParams.orderId"}})],1),i("el-form-item",[i("el-input",{attrs:{placeholder:"Customer",clearable:""},on:{clear:function(t){return e.clearFilter("receiverName")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.receiverName,callback:function(t){e.$set(e.filterParams,"receiverName",t)},expression:"filterParams.receiverName"}})],1),i("el-form-item",{attrs:{label:"Shop name: "}},[i("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:e.filterItem,clear:function(t){return e.clearFilter("accountIds")}},model:{value:e.filterParams.accountIds,callback:function(t){e.$set(e.filterParams,"accountIds",t)},expression:"filterParams.accountIds"}},e._l(e.storeList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.shopName,value:e.id}})})),1)],1),6==e.status?[i("el-form-item",[i("el-input",{attrs:{placeholder:"Payment Number",clearable:""},on:{clear:function(t){return e.clearFilter("sysCode")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.sysCode,callback:function(t){e.$set(e.filterParams,"sysCode",t)},expression:"filterParams.sysCode"}})],1),i("el-form-item",{attrs:{label:"Created Time"}},[i("el-date-picker",{key:"date2",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(t){return e.clearFilter("date2")},change:e.dateChange2},model:{value:e.filterParams.date2,callback:function(t){e.$set(e.filterParams,"date2",t)},expression:"filterParams.date2"}})],1)]:e._e()]:[i("el-form-item",[i("el-input",{attrs:{placeholder:"Payment Number",clearable:""},on:{clear:function(t){return e.clearFilter("sysCode")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem(t)}},model:{value:e.filterParams.sysCode,callback:function(t){e.$set(e.filterParams,"sysCode",t)},expression:"filterParams.sysCode"}})],1),i("el-form-item",{attrs:{label:"Payment time"}},[i("el-date-picker",{key:"date2",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(t){return e.clearFilter("date2")},change:e.dateChange2},model:{value:e.filterParams.date2,callback:function(t){e.$set(e.filterParams,"date2",t)},expression:"filterParams.date2"}})],1)],i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.filterItem}},[e._v("Filter")]),i("el-button",{attrs:{type:"danger"},on:{click:e.clearFilter}},[e._v("Clear")])],1),i("el-form-item",{staticStyle:{width:"200px"}}),i("el-form-item",{staticClass:"btns-wrap"},[1==e.status&&1==e.activeName?[i("el-button",{attrs:{type:"primary"},on:{click:e.quoteFn}},[e._v("Create a quote ")]),i("el-button",{attrs:{type:"primary"},on:{click:e.quoteCancelFn}},[e._v("Quit quotation ")])]:e._e(),2==e.status&&1==e.activeName?[i("el-button",{attrs:{type:"primary"},on:{click:e.payFn}},[e._v("Bulk payment")]),i("el-button",{attrs:{type:"primary"},on:{click:e.payCancelFn}},[e._v("Cancel payment ")])]:e._e(),4==e.status&&1==e.activeName?[i("el-button",{attrs:{type:"primary"},on:{click:e.syncFn}},[e._v("Manually synced ")])]:e._e(),4!=e.status||2!=e.activeName&&3!=e.activeName?e._e():[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BatchContinuePay(1)}}},[e._v("Continue Pay ")])],4==e.status&&3==e.activeName?[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BatchContinuePay(2)}}},[e._v("Re quote ")])]:e._e()],2)],2)],1),e._l(e.tabList,(function(t,a){return i("el-tab-pane",{key:a,attrs:{name:t.name+""}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(t.title)+" "),i("span",{staticClass:"tx-danger"},[e._v("("+e._s(e.customerAllOrderCntText(t.id))+")")])])])}))],2)],1)],1),1!=e.status&&2!=e.status&&4!=e.status||1!=e.activeName?2==e.status?[i("el-table",{key:"gridTable2",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,"tooltip-effect":"dark","row-key":function(e){return e.id}},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),i("el-table-column",{attrs:{label:"Payment number",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.accountPayment&&t.row.accountPayment.sysCode?t.row.accountPayment.sysCode:"---"))])]}}])}),i("el-table-column",{attrs:{label:"Payment time",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.moment.unix(t.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")||"---"))])]}}])}),i("el-table-column",{attrs:{label:"Payment amount("+e.$showSybmol()+")",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.discountType?i("span",[i("span",[e._v(e._s(t.row.payAmount?e.$exchangeRate(t.row.payAmount):"---")+" ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v(e._s(t.row.totalAmount?e.$exchangeRate(t.row.totalAmount):"---"))])])]):i("span",[e._v(e._s(t.row.realAmount?e.$exchangeRate(t.row.realAmount):"---"))])]}}])}),2==e.activeName?[i("el-table-column",{attrs:{label:"Inventory lock remaining time",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.timeLeft))])]}}],null,!1,1366182696)})]:e._e(),i("el-table-column",{attrs:{label:"Order quantity","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.shopifyOrderCnt?i("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.shopifyOrderCnt(t.row)}}},[e._v(" "+e._s(t.row.shopifyOrderCnt)+" ")]):i("span",[e._v("---")])]}}])}),2==e.activeName?[i("el-table-column",{attrs:{label:"Status",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[[t.row.accountPayment?i("span",[e._v(e._s(e.statusPayArr[t.row.accountPayment.status]?e.statusPayArr[t.row.accountPayment.status].text:"---"))]):i("span",[e._v("---")])]]}}],null,!1,3915929914)})]:e._e(),3==e.activeName?[i("el-table-column",{attrs:{label:"Status",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[[t.row.paymentType?i("span",[e._v(e._s(e.paymentTypeArr[t.row.paymentType]?e.paymentTypeArr[t.row.paymentType].text:"---"))]):i("span",[e._v("---")])]]}}],null,!1,3577770627)})]:e._e(),2==e.activeName?i("el-table-column",{attrs:{label:"Action",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.payCancelFn("row",t.row)}}},[e._v(" Cancel payment ")]),i("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.repayFn(t.row)}}},[e._v(" Repay ")])],1)]}}],null,!1,2213818513)}):e._e()],2)]:[i("el-table",{key:"gridTable3",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,"tooltip-effect":"dark","row-key":function(e){return e.id}},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),i("el-table-column",{attrs:{label:"Your shop order num",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{ref:"popover"+t.row.codeName,attrs:{width:"1000",trigger:"hover",placement:"top-start"}},[i("div",{staticClass:"items"},e._l(t.row.items,(function(a,o){return i("div",{key:t.row.orderId+t.row.codeName+o,staticClass:"d-flex mg-b-15"},[i("img",{attrs:{src:a.imgUrl,width:"80",height:"80"}}),i("div",{staticClass:"mg-l-10"},[i("p",{staticClass:"mg-b-10",staticStyle:{width:"600px"}},[a.vendorProductId?i("el-link",{attrs:{type:"primary",href:"/item/"+a.vendorProductId+"/"+a.vendorProductName+".html",target:"_blank"}},[e._v(" "+e._s(a.vendorProductName)+" ")]):i("span",[e._v(e._s(a.name))])],1),i("p",{staticClass:"mg-b-10"},[2==a.isManage?[i("span",{staticStyle:{width:"350px",display:"inline-block",color:"#F56C6C"}},[e._v("SKU: "+e._s(a.vendorSku+"Unable to purchase"))])]:[1!=a.status?[i("span",{staticStyle:{width:"350px",display:"inline-block",color:"#F56C6C"}},[e._v("SKU: "+e._s(a.vendorSku?a.vendorSku+" Products Off shelf":"null Please make an offer"))])]:[i("span",{staticStyle:{width:"350px",display:"inline-block"}},[e._v("SKU: "+e._s(a.vendorSku||"null Please make an offer"))])]]],2),i("p",[i("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" Shop price："+e._s(t.row.currency)+" "+e._s(Number(a.price).toFixed(2)))]),i("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" Supply unit price： "),a.vendorSku?i("span",[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v("$ "+e._s(Number(a.vendorPrice).toFixed(2)))]:[i("span",[e._v("$ "+e._s(Number((a.amount-a.amount/t.row.productAmount*t.row.couponAmount)/a.quantity).toFixed(2))+" ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v("$ "+e._s(Number(a.vendorPrice).toFixed(2)))])])]],2):i("span",{staticStyle:{color:"#F56C6C"}},[e._v("Please make an offer")])]),i("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[e._v("* "+e._s(a.quantity))]),i("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v("$ "+e._s(Number(a.quantity*a.vendorPrice).toFixed(2)))]:[i("span",[e._v("$ "+e._s(Number(a.amount-a.amount/t.row.productAmount*t.row.couponAmount).toFixed(2))+" ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v("$ "+e._s(Number(a.amount).toFixed(2)))])])]],2),2==a.isManage?i("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"right",color:"red"}},[e._v(" Removed")]):e._e()])])])})),0),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("span",[e._v(e._s(t.row.codeName))])])])]}}])}),i("el-table-column",{attrs:{label:"Order Number",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{ref:"popover"+t.row.orderId,attrs:{width:"1000",trigger:"hover",placement:"top-start"}},[i("div",{staticClass:"items"},e._l(t.row.items,(function(a,o){return i("div",{key:t.row.orderId+t.row.codeName+o,staticClass:"d-flex mg-b-15"},[i("img",{attrs:{src:a.imgUrl,width:"80",height:"80"}}),i("div",{staticClass:"mg-l-10"},[i("p",{staticClass:"mg-b-10",staticStyle:{width:"600px"}},[a.vendorProductId?i("el-link",{attrs:{type:"primary",href:"/item/"+a.vendorProductId+"/"+a.vendorProductName+".html",target:"_blank"}},[e._v(" "+e._s(a.vendorProductName)+" ")]):i("span",[e._v(e._s(a.name))])],1),i("p",{staticClass:"mg-b-10"},[2==a.isManage?[i("span",{staticStyle:{width:"350px",display:"inline-block",color:"#F56C6C"}},[e._v("SKU: "+e._s(a.vendorSku+"Unable to purchase"))])]:[1!=a.status?[i("span",{staticStyle:{width:"350px",display:"inline-block",color:"#F56C6C"}},[e._v("SKU: "+e._s(a.vendorSku?a.vendorSku+" Products Off shelf":"null Please make an offer"))])]:[i("span",{staticStyle:{width:"350px",display:"inline-block"}},[e._v("SKU: "+e._s(a.vendorSku||"null Please make an offer"))])]]],2),i("p",[i("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" Shop price："+e._s(t.row.currency)+" "+e._s(Number(a.price).toFixed(2)))]),i("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" Supply unit price： "),a.vendorSku?i("span",[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v("$ "+e._s(Number(a.vendorPrice).toFixed(2)))]:[i("span",[e._v("$ "+e._s(Number((a.amount-a.amount/t.row.productAmount*t.row.couponAmount)/a.quantity).toFixed(2))+" ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v("$ "+e._s(Number(a.vendorPrice).toFixed(2)))])])]],2):i("span",{staticStyle:{color:"#F56C6C"}},[e._v("Please make an offer")])]),i("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[e._v("* "+e._s(a.quantity))]),i("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v("$ "+e._s(Number(a.quantity*a.vendorPrice).toFixed(2)))]:[i("span",[e._v("$ "+e._s(Number(a.amount-a.amount/t.row.productAmount*t.row.couponAmount).toFixed(2))+" ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v("$ "+e._s(Number(a.amount).toFixed(2)))])])]],2),2==a.isManage?i("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"right",color:"red"}},[e._v(" Removed")]):e._e()])])])})),0),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("span",[e._v(e._s(t.row.orderId||"---"))]),1!=e.status&&1==t.row.isSplit?i("img",{staticStyle:{"margin-left":"10px"},attrs:{src:a("c33b")}}):e._e()])])]}}])}),i("el-table-column",{attrs:{label:"Shop",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.store||"---"))])]}}])}),i("el-table-column",{attrs:{label:"Created Time",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.moment(t.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")||"---"))])]}}])}),i("el-table-column",{attrs:{label:"Shipping address","min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.zip?t.row.shippingJsonInfo.zip:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.address1?t.row.shippingJsonInfo.address1:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.city?t.row.shippingJsonInfo.city:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.province?t.row.shippingJsonInfo.province:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.country?t.row.shippingJsonInfo.country:"---")+" ")]),i("span",[e._v(e._s(t.row.receiverAddress||"---"))])])]}}])}),i("el-table-column",{attrs:{label:"Customer",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.receiverName||"---"))])]}}])}),4!=e.status||2!=e.activeName&&3!=e.activeName?e._e():i("el-table-column",{attrs:{label:"Operate",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[3==e.activeName?i("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.AbnormalContinuePay(t.row,2)}}},[e._v("Re quote")]):e._e()],1),i("div",[i("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.AbnormalContinuePay(t.row,1)}}},[e._v(" Continue Pay")])],1)]}}],null,!1,2332924340)}),1==e.status?[i("el-table-column",{attrs:{label:"Products",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.unBindQuantity||"---"))])]}}],null,!1,580575434)})]:e._e(),3==e.status||5==e.status||6==e.status?[i("el-table-column",{attrs:{label:"Shipping Method",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.trackCompany?t.row.trackCompany+(t.row.trackNumber?":"+t.row.trackNumber+" ["+(t.row.agingDaysBegin?t.row.agingDaysBegin:0)+"-"+(t.row.agingDaysEnd?t.row.agingDaysEnd:0)+"days]":"["+(t.row.agingDaysBegin?t.row.agingDaysBegin:0)+"-"+(t.row.agingDaysEnd?t.row.agingDaysEnd:0)+"days]"):"No logistics"))])]}}],null,!1,2951189836)}),i("el-table-column",{attrs:{label:"Shipping cost("+e.$showSybmol()+")",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.discountType?i("span",[i("span",[e._v("0 ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v(e._s(t.row.trackFee?e.$exchangeRate(t.row.trackFee):"---"))])])]):i("span",[e._v(e._s(t.row.trackFee?e.$exchangeRate(t.row.trackFee):"---"))])]}}],null,!1,3647525611)}),i("el-table-column",{attrs:{label:"pay total("+e.$showSybmol()+")",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.discountType?i("span",[i("span",[e._v(e._s(t.row.payAmount?e.$exchangeRate(t.row.payAmount):"---")+" ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v(e._s(t.row.realAmount?e.$exchangeRate(t.row.realAmount):"---"))])])]):i("span",[e._v(e._s(t.row.realAmount?e.$exchangeRate(t.row.realAmount):"---"))])]}}],null,!1,180338682)})]:e._e(),6==e.status?[i("el-table-column",{attrs:{label:"status",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.statusArr[t.row.status]?e.statusArr[t.row.status].text:"---"))])]}}],null,!1,2321464157)})]:e._e(),1!=e.status?[i("el-table-column",{attrs:{label:"Remark",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("div",[e._v(e._s(t.row.remark||"---"))])])]}}],null,!1,1673961266)})]:e._e()],2)]:[i("el-table",{key:"gridTable",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,"tooltip-effect":"dark","row-key":function(e){return e.id}},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),i("el-table-column",{attrs:{label:"Your shop order num",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{ref:"popover"+t.row.codeName,attrs:{width:"1000",trigger:"hover",placement:"top-start"}},[i("div",{staticClass:"items"},e._l(t.row.items,(function(a,o){return i("div",{key:t.row.orderId+t.row.codeName+o,staticClass:"d-flex mg-b-15"},[i("el-checkbox",{model:{value:a.check,callback:function(t){e.$set(a,"check",t)},expression:"item.check"}}),i("img",{staticClass:"mg-l-10",attrs:{src:a.imgUrl,width:"80",height:"80"}}),i("div",{staticClass:"mg-l-10"},[i("p",{staticClass:"mg-b-10",staticStyle:{width:"800px"}},[a.vendorProductId?i("el-link",{attrs:{type:"primary",href:"/item/"+a.vendorProductId+"/"+a.vendorProductName+".html",target:"_blank"}},[e._v(" "+e._s(a.vendorProductName)+" ")]):i("span",[e._v(e._s(a.name))])],1),i("p",{staticClass:"mg-b-10"},[2==a.isManage?[i("span",{staticStyle:{width:"450px",display:"inline-block",color:"#F56C6C"}},[e._v("SKU: "+e._s(a.vendorSku+"Unable to purchase"))])]:[1!=a.status?[i("span",{staticStyle:{width:"450px",display:"inline-block",color:"#F56C6C"}},[e._v("SKU: "+e._s(a.vendorSku?a.vendorSku+" Products Off shelf":"null Please make an offer"))])]:[i("span",{staticStyle:{width:"450px",display:"inline-block"}},[e._v("SKU: "+e._s(a.vendorSku||"null Please make an offer"))])]],i("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" Weight："+e._s(a.vendorProductWeight||"---")+" g ")])],2),i("p",[i("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" Shop price："+e._s(t.row.currency)+" "+e._s(Number(a.price).toFixed(2)))]),i("span",{staticStyle:{width:"250px",display:"inline-block"}},[e._v(" Supply unit price： "),a.vendorSku?i("span",[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v("$ "+e._s(Number(a.vendorPrice).toFixed(2)))]:[i("span",[e._v("$ "+e._s(Number((a.amount-a.amount/t.row.productAmount*t.row.couponAmount)/a.quantity).toFixed(2))+" ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v("$ "+e._s(Number(a.vendorPrice).toFixed(2)))])])]],2):i("span",{staticStyle:{color:"#F56C6C"}},[e._v("Please make an offer")])]),i("span",{staticStyle:{width:"50px",display:"inline-block","text-align":"left"}},[e._v("* "+e._s(a.quantity))]),i("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v("$ "+e._s(Number(a.quantity*a.vendorPrice).toFixed(2)))]:[i("span",[e._v("$ "+e._s(Number(a.amount-a.amount/t.row.productAmount*t.row.couponAmount).toFixed(2))+" ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v("$ "+e._s(Number(a.amount).toFixed(2)))])])]],2),2==a.isManage?i("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"right",color:"red"}},[e._v(" Removed")]):e._e()])]),2!=a.isManage?i("div",{staticClass:"d-flex",staticStyle:{flex:"1","justify-content":"flex-end","margin-right":"5px"}},[i("el-link",{attrs:{type:"primary"},on:{click:function(i){return e.deleteOrder(a,t.row)}}},[e._v("Delete")])],1):e._e()],1)})),0),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("span",[e._v(e._s(t.row.codeName))])])])]}}],null,!1,3131701297)}),i("el-table-column",{attrs:{label:"Order Number",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{ref:"popover"+t.row.orderId,attrs:{width:"1000",trigger:"hover",placement:"top-start"}},[i("div",{staticClass:"items"},e._l(t.row.items,(function(a,o){return i("div",{key:t.row.orderId+t.row.codeName+o,staticClass:"d-flex mg-b-15"},[i("el-checkbox",{model:{value:a.check,callback:function(t){e.$set(a,"check",t)},expression:"item.check"}}),i("img",{staticClass:"mg-l-10",attrs:{src:a.imgUrl,width:"80",height:"80"}}),i("div",{staticClass:"mg-l-10"},[i("p",{staticClass:"mg-b-10",staticStyle:{width:"600px"}},[a.vendorProductId?i("el-link",{attrs:{type:"primary",href:"/item/"+a.vendorProductId+"/"+a.vendorProductName+".html",target:"_blank"}},[e._v(" "+e._s(a.vendorProductName)+" ")]):i("span",[e._v(e._s(a.name))])],1),i("p",{staticClass:"mg-b-10"},[2==a.isManage?[i("span",{staticStyle:{width:"450px",display:"inline-block",color:"#F56C6C"}},[e._v("SKU: "+e._s(a.vendorSku+"Unable to purchase"))])]:[1!=a.status?[i("span",{staticStyle:{width:"450px",display:"inline-block",color:"#F56C6C"}},[e._v("SKU: "+e._s(a.vendorSku?a.vendorSku+" Products Off shelf":"null Please make an offer"))])]:[i("span",{staticStyle:{width:"450px",display:"inline-block"}},[e._v("SKU: "+e._s(a.vendorSku||"null Please make an offer"))])]],i("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" Weight："+e._s(a.vendorProductWeight||"---")+" g ")])],2),i("p",[i("span",{staticStyle:{width:"200px",display:"inline-block"}},[e._v(" Shop price："+e._s(t.row.currency)+" "+e._s(Number(a.price).toFixed(2)))]),i("span",{staticStyle:{width:"250px",display:"inline-block"}},[e._v(" Supply unit price： "),a.vendorSku?i("span",[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v("$ "+e._s(Number(a.vendorPrice).toFixed(2)))]:[i("span",[e._v("$ "+e._s(Number((a.amount-a.amount/t.row.productAmount*t.row.couponAmount)/a.quantity).toFixed(2))+" ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v("$ "+e._s(Number(a.vendorPrice).toFixed(2)))])])]],2):i("span",{staticStyle:{color:"#F56C6C"}},[e._v("Please make an offer")])]),i("span",{staticStyle:{width:"50px",display:"inline-block","text-align":"left"}},[e._v("* "+e._s(a.quantity))]),i("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[1!=t.row.discountType&&2!=t.row.discountType||2==a.isManage?[e._v("$ "+e._s(Number(a.quantity*a.vendorPrice).toFixed(2)))]:[i("span",[e._v("$ "+e._s(Number(a.amount-a.amount/t.row.productAmount*t.row.couponAmount).toFixed(2))+" ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v("$ "+e._s(Number(a.amount).toFixed(2)))])])]],2),2==a.isManage?i("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"right",color:"red"}},[e._v(" Removed")]):e._e()])]),2!=a.isManage?i("div",{staticClass:"d-flex",staticStyle:{flex:"1","justify-content":"flex-end","margin-right":"5px"}},[i("el-link",{attrs:{type:"primary"},on:{click:function(i){return e.deleteOrder(a,t.row)}}},[e._v("Delete")])],1):e._e()],1)})),0),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("span",[e._v(e._s(t.row.orderId||"---"))]),1!=e.status&&1==t.row.isSplit?i("img",{staticStyle:{"margin-left":"10px"},attrs:{src:a("c33b")}}):e._e()])])]}}],null,!1,3844652404)}),i("el-table-column",{attrs:{label:"Shop",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.store||"---"))])]}}],null,!1,389551764)}),i("el-table-column",{attrs:{label:"Created Time",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.moment(t.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")||"---"))])]}}],null,!1,2873337123)}),i("el-table-column",{attrs:{label:"Shipping address","min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.zip?t.row.shippingJsonInfo.zip:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.address1?t.row.shippingJsonInfo.address1:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.city?t.row.shippingJsonInfo.city:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.province?t.row.shippingJsonInfo.province:"---")+" "+e._s(t.row.shippingJsonInfo&&t.row.shippingJsonInfo.country?t.row.shippingJsonInfo.country:"---")+" ")]),i("span",[e._v(e._s(t.row.receiverAddress||"---"))])])]}}],null,!1,442848476)}),i("el-table-column",{attrs:{label:"Customer",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.receiverName||"---"))])]}}],null,!1,1004791253)}),1==e.status?[i("el-table-column",{attrs:{label:"Products",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.unBindQuantity||"---"))])]}}],null,!1,580575434)})]:e._e(),2==e.status||4==e.status?[i("el-table-column",{attrs:{label:"Shipping Method",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.shippingMethodArr&&t.row.shippingMethodArr.length?[i("el-select",{attrs:{size:"small"},on:{change:function(a){return e.filterShippingMethod(a,t.row)}},model:{value:t.row.shippingMethodId,callback:function(a){e.$set(t.row,"shippingMethodId",a)},expression:"scope.row.shippingMethodId"}},e._l(t.row.shippingMethodArr,(function(e){return i("el-option",{key:e.id,attrs:{label:(e.nameDisplay?e.nameDisplay:e.name)+" ["+(e.agingDaysBegin?e.agingDaysBegin:0)+"-"+(e.agingDaysEnd?e.agingDaysEnd:0)+"days]",value:e.id}})})),1)]:i("div",{staticClass:"tx-middle"},[e._v("--- "),i("i",{staticClass:"el-icon-warning",staticStyle:{"font-size":"20px",cursor:"pointer"},on:{click:function(a){return e.shippedFn(t.row)}}})])]}}],null,!1,3882205632)}),i("el-table-column",{attrs:{label:"Shipping cost("+e.$showSybmol()+")",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.discountType?i("span",[i("span",[e._v("0 ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v(e._s(t.row.shippingMethodItem?e.$exchangeRate(t.row.shippingMethodItem.fee):"---"))])])]):i("span",[e._v(e._s(t.row.shippingMethodItem?e.$exchangeRate(t.row.shippingMethodItem.fee):"---"))])]}}],null,!1,1860389867)})]:e._e(),2==e.status?[i("el-table-column",{attrs:{label:"Total("+e.$showSybmol()+")",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.totalAllAmount?e.$exchangeRate(t.row.totalAllAmount):"---"))])]}}],null,!1,1306358962)})]:e._e(),4==e.status?[i("el-table-column",{attrs:{label:"pay total("+e.$showSybmol()+")",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.discountType?i("span",[i("span",[e._v(e._s(t.row.payAmount?e.$exchangeRate(t.row.payAmount):"---")+" ")]),i("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[i("span",{staticStyle:{color:"#606266"}},[e._v(e._s(t.row.realAmount?e.$exchangeRate(t.row.realAmount):"---"))])])]):i("span",[e._v(e._s(t.row.realAmount?e.$exchangeRate(t.row.realAmount):"---"))])]}}],null,!1,180338682)})]:e._e(),i("el-table-column",{attrs:{label:"Action",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[1==e.status?i("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.quoteFn("row",t.row)}}},[e._v(" Quote ")]):e._e(),2==e.status&&t.row.shippingMethodArr&&t.row.shippingMethodArr.length?i("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.payFn("row",t.row)}}},[e._v(" Pay ")]):e._e(),4==e.status?i("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return e.syncFn("row",t.row)}}},[e._v(" Manually synced ")]):e._e()],1)]}}],null,!1,1660856947)}),1!=e.status?[i("el-table-column",{attrs:{label:"Remark",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("div",[e._v(e._s(t.row.remark||"---"))])])]}}],null,!1,1673961266)})]:e._e()],2)]],2)],1)],1),e.items.length?i("el-row",{attrs:{gutter:20}},[i("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[i("div",[i("el-pagination",{attrs:{"current-page":e.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.pageSizes,"page-size":e.rowsPerPage,total:Number(e.total)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e()],1),i("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:120}}),i("el-dialog",{staticClass:"pay-dialog",attrs:{visible:e.dialogPay.isShow,loading:e.dialogPay.loading,width:"30%","before-close":e.handlePayClose,"close-on-press-escape":!1,"close-on-click-modal":!1,title:"Select Payment Method"}},[i("el-divider"),i("div",{staticClass:"pay-info"},[e.dialogPay.orderNum?i("div",{staticClass:"mg-b-10"},[e._v(" Order Number: "),i("b",[e._v(e._s(e.dialogPay.orderNum))])]):e._e(),e.dialogPay.amount?i("div",[e._v(" Total Amount: "),i("b",{staticClass:"tx-danger"},[e._v(e._s(e.$exchangeRate(e.dialogPay.amount.toFixed(2)))+" "+e._s(e.$showSybmol()))])]):e._e()]),1==e.dialogPay.step?[i("div",{staticClass:"pay-platform"},[i("div",{staticClass:"d-flex title"},[i("el-alert",{attrs:{title:"All transactions are secure and encrypted.",type:"info",closable:!1}})],1),i("div",{staticClass:"platform-select"},[e._l(e.dialogPay.payTypes,(function(t,o){return i("div",{key:t.accountType},[i("a",{class:{active:e.dialogPay.platformType==t.accountType},attrs:{href:"javascript:;"},on:{click:function(a){return e.changePlatform(t.accountType)}}},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"icon-wrap",staticStyle:{width:"150px"}},[i("img",{attrs:{src:t.icon,alt:"",height:"30"}})]),i("span",[e._v("Pay with "+e._s(t.name))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogPay.platformType!=t.accountType,expression:"dialogPay.platformType != type.accountType"}],staticClass:"active"},[i("img",{attrs:{src:a("3143"),alt:"",height:"20"}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogPay.platformType==t.accountType,expression:"dialogPay.platformType == type.accountType"}],staticClass:"active-icon"},[i("img",{attrs:{src:a("f753"),alt:"",height:"20"}})])])])})),e.invoiceInfo&&e.invoiceInfo.relationship&&1==e.invoiceInfo.relationship.bonusStatus?i("div",{class:{dis:0==e.invoiceInfo.relationship.bonus}},[i("a",{class:{active:6==e.dialogPay.platformType},attrs:{href:"javascript:;"},on:{click:function(t){return e.changePlatform(6)}}},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"icon-wrap",staticStyle:{width:"150px"}},[i("img",{attrs:{src:a("2f78"),alt:"",height:"30"}})]),i("span",[e._v("Bonus($"+e._s(Number((e.invoiceInfo.relationship||{}).bonus))+")")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:6!=e.dialogPay.platformType,expression:"dialogPay.platformType != 6"}],staticClass:"active"},[e.invoiceInfo&&e.invoiceInfo.relationship&&e.invoiceInfo.relationship.bonus>0?i("img",{attrs:{src:a("3143"),alt:"",height:"20"}}):i("div",{staticClass:"disable-bonus"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:6==e.dialogPay.platformType&&0!=e.invoiceInfo.relationship.bonus,expression:"dialogPay.platformType == 6 && invoiceInfo.relationship.bonus != 0"}],staticClass:"active-icon"},[i("img",{attrs:{src:a("f753"),alt:"",height:"20"}})])])]):e._e(),0==e.dialogPay.payTypes.length&&e.invoiceInfo&&e.invoiceInfo.relationship&&2==e.invoiceInfo.relationship.bonusStatus?i("div",[e._v(" There is no alternative method of payment ")]):e._e()],2),i("div",{staticClass:"action"},[i("el-button",{staticStyle:{width:"120px","font-size":"18px"},attrs:{loading:e.dialogPay.payLoading,type:"primary",round:""},on:{click:e.orderPay}},[e._v(" Pay ")])],1)])]:e._e(),2==e.dialogPay.step?[i("div",{staticClass:"paying"},[i("i",{staticClass:"mg-r-10 el-icon-loading"}),i("p",[e._v("Please do not close the page during payment")])]),i("div",{staticClass:"close-pay",on:{click:e.closePay}},[i("el-button",{attrs:{type:"info",round:"",plain:""}},[e._v("Close pay")])],1)]:e._e(),3==e.dialogPay.step?[e.dialogPay.msg?i("div",{staticClass:"pay-success error"},[i("i",{staticClass:"el-icon-circle-close"}),i("p",[e._v(" "+e._s(e.dialogPay.msg)+" ")])]):i("div",{staticClass:"pay-success"},[i("i",{staticClass:"el-icon-success"}),i("p",[e._v(" Your order has been successfully paid "),e._v(". ")])]),i("div",{staticClass:"close-pay",on:{click:e.closePay}},[i("el-button",{attrs:{type:"info",round:"",plain:""}},[e._v("Close pay")])],1)]:e._e()],2),i("checkout",{attrs:{data:e.dialogCheckOut},on:{payCheckOut:e.payCheckOut}}),i("underline",{attrs:{data:e.dialogUnderline},on:{submitUnderline:e.submitUnderline}}),i("dlocal",{attrs:{data:e.dialogDlocal},on:{submitDlocal:e.submitDlocal}}),i("checkStock",{attrs:{data:e.dialogCheckStock},on:{continuePay:e.continuePay}}),i("dialogLogistic",{attrs:{dialogLogistic:e.dialogLogistic}}),i("orderCnt",{attrs:{data:e.dialogOrderCnt}}),i("el-dialog",{attrs:{visible:e.abnormalStatus,"before-close":e.abnormalClose,width:"550px"}},[i("div",{staticClass:"abnormal-dialog"},[1!=e.abnormalType||e.canPay?e._e():i("h1",[e._v("The selected orders are abnormal and payment cannot be continued ")]),1==e.abnormalType&&e.canPay?i("h1",[e._v("Payment can continue after excluding the following goods")]):e._e(),2==e.abnormalType?i("h1",[e._v("After removing the off shelf goods, the order will be returned to the price to be quoted")]):e._e(),i("el-table",{attrs:{data:e.abnormalData}},[i("el-table-column",{attrs:{label:"Goods SKU"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.items.vendorSku||"--")+" ")]}}])}),i("el-table-column",{attrs:{label:"Order Number",prop:"codeName"}}),i("el-table-column",{attrs:{label:"Status",prop:"reason"}})],1),i("div",{staticClass:"btn-area"},[e.canPay?i("el-button",{attrs:{size:"small"},on:{click:e.abnormalClose}},[e._v("Cancel")]):e._e(),i("el-button",{attrs:{size:"small",loading:e.abnormalBtnVisible,type:"primary"},on:{click:e.AbnormalReClick}},[e._v(" Confirm")])],1)],1)]),i("el-dialog",{attrs:{title:"Create Order",visible:e.createVisible,"before-close":e.ImportCancel,width:"400px"}},[i("div",{staticClass:"create-order"},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","auto-upload":!1,"file-list":e.uploadfileList,"on-change":e.fileBeforeUpload,action:""}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[i("div",[e._v("点击下载 "),i("a",{staticClass:"template",on:{click:e.downloadFile}},[e._v("订单导入模板")])]),e._v(" 请按规范填写表格，仅支持xlsx格式文件"),i("br"),e._v(" 上传的文件不能超过2M，只处理前99条数据 ")])],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.ImportCancel}},[e._v("取消")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.createUpload}},[e._v("提交")])],1)])],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("i",{staticClass:"el-icon-s-order"}),a("h2",[e._v("Order Management")])])])}],s=(a("99af"),a("4de4"),a("13d5"),a("b0c0"),a("a9e3"),a("b64b"),a("ac1f"),a("5319"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogLogistic.isShow,width:"800px","show-close":!1,title:""},on:{"update:visible":function(t){return e.$set(e.dialogLogistic,"isShow",t)}}},[a("el-row",{staticStyle:{"word-break":"break-word"}},[a("el-row",{staticClass:"tx-center pd-15"},[1==e.dialogLogistic.errorType?a("div",[e._v("The receiving address has no logistics method set")]):e._e(),3==e.dialogLogistic.errorType?a("div",[e._v("The order is below the minimum deliverable weight("+e._s(e.dialogLogistic.min)+"g)")]):e._e(),2==e.dialogLogistic.errorType?a("div",[e._v("The order is below the minimum deliverable volume("+e._s(e.dialogLogistic.min)+"cm"),a("sup",[e._v("3")]),e._v(")")]):e._e(),5==e.dialogLogistic.errorType?a("div",[e._v("The order is higher than the maximum deliverable weight("+e._s(e.dialogLogistic.max)+"g)")]):e._e(),4==e.dialogLogistic.errorType?a("div",[e._v("The order is higher than the maximum deliverable volume("+e._s(e.dialogLogistic.max)+"cm"),a("sup",[e._v("3")]),e._v(")")]):e._e(),6==e.dialogLogistic.errorType?a("div",[e._v("The following product attributes of this order do not meet the attribute requirements of deliverable products")]):e._e(),7==e.dialogLogistic.errorType?a("div",[e._v("The total weight of the goods in this order does not meet the deliverable requirements")]):e._e()]),3==e.dialogLogistic.errorType||5==e.dialogLogistic.errorType?a("el-row",{staticClass:"tx-center pd-15"},[a("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:e.items}},[a("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),a("el-table-column",{attrs:{label:"Weight(g)",prop:"weight"}}),a("el-table-column",{attrs:{label:"Quantity",prop:"number"}}),a("el-table-column",{attrs:{label:"Total weight(g)",prop:"weightTotal"}})],1)],1):e._e(),2==e.dialogLogistic.errorType||4==e.dialogLogistic.errorType?a("el-row",{staticClass:"tx-center pd-15"},[a("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:e.items}},[a("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),a("el-table-column",{attrs:{prop:"volume"}},[a("template",{slot:"header"},[e._v(" Volume(cm"),a("sup",[e._v("3")]),e._v(") ")])],2),a("el-table-column",{attrs:{label:"Quantity",prop:"number"}}),a("el-table-column",{attrs:{prop:"volumeTotal"}},[a("template",{slot:"header"},[e._v(" Total volume(cm"),a("sup",[e._v("3")]),e._v(") ")])],2)],1)],1):e._e(),6==e.dialogLogistic.errorType?a("el-row",{staticClass:"tx-center pd-15"},[a("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:e.items}},[a("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),a("el-table-column",{attrs:{label:"Attribute"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.productType,(function(t,i){return a("div",{key:i},[e._v(" "+e._s(e.$dict.productType[t]?e.$dict.productType[t].text:"")+" ")])}))}}],null,!1,3137592593)})],1)],1):e._e(),a("el-row",{staticClass:"tx-center"},[a("el-button",{staticClass:"mt-15",attrs:{type:"primary"},on:{click:e.closeHandle}},[e._v("I Know")])],1)],1)],1)}),r=[],n=(a("07ac"),{props:["dialogLogistic"],data:function(){return{items:[]}},watch:{"dialogLogistic.items":{handler:function(){this.dialogLogistic.items&&(this.items=Object.values(this.dialogLogistic.items))},deep:!0,immediate:!0}},mounted:function(){},methods:{closeHandle:function(){this.dialogLogistic.isShow=!1,this.dialogLogistic.items=[],this.dialogLogistic.errorType=null,this.dialogLogistic.min="",this.dialogLogistic.max=""}}}),l=n,c=(a("ff63"),a("2877")),d=Object(c["a"])(l,s,r,!1,null,"36628ce9",null),u=d.exports,p=a("9538"),m=a("86f8"),h=a("1ce8"),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.data.loading,expression:"data.loading"}],attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,title:"The following orders are out of stock or the products have been off the shelves, whether to delete these orders and continue to pay",visible:e.data.isShow,width:"800px"},on:{"update:visible":function(t){return e.$set(e.data,"isShow",t)}}},[a("el-divider"),a("div",{staticClass:"pd-x-20 mg-y-30"},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.data.items}},[a("el-table-column",{attrs:{label:"Abnormal SKU",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"d-flex"},[a("img",{attrs:{src:t.row.imgUrl,width:"60",height:"60"}}),a("div",{staticClass:"mg-l-20"},[a("p",[e._v(e._s(t.row.name))]),a("p",[e._v("SPU: "+e._s(t.row.spu))]),a("p",[e._v("SKU: "+e._s(t.row.sku))])])])]}}])}),a("el-table-column",{attrs:{prop:"codeName",label:"Order Number",width:"150"}}),a("el-table-column",{attrs:{prop:"reason",label:"Reason for abnormal case",width:"250"}})],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},on:{click:function(t){e.data.isShow=!1}},slot:"footer"},[a("el-button",[e._v(" Cancel ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.continuePay()}}},[e._v(" Pay ")])],1)],1)],1)},g=[],f={props:["data"],data:function(){return{}},created:function(){},mounted:function(){},methods:{continuePay:function(){this.$emit("continuePay")}}},v=f,b=Object(c["a"])(v,y,g,!1,null,"c7f0fa52",null),w=b.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.data.loading,expression:"data.loading"}],attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,title:"订单信息",visible:e.data.isShow,width:"800px"},on:{"update:visible":function(t){return e.$set(e.data,"isShow",t)}}},[a("el-divider"),a("div",{staticClass:"pd-x-20 mg-y-30"},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.data.items}},[a("el-table-column",{attrs:{prop:"codeName",label:"第三方订单编号",width:"150"}}),a("el-table-column",{attrs:{prop:"orderId",label:"订单编号",width:"200"}}),a("el-table-column",{attrs:{prop:"store",label:"店铺",width:"150"}}),a("el-table-column",{attrs:{prop:"timeCreated",label:"创建时间",width:"250"}})],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},on:{click:function(t){e.data.isShow=!1}},slot:"footer"},[a("el-button",[e._v(" 取消 ")])],1)],1)],1)},k=[],S={props:["data"],data:function(){return{}},created:function(){},mounted:function(){},methods:{}},P=S,C=Object(c["a"])(P,_,k,!1,null,"2706efcc",null),I=C.exports,x={data:function(){return{dialogLogisticDefault:"{}",dialogLogistic:{isShow:!1,errorType:null,items:[],max:"",min:""},details:{},createVisible:!1,abnormalStatus:!1,uploadfileList:[],abnormalSelection:[],abnormalData:[],batchChange:!1,abnormalBtnVisible:!1,abnormalType:0,canPay:!1,loading:!1,tableHeight:400,reSizeTime:0,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("c_ordersRowsPerPage")?Number(localStorage.getItem("c_ordersRowsPerPage")):10,items:[],total:0,totalPage:0,status:this.$route.params.status?Number(this.$route.params.status):1,activeName:"1",tabList:[],storeList:[],checkIds:[],checkItems:[],customerAllOrderCnt:{},filterParams:{date:[],dateFrom:"",dateTo:"",date2:[],dateFrom2:"",dateTo2:"",accountIds:"",orderId:"",codeName:"",receiverName:"",sysCode:""},filterParamsDefault:"{}",dialogPay:{isShow:!1,loading:!1,orderNum:"",amount:"",platformType:"",payLoading:!1,step:1,msg:"",payTypes:[],params:"",openType:""},dialogPayDefault:"{}",dialogCheckStock:{isShow:!1,loading:!1,params:"",openType:"",items:[]},dialogCheckStockDefault:"{}",dialogCheckOut:{isShow:!1,loading:!1,packages:null,orderPay:null,token:""},dialogUnderline:{isShow:!1,loading:!1,paymentId:"",params:"",payAmount:0},dialogDlocal:{isShow:!1,invoiceId:"",loading:!1},dialogOrderCnt:{isShow:!1,items:[]},payTime:0,payAmount:0,newWin:null,invoiceInfo:{id:"",relationship:{bonus:0,bonusStatus:""}},statusArr:{1:{text:"Quotation to be submitted",type:"danger",val:1},2:{text:"Vendor quoted order",type:"warning",val:2},4:{text:"Payment Not Received",type:"warning",val:4},3:{text:"Pending payment",type:"warning",val:3},5:{text:"Waiting for fulfill",type:"warning",val:5},6:{text:"Fulfilled",type:"success",val:6},7:{text:"Completed",type:"success",val:7},8:{text:"Logistics synchronization failed ",type:"info",val:8},9:{text:"Unable to purchase",type:"info",val:9},10:{text:"Products Off shelf",type:"info",val:10},11:{text:"Payment to be completed",type:"warning",val:11},12:{text:"Waiting for fulfill",type:"warning",val:12},14:{text:"Quit quotation",type:"warning",val:14}},statusPayArr:{1:{text:"Pending Payment",type:"danger",val:1},4:{text:"Payment failed",type:"warning",val:4},5:{text:"Vendor Verifying Payment",type:"warning",val:5}},paymentTypeArr:{1:{text:"Vendor Verifying Payment",type:"danger",val:1},4:{text:"Payment result to be returned",type:"warning",val:4}},isDisabled:!1,count:"",timer:null}},components:{checkout:p["a"],dialogLogistic:u,underline:m["a"],dlocal:h["a"],checkStock:w,orderCnt:I},watch:{$route:function(e,t){this.status=this.$route.params.status?Number(this.$route.params.status):1,this.activeName=this.activeName?this.activeName:"1",e.params.status!==t.params.status&&(this.filterParams=JSON.parse(this.filterParamsDefault)),this.gotoPage(),this.gettabList()},status:function(){this.$refs.gridTable.clearSelection(),this.filterParams=JSON.parse(this.filterParamsDefault),this.activeName="1"},activeName:function(){this.$refs.gridTable.clearSelection(),this.toPage(1)}},mounted:function(){var e=this;this.$route.query.type&&(this.activeName=String(this.$route.query.type)),this.getItem(),this.dialogPayDefault=JSON.stringify(this.dialogPay),this.dialogCheckStockDefault=JSON.stringify(this.dialogCheckStock);var t=this.$route.params.status?Number(this.$route.params.status):1,a=this.$route.query.paystatus?Number(this.$route.query.paystatus):1;if(2==t&&"1"==this.activeName&&(2==a||3==a)){var i=localStorage.getItem("c_returnPayId")||"",o=localStorage.getItem("c_returnPaySessionId")||"";2==a&&this.paySuccess(i,o),localStorage.setItem("c_returnPayStatus",a)}window.addEventListener("storage",(function(t){if("returnPayStatus"==t.key&&e.dialogPay.isShow){var a=localStorage.getItem("c_returnPayStatus")||"";2==a?(e.dialogPay.step=3,e.closePayPage()):(e.dialogPay.step=3,e.dialogPay.msg="Payment failed",e.closePayPage())}})),setInterval((function(){}),1e3)},beforeDestroy:function(){},methods:{shippedFn:function(e){this.dialogLogistic.errorType=e.shippingMethodArr.errorType,e.shippingMethodArr.errorSkuList&&(this.dialogLogistic.items=e.shippingMethodArr.errorSkuList),this.dialogLogistic.max=e.shippingMethodArr.max,this.dialogLogistic.min=e.shippingMethodArr.min,this.dialogLogistic.isShow=!0},deleteOrder:function(e,t){var a=this,i=[];t.items.forEach((function(e){e.check&&i.push(e.id)})),0==i.length&&i.push(e.id),this.$confirm("确定删除该商品？","Tips",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$apiCall("api.ShopifyOrder.delshopifyItem",{ids:i},(function(e){9999==e.ErrorCode?(a.getItem(),a.$elementMessage("Delete Successful!","success")):a.$elementMessage(e.Message,"error")}))})).catch((function(){a.$message({type:"info",message:"已取消"})}))},handlePurchaseChange:function(e){var t=this;this.abnormalSelection=[],e.forEach((function(e){t.abnormalSelection.push(e.id)}))},ImportFn:function(){this.createVisible=!0},ImportCancel:function(){this.createVisible=!1},createUpload:function(){var e=this;if(this.uploadfileList.length)if(this.uploadfileList[0].raw.size/1024/1024>2)this.$message({message:"file cannot over 2MB",type:"error"});else{var t=this.uploadfileList[0].raw;this.$showLoading(),0==$("#ifileProCreate").length&&$("body").append('<iframe id="ifileProCreate" style="display:none"></iframe>');var a=function(e){document.getElementById("ifileProCreate").src=e},i="api.ShopifyOrder.importOrderExcel",o={"@file":t};this.$apiCall(i,o,(function(t){"9999"==t.ErrorCode?(e.$elementMessage("Create Success","success"),a(t.Data.Results.file),e.getItem(),e.createVisible=!1,e.uploadfileList=[]):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e)),e.$hideLoading()}))}else this.$elementMessage("Please choose file","error")},downloadFile:function(){var e="/newFile/orders_create.xlsx";0==$("#downloadFile").length&&$("body").append('<iframe id="downloadFile" style="display:none"></iframe>');var t=function(e){document.getElementById("downloadFile").src=e};t(e)},fileBeforeUpload:function(e){this.uploadfileList=[],this.uploadfileList.push(e)},abnormalClose:function(){this.batchChange=!1,this.abnormalStatus=!1,this.abnormalData=[]},AbnormalReClick:function(){var e=this;this.canPay||1!=this.abnormalType?(this.abnormalBtnVisible=!0,this.batchChange?this.$apiCall("api.ShopifyOrder.reOfferOrPay",{ids:this.abnormalSelection,type:this.abnormalType},(function(t){e.abnormalBtnVisible=!1,e.abnormalStatus=!1,9999==t.ErrorCode&&t.Data.Results&&(e.$elementMessage("Change Success","success"),1==e.abnormalType?e.$router.push({path:"/ordersManage/2"}):2==e.abnormalType&&e.$router.push({path:"/ordersManage/1",query:{type:2}}))})):this.$apiCall("api.ShopifyOrder.reOfferOrPay",{ids:[this.details.id],type:this.abnormalType},(function(t){e.abnormalBtnVisible=!1,e.abnormalStatus=!1,9999==t.ErrorCode&&t.Data.Results&&(e.$elementMessage("Change Success","success"),1==e.abnormalType?e.$router.push({path:"/ordersManage/2"}):2==e.abnormalType&&e.$router.push({path:"/ordersManage/1",query:{type:2}}))}))):this.abnormalStatus=!1},BatchContinuePay:function(e){var t=this;this.batchChange=!0,this.abnormalType=e,this.$apiCall("api.ShopifyOrder.checkOfferOrPay",{ids:this.abnormalSelection,type:e},(function(e){9999==e.ErrorCode?(t.canPay=e.Data.Results.isPayFlag,t.abnormalData=e.Data.Results.abnormalSkus,t.abnormalData.length>0?t.abnormalStatus=!0:0==t.abnormalData.length&&2==t.abnormalType?t.$elementMessage("No goods need to be eliminated","error"):0==t.abnormalData.length&&1==t.abnormalType&&t.AbnormalReClick()):t.$elementMessage(e.Message,"error")}))},AbnormalContinuePay:function(e,t){var a=this;this.abnormalType=t,this.details=e,this.$apiCall("api.ShopifyOrder.checkOfferOrPay",{ids:[e.id],type:this.abnormalType},(function(e){9999==e.ErrorCode&&(a.canPay=e.Data.Results.isPayFlag,a.abnormalData=e.Data.Results.abnormalSkus,a.abnormalData.length>0?a.abnormalStatus=!0:0==a.abnormalData.length&&2==a.abnormalType?a.$elementMessage("No goods need to be eliminated","error"):0==a.abnormalData.length&&1==a.abnormalType&&a.AbnormalReClick())}))},show:function(e){var t=this;this.$refs["popover"+e.orderId].showPopper=!0,this.$nextTick((function(){t.$refs["popover"+e.orderId].updatePopper()}))},enter:function(e,t,a){this.show(e)},leave:function(e,t,a){this.$refs["popover"+e.orderId].showPopper=!1},shopifyOrderCnt:function(e){var t=this;this.$showLoading(),this.$apiCall("api.ShopifyOrder.shopifyOrders",{invoiceId:e.id,isAll:!0},(function(e){"9999"==e.ErrorCode?(t.dialogOrderCnt.items=e.Data.Results,t.dialogOrderCnt.isShow=!0):t.$elementMessage(e.Message,"error"),t.$hideLoading()}))},exportOrder:function(){var e=this;this.checkIds.length||this.$elementMessage("Please select an order first","error"),this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var t=function(e){document.getElementById("ifilePro").src=e},a="api.ShopifyOrder.exportShopifyOrder2";this.$apiCall(a,{idList:this.checkIds},(function(a){"9999"==a.ErrorCode?(e.$elementMessage("Successfully","success"),t(a.Data.Results)):(e.$elementMessage(a.Message,"error"),"1002"!=a.ErrorCode&&"1003"!=a.ErrorCode||e.$userFailure(e)),e.$hideLoading()}))},paySuccess:function(e,t){var a=this;localStorage.removeItem("c_returnPayId"),localStorage.removeItem("c_returnPaySessionId"),this.$apiCall("api.ShopifyOrder.returnPay",{id:e,sessionId:t},(function(e){"9999"==e.ErrorCode?(a.$elementMessage("Successfully","success"),a.getItem()):a.$elementMessage(e.Message,"error")}))},filterShippingMethod:function(e,t){var a=this;t.shippingMethodArr.forEach((function(i){i.id==e&&(a.$set(t,"shippingMethodItem",i),a.$set(t,"shippingMethodId",i.id),a.$set(t,"shippingMethodFee",i.fee))})),t.shippingMethodItem?this.$set(t,"totalAllAmount",(t.itemAmount?Number(t.itemAmount):0)+Number(t.shippingMethodItem.fee)):this.$set(t,"totalAllAmount",t.itemAmount?Number(t.itemAmount):0)},updateFn:function(){var e=this;this.$showLoading(),this.$apiCall("api.ShopifyAccount.updateShopifyOrderNow",{},(function(t){"9999"==t.ErrorCode?(e.$elementMessage("Successfully","success"),e.getItem()):e.$elementMessage(t.Message,"error"),e.$hideLoading(),e.updateCountDown()}))},updateCountDown:function(){var e=this,t=60;this.timer||(this.count=t,this.isDisabled=!0,this.timer=setInterval((function(){e.count>0&&e.count<=t?e.count--:(e.isDisabled=!1,clearInterval(e.timer),e.timer=null)}),1e3))},countDown:function(e){var t=this,a=e.timeCreated,i="";e.clock=setInterval((function(){moment.unix(a).format("YYYY-MM-DD HH:mm:ss");var o=moment.unix(a).add(2,"days").format("YYYY-MM-DD HH:mm:ss"),s=moment().format("YYYY-MM-DD HH:mm:ss"),r=moment(o).diff(moment(s));r>0?i=moment.duration(r).days()>0?"".concat(moment.duration(r).hours()+24," : ").concat(moment.duration(r).minutes()," : ").concat(moment.duration(r).seconds()):"".concat(moment.duration(r).hours()," : ").concat(moment.duration(r).minutes()," : ").concat(moment.duration(r).seconds()):(i="null",clearInterval(e.clock)),t.$set(e,"timeLeft",i)}),1e3)},payCheckOut:function(e){var t=this;if(!this.dialogCheckOut.loading){this.dialogCheckOut.loading=!0,this.$Burying({object:"9003",objectId:4});var a={success_url:window.location.origin+"/ordersManage/2?paystatus=2",cancel_url:window.location.origin+"/ordersManage/2?paystatus=3",platformType:4,token:e},i="api.ShopifyOrder.createPay";"repay"==this.dialogPay.openType?(a.id=Object.keys(this.dialogPay.params)[0],i="api.ShopifyOrder.reCreatePay"):a.ids=this.dialogPay.params,this.$apiCall(i,a,(function(e){t.dialogCheckOut.loading=!1,t.dialogCheckOut.isShow=!1,"9999"==e.ErrorCode&&e.Data.Results.url?(t.dialogPay.step=3,"repay"==t.dialogPay.openType?t.paySuccess(a.id,e.Data.Results.sessionId):t.paySuccess(e.Data.Results.id,e.Data.Results.sessionId)):t.$elementMessage("9999"==e.ErrorCode?"fail":e.Message,"error")}))}},submitUnderline:function(e,t){var a=this;this.dialogUnderline.loading=!0;var i={platformType:12,accountPayment:e,voucherUrl:t,paymentId:this.dialogUnderline.paymentId},o="api.ShopifyOrder.createPay";"repay"==this.dialogPay.openType?(i.id=Object.keys(this.dialogPay.params)[0],o="api.ShopifyOrder.reCreatePay"):i.ids=this.dialogPay.params,this.$apiCall(o,i,(function(e){a.dialogUnderline.loading=!1,a.dialogUnderline.isShow=!1,"9999"==e.ErrorCode?(a.dialogPay.step=3,"repay"==a.dialogPay.openType?a.paySuccess(i.id,e.Data.Results.sessionId):a.paySuccess(e.Data.Results.id,e.Data.Results.sessionId)):a.$elementMessage(e.Message,"error")}))},submitDlocal:function(e){var t=this;this.dialogDlocal.loading=!0,this.newWin=window.open(("/my"==this.$root.$children[0].baseUrl?"/my":"")+"/blank.html","pay");var a={methodId:e.methodId,platformType:10,domain:window.location.origin+"/",flow:"REDIRECT",country:e.country,name:e.name,city:e.city,street:e.street,number:e.number,document:e.document,phone:e.phone,email:e.email},i="api.ShopifyOrder.createPay";"repay"==this.dialogPay.openType?(a.id=Object.keys(this.dialogPay.params)[0],i="api.ShopifyOrder.reCreatePay"):a.ids=this.dialogPay.params,this.$apiCall(i,a,(function(e){t.dialogDlocal.loading=!1,t.dialogDlocal.isShow=!1,"9999"==e.ErrorCode&&e.Data.Results.url?(t.newWin.location=e.Data.Results.url,t.dialogPay.step=2):(t.$elementMessage("9999"==e.ErrorCode?"fail":e.Message,"error"),t.newWin.close())}))},orderPay:function(){var e=this;this.$Burying({object:"9003",objectId:this.dialogPay.platformType});var t={platformType:this.dialogPay.platformType,success_url:window.location.origin+"/ordersManage/2?paystatus=2",cancel_url:window.location.origin+"/ordersManage/2?paystatus=3"},a="",i="";switch(this.dialogPay.platformType&&!Number(this.dialogPay.platformType)&&-1!=this.dialogPay.platformType.indexOf("underline")?(i=this.dialogPay.platformType.substring(9),a=12):a=Number(this.dialogPay.platformType),a){case 12:this.dialogUnderline.isShow=!0,this.dialogUnderline.paymentId=i;var o=this.dialogPay.payTypes.filter((function(e){return e.id==i}));this.dialogUnderline.params=o.length&&o[0].params?JSON.parse(o[0].params):"",this.dialogUnderline.payAmount=this.payAmount;break;case 10:this.dialogDlocal.isShow=!0,this.dialogDlocal.invoiceId=this.invoiceInfo.id;break;case 4:this.dialogCheckOut.isShow=!0;break;case 3:this.newWin=window.open(("/my"==this.$root.$children[0].baseUrl?"/my":"")+"/blank.html","pay");break;case 2:this.newWin=window.open(("/my"==this.$root.$children[0].baseUrl?"/my":"")+"/blank.html","pay");break;case 1:break;default:break}if(4!=a&&10!=a&&12!=a){this.dialogPay.payLoading=!0;var s="api.ShopifyOrder.createPay";"repay"==this.dialogPay.openType?(t.id=Object.keys(this.dialogPay.params)[0],s="api.ShopifyOrder.reCreatePay"):t.ids=this.dialogPay.params,this.$apiCall(s,t,(function(a){if(e.dialogPay.payLoading=!1,"9999"==a.ErrorCode)if("repay"==e.dialogPay.openType?localStorage.setItem("c_returnPayId",t.id):localStorage.setItem("c_returnPayId",a.Data.Results.id),localStorage.setItem("c_returnPaySessionId",a.Data.Results.sessionId),6==e.dialogPay.platformType)e.dialogPay.step=3,"repay"==e.dialogPay.openType?e.paySuccess(t.id,a.Data.Results.sessionId):e.paySuccess(a.Data.Results.id,a.Data.Results.sessionId);else{if(1==e.dialogPay.platformType){var i=a.Data.Results,o=Stripe(i.pk);o.redirectToCheckout({sessionId:i.sessionId})}else e.newWin.location=a.Data.Results.url;e.dialogPay.step=2}else e.$elementMessage(a.Message,"error"),e.closePayPage()}))}},changePlatform:function(e){6==e&&0==(this.invoiceInfo.relationship||{}).bonus||(this.$set(this.dialogPay,"platformType",e),this.$Burying({object:"9002",objectId:e}))},openPay:function(e,t){var a=this;this.$showLoading();var i="api.ShopifyOrder.creatPayInvoice",o={};"repay"==t?(o.id=Object.keys(e)[0],i="api.ShopifyOrder.reCreatPayInvoice"):o.ids=e,this.$apiCall(i,o,(function(e){if(a.$hideLoading(),"9999"==e.ErrorCode){var i={type:t,invoice:e.Data.Results.invoice,items:[]};if(localStorage.setItem("accountPayment",e.Data.Results.accountPayment?JSON.stringify(e.Data.Results.accountPayment):""),e.Data.Results.shopifyOrders){for(var o in e.Data.Results.shopifyOrders)i.items.push(Object.assign({},e.Data.Results.shopifyOrders[o],{orderId:o}));localStorage.setItem("needPayOrders",JSON.stringify(i)),a.$router.push({path:"/orderPay"})}else localStorage.removeItem("needPayOrders")}else a.$elementMessage(e.Message,"error")}))},closePay:function(){this.newWin&&this.newWin.close(),this.dialogPay=JSON.parse(this.dialogPayDefault);var e=JSON.parse(JSON.stringify(this.$route.query));delete e.paystatus,this.$router.replace({query:e}),this.getItem()},closePayPage:function(){this.newWin&&this.newWin.close(),localStorage.removeItem("c_returnPayStatus")},handlePayClose:function(){this.dialogPay.isShow=!1},syncFn:function(e,t){"row"==e?this.sync(e,t):this.checkIds.length?this.sync():this.$elementMessage("Please select an order first","error")},sync:function(e,t){var a=this,i=[];"row"==e?i.push(t.id):i=this.checkIds,this.$showLoading(),this.$apiCall("api.ShopifyOrder.setNotAbnormal",{ids:i},(function(e){"9999"==e.ErrorCode?(a.$elementMessage("Successfully","success"),a.getItem()):a.$elementMessage(e.Message,"error"),a.$hideLoading()}))},continuePay:function(){this.openPay(this.dialogCheckStock.params,this.dialogCheckStock.openType)},payFn:function(e,t){"row"==e?this.checkOpenPay(t):this.checkIds.length?this.checkOpenPay():this.$elementMessage("Please select an order first","error")},repayFn:function(e){this.checkOpenPay(e,"repay")},checkOpenPay:function(e,t){var a,i=this,o=0,s={};(e?s[e.id]=e.shippingMethodItem?e.shippingMethodItem.id:"":this.checkItems.forEach((function(e){e.shippingMethodArr&&e.shippingMethodArr.length?s[e.id]=e.shippingMethodItem?e.shippingMethodItem.id:"":o++})),o>0)?this.$elementMessage("No logistics","error"):(a="repay"==t?{invoiceId:e.id}:{ids:s},this.$showLoading(),this.$apiCall("api.ShopifyOrder.checkSkuStock",a,(function(e){i.$hideLoading(),"9999"==e.ErrorCode?(i.payAmount=e.Data.Results.realAmount,e.Data.Results&&e.Data.Results.abnormalSkus&&e.Data.Results.abnormalSkus.length?(i.dialogCheckStock=JSON.parse(i.dialogCheckStockDefault),i.dialogCheckStock.params=s,i.dialogCheckStock.openType=t,i.dialogCheckStock.items=[],e.Data.Results.abnormalSkus.forEach((function(e){e.items&&(e.items.codeName=e.codeName,e.items.reason=e.reason,e.items.lackQuantity=e.lackQuantity,i.dialogCheckStock.items.push(e.items))})),i.dialogCheckStock.isShow=!0):i.openPay(s,t)):i.$elementMessage(e.Message,"error")})))},payCancelFn:function(e,t){var a="Are you sure to abandon payment for the selected order? After abandoning, the order will disappear from the list, which cannot be restored, please operate with caution";"row"==e?(a="Are you sure to abandon payment for the selected order? After abandoning, the order will disappear from the list, which cannot be restored, please operate with caution",this.payCancel(e,a,t)):this.checkIds.length?this.payCancel(e,a):this.$elementMessage("Please select an order first","error")},payCancel:function(e,t,a){var i=this;this.$confirm(t,"",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:""}).then((function(){i.$showLoading(),"row"==e?i.$apiCall("api.ShopifyOrder.cancelPay",{id:a.id},(function(e){"9999"==e.ErrorCode?(i.$elementMessage("Successfully","success"),i.getItem()):i.$elementMessage(e.Message,"error"),i.$hideLoading()})):i.$apiCall("api.ShopifyOrder.cancel",{ids:i.checkIds},(function(e){"9999"==e.ErrorCode?(i.$elementMessage("Successfully","success"),i.getItem()):i.$elementMessage(e.Message,"error"),i.$hideLoading()}))})).catch((function(){}))},quoteFn:function(e,t){"row"==e?this.quote(e,t):this.checkIds.length?this.quote():this.$elementMessage("Please select an order first","error")},quote:function(e,t){var a=this;this.$confirm("Are you sure to initiate a quotation for the selected order?","",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:""}).then((function(){var i=[];"row"==e?i.push(t.id):i=a.checkIds,a.$showLoading(),a.$apiCall("api.ShopifyOrder.commitOffer",{ids:i},(function(e){"9999"==e.ErrorCode?(a.$elementMessage("Successfully","success"),a.getItem()):a.$elementMessage(e.Message,"error"),a.$hideLoading()}))})).catch((function(){}))},quoteCancelFn:function(){var e=this;this.checkIds.length?this.$confirm("Are you sure to abandon the quotation for the selected order? After giving up, it cannot be restored, please operate with caution","",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:""}).then((function(){e.$showLoading(),e.$apiCall("api.ShopifyOrder.cancel",{ids:e.checkIds},(function(t){"9999"==t.ErrorCode?(e.$elementMessage("Successfully","success"),e.getItem()):e.$elementMessage(t.Message,"error"),e.$hideLoading()}))})).catch((function(){})):this.$elementMessage("Please select an order first","error")},handleSelectionChange:function(e){var t=this;this.checkIds=[],this.checkItems=[],e.length&&e.forEach((function(e){t.checkItems.push(e),t.checkIds.push(e.id)}))},dateChange:function(){this.filterParams.date&&this.filterParams.date.length>1?(this.filterParams.dateFrom=moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.dateTo=moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem()):this.clearFilter("date")},dateChange2:function(){this.filterParams.date2&&this.filterParams.date2.length>1?(this.filterParams.dateFrom2=moment(this.filterParams.date2[0]).format("YYYY-MM-DD"),this.filterParams.dateTo2=moment(this.filterParams.date2[1]).format("YYYY-MM-DD"),this.filterItem()):this.clearFilter("date2")},clearFilter:function(e){switch(e){case"codeName":this.filterParams.codeName="";break;case"orderId":this.filterParams.orderId="";break;case"receiverName":this.filterParams.receiverName="";break;case"accountIds":this.filterParams.accountIds="";break;case"date":this.filterParams.date=[],this.filterParams.dateFrom="",this.filterParams.dateTo="";break;case"date2":this.filterParams.date2=[],this.filterParams.dateFrom2="",this.filterParams.dateTo2="";break;case"sysCode":this.filterParams.sysCode="";break;default:this.filterParams=JSON.parse(this.filterParamsDefault);break}this.filterItem()},filterItem:function(e){1==this.$route.query.page?this.getItem():this.$router.push({path:"/ordersManage/".concat(Number(this.status)),query:{page:1}})},getStore:function(){var e=this;this.$apiCall("api.Invoice.findStores",{},(function(t){9999==t.ErrorCode?e.storeList=t.Data.Results:e.$message({message:t.Message,type:"error"})}))},gettabList:function(){switch(this.status){case 1:this.tabList=[{id:1,name:1,title:"Quotation to be submitted"},{id:2,name:2,title:"Vendor quoted order"}];break;case 2:this.tabList=[{id:3,name:1,title:"Pending payment"},{id:22,name:2,title:"Payment to be completed"},{id:23,name:3,title:"Payment has not arrived"}];break;case 3:this.tabList=[{id:5,name:1,title:"Waiting for fulfillment"},{id:6,name:2,title:"Fulfilled"}];break;case 4:this.tabList=[{id:8,name:1,title:"Logistics synchronization failed"},{id:9,name:2,title:"Unable to purchase"},{id:10,name:3,title:"Products Off shelf"}];break;default:this.tabList=[];break}},getCustomerAllOrderCnt:function(){var e=this;this.$apiCall("api.ShopifyOrder.getCustomerAllOrderCnt",{},(function(t){9999==t.ErrorCode?e.customerAllOrderCnt=t.Data.Results:e.$message({message:t.Message,type:"error"})}))},customerAllOrderCntText:function(e){var t=0;return t=22==e?this.customerAllOrderCnt.waitCustomerPayCnt?this.customerAllOrderCnt.waitCustomerPayCnt:0:23==e?this.customerAllOrderCnt.waitVendorConfirmCnt?this.customerAllOrderCnt.waitVendorConfirmCnt:0:this.customerAllOrderCnt[e]?this.customerAllOrderCnt[e]:0,t},getItem:function(e){var t=this;this.getStore(),this.gettabList(),this.getCustomerAllOrderCnt(),this.items=[];var a,i="",o="api.ShopifyOrder.shopifyOrders",s={page:this.page,rowsPerPage:this.rowsPerPage,status:i,timeCreatedFrom:this.filterParams.dateFrom,timeCreatedTo:this.filterParams.dateTo,accountIds:[this.filterParams.accountIds],orderId:this.filterParams.orderId,keywords:this.filterParams.codeName,receiverName:this.filterParams.receiverName},r={page:this.page,rowsPerPage:this.rowsPerPage,status:i,sysCode:this.filterParams.sysCode,dateFrom:this.filterParams.dateFrom2,dateTo:this.filterParams.dateTo2};if(a=s,5==this.status)i=7;else if(6==this.status)i="",a=Object.assign(s,r),a.isAll=!0;else{var n=this.tabList.filter((function(e){return e.name==t.activeName}));i=n[0].id,2==this.status&&(2!=this.activeName&&3!=this.activeName||(i=this.activeName,a=r,o="api.ShopifyOrder.findByInvoice"))}this.loading=!0,a.status=i,this.$apiCall(o,a,(function(a){t.loading=!1,9999==a.ErrorCode?(t.items=a.Data.Results,t.items.forEach((function(e){2==t.status&&1!=t.activeName&&t.countDown(e),e.shippingMethodArr&&e.shippingMethodArr.length&&(t.$set(e,"shippingMethodItem",e.shippingMethodArr[0]),t.$set(e,"shippingMethodId",e.shippingMethodArr[0].id),t.$set(e,"shippingMethodFee",Number(e.shippingMethodArr[0].fee))),t.$set(e,"shippingJsonInfo",e.shippingJson?JSON.parse(e.shippingJson):""),e.items.length&&e.items.forEach((function(e){t.$set(e,"totalPrice",Number(e.vendorPrice)*Number(e.quantity))})),e.shippingMethodItem?t.$set(e,"totalAllAmount",(e.itemAmount?Number(e.itemAmount):0)+Number(e.shippingMethodItem.fee)):t.$set(e,"totalAllAmount",e.itemAmount?Number(e.itemAmount):0)})),t.total=Number(a.Data.Pagination.totalCount),t.totalPage=Number(a.Data.Pagination.totalPage),t.$getTableHeight(t),e||(t.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0)):t.$message({message:a.Message,type:"error"})}))},countTotal:function(e,t){var a=0;return a=e.reduce((function(e,a,i,o){return a[t]?e+a[t]:e}),0),a},toPage:function(e){e!=this.$route.query.page&&this.$router.push({path:"/ordersManage/".concat(Number(this.status)),query:{page:e}})},changePageSize:function(e){this.rowsPerPage=e,localStorage.setItem("c_ordersRowsPerPage",e),this.getItem()},gotoPage:function(){this.page=this.$route.query.page?Number(this.$route.query.page):1,this.getItem()},handleClick:function(e,t){this.filterParams=JSON.parse(this.filterParamsDefault),this.getItem()}}},M=x,T=(a("d8e1"),a("bd3c"),Object(c["a"])(M,i,o,!1,null,"ff7589e0",null));t["default"]=T.exports},bd3c:function(e,t,a){"use strict";a("d5d4")},c33b:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGtmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0MzUyLCAyMDIwLzAxLzMwLTE1OjUwOjM4ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTEyLTI5VDEzOjUzOjU2KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0xMi0yOVQxMzo1ODoyMCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0xMi0yOVQxMzo1ODoyMCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjBhZmZlYzktMjhhNC0wNjQxLTk3NTEtMWEzM2RhNWJlYTlkIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZWNhNGVhYWItYWQzNy0yZjQ5LTlkMjAtMzlmOTQ3MDM0MTQzIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6N2IzOTMyZmMtNzZmMS05ZTQzLWExZjItMTcyOGVjOTZhNzE2Ij4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJTcGxpdCIgcGhvdG9zaG9wOkxheWVyVGV4dD0iU3BsaXQiLz4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdiMzkzMmZjLTc2ZjEtOWU0My1hMWYyLTE3MjhlYzk2YTcxNiIgc3RFdnQ6d2hlbj0iMjAyMS0xMi0yOVQxMzo1Mzo1NiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjYwYWZmZWM5LTI4YTQtMDY0MS05NzUxLTFhMzNkYTViZWE5ZCIgc3RFdnQ6d2hlbj0iMjAyMS0xMi0yOVQxMzo1ODoyMCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgfBp04AAADQSURBVDiNYwyK28BALmAiW+eoZjLAsZMP////f+HS86C4Df9hYMOW6w3tB////x8UtwGC/v//39B+EKIYrobF0kwuOW873Ky+KScYGBiKcizu3v+AZg0vD1vP1PPWp54V5VgEx29kYGBgevLsU0W+GbIiHh7W799/E+Xn+o6j37797m60h/CLcixiw/UWr7xElGYGBoYNW28JCXLBnR2TsW3n/ifEaGaZO8mTgYFh49YbEP7nL7+QGWsX+jMwMBRX74WLwBUwMDAwjmaMoaIZAAa0bJKUrm/sAAAAAElFTkSuQmCC"},d58f:function(e,t,a){var i=a("1c0b"),o=a("7b0b"),s=a("44ad"),r=a("50c4"),n=function(e){return function(t,a,n,l){i(a);var c=o(t),d=s(c),u=r(c.length),p=e?u-1:0,m=e?-1:1;if(n<2)while(1){if(p in d){l=d[p],p+=m;break}if(p+=m,e?p<0:u<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:u>p;p+=m)p in d&&(l=a(l,d[p],p,c));return l}};e.exports={left:n(!1),right:n(!0)}},d5d4:function(e,t,a){},d8e1:function(e,t,a){"use strict";a("3d81")},ff63:function(e,t,a){"use strict";a("a242")}}]);