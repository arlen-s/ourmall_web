(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a7283a9a"],{"169e":function(t,e,a){"use strict";a("bfd7")},bfd7:function(t,e,a){},cd9e:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel my-custom-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[t._m(0),a("div",{staticClass:"right"})]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:"","row-key":"id",height:"650"}},[a("el-table-column",{attrs:{prop:"accountName",label:"Shop Name"}}),a("el-table-column",{attrs:{prop:"customerName",label:"Binding SKUs"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("b",[t._v(t._s(e.row.stock.sku))])])]}}])}),a("el-table-column",{attrs:{label:"$Binding SKU images"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.stock.propertyImage,fit:"fit"}})]}}])}),a("el-table-column",{attrs:{label:"Bound SKU"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.mainProduct?e.row.mainProduct.name:""))]}}])}),a("el-table-column",{attrs:{label:"Bound SKU Images"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.mainProduct.imgsJson?t.row.mainProduct.imgsJson[0]:"",fit:"fit"}})]}}])}),a("el-table-column",{attrs:{label:"operate",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-popconfirm",{key:e.row.id,attrs:{title:"Are you sure you want to delete it?","confirm-button-text":"Confirm","cancel-button-text":"Cancel"},on:{confirm:function(a){return t.cancel(e.row)}}},[a("el-link",{staticStyle:{"margin-left":"5px"},attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("cancel")])],1)],1)]}}])})],1)],1)],1)],1),t.items.length?a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[a("div",[a("el-pagination",{attrs:{"current-page":t.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),a("el-dialog",{attrs:{title:"transaction.New Bound Products",visible:t.dialogVisibleAdd,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleAdd=e},open:function(e){return t.open()}}},[a("div",[a("el-form",{ref:"replyForm",staticClass:"mg-t-20",attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"$Customer Choice","label-width":"150px",required:""}},[a("el-select",{attrs:{filterable:"",remote:"","remote-method":t.remoteMethodCustom,loading:t.selectLoading,placeholder:"please enter CusName",clearable:""},on:{change:function(e){return t.filterGetItem()},clear:t.close},model:{value:t.addShopForm.name,callback:function(e){t.$set(t.addShopForm,"name",e)},expression:"addShopForm.name"}},t._l(t.selectArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.customerName,value:t.customerName}})})),1)],1),a("el-form-item",{attrs:{label:"Add Bound Products","label-width":"150px",required:""}},[a("div",{staticClass:"d-flex"},[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.openSelect("1")}}},[t._v("Select a product")])],1)]),a("el-form-item",{attrs:{label:"quotation.Product Images","label-width":"150px",required:""}},[a("div",{staticClass:"upload"},[t.addShopForm.imgUrl?a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.addShopForm.imgUrl,fit:"cover"}}):a("i",{staticClass:"el-icon-plus"})],1)]),a("el-form-item",{attrs:{label:"quotation.Add Bound Products","label-width":"150px",required:""}},[a("div",{staticClass:"d-flex"},[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.openSelect("2")}}},[t._v("Select a product")])],1)]),a("el-form-item",{attrs:{label:"Binding Product Images","label-width":"150px",required:""}},[a("div",{staticClass:"upload"},[t.addShopForm.imgUrlBuild?a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.addShopForm.imgUrlBuild,fit:"cover"}}):a("i",{staticClass:"el-icon-plus"})],1)])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"mg-t-20"},[a("el-button",{on:{click:t.handleClose}},[t._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.quote}},[t._v("save")])],1)])]),a("selectProduct",{attrs:{data:t.dialogProductList,up:"up"}})],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("i",{staticClass:"el-icon-s-el-icon-s-goods"}),a("h2",[t._v("Bound Product List")])])])}],i=(a("d81d"),a("b0c0"),a("a9e3"),a("159b"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"select-product"},[o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.data.loading,expression:"data.loading"}],attrs:{visible:t.data.isShow,title:t.$t("storeSetting.选择商品"),width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{open:function(e){return t.open()},"update:visible":function(e){return t.$set(t.data,"isShow",e)},close:t.closeDialog}},[o("el-divider"),o("div",[o("el-form",{staticStyle:{"margin-bottom":"10px !important"},attrs:{inline:!0,size:"mini"}},[t.up?t._e():o("el-form-item",[o("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:t.$t("storeSetting.请选择")},on:{change:function(e){return t.filterGetItem("status")}},model:{value:t.filterData.status,callback:function(e){t.$set(t.filterData,"status",e)},expression:"filterData.status"}},[o("el-option",{attrs:{label:t.$t("storeSetting.全部"),value:""}}),o("el-option",{attrs:{label:t.$t("storeSetting.上架"),value:"1"}}),o("el-option",{attrs:{label:t.$t("storeSetting.下架"),value:"2"}})],1)],1),o("el-form-item",[o("el-input",{staticStyle:{width:"160px"},attrs:{clearable:"",size:"mini",placeholder:t.$t("goods.商品名称")},on:{clear:function(e){return t.clearFilter("name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem()}},model:{value:t.filterData.name,callback:function(e){t.$set(t.filterData,"name",e)},expression:"filterData.name"}})],1),o("el-form-item",{staticStyle:{"margin-bottom":"0"}},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.filterGetItem()}}},[t._v(t._s(t.$t("myinvoice.filter")))]),o("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.clearFilter()}}},[t._v(t._s(t.$t("goods.重置")))])],1)],1)],1),o("el-divider"),o("div",{staticClass:"action"},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.goToGoods}},[t._v(t._s(t.$t("storeSetting.管理商品")))]),o("div",{staticClass:"refresh",on:{click:t.getItems}},[o("i",{staticClass:"el-icon-refresh-right"}),o("span",{staticClass:"mg-l-5"},[t._v(t._s(t.$t("storeSetting.刷新")))])])],1),o("el-divider"),o("div"),t.data.item&&t.data.item.length&&null==t.data.variableId?o("el-table",{ref:"productTable",attrs:{data:t.data.item,stripe:"",height:"300px"}},[o("el-table-column",{attrs:{label:"",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.statusIpt?o("el-radio",{staticClass:"none-label",attrs:{label:e.row.id},model:{value:t.productData,callback:function(e){t.productData=e},expression:"productData"}},[t._v(t._s(""))]):t._e()]}}],null,!1,768795816)}),o("el-table-column",{attrs:{label:t.$t("goods.商品图片"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("el-image",{staticStyle:{width:"60px",height:"60px",border:"1px solid #ddd","background-color":"#fff"},attrs:{src:t.row.imgUrl,fit:"contain","scroll-container":".main-scroll .el-scrollbar__wrap","preview-src-list":t.row.imgUrlArr}},[o("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[o("i",{staticClass:"el-icon-picture-outline"})])])]}}],null,!1,2968517507)}),o("el-table-column",{attrs:{label:t.$t("goods.商品名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("p",{staticClass:" tx-ellipsis3",staticStyle:{"line-height":"22px"}},[t._v(t._s(e.row.name))])]}}],null,!1,3350555405)}),o("el-table-column",{attrs:{label:t.$t("storeSetting.状态"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.statusIpt?o("el-tag",[t._v(t._s(t.$t("storeSetting.上架")))]):o("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.$t("storeSetting.下架")))])]}}],null,!1,73026675)})],1):t.data.item&&t.data.item.length&&t.data.variableId?o("div",[o("el-table",{staticClass:"no-hover",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.data.item,height:"300px"}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"","show-header":!1,data:e.row.stocks}},[o("el-table-column",{attrs:{label:t.$t("orders.select"),width:"55"},scopedSlots:t._u([{key:"default",fn:function(a){return[o("el-radio",{attrs:{label:a.row.sku},on:{change:function(o){return t.changeHandler(a.row.sku,e.row)}},model:{value:t.tableRadio,callback:function(e){t.tableRadio=e},expression:"tableRadio"}},[o("i")])]}}],null,!0)}),o("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"d-flex"},[o("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.row.propertyImage,fit:"cover"}}),o("div",{staticClass:"mg-l-20"},[o("p",[t._v(t._s(e.row.name))]),o("p",[t._v("SKU: "+t._s(e.row.sku))])])],1)]}}],null,!0)})],1)]}}])}),o("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"d-flex"},[o("img",{attrs:{src:e.row.imgUrl,width:"60",height:"60"}}),o("div",{staticClass:"mg-l-20"},[o("p",[t._v(t._s(e.row.name))]),o("p",[t._v("SPU: "+t._s(e.row.sku))])])])]}}])})],1)],1):o("div",{staticClass:"no-data"},[o("img",{attrs:{src:a("f4f0")}}),o("div",[t._v(t._s(t.$t("storeSetting.暂无数据"))+"，"),o("span",{on:{click:t.goToGoods}},[t._v(t._s(t.$t("storeSetting.去添加商品")))])])]),o("div",{ref:"tableFooter",staticStyle:{margin:"10px 0 20px"}},[t.data.item&&t.data.item.length?o("el-row",{attrs:{gutter:20}},[o("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[o("div",[o("el-pagination",{attrs:{small:"","current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSize,"pager-count":Number(5),"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),o("el-divider"),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeDialog}},[t._v(t._s(t.$t("storeSetting.取消")))]),o("el-button",{attrs:{type:"primary",disabled:t.data.variableId?!t.tableRadio:!t.productData},on:{click:t.AddGoods}},[t._v(t._s(t.$t("storeSetting.添加")))])],1)],1)],1)}),r=[],l=a("5530"),n={props:["data","up"],data:function(){return{host:location.host,productItem:{},productData:"",filterData:{name:"",status:""},showDialog:!1,tableRadio:"",defaultFilterData:"{}",pageSize:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("".concat(this.$route.name,"RowsPerPage"))?Number(localStorage.getItem("".concat(this.$route.name,"RowsPerPage"))):10,total:0,totalPage:0,loading:!1}},mounted:function(){this.up&&(this.filterData.status=1),this.getItems(),this.defaultFilterData=JSON.stringify(this.filterData)},watch:{$route:"gotoPage","data.menuData":{deep:!0,handler:function(){this.data.menuData.urlData&&(this.productData=this.data.menuData.urlData.id)}}},methods:{open:function(){this.showDialog=this.data.isShow,console.log(this.data.item,"data.item")},getItems:function(){var t=this;this.loading=!0,this.$apiCall("api.VendorShop.vendorFindProducts",{page:this.page,rowsPerPage:this.rowsPerPage,name:this.filterData.name,status:this.filterData.status},(function(e){t.tableRadio="",t.loading=!1,9999==e.ErrorCode?(t.data.item=e.Data.Results.products.map((function(t){return t.imgUrlArr=JSON.parse(t.imgUrlJson),t.statusIpt="1"==t.status,t})),t.total=Number(e.Data.Pagination.totalCount),t.totalPage=Number(e.Data.Pagination.totalPage),t.$refs.productTable&&(t.$refs.productTable.bodyWrapper.scrollTop=0)):t.$message({message:e.Message,type:"error"})}))},changeHandler:function(t,e){this.productItem=e,console.log(this.tableRadio,"vcvsdf"),console.log(e)},filterGetItem:function(){this.page=1,this.productData="",this.getItems()},clearFilter:function(t){switch(t){case"name":this.filterData.name="";break;default:this.filterData=JSON.parse(this.defaultFilterData)}"none"!=t&&this.toPage(1)},AddGoods:function(){var t=this;this.productItem?(this.data.item.forEach((function(e){e.id==t.productData&&(t.productItem=e)})),"1"==this.data.type?(this.$parent.addShopForm.mainProductId=this.productItem.id,this.$parent.addShopForm.imgUrl=this.productItem.imgUrl,this.$parent.addShopForm=Object(l["a"])({},this.$parent.addShopForm)):(this.$parent.addShopForm.productId=this.productItem.id,this.$parent.addShopForm.imgUrlBuild=this.productItem.imgUrl,this.$parent.addShopForm.sku=this.tableRadio,this.$parent.setting=Object(l["a"])({},this.$parent.setting)),this.closeDialog()):this.$message({message:"请选择一件商品",type:"error"})},goToGoods:function(){this.$router.push("/goods-mgr/all")},gotoPage:function(){var t=this;this.page=this.$route.query.page?this.$route.query.page:1,this.$nextTick((function(){t.getItems()}))},toPage:function(t){t!=this.$route.query.page?this.$router.push({query:{page:t,cid:this.$route.query.cid,id:this.$route.query.id}}):this.getItems()},changePageSize:function(t){this.rowsPerPage=t,localStorage.setItem("".concat(this.$route.name,"RowsPerPage"),t),this.getItems()},closeDialog:function(){this.page=1,this.productData="",this.productItem={},this.tableRadio="",this.filterData=JSON.parse(this.defaultFilterData),this.data.isShow=!1}},components:{}},d=n,c=(a("169e"),a("2877")),u=Object(c["a"])(d,i,r,!1,null,"1b3dcfaf",null),m=u.exports,p={data:function(){return{loading:!1,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("myCustomRowsPerPage")?Number(localStorage.getItem("myInvoiceRowsPerPage")):10,items:[],total:0,totalPage:0,dialogVisibleAdd:!1,selectLoading:!1,selectArr:[],addShopForm:{name:"",imgUrlBuild:"",imgUrl:"",customerId:"",mainProductId:"",productId:"",sku:""},dialogProductList:{item:null,items:[],isShow:!1,variableId:null,type:1}}},components:{selectProduct:m},watch:{},mounted:function(){this.getItem()},methods:{getItem:function(){var t=this;this.loading=!0,this.$apiCall("api.ShopifyProductBundling.getList",{page:this.page,rowsPerPage:this.rowsPerPage},(function(e){t.loading=!1,9999==e.ErrorCode?(t.items=e.Data.Results,t.total=Number(e.Data.Pagination.totalCount),t.totalPage=Number(e.Data.Pagination.totalPage)):t.$message({message:e.Message,type:"error"})}))},toPage:function(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},open:function(){this.dialogVisibleAdd=!0},handleClose:function(){this.addShopForm={name:"",imgUrlBuild:"",imgUrl:"",customerId:"",mainProductId:"",productId:"",sku:""},this.dialogVisibleAdd=!1},changePageSize:function(t){this.rowsPerPage=t,localStorage.setItem("myCustomRowsPerPage",t),this.getItem()},filterGetItem:function(){var t=this;this.selectArr.forEach((function(e){e.customerName==t.addShopForm.name&&(t.addShopForm.customerId=e.customerId)}))},close:function(){this.selectArr=[]},cancel:function(t){var e=this;this.$apiCall("api.ShopifyProductBundling.delBunding",{id:t.id},(function(t){9999==t.ErrorCode?e.getItem():e.$message({message:t.Message,type:"error"})}))},remoteMethodCustom:function(t){var e=this;this.selectArr=[],t&&(this.selectLoading=!0,this.$apiCall("api.Relationship.findByVendor",{name:t},(function(t){e.selectLoading=!1,9999==t.ErrorCode?e.selectArr=t.Data.Results:e.$message({message:t.Message,type:"error"})})))},getProduct:function(){var t=this;this.$apiCall("api.VendorShop.vendorFindProducts",{status:1,page:1,rowsPerPage:10},(function(e){if(9999==e.ErrorCode){var a=e.Data.Results.products.map((function(t){return t.imgUrlArr=JSON.parse(t.imgUrlJson),t.statusIpt="1"==t.status,t}));console.log(a,"tempArr"),a.forEach((function(e){e.stocks&&e.stocks.length&&e.stocks.forEach((function(a){t.$set(a,"name",e.name),t.dialogProductList.items.push(a)})),t.dialogProductList.item.push(e)}))}else t.$message({message:e.Message,type:"error"})}))},openSelect:function(t){this.getProduct(),this.dialogProductList.variableId=2==t?21:null,this.dialogProductList.type=t,this.dialogProductList.isShow=!0},quote:function(){var t=this;this.addShopForm.customerId?this.addShopForm.mainProductId&&this.addShopForm.productId?this.$apiCall("api.VendorShopProductBundling.addBunding",{customerId:this.addShopForm.customerId,mainProductId:this.addShopForm.mainProductId,productId:this.addShopForm.productId,sku:this.addShopForm.sku},(function(e){9999==e.ErrorCode?(t.addShopForm={name:"",imgUrlBuild:"",imgUrl:"",customerId:"",mainProductId:"",productId:"",sku:""},t.dialogVisibleAdd=!1,t.getItem()):t.$message({message:e.Message,type:"error"})})):this.$message({message:"Please select a product",type:"error"}):this.$message({message:"Please select a client",type:"error"})}}},g=p,h=(a("ce00"),Object(c["a"])(g,o,s,!1,null,"17cda4d7",null));e["default"]=h.exports},ce00:function(t,e,a){"use strict";a("ef08")},ef08:function(t,e,a){},f4f0:function(t,e,a){t.exports=a.p+"img/noData.46b81b49.png"}}]);
//# sourceMappingURL=chunk-a7283a9a.a6740fd3.js.map