(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ImportList"],{1101:function(t,e,i){"use strict";i("5dac")},"22b9":function(t,e,i){},"5dac":function(t,e,i){},"82e3":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel import-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"r1"},[t._m(0),e("div",{staticClass:"right"},[e("el-button",{attrs:{size:"small",icon:"el-icon-setting"},on:{click:t.openPushSetting}},[t._v("Push Setting")])],1)]),e("div",{staticClass:"r2"},[e("el-alert",{attrs:{type:"warning"}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v(" You can import and manage your AliExpress / Amazon products here before publishing them to your Shopify store. You can publish a product to different stores and add multiple tags to each products. Click "),e("router-link",{attrs:{to:{name:"article",query:{id:12}},target:"_blank"}},[t._v("here")]),t._v(" to leam more ")],1)])],1),e("div",{staticClass:"r3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.importUrl,expression:"importUrl"}],attrs:{type:"text",placeholder:'Import Aliexpress / Amazon product URL here and click "Import Product"'},domProps:{value:t.importUrl},on:{input:function(e){e.target.composing||(t.importUrl=e.target.value)}}}),e("el-button",{attrs:{type:"primary",loading:t.loadingImport},on:{click:t.importPorduct}},[t._v("Import Product")])],1),e("div",{staticClass:"r4"},[0!=t.taskList.length?e("div",[e("span",[t._v("Current Import Task: "+t._s(t.taskList.length))]),e("el-popover",{staticStyle:{padding:"0px"},attrs:{placement:"bottom",trigger:"manual",width:"400"},model:{value:t.taskListShow,callback:function(e){t.taskListShow=e},expression:"taskListShow"}},[e("div",{staticStyle:{width:"100%",height:"100%"}},t._l(t.taskList,(function(i,s){return e("div",{key:i.id,staticClass:"d-flex",staticStyle:{"margin-bottom":"10px"}},[e("router-link",{staticClass:"mg-r-10",staticStyle:{width:"100px"},attrs:{to:{path:"/task-list",query:{id:i.id}}}},[t._v("Import Task"+t._s(s+1))]),i.doneCnt/i.allCnt*100>=0&&i.doneCnt/i.allCnt*100<=100?e("el-progress",{staticStyle:{width:"70%"},attrs:{percentage:parseInt(i.doneCnt/i.allCnt*100)}}):e("el-progress",{staticStyle:{width:"70%"},attrs:{percentage:0}}),e("i",{staticClass:"el-icon-error",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.delitem(i)}}})],1)})),0),t.taskListShow?e("el-link",{staticClass:"mg-l-10",staticStyle:{"margin-bottom":"4px"},attrs:{slot:"reference",type:"primary"},on:{click:function(e){t.taskListShow=!t.taskListShow}},slot:"reference"},[t._v("Close")]):e("el-link",{staticClass:"mg-l-10",staticStyle:{"margin-bottom":"4px"},attrs:{slot:"reference",type:"primary"},on:{click:function(e){t.taskListShow=!t.taskListShow}},slot:"reference"},[t._v("Details")])],1)],1):e("div"),e("el-button",{attrs:{type:"primary"}},[e("router-link",{attrs:{to:"/list-history",tag:"span"}},[t._v("View History")])],1)],1)]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody mg-b-20"},[e("el-card",[e("el-row",{attrs:{gutter:20}},[e("div",{ref:"pageFilter",staticClass:"page-filter"},[e("div",{staticClass:"left"},[e("el-checkbox",{staticStyle:{"margin-right":"15px"},attrs:{value:t.AllChecked},on:{change:function(e){return t.changeAllItems(e)}}},[t._v("All")]),e("el-button",{attrs:{type:"primary",size:"mini",loading:t.pushLoading,id:"importPush"},on:{click:function(e){return t.batItems("push")}}},[e("span",{attrs:{id:"importPushInner"}},[t._v("Push")])]),e("el-button",{attrs:{type:"success",size:"mini",loading:t.exportLoading},on:{click:function(e){return t.batItems("export")}}},[t._v("Export")]),e("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"danger",size:"mini",loading:t.delLoading},on:{click:function(e){return t.batItems("del")}}},[t._v("Delete")]),e("el-dropdown",{ref:"tagMgt",attrs:{trigger:"click"}},[e("el-button",{attrs:{size:"mini"}},[t._v(" Add Tags "),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("div",{staticClass:"add-tags-wrap"},[e("div",{staticClass:"header"},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.openTagMgt}},[t._v("+ Tag management")])],1),e("div",{staticClass:"check-wrap"},t._l(t.tags,(function(i){return e("el-checkbox",{key:i.id,model:{value:i.checked,callback:function(e){t.$set(i,"checked",e)},expression:"tag.checked"}},[t._v(t._s(i.name))])})),1),e("div",{staticClass:"footer"},[e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.removeCheckedTags()}}},[t._v("Clear")]),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.batItems("addTags")}}},[t._v("Confirm")])],1)])])],1)],1),e("div",{staticClass:"right"},[e("el-dropdown",{ref:"filterDropdown",staticClass:"filter-dropdown",attrs:{trigger:"click"}},[e("el-button",{attrs:{size:"mini"}},[t._v(" Filter "),t.filterNum?e("span",{staticClass:"filter-num"},[t._v(t._s(t.filterNum))]):t._e(),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{staticStyle:{"max-width":"300px"},attrs:{slot:"dropdown"},slot:"dropdown"},[e("div",{staticClass:"filter-wrap"},[e("div",{staticClass:"filter-stores-wrap"},[e("h3",[t._v("Filter by stores")]),e("ul",t._l(t.stores,(function(i){return e("li",{key:i.id},[e("el-checkbox",{model:{value:i.fChecked,callback:function(e){t.$set(i,"fChecked",e)},expression:"store.fChecked"}},[t._v(t._s(i.shopName))])],1)})),0)]),e("div",{staticClass:"filter-tags-wrap"},[e("h3",[t._v("Filter by tags")]),t._l(t.tags,(function(i){return e("el-checkbox",{key:i.id,model:{value:i.fChecked,callback:function(e){t.$set(i,"fChecked",e)},expression:"tag.fChecked"}},[t._v(" "+t._s(i.name)+" ")])}))],2),e("div",{staticClass:"footer"},[e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.clearFilter()}}},[t._v("Clear")]),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.filterGetItem}},[t._v("Confirm")])],1)])])],1)],1)])]),e("el-row",{ref:"gridTable",attrs:{gutter:10}},[t.items.length?t._e():e("el-col",{attrs:{span:24}},[e("p",{staticStyle:{"margin-top":"25px","font-size":"16px",color:"#909399","text-align":"center"}},[t._v(" no product ")])]),t._l(t.items,(function(i){return e("el-col",{key:i.id,staticStyle:{position:"relative","margin-bottom":"20px"},attrs:{sm:12,md:8,lg:6,xl:4}},["1"!=i.status?e("div",{staticClass:"disabled-mask"},[e("span",[t._v("Sold Out")])]):t._e(),e("div",{staticClass:"product-box"},[e("el-checkbox",{staticClass:"check-item",attrs:{disabled:"1"!=i.status},model:{value:i.checked,callback:function(e){t.$set(i,"checked",e)},expression:"item.checked"}}),i.accounts.length?e("div",{staticClass:"p-title"},[e("span",[t._v("Pushed to "+t._s(i.accounts.length)+" store(s)")])]):t._e(),e("div",{staticClass:"img-wrap"},[e("el-image",{staticStyle:{position:"absolute",width:"100%",height:"100%"},attrs:{fit:"cover",src:i.mainImg,"preview-src-list":[i.mainImg]}})],1),e("div",{staticClass:"info"},[e("p",{staticClass:"name tx-ellipsis2"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.editProduct(i)}}},[t._v(t._s(i.name))])]),i.stocks.length?e("div",{staticClass:"price tx-ellipsis1"},[t._v(" Cost price: "),e("span",[e("span",{staticStyle:{"font-size":"13px"}},[t._v(t._s(i.stocks[0].currency?i.stocks[0].currency:"USD"))]),t._v(" "+t._s(t.showPrice(i)))])]):t._e()]),"1"==i.status?e("div",{staticClass:"bottom-action"},[e("div",[e("a",{attrs:{href:"javascript:;",title:"Edit"},on:{click:function(e){return t.editProduct(i)}}},[e("i",{staticClass:"el-icon-edit"})])]),e("div",[e("a",{attrs:{href:"javascript:;",title:"Delete"},on:{click:function(e){return t.delItem([i.id])}}},[e("i",{staticClass:"el-icon-delete"})])]),i.tags.length?e("div",[e("el-popover",{attrs:{placement:"top",width:"260"},model:{value:i.tagsVisible,callback:function(e){t.$set(i,"tagsVisible",e)},expression:"item.tagsVisible"}},[e("div",t._l(i.tags,(function(s){return e("el-tag",{key:s.id,staticStyle:{"margin-bottom":"5px"},attrs:{closable:"",size:"mini"},on:{close:function(e){return t.removeItemTag(i,s)}}},[t._v(" "+t._s(s.name)+" ")])})),1),e("a",{attrs:{slot:"reference",href:"javascript:;",title:"Tags"},slot:"reference"},[e("i",{staticClass:"el-icon-price-tag"})])])],1):t._e(),e("div",{on:{click:function(e){return t.viewDetail(i.itemId)}}},[148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?e("a",{attrs:{href:`/item/${i.itemId}/${i.name?i.name.replace(/\s+/g,"-").replace(/[^\w]/g,"_"):"_"}.html`,target:"_blank",title:"Origin url"}},[t._v("> "),e("i",{staticClass:"el-icon-link"})]):e("a",{attrs:{href:`/itemOld/${i.itemId}/${i.name?i.name.replace(/\s+/g,"-").replace(/[^\w]/g,"_"):"_"}.html`,target:"_blank",title:"Origin url"}},[e("i",{staticClass:"el-icon-link"})])])]):t._e(),e("div",{staticClass:"push-warp"},[e("el-button",{staticClass:"import-list-push-to-store",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.singPush(i)}}},[e("span",{staticClass:"import-list-push-to-store"},[t._v("Push To Store")])])],1)],1)])}))],2)],1)],1),t.items.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",{staticStyle:{"margin-bottom":"30px"}},[e("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e(),e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogEditProduct.loading,expression:"dialogEditProduct.loading"}],staticClass:"dialog-edit",style:{overflow:t.dialogEditProduct.loading?"hidden":"auto"},attrs:{title:"Edit Product",visible:t.dialogEditProduct.isShow},on:{"update:visible":function(e){return t.$set(t.dialogEditProduct,"isShow",e)},opened:function(e){t.loading=!1}}},[e("div",{staticClass:"tab-wrap"},[e("el-tabs",{staticStyle:{overflow:"hidden"},attrs:{type:"border-card"},on:{"tab-click":t.tabClick},model:{value:t.dialogEditProduct.activeTab,callback:function(e){t.$set(t.dialogEditProduct,"activeTab",e)},expression:"dialogEditProduct.activeTab"}},[e("el-tab-pane",{attrs:{label:"Product"}},[e("div",{staticClass:"tab-product"},[e("div",{staticClass:"left"},[e("div",{staticClass:"img-wrap"},[e("el-image",{staticStyle:{width:"120px",height:"120px"},attrs:{fit:"cover",src:t.dialogEditProduct.mainImg}})],1),e("div",{staticClass:"tx-center"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.openDialogSelectImg()}}},[t._v("Change image")])])]),e("div",{staticClass:"right"},[e("el-form",{ref:"productForm",staticStyle:{"margin-top":"0"},attrs:{"label-width":"120px"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",{attrs:{label:"name",required:""}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.dialogEditProduct.name,callback:function(e){t.$set(t.dialogEditProduct,"name",e)},expression:"dialogEditProduct.name"}})],1),e("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"Shopify vendor"}},[e("el-input",{model:{value:t.dialogEditProduct.shopifyVendor,callback:function(e){t.$set(t.dialogEditProduct,"shopifyVendor",e)},expression:"dialogEditProduct.shopifyVendor"}})],1),e("div",{staticClass:"edit-tags"},[e("div",{staticClass:"label-title"},[t._v("Shopify tags")]),e("div",{staticClass:"tag-wrap"},[t._l(t.dialogEditProduct.shopifyTag,(function(i){return e("el-tag",{key:i,attrs:{closable:""},on:{close:function(e){return t.handleClose(i,"tag")}}},[t._v(" "+t._s(i)+" ")])})),t.shopifyTagInputVisible?e("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(e){return t.handleInputConfirm("tag")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm("tag")}},model:{value:t.shopifyTagInputValue,callback:function(e){t.shopifyTagInputValue=e},expression:"shopifyTagInputValue"}}):e("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){return t.showInput("tag")}}},[t._v(" + New Tag ")])],2)]),e("div",{staticClass:"edit-tags"},[e("div",{staticClass:"label-title"},[t._v("Shopify type")]),e("div",{staticClass:"tag-wrap"},[t._l(t.dialogEditProduct.shopifyType,(function(i){return e("el-tag",{key:i,attrs:{closable:""},on:{close:function(e){return t.handleClose(i,"type")}}},[t._v(" "+t._s(i)+" ")])})),t.shopifyTypeInputVisible?e("el-input",{ref:"saveTypeInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(e){return t.handleInputConfirm("type")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm("type")}},model:{value:t.shopifyTypeInputValue,callback:function(e){t.shopifyTypeInputValue=e},expression:"shopifyTypeInputValue"}}):e("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){return t.showInput("type")}}},[t._v(" + New Type ")])],2)])],1)],1)])]),e("el-tab-pane",{attrs:{label:"Description"}},[e("quill-editor",{ref:"text",staticClass:"myQuillEditor",attrs:{options:t.editorOption},model:{value:t.dialogEditProduct.description,callback:function(e){t.$set(t.dialogEditProduct,"description",e)},expression:"dialogEditProduct.description"}})],1),e("el-tab-pane",[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("Variants("+t._s(t.dialogEditProduct.stocks2.length)+")")]),t.dialogEditProduct.stocks.length?t._e():e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tab2Loading,expression:"tab2Loading"}],staticStyle:{"text-align":"center"}},[t._v(" Loading... ")]),e("el-form",{directives:[{name:"show",rawName:"v-show",value:t.dialogEditProduct.stocks.length,expression:"dialogEditProduct.stocks.length"}],ref:"tableForm",staticStyle:{"margin-top":"0"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-table",{ref:"stocksTable",staticStyle:{width:"100%"},attrs:{data:t.dialogEditProduct.stocks,stripe:"",height:"400"}},[e("el-table-column",{attrs:{fixed:"",type:"selection",width:"55"}}),e("el-table-column",{attrs:{fixed:"",label:"Product",width:"120"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"table-img-wrap"},[e("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:i.row.propertyImage,fit:"cover"}}),e("a",{staticClass:"modi-img",attrs:{href:"javascript:;"},on:{click:function(e){return t.openDialogSelectImg(i.row)}}},[e("i",{staticClass:"el-icon-edit-outline"})])],1)]}}])}),t._l(t.dialogEditProduct.propertyName,(function(i,s){return e("el-table-column",{key:i,attrs:{label:i,width:"180"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-input",{model:{value:i.row.propertyValue[s],callback:function(e){t.$set(i.row.propertyValue,s,e)},expression:"scope.row.propertyValue[pIndex]"}})]}}],null,!0)})})),e("el-table-column",{attrs:{label:"price",width:"190"},scopedSlots:t._u([{key:"header",fn:function(i){return[e("div",[e("span",[t._v("Price ("+t._s(t.currency)+")")]),e("br"),e("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.dialogEditProduct.AllActionPriceType,expression:"!dialogEditProduct.AllActionPriceType"}],staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"Action"},on:{change:function(e){return t.changeAllPriceType("price")}},model:{value:t.dialogEditProduct.AllActionPriceType,callback:function(e){t.$set(t.dialogEditProduct,"AllActionPriceType",e)},expression:"dialogEditProduct.AllActionPriceType"}},[e("el-option",{attrs:{label:"Action",value:""}}),e("el-option",{attrs:{label:"Change All",value:1}}),e("el-option",{attrs:{label:"Multiply Price",value:2}}),e("el-option",{attrs:{label:"Add Price",value:3}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogEditProduct.AllActionPriceType,expression:"dialogEditProduct.AllActionPriceType"}]},[e("div",{staticClass:"d-flex"},[3==t.dialogEditProduct.AllActionPriceType?e("span",{staticStyle:{"margin-right":"2px"}},[t._v("+")]):t._e(),e("el-input-number",{ref:"priceIpt",staticStyle:{"margin-right":"2px"},style:{width:(2==t.dialogEditProduct.AllActionPriceType?80:100)+"px"},attrs:{size:"mini",min:3==t.dialogEditProduct.AllActionPriceType?-99999:0,precision:2==t.dialogEditProduct.AllActionPriceType?0:2,controls:!1},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.allHandleChange("price")}},model:{value:t.dialogEditProduct.allChangePriceNum,callback:function(e){t.$set(t.dialogEditProduct,"allChangePriceNum",e)},expression:"dialogEditProduct.allChangePriceNum"}}),2==t.dialogEditProduct.AllActionPriceType?e("span",{staticStyle:{"margin-right":"3px"}},[t._v("%")]):t._e(),e("el-button-group",[e("el-button",{staticStyle:{padding:"6px"},attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:function(e){return t.allHandleChange("price")}}}),e("el-button",{staticStyle:{padding:"6px"},attrs:{type:"danger",icon:"el-icon-close",size:"mini"},on:{click:function(e){return t.cancelAllChangeIpt("price")}}})],1)],1)])],1)]}},{key:"default",fn:function(i){return[e("el-input-number",{attrs:{min:0,step:1,size:"mini",precision:2,controls:!1},model:{value:i.row.price,callback:function(e){t.$set(i.row,"price",e)},expression:"scope.row.price"}}),t._v(" "+t._s(t.currency)+" ")]}}])}),e("el-table-column",{attrs:{label:"Compare Price",width:"190"},scopedSlots:t._u([{key:"header",fn:function(i){return[e("div",[e("span",[t._v("Compare Price ("+t._s(t.currency)+")")]),e("br"),e("el-select",{directives:[{name:"show",rawName:"v-show",value:!t.dialogEditProduct.AllActionCPriceType,expression:"!dialogEditProduct.AllActionCPriceType"}],staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"Action"},on:{change:function(e){return t.changeAllPriceType("Cprice")}},model:{value:t.dialogEditProduct.AllActionCPriceType,callback:function(e){t.$set(t.dialogEditProduct,"AllActionCPriceType",e)},expression:"dialogEditProduct.AllActionCPriceType"}},[e("el-option",{attrs:{label:"Action",value:""}}),e("el-option",{attrs:{label:"Change All",value:1}}),e("el-option",{attrs:{label:"Multiply Price",value:2}}),e("el-option",{attrs:{label:"Add Price",value:3}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogEditProduct.AllActionCPriceType,expression:"dialogEditProduct.AllActionCPriceType"}]},[e("div",{staticClass:"d-flex"},[3==t.dialogEditProduct.AllActionCPriceType?e("span",{staticStyle:{"margin-right":"2px"}},[t._v("+")]):t._e(),e("el-input-number",{ref:"CpriceIpt",staticStyle:{"margin-right":"2px"},style:{width:(2==t.dialogEditProduct.AllActionCPriceType?80:100)+"px"},attrs:{size:"mini",min:3==t.dialogEditProduct.AllActionCPriceType?-99999:0,precision:2==t.dialogEditProduct.AllActionCPriceType?0:2,controls:!1},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.allHandleChange("Cprice")}},model:{value:t.dialogEditProduct.allChangeCPriceNum,callback:function(e){t.$set(t.dialogEditProduct,"allChangeCPriceNum",e)},expression:"dialogEditProduct.allChangeCPriceNum"}}),2==t.dialogEditProduct.AllActionCPriceType?e("span",{staticStyle:{"margin-right":"3px"}},[t._v("%")]):t._e(),e("el-button-group",[e("el-button",{staticStyle:{padding:"6px"},attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:function(e){return t.allHandleChange("Cprice")}}}),e("el-button",{staticStyle:{padding:"6px"},attrs:{type:"danger",icon:"el-icon-close",size:"mini"},on:{click:function(e){return t.cancelAllChangeIpt("Cprice")}}})],1)],1)])],1)]}},{key:"default",fn:function(i){return[e("el-input-number",{attrs:{min:0,step:1,size:"mini",precision:2,controls:!1},model:{value:i.row.comparePrice,callback:function(e){t.$set(i.row,"comparePrice",e)},expression:"scope.row.comparePrice"}}),t._v(" "+t._s(t.currency)+" ")]}}])}),e("el-table-column",{attrs:{label:"Cost Price",prop:"costPrice",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.costPrice)+" ("+t._s(e.row.currency)+") ")]}}])}),e("el-table-column",{attrs:{label:"Action",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return t.dialogEditProduct.stocks.length>1?[e("a",{staticClass:"tx-danger",attrs:{href:"javascript:;"},on:{click:function(e){return t.delEditStock(i.$index)}}},[e("i",{staticClass:"el-icon-delete"})])]:void 0}}],null,!0)})],2)],1)],1),e("el-tab-pane",{attrs:{label:"Images"}},[e("div",{staticClass:"img-list-wrap"},[e("div",{staticClass:"main"},[e("el-image",{staticStyle:{width:"220px",height:"220px"},attrs:{src:t.dialogEditProduct.mainImg,fit:"cover"}})],1),e("div",{staticClass:"img-list"},[e("draggable",{attrs:{list:t.dialogEditProduct.imgsJson}},t._l(t.dialogEditProduct.imgsJson,(function(i){return e("div",{key:i,staticClass:"img-b"},[e("el-image",{staticStyle:{width:"150px",height:"150px"},attrs:{src:i,fit:"cover","preview-src-list":t.dialogEditProduct.imgsJson}})],1)})),0)],1)])])],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogEditProduct.isShow=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary",loading:t.dialogEditProduct.loading},on:{click:t.saveEditProduct}},[t._v(" Save ")])],1)]),e("el-dialog",{staticClass:"select-img",attrs:{visible:t.dialogSelectImg.isShow,width:"600px",title:"Select an image"},on:{"update:visible":function(e){return t.$set(t.dialogSelectImg,"isShow",e)}}},[e("div",{staticClass:"img-list"},t._l(t.dialogSelectImg.imgList,(function(i){return e("div",{key:i,staticClass:"img-wrap",class:{active:i==t.dialogSelectImg.selectImg},on:{click:function(e){return t.selectImg(i)}}},[e("i",{staticClass:"el-icon-circle-check"}),e("el-image",{staticStyle:{width:"115px",height:"115px"},attrs:{src:i,fit:"cover"}})],1)})),0),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogSelectImg.isShow=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirmSelectImg}},[t._v("OK")])],1)]),e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogPushSetting.loading,expression:"dialogPushSetting.loading"}],style:{overflow:t.dialogPushSetting.loading?"hidden":"auto"},attrs:{title:"Push setting","close-on-click-modal":!1,visible:t.dialogPushSetting.isShow},on:{"update:visible":function(e){return t.$set(t.dialogPushSetting,"isShow",e)}}},[e("div",{staticClass:"setting-range"},[e("div",{staticClass:"setting-opt"},[e("el-button",{attrs:{size:"mini"},on:{click:t.addRangeItem}},[t._v("+ Add Cost Range")])],1),t.dialogPushSetting.ranger.length?e("el-form",{ref:"settingRangeForm",staticStyle:{"margin-top":"0"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dialogPushSetting.ranger,stripe:"",height:"300"}},[e("el-table-column",{attrs:{label:"Product Cost",width:"250",fixed:""},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.default?e("el-tag",{attrs:{type:"info"}},[t._v("Rest of the price ranges")]):[e("el-input-number",{staticClass:"mg-r-5",staticStyle:{width:"100px"},attrs:{min:0,size:"mini",precision:2,controls:!1},model:{value:i.row.from,callback:function(e){t.$set(i.row,"from",e)},expression:"scope.row.from"}}),e("i",{staticClass:"el-icon-right mg-r-5"}),e("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,size:"mini",precision:2,controls:!1},model:{value:i.row.to,callback:function(e){t.$set(i.row,"to",e)},expression:"scope.row.to"}})]]}}],null,!1,1542616766)}),e("el-table-column",{attrs:{label:"Shipping Cost",width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,size:"mini",precision:2,controls:!1},model:{value:i.row.shippingCost,callback:function(e){t.$set(i.row,"shippingCost",e)},expression:"scope.row.shippingCost"}})]}}],null,!1,4280613481)}),e("el-table-column",{attrs:{label:"Price",width:"250"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-input-number",{staticStyle:{"margin-right":"5px",width:"100px"},attrs:{min:0,size:"mini",controls:!1},model:{value:i.row.price,callback:function(e){t.$set(i.row,"price",e)},expression:"scope.row.price"}}),e("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:i.row.priceType,callback:function(e){t.$set(i.row,"priceType",e)},expression:"scope.row.priceType"}},[e("el-option",{attrs:{label:"Plus",value:"1"}}),e("el-option",{attrs:{label:"Multiply",value:"2"}})],1)]}}],null,!1,1900208153)}),e("el-table-column",{attrs:{label:"Compare Price",width:"250"},scopedSlots:t._u([{key:"header",fn:function(i){return[e("el-checkbox",{model:{value:t.dialogPushSetting.isComparePrice,callback:function(e){t.$set(t.dialogPushSetting,"isComparePrice",e)},expression:"dialogPushSetting.isComparePrice"}},[t._v(" Compare Price ")])]}},{key:"default",fn:function(i){return t.dialogPushSetting.isComparePrice?[e("el-input-number",{staticStyle:{"margin-right":"5px",width:"100px"},attrs:{min:0,size:"mini",controls:!1},model:{value:i.row.comparePrice,callback:function(e){t.$set(i.row,"comparePrice",e)},expression:"scope.row.comparePrice"}}),e("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:i.row.comparePriceType,callback:function(e){t.$set(i.row,"comparePriceType",e)},expression:"scope.row.comparePriceType"}},[e("el-option",{attrs:{label:"Plus",value:"1"}}),e("el-option",{attrs:{label:"Multiply",value:"2"}})],1)]:void 0}}],null,!0)}),e("el-table-column",{attrs:{label:"Action",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return i.row.default?void 0:[e("a",{staticClass:"tx-danger",attrs:{href:"javascript:;"},on:{click:function(e){return t.delRange(i.$index)}}},[e("i",{staticClass:"el-icon-delete"})])]}}],null,!0)})],1)],1):t._e(),e("div",[e("div",{staticStyle:{"margin-bottom":"5px","padding-left":"15px"}},[t._v(" You can set a specific cent value for your price or comparison price. ")]),e("div",{staticClass:"d-flex",staticStyle:{"margin-bottom":"5px",padding:"0 15px"}},[e("div",{staticStyle:{"margin-right":"30px"}},[e("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini"},model:{value:t.dialogPushSetting.isPriceCent,callback:function(e){t.$set(t.dialogPushSetting,"isPriceCent",e)},expression:"dialogPushSetting.isPriceCent"}},[t._v(" Assign Cent ")]),e("el-input-number",{staticStyle:{width:"80px"},attrs:{controls:!1,size:"mini"},model:{value:t.dialogPushSetting.priceCent,callback:function(e){t.$set(t.dialogPushSetting,"priceCent",e)},expression:"dialogPushSetting.priceCent"}})],1),e("div",{staticStyle:{"margin-right":"30px"}},[e("el-checkbox",{staticStyle:{"margin-right":"10px"},model:{value:t.dialogPushSetting.isComparePriceCent,callback:function(e){t.$set(t.dialogPushSetting,"isComparePriceCent",e)},expression:"dialogPushSetting.isComparePriceCent"}},[t._v(" Assign compare at Cent ")]),e("el-input-number",{staticStyle:{width:"80px"},attrs:{controls:!1,size:"mini"},model:{value:t.dialogPushSetting.comparePriceCent,callback:function(e){t.$set(t.dialogPushSetting,"comparePriceCent",e)},expression:"dialogPushSetting.comparePriceCent"}})],1)]),e("div",{staticClass:"d-flex",staticStyle:{padding:"0 15px"}},[e("div",[e("el-switch",{staticStyle:{"margin-right":"10px"},attrs:{"active-text":"Convert Currency"},model:{value:t.dialogPushSetting.convertCurrency,callback:function(e){t.$set(t.dialogPushSetting,"convertCurrency",e)},expression:"dialogPushSetting.convertCurrency"}}),t._v(" According to store currency ")],1)])])],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-link",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogPushSetting.psLoading,expression:"dialogPushSetting.psLoading"}],staticStyle:{"margin-right":"10px"},attrs:{disabled:t.dialogPushSetting.psLoading,type:"primary"},on:{click:t.applyPriceSetting}},[t._v("Apply for products in Import List")]),e("el-button",{on:{click:function(e){t.dialogPushSetting.isShow=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary",loading:t.dialogPushSetting.loading},on:{click:function(e){return t.savePushSetting()}}},[t._v(" Save ")])],1)]),e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogTagManagement.loading,expression:"dialogTagManagement.loading"}],style:{overflow:t.dialogTagManagement.loading?"hidden":"auto"},attrs:{title:"Tag management","close-on-click-modal":!1,visible:t.dialogTagManagement.isShow,width:"500px"},on:{"update:visible":function(e){return t.$set(t.dialogTagManagement,"isShow",e)}}},[e("div",{staticStyle:{width:"420px"}},[t.dialogTagManagement.addMode?e("div",[e("el-form",{ref:"addTagForm",staticClass:"d-flex",staticStyle:{margin:"0"},attrs:{"label-width":"120px"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",{staticStyle:{"margin-right":"5px","margin-bottom":"0"},attrs:{label:"New Tag"}},[e("el-input",{ref:"tagIpt",staticStyle:{width:"150px"},attrs:{size:"mini"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveEntTag.apply(null,arguments)}},model:{value:t.dialogTagManagement.tagIpt,callback:function(e){t.$set(t.dialogTagManagement,"tagIpt",e)},expression:"dialogTagManagement.tagIpt"}})],1),e("el-button-group",[e("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",loading:t.dialogTagManagement.addNewLoading},on:{click:t.saveEntTag}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-close",size:"mini"},on:{click:function(e){return t.changeEntTag(!1)}}})],1)],1)],1):e("div",{staticStyle:{"padding-left":"30px"}},[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.changeEntTag(!0)}}},[t._v("+Add New Tags")])],1)]),e("div",{staticStyle:{padding:"0 15px"}},[e("el-table",{ref:"tagListTable",staticStyle:{width:"100%"},attrs:{data:t.dialogTagManagement.tags,stripe:"",height:"300"}},[e("el-table-column",{attrs:{prop:"name",label:"Tag name"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.edit?e("div",{staticClass:"d-flex"},[e("el-input",{ref:"tagsListIpt",staticStyle:{"margin-right":"5px",width:"180px"},attrs:{size:"mini"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveTagIpt(i.row)}},model:{value:i.row.ipt,callback:function(e){t.$set(i.row,"ipt",e)},expression:"scope.row.ipt"}}),e("el-button-group",[e("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:function(e){return t.saveTagIpt(i.row)}}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-close",size:"mini"},on:{click:function(e){return t.cancelTagIpt(i.row)}}})],1)],1):e("div",[t._v(" "+t._s(i.row.name)+" ")])]}}])}),e("el-table-column",{attrs:{label:"Action",width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.edit?t._e():e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.editTag(i.row)}}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.delTag(i.row)}}})]}}])})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogTagManagement.isShow=!1}}},[t._v("Close")])],1)]),e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogPush.loading,expression:"dialogPush.loading"}],style:{overflow:t.dialogPush.loading?"hidden":"auto"},attrs:{title:"Select stores to publish products","close-on-click-modal":!1,visible:t.dialogPush.isShow,width:"800px"},on:{"update:visible":function(e){return t.$set(t.dialogPush,"isShow",e)}}},[e("div",{staticClass:"dialog-push-body"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:14}},[e("h3",[t._v("Selected products ("+t._s(t.dialogPush.items.length)+")")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dialogPush.items,height:"400"}},[e("el-table-column",{attrs:{prop:"mainImg",width:"110"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.mainImg,fit:"cover"}})]}}])}),e("el-table-column",{attrs:{prop:"name",className:"cell-top"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"tx-ellipsis2"},[t._v(" "+t._s(i.row.name)+" ")]),i.row.pushRe.length?e("div",t._l(i.row.pushRe,(function(i){return e("el-tag",{key:i.shopName,attrs:{type:"success"==i.status?"success":"danger"}},["fail"==i.status?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:i.msg,placement:"top"}},[e("span",[t._v(" "+t._s(i.shopName)+": "+t._s(i.status)+" "),e("i",{staticClass:"el-icon-question",staticStyle:{color:"#303133","font-size":"14px"}})])]):e("span",[t._v(t._s(i.shopName)+": "+t._s(i.status))])],1)})),1):t._e()]}}])}),t.dialogPush.isAction?e("el-table-column",{attrs:{width:"50"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-link",{attrs:{type:"danger"},on:{click:function(e){return t.delPushProduct(i.$index)}}},[e("i",{staticClass:"el-icon-delete"})])]}}],null,!1,237557512)}):t._e()],1)],1),e("el-col",{attrs:{span:10}},[e("h3",{staticStyle:{"margin-bottom":"15px"}},[t.SelectedPushStoresNum?[t._v(" Selected stores ("+t._s(t.SelectedPushStoresNum)+") ")]:[t._v(" Please select the Shopify stores ")]],2),t._l(t.dialogPush.shopList,(function(i){return e("ul",{key:i.platform,staticClass:"push-select-stores"},[1==i.platform?e("div",{staticClass:"block"},[e("shopCate",{attrs:{items:i}}),t._v("Shopify")],1):t._e(),2==i.platform?e("div",{staticClass:"block"},[e("shopCate",{attrs:{items:i}}),t._v("Woocommerce")],1):t._e(),3==i.platform?e("div",{staticClass:"block"},[e("shopCate",{attrs:{items:i}}),t._v("Lazada")],1):t._e(),4==i.platform?e("div",{staticClass:"block"},[e("shopCate",{attrs:{items:i}}),t._v("Shopee")],1):t._e(),5==i.platform?e("div",{staticClass:"block"},[e("shopCate",{attrs:{items:i}}),t._v("Wayfair")],1):t._e(),t._l(i.data,(function(i){return e("li",{key:i.id},[e("el-checkbox",{staticStyle:{"margin-right":"5px"},attrs:{disabled:i.disabled||!t.dialogPush.isAction},on:{change:function(e){return t.selectShopGetCollections(i)}},model:{value:i.checked,callback:function(e){t.$set(i,"checked",e)},expression:"shop.checked"}},[t._v(" "+t._s(i.shopName)+" ")]),i.loading?e("i",{staticClass:"el-icon-loading"}):t._e(),i.collections.length&&1==i.platform?e("el-select",{attrs:{size:"mini",disabled:!t.dialogPush.isAction},model:{value:i.selectCollection,callback:function(e){t.$set(i,"selectCollection",e)},expression:"shop.selectCollection"}},t._l(i.collections,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1):t._e()],1)}))],2)}))],2)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-switch",{staticStyle:{"margin-right":"15px"},attrs:{"active-text":"Also publish to Online Store"},model:{value:t.dialogPush.published,callback:function(e){t.$set(t.dialogPush,"published",e)},expression:"dialogPush.published"}}),e("el-button",{on:{click:function(e){t.dialogPush.isShow=!1}}},[t._v("Close")]),t.dialogPush.isAction?e("el-button",{attrs:{type:"primary",loading:t.dialogPush.loading,disabled:!t.dialogPush.items.length},on:{click:t.pushToShopify}},[t._v(" Push to Store ")]):t._e()],1)]),e("el-dialog",{attrs:{top:"32vh","show-close":!1,visible:t.LoadingVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(e){t.LoadingVisible=e}}},[e("div",{staticClass:"LoadingModal"},[e("el-progress",{attrs:{type:"circle",percentage:t.loadingNum,color:t.colors}}),e("div",{staticClass:"text"},[t._v("Loading time to long, check detailed progress")])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.goTask}},[t._v("Go")])],1)]),e("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll .el-scrollbar__wrap",right:20,bottom:120}})],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-upload2"}),e("h2",[t._v("Import List")])])])}],o=(i("149f"),i("fef2"),i("121a"),i("7e41"),i("96be"),i("716a")),l=i("b881"),r=i("3335"),n=i.n(r),c={name:"importListMain",data(){return{nowTaskId:0,vendorId:localStorage.getItem("vendorId"),colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],loadingNum:0,taskListShow:!1,timer:null,taskList:[],LoadingVisible:!1,loading:!1,loadingImport:!1,importUrl:"",pageSizes:[12,24,48],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("c_importPerPage")?Number(localStorage.getItem("c_importPerPage")):12,total:0,totalPage:0,items:[],filterParams:{url:""},filterParamsDefault:"{}",pushLoading:!1,delLoading:!1,exportLoading:!1,dialogEditProduct:{isShow:!1,loading:!1,id:"",name:"",mainImg:"",imgsJson:[],propertyName:[],shopifyTag:[],shopifyType:[],readyStoresLoading:!1,storesItems:[],collectionStoreId:"",getCollectionsLoading:!1,collectionItems:[],collectionId:"",shopifyVendor:"",description:"",stocks:[],stocks2:[],AllActionPriceType:"",allChangePriceNum:"",AllActionCPriceType:"",allChangeCPriceNum:"",AllActionStockType:"",allChangeStockNum:"",activeTab:"0"},dialogEditProductDefault:"{}",shopifyTagInputVisible:!1,shopifyTagInputValue:"",shopifyTypeInputVisible:!1,shopifyTypeInputValue:"",editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]]}},dialogSelectImg:{isShow:!1,imgList:[],selectImg:"",items:null},dialogSelectImgDefault:"{}",dialogPushSetting:{isShow:!1,loading:!1,ranger:[],isComparePrice:!1,isPriceCent:!1,isComparePriceCent:!1,priceCent:0,comparePriceCent:0,convertCurrency:!1,psLoading:!1},dialogPushSettingDefault:"{}",dialogTagManagement:{isShow:!1,loading:!1,tags:[],addMode:!1,addNewLoading:!1,tagIpt:""},dialogTagManagementDefault:"{}",tags:[],stores:[],dialogPush:{isShow:!1,loading:!1,shopList:[],items:[],isAction:!0,published:!1},dialogPushDefault:"{}",defaultProps:{children:"children",label:"label"},filterNum:0,currency:"",tab2Loading:!0}},components:{quillEditor:l["quillEditor"],draggable:n.a,shopCate:o["a"]},mounted(){this.dialogPushDefault=JSON.stringify(this.dialogPush),this.dialogTagManagementDefault=JSON.stringify(this.dialogTagManagement),this.dialogPushSettingDefault=JSON.stringify(this.dialogPushSetting),this.dialogSelectImgDefault=JSON.stringify(this.dialogSelectImg),this.dialogEditProductDefault=JSON.stringify(this.dialogEditProduct),this.filterParamsDefault=JSON.stringify(this.filterParams),this.getItem(),this.getImportTask(),this.getPageTags(),this.getPageStores()},beforeDestroy(){clearInterval(this.timer),this.timer=null},watch:{$route:"gotoPage"},computed:{AllChecked(){let t=!0;return this.items.length?this.items.forEach(e=>{e.checked||"1"!=e.status||(t=!1)}):t=!1,t},SelectedPushStoresNum(){let t=0;return this.dialogPush.shopList.forEach(e=>{e.data.forEach(e=>{(e.checked&&1==e.platform||e.checked&&1!=e.platform)&&t++})}),t}},methods:{goTask(){this.$router.push({path:"/task-list",query:{id:this.nowTaskId}})},delitem(t){this.$confirm("Do you want to delete this task?","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$apiCall("api.Product.delImportTask",{id:t.id},t=>{9999==t.ErrorCode?(this.getImportTask(),this.$elementMessage("Delete Completed","success")):this.$elementMessage(t.Message,"error")})}).catch(()=>!1)},getImportTask(){this.$apiCall("api.Product.findsImportTask",{},t=>{9999==t.ErrorCode&&(this.taskList=t.Data.Results)}),this.taskList=[...this.taskList]},viewDetail(t){this.$Burying({object:"8004",objectId:t})},tabClick(t){setTimeout(()=>{2==t.index?this.dialogEditProduct.stocks=this.dialogEditProduct.stocks2:this.dialogEditProduct.stocks=[]},0)},applyPriceSetting(){this.savePushSetting(!0)},delEditStock(t){this.$confirm("Are you sure to delete it?？").then(()=>{this.$apiCall("api.Product.deleteImportStock",{id:this.dialogEditProduct.stocks[t].id},e=>{this.dialogEditProduct.stocks.splice(t,1),9999==e.ErrorCode?this.items.forEach(e=>{e.id==this.dialogEditProduct.id&&e.stocks.splice(t,1)}):this.$elementMessage(e.Message,"error")})}).catch(()=>{})},removeItemTag(t,e){t.tags.forEach((i,s)=>{i.id==e.id&&t.tags.splice(s,1)}),this.$apiCall("api.Product.removeTag",{id:t.id,tags:[e.tagId]},t=>{9999!=t.ErrorCode&&(this.$elementMessage(t.Message,"error"),this.getItem())})},getPageStores(){this.$apiCall("api.Invoice.findStores",{authStatus:1},t=>{9999==t.ErrorCode&&(this.currency=t.Data.Results[0].currency?t.Data.Results[0].currency:"USD",this.stores=[],t.Data.Results.forEach(t=>{t.fChecked=!1,this.stores.push(t)}))})},itemsAddTags(t){let e=[];this.tags.forEach(t=>{t.checked&&e.push(t.id)}),e.length?(this.loading=!0,this.$apiCall("api.Product.addTag",{ids:t,tags:e},t=>{9999==t.ErrorCode?(this.removeCheckedTags(),this.$elementMessage("Tags added successfully","success"),this.$refs.tagMgt.hide(),this.getItem()):this.$elementMessage(t.Message,"error")})):this.$elementMessage("Please select the tags","error")},removeCheckedTags(){this.tags.forEach(t=>{t.checked=!1})},delPushProduct(t){this.dialogPush.items.splice(t,1)},showPrice(t){let[e,i]=[0,0];return t.stocks.some(t=>{if(t.costPrice)return e=i=Number(t.costPrice),!0}),t.stocks.forEach(t=>{t.costPrice&&e>Number(t.costPrice)&&(e=Number(t.costPrice)),t.costPrice&&i<Number(t.costPrice)&&(i=Number(t.costPrice))}),e==i?e.toFixed(2):`${e} - ${i}`},pushRe(t,e){let i={status:t,msg:e.Message};this.dialogPush.shopList.forEach(t=>{t.data.forEach(t=>{t.selectCollection==e.collectionId&&(i.shopName=t.shopName)})}),this.dialogPush.items.forEach(t=>{t.id==e.id&&t.pushRe.push(i)}),this.dialogPush.items.splice(0,0)},pushToShopify(){if(!this.SelectedPushStoresNum)return void this.$elementMessage("Please select the stores","error");this.LoadingVisible=!0;let t=[];this.dialogPush.shopList.forEach(e=>{e.data.forEach(e=>{this.dialogPush.items.forEach(i=>{i.pushRe=[],e.checked&&1==e.platform?t.push({id:i.id,accountId:e.id,collectionId:e.selectCollection,published:this.dialogPush.published}):e.checked&&1!=e.platform&&t.push({id:i.id,accountId:e.id,published:this.dialogPush.published})})})}),this.$apiCall("api.Product.addImportTask",{products:t},t=>{if(9999==t.ErrorCode){this.nowTaskId=t.Data.Results;let e=setInterval(()=>{this.loadingNum+=5,this.loadingNum>=100&&(clearInterval(e),this.dialogPush.isAction=!1,this.LoadingVisible=!1,this.dialogPush.isShow=!1,this.loadingNum=0,this.$elementMessage("Push completed","success"))},100);this.getItem()}else this.$elementMessage(t.Message,"error")})},selectShopGetCollections(t){t.collections.length||1==t.platform&&(t.loading=!0,this.$apiCall("api.Product.getCollections",{id:t.id},e=>{if(t.loading=!1,9999==e.ErrorCode){if(!Object.keys(e.Data.Results).length)return t.disabled=!0,void(t.checked=!1);t.collections=[],Object.keys(e.Data.Results).forEach(i=>{t.collections.push({id:i,name:e.Data.Results[i]})}),1==t.collections.length&&(t.selectCollection=t.collections[0].id)}else this.$elementMessage(e.Message,"error")}))},getPageTags(){this.$apiCall("api.Product.getTag",{},t=>{this.tags=[],t.Data.Results.forEach(t=>{t.checked=!1,t.fChedked=!1,this.tags.push(t)})})},cancelTagIpt(t){t.edit=!1},saveTagIpt(t){t.ipt?(this.dialogTagManagement.loading=!0,this.$apiCall("api.Product.changeTag",{id:t.id,name:t.ipt},t=>{this.dialogTagManagement.loading=!1,9999==t.ErrorCode?(this.getTagList(),this.getPageTags()):this.$elementMessage(t.Message,"error")})):this.$elementMessage("Please enter the tag","error")},editTag(t){t.edit=!0,this.$nextTick(()=>{this.$refs.tagsListIpt.$refs.input.focus()})},delTag(t){this.$confirm("Are you sure to delete it?？").then(()=>{this.dialogTagManagement.loading=!0,this.$apiCall("api.Product.deleteTag",{id:t.id},t=>{this.dialogTagManagement.loading=!1,9999==t.ErrorCode?(this.getTagList(),this.getPageTags()):this.$elementMessage(t.Message,"error")})}).catch(()=>{})},saveEntTag(){this.dialogTagManagement.tagIpt?(this.dialogTagManagement.addNewLoading=!0,this.$apiCall("api.Product.createTag",{name:this.dialogTagManagement.tagIpt},t=>{this.dialogTagManagement.addNewLoading=!1,9999==t.ErrorCode?(this.changeEntTag(!1),this.getTagList(),this.getPageTags()):this.$elementMessage(t.Message,"error")})):this.$elementMessage("Please enter the New tag","error")},changeEntTag(t){this.dialogTagManagement.tagIpt="",this.dialogTagManagement.addMode=t,t&&this.$nextTick(()=>{this.$refs.tagIpt.$refs.input.focus()})},getTagList(){this.dialogTagManagement.loading=!0,this.$apiCall("api.Product.getTag",{},t=>{this.dialogTagManagement.loading=!1,9999==t.ErrorCode?(this.dialogTagManagement.tags=[],t.Data.Results.forEach(t=>{t.edit=!1,t.ipt=t.name,this.dialogTagManagement.tags.push(t)}),this.$refs.tagListTable.bodyWrapper.scrollTop=0):this.$elementMessage(t.Message,"error")})},openTagMgt(){this.dialogTagManagement=JSON.parse(this.dialogTagManagementDefault),this.dialogTagManagement.isShow=!0,this.getTagList()},savePushSetting(t){this.dialogPushSetting.loading=!0;let e={};e=this.dialogPushSetting.ranger[this.dialogPushSetting.ranger.length-1],delete e.default;let i=[];this.dialogPushSetting.ranger.forEach((t,e)=>{e<this.dialogPushSetting.ranger.length-1&&i.push(t)});let s={importPriceSetting:{range:i,default:e,isComparePrice:this.dialogPushSetting.isComparePrice?1:2,isPriceCent:this.dialogPushSetting.isPriceCent?1:2,isComparePriceCent:this.dialogPushSetting.isComparePriceCent?1:2,priceCent:this.dialogPushSetting.priceCent,comparePriceCent:this.dialogPushSetting.comparePriceCent,convertCurrency:this.dialogPushSetting.convertCurrency?1:2}};this.$Burying({object:"8007"}),this.$apiCall("api.Product.setImportPrice",s,e=>{this.dialogPushSetting.loading=!1,9999==e.ErrorCode?(t?(this.$elementMessage("The update  has started, it will take a while to finish.","success"),this.$apiCall("api.Product.applyPriceSetting",{},t=>{9999!=t.ErrorCode&&this.$elementMessage(t.Message,"error")})):this.dialogPushSetting.isShow=!1,this.$elementMessage("save successfully","success")):this.$elementMessage(e.Message,"error")})},delRange(t){this.dialogPushSetting.ranger.splice(t,1)},addRangeItem(){this.dialogPushSetting.ranger.unshift({from:0,to:.01,shippingCost:0,price:1,priceType:"1",comparePrice:1,comparePriceType:"2"})},openPushSetting(){this.dialogPushSetting=JSON.parse(this.dialogPushSettingDefault),this.tab2Loading=!1,this.dialogPushSetting.isShow=!0,this.dialogPushSetting.loading=!0,this.$apiCall("api.Product.getImportPrice",{},t=>{if(this.dialogPushSetting.loading=!1,9999==t.ErrorCode){let e=t.Data.Results,i={comparePrice:0,comparePriceType:"2",price:0,priceType:"1",shippingCost:0,default:1};if(!e)return void this.dialogPushSetting.ranger.push(i);e.default&&(i=e.default),i.default=1,this.dialogPushSetting.ranger=e.range,this.dialogPushSetting.ranger.push(i),this.dialogPushSetting.isComparePrice=1==e.isComparePrice,this.dialogPushSetting.isPriceCent=1==e.isPriceCent,this.dialogPushSetting.isComparePriceCent=1==e.isComparePriceCent,this.dialogPushSetting.priceCent=e.priceCent,this.dialogPushSetting.comparePriceCent=e.comparePriceCent,this.dialogPushSetting.convertCurrency=1==e.convertCurrency}else this.$elementMessage(t.Message,"error"),this.dialogPushSetting.isShow=!1})},saveEditProduct(){this.dialogEditProduct.loading=!0;let t={id:this.dialogEditProduct.id,name:this.dialogEditProduct.name,mainImg:this.dialogEditProduct.mainImg,imgsJson:this.dialogEditProduct.imgsJson,description:this.dialogEditProduct.description,shopifyVendor:this.dialogEditProduct.shopifyVendor,shopifyTag:this.dialogEditProduct.shopifyTag.join(","),shopifyType:this.dialogEditProduct.shopifyType.join(","),skuData:{}};this.dialogEditProduct.stocks.forEach(e=>{e.propertyValue=e.propertyValue.join("||"),t.skuData[e.id]=e}),this.$Burying({object:"8003"}),this.$apiCall("api.Product.changeImportProduct",t,t=>{this.dialogEditProduct.loading=!1,9999==t.ErrorCode?(this.dialogEditProduct.isShow=!1,this.getItem(!0)):this.$elementMessage(t.Message,"error")})},confirmSelectImg(){this.dialogSelectImg.item?this.$set(this.dialogSelectImg.item,"propertyImage",this.dialogSelectImg.selectImg):this.$set(this.dialogEditProduct,"mainImg",this.dialogSelectImg.selectImg),this.dialogSelectImg.isShow=!1},selectImg(t){this.dialogSelectImg.selectImg=t},openDialogSelectImg(t){this.dialogSelectImg=JSON.parse(this.dialogSelectImgDefault),this.dialogSelectImg.imgList=this.dialogEditProduct.imgsJson,this.dialogSelectImg.item=t,this.dialogSelectImg.isShow=!0},dialogAllChecked(t){this.$nextTick(()=>{this.dialogEditProduct.stocks.forEach(e=>{this.$refs.stocksTable.toggleRowSelection(e,t)})})},cancelAllChangeIpt(t){switch(t){case"price":this.dialogEditProduct.allChangePriceNum="",this.dialogEditProduct.AllActionPriceType="";break;case"Cprice":this.dialogEditProduct.allChangeCPriceNum="",this.dialogEditProduct.AllActionCPriceType="";break;case"stock":this.dialogEditProduct.allChangeStockNum="",this.dialogEditProduct.AllActionStockType="";break}this.dialogAllChecked(!1)},allHandleChange(t){if(this.$refs.stocksTable.selection.length){switch(t){case"price":this.$refs.stocksTable.selection.forEach(t=>{1==this.dialogEditProduct.AllActionPriceType&&this.$set(t,"price",this.dialogEditProduct.allChangePriceNum),2==this.dialogEditProduct.AllActionPriceType&&this.$set(t,"price",Number((this.dialogEditProduct.allChangePriceNum/100*t.price).toFixed(2))),3==this.dialogEditProduct.AllActionPriceType&&this.$set(t,"price",Number((this.dialogEditProduct.allChangePriceNum+t.price).toFixed(2))),t.comparePrice<t.price&&(t.comparePrice=t.price)}),this.dialogEditProduct.allChangePriceNum="",this.dialogEditProduct.AllActionPriceType="";break;case"Cprice":this.$refs.stocksTable.selection.forEach(t=>{1==this.dialogEditProduct.AllActionCPriceType&&this.$set(t,"comparePrice",this.dialogEditProduct.allChangeCPriceNum),2==this.dialogEditProduct.AllActionCPriceType&&this.$set(t,"comparePrice",Number((this.dialogEditProduct.allChangeCPriceNum/100*t.comparePrice).toFixed(2))),3==this.dialogEditProduct.AllActionCPriceType&&this.$set(t,"comparePrice",Number((this.dialogEditProduct.allChangeCPriceNum+t.comparePrice).toFixed(2))),t.comparePrice<t.price&&(t.comparePrice=t.price)}),this.dialogEditProduct.allChangeCPriceNum="",this.dialogEditProduct.AllActionCPriceType="";break;case"stock":this.$refs.stocksTable.selection.forEach(t=>{1==this.dialogEditProduct.AllActionStockType&&this.$set(t,"shopifyStock",this.dialogEditProduct.allChangeStockNum),3==this.dialogEditProduct.AllActionStockType&&this.$set(t,"shopifyStock",Number(this.dialogEditProduct.allChangeStockNum+t.shopifyStock))}),this.dialogEditProduct.allChangeStockNum="",this.dialogEditProduct.AllActionStockType="";break}this.dialogAllChecked(!1)}else this.$elementMessage("请先选择要处理的SKU","error")},changeAllPriceType(t){switch((this.dialogEditProduct.AllActionPriceType||this.dialogEditProduct.AllActionCPriceType||this.dialogEditProduct.AllActionStockType)&&this.dialogAllChecked(!0),t){case"price":this.dialogEditProduct.AllActionPriceType&&this.$nextTick(()=>{this.$refs.priceIpt.$refs.input.$refs.input.focus()}),1==this.dialogEditProduct.AllActionPriceType&&(this.dialogEditProduct.allChangePriceNum=this.dialogEditProduct.stocks[0].price),2==this.dialogEditProduct.AllActionPriceType&&(this.dialogEditProduct.allChangePriceNum=100);break;case"Cprice":this.dialogEditProduct.AllActionCPriceType&&this.$nextTick(()=>{this.$refs.CpriceIpt.$refs.input.$refs.input.focus()}),1==this.dialogEditProduct.AllActionCPriceType&&(this.dialogEditProduct.allChangeCPriceNum=this.dialogEditProduct.stocks[0].comparePrice),2==this.dialogEditProduct.AllActionCPriceType&&(this.dialogEditProduct.allChangeCPriceNum=100);break;case"stock":this.dialogEditProduct.AllActionStockType&&this.$nextTick(()=>{this.$refs.stockIpt.$refs.input.$refs.input.focus()}),1==this.dialogEditProduct.AllActionStockType&&(this.dialogEditProduct.allChangeStockNum=this.dialogEditProduct.stocks[0].shopifyStock);break}},getCollections(){this.dialogEditProduct.collectionStoreId&&(this.dialogEditProduct.getCollectionsLoading=!0,this.$apiCall("api.Product.getCollections",{id:this.dialogEditProduct.collectionStoreId},t=>{this.dialogEditProduct.getCollectionsLoading=!1,9999==t.ErrorCode&&(this.dialogEditProduct.collectionItems=[],Object.keys(t.Data.Results).forEach(e=>{this.dialogEditProduct.collectionItems.push({id:e,name:t.Data.Results[e]})}))}))},storesRemoteMethod(t){this.dialogEditProduct.readyStoresLoading=!0,this.$apiCall("api.Invoice.findStores",{shopName:t},t=>{this.dialogEditProduct.readyStoresLoading=!1,9999==t.ErrorCode&&(this.dialogEditProduct.storesItems=t.Data.Results)})},handleClose(t,e){switch(e){case"tag":this.dialogEditProduct.shopifyTag.splice(this.dialogEditProduct.shopifyTag.indexOf(t),1);break;case"type":this.dialogEditProduct.shopifyType.splice(this.dialogEditProduct.shopifyType.indexOf(t),1);break}},handleInputConfirm(t){let e="";switch(t){case"tag":e=this.shopifyTagInputValue,e&&this.dialogEditProduct.shopifyTag.push(e),this.shopifyTagInputVisible=!1,this.shopifyTagInputValue="";break;case"type":e=this.shopifyTypeInputValue,e&&this.dialogEditProduct.shopifyType.push(e),this.shopifyTypeInputVisible=!1,this.shopifyTypeInputValue="";break}},showInput(t){switch(t){case"tag":this.shopifyTagInputVisible=!0,this.$nextTick(()=>{this.$refs.saveTagInput.$refs.input.focus()});break;case"type":this.shopifyTypeInputVisible=!0,this.$nextTick(()=>{this.$refs.saveTypeInput.$refs.input.focus()});break}},editProduct(t){this.loading=!0,setTimeout(()=>{t=JSON.parse(JSON.stringify(t)),this.dialogEditProduct=JSON.parse(this.dialogEditProductDefault),this.dialogEditProduct.id=t.id,this.dialogEditProduct.name=t.name,this.dialogEditProduct.mainImg=t.mainImg,this.dialogEditProduct.propertyName=t.propertyName?t.propertyName.split("||"):[],this.dialogEditProduct.shopifyTag=t.shopifyTag?t.shopifyTag.split(","):[],this.dialogEditProduct.shopifyType=t.shopifyType?t.shopifyType.split(","):[],this.dialogEditProduct.shopifyVendor=t.shopifyVendor,this.dialogEditProduct.description=t.description,this.dialogEditProduct.stocks=[],this.dialogEditProduct.stocks2=[],t.stocks.forEach(t=>{t.propertyValue=t.propertyValue?t.propertyValue.split("||"):[],this.dialogEditProduct.stocks2.push(t)}),this.dialogEditProduct.mainImg=t.mainImg,this.dialogEditProduct.imgsJson=JSON.parse(JSON.stringify(t.imgsJson)),this.dialogEditProduct.isShow=!0,this.$nextTick(()=>{this.$refs.tableForm&&this.$refs.tableForm.bodyWrapper&&(this.$refs.tableForm.bodyWrapper.scrollTop=0,this.$refs.tableFrom.bodyWrapper.scrollLeft=0)})},0)},delItem(t=[]){t.length&&this.$confirm(`Do you want to delete the ${t.length} product(s)?`,"",{cancelButtonText:"Discard",confirmButtonText:"Delete",type:"warning"}).then(()=>{this.delLoading=!0,this.$apiCall("api.Product.deleteImportProduct",{ids:t},e=>{this.pushLoading=!1,this.$Burying({object:"8002",objectId:t.join(",")}),9999==e.ErrorCode?(this.delLoading=!1,this.$elementMessage("Delete success","success"),this.changeAllItems(!1),this.getItem(!0)):this.$elementMessage(e.Message,"error")})}).catch(()=>{})},expItem(t=[]){t.length&&this.$confirm(`Do you want to Export the ${t.length} product(s)?`,"",{cancelButtonText:"Discard",confirmButtonText:"Export",type:"info"}).then(()=>{this.expLoading=!0,this.$apiCall("api.Product.exportImportProduct",{productIds:t},t=>{this.pushLoading=!1,9999==t.ErrorCode?(this.expLoading=!1,this.$elementMessage("Export success","success"),window.open(t.Data.Results.file,"_blank"),this.changeAllItems(!1),this.getItem(!0)):this.$elementMessage(t.Message,"error")})}).catch(()=>{})},pushItem(t){this.dialogPush=JSON.parse(this.dialogPushDefault),this.dialogPush.isShow=!0,this.$set(this.dialogPush,"items",t),this.dialogPush.items.splice(0,0),this.dialogPush.loading=!0,this.$apiCall("api.Invoice.findStores",{authStatus:1},t=>{this.dialogPush.loading=!1,9999==t.ErrorCode?(this.dialogPush.shopList=[],t.Data.Results.forEach(t=>{t.loading=!1,t.checked=!1,t.selectCollection="",t.collections=[],t.disabled=!1,this.dialogPush.shopList.push(t)}),this.dialogPush.shopList=this.groupBy(this.dialogPush.shopList),this.dialogPush.isShow=!0):this.$elementMessage(t.Message,"error")})},groupBy(t){for(var e={},i=[],s=0;s<t.length;s++){var a=t[s];if(e[a.platform])for(var o=0;o<i.length;o++){var l=i[o];if(l.platform==a.platform){l.data.push(a);break}}else i.push({platform:a.platform,data:[a]}),e[a.platform]=a}return i},singPush(t){let e=[];t.pushRe=[],e.push(t),this.pushItem(e)},batItems(t){let e=[];if(this.items.forEach(t=>{t.checked&&(t.pushRe=[],e.push(t))}),!e.length)return void this.$elementMessage("Please select the products","error");let i=[];switch(e.forEach(t=>{i.push(t.id)}),t){case"push":this.pushItem(e);break;case"export":this.expItem(i);break;case"del":this.delItem(i);break;case"addTags":this.itemsAddTags(i);break}},changeAllItems(t){this.items.forEach(e=>{"1"==e.status&&this.$set(e,"checked",t)})},importPorduct(){this.importUrl?(this.loadingImport=!0,this.$Burying({object:"8006",objectUrl:this.importUrl}),this.$apiCall("api.Product.importPorduct",{url:this.importUrl},t=>{this.loadingImport=!1,9999==t.ErrorCode?(this.importUrl="",this.$elementMessage("Import success","success"),this.toPage(1)):this.$elementMessage(t.Message,"error")})):this.$elementMessage("URL required","error")},getItem(t){this.loading=!0;let e={page:this.page,rowsPerPage:this.rowsPerPage,tagIds:[],accountIds:[]};this.tags.forEach(t=>{t.fChecked&&e.tagIds.push(t.id)}),this.stores.forEach(t=>{t.fChecked&&e.accountIds.push(t.id)}),this.$apiCall("api.Product.findImportProduct",e,t=>{this.loading=!1,9999==t.ErrorCode?(this.items=[],t.Data.Results.forEach(t=>{t.imgsJson=JSON.parse(t.imgsJson),t.checked=!1,t.tagsVisible=!1,this.items.push(t)}),this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage),this.filterNum=0,this.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0,e.tagIds.length&&this.filterNum++,e.accountIds.length&&this.filterNum++):this.$elementMessage(t.Message,"error")}),this.getImportTask()},clearFilter(){this.tags.forEach(t=>{this.$set(t,"fChecked",!1)}),this.stores.forEach(t=>{this.$set(t,"fChecked",!1)}),1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}}),this.$refs.filterDropdown.hide()},filterGetItem(){1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}}),this.$refs.filterDropdown.hide()},toPage(t){t!=this.$route.query.page?this.$router.push({query:{page:t}}):this.getItem()},changePageSize(t){this.rowsPerPage=t,localStorage.setItem("c_importPerPage",t),this.getItem()},gotoPage(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()}}},d=c,g=(i("1101"),i("8d50"),i("e607")),u=Object(g["a"])(d,s,a,!1,null,"df5112f4",null);e["default"]=u.exports},"8d50":function(t,e,i){"use strict";i("22b9")}}]);
//# sourceMappingURL=ImportList.1af028fa.js.map