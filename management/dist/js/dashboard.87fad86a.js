(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{1386:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"customer-detail"}},[t("el-card",[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[t("router-link",{attrs:{to:{path:"/customerMg"},replace:""}},[e._v("客户管理")])],1),t("el-breadcrumb-item",[e._v("套餐详情")])],1),t("el-divider"),t("el-row",{staticClass:"center"},[t("div",[t("div",{staticClass:"flex"},[t("span",{staticClass:"title"},[e._v("套餐版本:")]),t("span",{staticClass:"content"},[1==e.comboDetail.vipType?[e._v("免费版")]:e._e(),2==e.comboDetail.vipType?[e._v("标准版")]:e._e(),3==e.comboDetail.vipType?[e._v("专业版")]:e._e(),4==e.comboDetail.vipType?[e._v("尊享版")]:e._e(),t("span",{staticStyle:{"margin-left":"20px"}},[e._v("付款金额: "+e._s(e.vipDetail.amount)+"元")])],2)]),t("div",{staticClass:"flex"},[t("div",{staticClass:"title"},[e._v("服务期至:")]),"0"==e.comboDetail.overTime?t("span",{staticClass:"content"},[e._v(" --")]):t("span",{staticClass:"content"},[e._v(" "+e._s(e.$moment(1e3*e.comboDetail.overTime).format("YYYY-MM-DD HH:mm:ss")))])])]),t("div",{staticClass:"flex"},[t("div",{staticClass:"title"},[e._v("套餐内容:")]),t("div",{staticClass:"content"},[t("div",[e._v("商品上架数量: "+e._s(e.vipDetail.productCnt)+"个SPU")]),t("div",[e._v("目前剩余: "+e._s(e.resetQu.vipProductCnt)+"个SPU")]),t("div",[e._v("子账号数量: "+e._s(e.vipDetail.subUserCnt)+"个")]),t("div",[e._v("目前剩余: "+e._s(e.resetQu.vipSubuserCnt)+"个")]),t("div",[e._v("订单数据保留时长: "+e._s(e.vipDetail.orderReserveDay)+"天")])])]),1!=e.comboDetail.vipType?t("div",{staticClass:"flex"},[t("div",{staticClass:"title"},[e._v("额外内容:")]),t("div",[t("div",{staticClass:"content"},[e.comboDetail.service?t("div",[t("div",{staticClass:"fz-16"},[e._v("企业自有品牌服务包")]),t("div",{staticClass:"service"},[t("span",[e._v("上架应用至Shopify")]),e._v(" "),t("span",[e._v("设置店铺独有域名")])])]):e._e()]),e._l(e.addObj,(function(a,s,i){return t("div",{key:i},["mail"==s?t("div",{staticClass:"addPack"},[t("div",{staticClass:"title"},[e._v("邮件加油包")]),t("div",{staticClass:"content"},[e._v("已购: "+e._s(a.mailCnt)+"封 剩余数量: "+e._s(e.comboDetail.mailCnt)+"封")]),t("div",{staticClass:"price"},[e._v("付款金额: "+e._s(a.addAmount)+" 元 ")])]):e._e(),"product"==s?t("div",{staticClass:"addPack"},[t("div",{staticClass:"title"},[e._v("商品上架数")]),t("div",{staticClass:"content"},[e._v("已购: "+e._s(e.comboDetail.addProductCnt)+"个 剩余数量: "+e._s(e.resetQu.addProductCnt)+"个")]),t("div",{staticClass:"price"},[e._v("付款金额: "+e._s(a.addAmount)+" 元")])]):e._e(),"subUser"==s?t("div",{staticClass:"addPack"},[t("div",{staticClass:"title"},[e._v("子账号")]),t("div",{staticClass:"content"},[e._v("已购: "+e._s(e.comboDetail.addSubUserCnt)+"个 剩余数量: "+e._s(e.resetQu.addSubuserCnt)+"个")]),t("div",{staticClass:"price"},[e._v("付款金额: "+e._s(a.addAmount)+" 元")])]):e._e()])}))],2)]):e._e()]),t("el-divider"),t("el-row",[t("h2",[e._v("操作日志")]),t("el-table",{attrs:{data:e.operateList}},[t("el-table-column",{attrs:{label:"ID",prop:"id"}}),t("el-table-column",{attrs:{label:"操作人",prop:"admin"}}),t("el-table-column",{attrs:{label:"操作事项",prop:"operate"}}),t("el-table-column",{attrs:{label:"操作对象"},scopedSlots:e._u([{key:"default",fn:function(a){return["service"==a.row.object?t("div",[e._v("服务包加购")]):"mail"==a.row.object?t("div",[e._v("邮件加购")]):"product"==a.row.object?t("div",[e._v("商品数量加购")]):"order"==a.row.object?t("div",[e._v("每日拉取订单加购")]):"subUser"==a.row.object?t("div",[e._v("子账号加购")]):t("div",[e._v(e._s(a.row.object))])]}}])}),t("el-table-column",{attrs:{label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.$moment(1e3*t.row.timeCreated).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),t("el-table-column",{attrs:{label:"开通时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.$moment(1e3*t.row.timeOpen).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])})],1)],1),t("el-row",{staticClass:"footer"},[t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},i=[],r={data(){return{pagination:{currentPage:1,pageSize:10,total:0},resetQu:{vipProductCnt:0,vipSubuserCnt:0,addProductCnt:0,addSubuserCnt:0},userId:"",comboDetail:{},vipDetail:{},operateList:[],addObj:{mail:{addAmount:0,mailCnt:0},product:{addAmount:0,productCnt:0},order:{addAmount:0,dailyOrderCnt:0},subUser:{addAmount:0,subUserCnt:0}}}},mounted(){this.$route.query&&this.$route.query.id&&(this.userId=this.$route.query.id,this.getDetail(),this.getOperation())},methods:{handleSizeChange(e){this.pagination.pageSize=e,this.getOperation()},handleCurrentChange(e){this.pagination.currentPage=e,this.getOperation()},getOperation(){this.$apiCall("api.Admin.getVipHistory",{userId:this.userId||"",page:this.pagination.currentPage,rowsperPage:this.pagination.pageSize},e=>{9999==e.ErrorCode&&(this.operateList=e.Data.Results,this.pagination.total=Number(e.Data.Pagination.totalCount))})},getDetail(){this.$apiCall("api.Admin.getVipDetail",{userId:this.userId||""},e=>{9999==e.ErrorCode&&(this.comboDetail=e.Data.Results,this.comboDetail.addDetail.forEach(e=>{e.extraJson=JSON.parse(e.extraJson),e.extraJson.addPack&&e.extraJson.addPack.forEach(e=>{"mail"==e.object&&(this.addObj.mail.addAmount+=Number(e.addAmount),this.addObj.mail.mailCnt+=Number(e.mailCnt)),"product"==e.object&&(this.addObj.product.addAmount+=Number(e.addAmount),this.addObj.product.productCnt+=Number(e.productCnt)),"order"==e.object&&(this.addObj.order.addAmount+=Number(e.addAmount),this.addObj.order.dailyOrderCnt+=Number(e.dailyOrderCnt)),"subUser"==e.object&&(this.addObj.subUser.addAmount+=Number(e.addAmount),this.addObj.subUser.subUserCnt+=Number(e.subUserCnt))})}),this.getComboData())})},getComboData(){this.$apiCall("api.Admin.getVipArray",{},e=>{if(9999==e.ErrorCode){let t=Number(this.comboDetail.vipType);this.vipDetail=e.Data.Results[t],this.vipDetail.productCnt-this.comboDetail.productCnt>=0?(this.resetQu.vipProductCnt=this.vipDetail.productCnt-this.comboDetail.productCnt,this.resetQu.addProductCnt=this.comboDetail.addProductCnt):(this.resetQu.vipProductCnt=0,this.resetQu.addProductCnt=this.comboDetail.addProductCnt-(this.comboDetail.productCnt-this.vipDetail.productCnt)),this.vipDetail.subUserCnt-this.comboDetail.subUserCnt>=0?(this.resetQu.vipSubuserCnt=this.vipDetail.subUserCnt-this.comboDetail.subUserCnt,this.resetQu.addSubuserCnt=this.comboDetail.addSubUserCnt):(this.resetQu.vipSubuserCnt=0,this.resetQu.addSubuserCnt=this.comboDetail.addSubUserCnt-(this.comboDetail.subUserCnt-this.vipDetail.subUserCnt))}})}}},o=r,l=(a("d336"),a("2877")),n=Object(l["a"])(o,s,i,!1,null,"434f86f4",null);t["default"]=n.exports},"21fe":function(e,t,a){},2780:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"customer-Mgr"}},[t("el-card",{staticStyle:{"margin-right":"30px"}},[t("el-row",{staticClass:"mlr-30"},[t("el-form",{attrs:{inline:!0,size:"small"}},[t("el-form-item",{attrs:{label:"付款时间:"}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"至","default-time":["00:00:00","23:59:59"],"start-placeholder":"开始日期","picker-options":e.pickerOptions,"end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}})],1),t("el-form-item",{attrs:{label:"交易编号:"}},[t("el-input",{model:{value:e.filterParams.code,callback:function(t){e.$set(e.filterParams,"code",t)},expression:"filterParams.code"}})],1),t("el-form-item",{attrs:{label:"付款金额:"}},[t("el-input",{model:{value:e.filterParams.totalAmount,callback:function(t){e.$set(e.filterParams,"totalAmount",t)},expression:"filterParams.totalAmount"}})],1),t("el-form-item",{attrs:{label:"供应商账号:"}},[t("el-select",{attrs:{clearable:"",loading:e.vendorLoading,filterable:"",remote:"","remote-method":e.getVendorList},model:{value:e.filterParams.userId,callback:function(t){e.$set(e.filterParams,"userId",t)},expression:"filterParams.userId"}},e._l(e.vendorOption,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.username}})})),1)],1),t("el-form-item",{attrs:{label:"订购版本:"}},[t("el-select",{attrs:{clearable:""},model:{value:e.filterParams.vipType,callback:function(t){e.$set(e.filterParams,"vipType",t)},expression:"filterParams.vipType"}},[t("el-option",{attrs:{value:"1",label:"免费版"}}),t("el-option",{attrs:{value:"2",label:"标准版"}}),t("el-option",{attrs:{value:"3",label:"专业版"}}),t("el-option",{attrs:{value:"4",label:"尊享版"}})],1)],1),t("el-form-item",{attrs:{label:"开通人:"}},[t("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.filterParams.adminId,callback:function(t){e.$set(e.filterParams,"adminId",t)},expression:"filterParams.adminId"}},e._l(e.adminOption,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.username}})})),1)],1),t("el-form-item",{attrs:{label:"是否加购:"}},[t("el-select",{attrs:{clearable:""},model:{value:e.filterParams.hasAdd,callback:function(t){e.$set(e.filterParams,"hasAdd",t)},expression:"filterParams.hasAdd"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1)],1),t("el-form-item",{attrs:{label:"支付方式:"}},[t("el-select",{attrs:{clearable:""},model:{value:e.filterParams.payment,callback:function(t){e.$set(e.filterParams,"payment",t)},expression:"filterParams.payment"}},[t("el-option",{attrs:{value:1,label:"线下支付"}}),t("el-option",{attrs:{value:2,label:"线上支付"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.getItems}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"danger"},on:{click:e.resetClick}},[e._v("重置")])],1),t("el-form-item",[t("el-button",{attrs:{type:"warning",disabled:!e.isWrite},on:{click:e.batchExport}},[e._v("批量导出")])],1)],1)],1)],1),t("el-card",{staticClass:"mt-20",staticStyle:{"margin-right":"30px"}},[t("el-row",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],attrs:{data:e.items},on:{"selection-change":e.selectionChange}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{width:"140px",label:"付款时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.$moment(1e3*t.row.timeCreated).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),t("el-table-column",{attrs:{width:"140px",label:"交易编号",prop:"code"}}),t("el-table-column",{attrs:{label:"支付方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.payment?[e._v("线下支付")]:e._e(),2==t.row.payment?[e._v("线上支付")]:e._e()]}}])}),t("el-table-column",{attrs:{width:"140px",label:"供应商"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.vendorName)+" ")]}}])}),t("el-table-column",{attrs:{label:"订购版本"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.vipType?[e._v("免费版")]:e._e(),2==t.row.vipType?[e._v("标准版")]:e._e(),3==t.row.vipType?[e._v("专业版")]:e._e(),4==t.row.vipType?[e._v("尊享版")]:e._e(),0==t.row.vipType?[e._v("--")]:e._e()]}}])}),t("el-table-column",{attrs:{label:"付款金额￥",prop:"vipAmount"}}),t("el-table-column",{attrs:{label:"加购项目"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.extraJson.addPack&&a.row.extraJson.addPack.length>0?t("div",e._l(a.row.extraJson.addPack,(function(s,i){return t("span",{key:i},["service"==s.object?t("span",[e._v("服务包")]):e._e(),"mail"==s.object?t("span",[e._v("邮件加油包")]):e._e(),"product"==s.object?t("span",[e._v("商品上架数")]):e._e(),"order"==s.object?t("span",[e._v("订单拉取数")]):e._e(),"subUser"==s.object?t("span",[e._v("子账号数量")]):e._e(),i!=a.row.extraJson.addPack.length-1?[t("br")]:e._e()],2)})),0):t("div",[e._v(" -- ")])]}}])}),t("el-table-column",{attrs:{label:"付款金额￥",prop:"addAmount"}}),t("el-table-column",{attrs:{label:"总额￥"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.totalAmount||Number(t.row.addAmount)+Number(t.row.vipAmount))+" ")]}}])}),t("el-table-column",{attrs:{label:"开通人"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.adminName||"--"))])]}}])}),t("el-table-column",{attrs:{label:"支付凭证"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.extraJson.imgUrl?t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{fit:"contain",src:a.row.extraJson.imgUrl,"preview-src-list":[a.row.extraJson.imgUrl]}}):t("span",[e._v("--")])]}}])}),t("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.extraJson.remark)+" ")]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{type:"primary",disabled:!e.isWrite},on:{click:function(t){return e.exportData(a.row)}}},[e._v("导出")]),e._v("  ")]}}])})],1)],1),t("el-row",{staticClass:"footer"},[t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},i=[],r={data(){return{dataLoading:!1,vendorLoading:!1,isWrite:!1,items:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},filterParams:{userId:"",code:"",totalAmount:"",vipType:"",adminId:"",hasAdd:"",payment:"",timeCreatedFrom:"",timeCreatedTo:""},selectArr:[],dateArr:[],adminOption:[],vendorOption:[],pagination:{currentPage:1,pageSize:10,total:0}}},mounted(){this.isWrite=this.$isRole(this.$route.meta.roleWrite),this.getItems(),this.getAdminList()},methods:{getAdminList(){this.$apiCall("api.Admin.findsAdmin",{all:!0},e=>{9999==e.ErrorCode?this.adminOption=e.Data.Results:this.$message({message:e.Message,type:"error"})})},getVendorList(e){e.length<=1||(this.vendorLoading=!0,this.$apiCall("api.Admin.vendorList",{usernameLike:e},e=>{this.vendorLoading=!1,9999==e.ErrorCode?this.vendorOption=e.Data.Results:this.$message({message:e.Message,type:"error"})}))},selectionChange(e){console.log(e),this.selectArr=[],e.forEach((e,t)=>{this.selectArr.push(e.id)})},batchExport(){this.$apiCall("api.Admin.exportVipRecord",{userId:this.filterParams.userId,code:this.filterParams.code,vipType:this.filterParams.vipType,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,totalAmount:this.filterParams.totalAmount,hasAdd:this.filterParams.hasAdd,adminId:this.filterParams.adminId,ids:this.selectArr},e=>{9999==e.ErrorCode?window.open(e.Data.Results):this.$elementMessage(e.Message,"error")})},exportData(e){this.$apiCall("api.Admin.exportVipRecord",{ids:[e.id]},e=>{9999==e.ErrorCode?window.open(e.Data.Results):this.$elementMessage(e.Message,"error")})},getItems(){this.dataLoading=!0,this.$apiCall("api.Admin.getVipRecord",{userId:this.filterParams.userId,code:this.filterParams.code,vipType:this.filterParams.vipType,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,totalAmount:this.filterParams.totalAmount,hasAdd:this.filterParams.hasAdd,payment:this.filterParams.payment,adminId:this.filterParams.adminId,page:this.pagination.currentPage,rowsPerPage:this.pagination.pageSize},e=>{this.dataLoading=!1,9999==e.ErrorCode?(this.items=e.Data.Results,this.pagination.total=Number(e.Data.Pagination.totalCount),this.items.forEach(e=>{e.extraJson=JSON.parse(e.extraJson)})):this.$elementMessage(e.Message,"error")})},handleSizeChange(e){this.pagination.pageSize=e,this.getItems()},handleCurrentChange(e){this.pagination.currentPage=e,this.getItems()},resetClick(){this.filterParams={userId:"",code:"",totalAmount:"",vipType:"",adminId:"",hasAdd:"",timeCreatedFrom:"",timeCreatedTo:""},this.dateArr=[],this.getItems()},dateChange(e){e?(this.filterParams.timeCreatedFrom=new Date(this.dateArr[0]).getTime()/1e3,this.filterParams.timeCreatedTo=new Date(this.dateArr[1]).getTime()/1e3):(this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="")}}},o=r,l=(a("aca8"),a("2877")),n=Object(l["a"])(o,s,i,!1,null,"f0a2551c",null);t["default"]=n.exports},2957:function(e,t,a){"use strict";a("d690")},"38b4":function(e,t,a){"use strict";a("6af3")},"3d3e":function(e,t,a){},"3e7c":function(e,t,a){},4601:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"contentpanel dashboard-page"},[t("div",{staticClass:"pagetitle"},[t("div",{staticClass:"left"},[t("div",{staticClass:"title"},[t("i",{staticClass:"el-icon-s-home"}),t("h2",[e._v(e._s(e.$t("dashboard.dashboard")))])])]),t("div",{staticClass:"right"})]),t("div",{staticClass:"pagebody",staticStyle:{display:"none"}},[t("el-row",{staticClass:"mg-b-30",attrs:{gutter:15}},[t("el-col",{attrs:{span:14}},[t("el-card",[t("el-row",{attrs:{gutter:10}},[t("el-col",{staticClass:"d-flex align-items-center mg-b-30 top-box-wrap",attrs:{span:12}},[t("div",{staticClass:"top-box"},[t("div",{staticClass:"left"},[t("div",{staticClass:"title"},[e._v(e._s(e.$t("dashboard.customerAdded")))]),t("div",{staticClass:"t-link"},[t("el-link",{staticClass:"mg-r-10",attrs:{type:"primary",href:"#/my-custom"}},[e._v(e._s(e.$store.state.cnt.customerCnt))]),e._v(" "+e._s(e.$t("dashboard.pcs"))+" ")],1)]),t("i",{staticClass:"el-icon-s-custom"})])]),t("el-col",{staticClass:"d-flex align-items-center mg-b-30 top-box-wrap",attrs:{span:12}},[t("div",{staticClass:"top-box"},[t("div",{staticClass:"left"},[t("div",{staticClass:"title"},[e._v(e._s(e.$t("dashboard.authorizedShopifyCustomers")))]),t("div",{staticClass:"t-link"},[t("el-link",{staticClass:"mg-r-10",attrs:{type:"primary",href:"#/my-custom?isAuth=true"}},[e._v(e._s(e.$store.state.cnt.customerAuthCnt))]),e._v(" "+e._s(e.$t("dashboard.pcs"))+" ")],1)]),t("i",{staticClass:"el-icon-s-goods"})])]),t("el-col",{staticClass:"d-flex align-items-center top-box-wrap",attrs:{span:12}},[t("div",{staticClass:"top-box"},[t("div",{staticClass:"left"},[t("div",{staticClass:"title"},[e._v(e._s(e.$t("dashboard.validInvoice")))]),t("div",{staticClass:"t-link"},[t("el-link",{staticClass:"mg-r-10",attrs:{type:"primary",href:"#/my-invoice"}},[e._v(" "+e._s(e.$store.state.cnt.invoiceCnt)+" ")]),e._v(" "+e._s(e.$t("dashboard.pcs"))+" ")],1)]),t("i",{staticClass:"el-icon-s-order"})])])],1)],1)],1),t("el-col",{attrs:{offset:1,span:7}},[t("el-card",{staticClass:"add-box"},[t("a",{staticClass:"d-flex",attrs:{href:"javascript:;"},on:{click:e.openAddVendor}},[t("i",{staticClass:"el-icon-plus"}),t("span",[e._v(e._s(e.$t("dashboard.addNumCustomer",{num:Number(e.$store.state.cnt.customerCnt)+1})))])])])],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:22}},[e.lastVendor.length?t("div",{staticClass:"last-customer"},[t("div",{staticClass:"header"},[e._v(" "+e._s(e.$t("dashboard.recentCooperation"))+" "),t("el-link",{attrs:{type:"primary",href:"#/my-custom"}},[e._v(e._s(e.$t("dashboard.more")))])],1),t("el-row",{attrs:{gutter:20}},e._l(e.lastVendor,(function(a,s){return t("el-col",{key:a.id,attrs:{xl:6,lg:12,md:12}},[t("el-card",{staticClass:"c-box"},[t("div",{staticClass:"c-box-content"},[t("div",{staticClass:"left tx-ellipsis1",attrs:{title:a.customerName}},[t("i",{staticClass:"avatar-title",style:{backgroundColor:e.aBg[s]}},[e._v(e._s(a.customerName.substr(0,1)))]),t("div",{staticClass:"name tx-ellipsis1",staticStyle:{"max-width":"100px"}},[e._v(e._s(a.customerName))])]),t("div",{staticClass:"right"},[t("div",{staticClass:"mg-b-10 d-flex align-items-center v-content"},[t("span",{staticClass:"v-content-title"},[e._v(e._s(e.$t("dashboard.validInvoice2")))]),t("el-link",{staticClass:"v-content-val",attrs:{type:"primary"},on:{click:function(t){return e.gotoInvoice(a)}}},[e._v(e._s(a.invoiceCnt))])],1),t("div",{staticClass:"mg-b-20 d-flex align-items-center v-content"},[t("span",{staticClass:"v-content-title"},[e._v(e._s(e.$t("dashboard.authorizedShopifyStores")))]),t("span",{staticClass:"v-content-val"},[e._v(e._s(a.customerAuthCnt))])]),t("div",{staticClass:"tx-right"},[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.gotoCustom(a)}}},[e._v(" "+e._s(e.$t("mycustomer.Invitecustomers2"))+" ")])],1)])])])],1)})),1)],1):e._e()])],1)],1),t("div",{staticClass:"pagebodytwo",staticStyle:{display:"block"}},[t("el-row",{staticClass:"mg-b-30 user-status-list",attrs:{gutter:20}},[t("el-col",{attrs:{span:6,xs:24,sm:12,md:6,lg:6,type:"flex"}},[t("div",{staticClass:"user-status-item",on:{click:function(t){return e.gotoPage(1)}}},[t("div",{staticClass:"status-icon"},[t("i",{staticClass:"iconfont icon-daiwanshankaoshi"})]),t("div",{staticClass:"status-content"},[t("div",{staticClass:"status-num",staticStyle:{color:"#e6a23c"}},[e._v(e._s(e.vendorDashboardSummary.waitCompleteCnt||"0"))]),t("div",{staticClass:"status-description"},[e._v(e._s(e.$t("dashboard.待完善报价的采购单")))])])])]),t("el-col",{attrs:{span:6,xs:24,sm:12,md:6,lg:6,type:"flex"}},[t("div",{staticClass:"user-status-item",on:{click:function(t){return e.gotoPage(2)}}},[t("div",{staticClass:"status-icon"},[t("i",{staticClass:"el-icon-truck"})]),t("div",{staticClass:"status-content"},[t("div",{staticClass:"status-num",staticStyle:{color:"#e6a23c"}},[e._v(e._s(e.vendorDashboardSummary.waitDeliverCnt||"0"))]),t("div",{staticClass:"status-description"},[e._v(e._s(e.$t("dashboard.待发货的采购单")))])])])]),t("el-col",{attrs:{span:6,xs:24,sm:12,md:6,lg:6,type:"flex"}},[t("div",{staticClass:"user-status-item",on:{click:function(t){return e.gotoPage(3)}}},[t("div",{staticClass:"status-icon"},[t("i",{staticClass:"el-icon-warning-outline"})]),t("div",{staticClass:"status-content"},[t("div",{staticClass:"status-num",staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.vendorDashboardSummary.abnormalCnt||"0"))]),t("div",{staticClass:"status-description"},[e._v(e._s(e.$t("dashboard.订单异常禁止发货")))])])])]),t("el-col",{attrs:{span:6,xs:24,sm:12,md:6,lg:6,type:"flex"}},[t("div",{staticClass:"user-status-item",on:{click:function(t){return e.gotoPage(4)}}},[t("div",{staticClass:"status-icon"},[t("i",{staticClass:"el-icon-refresh"})]),t("div",{staticClass:"status-content"},[t("div",{staticClass:"status-num",staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.vendorDashboardSummary.syncFailCnt||"0"))]),t("div",{staticClass:"status-description"},[e._v(e._s(e.$t("dashboard.同步发货信息失败")))])])])])],1),t("div",{staticClass:"chart mg-b-30"},[t("div",{staticClass:"chart-header"},[t("div",{staticClass:"chart-title"},[e._v(e._s(e.$t("dashboard.销售统计")))]),t("div",{staticClass:"chart-right"},[t("el-date-picker",{attrs:{"picker-options":e.pickerOptions0,"value-format":"yyyyMMdd",type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":e.$t("dashboard.起始"),"end-placeholder":e.$t("dashboard.截止")},on:{change:e.dateChange},model:{value:e.statisticDate,callback:function(t){e.statisticDate=t},expression:"statisticDate"}}),t("el-select",{staticClass:"mg-l-20",staticStyle:{width:"200px"},attrs:{placeholder:e.$t("dashboard.日期范围")},on:{change:e.dateRangeChange},model:{value:e.statisticDateRange,callback:function(t){e.statisticDateRange=t},expression:"statisticDateRange"}},e._l(e.dateArr,(function(a,s){return t("el-option",{key:a,attrs:{label:e.$t(a),value:s}})})),1)],1)]),t("div",{staticClass:"chart-body",staticStyle:{width:"100%"}},[t("div",{ref:"chart",staticStyle:{width:"100%",height:"400px"},attrs:{id:"dashboardCharts"}})])]),t("el-row",{staticClass:"mg-b-30",attrs:{gutter:20}},[t("el-col",{attrs:{span:16,type:"flex"}},[t("div",{staticClass:"day-statistics mg-b-30"},[t("div",{staticClass:"day-statistics-title"},[e._v(e._s(e.$t("dashboard.每日统计")))]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[t("el-table-column",{attrs:{prop:"date",label:e.$t("dashboard.日期")},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"tableTiop"},[e._v(e._s(e.$t("dashboard.日期")))])]},proxy:!0}])}),t("el-table-column",{attrs:{prop:"customerCnt",label:e.$t("dashboard.下单客户量")},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"tableTiop"},[e._v(e._s(e.$t("dashboard.下单客户量")))])]},proxy:!0}])}),t("el-table-column",{attrs:{prop:"orderCnt",label:e.$t("dashboard.订单数")},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"tableTiop"},[e._v(e._s(e.$t("dashboard.订单数")))])]},proxy:!0}])}),t("el-table-column",{attrs:{prop:"amount",label:e.$t("dashboard.销售额US$")},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"tableTiop"},[e._v(e._s(e.$t("dashboard.销售额US$"))+" ")])]},proxy:!0}])})],1),t("div",{staticClass:"day-statistics-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.showMoreReference}},[e._v(e._s(e.$t("dashboard.显示更多")))])],1)],1)]),t("el-col",{attrs:{span:8,type:"flex"}},[t("div",{staticClass:"info-aggregation mg-b-30"},[t("div",{staticClass:"info-aggregation-title"},[e._v(e._s(e.$t("dashboard.信息汇总")))]),t("el-divider"),t("div",{staticClass:"info-aggregation-list"},[t("div",{staticClass:"item",on:{click:function(t){return e.gotoPage(8)}}},[t("div",{staticClass:"icon"},[t("i",{staticClass:"el-icon-sell"})]),t("div",{staticClass:"text"},[t("div",[e._v("上架商品数: "),t("b",[e._v(e._s(e.vendorDashboardSummary.productCnt||"0"))]),e._v(" 件")])])]),t("el-divider"),t("div",{staticClass:"item",on:{click:function(t){return e.gotoPage(5)}}},[t("div",{staticClass:"icon"},[t("i",{staticClass:"el-icon-user-solid"})]),t("div",{staticClass:"text"},[t("div",[e._v("客户总数: "),t("b",[e._v(e._s(e.vendorDashboardSummary.customerCnt||"0"))]),e._v(" 位")])])]),t("el-divider"),t("div",{staticClass:"item",on:{click:function(t){return e.gotoPage(9)}}},[t("div",{staticClass:"icon"},[t("i",{staticClass:"el-icon-s-order"})]),t("div",{staticClass:"text"},[t("div",[e._v("订单总数: "),t("b",[e._v(e._s(e.vendorDashboardSummary.orderCnt||"0"))]),e._v(" 笔")])])]),t("el-divider"),t("div",{staticClass:"item",on:{click:function(t){return e.gotoPage(10)}}},[t("div",{staticClass:"icon"},[t("i",{staticClass:"fa fa-exchange"})]),t("div",{staticClass:"text"},[t("div",[e._v("交易金额: "),t("b",[e._v(e._s(Number(e.vendorDashboardSummary.orderTotalAmount).toFixed(2)||"0"))]),e._v(" 元")])])]),t("el-divider")],1)],1)])],1)],1),t("el-dialog",{attrs:{loading:e.moreReference.loading,title:"Reference",visible:e.moreReference.isShow,width:"800px"},on:{"update:visible":function(t){return e.$set(e.moreReference,"isShow",t)}}},[t("el-divider"),t("div",{staticClass:"mg-t-20 mg-b-20 mg-l-20 mg-r-20"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.moreReference.tableData,stripe:""}},[t("el-table-column",{attrs:{prop:"date",label:e.$t("dashboard.日期"),width:"180"}}),t("el-table-column",{attrs:{prop:"customerCnt",label:e.$t("dashboard.下单客户量")}}),t("el-table-column",{attrs:{prop:"orderCnt",label:e.$t("dashboard.订单数"),width:"180"}}),t("el-table-column",{attrs:{prop:"amount",label:e.$t("dashboard.销售额US$"),width:"180"}})],1)],1),e.tableData.length?t("el-row",{staticClass:"mg-b-20",attrs:{gutter:20}},[t("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[t("div",[t("el-pagination",{attrs:{"current-page":e.moreReference.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.moreReference.pageSizes,"page-size":e.moreReference.rowsPerPage,total:Number(e.moreReference.total)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e(),t("el-divider"),t("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[t("div",[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.moreReference.isShow=!1}}},[e._v("Close")])],1)])],1)],1)},i=[],r={data(){return{statisticDateRange:"3",statisticDateFrom:"",statisticDateTo:"",statisticDate:[],dateArr:{1:"dashboard.今天",2:"dashboard.7天前",3:"dashboard.30天前",4:"dashboard.90天前",5:"dashboard.一年前",6:"dashboard.自定义"},pickerOptions0:{disabledDate(e){return e.getTime()>Date.now()-864e4}},tableData:[],chartData:{columns:[this.$t("dashboard.日期"),this.$t("dashboard.销售额US$"),this.$t("dashboard.订单数")],rows:[]},moreReference:{isShow:!1,pageSizes:[10,20,50,100],page:1,rowsPerPage:10,items:[],total:0,totalPage:0,loading:!1,tableData:[]},vendorDashboardSummary:{waitCompleteCnt:"",waitDeliverCnt:"",abnormalCnt:"",syncFailCnt:"",customerCnt:"",shopCnt:"",offerItemCnt:""},dialogVisibleAddVendor:!1,addVendorDialog:{isShow:!1,loading:!1,labelW:"100px",name:"",remark:"",email:""},addVendorDialogDefault:"{}",lastVendor:[],aBg:["#343a40","#c5a46b","#f46a6a","#34c38f"]}},components:{},methods:{gotoPage(e){switch(e){case 1:this.$router.push({path:"/waiting-for-offer"});break;case 2:this.$router.push({path:"/waiting-for-delivery"});break;case 3:this.$router.push({path:"/abnormal"});break;case 4:this.$router.push({path:"/abnormal"});break;case 5:this.$router.push({path:"/my-custom"});break;case 6:this.$router.push({path:"/shopify-orders"});break;case 7:this.$router.push({path:"/products",query:{filterParams:1}});break;case 8:this.$router.push({path:"/goods-mgr/shelves"});break;case 9:this.$router.push({name:"allOrders"});break;case 10:break}},toPage(e){e!=this.moreReference.page&&(this.moreReference.page=e),this.getTableData()},changePageSize(e){this.moreReference.rowsPerPage=e,this.moreReference.page=1,localStorage.setItem("moreReferenceRowsPerPage",e),this.getTableData()},showMoreReference(){this.moreReference.isShow=!0,this.getTableData()},getTableData(){this.moreReference.loading=!0,this.$apiCall("api.Invoice.vendorDashboardStatistic",{page:this.moreReference.page,rowsPerPage:this.moreReference.rowsPerPage},e=>{this.moreReference.loading=!1,9999==e.ErrorCode?(this.moreReference.tableData=Object.values(e.Data.Results),this.moreReference.tableData.length&&(this.moreReference.tableData.forEach(e=>{this.$set(e,"dateCode1",Number(e.dateCode)),this.$set(e,"date",e.dateCode.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3"))}),this.moreReference.total=Number(e.Data.Pagination.totalCount),this.moreReference.totalPage=Number(e.Data.Pagination.totalPage),this.moreReference.tableData=this.moreReference.tableData.sort(this.sortData))):this.$elementMessage(e.Message,"error")})},dateChange(){this.statisticDate.length>1&&(this.statisticDateFrom=this.$moment(this.statisticDate[0]).format("YYYYMMDD"),this.statisticDateTo=this.$moment(this.statisticDate[1]).format("YYYYMMDD"),this.getCharts(1),this.statisticDateRange="")},dateRangeChange(){let e=this.statisticDateRange;switch(e){case"1":this.statisticDateFrom=this.$moment().format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"2":this.statisticDateFrom=this.$moment().subtract(7,"d").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"3":this.statisticDateFrom=this.$moment().subtract(30,"d").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"4":this.statisticDateFrom=this.$moment().subtract(90,"d").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"5":this.statisticDateFrom=this.$moment().subtract(12,"M").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;default:this.statisticDateFrom="",this.statisticDateTo="";break}this.statisticDate=[this.statisticDateFrom,this.statisticDateTo],this.getCharts(1)},initPageData(){this.$apiCall("api.Invoice.vendorDashboardSummary",{},e=>{9999==e.ErrorCode?this.vendorDashboardSummary=e.Data.Results:this.$message({message:e.Message,type:"error"})}),this.$apiCall("api.Invoice.vendorDashboardStatistic",{page:this.moreReference.page,rowsPerPage:this.moreReference.rowsPerPage},e=>{9999==e.ErrorCode?(this.tableData=Object.values(e.Data.Results),this.tableData.length&&this.tableData.forEach(e=>{this.$set(e,"dateCode1",Number(e.dateCode)),this.$set(e,"date",e.dateCode.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3"))}),this.tableData=this.tableData.reverse()):this.$message({message:e.Message,type:"error"})})},getCharts(e){const t=this.$refs.chart;e||(this.statisticDateFrom=this.$moment().subtract(1,"M").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD"),this.statisticDate=[this.statisticDateFrom,this.statisticDateTo]);let a=[];this.$apiCall("api.Invoice.vendorDashboardStatistic",{dateFrom:this.statisticDateFrom,dateTo:this.statisticDateTo},e=>{if(9999==e.ErrorCode){a=Object.values(e.Data.Results),a.length&&a.forEach(e=>{this.$set(e,"date",e.dateCode.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3"))});const s=this.$echarts.init(t),i={title:{text:""},tooltip:{trigger:"axis"},legend:{data:[this.$t("dashboard.销售额US$"),this.$t("dashboard.订单数")]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a.map(e=>e.date)},yAxis:{type:"value"},series:[{name:this.$t("dashboard.销售额US$"),type:"line",stack:this.$t("dashboard.销售额US$"),data:a.map(e=>e.amount),smooth:!0},{name:this.$t("dashboard.订单数"),type:"line",stack:this.$t("dashboard.订单数"),data:a.map(e=>e.orderCnt),smooth:!0}]};s.setOption(i),setTimeout(()=>{s.resize()},200),window.onresize=function(){s.resize()}}else this.$elementMessage(e.Message,"error")})},changeMail(){this.$root.$children[0].changeUserEmail()},gotoCustom(e){this.$router.push({name:"myCustom",params:{item:e}})},gotoInvoice(e){this.$router.push({name:"allOrders",params:{customerName:e.customerName,id:e.id}})},getLastVendor(){this.$apiCall("api.Relationship.findByVendor",{last:!0,page:1,rowsPerPage:4},e=>{9999==e.ErrorCode?(this.lastVendor=e.Data.Results,this.lastVendor.forEach(e=>{this.$apiCall("api.Relationship.getCntDetail",{relationshipId:e.id},t=>{9999==t.ErrorCode&&(e.invoiceCnt=t.Data.Results.invoiceCnt,e.totalAmount=t.Data.Results.totalAmount,e.orderCnt=t.Data.Results.orderCnt,e.skuCnt=t.Data.Results.skuCnt,e.offerSkuCnt=t.Data.Results.offerSkuCnt,this.lastVendor=[...this.lastVendor])})})):this.$message({message:e.Message,type:"error"})})},addVendorSaveSuccess(){this.$root.$children[0].getCnt(),this.getLastVendor()},openAddVendor(){this.addVendorDialog=JSON.parse(this.addVendorDialogDefault),this.addVendorDialog.isShow=!0},firstCustomer(){this.openAddVendor()},gotoImport(e){this.$router.push({name:"importData",query:{rid:e.id}})}},mounted(){this.addVendorDialogDefault=JSON.stringify(this.addVendorDialog)}},o=r,l=(a("d840"),a("2877")),n=Object(l["a"])(o,s,i,!1,null,"340abbcf",null);t["default"]=n.exports},"66be":function(e,t,a){},"6af3":function(e,t,a){},"6b9b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"comboMg"}},[t("el-card",{staticClass:"comboMg-con"},[t("el-button",{staticClass:"create-package",attrs:{size:"small",type:"primary"},on:{click:e.addPackage}},[e._v("创建套餐")]),t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"常规套餐管理",name:"1"}}),t("el-tab-pane",{attrs:{label:"加购项目",name:"2"}})],1),t("el-row",{directives:[{name:"show",rawName:"v-show",value:"1"==e.activeName,expression:"activeName == '1'"}]},[t("el-table",{attrs:{data:e.table}},[t("el-table-column",{attrs:{prop:"name",label:"套餐名称"}}),t("el-table-column",{attrs:{label:"套餐内容"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v("允许创建店铺数: "+e._s(a.row.shopNum))]),t("div",[e._v("订单总量: "+e._s(a.row.orderNum)+"个")]),t("div",[e._v("店铺创建子账号个数: "+e._s(a.row.subUserCnt)+"个")]),t("div",[e._v("允许上架spu: "+e._s(a.row.productCnt)+"个")])]}}])}),t("el-table-column",{attrs:{prop:"price",label:"套餐金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.amount)+"元/年 ")]}}])}),t("el-table-column",{attrs:{prop:"count",label:"使用人数"}}),t("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{on:{click:function(t){return e.editPackage(a.row)}}},[e._v("编辑")]),"免费版"!=a.row.name&&0==a.row.count?t("el-link",{staticClass:"lf-ma",attrs:{type:"danger"},on:{click:function(t){return e.delPackage(a.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),t("el-row",{directives:[{name:"show",rawName:"v-show",value:"2"==e.activeName,expression:"activeName == '2'"}]},[t("el-table",{attrs:{data:e.items2}},[t("el-table-column",{attrs:{prop:"name",label:"套餐名称"}}),t("el-table-column",{attrs:{prop:"desc",label:"套餐内容"}}),t("el-table-column",{attrs:{prop:"price",label:"套餐金额"}}),t("el-table-column",{attrs:{prop:"count",label:"使用人数"}})],1)],1)],1),t("CreatePackageDialog",{ref:"createPackageDialog"})],1)},i=[],r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.isVisible,width:"1000px",title:1==e.type?"付费创建套餐":"修改套餐","close-on-click-modal":!1,"before-close":e.close},on:{"update:visible":function(t){e.isVisible=t}}},[t("el-divider"),t("div",{},[t("el-form",{ref:"dataForm",attrs:{"label-position":"right","label-width":"200px",model:e.form,rules:e.rules}},[t("el-row",{staticClass:"product-row"},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"套餐名称",prop:"name"}},[t("el-input",{attrs:{placeholder:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),t("el-row",{staticClass:"product-row"},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"创建店铺个数",prop:"shopNum"}},[t("el-input",{attrs:{placeholder:""},model:{value:e.form.shopNum,callback:function(t){e.$set(e.form,"shopNum",t)},expression:"form.shopNum"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"订单总单量",prop:"orderNum"}},[t("el-input",{attrs:{placeholder:""},model:{value:e.form.orderNum,callback:function(t){e.$set(e.form,"orderNum",t)},expression:"form.orderNum"}})],1)],1)],1),t("el-row",{staticClass:"product-row"},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"每个店铺创建子账号的数量",prop:"subUserCnt"}},[t("el-input",{attrs:{placeholder:""},model:{value:e.form.subUserCnt,callback:function(t){e.$set(e.form,"subUserCnt",t)},expression:"form.subUserCnt"}})],1)],1)],1),t("el-row",{staticClass:"product-row"},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"每个店铺允许上架的spu数量",prop:"productCnt"}},[t("el-input",{attrs:{type:"number",placeholder:""},model:{value:e.form.productCnt,callback:function(t){e.$set(e.form,"productCnt",t)},expression:"form.productCnt"}})],1)],1)],1)],1)],1),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.close}},[e._v(" 取消 ")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.confirmClick}},[e._v(" 确定 ")])],1)],1)},o=[],l={data(){return{type:1,isVisible:!1,loading:!1,data:"",form:{name:"",shopNum:"",productCnt:"",orderNum:"",subUserCnt:""},rules:{name:[{required:!0,message:"套餐名称必填",trigger:"blur"}]}}},methods:{openDialog(e){this.isVisible=!0,this.data=e.data,this.type=e.type,2==e.type&&(this.form={name:e.data.name,shopNum:e.data.shopNum,productCnt:e.data.productCnt,orderNum:e.data.orderNum,subUserCnt:e.data.subUserCnt})},confirmClick(){this.$refs["dataForm"].validate(e=>{if(e){var t;this.loading=!0;let e={id:null===(t=this.data)||void 0===t?void 0:t.id,name:this.form.name,shopNum:this.form.shopNum,productCnt:this.form.productCnt,orderNum:this.form.orderNum,subUserCnt:this.form.subUserCnt};this.$apiCall("api.VendorVip.save",e,e=>{this.loading=!1,9999==e.ErrorCode?(this.$parent.getItems(),this.close(),this.$message({message:"保存成功",type:"success"})):this.$message({message:e.Message,type:"error"})})}})},close(){this.isVisible=!1,Object.assign(this._data,this.$options.data()),this.$nextTick(()=>{this.$refs["dataForm"].clearValidate()})}}},n=l,m=a("2877"),d=Object(m["a"])(n,r,o,!1,null,null,null),c=d.exports,u={components:{CreatePackageDialog:c},data(){return{activeName:"1",table:[],items2:[{name:"企业自由品牌服务包",desc:"上架应用至Shopify",price:"150000元",count:0},{name:"邮件套餐加油包",desc:"替供应商发送邮件给站长",price:"10元/1000封",count:0},{name:"商品上架数",desc:"额外商品上架数",price:"100个/1年/10000元",count:0},{name:"子账号",desc:"额外子账号数量",price:"5个/1年/10000元",count:0}],serviceCount:0,mailCount:0}},mounted(){this.getItems()},methods:{handleClick(e){this.activeName},getItems(){this.$apiCall("api.Admin.vipSummary",{},e=>{9999==e.ErrorCode&&(this.items2[0].count=e.Data.Results.serviceCnt,this.items2[1].count=e.Data.Results.mailCnt,this.items2[2].count=e.Data.Results.productCnt,this.items2[3].count=e.Data.Results.subUserCnt,this.table=e.Data.Results.vipInfo)})},addPackage(){this.$refs.createPackageDialog.openDialog({data:"",type:1})},editPackage(e){this.$refs.createPackageDialog.openDialog({data:e,type:2})},delPackage(e){let t={id:e.id};this.$apiCall("api.VendorVip.delete",t,e=>{9999==e.ErrorCode?(this.$message({message:"删除成功",type:"success"}),this.getItems()):this.$message({message:e.Message,type:"error"})})}}},p=u,h=(a("b02f"),Object(m["a"])(p,s,i,!1,null,"4c4e1b44",null));t["default"]=h.exports},"6f20":function(e,t,a){},7304:function(e,t,a){"use strict";a("66be")},"817c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"customer-Mgr"}},[t("el-card",{staticStyle:{"margin-right":"30px"}},[t("el-row",{staticClass:"mlr-30"},[t("el-form",{attrs:{inline:!0,size:"small"}},[t("el-form-item",{attrs:{label:"供应商ID:"}},[t("el-input",{model:{value:e.filterParams.id,callback:function(t){e.$set(e.filterParams,"id",t)},expression:"filterParams.id"}})],1),t("el-form-item",{attrs:{label:"供应商登陆账号:"}},[t("el-input",{model:{value:e.filterParams.username,callback:function(t){e.$set(e.filterParams,"username",t)},expression:"filterParams.username"}})],1),t("el-form-item",{attrs:{label:"店铺名称:"}},[t("el-input",{model:{value:e.filterParams.shopName,callback:function(t){e.$set(e.filterParams,"shopName",t)},expression:"filterParams.shopName"}})],1),t("el-form-item",{attrs:{label:"店铺域名:"}},[t("el-input",{model:{value:e.filterParams.shopUrl,callback:function(t){e.$set(e.filterParams,"shopUrl",t)},expression:"filterParams.shopUrl"}})],1),t("el-form-item",{attrs:{label:"当前套餐类型:"}},[t("el-select",{model:{value:e.filterParams.vipType,callback:function(t){e.$set(e.filterParams,"vipType",t)},expression:"filterParams.vipType"}},[t("el-option",{attrs:{value:"0",label:"全部"}}),t("el-option",{attrs:{value:"1",label:"免费版"}}),t("el-option",{attrs:{value:"2",label:"标准版"}}),t("el-option",{attrs:{value:"3",label:"专业版"}}),t("el-option",{attrs:{value:"4",label:"尊享版"}})],1)],1),t("el-form-item",{attrs:{label:"注册时间:"}},[t("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.getItems}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"danger"},on:{click:e.resetClick}},[e._v("重置")])],1)],1)],1)],1),t("el-card",{staticClass:"mt-20",staticStyle:{"margin-right":"30px"}},[t("el-row",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],attrs:{data:e.items}},[t("el-table-column",{attrs:{label:"供应商ID",prop:"id"}}),t("el-table-column",{attrs:{label:"供应商登录账号",prop:"username"}}),t("el-table-column",{attrs:{label:"店铺名称"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.vendorShop?t("div",[e._v(" "+e._s(a.row.vendorShop.name||"--")+" ")]):t("div",[e._v("--")])]}}])}),t("el-table-column",{attrs:{label:"店铺域名"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.vendorShop&&a.row.vendorShop.url?t("div",[e._v(e._s(a.row.vendorShop.url))]):a.row.vendorShop&&a.row.vendorShop.subDomain?t("div",[e._v(e._s(a.row.vendorShop.subDomain+".myourmall.com"))]):t("div",[e._v("--")])]}}])}),t("el-table-column",{attrs:{label:"当前套餐类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.vipType?[e._v("免费版")]:e._e(),2==t.row.vipType?[e._v("标准版")]:e._e(),3==t.row.vipType?[e._v("专业版")]:e._e(),4==t.row.vipType?[e._v("尊享版")]:e._e()]}}])}),t("el-table-column",{attrs:{label:"注册时间",prop:"timeCreated"}}),t("el-table-column",{attrs:{label:"最近登录时间",prop:"timeLogin"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.nextVip?e._e():t("el-link",{attrs:{type:"primary",disabled:!e.isWrite},on:{click:function(t){return e.modifyCombo(a.row)}}},[e._v("套餐编辑")]),e._v("  "),a.row.nextVip?e._e():t("el-link",{attrs:{type:"primary",disabled:!e.isWrite},on:{click:function(t){return e.comboDetail(a.row)}}},[e._v("套餐详情")]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"存在未生效的套餐, 无法进行修改",placement:"top"}},[a.row.nextVip?t("i",{staticClass:"el-icon-info"}):e._e()])]}}])})],1)],1),t("el-row",{staticClass:"footer"},[t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},i=[],r={data(){return{dataLoading:!1,isWrite:!1,filterParams:{id:"",username:"",shopName:"",shopUrl:"",comboType:"",timeCreatedFrom:"",timeCreatedTo:""},dateArr:[],pagination:{currentPage:1,pageSize:10,total:0},items:[]}},mounted(){this.isWrite=this.$isRole(this.$route.meta.roleWrite),this.getItems()},methods:{comboDetail(e){this.$router.push({path:"/customerMg-detail",query:{id:e.id}})},modifyCombo(e){console.log(e),this.$router.push({path:"/customerMg-modify",query:{id:e.id}})},resetClick(){this.filterParams={id:"",username:"",shopName:"",shopUrl:"",comboType:"",timeCreatedFrom:"",timeCreatedTo:""},this.dateArr=[],this.getItems()},getItems(){this.dataLoading=!0,this.$apiCall("api.Admin.vendorList",{id:this.filterParams.id,username:this.filterParams.username,shopName:this.filterParams.shopName,shopUrl:this.filterParams.shopUrl,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,vipType:this.filterParams.vipType,rowsPerPage:this.pagination.pageSize,page:this.pagination.currentPage},e=>{this.dataLoading=!1,9999==e.ErrorCode?(this.items=e.Data.Results,this.pagination.total=Number(e.Data.Pagination.totalCount)):this.$elementMessage(e.Message,"error")})},handleSizeChange(e){this.pagination.pageSize=e,this.getItems()},handleCurrentChange(e){this.pagination.currentPage=e,this.getItems()},dateChange(e){e?(this.filterParams.timeCreatedFrom=this.$moment(e[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=this.$moment(e[1]).format("YYYY-MM-DD")):(this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="")}}},o=r,l=(a("38b4"),a("2877")),n=Object(l["a"])(o,s,i,!1,null,"1fd70956",null);t["default"]=n.exports},"82f2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"customer-Mgr"}},[t("el-card",{staticStyle:{"margin-right":"30px"}},[t("el-row",{staticClass:"mlr-30"},[t("el-form",{attrs:{inline:!0,size:"small"}},[t("el-form-item",{attrs:{label:"供应商ID:"}},[t("el-input",{model:{value:e.filterParams.id,callback:function(t){e.$set(e.filterParams,"id",t)},expression:"filterParams.id"}})],1),t("el-form-item",{attrs:{label:"供应商登陆账号:"}},[t("el-input",{model:{value:e.filterParams.username,callback:function(t){e.$set(e.filterParams,"username",t)},expression:"filterParams.username"}})],1),t("el-form-item",{attrs:{label:"店铺名称:"}},[t("el-input",{model:{value:e.filterParams.shopName,callback:function(t){e.$set(e.filterParams,"shopName",t)},expression:"filterParams.shopName"}})],1),t("el-form-item",{attrs:{label:"店铺域名:"}},[t("el-input",{model:{value:e.filterParams.shopUrl,callback:function(t){e.$set(e.filterParams,"shopUrl",t)},expression:"filterParams.shopUrl"}})],1),"customerFree"!=e.$route.name?t("el-form-item",{attrs:{label:"当前套餐类型:"}},[t("el-select",{attrs:{clearable:""},model:{value:e.filterParams.vipType,callback:function(t){e.$set(e.filterParams,"vipType",t)},expression:"filterParams.vipType"}},[t("el-option",{attrs:{value:"0",label:"全部"}}),t("el-option",{attrs:{value:"1",label:"免费版"}}),t("el-option",{attrs:{value:"2",label:"标准版"}}),t("el-option",{attrs:{value:"3",label:"专业版"}}),t("el-option",{attrs:{value:"4",label:"尊享版"}})],1)],1):e._e(),t("el-form-item",{attrs:{label:"注册时间:"}},[t("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.getItems}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"danger"},on:{click:e.resetClick}},[e._v("重置")])],1)],1)],1)],1),t("el-card",{staticClass:"mt-20",staticStyle:{"margin-right":"30px"}},[t("el-row",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],attrs:{data:e.items}},[t("el-table-column",{attrs:{label:"供应商ID",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.id||"--"))]}}])}),t("el-table-column",{attrs:{label:"供应商登录账号",prop:"username"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.username||"--"))]}}])}),t("el-table-column",{attrs:{label:"店铺名称"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.vendorShop?t("div",[e._v(" "+e._s(a.row.vendorShop.name||"--")+" ")]):t("div",[e._v("--")])]}}])}),t("el-table-column",{attrs:{label:"店铺域名"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.vendorShop&&a.row.vendorShop.url?t("div",[e._v(e._s(a.row.vendorShop.url))]):a.row.vendorShop&&a.row.vendorShop.subDomain?t("div",[e._v(e._s(a.row.vendorShop.subDomain+".myourmall.com"))]):t("div",[e._v("--")])]}}])}),"customerFree"!=e.$route.name?t("el-table-column",{attrs:{label:"当前套餐类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.vipType?[e._v("免费版")]:e._e(),2==t.row.vipType?[e._v("标准版")]:e._e(),3==t.row.vipType?[e._v("专业版")]:e._e(),4==t.row.vipType?[e._v("尊享版")]:e._e()]}}],null,!1,2213083597)}):e._e(),t("el-table-column",{attrs:{label:"注册时间",prop:"timeCreated"}}),t("el-table-column",{attrs:{label:"最近登录时间",prop:"timeLogin"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.timeLogin||"--"))]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return["customerAll"==e.$route.name?t("div",[t("el-link",{staticClass:"mg-r-10",attrs:{type:"primary"},on:{click:function(t){return e.detailHandle(a.row)}}},[e._v("客户信息")]),a.row.nextVip?e._e():t("el-link",{attrs:{disabled:!e.isWrite,type:"primary"},on:{click:function(t){return e.comboDetail(a.row)}}},[e._v("套餐详情")]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"存在未生效的套餐, 无法进行修改",placement:"top"}},[a.row.nextVip?t("i",{staticClass:"el-icon-info"}):e._e()])],1):t("div",[!a.row.nextVip&&e.isWrite?t("el-dropdown",{on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link",on:{click:function(t){return e.modifyCombo(a.row)}}},[e._v(" 套餐编辑"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:{command:"vipDetail",data:a.row}}},[e._v("套餐详情")]),t("el-dropdown-item",{attrs:{command:{command:"editCustomer",data:a.row}}},[e._v("客户编辑")]),t("el-dropdown-item",{attrs:{command:{command:"customerDetail",data:a.row}}},[e._v("客户信息")])],1)],1):e._e(),a.row.nextVip||e.isWrite?e._e():t("el-dropdown",{on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link",on:{click:function(t){return e.comboDetail(a.row)}}},[e._v(" 套餐详情"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:{command:"customerDetail",data:a.row}}},[e._v("客户信息")])],1)],1),a.row.nextVip&&e.isWrite?t("el-dropdown",{on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[e._v(" 客户编辑"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:{command:"customerDetail",data:a.row}}},[e._v("客户信息")])],1)],1):e._e(),a.row.nextVip&&!e.isWrite?t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.detailHandle(a.row)}}},[e._v("客户信息")]):e._e(),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"存在未生效的套餐, 无法进行修改",placement:"top"}},[a.row.nextVip?t("i",{staticClass:"el-icon-info"}):e._e()])],1)]}}])})],1)],1),t("el-row",{staticClass:"footer"},[t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{width:"500px",title:"编辑客户信息","close-on-click-modal":!1,visible:e.addOrEditVisible},on:{close:e.dialogCloseHandle}},[t("el-row",{staticClass:"dialog"},[t("el-form",{attrs:{size:"small"}},[t("el-form-item",{attrs:{label:"客户名称"}},[t("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),t("el-form-item",{attrs:{label:"电话"}},[t("el-input",{model:{value:e.dialogForm.mobile,callback:function(t){e.$set(e.dialogForm,"mobile",t)},expression:"dialogForm.mobile"}})],1),t("el-form-item",{attrs:{label:"邮箱"}},[t("el-input",{model:{value:e.dialogForm.email,callback:function(t){e.$set(e.dialogForm,"email",t)},expression:"dialogForm.email"}})],1),t("el-form-item",{attrs:{label:"客户来源"}},[t("el-select",{staticStyle:{width:"460px"},model:{value:e.dialogForm.source,callback:function(t){e.$set(e.dialogForm,"source",t)},expression:"dialogForm.source"}},[t("el-option",{attrs:{value:"1",label:"官网咨询"}}),t("el-option",{attrs:{value:"2",label:"客户介绍"}}),t("el-option",{attrs:{value:"3",label:"展会获客"}}),t("el-option",{attrs:{value:"4",label:"陌拜获客"}}),t("el-option",{attrs:{value:"5",label:"自然获客"}}),t("el-option",{attrs:{value:"9",label:"其他"}})],1)],1),t("el-form-item",{attrs:{label:"联系人"}},[t("el-input",{model:{value:e.dialogForm.contact,callback:function(t){e.$set(e.dialogForm,"contact",t)},expression:"dialogForm.contact"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.remark,callback:function(t){e.$set(e.dialogForm,"remark",t)},expression:"dialogForm.remark"}})],1)],1),t("div",{staticClass:"tx-center"},[t("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.dialogCloseHandle}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.editCustomerHandle}},[e._v("确定")])],1)],1)],1),t("el-dialog",{attrs:{title:"查看客户信息",width:"500px","close-on-click-modal":!1,visible:e.detailVisible},on:{close:e.detailCloseHandle}},[t("el-row",{staticClass:"dialog mg-l-50"},[t("el-form",{attrs:{size:"small"}},[t("el-form-item",{attrs:{label:"客户名称:"}},[e._v(e._s(e.dialogForm.name||"--"))]),t("el-form-item",{attrs:{label:"电话:"}},[e._v(e._s(e.dialogForm.mobile||"--"))]),t("el-form-item",{attrs:{label:"邮箱:"}},[e._v(e._s(e.dialogForm.email||"--"))]),t("el-form-item",{attrs:{label:"客户来源:"}},[1==e.dialogForm.source?t("div",[e._v("官网咨询")]):e._e(),2==e.dialogForm.source?t("div",[e._v("客户介绍")]):e._e(),3==e.dialogForm.source?t("div",[e._v("展会获客")]):e._e(),4==e.dialogForm.source?t("div",[e._v("陌拜客户")]):e._e(),9==e.dialogForm.source?t("div",[e._v("其他")]):e._e(),5==e.dialogForm.source?t("div",[e._v("自然获客")]):e._e()]),t("el-form-item",{attrs:{label:"联系人:"}},[e._v(e._s(e.dialogForm.contact||"--"))]),t("el-form-item",{attrs:{label:"提交时间:"}},[e._v(e._s(e.dialogForm.timeCreated||"--"))]),t("el-form-item",{attrs:{label:"供应商ID:"}},[e._v(e._s(e.dialogForm.id||"--"))]),t("el-form-item",{attrs:{label:"供应商登录账号:"}},[e._v(e._s(e.dialogForm.username||"--"))]),t("el-form-item",{attrs:{label:"店铺名称:"}},[e._v(e._s(e.dialogForm.shopName||"--"))]),t("el-form-item",{attrs:{label:"店铺域名:"}},[e._v(e._s(e.dialogForm.url||"--"))]),t("el-form-item",{attrs:{label:"注册时间:"}},[e._v(e._s(e.dialogForm.registerTime||"--"))]),t("el-form-item",{attrs:{label:"最近登录时间:"}},[e._v(e._s(e.dialogForm.lastLoginTime||"--"))]),t("el-form-item",{attrs:{label:"备注:"}},[e._v(e._s(e.dialogForm.remark||"--"))])],1),t("el-row",{staticClass:"tx-center"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.detailCloseHandle}},[e._v("关闭")])],1)],1)],1)],1)},i=[],r={data(){return{detailVisible:!1,addOrEditVisible:!1,customerId:null,dialogForm:{name:"",mobile:"",email:"",source:"",contact:"",remark:""},dataLoading:!1,isWrite:!1,filterParams:{id:"",username:"",shopName:"",shopUrl:"",comboType:"",timeCreatedFrom:"",timeCreatedTo:""},dateArr:[],pagination:{currentPage:1,pageSize:10,total:0},items:[]}},watch:{$route(){this.resetClick()}},mounted(){this.isWrite=this.$isRole(this.$route.meta.roleWrite),this.getItems()},methods:{editCustomerHandle(){this.dialogForm.email||this.dialogForm.mobile?this.dialogForm.source?this.$apiCall("api.Admin.changeVendor",{id:this.customerId,email:this.dialogForm.email,phone:this.dialogForm.mobile,name:this.dialogForm.name,source:this.dialogForm.source,linkman:this.dialogForm.contact,remark:this.dialogForm.remark},e=>{9999==e.ErrorCode?(this.$elementMessage("编辑客户成功","success"),this.dialogCloseHandle(),this.getItems()):this.$elementMessage(e.Message,"error")}):this.$elementMessage("请填写客户来源","error"):this.$elementMessage("请至少要填写电话或者邮箱中其中一项","error")},dialogCloseHandle(){this.addOrEditVisible=!1,this.customerId=null,this.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:""}},detailCloseHandle(){this.detailVisible=!1,this.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:""}},detailHandle(e){this.detailVisible=!0,this.customerId=e.id,this.$apiCall("api.Admin.getVendor",{id:this.customerId},e=>{if(9999==e.ErrorCode){let t=e.Data.Results;this.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:"",id:t.id,username:t.username,shopName:"",url:"",registerTime:t.timeCreated,lastLoginTime:t.timeLogin,timeCreated:""},t.vendorShop&&(this.dialogForm.shopName=t.vendorShop.name,t.vendorShop.url?this.dialogForm.url=t.vendorShop.url:t.vendorShop.subDomain&&(this.dialogForm.url=t.vendorShop.subDomain+".myourmall.com")),t.lead&&(this.dialogForm.name=t.lead.name,this.dialogForm.mobile=t.lead.phone,this.dialogForm.email=t.lead.email,this.dialogForm.source=t.lead.source,this.dialogForm.contact=t.lead.linkman,this.dialogForm.remark=t.lead.remark,this.dialogForm.timeCreated=t.lead.timeCreated)}else this.$elementMessage(e.Message,"error")})},editCustomer(e){this.addOrEditVisible=!0,this.customerId=e.id,this.$apiCall("api.Admin.getVendor",{id:this.customerId},e=>{if(9999==e.ErrorCode){let t=e.Data.Results;this.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:""},t.lead&&(this.dialogForm.name=t.lead.name,this.dialogForm.mobile=t.lead.phone,this.dialogForm.email=t.lead.email,this.dialogForm.source=t.lead.source,this.dialogForm.contact=t.lead.linkman,this.dialogForm.remark=t.lead.remark)}else this.$elementMessage(e.Message,"error")})},handleCommand(e){switch(e.command){case"editVip":this.modifyCombo(e.data);break;case"vipDetail":this.comboDetail(e.data);break;case"editCustomer":this.editCustomer(e.data);break;case"customerDetail":this.detailHandle(e.data);break;default:break}},comboDetail(e){this.$router.push({path:"/customerMg-detail",query:{id:e.id}})},modifyCombo(e){console.log(e),this.$router.push({path:"/customerMg-modify",query:{id:e.id}})},resetClick(){this.filterParams={id:"",username:"",shopName:"",shopUrl:"",comboType:"",timeCreatedFrom:"",timeCreatedTo:""},this.dateArr=[],this.getItems()},getItems(){this.dataLoading=!0,"customerFree"==this.$route.name&&(this.filterParams.vipType="1");let e=null;"customerPay"==this.$route.name&&(e=["4","2","3"]),this.$apiCall("api.Admin.vendorList",{id:this.filterParams.id,vipTypeIn:e,username:this.filterParams.username,shopName:this.filterParams.shopName,shopUrl:this.filterParams.shopUrl,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,vipType:this.filterParams.vipType,rowsPerPage:this.pagination.pageSize,page:this.pagination.currentPage},e=>{this.dataLoading=!1,9999==e.ErrorCode?(this.items=e.Data.Results,this.pagination.total=Number(e.Data.Pagination.totalCount)):this.$elementMessage(e.Message,"error")})},handleSizeChange(e){this.pagination.pageSize=e,this.getItems()},handleCurrentChange(e){this.pagination.currentPage=e,this.getItems()},dateChange(e){e?(this.filterParams.timeCreatedFrom=this.$moment(e[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=this.$moment(e[1]).format("YYYY-MM-DD")):(this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="")}}},o=r,l=(a("dc2b"),a("d689"),a("2877")),n=Object(l["a"])(o,s,i,!1,null,"26e0d731",null);t["default"]=n.exports},"8ac8":function(e,t,a){},aca8:function(e,t,a){"use strict";a("8ac8")},b02f:function(e,t,a){"use strict";a("eb2c")},c2af:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"unregistered"}},[t("el-row",{staticClass:"mg-b-20 mg-r-30",staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addCustomer}},[e._v("新增客户")])],1),t("el-card",{staticClass:"mg-r-30"},[t("el-form",{attrs:{inline:!0,size:"small"}},[t("el-form-item",{attrs:{label:"供应商名称:"}},[t("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getItems.apply(null,arguments)}},model:{value:e.filterParams.name,callback:function(t){e.$set(e.filterParams,"name",t)},expression:"filterParams.name"}})],1),t("el-form-item",{attrs:{label:"供应商手机号:"}},[t("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getItems.apply(null,arguments)}},model:{value:e.filterParams.mobile,callback:function(t){e.$set(e.filterParams,"mobile",t)},expression:"filterParams.mobile"}})],1),t("el-form-item",{attrs:{label:"供应商邮箱:"}},[t("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getItems.apply(null,arguments)}},model:{value:e.filterParams.email,callback:function(t){e.$set(e.filterParams,"email",t)},expression:"filterParams.email"}})],1),t("el-form-item",{attrs:{label:"客户来源:"}},[t("el-select",{attrs:{clearable:""},model:{value:e.filterParams.source,callback:function(t){e.$set(e.filterParams,"source",t)},expression:"filterParams.source"}},[t("el-option",{attrs:{value:"1",label:"官网咨询"}}),t("el-option",{attrs:{value:"2",label:"客户介绍"}}),t("el-option",{attrs:{value:"3",label:"展会获客"}}),t("el-option",{attrs:{value:"4",label:"陌拜获客"}}),t("el-option",{attrs:{value:"5",label:"自然获客"}}),t("el-option",{attrs:{value:"9",label:"其他"}})],1)],1),t("el-form-item",{attrs:{label:"联系人:"}},[t("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getItems.apply(null,arguments)}},model:{value:e.filterParams.contact,callback:function(t){e.$set(e.filterParams,"contact",t)},expression:"filterParams.contact"}})],1),t("el-form-item",{attrs:{label:"提交时间:"}},[t("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.getItems}},[e._v("查询")]),t("el-button",{attrs:{type:"warning"},on:{click:e.resetClick}},[e._v("重置")])],1)],1)],1),t("el-card",{staticClass:"mg-t-30"},[t("el-table",{attrs:{data:e.items}},[t("el-table-column",{attrs:{label:"供应商名称",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name||"--"))]}}])}),t("el-table-column",{attrs:{label:"供应商手机号",prop:"phone"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.phone||"--"))]}}])}),t("el-table-column",{attrs:{label:"邮箱",prop:"email"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.email||"--"))]}}])}),t("el-table-column",{attrs:{label:"客户来源"},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.source?t("div",[e._v("官网咨询")]):e._e(),2==a.row.source?t("div",[e._v("客户介绍")]):e._e(),3==a.row.source?t("div",[e._v("展会获客")]):e._e(),4==a.row.source?t("div",[e._v("陌拜获客")]):e._e(),9==a.row.source?t("div",[e._v("其他")]):e._e(),5==a.row.source?t("div",[e._v("自然获客")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"联系人",prop:"linkman"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.linkman||"--"))]}}])}),t("el-table-column",{attrs:{label:"提交时间",prop:"timeCreated"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{staticClass:"mg-r-10",attrs:{type:"primary"},on:{click:function(t){return e.editCustomer(a.row)}}},[e._v("编辑")]),t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.detailHandle(a.row)}}},[e._v("查看")])]}}])})],1),t("el-row",{staticClass:"mg-t-20 tx-center"},[t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{width:"500px",title:1==e.isAdd?"新增客户":"编辑客户信息","close-on-click-modal":!1,visible:e.addOrEditVisible},on:{close:e.dialogCloseHandle}},[t("el-row",{staticClass:"dialog"},[t("el-form",{attrs:{size:"small"}},[t("el-form-item",{attrs:{label:"客户名称"}},[t("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),t("el-form-item",{attrs:{label:"电话"}},[t("el-input",{model:{value:e.dialogForm.mobile,callback:function(t){e.$set(e.dialogForm,"mobile",t)},expression:"dialogForm.mobile"}})],1),t("el-form-item",{attrs:{label:"邮箱"}},[t("el-input",{model:{value:e.dialogForm.email,callback:function(t){e.$set(e.dialogForm,"email",t)},expression:"dialogForm.email"}})],1),t("el-form-item",{attrs:{label:"客户来源"}},[t("el-select",{staticStyle:{width:"460px"},attrs:{clearable:""},model:{value:e.dialogForm.source,callback:function(t){e.$set(e.dialogForm,"source",t)},expression:"dialogForm.source"}},[t("el-option",{attrs:{value:"1",label:"官网咨询"}}),t("el-option",{attrs:{value:"2",label:"客户介绍"}}),t("el-option",{attrs:{value:"3",label:"展会获客"}}),t("el-option",{attrs:{value:"4",label:"陌拜获客"}}),t("el-option",{attrs:{value:"5",label:"自然获客"}}),t("el-option",{attrs:{value:"9",label:"其他"}})],1)],1),t("el-form-item",{attrs:{label:"联系人"}},[t("el-input",{model:{value:e.dialogForm.contact,callback:function(t){e.$set(e.dialogForm,"contact",t)},expression:"dialogForm.contact"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.remark,callback:function(t){e.$set(e.dialogForm,"remark",t)},expression:"dialogForm.remark"}})],1)],1),t("div",{staticClass:"tx-center"},[t("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.dialogCloseHandle}},[e._v("取消")]),e.isAdd?t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addCustomerHandle}},[e._v("确定")]):e._e(),e.isAdd?e._e():t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.editCustomerHandle}},[e._v("确定")])],1)],1)],1),t("el-dialog",{attrs:{title:"查看客户信息",width:"500px",visible:e.detailVisible,"close-on-click-modal":!1},on:{close:e.detailCloseHandle}},[t("el-row",{staticClass:"dialog mg-l-50"},[t("el-form",{attrs:{size:"small"}},[t("el-form-item",{attrs:{label:"客户名称:"}},[e._v(e._s(e.dialogForm.name))]),t("el-form-item",{attrs:{label:"电话:"}},[e._v(e._s(e.dialogForm.mobile))]),t("el-form-item",{attrs:{label:"邮箱:"}},[e._v(e._s(e.dialogForm.email))]),t("el-form-item",{attrs:{label:"客户来源:"}},[1==e.dialogForm.source?t("div",[e._v("官网咨询")]):e._e(),2==e.dialogForm.source?t("div",[e._v("客户介绍")]):e._e(),3==e.dialogForm.source?t("div",[e._v("展会获客")]):e._e(),4==e.dialogForm.source?t("div",[e._v("陌拜获客")]):e._e(),9==e.dialogForm.source?t("div",[e._v("其他")]):e._e(),5==e.dialogForm.source?t("div",[e._v("自然获客")]):e._e()]),t("el-form-item",{attrs:{label:"联系人:"}},[e._v(e._s(e.dialogForm.contact))]),t("el-form-item",{attrs:{label:"提交时间:"}},[e._v(e._s(e.dialogForm.timeCreated))]),t("el-form-item",{attrs:{label:"备注:"}},[e._v(e._s(e.dialogForm.remark))])],1),t("el-row",{staticClass:"tx-center"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.detailCloseHandle}},[e._v("关闭")])],1)],1)],1)],1)},i=[],r={data(){return{isAdd:!1,detailVisible:!1,addOrEditVisible:!1,dialogForm:{name:"",mobile:"",email:"",source:"",contact:"",remark:""},customerId:null,pagination:{currentPage:1,pageSize:10,total:0},items:[],dateArr:[],filterParams:{name:"",mobile:"",email:"",source:"",contact:"",startDate:"",endDate:""}}},created(){this.getItems()},methods:{resetClick(){this.filterParams={name:"",mobile:"",email:"",source:"",contact:"",startDate:"",endDate:""},this.getItems()},getItems(){this.$apiCall("api.Admin.leadList",{nameLike:this.filterParams.name,phone:this.filterParams.mobile,source:this.filterParams.source,timeCreatedFrom:this.filterParams.startDate,timeCreatedTo:this.filterParams.endDate,email:this.filterParams.email,linkman:this.filterParams.contact,rowsPerPage:this.pagination.pageSize,page:this.pagination.currentPage},e=>{9999==e.ErrorCode?(this.items=e.Data.Results,this.pagination.total=Number(e.Data.Pagination.totalCount)):this.$elementMessage(e.Message,"error")})},handleSizeChange(e){this.pagination.pageSize=e,this.getItems()},handleCurrentChange(e){this.pagination.currentPage=e,this.getItems()},detailHandle(e){this.detailVisible=!0,this.dialogForm={name:e.name,mobile:e.phone,email:e.email,source:e.source,contact:e.linkman,remark:e.remark,timeCreated:e.timeCreated}},editCustomer(e){this.isAdd=!1,this.addOrEditVisible=!0,this.customerId=e.id,this.dialogForm={name:e.name,mobile:e.phone,email:e.email,source:e.source,contact:e.linkman,remark:e.remark}},editCustomerHandle(){this.dialogForm.email||this.dialogForm.mobile?this.dialogForm.source?this.$apiCall("api.Admin.changeLeads",{id:this.customerId,email:this.dialogForm.email,phone:this.dialogForm.mobile,name:this.dialogForm.name,source:this.dialogForm.source,linkman:this.dialogForm.contact,remark:this.dialogForm.remark},e=>{9999==e.ErrorCode?(this.$elementMessage("编辑客户成功","success"),this.dialogCloseHandle(),this.getItems()):this.$elementMessage(e.Message,"error")}):this.$elementMessage("请填写客户来源","error"):this.$elementMessage("请至少要填写电话或者邮箱中其中一项","error")},addCustomer(){this.isAdd=!0,this.addOrEditVisible=!0},addCustomerHandle(){this.dialogForm.email||this.dialogForm.mobile?this.dialogForm.source?this.$apiCall("api.Admin.addLeads",{email:this.dialogForm.email,phone:this.dialogForm.mobile,name:this.dialogForm.name,source:this.dialogForm.source,linkman:this.dialogForm.contact,remark:this.dialogForm.remark},e=>{9999==e.ErrorCode?(this.$elementMessage("新增客户成功","success"),this.dialogCloseHandle(),this.getItems()):this.$elementMessage(e.Message,"error")}):this.$elementMessage("请填写客户来源","error"):this.$elementMessage("请至少要填写电话或者邮箱中其中一项","error")},dateChange(e){e?(this.filterParams.startDate=this.$moment(e[0]).format("YYYY-MM-DD"),this.filterParams.endDate=this.$moment(e[1]).format("YYYY-MM-DD")):(this.filterParams.startDate="",this.filterParams.endDate="")},detailCloseHandle(){this.detailVisible=!1,this.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:""}},dialogCloseHandle(){this.addOrEditVisible=!1,this.customerId=null,this.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:""}}}},o=r,l=(a("2957"),a("2877")),n=Object(l["a"])(o,s,i,!1,null,null,null);t["default"]=n.exports},d336:function(e,t,a){"use strict";a("21fe")},d689:function(e,t,a){"use strict";a("6f20")},d690:function(e,t,a){},d79e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"customer-modify"}},[t("el-card",[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[t("router-link",{attrs:{to:{path:"/customerMg"},replace:""}},[e._v("客户管理")])],1),t("el-breadcrumb-item",[e._v("修改套餐")])],1),t("el-divider"),t("el-form",{ref:"comboForm",attrs:{inline:!0,rules:e.rules,model:e.comboObj,size:"small","label-width":"150px"}},[t("el-row",[t("el-form-item",{attrs:{label:"当前套餐类型:"}},[1==e.comboDetail.vipType?[e._v("免费版")]:e._e(),2==e.comboDetail.vipType?[e._v("标准版")]:e._e(),3==e.comboDetail.vipType?[e._v("专业版")]:e._e(),4==e.comboDetail.vipType?[e._v("尊享版")]:e._e()],2),"0"==e.comboDetail.overTime?t("el-form-item",{attrs:{label:"服务期至:"}},[e._v(" --")]):t("el-form-item",{attrs:{label:"服务期至:"}},[e._v(" "+e._s(e.$moment(1e3*e.comboDetail.overTime).format("YYYY-MM-DD HH:mm:ss")))])],1),t("el-row",[t("el-form-item",{attrs:{label:"付费项目:",prop:"project"}},[t("el-radio-group",{on:{change:e.radioChange},model:{value:e.comboObj.project,callback:function(t){e.$set(e.comboObj,"project",t)},expression:"comboObj.project"}},[t("el-radio",{attrs:{label:1}},[e._v("全部")]),t("el-radio",{attrs:{label:2}},[e._v("套餐")]),1!=e.comboDetail.vipType?t("el-radio",{attrs:{label:3}},[e._v("加购")]):e._e()],1)],1)],1),1==e.comboObj.project||2==e.comboObj.project?[t("el-row",[t("el-form-item",{attrs:{label:"要修改的套餐类型:",prop:"vipType"}},[t("el-select",{model:{value:e.comboObj.vipType,callback:function(t){e.$set(e.comboObj,"vipType",t)},expression:"comboObj.vipType"}},[t("el-option",{attrs:{value:2,label:"标准版"}}),t("el-option",{attrs:{value:3,label:"专业版"}}),t("el-option",{attrs:{value:4,label:"尊享版"}})],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"购买时长:",prop:"overTime"}},[t("el-select",{model:{value:e.comboObj.overTime,callback:function(t){e.$set(e.comboObj,"overTime",t)},expression:"comboObj.overTime"}},[t("el-option",{attrs:{value:12,label:"一年"}}),t("el-option",{attrs:{value:24,label:"二年"}}),t("el-option",{attrs:{value:36,label:"三年"}})],1)],1)],1)]:e._e(),1==e.comboObj.project||3==e.comboObj.project?e._l(e.comboObj.addPack,(function(a,s){return t("el-row",{key:s},[t("el-form-item",{attrs:{label:0==s?"加购项目:":" ",prop:`addPack[${s}].object`,rules:{required:!0,message:"请选择加购项目",trigger:"blur"}}},[t("el-select",{model:{value:a.object,callback:function(t){e.$set(a,"object",t)},expression:"item.object"}},[e.comboDetail.service?e._e():t("el-option",{attrs:{value:"service",label:"企业自由品牌服务包"}}),t("el-option",{attrs:{value:"mail",label:"邮件加油包"}}),t("el-option",{attrs:{value:"product",label:"商品上架数"}}),t("el-option",{attrs:{value:"subUser",label:"子账号"}})],1)],1),"mail"==a.object?t("el-form-item",{attrs:{prop:`addPack[${s}].mailCnt`,rules:{required:!0,message:"请填写邮件数量",trigger:"blur"}}},[t("el-input-number",{staticStyle:{width:"220px"},attrs:{min:0,"step-strictly":!0,step:1e3,"controls-position":"right",placeholder:"请填写需要的邮件数量",type:"number"},model:{value:a.mailCnt,callback:function(t){e.$set(a,"mailCnt",t)},expression:"item.mailCnt"}})],1):e._e(),"product"==a.object?t("el-form-item",{attrs:{prop:`addPack[${s}].productCnt`,rules:{required:!0,message:"请填写数量",trigger:"blur"}}},[t("el-input-number",{staticStyle:{width:"220px"},attrs:{min:0,"controls-position":"right",placeholder:"请填写需要的数量",type:"number"},model:{value:a.productCnt,callback:function(t){e.$set(a,"productCnt",t)},expression:"item.productCnt"}})],1):e._e(),"subUser"==a.object?t("el-form-item",{attrs:{prop:`addPack[${s}].subUserCnt`,rules:{required:!0,message:"请填写数量",trigger:"blur"}}},[t("el-input-number",{staticStyle:{width:"220px"},attrs:{min:0,"controls-position":"right",placeholder:"请填写需要的数量",type:"number"},model:{value:a.subUserCnt,callback:function(t){e.$set(a,"subUserCnt",t)},expression:"item.subUserCnt"}})],1):e._e(),t("el-form-item",{attrs:{prop:`addPack[${s}].addAmount`,rules:{required:!0,message:"请填写加购金额",trigger:"blur"}}},[t("el-input",{attrs:{placeholder:"请填写加购金额"},model:{value:a.addAmount,callback:function(t){e.$set(a,"addAmount",t)},expression:"item.addAmount"}})],1),"service"==a.object?t("el-form-item",[t("div",{staticClass:"extra"},[t("div",{staticClass:"header"},[t("a",[e._v("上架应用至Shopify")]),t("a",[e._v("设置店铺独有域名")])])])]):e._e(),s>0?t("el-form-item",[t("i",{staticClass:"point el-icon-remove",on:{click:function(t){return e.removeAddPack(s)}}})]):e._e()],1)})):e._e(),1==e.comboObj.project||3==e.comboObj.project?t("el-row",[t("el-form-item",{attrs:{label:" "}},[t("div",{staticClass:"extra"},[t("div",{staticStyle:{margin:"0 10px"}},[t("el-link",{attrs:{type:"primary"},on:{click:e.continueAdd}},[e._v("继续加购")])],1)])])],1):e._e(),1==e.comboObj.project||2==e.comboObj.project?t("el-row",[t("el-form-item",{attrs:{label:"套餐金额:",prop:"vipAmount"}},[t("el-input",{attrs:{type:"number"},model:{value:e.comboObj.vipAmount,callback:function(t){e.$set(e.comboObj,"vipAmount",t)},expression:"comboObj.vipAmount"}})],1)],1):e._e(),t("el-row",[t("el-form-item",{attrs:{label:"上传支付凭证:",prop:"imgUrl"}},[t("el-input",{staticStyle:{display:"none"},model:{value:e.comboObj.imgUrl,callback:function(t){e.$set(e.comboObj,"imgUrl",t)},expression:"comboObj.imgUrl"}}),t("el-upload",{ref:"upload",attrs:{action:"","list-type":"picture-card",limit:1,"on-exceed":e.exceedUpload,"before-upload":e.onBeforeUpload,"http-request":e.Upload,"on-remove":e.handleRemove}},[t("i",{staticClass:"el-icon-plus"})])],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"新套餐生效时间:",prop:"suff"}},[t("el-radio-group",{model:{value:e.comboObj.suff,callback:function(t){e.$set(e.comboObj,"suff",t)},expression:"comboObj.suff"}},[t("el-radio",{attrs:{label:1,border:""}},[e._v("立即生效")]),t("el-radio",{attrs:{label:2,border:""}},[e._v("选择生效时间")])],1)],1),2==e.comboObj.suff?t("el-form-item",{attrs:{prop:"date"}},[t("el-date-picker",{staticClass:"ml-20",attrs:{"value-format":"timestamp","picker-options":e.pickerOptions1,type:"date",placeholder:"选择日期"},model:{value:e.comboObj.date,callback:function(t){e.$set(e.comboObj,"date",t)},expression:"comboObj.date"}})],1):e._e()],1),t("el-row",[t("el-form-item",{attrs:{label:"备注:"}},[t("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",row:3},model:{value:e.comboObj.remark,callback:function(t){e.$set(e.comboObj,"remark",t)},expression:"comboObj.remark"}})],1)],1),t("el-row",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{loading:e.btnLoading,type:"primary",size:"small"},on:{click:e.submit}},[e._v("提交")]),t("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[e._v("取消")])],1)],2)],1)],1)},i=[],r={data(){return{pickerOptions1:{disabledDate(e){return e.getTime()<Date.now()-864e5}},rules:{project:[{required:!0,message:"请选择付费项目",trigger:"blur"}],vipType:[{required:!0,message:"请选择套餐类型",trigger:"blur"}],overTime:[{required:!0,message:"请选择套餐时长",trigger:"blur"}],vipAmount:[{required:!0,message:"请输入套餐金额",trigger:"blur"}],addAmount:[{required:!0,message:"请输入加购金额",trigger:"blur"}],suff:[{required:!0,message:"请选择生效时间",trigger:"blur"}],date:[{required:!0,message:"请选择生效时间",trigger:"blur"}],imgUrl:[{required:!0,message:"请上传支付凭证",trigger:"blur"}]},comboDetail:{},btnLoading:!1,dateSet:[{label:"一个月",value:1},{label:"两个月",value:2},{label:"三个月",value:3},{label:"四个月",value:4},{label:"五个月",value:5},{label:"六个月",value:6},{label:"七个月",value:7},{label:"八个月",value:8},{label:"九个月",value:9},{label:"十个月",value:10},{label:"十一个月",value:11}],comboObj:{project:1,operate:"",vipType:"",date:null,object:"",overTime:"",hasAdd:!1,addPack:[{object:"",operate:"加购",detail:"",mailCnt:"",addAmount:""}],vipAmount:null,addAmount:null,imgUrl:"",timeOpen:"",detail:""},base64:"",ext:"",file:null,fileList:[],userId:""}},computed:{extraSummary(){let e=0;return this.comboObj.addPack.forEach(t=>{e+=Number(t.addAmount)}),e}},mounted(){this.$route.query&&this.$route.query.id&&(this.userId=this.$route.query.id,this.getDetail())},methods:{radioChange(e){this.$refs["upload"].clearFiles(),this.comboObj={project:e,operate:"",vipType:"",date:null,object:"",overTime:"",hasAdd:!1,addPack:[{object:"",operate:"加购",detail:"",mailCnt:"",addAmount:""}],vipAmount:null,addAmount:null,imgUrl:"",timeOpen:"",detail:""}},goBack(){this.$router.go(-1)},removeAddPack(e){this.comboObj.addPack.splice(e,1)},continueAdd(){this.comboObj.addPack.push({object:"",operate:"加购",detail:"",mailCnt:"",addAmount:""})},submit(){let e=!0;if(this.$refs["comboForm"].validate(t=>{t||(e=!1)}),!e)return;let t=this.$moment().add(this.comboObj.overTime,"M").format("X");1!=this.comboObj.project&&3!=this.comboObj.project||(this.comboObj.hasAdd=!0),this.comboObj.hasAdd||(this.comboObj.addPack=[]),1!=this.comboObj.project&&2!=this.comboObj.project||(this.comboObj.object="套餐"),3==this.comboObj.project&&(this.comboObj.object="加购"),1==this.comboObj.suff?this.comboObj.timeOpen=0:2==this.comboObj.suff&&(this.comboObj.timeOpen=Math.floor(this.comboObj.date/1e3)),this.comboDetail.vipType==this.comboObj.vipType?this.comboObj.operate="续费":this.comboDetail.vipType<this.comboObj.vipType?this.comboObj.operate="升级":this.comboDetail.vipType>this.comboObj.vipType&&(this.comboObj.operate="降级"),this.btnLoading=!0,this.$apiCall("api.Admin.changeVip",{vipType:this.comboObj.vipType,operate:this.comboObj.operate,userId:this.userId,overTime:t,object:this.comboObj.object,timeOpen:this.comboObj.timeOpen,hasAdd:this.comboObj.hasAdd,addPack:this.comboObj.addPack,addAmount:this.extraSummary,vipAmount:this.comboObj.vipAmount,totalAmount:Number(this.comboObj.vipAmount)+Number(this.extraSummary),imgUrl:this.comboObj.imgUrl,remark:this.comboObj.remark},e=>{9999==e.ErrorCode?(this.btnLoading=!1,this.$elementMessage("修改套餐成功","success"),this.$router.replace({path:"/customerMg"})):(this.btnLoading=!1,this.$elementMessage(e.Message,"error"))})},handlePictureCardPreview(){},handleRemove(){},getDetail(){this.$apiCall("api.Admin.getVipDetail",{userId:this.userId||""},e=>{9999==e.ErrorCode&&(this.comboDetail=e.Data.Results)})},handleRemove(e){this.fileList.forEach((t,a)=>{t.index==e.uid&&this.fileList.splice(a,1)}),0==this.fileList.length&&(this.comboObj.imgUrl="")},exceedUpload(){this.$elementMessage("只能上传一张图片","error")},onBeforeUpload(e){this.file=e,this.index=e.uid},Upload(){let e=this.file;const t=e=>new Promise((function(t,a){let s=new FileReader;s.readAsDataURL(e),s.onload=function(e){t(this.result)}}));t(e).then(e=>{let t=e,a=t.match(/data:image\/(.*);base64,.*/);this.ext=a[1],this.base64=t.split("base64,").pop(),this.$apiCall("api.User.uploadImgBase64",{imgUrlBase64:this.base64,ext:this.ext},e=>{9999==e.ErrorCode?(this.fileList.push({index:this.index,imgUrl:e.Data.Results.imgUrl}),this.comboObj.imgUrl=e.Data.Results.imgUrl):(this.$refs["upload"].clearFiles(),this.$elementMessage(e.Message,"error"))})})}}},o=r,l=(a("7304"),a("2877")),n=Object(l["a"])(o,s,i,!1,null,"c4bf1f0c",null);t["default"]=n.exports},d840:function(e,t,a){"use strict";a("3e7c")},dc2b:function(e,t,a){"use strict";a("3d3e")},eb2c:function(e,t,a){}}]);
//# sourceMappingURL=dashboard.87fad86a.js.map