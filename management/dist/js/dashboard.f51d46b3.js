(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"0127":function(e,t,a){"use strict";a("1a46")},"0344":function(e,t,a){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function r(e){if(Array.isArray(e))return i(e)}a.d(t,"a",(function(){return n}));a("6f1a"),a("6cd1"),a("4c4d"),a("82d0"),a("e90a"),a("dfdd"),a("e2e0");function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}a("3a76"),a("b8bb");function s(e,t){if(e){if("string"===typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e){return r(e)||o(e)||s(e)||l()}},"07eb":function(e,t,a){"use strict";a("f24a")},"0ed6":function(e,t,a){},1386:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"customer-detail"}},[a("el-card",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("router-link",{attrs:{to:{path:"/customerMg"},replace:""}},[e._v("客户管理")])],1),a("el-breadcrumb-item",[e._v("套餐详情")])],1),a("el-divider"),a("el-row",{staticClass:"center"},[a("div",[a("div",{staticClass:"flex"},[a("span",{staticClass:"title"},[e._v("套餐版本:")]),a("span",{staticClass:"content"},[1==e.comboDetail.vipType?[e._v("免费版")]:e._e(),2==e.comboDetail.vipType?[e._v("标准版")]:e._e(),3==e.comboDetail.vipType?[e._v("专业版")]:e._e(),4==e.comboDetail.vipType?[e._v("尊享版")]:e._e(),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("付款金额: "+e._s(e.vipDetail.amount)+"元")])],2)]),a("div",{staticClass:"flex"},[a("div",{staticClass:"title"},[e._v("服务期至:")]),"0"==e.comboDetail.overTime?a("span",{staticClass:"content"},[e._v(" --")]):a("span",{staticClass:"content"},[e._v(" "+e._s(e.$moment(1e3*e.comboDetail.overTime).format("YYYY-MM-DD HH:mm:ss")))])])]),a("div",{staticClass:"flex"},[a("div",{staticClass:"title"},[e._v("套餐内容:")]),a("div",{staticClass:"content"},[a("div",[e._v("商品上架数量: "+e._s(e.vipDetail.productCnt)+"个SPU")]),a("div",[e._v("目前剩余: "+e._s(e.resetQu.vipProductCnt)+"个SPU")]),a("div",[e._v("子账号数量: "+e._s(e.vipDetail.subUserCnt)+"个")]),a("div",[e._v("目前剩余: "+e._s(e.resetQu.vipSubuserCnt)+"个")]),a("div",[e._v("订单数据保留时长: "+e._s(e.vipDetail.orderReserveDay)+"天")])])]),1!=e.comboDetail.vipType?a("div",{staticClass:"flex"},[a("div",{staticClass:"title"},[e._v("额外内容:")]),a("div",[a("div",{staticClass:"content"},[e.comboDetail.service?a("div",[a("div",{staticClass:"fz-16"},[e._v("企业自有品牌服务包")]),a("div",{staticClass:"service"},[a("span",[e._v("上架应用至Shopify")]),e._v(" "),a("span",[e._v("设置店铺独有域名")])])]):e._e()]),e._l(e.addObj,(function(t,i,r){return a("div",{key:r},["mail"==i?a("div",{staticClass:"addPack"},[a("div",{staticClass:"title"},[e._v("邮件加油包")]),a("div",{staticClass:"content"},[e._v("已购: "+e._s(t.mailCnt)+"封 剩余数量: "+e._s(e.comboDetail.mailCnt)+"封")]),a("div",{staticClass:"price"},[e._v("付款金额: "+e._s(t.addAmount)+" 元 ")])]):e._e(),"product"==i?a("div",{staticClass:"addPack"},[a("div",{staticClass:"title"},[e._v("商品上架数")]),a("div",{staticClass:"content"},[e._v("已购: "+e._s(e.comboDetail.addProductCnt)+"个 剩余数量: "+e._s(e.resetQu.addProductCnt)+"个")]),a("div",{staticClass:"price"},[e._v("付款金额: "+e._s(t.addAmount)+" 元")])]):e._e(),"subUser"==i?a("div",{staticClass:"addPack"},[a("div",{staticClass:"title"},[e._v("子账号")]),a("div",{staticClass:"content"},[e._v("已购: "+e._s(e.comboDetail.addSubUserCnt)+"个 剩余数量: "+e._s(e.resetQu.addSubuserCnt)+"个")]),a("div",{staticClass:"price"},[e._v("付款金额: "+e._s(t.addAmount)+" 元")])]):e._e()])}))],2)]):e._e()]),a("el-divider"),a("el-row",[a("h2",[e._v("操作日志")]),a("el-table",{attrs:{data:e.operateList}},[a("el-table-column",{attrs:{label:"ID",prop:"id"}}),a("el-table-column",{attrs:{label:"操作人",prop:"admin"}}),a("el-table-column",{attrs:{label:"操作事项",prop:"operate"}}),a("el-table-column",{attrs:{label:"操作对象"},scopedSlots:e._u([{key:"default",fn:function(t){return["service"==t.row.object?a("div",[e._v("服务包加购")]):"mail"==t.row.object?a("div",[e._v("邮件加购")]):"product"==t.row.object?a("div",[e._v("商品数量加购")]):"order"==t.row.object?a("div",[e._v("每日拉取订单加购")]):"subUser"==t.row.object?a("div",[e._v("子账号加购")]):a("div",[e._v(e._s(t.row.object))])]}}])}),a("el-table-column",{attrs:{label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.$moment(1e3*t.row.timeCreated).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("el-table-column",{attrs:{label:"开通时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.$moment(1e3*t.row.timeOpen).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])})],1)],1),a("el-row",{staticClass:"footer"},[a("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},r=[],o=(a("0a53"),a("c7ae"),{data:function(){return{pagination:{currentPage:1,pageSize:10,total:0},resetQu:{vipProductCnt:0,vipSubuserCnt:0,addProductCnt:0,addSubuserCnt:0},userId:"",comboDetail:{},vipDetail:{},operateList:[],addObj:{mail:{addAmount:0,mailCnt:0},product:{addAmount:0,productCnt:0},order:{addAmount:0,dailyOrderCnt:0},subUser:{addAmount:0,subUserCnt:0}}}},mounted:function(){this.$route.query&&this.$route.query.id&&(this.userId=this.$route.query.id,this.getDetail(),this.getOperation())},methods:{handleSizeChange:function(e){this.pagination.pageSize=e,this.getOperation()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getOperation()},getOperation:function(){var e=this;this.$apiCall("api.Admin.getVipHistory",{userId:this.userId||"",page:this.pagination.currentPage,rowsperPage:this.pagination.pageSize},(function(t){9999==t.ErrorCode&&(e.operateList=t.Data.Results,e.pagination.total=Number(t.Data.Pagination.totalCount))}))},getDetail:function(){var e=this;this.$apiCall("api.Admin.getVipDetail",{userId:this.userId||""},(function(t){9999==t.ErrorCode&&(e.comboDetail=t.Data.Results,e.comboDetail.addDetail.forEach((function(t){t.extraJson=JSON.parse(t.extraJson),t.extraJson.addPack&&t.extraJson.addPack.forEach((function(t){"mail"==t.object&&(e.addObj.mail.addAmount+=Number(t.addAmount),e.addObj.mail.mailCnt+=Number(t.mailCnt)),"product"==t.object&&(e.addObj.product.addAmount+=Number(t.addAmount),e.addObj.product.productCnt+=Number(t.productCnt)),"order"==t.object&&(e.addObj.order.addAmount+=Number(t.addAmount),e.addObj.order.dailyOrderCnt+=Number(t.dailyOrderCnt)),"subUser"==t.object&&(e.addObj.subUser.addAmount+=Number(t.addAmount),e.addObj.subUser.subUserCnt+=Number(t.subUserCnt))}))})),e.getComboData())}))},getComboData:function(){var e=this;this.$apiCall("api.Admin.getVipArray",{},(function(t){if(9999==t.ErrorCode){var a=Number(e.comboDetail.vipType);e.vipDetail=t.Data.Results[a],e.vipDetail.productCnt-e.comboDetail.productCnt>=0?(e.resetQu.vipProductCnt=e.vipDetail.productCnt-e.comboDetail.productCnt,e.resetQu.addProductCnt=e.comboDetail.addProductCnt):(e.resetQu.vipProductCnt=0,e.resetQu.addProductCnt=e.comboDetail.addProductCnt-(e.comboDetail.productCnt-e.vipDetail.productCnt)),e.vipDetail.subUserCnt-e.comboDetail.subUserCnt>=0?(e.resetQu.vipSubuserCnt=e.vipDetail.subUserCnt-e.comboDetail.subUserCnt,e.resetQu.addSubuserCnt=e.comboDetail.addSubUserCnt):(e.resetQu.vipSubuserCnt=0,e.resetQu.addSubuserCnt=e.comboDetail.addSubUserCnt-(e.comboDetail.subUserCnt-e.vipDetail.subUserCnt))}}))}}}),s=o,l=(a("5493"),a("cba8")),n=Object(l["a"])(s,i,r,!1,null,"434f86f4",null);t["default"]=n.exports},"1a46":function(e,t,a){},"1c12":function(e,t,a){"use strict";a("5fa4")},"1dfb":function(e,t,a){var i=a("f00a"),r=a("efa0");e.exports=function(e,t,a,o){try{return o?t(i(a)[0],a[1]):t(a)}catch(s){r(e,"throw",s)}}},2780:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"customer-Mgr"}},[a("el-card",{staticStyle:{"margin-right":"30px"}},[a("el-row",{staticClass:"mlr-30"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"付款时间:"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","default-time":["00:00:00","23:59:59"],"start-placeholder":"开始日期","picker-options":e.pickerOptions,"end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}})],1),a("el-form-item",{attrs:{label:"交易编号:"}},[a("el-input",{model:{value:e.filterParams.code,callback:function(t){e.$set(e.filterParams,"code",t)},expression:"filterParams.code"}})],1),a("el-form-item",{attrs:{label:"付款金额:"}},[a("el-input",{model:{value:e.filterParams.totalAmount,callback:function(t){e.$set(e.filterParams,"totalAmount",t)},expression:"filterParams.totalAmount"}})],1),a("el-form-item",{attrs:{label:"供应商账号:"}},[a("el-select",{attrs:{clearable:"",loading:e.vendorLoading,filterable:"",remote:"","remote-method":e.getVendorList},model:{value:e.filterParams.userId,callback:function(t){e.$set(e.filterParams,"userId",t)},expression:"filterParams.userId"}},e._l(e.vendorOption,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.username}})})),1)],1),a("el-form-item",{attrs:{label:"订购版本:"}},[a("el-select",{attrs:{clearable:""},model:{value:e.filterParams.vipType,callback:function(t){e.$set(e.filterParams,"vipType",t)},expression:"filterParams.vipType"}},[a("el-option",{attrs:{value:"1",label:"免费版"}}),a("el-option",{attrs:{value:"2",label:"标准版"}}),a("el-option",{attrs:{value:"3",label:"专业版"}}),a("el-option",{attrs:{value:"4",label:"尊享版"}})],1)],1),a("el-form-item",{attrs:{label:"开通人:"}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.filterParams.adminId,callback:function(t){e.$set(e.filterParams,"adminId",t)},expression:"filterParams.adminId"}},e._l(e.adminOption,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.username}})})),1)],1),a("el-form-item",{attrs:{label:"是否加购:"}},[a("el-select",{attrs:{clearable:""},model:{value:e.filterParams.hasAdd,callback:function(t){e.$set(e.filterParams,"hasAdd",t)},expression:"filterParams.hasAdd"}},[a("el-option",{attrs:{value:1,label:"是"}}),a("el-option",{attrs:{value:0,label:"否"}})],1)],1),a("el-form-item",{attrs:{label:"支付方式:"}},[a("el-select",{attrs:{clearable:""},model:{value:e.filterParams.payment,callback:function(t){e.$set(e.filterParams,"payment",t)},expression:"filterParams.payment"}},[a("el-option",{attrs:{value:1,label:"线下支付"}}),a("el-option",{attrs:{value:2,label:"线上支付"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getItems}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"danger"},on:{click:e.resetClick}},[e._v("重置")])],1),a("el-form-item",[a("el-button",{attrs:{type:"warning",disabled:!e.isWrite},on:{click:e.batchExport}},[e._v("批量导出")])],1)],1)],1)],1),a("el-card",{staticClass:"mt-20",staticStyle:{"margin-right":"30px"}},[a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],attrs:{data:e.items},on:{"selection-change":e.selectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{width:"140px",label:"付款时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.$moment(1e3*t.row.timeCreated).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("el-table-column",{attrs:{width:"140px",label:"交易编号",prop:"code"}}),a("el-table-column",{attrs:{label:"支付方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.payment?[e._v("线下支付")]:e._e(),2==t.row.payment?[e._v("线上支付")]:e._e()]}}])}),a("el-table-column",{attrs:{width:"140px",label:"供应商"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.vendorName)+" ")]}}])}),a("el-table-column",{attrs:{label:"订购版本"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.vipType?[e._v("免费版")]:e._e(),2==t.row.vipType?[e._v("标准版")]:e._e(),3==t.row.vipType?[e._v("专业版")]:e._e(),4==t.row.vipType?[e._v("尊享版")]:e._e(),0==t.row.vipType?[e._v("--")]:e._e()]}}])}),a("el-table-column",{attrs:{label:"付款金额￥",prop:"vipAmount"}}),a("el-table-column",{attrs:{label:"加购项目"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.extraJson.addPack&&t.row.extraJson.addPack.length>0?a("div",e._l(t.row.extraJson.addPack,(function(i,r){return a("span",{key:r},["service"==i.object?a("span",[e._v("服务包")]):e._e(),"mail"==i.object?a("span",[e._v("邮件加油包")]):e._e(),"product"==i.object?a("span",[e._v("商品上架数")]):e._e(),"order"==i.object?a("span",[e._v("订单拉取数")]):e._e(),"subUser"==i.object?a("span",[e._v("子账号数量")]):e._e(),r!=t.row.extraJson.addPack.length-1?[a("br")]:e._e()],2)})),0):a("div",[e._v(" -- ")])]}}])}),a("el-table-column",{attrs:{label:"付款金额￥",prop:"addAmount"}}),a("el-table-column",{attrs:{label:"总额￥"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.totalAmount||Number(t.row.addAmount)+Number(t.row.vipAmount))+" ")]}}])}),a("el-table-column",{attrs:{label:"开通人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.adminName||"--"))])]}}])}),a("el-table-column",{attrs:{label:"支付凭证"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.extraJson.imgUrl?a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{fit:"contain",src:t.row.extraJson.imgUrl,"preview-src-list":[t.row.extraJson.imgUrl]}}):a("span",[e._v("--")])]}}])}),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.extraJson.remark)+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",disabled:!e.isWrite},on:{click:function(a){return e.exportData(t.row)}}},[e._v("导出")]),e._v("  ")]}}])})],1)],1),a("el-row",{staticClass:"footer"},[a("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},r=[],o=(a("c7ae"),a("0a53"),{data:function(){return{dataLoading:!1,vendorLoading:!1,isWrite:!1,items:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},filterParams:{userId:"",code:"",totalAmount:"",vipType:"",adminId:"",hasAdd:"",payment:"",timeCreatedFrom:"",timeCreatedTo:""},selectArr:[],dateArr:[],adminOption:[],vendorOption:[],pagination:{currentPage:1,pageSize:10,total:0}}},mounted:function(){this.isWrite=this.$isRole(this.$route.meta.roleWrite),this.getItems(),this.getAdminList()},methods:{getAdminList:function(){var e=this;this.$apiCall("api.Admin.findsAdmin",{all:!0},(function(t){9999==t.ErrorCode?e.adminOption=t.Data.Results:e.$message({message:t.Message,type:"error"})}))},getVendorList:function(e){var t=this;e.length<=1||(this.vendorLoading=!0,this.$apiCall("api.Admin.vendorList",{usernameLike:e},(function(e){t.vendorLoading=!1,9999==e.ErrorCode?t.vendorOption=e.Data.Results:t.$message({message:e.Message,type:"error"})})))},selectionChange:function(e){var t=this;console.log(e),this.selectArr=[],e.forEach((function(e,a){t.selectArr.push(e.id)}))},batchExport:function(){var e=this;this.$apiCall("api.Admin.exportVipRecord",{userId:this.filterParams.userId,code:this.filterParams.code,vipType:this.filterParams.vipType,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,totalAmount:this.filterParams.totalAmount,hasAdd:this.filterParams.hasAdd,adminId:this.filterParams.adminId,ids:this.selectArr},(function(t){9999==t.ErrorCode?window.open(t.Data.Results):e.$elementMessage(t.Message,"error")}))},exportData:function(e){var t=this;this.$apiCall("api.Admin.exportVipRecord",{ids:[e.id]},(function(e){9999==e.ErrorCode?window.open(e.Data.Results):t.$elementMessage(e.Message,"error")}))},getItems:function(){var e=this;this.dataLoading=!0,this.$apiCall("api.Admin.getVipRecord",{userId:this.filterParams.userId,code:this.filterParams.code,vipType:this.filterParams.vipType,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,totalAmount:this.filterParams.totalAmount,hasAdd:this.filterParams.hasAdd,payment:this.filterParams.payment,adminId:this.filterParams.adminId,page:this.pagination.currentPage,rowsPerPage:this.pagination.pageSize},(function(t){e.dataLoading=!1,9999==t.ErrorCode?(e.items=t.Data.Results,e.pagination.total=Number(t.Data.Pagination.totalCount),e.items.forEach((function(e){e.extraJson=JSON.parse(e.extraJson)}))):e.$elementMessage(t.Message,"error")}))},handleSizeChange:function(e){this.pagination.pageSize=e,this.getItems()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getItems()},resetClick:function(){this.filterParams={userId:"",code:"",totalAmount:"",vipType:"",adminId:"",hasAdd:"",timeCreatedFrom:"",timeCreatedTo:""},this.dateArr=[],this.getItems()},dateChange:function(e){e?(this.filterParams.timeCreatedFrom=new Date(this.dateArr[0]).getTime()/1e3,this.filterParams.timeCreatedTo=new Date(this.dateArr[1]).getTime()/1e3):(this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="")}}}),s=o,l=(a("34ad"),a("cba8")),n=Object(l["a"])(s,i,r,!1,null,"f0a2551c",null);t["default"]=n.exports},"2de9":function(e,t,a){"use strict";a("e365")},"34ad":function(e,t,a){"use strict";a("8667")},"3a76":function(e,t,a){"use strict";var i=a("dcce"),r=a("0c5f"),o=a("3980"),s=a("f767"),l=a("bf0e"),n=a("47f6"),c=a("fcf6"),d=a("89a5"),m=a("1f71"),u=m("slice"),p=d("species"),b=[].slice,f=Math.max;i({target:"Array",proto:!0,forced:!u},{slice:function(e,t){var a,i,d,m=n(this),u=l(m.length),h=s(e,u),v=s(void 0===t?u:t,u);if(o(m)&&(a=m.constructor,"function"!=typeof a||a!==Array&&!o(a.prototype)?r(a)&&(a=a[p],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return b.call(m,h,v);for(i=new(void 0===a?Array:a)(f(v-h,0)),d=0;h<v;h++,d++)h in m&&c(i,d,m[h]);return i.length=d,i}})},4601:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentpanel dashboard-page"},[a("div",{staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("i",{staticClass:"el-icon-s-home"}),a("h2",[e._v(e._s(e.$t("dashboard.dashboard")))])])]),a("div",{staticClass:"right"})]),a("div",{staticClass:"pagebody",staticStyle:{display:"none"}},[a("el-row",{staticClass:"mg-b-30",attrs:{gutter:15}},[a("el-col",{attrs:{span:14}},[a("el-card",[a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:" d-flex align-items-center mg-b-30 top-box-wrap",attrs:{span:12}},[a("div",{staticClass:" top-box"},[a("div",{staticClass:"left"},[a("div",{staticClass:" title"},[e._v(e._s(e.$t("dashboard.customerAdded")))]),a("div",{staticClass:" t-link"},[a("el-link",{staticClass:" mg-r-10",attrs:{type:"primary",href:"#/my-custom"}},[e._v(e._s(e.$store.state.cnt.customerCnt))]),e._v(" "+e._s(e.$t("dashboard.pcs"))+" ")],1)]),a("i",{staticClass:"el-icon-s-custom"})])]),a("el-col",{staticClass:" d-flex align-items-center mg-b-30 top-box-wrap",attrs:{span:12}},[a("div",{staticClass:" top-box"},[a("div",{staticClass:"left"},[a("div",{staticClass:" title"},[e._v(e._s(e.$t("dashboard.authorizedShopifyCustomers")))]),a("div",{staticClass:" t-link"},[a("el-link",{staticClass:" mg-r-10",attrs:{type:"primary",href:"#/my-custom?isAuth=true"}},[e._v(e._s(e.$store.state.cnt.customerAuthCnt))]),e._v(" "+e._s(e.$t("dashboard.pcs"))+" ")],1)]),a("i",{staticClass:"el-icon-s-goods"})])]),a("el-col",{staticClass:" d-flex align-items-center top-box-wrap",attrs:{span:12}},[a("div",{staticClass:" top-box"},[a("div",{staticClass:"left"},[a("div",{staticClass:" title"},[e._v(e._s(e.$t("dashboard.validInvoice")))]),a("div",{staticClass:" t-link"},[a("el-link",{staticClass:" mg-r-10",attrs:{type:"primary",href:"#/my-invoice"}},[e._v(" "+e._s(e.$store.state.cnt.invoiceCnt)+" ")]),e._v(" "+e._s(e.$t("dashboard.pcs"))+" ")],1)]),a("i",{staticClass:"el-icon-s-order"})])])],1)],1)],1),a("el-col",{attrs:{offset:1,span:7}},[a("el-card",{staticClass:"add-box"},[a("a",{staticClass:" d-flex",attrs:{href:"javascript:;"},on:{click:e.openAddVendor}},[a("i",{staticClass:"el-icon-plus"}),a("span",[e._v(e._s(e.$t("dashboard.addNumCustomer",{num:Number(e.$store.state.cnt.customerCnt)+1})))])])])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[e.lastVendor.length?a("div",{staticClass:"last-customer"},[a("div",{staticClass:"header"},[e._v(" "+e._s(e.$t("dashboard.recentCooperation"))+" "),a("el-link",{attrs:{type:"primary",href:"#/my-custom"}},[e._v(e._s(e.$t("dashboard.more")))])],1),a("el-row",{attrs:{gutter:20}},e._l(e.lastVendor,(function(t,i){return a("el-col",{key:t.id,attrs:{xl:6,lg:12,md:12}},[a("el-card",{staticClass:"c-box"},[a("div",{staticClass:" c-box-content"},[a("div",{staticClass:" left tx-ellipsis1",attrs:{title:t.customerName}},[a("i",{staticClass:"avatar-title",style:{backgroundColor:e.aBg[i]}},[e._v(e._s(t.customerName.substr(0,1)))]),a("div",{staticClass:"name tx-ellipsis1",staticStyle:{"max-width":"100px"}},[e._v(e._s(t.customerName))])]),a("div",{staticClass:"right"},[a("div",{staticClass:" mg-b-10 d-flex align-items-center v-content"},[a("span",{staticClass:" v-content-title"},[e._v(e._s(e.$t("dashboard.validInvoice2")))]),a("el-link",{staticClass:" v-content-val",attrs:{type:"primary"},on:{click:function(a){return e.gotoInvoice(t)}}},[e._v(e._s(t.invoiceCnt))])],1),a("div",{staticClass:" mg-b-20 d-flex align-items-center v-content"},[a("span",{staticClass:" v-content-title"},[e._v(e._s(e.$t("dashboard.authorizedShopifyStores")))]),a("span",{staticClass:" v-content-val"},[e._v(e._s(t.customerAuthCnt))])]),a("div",{staticClass:" tx-right"},[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.gotoCustom(t)}}},[e._v(" "+e._s(e.$t("mycustomer.Invitecustomers2"))+" ")])],1)])])])],1)})),1)],1):e._e()])],1)],1),a("div",{staticClass:"pagebodytwo",staticStyle:{display:"block"}},[a("el-row",{staticClass:"mg-b-30 user-status-list",attrs:{gutter:20}},[a("el-col",{attrs:{span:6,xs:24,sm:12,md:6,lg:6,type:"flex"}},[a("div",{staticClass:"user-status-item",on:{click:function(t){return e.gotoPage(1)}}},[a("div",{staticClass:"status-icon"},[a("i",{staticClass:"iconfont icon-daiwanshankaoshi"})]),a("div",{staticClass:"status-content"},[a("div",{staticClass:"status-num",staticStyle:{color:"#e6a23c"}},[e._v(e._s(e.vendorDashboardSummary.waitCompleteCnt||"0"))]),a("div",{staticClass:"status-description"},[e._v(e._s(e.$t("dashboard.待完善报价的采购单")))])])])]),a("el-col",{attrs:{span:6,xs:24,sm:12,md:6,lg:6,type:"flex"}},[a("div",{staticClass:"user-status-item",on:{click:function(t){return e.gotoPage(2)}}},[a("div",{staticClass:"status-icon"},[a("i",{staticClass:"el-icon-truck"})]),a("div",{staticClass:"status-content"},[a("div",{staticClass:"status-num",staticStyle:{color:"#e6a23c"}},[e._v(e._s(e.vendorDashboardSummary.waitDeliverCnt||"0"))]),a("div",{staticClass:"status-description"},[e._v(e._s(e.$t("dashboard.待发货的采购单")))])])])]),a("el-col",{attrs:{span:6,xs:24,sm:12,md:6,lg:6,type:"flex"}},[a("div",{staticClass:"user-status-item",on:{click:function(t){return e.gotoPage(3)}}},[a("div",{staticClass:"status-icon"},[a("i",{staticClass:"el-icon-warning-outline"})]),a("div",{staticClass:"status-content"},[a("div",{staticClass:"status-num",staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.vendorDashboardSummary.abnormalCnt||"0"))]),a("div",{staticClass:"status-description"},[e._v(e._s(e.$t("dashboard.订单异常禁止发货")))])])])]),a("el-col",{attrs:{span:6,xs:24,sm:12,md:6,lg:6,type:"flex"}},[a("div",{staticClass:"user-status-item",on:{click:function(t){return e.gotoPage(4)}}},[a("div",{staticClass:"status-icon"},[a("i",{staticClass:"el-icon-refresh"})]),a("div",{staticClass:"status-content"},[a("div",{staticClass:"status-num",staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.vendorDashboardSummary.syncFailCnt||"0"))]),a("div",{staticClass:"status-description"},[e._v(e._s(e.$t("dashboard.同步发货信息失败")))])])])])],1),a("div",{staticClass:"chart mg-b-30"},[a("div",{staticClass:"chart-header"},[a("div",{staticClass:"chart-title"},[e._v(e._s(e.$t("dashboard.销售统计")))]),a("div",{staticClass:"chart-right"},[a("el-date-picker",{attrs:{"picker-options":e.pickerOptions0,"value-format":"yyyyMMdd",type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":e.$t("dashboard.起始"),"end-placeholder":e.$t("dashboard.截止")},on:{change:e.dateChange},model:{value:e.statisticDate,callback:function(t){e.statisticDate=t},expression:"statisticDate"}}),a("el-select",{staticClass:"mg-l-20",staticStyle:{width:"200px"},attrs:{placeholder:e.$t("dashboard.日期范围")},on:{change:e.dateRangeChange},model:{value:e.statisticDateRange,callback:function(t){e.statisticDateRange=t},expression:"statisticDateRange"}},e._l(e.dateArr,(function(t,i){return a("el-option",{key:t,attrs:{label:e.$t(t),value:i}})})),1)],1)]),a("div",{staticClass:"chart-body",staticStyle:{width:"100%"}},[a("div",{ref:"chart",staticStyle:{width:"100%",height:"400px"},attrs:{id:"dashboardCharts"}})])]),a("el-row",{staticClass:"mg-b-30",attrs:{gutter:20}},[a("el-col",{attrs:{span:16,type:"flex"}},[a("div",{staticClass:"day-statistics mg-b-30"},[a("div",{staticClass:"day-statistics-title"},[e._v(e._s(e.$t("dashboard.每日统计")))]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"date",label:e.$t("dashboard.日期")},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"tableTiop"},[e._v(e._s(e.$t("dashboard.日期")))])]},proxy:!0}])}),a("el-table-column",{attrs:{prop:"customerCnt",label:e.$t("dashboard.下单客户量")},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"tableTiop"},[e._v(e._s(e.$t("dashboard.下单客户量")))])]},proxy:!0}])}),a("el-table-column",{attrs:{prop:"orderCnt",label:e.$t("dashboard.订单数")},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"tableTiop"},[e._v(e._s(e.$t("dashboard.订单数")))])]},proxy:!0}])}),a("el-table-column",{attrs:{prop:"amount",label:e.$t("dashboard.销售额US$")},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"tableTiop"},[e._v(e._s(e.$t("dashboard.销售额US$"))+" ")])]},proxy:!0}])})],1),a("div",{staticClass:"day-statistics-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.showMoreReference}},[e._v(e._s(e.$t("dashboard.显示更多")))])],1)],1)]),a("el-col",{attrs:{span:8,type:"flex"}},[a("div",{staticClass:"info-aggregation mg-b-30"},[a("div",{staticClass:"info-aggregation-title"},[e._v(e._s(e.$t("dashboard.信息汇总")))]),a("el-divider"),a("div",{staticClass:"info-aggregation-list"},[a("div",{staticClass:"item",on:{click:function(t){return e.gotoPage(8)}}},[a("div",{staticClass:"icon"},[a("i",{staticClass:"el-icon-sell"})]),a("div",{staticClass:"text"},[a("div",[e._v("上架商品数: "),a("b",[e._v(e._s(e.vendorDashboardSummary.productCnt||"0"))]),e._v(" 件")])])]),a("el-divider"),a("div",{staticClass:"item",on:{click:function(t){return e.gotoPage(5)}}},[a("div",{staticClass:"icon"},[a("i",{staticClass:"el-icon-user-solid"})]),a("div",{staticClass:"text"},[a("div",[e._v("客户总数: "),a("b",[e._v(e._s(e.vendorDashboardSummary.customerCnt||"0"))]),e._v(" 位")])])]),a("el-divider"),a("div",{staticClass:"item",on:{click:function(t){return e.gotoPage(9)}}},[a("div",{staticClass:"icon"},[a("i",{staticClass:"el-icon-s-order"})]),a("div",{staticClass:"text"},[a("div",[e._v("订单总数: "),a("b",[e._v(e._s(e.vendorDashboardSummary.orderCnt||"0"))]),e._v(" 笔")])])]),a("el-divider"),a("div",{staticClass:"item",on:{click:function(t){return e.gotoPage(10)}}},[a("div",{staticClass:"icon"},[a("i",{staticClass:"fa fa-exchange"})]),a("div",{staticClass:"text"},[a("div",[e._v("交易金额: "),a("b",[e._v(e._s(Number(e.vendorDashboardSummary.orderTotalAmount).toFixed(2)||"0"))]),e._v(" 元")])])]),a("el-divider")],1)],1)])],1)],1),a("el-dialog",{attrs:{loading:e.moreReference.loading,title:"Reference",visible:e.moreReference.isShow,width:"800px"},on:{"update:visible":function(t){return e.$set(e.moreReference,"isShow",t)}}},[a("el-divider"),a("div",{staticClass:"mg-t-20 mg-b-20 mg-l-20 mg-r-20"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.moreReference.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"date",label:e.$t("dashboard.日期"),width:"180"}}),a("el-table-column",{attrs:{prop:"customerCnt",label:e.$t("dashboard.下单客户量")}}),a("el-table-column",{attrs:{prop:"orderCnt",label:e.$t("dashboard.订单数"),width:"180"}}),a("el-table-column",{attrs:{prop:"amount",label:e.$t("dashboard.销售额US$"),width:"180"}})],1)],1),e.tableData.length?a("el-row",{staticClass:"mg-b-20",attrs:{gutter:20}},[a("el-col",{staticClass:" d-flex justify-content-center",attrs:{span:24}},[a("div",[a("el-pagination",{attrs:{"current-page":e.moreReference.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.moreReference.pageSizes,"page-size":e.moreReference.rowsPerPage,total:Number(e.moreReference.total)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e(),a("el-divider"),a("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[a("div",[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.moreReference.isShow=!1}}},[e._v("Close")])],1)])],1)],1)},r=[],o=a("0344"),s=(a("e836"),a("c7ae"),a("0a53"),a("83a0"),a("f6a2"),a("cc6d"),a("9135"),{data:function(){return{statisticDateRange:"3",statisticDateFrom:"",statisticDateTo:"",statisticDate:[],dateArr:{1:"dashboard.今天",2:"dashboard.7天前",3:"dashboard.30天前",4:"dashboard.90天前",5:"dashboard.一年前",6:"dashboard.自定义"},pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},tableData:[],chartData:{columns:[this.$t("dashboard.日期"),this.$t("dashboard.销售额US$"),this.$t("dashboard.订单数")],rows:[]},moreReference:{isShow:!1,pageSizes:[10,20,50,100],page:1,rowsPerPage:10,items:[],total:0,totalPage:0,loading:!1,tableData:[]},vendorDashboardSummary:{waitCompleteCnt:"",waitDeliverCnt:"",abnormalCnt:"",syncFailCnt:"",customerCnt:"",shopCnt:"",offerItemCnt:""},dialogVisibleAddVendor:!1,addVendorDialog:{isShow:!1,loading:!1,labelW:"100px",name:"",remark:"",email:""},addVendorDialogDefault:"{}",lastVendor:[],aBg:["#343a40","#c5a46b","#f46a6a","#34c38f"]}},components:{},methods:{gotoPage:function(e){switch(e){case 1:this.$router.push({path:"/waiting-for-offer"});break;case 2:this.$router.push({path:"/waiting-for-delivery"});break;case 3:this.$router.push({path:"/abnormal"});break;case 4:this.$router.push({path:"/abnormal"});break;case 5:this.$router.push({path:"/my-custom"});break;case 6:this.$router.push({path:"/shopify-orders"});break;case 7:this.$router.push({path:"/products",query:{filterParams:1}});break;case 8:this.$router.push({path:"/goods-mgr/shelves"});break;case 9:this.$router.push({name:"allOrders"});break;case 10:break}},toPage:function(e){e!=this.moreReference.page&&(this.moreReference.page=e),this.getTableData()},changePageSize:function(e){this.moreReference.rowsPerPage=e,this.moreReference.page=1,localStorage.setItem("moreReferenceRowsPerPage",e),this.getTableData()},showMoreReference:function(){this.moreReference.isShow=!0,this.getTableData()},getTableData:function(){var e=this;this.moreReference.loading=!0,this.$apiCall("api.Invoice.vendorDashboardStatistic",{page:this.moreReference.page,rowsPerPage:this.moreReference.rowsPerPage},(function(t){e.moreReference.loading=!1,9999==t.ErrorCode?(e.moreReference.tableData=Object.values(t.Data.Results),e.moreReference.tableData.length&&(e.moreReference.tableData.forEach((function(t){e.$set(t,"dateCode1",Number(t.dateCode)),e.$set(t,"date",t.dateCode.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3"))})),e.moreReference.total=Number(t.Data.Pagination.totalCount),e.moreReference.totalPage=Number(t.Data.Pagination.totalPage),e.moreReference.tableData=e.moreReference.tableData.sort(e.sortData))):e.$elementMessage(t.Message,"error")}))},dateChange:function(){this.statisticDate.length>1&&(this.statisticDateFrom=this.$moment(this.statisticDate[0]).format("YYYYMMDD"),this.statisticDateTo=this.$moment(this.statisticDate[1]).format("YYYYMMDD"),this.getCharts(1),this.statisticDateRange="")},dateRangeChange:function(){var e=this.statisticDateRange;switch(e){case"1":this.statisticDateFrom=this.$moment().format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"2":this.statisticDateFrom=this.$moment().subtract(7,"d").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"3":this.statisticDateFrom=this.$moment().subtract(30,"d").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"4":this.statisticDateFrom=this.$moment().subtract(90,"d").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"5":this.statisticDateFrom=this.$moment().subtract(12,"M").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;default:this.statisticDateFrom="",this.statisticDateTo="";break}this.statisticDate=[this.statisticDateFrom,this.statisticDateTo],this.getCharts(1)},initPageData:function(){var e=this;this.$apiCall("api.Invoice.vendorDashboardSummary",{},(function(t){9999==t.ErrorCode?e.vendorDashboardSummary=t.Data.Results:e.$message({message:t.Message,type:"error"})})),this.$apiCall("api.Invoice.vendorDashboardStatistic",{page:this.moreReference.page,rowsPerPage:this.moreReference.rowsPerPage},(function(t){9999==t.ErrorCode?(e.tableData=Object.values(t.Data.Results),e.tableData.length&&e.tableData.forEach((function(t){e.$set(t,"dateCode1",Number(t.dateCode)),e.$set(t,"date",t.dateCode.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3"))})),e.tableData=e.tableData.reverse()):e.$message({message:t.Message,type:"error"})}))},getCharts:function(e){var t=this,a=this.$refs.chart;e||(this.statisticDateFrom=this.$moment().subtract(1,"M").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD"),this.statisticDate=[this.statisticDateFrom,this.statisticDateTo]);var i=[];this.$apiCall("api.Invoice.vendorDashboardStatistic",{dateFrom:this.statisticDateFrom,dateTo:this.statisticDateTo},(function(e){if(9999==e.ErrorCode){i=Object.values(e.Data.Results),i.length&&i.forEach((function(e){t.$set(e,"date",e.dateCode.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3"))}));var r=t.$echarts.init(a),o={title:{text:""},tooltip:{trigger:"axis"},legend:{data:[t.$t("dashboard.销售额US$"),t.$t("dashboard.订单数")]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:i.map((function(e){return e.date}))},yAxis:{type:"value"},series:[{name:t.$t("dashboard.销售额US$"),type:"line",stack:t.$t("dashboard.销售额US$"),data:i.map((function(e){return e.amount})),smooth:!0},{name:t.$t("dashboard.订单数"),type:"line",stack:t.$t("dashboard.订单数"),data:i.map((function(e){return e.orderCnt})),smooth:!0}]};r.setOption(o),setTimeout((function(){r.resize()}),200),window.onresize=function(){r.resize()}}else t.$elementMessage(e.Message,"error")}))},changeMail:function(){this.$root.$children[0].changeUserEmail()},gotoCustom:function(e){this.$router.push({name:"myCustom",params:{item:e}})},gotoInvoice:function(e){this.$router.push({name:"allOrders",params:{customerName:e.customerName,id:e.id}})},getLastVendor:function(){var e=this;this.$apiCall("api.Relationship.findByVendor",{last:!0,page:1,rowsPerPage:4},(function(t){9999==t.ErrorCode?(e.lastVendor=t.Data.Results,e.lastVendor.forEach((function(t){e.$apiCall("api.Relationship.getCntDetail",{relationshipId:t.id},(function(a){9999==a.ErrorCode&&(t.invoiceCnt=a.Data.Results.invoiceCnt,t.totalAmount=a.Data.Results.totalAmount,t.orderCnt=a.Data.Results.orderCnt,t.skuCnt=a.Data.Results.skuCnt,t.offerSkuCnt=a.Data.Results.offerSkuCnt,e.lastVendor=Object(o["a"])(e.lastVendor))}))}))):e.$message({message:t.Message,type:"error"})}))},addVendorSaveSuccess:function(){this.$root.$children[0].getCnt(),this.getLastVendor()},openAddVendor:function(){this.addVendorDialog=JSON.parse(this.addVendorDialogDefault),this.addVendorDialog.isShow=!0},firstCustomer:function(){this.openAddVendor()},gotoImport:function(e){this.$router.push({name:"importData",query:{rid:e.id}})}},mounted:function(){this.addVendorDialogDefault=JSON.stringify(this.addVendorDialog)}}),l=s,n=(a("f7c3"),a("cba8")),c=Object(n["a"])(l,i,r,!1,null,"340abbcf",null);t["default"]=c.exports},"476d":function(e,t,a){},5166:function(e,t,a){var i=a("e844"),r=i.match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},5493:function(e,t,a){"use strict";a("d2e8")},"58ec":function(e,t,a){var i=a("e844");e.exports=/MSIE|Trident/.test(i)},"5fa4":function(e,t,a){},"61f6":function(e,t,a){"use strict";a("0ed6")},"65ff":function(e,t,a){"use strict";var i=a("dcce"),r=a("f767"),o=a("d3e9"),s=a("bf0e"),l=a("6a15"),n=a("c418"),c=a("fcf6"),d=a("1f71"),m=d("splice"),u=Math.max,p=Math.min,b=9007199254740991,f="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var a,i,d,m,h,v,g=l(this),C=s(g.length),_=r(e,C),y=arguments.length;if(0===y?a=i=0:1===y?(a=0,i=C-_):(a=y-2,i=p(u(o(t),0),C-_)),C+a-i>b)throw TypeError(f);for(d=n(g,i),m=0;m<i;m++)h=_+m,h in g&&c(d,m,g[h]);if(d.length=i,a<i){for(m=_;m<C-i;m++)h=m+i,v=m+a,h in g?g[v]=g[h]:delete g[v];for(m=C;m>C-i+a;m--)delete g[m-1]}else if(a>i)for(m=C-i;m>_;m--)h=m+i-1,v=m+a-1,h in g?g[v]=g[h]:delete g[v];for(m=0;m<a;m++)g[m+_]=arguments[m+2];return g.length=C-i+a,d}})},"6b9b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"comboMg"}},[a("el-card",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"常规套餐管理",name:"1"}}),a("el-tab-pane",{attrs:{label:"加购项目",name:"2"}})],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:"1"==e.activeName,expression:"activeName == '1'"}]},[a("el-table",{attrs:{data:e.items}},[a("el-table-column",{attrs:{prop:"name",label:"套餐名称"}}),a("el-table-column",{attrs:{label:"套餐内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("商品上架数量: "+e._s(t.row.content.spu)+"个SPU")]),a("div",[e._v("子账号数量: "+e._s(t.row.content.cAccount)+"个")]),a("div",[e._v("订单数据保留时长: "+e._s(t.row.content.time)+"天")])]}}])}),a("el-table-column",{attrs:{prop:"price",label:"套餐金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.price)+"元/年 ")]}}])}),a("el-table-column",{attrs:{prop:"count",label:"使用人数"}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:"2"==e.activeName,expression:"activeName == '2'"}]},[a("el-table",{attrs:{data:e.items2}},[a("el-table-column",{attrs:{prop:"name",label:"套餐名称"}}),a("el-table-column",{attrs:{prop:"desc",label:"套餐内容"}}),a("el-table-column",{attrs:{prop:"price",label:"套餐金额"}}),a("el-table-column",{attrs:{prop:"count",label:"使用人数"}})],1)],1)],1)],1)},r=[],o=(a("b8bb"),{data:function(){return{activeName:"1",items:[{name:"",content:{spu:0,order:0,cAccount:0,time:0},price:"",count:0},{name:"",content:{spu:0,order:0,cAccount:0,time:0},price:"",count:0},{name:"",content:{spu:0,order:0,cAccount:0,time:0},price:"",count:0},{name:"",content:{spu:0,order:0,cAccount:0,time:0},price:"",count:0}],items2:[{name:"企业自由品牌服务包",desc:"上架应用至Shopify",price:"150000元",count:0},{name:"邮件套餐加油包",desc:"替供应商发送邮件给站长",price:"10元/1000封",count:0},{name:"商品上架数",desc:"额外商品上架数",price:"100个/1年/10000元",count:0},{name:"子账号",desc:"额外子账号数量",price:"5个/1年/10000元",count:0}],serviceCount:0,mailCount:0}},mounted:function(){this.getItems()},methods:{handleClick:function(e){this.activeName},getItems:function(){var e=this;this.$apiCall("api.Admin.vipSummary",{},(function(t){if(9999==t.ErrorCode)for(var a in e.items2[0].count=t.Data.Results.serviceCnt,e.items2[1].count=t.Data.Results.mailCnt,e.items2[2].count=t.Data.Results.productCnt,e.items2[3].count=t.Data.Results.subUserCnt,t.Data.Results.vipInfo)e.items[a-1].name=t.Data.Results.vipInfo[a].name,e.items[a-1].price=t.Data.Results.vipInfo[a].amount,e.items[a-1].count=t.Data.Results.vipInfo[a].count,e.items[a-1].content={spu:t.Data.Results.vipInfo[a].productCnt,order:t.Data.Results.vipInfo[a].dailyOrderCnt,cAccount:t.Data.Results.vipInfo[a].subUserCnt,time:t.Data.Results.vipInfo[a].orderReserveDay}}))}}}),s=o,l=a("cba8"),n=Object(l["a"])(s,i,r,!1,null,null,null);t["default"]=n.exports},"7af4":function(e,t,a){"use strict";var i=a("ea53"),r=a("6a15"),o=a("1dfb"),s=a("9c18"),l=a("bf0e"),n=a("fcf6"),c=a("01f8"),d=a("1154");e.exports=function(e){var t,a,m,u,p,b,f=r(e),h="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,C=void 0!==g,_=d(f),y=0;if(C&&(g=i(g,v>2?arguments[2]:void 0,2)),void 0==_||h==Array&&s(_))for(t=l(f.length),a=new h(t);t>y;y++)b=C?g(f[y],y):f[y],n(a,y,b);else for(u=c(f,_),p=u.next,a=new h;!(m=p.call(u)).done;y++)b=C?o(u,g,[m.value,y],!0):m.value,n(a,y,b);return a.length=y,a}},"817c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"customer-Mgr"}},[a("el-card",{staticStyle:{"margin-right":"30px"}},[a("el-row",{staticClass:"mlr-30"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"供应商ID:"}},[a("el-input",{model:{value:e.filterParams.id,callback:function(t){e.$set(e.filterParams,"id",t)},expression:"filterParams.id"}})],1),a("el-form-item",{attrs:{label:"供应商登陆账号:"}},[a("el-input",{model:{value:e.filterParams.username,callback:function(t){e.$set(e.filterParams,"username",t)},expression:"filterParams.username"}})],1),a("el-form-item",{attrs:{label:"店铺名称:"}},[a("el-input",{model:{value:e.filterParams.shopName,callback:function(t){e.$set(e.filterParams,"shopName",t)},expression:"filterParams.shopName"}})],1),a("el-form-item",{attrs:{label:"店铺域名:"}},[a("el-input",{model:{value:e.filterParams.shopUrl,callback:function(t){e.$set(e.filterParams,"shopUrl",t)},expression:"filterParams.shopUrl"}})],1),a("el-form-item",{attrs:{label:"当前套餐类型:"}},[a("el-select",{model:{value:e.filterParams.vipType,callback:function(t){e.$set(e.filterParams,"vipType",t)},expression:"filterParams.vipType"}},[a("el-option",{attrs:{value:"0",label:"全部"}}),a("el-option",{attrs:{value:"1",label:"免费版"}}),a("el-option",{attrs:{value:"2",label:"标准版"}}),a("el-option",{attrs:{value:"3",label:"专业版"}}),a("el-option",{attrs:{value:"4",label:"尊享版"}})],1)],1),a("el-form-item",{attrs:{label:"注册时间:"}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getItems}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"danger"},on:{click:e.resetClick}},[e._v("重置")])],1)],1)],1)],1),a("el-card",{staticClass:"mt-20",staticStyle:{"margin-right":"30px"}},[a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],attrs:{data:e.items}},[a("el-table-column",{attrs:{label:"供应商ID",prop:"id"}}),a("el-table-column",{attrs:{label:"供应商登录账号",prop:"username"}}),a("el-table-column",{attrs:{label:"店铺名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.vendorShop?a("div",[e._v(" "+e._s(t.row.vendorShop.name||"--")+" ")]):a("div",[e._v("--")])]}}])}),a("el-table-column",{attrs:{label:"店铺域名"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.vendorShop&&t.row.vendorShop.url?a("div",[e._v(e._s(t.row.vendorShop.url))]):t.row.vendorShop&&t.row.vendorShop.subDomain?a("div",[e._v(e._s(t.row.vendorShop.subDomain+".myourmall.com"))]):a("div",[e._v("--")])]}}])}),a("el-table-column",{attrs:{label:"当前套餐类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.vipType?[e._v("免费版")]:e._e(),2==t.row.vipType?[e._v("标准版")]:e._e(),3==t.row.vipType?[e._v("专业版")]:e._e(),4==t.row.vipType?[e._v("尊享版")]:e._e()]}}])}),a("el-table-column",{attrs:{label:"注册时间",prop:"timeCreated"}}),a("el-table-column",{attrs:{label:"最近登录时间",prop:"timeLogin"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.nextVip?e._e():a("el-link",{attrs:{type:"primary",disabled:!e.isWrite},on:{click:function(a){return e.modifyCombo(t.row)}}},[e._v("套餐编辑")]),e._v("  "),t.row.nextVip?e._e():a("el-link",{attrs:{type:"primary",disabled:!e.isWrite},on:{click:function(a){return e.comboDetail(t.row)}}},[e._v("套餐详情")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"存在未生效的套餐, 无法进行修改",placement:"top"}},[t.row.nextVip?a("i",{staticClass:"el-icon-info"}):e._e()])]}}])})],1)],1),a("el-row",{staticClass:"footer"},[a("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},r=[],o=(a("0a53"),{data:function(){return{dataLoading:!1,isWrite:!1,filterParams:{id:"",username:"",shopName:"",shopUrl:"",comboType:"",timeCreatedFrom:"",timeCreatedTo:""},dateArr:[],pagination:{currentPage:1,pageSize:10,total:0},items:[]}},mounted:function(){this.isWrite=this.$isRole(this.$route.meta.roleWrite),this.getItems()},methods:{comboDetail:function(e){this.$router.push({path:"/customerMg-detail",query:{id:e.id}})},modifyCombo:function(e){console.log(e),this.$router.push({path:"/customerMg-modify",query:{id:e.id}})},resetClick:function(){this.filterParams={id:"",username:"",shopName:"",shopUrl:"",comboType:"",timeCreatedFrom:"",timeCreatedTo:""},this.dateArr=[],this.getItems()},getItems:function(){var e=this;this.dataLoading=!0,this.$apiCall("api.Admin.vendorList",{id:this.filterParams.id,username:this.filterParams.username,shopName:this.filterParams.shopName,shopUrl:this.filterParams.shopUrl,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,vipType:this.filterParams.vipType,rowsPerPage:this.pagination.pageSize,page:this.pagination.currentPage},(function(t){e.dataLoading=!1,9999==t.ErrorCode?(e.items=t.Data.Results,e.pagination.total=Number(t.Data.Pagination.totalCount)):e.$elementMessage(t.Message,"error")}))},handleSizeChange:function(e){this.pagination.pageSize=e,this.getItems()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getItems()},dateChange:function(e){e?(this.filterParams.timeCreatedFrom=this.$moment(e[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=this.$moment(e[1]).format("YYYY-MM-DD")):(this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="")}}}),s=o,l=(a("61f6"),a("cba8")),n=Object(l["a"])(s,i,r,!1,null,"1fd70956",null);t["default"]=n.exports},8208:function(e,t,a){var i=a("903c"),r=a("ebc5"),o=a("47f6"),s=a("4bf8").f,l=function(e){return function(t){var a,l=o(t),n=r(l),c=n.length,d=0,m=[];while(c>d)a=n[d++],i&&!s.call(l,a)||m.push(e?[a,l[a]]:l[a]);return m}};e.exports={entries:l(!0),values:l(!1)}},"82f2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"customer-Mgr"}},[a("el-card",{staticStyle:{"margin-right":"30px"}},[a("el-row",{staticClass:"mlr-30"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"供应商ID:"}},[a("el-input",{model:{value:e.filterParams.id,callback:function(t){e.$set(e.filterParams,"id",t)},expression:"filterParams.id"}})],1),a("el-form-item",{attrs:{label:"供应商登陆账号:"}},[a("el-input",{model:{value:e.filterParams.username,callback:function(t){e.$set(e.filterParams,"username",t)},expression:"filterParams.username"}})],1),a("el-form-item",{attrs:{label:"店铺名称:"}},[a("el-input",{model:{value:e.filterParams.shopName,callback:function(t){e.$set(e.filterParams,"shopName",t)},expression:"filterParams.shopName"}})],1),a("el-form-item",{attrs:{label:"店铺域名:"}},[a("el-input",{model:{value:e.filterParams.shopUrl,callback:function(t){e.$set(e.filterParams,"shopUrl",t)},expression:"filterParams.shopUrl"}})],1),"customerFree"!=e.$route.name?a("el-form-item",{attrs:{label:"当前套餐类型:"}},[a("el-select",{attrs:{clearable:""},model:{value:e.filterParams.vipType,callback:function(t){e.$set(e.filterParams,"vipType",t)},expression:"filterParams.vipType"}},[a("el-option",{attrs:{value:"0",label:"全部"}}),a("el-option",{attrs:{value:"1",label:"免费版"}}),a("el-option",{attrs:{value:"2",label:"标准版"}}),a("el-option",{attrs:{value:"3",label:"专业版"}}),a("el-option",{attrs:{value:"4",label:"尊享版"}})],1)],1):e._e(),a("el-form-item",{attrs:{label:"注册时间:"}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getItems}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"danger"},on:{click:e.resetClick}},[e._v("重置")])],1)],1)],1)],1),a("el-card",{staticClass:"mt-20",staticStyle:{"margin-right":"30px"}},[a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],attrs:{data:e.items}},[a("el-table-column",{attrs:{label:"供应商ID",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.id||"--"))]}}])}),a("el-table-column",{attrs:{label:"供应商登录账号",prop:"username"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.username||"--"))]}}])}),a("el-table-column",{attrs:{label:"店铺名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.vendorShop?a("div",[e._v(" "+e._s(t.row.vendorShop.name||"--")+" ")]):a("div",[e._v("--")])]}}])}),a("el-table-column",{attrs:{label:"店铺域名"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.vendorShop&&t.row.vendorShop.url?a("div",[e._v(e._s(t.row.vendorShop.url))]):t.row.vendorShop&&t.row.vendorShop.subDomain?a("div",[e._v(e._s(t.row.vendorShop.subDomain+".myourmall.com"))]):a("div",[e._v("--")])]}}])}),"customerFree"!=e.$route.name?a("el-table-column",{attrs:{label:"当前套餐类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.vipType?[e._v("免费版")]:e._e(),2==t.row.vipType?[e._v("标准版")]:e._e(),3==t.row.vipType?[e._v("专业版")]:e._e(),4==t.row.vipType?[e._v("尊享版")]:e._e()]}}],null,!1,2213083597)}):e._e(),a("el-table-column",{attrs:{label:"注册时间",prop:"timeCreated"}}),a("el-table-column",{attrs:{label:"最近登录时间",prop:"timeLogin"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.timeLogin||"--"))]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["customerAll"==e.$route.name?a("div",[a("el-link",{staticClass:"mg-r-10",attrs:{type:"primary"},on:{click:function(a){return e.detailHandle(t.row)}}},[e._v("客户信息")]),t.row.nextVip?e._e():a("el-link",{attrs:{disabled:!e.isWrite,type:"primary"},on:{click:function(a){return e.comboDetail(t.row)}}},[e._v("套餐详情")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"存在未生效的套餐, 无法进行修改",placement:"top"}},[t.row.nextVip?a("i",{staticClass:"el-icon-info"}):e._e()])],1):a("div",[!t.row.nextVip&&e.isWrite?a("el-dropdown",{on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link",on:{click:function(a){return e.modifyCombo(t.row)}}},[e._v(" 套餐编辑"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{command:"vipDetail",data:t.row}}},[e._v("套餐详情")]),a("el-dropdown-item",{attrs:{command:{command:"editCustomer",data:t.row}}},[e._v("客户编辑")]),a("el-dropdown-item",{attrs:{command:{command:"customerDetail",data:t.row}}},[e._v("客户信息")])],1)],1):e._e(),t.row.nextVip||e.isWrite?e._e():a("el-dropdown",{on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link",on:{click:function(a){return e.comboDetail(t.row)}}},[e._v(" 套餐详情"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{command:"customerDetail",data:t.row}}},[e._v("客户信息")])],1)],1),t.row.nextVip&&e.isWrite?a("el-dropdown",{on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[e._v(" 客户编辑"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{command:"customerDetail",data:t.row}}},[e._v("客户信息")])],1)],1):e._e(),t.row.nextVip&&!e.isWrite?a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.detailHandle(t.row)}}},[e._v("客户信息")]):e._e(),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"存在未生效的套餐, 无法进行修改",placement:"top"}},[t.row.nextVip?a("i",{staticClass:"el-icon-info"}):e._e()])],1)]}}])})],1)],1),a("el-row",{staticClass:"footer"},[a("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{width:"500px",title:"编辑客户信息","close-on-click-modal":!1,visible:e.addOrEditVisible},on:{close:e.dialogCloseHandle}},[a("el-row",{staticClass:"dialog"},[a("el-form",{attrs:{size:"small"}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:e.dialogForm.mobile,callback:function(t){e.$set(e.dialogForm,"mobile",t)},expression:"dialogForm.mobile"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.dialogForm.email,callback:function(t){e.$set(e.dialogForm,"email",t)},expression:"dialogForm.email"}})],1),a("el-form-item",{attrs:{label:"客户来源"}},[a("el-select",{staticStyle:{width:"460px"},model:{value:e.dialogForm.source,callback:function(t){e.$set(e.dialogForm,"source",t)},expression:"dialogForm.source"}},[a("el-option",{attrs:{value:"1",label:"官网咨询"}}),a("el-option",{attrs:{value:"2",label:"客户介绍"}}),a("el-option",{attrs:{value:"3",label:"展会获客"}}),a("el-option",{attrs:{value:"4",label:"陌拜获客"}}),a("el-option",{attrs:{value:"5",label:"自然获客"}}),a("el-option",{attrs:{value:"9",label:"其他"}})],1)],1),a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{model:{value:e.dialogForm.contact,callback:function(t){e.$set(e.dialogForm,"contact",t)},expression:"dialogForm.contact"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.remark,callback:function(t){e.$set(e.dialogForm,"remark",t)},expression:"dialogForm.remark"}})],1)],1),a("div",{staticClass:"tx-center"},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.dialogCloseHandle}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.editCustomerHandle}},[e._v("确定")])],1)],1)],1),a("el-dialog",{attrs:{title:"查看客户信息",width:"500px","close-on-click-modal":!1,visible:e.detailVisible},on:{close:e.detailCloseHandle}},[a("el-row",{staticClass:"dialog mg-l-50"},[a("el-form",{attrs:{size:"small"}},[a("el-form-item",{attrs:{label:"客户名称:"}},[e._v(e._s(e.dialogForm.name||"--"))]),a("el-form-item",{attrs:{label:"电话:"}},[e._v(e._s(e.dialogForm.mobile||"--"))]),a("el-form-item",{attrs:{label:"邮箱:"}},[e._v(e._s(e.dialogForm.email||"--"))]),a("el-form-item",{attrs:{label:"客户来源:"}},[1==e.dialogForm.source?a("div",[e._v("官网咨询")]):e._e(),2==e.dialogForm.source?a("div",[e._v("客户介绍")]):e._e(),3==e.dialogForm.source?a("div",[e._v("展会获客")]):e._e(),4==e.dialogForm.source?a("div",[e._v("陌拜客户")]):e._e(),9==e.dialogForm.source?a("div",[e._v("其他")]):e._e(),5==e.dialogForm.source?a("div",[e._v("自然获客")]):e._e()]),a("el-form-item",{attrs:{label:"联系人:"}},[e._v(e._s(e.dialogForm.contact||"--"))]),a("el-form-item",{attrs:{label:"提交时间:"}},[e._v(e._s(e.dialogForm.timeCreated||"--"))]),a("el-form-item",{attrs:{label:"供应商ID:"}},[e._v(e._s(e.dialogForm.id||"--"))]),a("el-form-item",{attrs:{label:"供应商登录账号:"}},[e._v(e._s(e.dialogForm.username||"--"))]),a("el-form-item",{attrs:{label:"店铺名称:"}},[e._v(e._s(e.dialogForm.shopName||"--"))]),a("el-form-item",{attrs:{label:"店铺域名:"}},[e._v(e._s(e.dialogForm.url||"--"))]),a("el-form-item",{attrs:{label:"注册时间:"}},[e._v(e._s(e.dialogForm.registerTime||"--"))]),a("el-form-item",{attrs:{label:"最近登录时间:"}},[e._v(e._s(e.dialogForm.lastLoginTime||"--"))]),a("el-form-item",{attrs:{label:"备注:"}},[e._v(e._s(e.dialogForm.remark||"--"))])],1),a("el-row",{staticClass:"tx-center"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.detailCloseHandle}},[e._v("关闭")])],1)],1)],1)],1)},r=[],o=(a("b8bb"),a("0a53"),{data:function(){return{detailVisible:!1,addOrEditVisible:!1,customerId:null,dialogForm:{name:"",mobile:"",email:"",source:"",contact:"",remark:""},dataLoading:!1,isWrite:!1,filterParams:{id:"",username:"",shopName:"",shopUrl:"",comboType:"",timeCreatedFrom:"",timeCreatedTo:""},dateArr:[],pagination:{currentPage:1,pageSize:10,total:0},items:[]}},watch:{$route:function(){this.resetClick()}},mounted:function(){this.isWrite=this.$isRole(this.$route.meta.roleWrite),this.getItems()},methods:{editCustomerHandle:function(){var e=this;this.dialogForm.email||this.dialogForm.mobile?this.dialogForm.source?this.$apiCall("api.Admin.changeVendor",{id:this.customerId,email:this.dialogForm.email,phone:this.dialogForm.mobile,name:this.dialogForm.name,source:this.dialogForm.source,linkman:this.dialogForm.contact,remark:this.dialogForm.remark},(function(t){9999==t.ErrorCode?(e.$elementMessage("编辑客户成功","success"),e.dialogCloseHandle(),e.getItems()):e.$elementMessage(t.Message,"error")})):this.$elementMessage("请填写客户来源","error"):this.$elementMessage("请至少要填写电话或者邮箱中其中一项","error")},dialogCloseHandle:function(){this.addOrEditVisible=!1,this.customerId=null,this.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:""}},detailCloseHandle:function(){this.detailVisible=!1,this.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:""}},detailHandle:function(e){var t=this;this.detailVisible=!0,this.customerId=e.id,this.$apiCall("api.Admin.getVendor",{id:this.customerId},(function(e){if(9999==e.ErrorCode){var a=e.Data.Results;t.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:"",id:a.id,username:a.username,shopName:"",url:"",registerTime:a.timeCreated,lastLoginTime:a.timeLogin,timeCreated:""},a.vendorShop&&(t.dialogForm.shopName=a.vendorShop.name,a.vendorShop.url?t.dialogForm.url=a.vendorShop.url:a.vendorShop.subDomain&&(t.dialogForm.url=a.vendorShop.subDomain+".myourmall.com")),a.lead&&(t.dialogForm.name=a.lead.name,t.dialogForm.mobile=a.lead.phone,t.dialogForm.email=a.lead.email,t.dialogForm.source=a.lead.source,t.dialogForm.contact=a.lead.linkman,t.dialogForm.remark=a.lead.remark,t.dialogForm.timeCreated=a.lead.timeCreated)}else t.$elementMessage(e.Message,"error")}))},editCustomer:function(e){var t=this;this.addOrEditVisible=!0,this.customerId=e.id,this.$apiCall("api.Admin.getVendor",{id:this.customerId},(function(e){if(9999==e.ErrorCode){var a=e.Data.Results;t.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:""},a.lead&&(t.dialogForm.name=a.lead.name,t.dialogForm.mobile=a.lead.phone,t.dialogForm.email=a.lead.email,t.dialogForm.source=a.lead.source,t.dialogForm.contact=a.lead.linkman,t.dialogForm.remark=a.lead.remark)}else t.$elementMessage(e.Message,"error")}))},handleCommand:function(e){switch(e.command){case"editVip":this.modifyCombo(e.data);break;case"vipDetail":this.comboDetail(e.data);break;case"editCustomer":this.editCustomer(e.data);break;case"customerDetail":this.detailHandle(e.data);break;default:break}},comboDetail:function(e){this.$router.push({path:"/customerMg-detail",query:{id:e.id}})},modifyCombo:function(e){console.log(e),this.$router.push({path:"/customerMg-modify",query:{id:e.id}})},resetClick:function(){this.filterParams={id:"",username:"",shopName:"",shopUrl:"",comboType:"",timeCreatedFrom:"",timeCreatedTo:""},this.dateArr=[],this.getItems()},getItems:function(){var e=this;this.dataLoading=!0,"customerFree"==this.$route.name&&(this.filterParams.vipType="1");var t=null;"customerPay"==this.$route.name&&(t=["4","2","3"]),this.$apiCall("api.Admin.vendorList",{id:this.filterParams.id,vipTypeIn:t,username:this.filterParams.username,shopName:this.filterParams.shopName,shopUrl:this.filterParams.shopUrl,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,vipType:this.filterParams.vipType,rowsPerPage:this.pagination.pageSize,page:this.pagination.currentPage},(function(t){e.dataLoading=!1,9999==t.ErrorCode?(e.items=t.Data.Results,e.pagination.total=Number(t.Data.Pagination.totalCount)):e.$elementMessage(t.Message,"error")}))},handleSizeChange:function(e){this.pagination.pageSize=e,this.getItems()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getItems()},dateChange:function(e){e?(this.filterParams.timeCreatedFrom=this.$moment(e[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=this.$moment(e[1]).format("YYYY-MM-DD")):(this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="")}}}),s=o,l=(a("07eb"),a("2de9"),a("cba8")),n=Object(l["a"])(s,i,r,!1,null,"26e0d731",null);t["default"]=n.exports},8667:function(e,t,a){},9135:function(e,t,a){"use strict";var i=a("dcce"),r=a("b488").map,o=a("1f71"),s=o("map");i({target:"Array",proto:!0,forced:!s},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},ac58:function(e,t,a){var i=a("e844"),r=i.match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},c2af:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"unregistered"}},[a("el-row",{staticClass:"mg-b-20 mg-r-30",staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addCustomer}},[e._v("新增客户")])],1),a("el-card",{staticClass:"mg-r-30"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"供应商名称:"}},[a("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getItems.apply(null,arguments)}},model:{value:e.filterParams.name,callback:function(t){e.$set(e.filterParams,"name",t)},expression:"filterParams.name"}})],1),a("el-form-item",{attrs:{label:"供应商手机号:"}},[a("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getItems.apply(null,arguments)}},model:{value:e.filterParams.mobile,callback:function(t){e.$set(e.filterParams,"mobile",t)},expression:"filterParams.mobile"}})],1),a("el-form-item",{attrs:{label:"供应商邮箱:"}},[a("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getItems.apply(null,arguments)}},model:{value:e.filterParams.email,callback:function(t){e.$set(e.filterParams,"email",t)},expression:"filterParams.email"}})],1),a("el-form-item",{attrs:{label:"客户来源:"}},[a("el-select",{attrs:{clearable:""},model:{value:e.filterParams.source,callback:function(t){e.$set(e.filterParams,"source",t)},expression:"filterParams.source"}},[a("el-option",{attrs:{value:"1",label:"官网咨询"}}),a("el-option",{attrs:{value:"2",label:"客户介绍"}}),a("el-option",{attrs:{value:"3",label:"展会获客"}}),a("el-option",{attrs:{value:"4",label:"陌拜获客"}}),a("el-option",{attrs:{value:"5",label:"自然获客"}}),a("el-option",{attrs:{value:"9",label:"其他"}})],1)],1),a("el-form-item",{attrs:{label:"联系人:"}},[a("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getItems.apply(null,arguments)}},model:{value:e.filterParams.contact,callback:function(t){e.$set(e.filterParams,"contact",t)},expression:"filterParams.contact"}})],1),a("el-form-item",{attrs:{label:"提交时间:"}},[a("el-date-picker",{attrs:{type:"daterange","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getItems}},[e._v("查询")]),a("el-button",{attrs:{type:"warning"},on:{click:e.resetClick}},[e._v("重置")])],1)],1)],1),a("el-card",{staticClass:"mg-t-30"},[a("el-table",{attrs:{data:e.items}},[a("el-table-column",{attrs:{label:"供应商名称",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name||"--"))]}}])}),a("el-table-column",{attrs:{label:"供应商手机号",prop:"phone"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.phone||"--"))]}}])}),a("el-table-column",{attrs:{label:"邮箱",prop:"email"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.email||"--"))]}}])}),a("el-table-column",{attrs:{label:"客户来源"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.source?a("div",[e._v("官网咨询")]):e._e(),2==t.row.source?a("div",[e._v("客户介绍")]):e._e(),3==t.row.source?a("div",[e._v("展会获客")]):e._e(),4==t.row.source?a("div",[e._v("陌拜获客")]):e._e(),9==t.row.source?a("div",[e._v("其他")]):e._e(),5==t.row.source?a("div",[e._v("自然获客")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"联系人",prop:"linkman"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.linkman||"--"))]}}])}),a("el-table-column",{attrs:{label:"提交时间",prop:"timeCreated"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticClass:"mg-r-10",attrs:{type:"primary"},on:{click:function(a){return e.editCustomer(t.row)}}},[e._v("编辑")]),a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.detailHandle(t.row)}}},[e._v("查看")])]}}])})],1),a("el-row",{staticClass:"mg-t-20 tx-center"},[a("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{width:"500px",title:1==e.isAdd?"新增客户":"编辑客户信息","close-on-click-modal":!1,visible:e.addOrEditVisible},on:{close:e.dialogCloseHandle}},[a("el-row",{staticClass:"dialog"},[a("el-form",{attrs:{size:"small"}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:e.dialogForm.mobile,callback:function(t){e.$set(e.dialogForm,"mobile",t)},expression:"dialogForm.mobile"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.dialogForm.email,callback:function(t){e.$set(e.dialogForm,"email",t)},expression:"dialogForm.email"}})],1),a("el-form-item",{attrs:{label:"客户来源"}},[a("el-select",{staticStyle:{width:"460px"},attrs:{clearable:""},model:{value:e.dialogForm.source,callback:function(t){e.$set(e.dialogForm,"source",t)},expression:"dialogForm.source"}},[a("el-option",{attrs:{value:"1",label:"官网咨询"}}),a("el-option",{attrs:{value:"2",label:"客户介绍"}}),a("el-option",{attrs:{value:"3",label:"展会获客"}}),a("el-option",{attrs:{value:"4",label:"陌拜获客"}}),a("el-option",{attrs:{value:"5",label:"自然获客"}}),a("el-option",{attrs:{value:"9",label:"其他"}})],1)],1),a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{model:{value:e.dialogForm.contact,callback:function(t){e.$set(e.dialogForm,"contact",t)},expression:"dialogForm.contact"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.remark,callback:function(t){e.$set(e.dialogForm,"remark",t)},expression:"dialogForm.remark"}})],1)],1),a("div",{staticClass:"tx-center"},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.dialogCloseHandle}},[e._v("取消")]),e.isAdd?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addCustomerHandle}},[e._v("确定")]):e._e(),e.isAdd?e._e():a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.editCustomerHandle}},[e._v("确定")])],1)],1)],1),a("el-dialog",{attrs:{title:"查看客户信息",width:"500px",visible:e.detailVisible,"close-on-click-modal":!1},on:{close:e.detailCloseHandle}},[a("el-row",{staticClass:"dialog mg-l-50"},[a("el-form",{attrs:{size:"small"}},[a("el-form-item",{attrs:{label:"客户名称:"}},[e._v(e._s(e.dialogForm.name))]),a("el-form-item",{attrs:{label:"电话:"}},[e._v(e._s(e.dialogForm.mobile))]),a("el-form-item",{attrs:{label:"邮箱:"}},[e._v(e._s(e.dialogForm.email))]),a("el-form-item",{attrs:{label:"客户来源:"}},[1==e.dialogForm.source?a("div",[e._v("官网咨询")]):e._e(),2==e.dialogForm.source?a("div",[e._v("客户介绍")]):e._e(),3==e.dialogForm.source?a("div",[e._v("展会获客")]):e._e(),4==e.dialogForm.source?a("div",[e._v("陌拜获客")]):e._e(),9==e.dialogForm.source?a("div",[e._v("其他")]):e._e(),5==e.dialogForm.source?a("div",[e._v("自然获客")]):e._e()]),a("el-form-item",{attrs:{label:"联系人:"}},[e._v(e._s(e.dialogForm.contact))]),a("el-form-item",{attrs:{label:"提交时间:"}},[e._v(e._s(e.dialogForm.timeCreated))]),a("el-form-item",{attrs:{label:"备注:"}},[e._v(e._s(e.dialogForm.remark))])],1),a("el-row",{staticClass:"tx-center"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.detailCloseHandle}},[e._v("关闭")])],1)],1)],1)],1)},r=[],o=(a("b8bb"),a("0a53"),{data:function(){return{isAdd:!1,detailVisible:!1,addOrEditVisible:!1,dialogForm:{name:"",mobile:"",email:"",source:"",contact:"",remark:""},customerId:null,pagination:{currentPage:1,pageSize:10,total:0},items:[],dateArr:[],filterParams:{name:"",mobile:"",email:"",source:"",contact:"",startDate:"",endDate:""}}},created:function(){this.getItems()},methods:{resetClick:function(){this.filterParams={name:"",mobile:"",email:"",source:"",contact:"",startDate:"",endDate:""},this.getItems()},getItems:function(){var e=this;this.$apiCall("api.Admin.leadList",{nameLike:this.filterParams.name,phone:this.filterParams.mobile,source:this.filterParams.source,timeCreatedFrom:this.filterParams.startDate,timeCreatedTo:this.filterParams.endDate,email:this.filterParams.email,linkman:this.filterParams.contact,rowsPerPage:this.pagination.pageSize,page:this.pagination.currentPage},(function(t){9999==t.ErrorCode?(e.items=t.Data.Results,e.pagination.total=Number(t.Data.Pagination.totalCount)):e.$elementMessage(t.Message,"error")}))},handleSizeChange:function(e){this.pagination.pageSize=e,this.getItems()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getItems()},detailHandle:function(e){this.detailVisible=!0,this.dialogForm={name:e.name,mobile:e.phone,email:e.email,source:e.source,contact:e.linkman,remark:e.remark,timeCreated:e.timeCreated}},editCustomer:function(e){this.isAdd=!1,this.addOrEditVisible=!0,this.customerId=e.id,this.dialogForm={name:e.name,mobile:e.phone,email:e.email,source:e.source,contact:e.linkman,remark:e.remark}},editCustomerHandle:function(){var e=this;this.dialogForm.email||this.dialogForm.mobile?this.dialogForm.source?this.$apiCall("api.Admin.changeLeads",{id:this.customerId,email:this.dialogForm.email,phone:this.dialogForm.mobile,name:this.dialogForm.name,source:this.dialogForm.source,linkman:this.dialogForm.contact,remark:this.dialogForm.remark},(function(t){9999==t.ErrorCode?(e.$elementMessage("编辑客户成功","success"),e.dialogCloseHandle(),e.getItems()):e.$elementMessage(t.Message,"error")})):this.$elementMessage("请填写客户来源","error"):this.$elementMessage("请至少要填写电话或者邮箱中其中一项","error")},addCustomer:function(){this.isAdd=!0,this.addOrEditVisible=!0},addCustomerHandle:function(){var e=this;this.dialogForm.email||this.dialogForm.mobile?this.dialogForm.source?this.$apiCall("api.Admin.addLeads",{email:this.dialogForm.email,phone:this.dialogForm.mobile,name:this.dialogForm.name,source:this.dialogForm.source,linkman:this.dialogForm.contact,remark:this.dialogForm.remark},(function(t){9999==t.ErrorCode?(e.$elementMessage("新增客户成功","success"),e.dialogCloseHandle(),e.getItems()):e.$elementMessage(t.Message,"error")})):this.$elementMessage("请填写客户来源","error"):this.$elementMessage("请至少要填写电话或者邮箱中其中一项","error")},dateChange:function(e){e?(this.filterParams.startDate=this.$moment(e[0]).format("YYYY-MM-DD"),this.filterParams.endDate=this.$moment(e[1]).format("YYYY-MM-DD")):(this.filterParams.startDate="",this.filterParams.endDate="")},detailCloseHandle:function(){this.detailVisible=!1,this.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:""}},dialogCloseHandle:function(){this.addOrEditVisible=!1,this.customerId=null,this.dialogForm={name:"",mobile:"",email:"",source:"",contact:"",remark:""}}}}),s=o,l=(a("0127"),a("cba8")),n=Object(l["a"])(s,i,r,!1,null,null,null);t["default"]=n.exports},cc6d:function(e,t,a){"use strict";var i=a("dcce"),r=a("7237"),o=a("6a15"),s=a("bf0e"),l=a("046e"),n=a("8091"),c=a("dcc9"),d=a("e96b"),m=a("ac58"),u=a("58ec"),p=a("1dec"),b=a("5166"),f=[],h=f.sort,v=n((function(){f.sort(void 0)})),g=n((function(){f.sort(null)})),C=d("sort"),_=!n((function(){if(p)return p<70;if(!(m&&m>3)){if(u)return!0;if(b)return b<603;var e,t,a,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(i=0;i<47;i++)f.push({k:t+i,v:a})}for(f.sort((function(e,t){return t.v-e.v})),i=0;i<f.length;i++)t=f[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}})),y=v||!g||!C||!_,k=function(e){return function(t,a){return void 0===a?-1:void 0===t?1:void 0!==e?+e(t,a)||0:l(t)>l(a)?1:-1}};i({target:"Array",proto:!0,forced:y},{sort:function(e){void 0!==e&&r(e);var t=o(this);if(_)return void 0===e?h.call(t):h.call(t,e);var a,i,l=[],n=s(t.length);for(i=0;i<n;i++)i in t&&l.push(t[i]);l=c(l,k(e)),a=l.length,i=0;while(i<a)t[i]=l[i++];while(i<n)delete t[i++];return t}})},d2e8:function(e,t,a){},d79e:function(e,t,a){"use strict";a.r(t);var i,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"customer-modify"}},[a("el-card",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("router-link",{attrs:{to:{path:"/customerMg"},replace:""}},[e._v("客户管理")])],1),a("el-breadcrumb-item",[e._v("修改套餐")])],1),a("el-divider"),a("el-form",{ref:"comboForm",attrs:{inline:!0,rules:e.rules,model:e.comboObj,size:"small","label-width":"150px"}},[a("el-row",[a("el-form-item",{attrs:{label:"当前套餐类型:"}},[1==e.comboDetail.vipType?[e._v("免费版")]:e._e(),2==e.comboDetail.vipType?[e._v("标准版")]:e._e(),3==e.comboDetail.vipType?[e._v("专业版")]:e._e(),4==e.comboDetail.vipType?[e._v("尊享版")]:e._e()],2),"0"==e.comboDetail.overTime?a("el-form-item",{attrs:{label:"服务期至:"}},[e._v(" --")]):a("el-form-item",{attrs:{label:"服务期至:"}},[e._v(" "+e._s(e.$moment(1e3*e.comboDetail.overTime).format("YYYY-MM-DD HH:mm:ss")))])],1),a("el-row",[a("el-form-item",{attrs:{label:"付费项目:",prop:"project"}},[a("el-radio-group",{on:{change:e.radioChange},model:{value:e.comboObj.project,callback:function(t){e.$set(e.comboObj,"project",t)},expression:"comboObj.project"}},[a("el-radio",{attrs:{label:1}},[e._v("全部")]),a("el-radio",{attrs:{label:2}},[e._v("套餐")]),1!=e.comboDetail.vipType?a("el-radio",{attrs:{label:3}},[e._v("加购")]):e._e()],1)],1)],1),1==e.comboObj.project||2==e.comboObj.project?[a("el-row",[a("el-form-item",{attrs:{label:"要修改的套餐类型:",prop:"vipType"}},[a("el-select",{model:{value:e.comboObj.vipType,callback:function(t){e.$set(e.comboObj,"vipType",t)},expression:"comboObj.vipType"}},[a("el-option",{attrs:{value:2,label:"标准版"}}),a("el-option",{attrs:{value:3,label:"专业版"}}),a("el-option",{attrs:{value:4,label:"尊享版"}})],1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"购买时长:",prop:"overTime"}},[a("el-select",{model:{value:e.comboObj.overTime,callback:function(t){e.$set(e.comboObj,"overTime",t)},expression:"comboObj.overTime"}},[a("el-option",{attrs:{value:12,label:"一年"}}),a("el-option",{attrs:{value:24,label:"二年"}}),a("el-option",{attrs:{value:36,label:"三年"}})],1)],1)],1)]:e._e(),1==e.comboObj.project||3==e.comboObj.project?e._l(e.comboObj.addPack,(function(t,i){return a("el-row",{key:i},[a("el-form-item",{attrs:{label:0==i?"加购项目:":" ",prop:"addPack["+i+"].object",rules:{required:!0,message:"请选择加购项目",trigger:"blur"}}},[a("el-select",{model:{value:t.object,callback:function(a){e.$set(t,"object",a)},expression:"item.object"}},[e.comboDetail.service?e._e():a("el-option",{attrs:{value:"service",label:"企业自由品牌服务包"}}),a("el-option",{attrs:{value:"mail",label:"邮件加油包"}}),a("el-option",{attrs:{value:"product",label:"商品上架数"}}),a("el-option",{attrs:{value:"subUser",label:"子账号"}})],1)],1),"mail"==t.object?a("el-form-item",{attrs:{prop:"addPack["+i+"].mailCnt",rules:{required:!0,message:"请填写邮件数量",trigger:"blur"}}},[a("el-input-number",{staticStyle:{width:"220px"},attrs:{min:0,"step-strictly":!0,step:1e3,"controls-position":"right",placeholder:"请填写需要的邮件数量",type:"number"},model:{value:t.mailCnt,callback:function(a){e.$set(t,"mailCnt",a)},expression:"item.mailCnt"}})],1):e._e(),"product"==t.object?a("el-form-item",{attrs:{prop:"addPack["+i+"].productCnt",rules:{required:!0,message:"请填写数量",trigger:"blur"}}},[a("el-input-number",{staticStyle:{width:"220px"},attrs:{min:0,"controls-position":"right",placeholder:"请填写需要的数量",type:"number"},model:{value:t.productCnt,callback:function(a){e.$set(t,"productCnt",a)},expression:"item.productCnt"}})],1):e._e(),"subUser"==t.object?a("el-form-item",{attrs:{prop:"addPack["+i+"].subUserCnt",rules:{required:!0,message:"请填写数量",trigger:"blur"}}},[a("el-input-number",{staticStyle:{width:"220px"},attrs:{min:0,"controls-position":"right",placeholder:"请填写需要的数量",type:"number"},model:{value:t.subUserCnt,callback:function(a){e.$set(t,"subUserCnt",a)},expression:"item.subUserCnt"}})],1):e._e(),a("el-form-item",{attrs:{prop:"addPack["+i+"].addAmount",rules:{required:!0,message:"请填写加购金额",trigger:"blur"}}},[a("el-input",{attrs:{placeholder:"请填写加购金额"},model:{value:t.addAmount,callback:function(a){e.$set(t,"addAmount",a)},expression:"item.addAmount"}})],1),"service"==t.object?a("el-form-item",[a("div",{staticClass:"extra"},[a("div",{staticClass:"header"},[a("a",[e._v("上架应用至Shopify")]),a("a",[e._v("设置店铺独有域名")])])])]):e._e(),i>0?a("el-form-item",[a("i",{staticClass:"point el-icon-remove",on:{click:function(t){return e.removeAddPack(i)}}})]):e._e()],1)})):e._e(),1==e.comboObj.project||3==e.comboObj.project?a("el-row",[a("el-form-item",{attrs:{label:" "}},[a("div",{staticClass:"extra"},[a("div",{staticStyle:{margin:"0 10px"}},[a("el-link",{attrs:{type:"primary"},on:{click:e.continueAdd}},[e._v("继续加购")])],1)])])],1):e._e(),1==e.comboObj.project||2==e.comboObj.project?a("el-row",[a("el-form-item",{attrs:{label:"套餐金额:",prop:"vipAmount"}},[a("el-input",{attrs:{type:"number"},model:{value:e.comboObj.vipAmount,callback:function(t){e.$set(e.comboObj,"vipAmount",t)},expression:"comboObj.vipAmount"}})],1)],1):e._e(),a("el-row",[a("el-form-item",{attrs:{label:"上传支付凭证:",prop:"imgUrl"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.comboObj.imgUrl,callback:function(t){e.$set(e.comboObj,"imgUrl",t)},expression:"comboObj.imgUrl"}}),a("el-upload",{ref:"upload",attrs:{action:"","list-type":"picture-card",limit:1,"on-exceed":e.exceedUpload,"before-upload":e.onBeforeUpload,"http-request":e.Upload,"on-remove":e.handleRemove}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"新套餐生效时间:",prop:"suff"}},[a("el-radio-group",{model:{value:e.comboObj.suff,callback:function(t){e.$set(e.comboObj,"suff",t)},expression:"comboObj.suff"}},[a("el-radio",{attrs:{label:1,border:""}},[e._v("立即生效")]),a("el-radio",{attrs:{label:2,border:""}},[e._v("选择生效时间")])],1)],1),2==e.comboObj.suff?a("el-form-item",{attrs:{prop:"date"}},[a("el-date-picker",{staticClass:"ml-20",attrs:{"value-format":"timestamp","picker-options":e.pickerOptions1,type:"date",placeholder:"选择日期"},model:{value:e.comboObj.date,callback:function(t){e.$set(e.comboObj,"date",t)},expression:"comboObj.date"}})],1):e._e()],1),a("el-row",[a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",row:3},model:{value:e.comboObj.remark,callback:function(t){e.$set(e.comboObj,"remark",t)},expression:"comboObj.remark"}})],1)],1),a("el-row",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{loading:e.btnLoading,type:"primary",size:"small"},on:{click:e.submit}},[e._v("提交")]),a("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[e._v("取消")])],1)],2)],1)],1)},o=[],s=a("8955"),l=(a("c7ae"),a("0a53"),a("65ff"),a("83a0"),a("f6a2"),a("4c4d"),a("2f90"),a("31c9"),{data:function(){return{pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},rules:{project:[{required:!0,message:"请选择付费项目",trigger:"blur"}],vipType:[{required:!0,message:"请选择套餐类型",trigger:"blur"}],overTime:[{required:!0,message:"请选择套餐时长",trigger:"blur"}],vipAmount:[{required:!0,message:"请输入套餐金额",trigger:"blur"}],addAmount:[{required:!0,message:"请输入加购金额",trigger:"blur"}],suff:[{required:!0,message:"请选择生效时间",trigger:"blur"}],date:[{required:!0,message:"请选择生效时间",trigger:"blur"}],imgUrl:[{required:!0,message:"请上传支付凭证",trigger:"blur"}]},comboDetail:{},btnLoading:!1,dateSet:[{label:"一个月",value:1},{label:"两个月",value:2},{label:"三个月",value:3},{label:"四个月",value:4},{label:"五个月",value:5},{label:"六个月",value:6},{label:"七个月",value:7},{label:"八个月",value:8},{label:"九个月",value:9},{label:"十个月",value:10},{label:"十一个月",value:11}],comboObj:{project:1,operate:"",vipType:"",date:null,object:"",overTime:"",hasAdd:!1,addPack:[{object:"",operate:"加购",detail:"",mailCnt:"",addAmount:""}],vipAmount:null,addAmount:null,imgUrl:"",timeOpen:"",detail:""},base64:"",ext:"",file:null,fileList:[],userId:""}},computed:{extraSummary:function(){var e=0;return this.comboObj.addPack.forEach((function(t){e+=Number(t.addAmount)})),e}},mounted:function(){this.$route.query&&this.$route.query.id&&(this.userId=this.$route.query.id,this.getDetail())},methods:(i={radioChange:function(e){this.$refs["upload"].clearFiles(),this.comboObj={project:e,operate:"",vipType:"",date:null,object:"",overTime:"",hasAdd:!1,addPack:[{object:"",operate:"加购",detail:"",mailCnt:"",addAmount:""}],vipAmount:null,addAmount:null,imgUrl:"",timeOpen:"",detail:""}},goBack:function(){this.$router.go(-1)},removeAddPack:function(e){this.comboObj.addPack.splice(e,1)},continueAdd:function(){this.comboObj.addPack.push({object:"",operate:"加购",detail:"",mailCnt:"",addAmount:""})},submit:function(){var e=this,t=!0;if(this.$refs["comboForm"].validate((function(e){e||(t=!1)})),t){var a=this.$moment().add(this.comboObj.overTime,"M").format("X");1!=this.comboObj.project&&3!=this.comboObj.project||(this.comboObj.hasAdd=!0),this.comboObj.hasAdd||(this.comboObj.addPack=[]),1!=this.comboObj.project&&2!=this.comboObj.project||(this.comboObj.object="套餐"),3==this.comboObj.project&&(this.comboObj.object="加购"),1==this.comboObj.suff?this.comboObj.timeOpen=0:2==this.comboObj.suff&&(this.comboObj.timeOpen=Math.floor(this.comboObj.date/1e3)),this.comboDetail.vipType==this.comboObj.vipType?this.comboObj.operate="续费":this.comboDetail.vipType<this.comboObj.vipType?this.comboObj.operate="升级":this.comboDetail.vipType>this.comboObj.vipType&&(this.comboObj.operate="降级"),this.btnLoading=!0,this.$apiCall("api.Admin.changeVip",{vipType:this.comboObj.vipType,operate:this.comboObj.operate,userId:this.userId,overTime:a,object:this.comboObj.object,timeOpen:this.comboObj.timeOpen,hasAdd:this.comboObj.hasAdd,addPack:this.comboObj.addPack,addAmount:this.extraSummary,vipAmount:this.comboObj.vipAmount,totalAmount:Number(this.comboObj.vipAmount)+Number(this.extraSummary),imgUrl:this.comboObj.imgUrl,remark:this.comboObj.remark},(function(t){9999==t.ErrorCode?(e.btnLoading=!1,e.$elementMessage("修改套餐成功","success"),e.$router.replace({path:"/customerMg"})):(e.btnLoading=!1,e.$elementMessage(t.Message,"error"))}))}},handlePictureCardPreview:function(){},handleRemove:function(){},getDetail:function(){var e=this;this.$apiCall("api.Admin.getVipDetail",{userId:this.userId||""},(function(t){9999==t.ErrorCode&&(e.comboDetail=t.Data.Results)}))}},Object(s["a"])(i,"handleRemove",(function(e){var t=this;this.fileList.forEach((function(a,i){a.index==e.uid&&t.fileList.splice(i,1)})),0==this.fileList.length&&(this.comboObj.imgUrl="")})),Object(s["a"])(i,"exceedUpload",(function(){this.$elementMessage("只能上传一张图片","error")})),Object(s["a"])(i,"onBeforeUpload",(function(e){this.file=e,this.index=e.uid})),Object(s["a"])(i,"Upload",(function(){var e=this,t=this.file,a=function(e){return new Promise((function(t,a){var i=new FileReader;i.readAsDataURL(e),i.onload=function(e){t(this.result)}}))};a(t).then((function(t){var a=t,i=a.match(/data:image\/(.*);base64,.*/);e.ext=i[1],e.base64=a.split("base64,").pop(),e.$apiCall("api.User.uploadImgBase64",{imgUrlBase64:e.base64,ext:e.ext},(function(t){9999==t.ErrorCode?(e.fileList.push({index:e.index,imgUrl:t.Data.Results.imgUrl}),e.comboObj.imgUrl=t.Data.Results.imgUrl):(e.$refs["upload"].clearFiles(),e.$elementMessage(t.Message,"error"))}))}))})),i)}),n=l,c=(a("1c12"),a("cba8")),d=Object(c["a"])(n,r,o,!1,null,"c4bf1f0c",null);t["default"]=d.exports},dcc9:function(e,t){var a=Math.floor,i=function(e,t){var s=e.length,l=a(s/2);return s<8?r(e,t):o(i(e.slice(0,l),t),i(e.slice(l),t),t)},r=function(e,t){var a,i,r=e.length,o=1;while(o<r){i=o,a=e[o];while(i&&t(e[i-1],a)>0)e[i]=e[--i];i!==o++&&(e[i]=a)}return e},o=function(e,t,a){var i=e.length,r=t.length,o=0,s=0,l=[];while(o<i||s<r)o<i&&s<r?l.push(a(e[o],t[s])<=0?e[o++]:t[s++]):l.push(o<i?e[o++]:t[s++]);return l};e.exports=i},e2e0:function(e,t,a){var i=a("dcce"),r=a("7af4"),o=a("44ea"),s=!o((function(e){Array.from(e)}));i({target:"Array",stat:!0,forced:s},{from:r})},e365:function(e,t,a){},e836:function(e,t,a){var i=a("dcce"),r=a("8208").values;i({target:"Object",stat:!0},{values:function(e){return r(e)}})},f24a:function(e,t,a){},f7c3:function(e,t,a){"use strict";a("476d")}}]);
//# sourceMappingURL=dashboard.f51d46b3.js.map