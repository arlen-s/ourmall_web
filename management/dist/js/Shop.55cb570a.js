(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Shop"],{"83ae":function(e,a,t){},cd1c:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"contentpanel shop-set-page"},[t("div",{ref:"pageHeader",staticClass:"pagetitle"},[e._m(0),t("div",{staticClass:"right"})]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pagebody"},[t("el-row",{staticClass:"mg-b-20",attrs:{gutter:10}},[t("el-col",{attrs:{span:24}},[t("el-card",[t("el-form",{ref:"shopForm",staticClass:"inner",attrs:{model:e.form,rules:e.rulesReg}},[t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"店铺名称",prop:"name"}},[t("el-input",{attrs:{maxlength:"35",minlength:"3","show-word-limit":"",placeholder:"请输入店铺名称"},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}}),t("div",{staticClass:"tip"},[e._v("名称长度需在3~35之间，由字母、数字、“-”构成，“-”不能在首尾位置")])],1),t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"店铺链接"}},[t("div",{staticClass:"changeLink",staticStyle:{float:"right"}},[t("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(a){return e.tip()}}},[e._v("更换")])],1),e.form.url?t("el-input",{attrs:{disabled:""},model:{value:e.form.url,callback:function(a){e.$set(e.form,"url",a)},expression:"form.url"}}):t("el-input",{scopedSlots:e._u([{key:"append",fn:function(){return[e._v(".ourmall.com")]},proxy:!0}],null,!1,1986311734),model:{value:e.form.subDomain,callback:function(a){e.$set(e.form,"subDomain",a)},expression:"form.subDomain"}})],1),t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"店铺邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入店铺邮箱"},model:{value:e.form.email,callback:function(a){e.$set(e.form,"email",a)},expression:"form.email"}}),t("div",{staticClass:"tip"},[e._v("如有需要，我们会通过此邮箱来联系您")])],1),t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"店主手机号",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入店主手机号"},model:{value:e.form.phone,callback:function(a){e.$set(e.form,"phone",a)},expression:"form.phone"}})],1),t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"店铺头像"}},[t("div",{staticClass:"upload",on:{click:e.uploadOpen}},[e.form.logo?t("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.form.logo,fit:"cover"}}):t("i",{staticClass:"el-icon-plus"})],1),t("div",{staticClass:"tip"},[e._v("支持 image/gif, image/jpeg, image/png 格式，最多1张，单个图片不超过 1 MB")])]),t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"财务邮箱",prop:"financialEmail"}},[t("el-input",{attrs:{placeholder:"请输入财务邮箱"},model:{value:e.form.financialEmail,callback:function(a){e.$set(e.form,"financialEmail",a)},expression:"form.financialEmail"}}),t("div",{staticClass:"tip"},[e._v("用于存在费用争议时联系的邮箱，请务必填")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(" 保存 ")])],1)],1)],1)],1)],1)],1),t("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"imgFile",accept:".jpg,.png,.gif"},on:{change:function(a){return e.Base64(a)}}})])},l=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"left"},[t("div",{staticClass:"title"},[t("i",{staticClass:"iconfont icon-dianpushezhi"}),t("h2",[e._v("店铺设置")])])])}],s=(t("b8bb"),t("83a0"),t("2f90"),t("31c9"),{data:function(){return{loading:!1,form:{name:"",subDomain:"",email:"",phone:"",logo:"",financialEmail:"",url:""},rulesReg:{name:[{required:!0,message:"请输入店铺名称",trigger:"blur"},{pattern:/^(?![-])(?![0-9-]+$)(?![a-zA-Z-]+$)[0-9A-Za-z-]{3,35}(?<![-])$/,message:"店铺名称格式错误",trigger:"blur"}],email:[{pattern:/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,message:"邮箱格式错误",trigger:"blur"}],financialEmail:[{pattern:/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,message:"邮箱格式错误",trigger:"blur"},{required:!0,message:"请输入财务邮箱",trigger:"blur"}],phone:[{pattern:/^1[34578]\d{9}$/,message:"手机号格式错误",trigger:"blur"}]}}},mounted:function(){this.getVonders()},methods:{save:function(){var e=this;this.$refs.shopForm.validate((function(a){if(a){e.loading=!0;var t=e.form;e.$apiCall("api.VendorShop.changeByVendor",t,(function(a){e.loading=!1,9999==a.ErrorCode?e.$message({message:"保存成功",type:"success"}):e.$message({message:a.Message,type:"error"})}))}}))},getVonders:function(){var e=this;this.loading=!0,this.$apiCall("api.VendorShop.getByVendor",{},(function(a){if(e.loading=!1,9999==a.ErrorCode){var t=a.Data.Results;e.form.name=t.name,e.form.subDomain=t.subDomain?t.subDomain:"shop".concat(t.id),e.form.email=t.email?t.email:e.$store.state.userInfo.email,e.form.url=t.url,e.form.phone=t.phone,e.form.logo=t.logo,e.form.financialEmail=t.financialEmail}else e.$message({message:a.Message,type:"error"})}))},uploadOpen:function(){document.getElementById("imgFile").click()},Base64:function(e){var a=this;if(e.target.value){var t=new FileReader,i=new Image,l="";t.onload=function(e){i.src=e.target.result;var a=e.target.result.match(/data:image\/(.*);base64,.*/);l=a[1]},i.onload=function(t){base64Image({file:e.target,callback:function(e){var t=e.split("base64,").pop();a.uploadImgBase64(t,l)}})},t.readAsDataURL(e.target.files[0])}},uploadImgBase64:function(e,a){var t=this;this.loading=!0,this.$apiCall("api.User.uploadImgBase64",{imgUrlBase64:e,ext:a},(function(e){t.loading=!1,9999==e.ErrorCode?t.form.logo=e.Data.Results.imgUrl:t.$message.error(e.Message)}))},tip:function(){this.$message.warning({showClose:!0,duration:5e3,message:"若供应商自有域名，或之后申请了新的域名，需要更换域名的，需联系客服"})}},components:{}}),r=s,o=(t("e8e3"),t("cba8")),n=Object(o["a"])(r,i,l,!1,null,"96ae178e",null);a["default"]=n.exports},e8e3:function(e,a,t){"use strict";t("83ae")}}]);
//# sourceMappingURL=Shop.55cb570a.js.map