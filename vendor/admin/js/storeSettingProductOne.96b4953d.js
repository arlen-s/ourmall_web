(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["storeSettingProductOne"],{"069c":function(t,e,s){t.exports=s.p+"img/noData.46b81b49.png"},"0ef6":function(t,e,s){},"1e77":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return t.setting?e("div",{staticClass:"setting-page"},[e("el-scrollbar",{staticClass:"left"},[t.setting?e("div",{staticClass:"content"},[e("h1",[e("el-link",{attrs:{icon:"el-icon-arrow-left",underline:!1},on:{click:t.goBack}},[t._v(t._s(t.$t("storeSetting.商品信息")))])],1),e("div",{staticClass:"change-box"},[e("div",{staticClass:"add-product"},[e("div",[t._v(t._s(t.$t("storeSetting.添加商品")))]),t.setting.imgUrl?e("div",{staticClass:"change-product"},[e("div",{staticClass:"category-name"},[t.setting.imgUrl?e("img",{staticClass:"default",attrs:{src:t.setting.imgUrl}}):e("div",{staticClass:"default"}),t.setting.name?e("div",{staticClass:"tx-ellipsis1"},[t._v(t._s(t.setting.name))]):t._e()]),e("div",{staticClass:"action-but"},[e("div",{on:{click:t.openSelect}},[t._v(t._s(t.$t("storeSetting.更换")))]),e("div",{on:{click:t.deleteCate}},[t._v(t._s(t.$t("storeSetting.删除")))])])]):e("div",{staticClass:"select-product",on:{click:t.openSelect}},[e("i",{staticClass:"el-icon-plus"}),e("div",[t._v(t._s(t.$t("storeSetting.选择商品")))])])]),e("div",{staticClass:"change-seach"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.显示售价")))]),e("el-switch",{model:{value:t.setting.displayPrice,callback:function(e){t.$set(t.setting,"displayPrice",e)},expression:"setting.displayPrice"}})],1),e("div",{staticStyle:{"margin-bottom":"30px"}},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.按钮文案")))]),e("el-input",{model:{value:t.setting.buttonText,callback:function(e){t.$set(t.setting,"buttonText",e)},expression:"setting.buttonText"}})],1),e("div",[e("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.图片展示规则")))]),e("el-select",{attrs:{placeholder:t.$t("storeSetting.请选择")},model:{value:t.setting.pictureRule,callback:function(e){t.$set(t.setting,"pictureRule",e)},expression:"setting.pictureRule"}},t._l(t.rules,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{staticClass:"colorChange"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.按钮背景颜色")))]),e("el-color-picker",{staticClass:"color-p",attrs:{size:"mini"},model:{value:t.setting.btnBackground,callback:function(e){t.$set(t.setting,"btnBackground",e)},expression:"setting.btnBackground"}})],1),e("div",{staticClass:"colorChange"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.按钮文字颜色")))]),e("el-color-picker",{staticClass:"color-p",attrs:{size:"mini"},model:{value:t.setting.btnColor,callback:function(e){t.$set(t.setting,"btnColor",e)},expression:"setting.btnColor"}})],1)])]):t._e()]),e("el-scrollbar",{ref:"rightBox",staticClass:"right"},[e("div",{staticClass:"content"},[e("demoHeader",{attrs:{data:t.$store.state.configJson.header,headerMenu:t.headerMenu}}),e("demoBody",{attrs:{data:t.setting,header:t.$store.state.configJson.header}}),e("demoFooter",{attrs:{setting:t.$store.state.configJson.footer}})],1)]),e("div",{staticClass:"action"},[e("el-button",{attrs:{type:"danger",size:"medium"},on:{click:t.del}},[t._v(t._s(t.$t("storeSetting.删除该组件")))]),e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v(t._s(t.$t("storeSetting.完成")))])],1),e("selectProduct",{attrs:{data:t.dialogProductList}})],1):t._e()},a=[],o=(s("14d9"),s("88a7")),r=s("826e"),n=s("8c3c"),l=s("db46"),c={data(){return{headerMenu:[],dialogProductList:{isShow:!1,item:null},rules:[{value:"left",label:this.$t("storeSetting.居左")},{value:"right",label:this.$t("storeSetting.居右")}],isSave:!1,exist:!1,setting:{cid:this.$route.query.cid,id:"",btnBackground:"#303133",btnColor:"#C0C4CC",type:"singleProduct",buttonText:"",pictureRule:"left",displayPrice:!0,name:"Product title",cost:"88.88",imgUrl:""}}},components:{selectProduct:o["a"],demoHeader:r["a"],demoBody:n["a"],demoFooter:l["a"]},beforeRouteLeave(t,e,s){if(this.isSave)s();else{let t=confirm(this.$t("logistics.当前页面还未保存，确定要离开吗?"));t?s():s(!1)}},created(){this.$apiCall("api.VendorShop.getShopConfig",{},t=>{9999==t.ErrorCode&&0!==t.Data.Results.length&&(t.Data.Results.header.activeMenu&&t.Data.Results.menu.forEach(e=>{e.id==t.Data.Results.header.activeMenu&&(this.headerMenu=e)}),this.$store.commit("getShopConfig",t.Data.Results),this.$store.state.configJson.sort.forEach(t=>{t.cid==this.$route.query.cid&&(this.setting=JSON.parse(JSON.stringify(t)),this.getItems("s"),this.exist=!0,this.$nextTick(()=>{this.$refs.rightBox.wrap.scrollTop=document.getElementById("row"+t.cid).offsetTop}))}),this.exist||(this.setting={cid:this.$route.query.cid,id:"",btnBackground:"#303133",btnColor:"#C0C4CC",type:"singleProduct",buttonText:"",pictureRule:"left",displayPrice:!0,name:"Product title",cost:"88.88",imgUrl:""},this.exist=!0,this.$store.commit("addStoreComponent",this.setting)))})},methods:{deleteCate(){this.setting.name="Product title",this.setting.cost="88.88",this.setting.imgUrl="",this.setting.id=""},goBack(){this.$router.push({name:"storeSettingMain"})},save(){this.isSave=!0,this.exist?this.$store.commit("setStoreComponent",this.setting):(this.$store.commit("addStoreComponent",this.setting),this.exist=!0),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},t=>{9999==t.ErrorCode?this.$elementMessage(this.$t("storeSetting.保存成功"),"success"):this.$message({message:t.Message,type:"error"})})},del(){this.isSave=!0,this.$store.commit("delComponent",this.setting.cid),this.setting=JSON.parse(JSON.stringify(this.$store.state.configJson)),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},t=>{9999==t.ErrorCode?(this.$elementMessage("删除成功","success"),this.$router.replace({name:"storeSettingMain"})):this.$message({message:t.Message,type:"error"})})},openSelect(){this.getItems(),this.dialogProductList.isShow=!0},getItems(t){this.loading=!0,this.$apiCall("api.VendorShop.vendorFindProducts",{productId:t?this.setting.id:"",page:1,rowsPerPage:10},e=>{if(this.loading=!1,9999==e.ErrorCode){let s=e.Data.Results.products;this.setting.product=s[0],t&&(this.setting.imgUrl=s[0].imgUrl,this.setting.cost=s[0].cost,this.setting.name=s[0].name),this.dialogProductList.item=s.map(t=>(t.imgUrlArr=JSON.parse(t.imgUrlJson),t.statusIpt="1"==t.status,t))}else this.$message({message:e.Message,type:"error"})})}}},d=c,g=(s("8f6b"),s("8c83"),s("2877")),u=Object(g["a"])(d,i,a,!1,null,"fba9ed98",null);e["default"]=u.exports},5478:function(t,e,s){},"746d":function(t,e,s){},8569:function(t,e,s){},"85bb":function(t,e,s){},"88a7":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-product"},[e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.data.loading,expression:"data.loading"}],attrs:{visible:t.data.isShow,title:t.$t("storeSetting.选择商品"),width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)},close:t.closeDialog}},[e("el-divider"),e("div",[e("el-form",{staticStyle:{"margin-bottom":"10px !important"},attrs:{inline:!0,size:"mini"}},[t.up?t._e():e("el-form-item",[e("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:t.$t("storeSetting.请选择")},on:{change:function(e){return t.filterGetItem("status")}},model:{value:t.filterData.status,callback:function(e){t.$set(t.filterData,"status",e)},expression:"filterData.status"}},[e("el-option",{attrs:{label:t.$t("storeSetting.全部"),value:""}}),e("el-option",{attrs:{label:t.$t("storeSetting.上架"),value:"1"}}),e("el-option",{attrs:{label:t.$t("storeSetting.下架"),value:"2"}})],1)],1),e("el-form-item",[e("el-input",{staticStyle:{width:"160px"},attrs:{clearable:"",size:"mini",placeholder:t.$t("goods.商品名称")},on:{clear:function(e){return t.clearFilter("name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem()}},model:{value:t.filterData.name,callback:function(e){t.$set(t.filterData,"name",e)},expression:"filterData.name"}})],1),e("el-form-item",{staticStyle:{"margin-bottom":"0"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.filterGetItem()}}},[t._v(t._s(t.$t("myinvoice.filter")))]),e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.clearFilter()}}},[t._v(t._s(t.$t("goods.重置")))])],1)],1)],1),e("el-divider"),e("div",{staticClass:"action"},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.goToGoods}},[t._v(t._s(t.$t("storeSetting.管理商品")))]),e("div",{staticClass:"refresh",on:{click:t.getItems}},[e("i",{staticClass:"el-icon-refresh-right"}),e("span",{staticClass:"mg-l-5"},[t._v(t._s(t.$t("storeSetting.刷新")))])])],1),e("el-divider"),t.data.item&&t.data.item.length?e("el-table",{ref:"productTable",attrs:{data:t.data.item,stripe:"",height:"300px"}},[e("el-table-column",{attrs:{label:"",width:"60"},scopedSlots:t._u([{key:"default",fn:function(s){return[s.row.statusIpt?e("el-radio",{staticClass:"none-label",attrs:{label:s.row.id},model:{value:t.productData,callback:function(e){t.productData=e},expression:"productData"}},[t._v(t._s(""))]):t._e()]}}],null,!1,768795816)}),e("el-table-column",{attrs:{label:t.$t("goods.商品图片"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"60px",height:"60px",border:"1px solid #ddd","background-color":"#fff"},attrs:{src:t.row.imgUrl,fit:"contain","scroll-container":".main-scroll .el-scrollbar__wrap","preview-src-list":t.row.imgUrlArr}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"})])])]}}],null,!1,2968517507)}),e("el-table-column",{attrs:{label:t.$t("goods.商品名称")},scopedSlots:t._u([{key:"default",fn:function(s){return[e("p",{staticClass:"tx-ellipsis3",staticStyle:{"line-height":"22px"}},[t._v(t._s(s.row.name))])]}}],null,!1,2941362605)}),e("el-table-column",{attrs:{label:t.$t("storeSetting.状态"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(s){return[s.row.statusIpt?e("el-tag",[t._v(t._s(t.$t("storeSetting.上架")))]):e("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.$t("storeSetting.下架")))])]}}],null,!1,73026675)})],1):e("div",{staticClass:"no-data"},[e("img",{attrs:{src:s("069c")}}),e("div",[t._v(t._s(t.$t("storeSetting.暂无数据"))+"，"),e("span",{on:{click:t.goToGoods}},[t._v(t._s(t.$t("storeSetting.去添加商品")))])])]),e("div",{ref:"tableFooter",staticStyle:{margin:"10px 0 20px"}},[t.data.item&&t.data.item.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{small:"","current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSize,"pager-count":Number(5),"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeDialog}},[t._v(t._s(t.$t("storeSetting.取消")))]),e("el-button",{attrs:{type:"primary",disabled:!t.productData},on:{click:t.AddGoods}},[t._v(t._s(t.$t("storeSetting.添加")))])],1)],1)],1)},a=[],o=(s("14d9"),{props:["data","up"],data(){return{host:location.host,productItem:{},productData:"",filterData:{name:"",status:""},defaultFilterData:"{}",pageSize:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem(this.$route.name+"RowsPerPage")?Number(localStorage.getItem(this.$route.name+"RowsPerPage")):10,total:0,totalPage:0,loading:!1}},mounted(){this.up&&(this.filterData.status=1),this.getItems(),this.defaultFilterData=JSON.stringify(this.filterData)},watch:{$route:"gotoPage","data.menuData":{deep:!0,handler(){this.data.menuData.urlData&&(this.productData=this.data.menuData.urlData.id)}}},methods:{getItems(){this.loading=!0,this.$apiCall("api.VendorShop.vendorFindProducts",{page:this.page,rowsPerPage:this.rowsPerPage,name:this.filterData.name,status:this.filterData.status},t=>{this.loading=!1,9999==t.ErrorCode?(this.data.item=t.Data.Results.products.map(t=>(t.imgUrlArr=JSON.parse(t.imgUrlJson),t.statusIpt="1"==t.status,t)),this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage),this.$refs.productTable&&(this.$refs.productTable.bodyWrapper.scrollTop=0)):this.$message({message:t.Message,type:"error"})})},filterGetItem(){this.page=1,this.productData="",this.getItems()},clearFilter(t){switch(t){case"name":this.filterData.name="";break;default:this.filterData=JSON.parse(this.defaultFilterData)}"none"!=t&&this.toPage(1)},AddGoods(){this.productItem?(this.data.item.forEach(t=>{t.id==this.productData&&(this.productItem=t)}),"menuEditor"==this.$route.name?this.$emit("selectedProduct",this.productItem):"quotationGoods"==this.$route.name?(this.$parent.form.id=this.productItem.id,this.$parent.form.imgUrl=this.productItem.imgUrl,this.$parent.form.cost=this.productItem.cost,this.$parent.form={...this.$parent.form}):(this.$parent.setting.name=this.productItem.name,this.$parent.setting.cost=this.productItem.cost,this.$parent.setting.imgUrl=this.productItem.imgUrl,this.$parent.setting.id=this.productItem.id,this.$parent.setting={...this.$parent.setting}),this.closeDialog()):this.$message({message:"请选择一件商品",type:"error"})},goToGoods(){this.$router.push("/goods-mgr/all")},gotoPage(){this.page=this.$route.query.page?this.$route.query.page:1,this.$nextTick(()=>{this.getItems()})},toPage(t){t!=this.$route.query.page?this.$router.push({query:{page:t,cid:this.$route.query.cid,id:this.$route.query.id}}):this.getItems()},changePageSize(t){this.rowsPerPage=t,localStorage.setItem(this.$route.name+"RowsPerPage",t),this.getItems()},closeDialog(){this.page=1,"quotationGoods"==this.$route.name?this.$router.push({query:{id:this.$route.query.id}}):this.$router.push({query:{cid:this.$route.query.cid}}),this.data.item={},this.productData="",this.productItem={},this.filterData=JSON.parse(this.defaultFilterData),this.data.isShow=!1}},components:{}}),r=o,n=(s("fd99"),s("2877")),l=Object(n["a"])(r,i,a,!1,null,"4207c570",null);e["a"]=l.exports},"8c83":function(t,e,s){"use strict";s("0ef6")},"8f6b":function(t,e,s){"use strict";s("746d")},bc9f:function(t,e,s){"use strict";s("5478")},d626:function(t,e,s){"use strict";s("85bb")},e594:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"setting-page"},[e("el-scrollbar",{staticClass:"left"},[t.setting?e("div",{staticClass:"content"},[e("h1",[e("el-link",{attrs:{icon:"el-icon-arrow-left",underline:!1},on:{click:t.goBack}},[t._v(t._s(t.$t("storeSetting.商品信息")))])],1),e("div",{staticClass:"change-box"},[e("div",{staticClass:"add-product"},[e("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[e("span",[t._v(t._s(t.$t("storeSetting.选择商品类目")))]),e("span",{staticClass:"manage",on:{click:t.goToCategory}},[t._v(t._s(t.$t("storeSetting.管理商品类目")))])]),t.setting&&!t.setting.isOpen?e("div",{staticClass:"select-product",on:{click:t.openSelect}},[e("i",{staticClass:"el-icon-plus"}),e("div",[t._v(t._s(t.$t("storeSetting.选择商品分类")))])]):e("div",{staticClass:"change-product"},[e("div",{staticClass:"category-name"},[t.setting&&t.setting.categoryItem&&t.setting.categoryItem.themeUrl?e("img",{staticClass:"default",attrs:{src:t.setting.categoryItem.themeUrl}}):e("div",{staticClass:"default"}),t.setting&&t.setting.categoryItem?e("div",{staticClass:"tx-ellipsis1"},[t._v(t._s(t.setting.categoryItem.name))]):t._e()]),e("div",{staticClass:"action-but"},[e("div",{on:{click:t.openSelect}},[t._v(t._s(t.$t("storeSetting.更换")))]),e("div",{on:{click:t.deleteCate}},[t._v(t._s(t.$t("storeSetting.删除")))])])])]),e("div",{staticStyle:{margin:"30px 0"}},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.标题")))]),e("el-input",{model:{value:t.setting.listTitle,callback:function(e){t.$set(t.setting,"listTitle",e)},expression:"setting.listTitle"}})],1),e("div",[e("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.展示排数")))]),e("el-slider",{attrs:{min:Number(1),max:Number(4)},model:{value:t.setting.rowNum,callback:function(e){t.$set(t.setting,"rowNum",e)},expression:"setting.rowNum"}})],1),e("div",[e("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.每排展示个数")))]),e("el-slider",{attrs:{min:Number(1),max:Number(4)},model:{value:t.setting.colNum,callback:function(e){t.$set(t.setting,"colNum",e)},expression:"setting.colNum"}})],1),e("div",[e("div",[t._v(t._s(t.$t("storeSetting.文本对齐")))]),e("div",{staticClass:"d-flex"},t._l(t.aligns,(function(s){return e("div",{key:s.id,staticClass:"align-text",class:{active:t.num==s.id},on:{click:function(e){return t.changeAlign(s)}}},[e("i",{class:s.icon})])})),0)]),e("div",{staticStyle:{margin:"30px 0"}},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.更多按钮文案")))]),e("el-input",{model:{value:t.setting.moreText,callback:function(e){t.$set(t.setting,"moreText",e)},expression:"setting.moreText"}})],1),e("div",{staticClass:"change-seach"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.显示商品价格")))]),e("el-switch",{model:{value:t.setting.displayPrice,callback:function(e){t.$set(t.setting,"displayPrice",e)},expression:"setting.displayPrice"}})],1)])]):t._e()]),e("el-scrollbar",{ref:"rightBox",staticClass:"right"},[e("div",{staticClass:"content"},[e("demoHeader",{attrs:{data:t.$store.state.configJson.header,headerMenu:t.headerMenu}}),e("demoBody",{attrs:{data:t.setting,header:t.$store.state.configJson.header}}),e("demoFooter",{attrs:{setting:t.$store.state.configJson.footer}})],1)]),e("div",{staticClass:"action"},[e("el-button",{attrs:{type:"danger",size:"medium"},on:{click:t.del}},[t._v(t._s(t.$t("storeSetting.删除该组件")))]),e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v(t._s(t.$t("storeSetting.完成")))])],1),e("el-dialog",{attrs:{title:t.$t("storeSetting.商品分类"),width:"300px",visible:t.addCategoryVisible},on:{"update:visible":function(e){t.addCategoryVisible=e}}},[e("div",{staticClass:"dialog-area"},[e("div",{staticClass:"search"},[e("el-input",{attrs:{size:"mini","suffix-icon":"el-icon-search"},on:{input:t.searchCategory},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),e("el-scrollbar",[t.displayItems.length>0?e("div",{staticClass:"item-area"},[t._l(t.displayItems,(function(s,i){return[e("div",{key:i},[e("div",{staticClass:"item-list"},[e("div",{staticClass:"left"},[e("el-image",{staticClass:"image",attrs:{fit:"contain",src:s.themeUrl}}),e("div",{staticClass:"name"},[t._v(t._s(s.name))])],1),e("div",[e("el-radio",{attrs:{label:s},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[e("div",{staticStyle:{display:"none"}},[t._v("1")])])],1)]),e("el-divider")],1)]})),e("div",{staticStyle:{height:"20px"}})],2):t._e()]),0==t.displayItems.length?e("div",{staticClass:"no-category"},[t._v(" "+t._s(t.$t("storeSetting.暂无类目"))+" "),e("router-link",{attrs:{to:"/category-mgr"}},[t._v(t._s(t.$t("storeSetting.前去添加")))])],1):t._e(),e("div",{staticClass:"control"},[e("router-link",{staticClass:"mg-r-20",attrs:{to:"/category-mgr"}},[t._v(t._s(t.$t("storeSetting.管理商品类目")))]),e("i",{staticClass:"refresh mg-r-20 el-icon-refresh",on:{click:t.getCategory}}),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addCategoryHandle}},[t._v(t._s(t.$t("storeSetting.添加")))])],1)],1)])],1)},a=[],o=(s("14d9"),s("826e")),r=s("8c3c"),n=s("db46"),l={data(){return{selectedItem:{},categoryItem:{},headerMenu:[],keyword:"",addCategoryVisible:!1,displayItems:[],dialogProductList:{isShow:!1,item:null},num:1,aligns:[{value:"left",label:"居左",id:1,icon:"iconfont icon-duiqifangshi_zuo"},{value:"center",label:"居中",id:3,icon:"iconfont icon-duiqifangshi_zhong"},{value:"right",label:"居右",id:2,icon:"iconfont icon-duiqifangshi_you"}],isSave:!1,exist:!1,setting:{cid:this.$route.query.cid,type:"hotProduct",productItems:[],isOpen:!1,listTitle:"",moreText:"",displayPrice:!0,rowNum:3,colNum:3,textAlign:"left",categoryItem:{}}}},components:{demoHeader:o["a"],demoBody:r["a"],demoFooter:n["a"]},beforeRouteLeave(t,e,s){if(this.isSave)s();else{let t=confirm(this.$t("logistics.当前页面还未保存，确定要离开吗?"));t?s():s(!1)}},created(){console.log(222222),this.$apiCall("api.VendorShop.getShopConfig",{},t=>{9999==t.ErrorCode&&0!==t.Data.Results.length&&(t.Data.Results.header.activeMenu&&t.Data.Results.menu.forEach(e=>{e.id==t.Data.Results.header.activeMenu&&(this.headerMenu=e)}),this.$store.commit("getShopConfig",t.Data.Results),this.$store.state.configJson.sort.forEach(t=>{t.cid==this.$route.query.cid&&(this.setting=JSON.parse(JSON.stringify(t)),this.aligns.forEach(t=>{t.value==this.setting.textAlign&&(this.num=t.id)}),this.selectedItem=this.setting.categoryItem,this.addCategoryHandle(),this.exist=!0,this.$nextTick(()=>{this.$refs.rightBox.wrap.scrollTop=document.getElementById("row"+t.cid).offsetTop}))}),this.exist||(this.setting={cid:this.$route.query.cid,type:"hotProduct",productItems:[],isOpen:!1,listTitle:"",moreText:"",displayPrice:!0,rowNum:3,colNum:3,textAlign:"left",categoryItem:{}},this.exist=!0,this.$store.commit("addStoreComponent",this.setting)))})},methods:{goBack(){this.$router.push({name:"storeSettingMain"})},deleteCate(){this.setting.categoryItem=this.selectedItem=this.categoryItem={},this.setting.productItems=[],this.setting.isOpen=!1},searchCategory(t){let e=[];this.items.forEach(s=>{s.name.indexOf(t)>-1&&e.push(s)}),this.displayItems=e,console.log(this.displayItems)},addCategoryHandle(){this.$apiCall("api.VendorShop.vendorFindProducts",{categoryId:this.selectedItem.id,status:1,page:1,rowsPerPage:16},t=>{if(9999==t.ErrorCode){let e=[];this.setting.productItems=t.Data.Results.products,this.setting.productItems.forEach(t=>{1==t.status&&e.push(t)}),this.setting.productItems=e,this.setting.categoryItem=this.selectedItem,this.addCategoryVisible=!1,this.keyword="",this.setting.isOpen=!0}else this.$message({message:t.Message,type:"error"})})},getCategory(){this.$apiCall("api.ProductCategory.findByUser",{level:1},t=>{9999==t.ErrorCode&&(this.items=t.Data.Results,this.displayItems=t.Data.Results)})},addCategory(){this.addCategoryVisible=!0},changeAlign(t){this.num=t.id,this.setting.textAlign=t.value},save(){this.isSave=!0,this.exist&&this.$store.commit("setStoreComponent",this.setting),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},t=>{9999==t.ErrorCode?this.$elementMessage("保存成功","success"):this.$message({message:t.Message,type:"error"})})},del(){this.isSave=!0,this.$store.commit("delComponent",this.setting.cid),this.setting=JSON.parse(JSON.stringify(this.$store.state.configJson)),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},t=>{9999==t.ErrorCode?(this.$elementMessage("删除成功","success"),this.$router.replace({name:"storeSettingMain"})):this.$message({message:t.Message,type:"error"})})},openSelect(){this.getCategory(),this.addCategoryVisible=!0},goToCategory(){this.$router.push("/category-mgr")}}},c=l,d=(s("bc9f"),s("d626"),s("2877")),g=Object(d["a"])(c,i,a,!1,null,"5132dd8a",null);e["default"]=g.exports},fd99:function(t,e,s){"use strict";s("8569")}}]);