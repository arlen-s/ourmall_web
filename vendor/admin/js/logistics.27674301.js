(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["logistics"],{"19c0":function(t,i,s){t.exports=s.p+"img/none-logistics.bbdcb2c3.webp"},"2a98":function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t._self._c;return i("div",{staticClass:"contentpanel logistics-page"},[i("div",{ref:"pageHeader",staticClass:"pagetitle"},[i("div",{staticClass:"left"},[i("div",{staticClass:"title"},[i("i",{staticClass:"el-icon-guide"}),i("h2",[t._v(t._s(t.$t("logistics.运费设置")))])])]),i("div",{staticClass:"right"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return t.setPostageAmount()}}},[t._v(t._s(t.$t("logistics.免邮规则设置")))]),i("el-button",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary",size:"small"},on:{click:function(i){return t.goto("settingsLogistics")}}},[t._v(t._s(t.$t("logistics.添加区域方案")))])],1)]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[i("el-card",[t.items.length?i("div",{staticClass:"table-wrap"},[i("el-table",{ref:"AreaShippingTable",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:""}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(s){return[i("el-table",{attrs:{data:s.row.shippings,border:""}},[i("el-table-column",{attrs:{label:t.$t("logistics.方案名称"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(s){return[i("span",{staticClass:"tx-ellipsis1"},[t._v(t._s(s.row.name))])]}}],null,!0)}),i("el-table-column",{attrs:{label:t.$t("logistics.运费"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("TableFreight",{attrs:{item:t.row}})]}}],null,!0)}),i("el-table-column",{attrs:{label:t.$t("logistics.时效天数")},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(i.row.agingDaysBegin)+" - "+t._s(i.row.agingDaysEnd)+" "+t._s(t.$t("logistics.天"))+" ")]}}],null,!0)}),i("el-table-column",{attrs:{label:t.$t("logistics.商品属性")},scopedSlots:t._u([{key:"default",fn:function(s){return t._l(s.row.productType,(function(s,e){return i("div",{key:e},[t._v(" "+t._s(t.$dict.productType[s]?t.$t(t.$dict.productType[s].text):"")+" ")])}))}}],null,!0)}),i("el-table-column",{attrs:{label:t.$t("logistics.计算规则"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("TableWeight",{attrs:{item:t.row}})]}}],null,!0)})],1)]}}],null,!1,2969296439)}),i("el-table-column",{attrs:{label:t.$t("logistics.方案名称")},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v(" "+t._s(i.row.name)+" ")]}}],null,!1,2507105690)}),i("el-table-column",{attrs:{label:t.$t("logistics.国家地区")},scopedSlots:t._u([{key:"default",fn:function(s){return[t._v(" "+t._s(t.$t("logistics.包含"))+" "+t._s(t.showCountryName(s.row.countrys[0]))),s.row.countrys.length>1?i("span",[t._v(" "+t._s(t.$t("logistics.等")))]):t._e(),t._v(" "),i("b",[t._v(t._s(s.row.countrys.length))]),t._v(" "+t._s(t.$t("logistics.个国家"))+" ")]}}],null,!1,1764586825)}),i("el-table-column",{attrs:{label:t.$t("logistics.操作"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(s){return[i("el-link",{staticClass:"mg-r-15",attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary"},on:{click:function(i){return t.editAreaShipping(s.row)}}},[t._v(t._s(t.$t("logistics.编辑方案")))]),i("el-link",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"danger"},on:{click:function(i){return t.delAreaShipping(s.row,s.$index)}}},[t._v(t._s(t.$t("logistics.删除")))])]}}],null,!1,3262264462)})],1)],1):i("div",{staticClass:"none-list"},[i("img",{staticStyle:{"margin-bottom":"40px",width:"360px",height:"232px"},attrs:{src:s("19c0")}}),i("p",{staticStyle:{"margin-bottom":"15px","font-weight":"bold","font-size":"16px"}},[t._v(t._s(t.$t("logistics.请设置你的物流方案")))]),i("p",{staticStyle:{"margin-bottom":"50px",color:"#909399"}},[t._v(t._s(t.$t("logistics.开始设置并完善你的运费方案，以便顾客轻松选择最合适的运费方案，获得更好的购物体验。")))]),i("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.goto("settingsLogistics")}}},[t._v(t._s(t.$t("logistics.添加区域方案")))])],1)])],1),i("el-dialog",{attrs:{title:t.$t("logistics.免邮规则"),visible:t.dialogVisibleAmount,width:"30%","before-close":t.closeDialogA},on:{"update:visible":function(i){t.dialogVisibleAmount=i},open:t.openAut}},[i("el-row",[i("el-col",{staticStyle:{padding:"0 20px"}},[i("p",[t._v(t._s(t.$t("logistics.当订单商品总价大于等于（包含）"))),i("el-input",{staticStyle:{width:"70px"},attrs:{placeholder:"0.00"},on:{input:function(i){return t.limitInput(i)}},model:{value:t.amounts,callback:function(i){t.amounts=i},expression:"amounts"}}),t._v(t._s(t.$t("logistics.免邮")))],1),i("p",{staticClass:"tips-trip"},[t._v(t._s(t.$t("logistics.温馨提示：订单总金额计算仅为购物车商品总售价")))])])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeDialogA}},[t._v(t._s(t.$t("logistics.取消")))]),i("el-button",{attrs:{type:"primary"},on:{click:t.saveAmount}},[t._v(t._s(t.$t("logistics.确定")))])],1)],1)],1)},l=[],o=(s("14d9"),s("c895")),a=s("b879"),n=s("3d50"),r={data(){return{loading:!1,amounts:"",dialogVisibleAmount:!1,items:[]}},components:{TableFreight:a["a"],TableWeight:n["a"]},mounted(){this.getAreaShipping()},methods:{showCountryName(t){let i="";return Object.keys(o).forEach(s=>{Object.keys(o[s]).forEach(e=>{e==t&&(i=`${o[s][e].nameCN} (${o[s][e].nameEN})`)})}),i},openAut(){this.getFee()},limitInput(t){this.amounts=(""+t).replace(/[^\d^\.]+/g,"").replace(/^0+(\d)/,"$1").replace(/^\./,"0.").match(/^\d*(\.?\d{0,2})/g)[0]||""},editAreaShipping(t){this.$router.push({name:"settingsLogistics",query:{id:t.id}})},closeDialogA(){this.dialogVisibleAmount=!1,this.amounts=""},getFee(){this.$apiCall("api.AreaShipping.getShippingConfig",{},t=>{"9999"==t.ErrorCode&&(this.amounts=null==t.Data.Results.orderPriceFreeShipping?0:t.Data.Results.orderPriceFreeShipping)})},saveAmount(){this.$apiCall("api.AreaShipping.changeShippingConfig",{orderPriceFreeShipping:this.amounts},t=>{"9999"==t.ErrorCode?(this.$message.success("success"),this.dialogVisibleAmount=!1,this.amounts=""):this.$message.success(t.msg)})},setPostageAmount(){this.dialogVisibleAmount=!0},delAreaShipping(t,i){this.$confirm(this.$t("logistics.是否确定删除该区域方案？"),{type:"warning",confirmButtonText:this.$t("logistics.删除"),cancelButtonText:this.$t("logistics.取消"),confirmButtonClass:"el-button--danger"}).then(()=>{this.loading=!0,this.$apiCall("api.AreaShipping.delete",{id:t.id},t=>{this.loading=!1,"9999"==t.ErrorCode?this.items.splice(i,1):this.$elementMessage(t.Message,"error")})}).catch(()=>{})},getAreaShipping(){this.loading=!0,this.$apiCall("api.AreaShipping.findByVendor",{},t=>{this.loading=!1,"9999"==t.ErrorCode?t.Data.Results&&t.Data.Results.length&&(this.items=t.Data.Results.map(t=>t)):this.$elementMessage(t.Message,"error")})},goto(t){this.$router.push({name:t})}}},c=r,u=(s("8174"),s("2877")),g=Object(u["a"])(c,e,l,!1,null,"90d6bdbc",null);i["default"]=g.exports},8174:function(t,i,s){"use strict";s("8b81")},"8b81":function(t,i,s){}}]);