(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ordersManagement"],{"0387":function(t,e,r){},"07ac":function(t,e,r){"use strict";var a=r("23e7"),o=r("6f53").values;a({target:"Object",stat:!0},{values:function(t){return o(t)}})},"0967":function(t,e,r){"use strict";r("1a2e")},"0c47":function(t,e,r){"use strict";var a=r("da84"),o=r("d44e");o(a.JSON,"JSON",!0)},"0d26":function(t,e,r){"use strict";var a=r("e330"),o=Error,i=a("".replace),s=function(t){return String(new o(t).stack)}("zxcasd"),n=/\n\s*at [^:]*:[^\n]*/,l=n.test(s);t.exports=function(t,e){if(l&&"string"==typeof t&&!o.prepareStackTrace)while(e--)t=i(t,n,"");return t}},1324:function(t,e,r){"use strict";r("69df")},"13d5":function(t,e,r){"use strict";var a=r("23e7"),o=r("d58f").left,i=r("a640"),s=r("2d00"),n=r("605d"),l=!n&&s>79&&s<83,c=l||!i("reduce");a({target:"Array",proto:!0,forced:c},{reduce:function(t){var e=arguments.length;return o(this,t,e,e>1?arguments[1]:void 0)}})},"1a2e":function(t,e,r){},"1d37":function(t,e,r){},"1e07":function(t,e,r){"use strict";r("5d2a")},"21a6":function(t,e,r){(function(r){var a,o,i;(function(r,s){o=[],a=s,i="function"===typeof a?a.apply(e,o):a,void 0===i||(t.exports=i)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function a(t,e,r){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){l(a.response,e,r)},a.onerror=function(){console.error("could not download file")},a.send()}function o(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(a){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r&&r.global===r?r:void 0,n=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!n?function(t,e,r){var n=s.URL||s.webkitURL,l=document.createElement("a");e=e||t.name||"download",l.download=e,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?i(l):o(l.href)?a(t,e,r):i(l,l.target="_blank")):(l.href=n.createObjectURL(t),setTimeout((function(){n.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,s){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,s),r);else if(o(t))a(t,r,s);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout((function(){i(n)}))}}:function(t,e,r,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return a(t,e,r);var i="application/octet-stream"===t.type,l=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&l||n)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},d.readAsDataURL(t)}else{var u=s.URL||s.webkitURL,p=u.createObjectURL(t);o?o.location=p:location.href=p,o=null,setTimeout((function(){u.revokeObjectURL(p)}),4e4)}});s.saveAs=l.saveAs=l,t.exports=l}))}).call(this,r("c8ba"))},"23dc":function(t,e,r){"use strict";var a=r("d44e");a(Math,"Math",!0)},"260b":function(t,e,r){},"27a0":function(t,e,r){},3410:function(t,e,r){"use strict";var a=r("23e7"),o=r("d039"),i=r("7b0b"),s=r("e163"),n=r("e177"),l=o((function(){s(1)}));a({target:"Object",stat:!0,forced:l,sham:!n},{getPrototypeOf:function(t){return s(i(t))}})},"49c5":function(t,e,r){},"4c55":function(t,e,r){"use strict";r("e3b9")},"4d2f":function(t,e,r){"use strict";r("bbe4")},5538:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{visible:t.authData.isShow,title:t.$t("orders.mabang"),width:"800px"},on:{"update:visible":function(e){return t.$set(t.authData,"isShow",e)}}},[r("el-divider"),r("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[r("div",[r("div",{staticClass:"mg-y-20"},[r("span",{staticStyle:{margin:"0 16px",display:"inline-block"}},[t._v(t._s(t.$t("invoice.tokenerp")))]),t.isStaff?[r("span",{staticClass:"mg-r-10"},[t._v(" "+t._s(t.authData.staffData&&t.authData.staffData.secretKey?t.authData.staffData.secretKey:"---")+" ")]),t.authData.staffData&&t.authData.staffData.secretKey?r("el-button",{attrs:{size:"mini",type:"text"}},[r("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.authData.staffData.secretKey,expression:"authData.staffData.secretKey",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()]:[r("span",{staticClass:"mg-r-10"},[t._v(t._s(t.$store.state.userInfo&&t.$store.state.userInfo.secretKey?t.$store.state.userInfo.secretKey:"---"))]),t.$store.state.userInfo&&t.$store.state.userInfo.secretKey?r("el-button",{attrs:{size:"mini",type:"text"}},[r("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.$store.state.userInfo.secretKey,expression:"$store.state.userInfo.secretKey",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],r("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"mini",type:"text"},on:{click:t.openSecretKey}},[t._v(" "+t._s(t.$t("invoice.usertoken"))+" ")])],2),r("el-alert",{attrs:{title:t.isStaff?t.$t("invoice.将员工令牌授权到马帮ERP之前"):t.$t("invoice.如果已经在erp授权了员工令牌"),type:"warning",closable:!1}})],1)]),r("el-divider"),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.authData.isShow=!1}}},[t._v("取消")])],1)],1)},o=[],i=(r("4de4"),r("d3b7"),r("99af"),r("a9e3"),{props:["authData","isStaff"],data:function(){return{shopName:"",invoiceInfo:{}}},methods:{openSecretKey:function(){this.$emit("openSecretKey")},querySearch:function(t,e){var r=this.authData.shopData,a=t?r.filter(this.createFilter(t)):r;e(a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.shopName=t.value},onCopy:function(t){this.$elementMessage(this.$t("successfullyToClipboard"),"success")},onError:function(t){this.$elementMessage(this.$t("failedToClipboard"),"error")},confirmMoneyFn:function(){var t=this;this.tempCode="".concat(this.invoiceInfo.id).concat(Date.parse(new Date)),this.$apiCall("api.Invoice.setSyncToErp",{invoiceId:this.invoiceInfo.id,shopName:this.shopName,tempCode:this.tempCode},(function(t){})),this.DialogLoadingCnt.loadingCnt=0,this.DialogLoadingCnt.isShow=!0,this.getInvocieTime=setInterval((function(){t.$apiCall("api.Invoice.checkPriceResult",{tempCode:t.tempCode,type:4},(function(e){if("9999"==e.ErrorCode){var r=e.Data.Results;Number(r.count)&&Number(r.total)&&(t.DialogLoadingCnt.loadingCnt=r.count/r.total),1!=r.status&&(t.tempCode="",clearInterval(t.getInvocieTime),t.DialogLoadingCnt.isShow=!1,3==r.status&&t.$elementMessage(r.message,"error"),2==r.status&&(t.$elementMessage(t.$t("invoice.storeSet"),"success"),t.confirmMoneyOpen=!1,t.getData()))}}))}),1e3)}}}),s=i,n=r("2877"),l=Object(n["a"])(s,a,o,!1,null,"63bb7ade",null);e["a"]=l.exports},"5d2a":function(t,e,r){},"605d":function(t,e,r){"use strict";var a=r("da84"),o=r("c6b6");t.exports="process"===o(a.process)},"69a3":function(t,e,r){t.exports=r.p+"img/secretKey2.9602a74a.jpg"},"69df":function(t,e,r){},"6f19":function(t,e,r){"use strict";var a=r("9112"),o=r("0d26"),i=r("b980"),s=Error.captureStackTrace;t.exports=function(t,e,r,n){i&&(s?s(t,e):a(t,"stack",o(r,n)))}},"6f3a":function(t,e,r){},"6f53":function(t,e,r){"use strict";var a=r("83ab"),o=r("d039"),i=r("e330"),s=r("e163"),n=r("df75"),l=r("fc6a"),c=r("d1e7").f,d=i(c),u=i([].push),p=a&&o((function(){var t=Object.create(null);return t[2]=2,!d(t,2)})),f=function(t){return function(e){var r,o=l(e),i=n(o),c=p&&null===s(o),f=i.length,h=0,m=[];while(f>h)r=i[h++],a&&!(c?r in o:d(o,r))||u(m,t?[r,o[r]]:o[r]);return m}};t.exports={entries:f(!0),values:f(!1)}},"7c32":function(t,e,r){},"84bf":function(t,e,r){"use strict";r("1d37")},"89ce":function(t,e,r){"use strict";r("27a0")},"8c6c":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{visible:t.relateData.isShow,title:t.$t("orders.associated"),width:"800px"},on:{"update:visible":function(e){return t.$set(t.relateData,"isShow",e)},open:t.open}},[r("el-divider"),r("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[r("div",{staticClass:"d-flex",staticStyle:{"margin-bottom":"20px"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:t.$t("orders.spuHolder"),clearable:""},on:{clear:function(e){return t.clearFilter("spu")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.spu,callback:function(e){t.spu=e},expression:"spu"}}),r("el-input",{staticStyle:{width:"200px",margin:"0 20px"},attrs:{placeholder:t.$t("orders.skuHolder"),clearable:""},on:{clear:function(e){return t.clearFilter("sku")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.sku,callback:function(e){t.sku=e},expression:"sku"}}),r("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:t.$t("orders.nameHolder"),clearable:""},on:{clear:function(e){return t.clearFilter("name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),r("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("orders.filter")))])],1),r("el-table",{staticClass:"no-hover",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.list}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"","show-header":!1,data:e.row.stocks}},[r("el-table-column",{attrs:{label:t.$t("orders.select"),width:"55"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-radio",{attrs:{label:e.row.sku+"||"+e.row.id},model:{value:t.tableRadio,callback:function(e){t.tableRadio=e},expression:"tableRadio"}},[r("i")])]}}],null,!0)}),r("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticClass:"d-flex"},[r("img",{attrs:{src:e.row.propertyImage,width:"60",height:"60"}}),r("div",{staticClass:"mg-l-20"},[r("p",[t._v(t._s(e.row.name))]),r("p",[t._v("SKU: "+t._s(e.row.sku))])])])]}}],null,!0)})],1)]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticClass:"d-flex"},[r("img",{attrs:{src:e.row.imgUrl,width:"60",height:"60"}}),r("div",{staticClass:"mg-l-20"},[r("p",[t._v(t._s(e.row.name))]),r("p",[t._v("SPU: "+t._s(e.row.sku))])])])]}}])})],1)],1),r("div",{staticClass:"d-flex",staticStyle:{"justify-content":"center",margin:"20px"}},[r("el-pagination",{attrs:{"current-page":t.page,background:!0,layout:"total, prev, pager, next",total:Number(t.total)},on:{"current-change":t.toPage}})],1),r("el-divider"),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.relateData.isShow=!1}}},[t._v(t._s(t.$t("orders.cancel")))]),r("el-button",{attrs:{type:"primary"},on:{click:t.relateFn}},[t._v(t._s(t.$t("orders.confirm")))])],1)],1)},o=[],i=(r("b0c0"),r("a9e3"),r("d3b7"),r("159b"),r("ac1f"),r("1276"),{props:["relateData"],data:function(){return{tableRadio:"",page:1,rowsPerPage:10,total:0,totalPage:0,items:[],list:[],sku:"",spu:"",name:"",dealRelation:1}},methods:{filterItem:function(){this.toPage(1)},clearFilter:function(t){"sku"==t?this.sku="":"spu"==t&&(this.spu=""),this.name="",this.toPage(1)},open:function(){this.sku="",this.spu="",this.name="",this.page=1,this.tableRadio="",this.total=Number(this.relateData.Pagination.totalCount),this.totalPage=Number(this.relateData.Pagination.totalPage),this.items=this.relateData.items,this.list=this.relateData.list,$(".el-dialog__body").scrollTop(0)},toPage:function(t){var e=this;this.page=t,this.$showLoading(),this.$apiCall("api.VendorShop.vendorFindProducts",{page:this.page,rowsPerPage:10,status:1,sku:this.sku,spu:this.spu,name:this.name},(function(t){"9999"==t.ErrorCode?(e.tableRadio="",e.total=Number(t.Data.Pagination.totalCount),e.totalPage=Number(t.Data.Pagination.totalPage),e.items=[],e.list=[],t.Data.Results.products.forEach((function(t){t.stocks&&t.stocks.length&&t.stocks.forEach((function(r){e.$set(r,"name",t.name),e.items.push(r)})),e.list.push(t)})),$(".el-dialog__body").scrollTop(0)):e.$elementMessage(t.Message,"error"),e.$hideLoading()}))},relateFn:function(){if(this.tableRadio){var t=this.tableRadio.split("||");this.$emit("relateFn",t[0])}else this.$elementMessage("Please check a SKU first","error")},clickChange:function(t,e){}}}),s=i,n=(r("e667"),r("84bf"),r("2877")),l=Object(n["a"])(s,a,o,!1,null,"6ba4a668",null);e["a"]=l.exports},"8e3e":function(t,e,r){"use strict";r("0387")},"944a":function(t,e,r){"use strict";var a=r("d066"),o=r("e065"),i=r("d44e");o("toStringTag"),i(a("Symbol"),"Symbol")},a4ce:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contentpanel my-custom-page"},[r("div",{ref:"pageHeader",staticClass:"pagetitle"},[r("div",{staticClass:"left"},[r("div",{staticClass:"title"},[r("i",{staticClass:"el-icon-s-order"}),r("h2",[t._v(t._s(t.$t("orders.title")))])])]),r("div",{staticClass:"right"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.batchUnbundling()}}},[t._v(t._s(t.$t("orders.批量解绑商品")))]),2==t.status&&3==t.activeName?[r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitDeliverEdit")},on:{click:t.openImport}},[t._v(t._s(t.$t("orders.shippinginformation")))]),r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitDeliverEdit")},on:{click:t.openAuth}},[t._v(t._s(t.$t("orders.authorize")))])]:t._e(),2==t.status&&3==t.activeName||3==t.status&&1==t.activeName?[r("el-dropdown",{staticStyle:{margin:"0 10px"}},[r("el-button",{attrs:{type:"primary"}},[t._v(" "+t._s(t.$t("orders.发票"))),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[r("span",{on:{click:function(e){return t.downPdf()}}},[t._v(t._s(t.$t("orders.下载")))])]),r("el-dropdown-item",[r("span",{on:{click:function(e){return t.sendEmail()}}},[t._v(t._s(t.$t("orders.发送邮箱")))])])],1)],1)]:t._e(),2==t.status&&1==t.activeName?[r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitOfferEdit")},on:{click:t.openCreate}},[t._v(t._s(t.$t("orders.创建订单")))])]:t._e(),2!=t.status||2!=t.activeName?[r("el-button",{attrs:{type:"primary"},on:{click:t.exportOrder}},[t._v(t._s(t.$t("orders.导出订单")))])]:t._e(),311==t.status?[r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitPayEdit")},on:{click:t.splitOrder}},[t._v(t._s(t.$t("orders.拆分订单")))])]:t._e(),15==t.status?[r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitPayEdit")},on:{click:t.batchWareHouse}},[t._v(t._s(t.$t("orders.批量关联仓库")))])]:t._e()],2)]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[2==t.status&&3==t.activeName&&148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?r("el-row",{staticClass:"mg-b-20",attrs:{gutter:15,type:"flex"}},[r("el-col",{attrs:{span:2}},[r("el-button",{on:{click:function(e){return t.handleTypeOrder(1)}}},[t._v(t._s(t.$t("orders.批发单"))+"("+t._s(t.batchNum)+")")])],1),r("el-col",{attrs:{span:2}},[r("el-button",{on:{click:function(e){return t.handleTypeOrder(2)}}},[t._v(t._s(t.$t("orders.自提单"))+"("+t._s(t.offlineNum)+")")])],1)],1):t._e(),r("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[r("el-col",{attrs:{span:24}},[r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("div",{ref:"pageFilter",staticClass:"page-filter"},[r("el-form",{attrs:{inline:!0,size:"mini"}},[2==t.status&&2==t.activeName?[r("el-form-item",[r("el-input",{attrs:{placeholder:t.$t("orders.paymentCode"),clearable:""},on:{clear:function(e){return t.clearFilter("sysCode")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.sysCode,callback:function(e){t.$set(t.filterParams,"sysCode",e)},expression:"filterParams.sysCode"}})],1),r("el-form-item",{attrs:{label:t.$t("orders.paymentDate")}},[r("el-date-picker",{key:"date2",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(e){return t.clearFilter("date2")},change:t.dateChange2},model:{value:t.filterParams.date2,callback:function(e){t.$set(t.filterParams,"date2",e)},expression:"filterParams.date2"}})],1)]:[r("el-form-item",[r("el-input",{attrs:{placeholder:t.$t("orders.third"),clearable:""},on:{clear:function(e){return t.clearFilter("codeName")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.codeName,callback:function(e){t.$set(t.filterParams,"codeName",e)},expression:"filterParams.codeName"}})],1),r("el-form-item",[r("el-input",{attrs:{placeholder:t.$t("orders.orderID"),clearable:""},on:{clear:function(e){return t.clearFilter("orderId")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.orderId,callback:function(e){t.$set(t.filterParams,"orderId",e)},expression:"filterParams.orderId"}})],1),r("el-form-item",[r("el-input",{attrs:{placeholder:t.$t("orders.receiver"),clearable:""},on:{clear:function(e){return t.clearFilter("receiverName")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.receiverName,callback:function(e){t.$set(t.filterParams,"receiverName",e)},expression:"filterParams.receiverName"}})],1),r("el-form-item",{attrs:{label:t.$t("orders.vendorName")+":"}},[r("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("relationshipId")}},model:{value:t.filterParams.relationshipId,callback:function(e){t.$set(t.filterParams,"relationshipId",e)},expression:"filterParams.relationshipId"}},t._l(t.vendorList,(function(t){return r("el-option",{key:t.id,attrs:{label:t.customerName,value:t.id}})})),1)],1),r("el-form-item",{attrs:{label:t.$t("orders.storeName")+":"}},[r("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("accountIds")}},model:{value:t.filterParams.accountIds,callback:function(e){t.$set(t.filterParams,"accountIds",e)},expression:"filterParams.accountIds"}},t._l(t.storeList,(function(t){return r("el-option",{key:t.id,attrs:{label:t.shopName,value:t.id}})})),1)],1),6==t.status?[r("el-form-item",[r("el-input",{attrs:{placeholder:t.$t("orders.paymentCode"),clearable:""},on:{clear:function(e){return t.clearFilter("sysCode")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.sysCode,callback:function(e){t.$set(t.filterParams,"sysCode",e)},expression:"filterParams.sysCode"}})],1),6!=t.status?r("el-form-item",{attrs:{label:t.$t("orders.paymentDate")}},[r("el-date-picker",{key:"date2",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(e){return t.clearFilter("date2")},change:t.dateChange2},model:{value:t.filterParams.date2,callback:function(e){t.$set(t.filterParams,"date2",e)},expression:"filterParams.date2"}})],1):t._e()]:t._e(),r("el-form-item",{attrs:{label:t.$t("orders.CreateDate")}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(e){return t.clearFilter("date")},change:t.dateChange},model:{value:t.filterParams.date,callback:function(e){t.$set(t.filterParams,"date",e)},expression:"filterParams.date"}})],1)],r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("orders.filter")))]),r("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v(t._s(t.$t("orders.clear")))]),3!=t.billStatus?r("el-button",{attrs:{type:"primary"},on:{click:t.handleAllFilter}},[t._v(t._s(t.$t("orders.allFilter"))+" ")]):t._e()],1),r("el-form-item",{staticStyle:{width:"200px"}}),r("el-form-item",{staticClass:"btns-wrap"},[2==t.status&&1==t.activeName?[r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitOfferEdit")},on:{click:t.quoteFn}},[t._v(t._s(t.$t("orders.Made")))]),r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitOfferEdit")},on:{click:t.exportFn}},[t._v(t._s(t.$t("orders.导出未关联商品")))]),r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitOfferEdit")},on:{click:t.importFn}},[t._v(t._s(t.$t("orders.导入关联")))])]:t._e(),2==t.status&&2==t.activeName?[r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoicePayCheckEdit")},on:{click:t.payFn}},[t._v(t._s(t.$t("orders.receipt")))]),r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoicePayCheckEdit")},on:{click:t.payCancelFn}},[t._v(t._s(t.$t("orders.notreceived")))])]:t._e(),4==t.status&&1==t.activeName?[r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceAbnormalEdit")},on:{click:t.syncFn}},[t._v(t._s(t.$t("orders.synchronized")))])]:t._e(),4==t.status&&2==t.activeName?[r("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceAbnormalEdit")},on:{click:t.quoteFn}},[t._v(t._s(t.$t("orders.重新报价")))])]:t._e()],2)],2)],1),t._l(t.tabList,(function(e,a){return 2!=t.status&&t.tabList.length?r("el-tab-pane",{key:a,attrs:{name:e.name+""}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(e.title)+" "),r("span",{staticClass:"tx-danger"},[t._v("("+t._s(t.vendorAllOrderCntText(e.id))+")")])])]):t._e()}))],2)],1)],1),t.isVipOrder?[r("div",{staticClass:"noVip"},[r("i",{staticClass:"el-icon-info mg-r-10"}),t._v(" "+t._s(t.$t("package.暂无数据，该条信息可能已超{num}天",{num:t.vipOrderReserveDay}))+" ")])]:[2==t.status&&2!=t.activeName||4==t.status&&1==t.activeName?[r("el-table",{key:"gridTable",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark",height:"500","row-key":function(t){return t.id}},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),r("el-table-column",{attrs:{type:"expand",width:"25"},scopedSlots:t._u([{key:"header",fn:function(){return[t.isExpansion?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.toggleRowExpansion}},[r("i",{staticClass:"el-icon-minus"})]):t._e(),t.isExpansion?t._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.toggleRowExpansion}},[r("i",{staticClass:"el-icon-plus"})])]},proxy:!0},{key:"default",fn:function(e){return[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-left":"0"},attrs:{data:e.row.items,"max-height":"360","row-style":t.rowStyle,"header-cell-style":t.rowStyle,"cell-style":t.rowStyle,"cell-class-name":t.cellClassName}},[r("el-table-column",{attrs:{label:t.$t("orders.orderID"),width:"140",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.orderId))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"",label:t.$t("orders.产品图片"),width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.row.imgUrl,fit:"cover"}})]}}],null,!0)}),r("el-table-column",{attrs:{prop:"vendorProductName",label:t.$t("orders.SKU编号/数量/名称"),width:"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.isManage||e.row.vendorPrice?t._e():r("el-link",{attrs:{type:"primary",disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{click:function(r){return t.unable(e.row)}}},[t._v(t._s(t.$t("orders.tabBar5")))]),r("p",{},[2==e.row.isManage?[r("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[t._v(" "+t._s(e.row.vendorSku+"Unable to purchase")+" "),r("span",[r("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[t._v("×")]),r("el-badge",{staticClass:"mark",attrs:{value:e.row.quantity}})],1)])]:[1!=e.row.status?[r("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[t._v(" "+t._s(e.row.vendorSku?e.row.vendorSku+" Products Off shelf":"null Please make an offer")+" "),r("span",[r("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[t._v("×")]),r("el-badge",{staticClass:"mark",attrs:{value:e.row.quantity}})],1)])]:[r("span",{staticStyle:{display:"inline-block"}},[t._v(" "+t._s(e.row.vendorSku||"null Please make an offer")+" "),r("span",[r("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[t._v("×")]),r("el-badge",{staticClass:"mark",attrs:{value:e.row.quantity}})],1)])]]],2),r("span",[t._v(t._s(e.row.name))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"",label:t.$t("orders.属性值"),width:"180",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.propertyValue||"--"))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"vendorSku",label:t.$t("orders.供应商价格"),width:"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(a){return[r("span",{staticStyle:{display:"inline-block"}},[a.row.vendorSku?r("span",[1!=e.row.discountType&&2!=e.row.discountType||2==a.row.isManage?[t._v(t._s(t.$store.state.country.symbol)+" "+t._s(Number(a.row.vendorPrice).toFixed(2)))]:[r("span",[t._v(t._s(t.$store.state.country.symbol)+" "+t._s(Number((a.row.amount-a.row.amount/e.row.productAmount*e.row.couponAmount)/a.row.quantity).toFixed(2))+" ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(t.$store.state.country.symbol)+" "+t._s(Number(a.row.vendorPrice).toFixed(2)))])])]],2):r("span",{staticStyle:{color:"#F56C6C"}},[t._v("Please make an offer")])])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"phone",label:t.$t("orders.客户售价"),width:"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(a){return[r("span",[t._v(t._s(e.row.currency)+" "+t._s(Number(a.row.price).toFixed(2)))])]}}],null,!0)}),r("el-table-column",{attrs:{label:""}})],1)]}}],null,!1,833631488)}),r("el-table-column",{attrs:{label:t.$t("orders.storeName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.store||"---"))])]}}],null,!1,389551764)}),r("el-table-column",{attrs:{label:t.$t("orders.third"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.codeName))])]}}],null,!1,2865335244)}),r("el-table-column",{attrs:{label:t.$t("orders.orderID"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.orderId||"---"))])]}}],null,!1,2950158824)}),r("el-table-column",{attrs:{label:t.$t("orders.vendorName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(t._s(e.row.customer?e.row.customer.name:"---"))])]}}],null,!1,2822081424)}),r("el-table-column",{attrs:{label:t.$t("orders.CreateDate"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.$moment(e.row.timeCreated).format("ll [at] LTS")||"---"))])]}}],null,!1,4292911871)}),r("el-table-column",{attrs:{label:t.$t("orders.address"),"min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[r("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.zip?e.row.shippingJsonInfo.zip:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.address1?e.row.shippingJsonInfo.address1:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.city?e.row.shippingJsonInfo.city:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.province?e.row.shippingJsonInfo.province:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.country?e.row.shippingJsonInfo.country:"---")+" ")]),r("span",[t._v(t._s(e.row.receiverAddress||"---"))])])]}}],null,!1,442848476)}),r("el-table-column",{attrs:{label:t.$t("orders.receiver"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.receiverName||"---"))])]}}],null,!1,1004791253)}),4==t.status?[r("el-table-column",{attrs:{label:t.$t("orders.logistics"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.shippingMethodArr&&e.row.shippingMethodArr.length?[r("el-select",{attrs:{size:"small"},on:{change:function(r){return t.filterShippingMethod(r,e.row)}},model:{value:e.row.shippingMethodId,callback:function(r){t.$set(e.row,"shippingMethodId",r)},expression:"scope.row.shippingMethodId"}},t._l(e.row.shippingMethodArr,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name+" ["+(e.agingDaysBegin?e.agingDaysBegin:0)+"-"+(e.agingDaysEnd?e.agingDaysEnd:0)+t.$t("logistics.天")+"]",value:e.id}})})),1)]:r("span",[t._v("---")])]}}],null,!1,3920950275)}),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?r("el-table-column",{attrs:{label:t.$t("orders.仓库")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.warehouseName||"--"))])]}}],null,!1,605806532)}):t._e(),r("el-table-column",{attrs:{label:t.$t("orders.logisticsFee")+"("+t.$store.state.country.symbol+")",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.discountType?r("span",[r("span",[t._v("0 ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(e.row.shippingMethodItem?e.row.shippingMethodItem.fee:"---"))])])]):r("span",[t._v(t._s(e.row.shippingMethodItem?e.row.shippingMethodItem.fee:"---"))])]}}],null,!1,54970795)}),r("el-table-column",{attrs:{label:t.$t("orders.tradeAmount")+"("+t.$store.state.country.symbol+")",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.discountType?r("span",[r("span",[t._v(t._s(e.row.payAmount||"---")+" ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(e.row.realAmount||"---"))])])]):r("span",[t._v(t._s(e.row.realAmount||"---"))])]}}],null,!1,757038887)})]:t._e(),2==t.status&&1==t.activeName?[r("el-table-column",{attrs:{label:t.$t("orders.offerItem"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.unBindQuantity||"---"))])]}}],null,!1,580575434)})]:t._e(),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?r("el-table-column",{attrs:{label:t.$t("orders.仓库")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.warehouseName||"--"))])]}}],null,!1,605806532)}):t._e(),2==t.status&&3==t.activeName?[r("el-table-column",{attrs:{label:t.$t("orders.logistics"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(" "+t._s(e.row.trackCompany?e.row.trackCompany+(e.row.trackNumber?":"+e.row.trackNumber+" ["+(e.row.agingDaysBegin?e.row.agingDaysBegin:0)+"-"+(e.row.agingDaysEnd?e.row.agingDaysEnd:0)+t.$t("logistics.天")+"]":"["+(e.row.agingDaysBegin?e.row.agingDaysBegin:0)+"-"+(e.row.agingDaysEnd?e.row.agingDaysEnd:0)+t.$t("logistics.天")+"]"):"---")+" ")])]}}],null,!1,872972531)}),r("el-table-column",{attrs:{label:t.$t("orders.logisticsFee")+"("+t.$store.state.country.symbol+")",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.discountType?r("span",[r("span",[t._v("0 ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(e.row.trackFee||"---"))])])]):r("span",[t._v(t._s(e.row.trackFee||"---"))])]}}],null,!1,614115627)}),r("el-table-column",{attrs:{label:t.$t("orders.tradeAmount")+"("+t.$store.state.country.symbol+")",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.discountType?r("span",[r("span",[t._v(t._s(e.row.payAmount||"---")+" ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(e.row.realAmount||"---"))])])]):r("span",[t._v(t._s(e.row.realAmount||"---"))])]}}],null,!1,757038887)})]:t._e(),r("el-table-column",{attrs:{label:t.$t("orders.operate"),width:"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[2==t.status&&1==t.activeName?r("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitOfferEdit")},on:{click:function(r){return t.quoteFn("row",e.row)}}},[t._v(t._s(t.$t("orders.Made")))]):t._e(),2==t.status&&3==t.activeName?r("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitDeliverEdit")},on:{click:function(r){return t.markShippedOpen(e.row)}}},[t._v(t._s(t.$t("orders.mark")))]):t._e(),2==t.status&&3==t.activeName||3==t.status&&1==t.activeName?r("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(r){return t.downPdf(e.row,"1")}}},[t._v(t._s(t.$t("orders.下载发票")))]):t._e(),2==t.status&&3==t.activeName||3==t.status&&1==t.activeName?r("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(r){return t.sendEmail(e.row,"1")}}},[t._v(t._s(t.$t("orders.发送发票到邮箱")))]):t._e(),4==t.status?r("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoiceAbnormalEdit")},on:{click:function(r){return t.syncFn("row",e.row)}}},[t._v(t._s(t.$t("orders.synchronized")))]):t._e()],1)]}}],null,!1,1762511427)}),2!=t.status||2!=t.activeName&&1!=t.activeName?[r("el-table-column",{attrs:{label:t.$t("quotation.备注"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(t._s(e.row.remark||"---"))])]}}],null,!1,627357406)})]:t._e()],2)]:2==t.status&&2==t.activeName?[r("el-table",{key:"gridTable",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark",height:"500","row-key":function(t){return t.id}},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),r("el-table-column",{attrs:{type:"expand",width:"25"},scopedSlots:t._u([{key:"header",fn:function(){return[t.isExpansion?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.toggleRowExpansion}},[r("i",{staticClass:"el-icon-minus"})]):t._e(),t.isExpansion?t._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.toggleRowExpansion}},[r("i",{staticClass:"el-icon-plus"})])]},proxy:!0},{key:"default",fn:function(e){return[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-left":"0"},attrs:{data:e.row.items,"max-height":"360","row-style":t.rowStyle,"header-cell-style":t.rowStyle,"cell-style":t.rowStyle,"cell-class-name":t.cellClassName}},[r("el-table-column",{attrs:{label:t.$t("orders.orderID"),width:"140",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.orderId))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"",label:t.$t("orders.产品图片"),width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.row.imgUrl,fit:"cover"}})]}}],null,!0)}),r("el-table-column",{attrs:{prop:"vendorProductName",label:t.$t("orders.SKU编号/数量/名称"),width:"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.isManage||e.row.vendorPrice?t._e():r("el-link",{attrs:{type:"primary",disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{click:function(r){return t.unable(e.row)}}},[t._v(t._s(t.$t("orders.tabBar5")))]),r("p",{},[2==e.row.isManage?[r("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[t._v(" "+t._s(e.row.vendorSku+"Unable to purchase")+" "),r("span",[r("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[t._v("×")]),r("el-badge",{staticClass:"mark",attrs:{value:e.row.quantity}})],1)])]:[1!=e.row.status?[r("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[t._v(" "+t._s(e.row.vendorSku?e.row.vendorSku+" Products Off shelf":"null Please make an offer")+" "),r("span",[r("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[t._v("×")]),r("el-badge",{staticClass:"mark",attrs:{value:e.row.quantity}})],1)])]:[r("span",{staticStyle:{display:"inline-block"}},[t._v(" "+t._s(e.row.vendorSku||"null Please make an offer")+" "),r("span",[r("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[t._v("×")]),r("el-badge",{staticClass:"mark",attrs:{value:e.row.quantity}})],1)])]]],2),r("span",[t._v(t._s(e.row.name))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"",label:t.$t("orders.属性值"),width:"180",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.propertyValue||"--"))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"vendorSku",label:t.$t("orders.供应商价格"),width:"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(a){return[r("span",{staticStyle:{display:"inline-block"}},[a.row.vendorSku?r("span",[1!=e.row.discountType&&2!=e.row.discountType||2==a.row.isManage?[t._v(t._s(t.$store.state.country.symbol)+" "+t._s(Number(a.row.vendorPrice).toFixed(2)))]:[r("span",[t._v(t._s(t.$store.state.country.symbol)+" "+t._s(Number((a.row.amount-a.row.amount/e.row.productAmount*e.row.couponAmount)/a.row.quantity).toFixed(2))+" ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(t.$store.state.country.symbol)+" "+t._s(Number(a.row.vendorPrice).toFixed(2)))])])]],2):r("span",{staticStyle:{color:"#F56C6C"}},[t._v("Please make an offer")])])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"phone",label:t.$t("orders.客户售价"),width:"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(a){return[r("span",[t._v(t._s(e.row.currency)+" "+t._s(Number(a.row.price).toFixed(2)))])]}}],null,!0)}),r("el-table-column",{attrs:{label:""}})],1)]}}])}),r("el-table-column",{attrs:{label:"pay code",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.accountPayment&&e.row.accountPayment.sysCode?e.row.accountPayment.sysCode:"---"))])]}}])}),r("el-table-column",{attrs:{label:"pay time",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.$moment.unix(e.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")||"---"))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.tradeAmount")+"("+t.$store.state.country.symbol+")",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.discountType?r("span",[r("span",[t._v(t._s(e.row.payAmount||"---")+" ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(e.row.totalAmount||"---"))])])]):r("span",[t._v(t._s(e.row.realAmount||"---"))])]}}])}),r("el-table-column",{attrs:{label:"Quantity",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.shopifyOrderCnt?r("el-link",{attrs:{type:"primary"},on:{click:function(r){return t.shopifyOrderCnt(e.row)}}},[t._v(t._s(e.row.shopifyOrderCnt))]):r("span",[t._v("---")])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.voucherUrl")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.voucherUrl?r("div",{staticClass:"demo-image__preview"},[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.voucherUrl,"preview-src-list":e.row.voucherUrlPreview}})],1):r("span",[t._v("---")])]}}])}),2==t.activeName?r("el-table-column",{attrs:{label:t.$t("orders.operate"),width:"120",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[1==e.row.paymentType?r("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoicePayCheckEdit")},on:{click:function(r){return t.payFn("row",e.row)}}},[t._v(t._s(t.$t("orders.receipt")))]):t._e(),1==e.row.paymentType?r("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoicePayCheckEdit")},on:{click:function(r){return t.payCancelFn("row",e.row)}}},[t._v(t._s(t.$t("orders.notreceived")))]):t._e()],1)]}}],null,!1,205070949)}):t._e()],1)]:[r("el-table",{key:"gridTable3"+t.activeName,ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,height:"500","tooltip-effect":"dark","row-key":function(t){return t.id}},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),r("el-table-column",{attrs:{type:"expand",width:"25"},scopedSlots:t._u([{key:"header",fn:function(){return[t.isExpansion?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.toggleRowExpansion}},[r("i",{staticClass:"el-icon-minus"})]):t._e(),t.isExpansion?t._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.toggleRowExpansion}},[r("i",{staticClass:"el-icon-plus"})])]},proxy:!0},{key:"default",fn:function(e){return[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-left":"0"},attrs:{data:e.row.items,"max-height":"360","row-style":t.rowStyle,"header-cell-style":t.rowStyle,"cell-style":t.rowStyle,"cell-class-name":t.cellClassName}},[r("el-table-column",{attrs:{label:t.$t("orders.orderID"),width:"140",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.orderId))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"",label:t.$t("orders.产品图片"),width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.row.imgUrl,fit:"cover"}})]}}],null,!0)}),r("el-table-column",{attrs:{prop:"vendorProductName",label:t.$t("orders.SKU编号/数量/名称"),width:"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.isManage||e.row.vendorPrice?t._e():r("el-link",{attrs:{type:"primary",disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{click:function(r){return t.unable(e.row)}}},[t._v(t._s(t.$t("orders.tabBar5")))]),r("p",{},[2==e.row.isManage?[r("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[t._v(" "+t._s(e.row.vendorSku+"Unable to purchase")+" "),r("span",[r("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[t._v("×")]),r("el-badge",{staticClass:"mark",attrs:{value:e.row.quantity}})],1)])]:[1!=e.row.status?[r("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[t._v(" "+t._s(e.row.vendorSku?e.row.vendorSku+" Products Off shelf":"null Please make an offer")+" "),r("span",[r("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[t._v("×")]),r("el-badge",{staticClass:"mark",attrs:{value:e.row.quantity}})],1)])]:[r("span",{staticStyle:{display:"inline-block"}},[t._v(" "+t._s(e.row.vendorSku||"null Please make an offer")+" "),r("span",[r("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[t._v("×")]),r("el-badge",{staticClass:"mark",attrs:{value:e.row.quantity}})],1)])]]],2),r("span",[t._v(t._s(e.row.name))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"",label:t.$t("orders.属性值"),width:"180",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.propertyValue||"--"))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"vendorSku",label:t.$t("orders.供应商价格"),width:"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(a){return[r("span",{staticStyle:{display:"inline-block"}},[a.row.vendorSku?r("span",[1!=e.row.discountType&&2!=e.row.discountType||2==a.row.isManage?[t._v(t._s(t.$store.state.country.symbol)+" "+t._s(Number(a.row.vendorPrice).toFixed(2)))]:[r("span",[t._v(t._s(t.$store.state.country.symbol)+" "+t._s(Number((a.row.amount-a.row.amount/e.row.productAmount*e.row.couponAmount)/a.row.quantity).toFixed(2))+" ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(t.$store.state.country.symbol)+" "+t._s(Number(a.row.vendorPrice).toFixed(2)))])])]],2):r("span",{staticStyle:{color:"#F56C6C"}},[t._v("Please make an offer")])])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"phone",label:t.$t("orders.客户售价"),width:"200",align:"left"},scopedSlots:t._u([{key:"default",fn:function(a){return[r("span",[t._v(t._s(e.row.currency)+" "+t._s(Number(a.row.price).toFixed(2)))])]}}],null,!0)}),r("el-table-column",{attrs:{label:""}})],1)]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.storeName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.store||"---"))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.third"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.codeName))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.orderID"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.orderId||"---"))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.vendorName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(t._s(e.row.customer?e.row.customer.name:"---"))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.CreateDate"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.$moment(e.row.timeCreated).format("ll [at] LTS")||"---"))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.address"),"min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[r("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.zip?e.row.shippingJsonInfo.zip:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.address1?e.row.shippingJsonInfo.address1:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.city?e.row.shippingJsonInfo.city:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.province?e.row.shippingJsonInfo.province:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.country?e.row.shippingJsonInfo.country:"---")+" ")]),r("span",[t._v(t._s(e.row.receiverAddress||"---"))])])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.receiver"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.receiverName||"---"))])]}}])}),2!=t.activeName&&3!=t.activeName?[r("el-table-column",{attrs:{label:t.$t("orders.logistics"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.status?r("span",[e.row.shippingMethodArr?r("span",[e.row.shippingMethodArr.length&&e.row.shippingMethodArr[0]?r("div",[t._v(t._s(e.row.shippingMethodArr[0].name)+" ["+t._s(e.row.shippingMethodArr[0].agingDaysBegin?e.row.shippingMethodArr[0].agingDaysBegin:0)+"-"+t._s(e.row.shippingMethodArr[0].agingDaysEnd?e.row.shippingMethodArr[0].agingDaysEnd:0)+t._s(t.$t("logistics.天"))+"]")]):r("div",{staticClass:"tx-middle"},[t._v(" --- "),r("i",{staticClass:"el-icon-warning mg-l-5",staticStyle:{"font-size":"20px",cursor:"pointer"},on:{click:function(r){return t.shippedFn(e.row)}}})])]):t._e()]):r("span",[t._v(" "+t._s(e.row.trackCompany?e.row.trackCompany+(e.row.trackNumber?":"+e.row.trackNumber+" ["+(e.row.agingDaysBegin?e.row.agingDaysBegin:0)+"-"+(e.row.agingDaysEnd?e.row.agingDaysEnd:0)+t.$t("logistics.天")+"]":"["+(e.row.agingDaysBegin?e.row.agingDaysBegin:0)+"-"+(e.row.agingDaysEnd?e.row.agingDaysEnd:0)+t.$t("logistics.天")+"]"):"---")+" ")])]}}],null,!1,1238121305)}),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?r("el-table-column",{attrs:{label:t.$t("orders.仓库")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.warehouseName||"--"))])]}}],null,!1,605806532)}):t._e(),r("el-table-column",{attrs:{label:t.$t("orders.logisticsFee")+"("+t.$store.state.country.symbol+")",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.status?r("span",[e.row.shippingMethodArr?r("span",[t._v(t._s(e.row.shippingMethodArr.length&&e.row.shippingMethodArr[0]?e.row.shippingMethodArr[0].fee:"---"))]):t._e()]):r("span",[3==e.row.discountType?r("span",[r("span",[t._v("0 ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(e.row.trackFee||"---"))])])]):r("span",[t._v(t._s(e.row.trackFee||"---"))])])]}}],null,!1,2083164091)}),r("el-table-column",{attrs:{label:t.$t("orders.tradeAmount")+"("+t.$store.state.country.symbol+")",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.status?r("span",[e.row.shippingMethodArr?r("span",[e.row.itemAmount?r("span",[t._v(t._s(e.row.shippingMethodArr.length&&e.row.shippingMethodArr[0]?(Number(e.row.shippingMethodArr[0].fee)+Number(e.row.itemAmount)).toFixed(2):"---"))]):r("span",[t._v(t._s(e.row.shippingMethodArr.length&&e.row.shippingMethodArr[0]?Number(e.row.shippingMethodArr[0].fee):"---"))])]):r("span",[t._v(t._s(e.row.itemAmount?Number(e.row.itemAmount).toFixed(2):"---"))])]):r("span",[e.row.discountType?r("span",[r("span",[t._v(t._s(e.row.payAmount||"---")+" ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(e.row.realAmount.toFixed(2)||"---"))])])]):r("span",[t._v(t._s(e.row.realAmount.toFixed(2)||"---"))])])]}}],null,!1,1020267375)})]:t._e(),6==t.status?[r("el-table-column",{attrs:{label:t.$t("orders.status"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.statusArr[e.row.status]?t.statusArr[e.row.status].text:"---"))])]}}],null,!1,2321464157)})]:t._e(),311==t.status?[r("el-table-column",{attrs:{label:t.$t("orders.payStatus"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.status?r("div",[r("span",[t._v(t._s(t.$t("orders.status1")))])]):11==e.row.status?r("div",[r("span",[t._v(t._s(t.$t("orders.status2")))])]):r("div",[r("span",[t._v("---")])])]}}],null,!1,4134086874)})]:t._e(),4==t.status&&2==t.activeName?[r("el-table-column",{attrs:{label:t.$t("orders.operate"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoiceAbnormalEdit")},on:{click:function(r){return t.quoteFn("row",e.row)}}},[t._v(t._s(t.$t("orders.重新报价")))])]}}],null,!1,1262317929)})]:t._e(),2!=t.status||2!=t.activeName&&1!=t.activeName?[r("el-table-column",{attrs:{label:t.$t("quotation.备注"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(t._s(e.row.remark||"---"))])]}}],null,!1,627357406)})]:t._e(),311==t.status?[r("el-table-column",{attrs:{label:t.$t("orders.operate"),width:"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(r){return t.openCustomer(e.row.customerUrl)}}},[t._v(t._s(t.$t("orders.分销点付款")))])]}}],null,!1,3070644107)})]:t._e()],2)]]],2)],1)],1),t.items.length?r("el-row",{attrs:{gutter:20}},[r("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[r("div",[r("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),r("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:120}}),r("el-dialog",{attrs:{title:t.$t("orders.选择仓库"),"close-on-click-modal":!1,visible:t.dialogVisibleHouse,width:"30%"},on:{"update:visible":function(e){t.dialogVisibleHouse=e},open:function(e){return t.openStorehouse()}}},[r("el-row",[r("el-col",[r("el-form",{ref:"form",attrs:{model:t.formHouse,"label-width":"100px"}},[r("el-form-item",{attrs:{label:t.$t("orders.仓库")+":"}},[r("el-radio-group",{model:{value:t.formHouse.type,callback:function(e){t.$set(t.formHouse,"type",e)},expression:"formHouse.type"}},t._l(t.storehouseList,(function(e){return r("el-radio",{key:e.id,staticStyle:{padding:"10px",width:"100px",overflow:"hidden","text-overflow":"ellipsis"},attrs:{label:e.id,name:"type"}},[t._v(t._s(e.name))])})),1)],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.cancelHouseDialog}},[t._v(t._s(t.$t("orders.取消")))]),r("el-button",{attrs:{type:"primary"},on:{click:t.buildOrder}},[t._v(t._s(t.$t("orders.提交")))])],1)],1),r("el-dialog",{attrs:{title:t.$t("orders.批量解绑商品"),visible:t.bathBundDialog,width:"30%","before-close":t.handleCloseBund},on:{"update:visible":function(e){t.bathBundDialog=e}}},[r("div",{staticClass:"sina-box"},[r("el-link",{attrs:{type:"danger",underline:!1}},[t._v(t._s(t.$t("orders.注意：你现在操作解绑国内，有可能会影响已付款的订单，请确认操作")))]),r("p"),r("div",[r("el-form",{staticClass:"demo-form-inline",attrs:{model:t.formInline}},[r("el-form-item",{attrs:{label:t.$t("orders.下载解绑模板：")}},[r("el-button",{attrs:{type:"text"},on:{click:t.downloadFileBuild}},[t._v(t._s(t.$t("orders.解绑模板")))])],1),r("el-form-item",{attrs:{label:t.$t("orders.导入解绑文档")}},[r("el-input",{staticStyle:{width:"65%"},attrs:{type:"text","auto-complete":"off",placeholder:t.$t("orders.请上传模板文件"),readonly:"readonly"},model:{value:t.formInline.templateFile,callback:function(e){t.$set(t.formInline,"templateFile",e)},expression:"formInline.templateFile"}},[r("el-button",{attrs:{slot:"append",type:"success"},on:{click:t.uploadFileClick},slot:"append"},[r("i",{staticClass:"el-icon-upload"}),t._v(" "+t._s(t.$t("orders.选择本地Excel文件")))])],1)],1),r("input",{staticStyle:{display:"none"},attrs:{id:"uploadFile",type:"file",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},on:{change:function(e){return t.uploadExcel(e)}}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.setDialog()}}},[t._v(t._s(t.$t("confirm")))])],1)]),r("dialogQuote",{attrs:{quoteData:t.dialogQuoteInfo},on:{openRelate:t.openRelate}}),r("dialogRelate",{attrs:{relateData:t.dialogRelateInfo},on:{relateFn:t.relateFn}}),r("dialogImport",{attrs:{importData:t.dialoImportInfo},on:{submitUpload:t.submitUpload}}),r("dialogCreateOrder",{attrs:{data:t.dialogCreateInfo},on:{createUpload:t.createUpload}}),r("dialoAuth",{attrs:{authData:t.dialoAuthInfo},on:{openSecretKey:t.openSecretKey}}),r("dialogKey",{attrs:{keyData:t.dialoKeyInfo},on:{openAddComment:t.openAddComment}}),r("dialogLogistic",{attrs:{dialogLogistic:t.dialogLogistic}}),r("dialogAssociation",{attrs:{dialogAssociation:t.dialogAssociation}}),r("DialogEditComment",{attrs:{DialogEditComment:t.DialogEditComment}}),r("dialogMarkShipped",{attrs:{dialogMarkShipped:t.dialogMarkShipped},on:{saveMarkShipped:t.saveMarkShipped}}),r("orderCnt",{attrs:{data:t.dialogOrderCnt}}),r("dialogSplit",{attrs:{keyData:t.dialogSplitInfo},on:{splitOrderFn:t.splitOrderFn}}),r("filterOrder",{attrs:{filterData:t.filterDialog},on:{callBackFilter:t.changeBackData,callBackCloseFilter:t.closeFilter}}),r("order-fail",{attrs:{failData:t.failData},on:{callBackFail:t.changeFail}})],1)},o=[],i=(r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("b636"),r("944a"),r("0c47"),r("23dc"),r("d9e2"),r("3410"),r("159b"),r("b0c0"),r("fb6a"),r("53ca"));function s(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
s=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",n=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(D){c=function(t,e,r){return t[e]=r}}function d(t,e,r,a){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),s=new C(a||[]);return i._invoke=function(t,e,r){var a="suspendedStart";return function(o,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var n=k(s,r);if(n){if(n===p)continue;return n}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===a)throw a="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a="executing";var l=u(t,e,r);if("normal"===l.type){if(a=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a="completed",r.method="throw",r.arg=l.arg)}}}(t,r,s),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(D){return{type:"throw",arg:D}}}t.wrap=d;var p={};function f(){}function h(){}function m(){}var g={};c(g,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==e&&r.call(y,o)&&(g=y);var b=m.prototype=f.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function a(o,s,n,l){var c=u(t[o],t,s);if("throw"!==c.type){var d=c.arg,p=d.value;return p&&"object"==Object(i["a"])(p)&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){a("next",t,n,l)}),(function(t){a("throw",t,n,l)})):e.resolve(p).then((function(t){d.value=t,n(d)}),(function(t){return a("throw",t,n,l)}))}l(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){a(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function k(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=u(r,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,p;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function $(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($,this),this.reset(!0)}function I(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(r.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=m,c(b,"constructor",m),c(m,"constructor",h),h.displayName=c(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),c(_.prototype,n,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,a,o,i){void 0===i&&(i=Promise);var s=new _(d(e,r,a,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(b),c(b,l,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var a=e.pop();if(a in t)return r.value=a,r.done=!1,r}return r.done=!0,r}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(r,a){return s.type="throw",s.arg=t,e.next=r,a&&(e.method="next",e.arg=void 0),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var n=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(n&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(n){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var o=a.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,e,r,a,o,i,s){try{var n=t[i](s),l=n.value}catch(c){return void r(c)}n.done?e(l):Promise.resolve(l).then(a,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var i=t.apply(e,r);function s(t){n(i,a,o,s,l,"next",t)}function l(t){n(i,a,o,s,l,"throw",t)}s(void 0)}))}}var c,d=r("ade3"),u=(r("a9e3"),r("e9c4"),r("b680"),r("d81d"),r("07ac"),r("4de4"),r("99af"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{visible:t.dialogLogistic.isShow,width:"800px","show-close":!1,"before-close":t.closeHandle,title:""},on:{"update:visible":function(e){return t.$set(t.dialogLogistic,"isShow",e)}}},[r("el-row",{staticStyle:{"word-break":"break-word"}},[r("el-row",{staticClass:"tx-center pd-15"},[1==t.dialogLogistic.errorType?r("div",[t._v(t._s(t.$t("orders.该收货地址未设置物流方式")))]):t._e(),3==t.dialogLogistic.errorType?r("div",[t._v(t._s(t.$t("orders.该订单低于最低可发货重量"))+"("+t._s(t.dialogLogistic.min)+"g)")]):t._e(),2==t.dialogLogistic.errorType?r("div",[t._v(t._s(t.$t("orders.该订单低于最低可发货体积"))+"("+t._s(t.dialogLogistic.min)+"cm"),r("sup",[t._v("3")]),t._v(")")]):t._e(),5==t.dialogLogistic.errorType?r("div",[t._v(t._s(t.$t("orders.该订单高于最高可发货重量"))+"("+t._s(t.dialogLogistic.max)+"g)")]):t._e(),4==t.dialogLogistic.errorType?r("div",[t._v(t._s(t.$t("orders.该订单高于最高可发货体积"))+"("+t._s(t.dialogLogistic.max)+"cm"),r("sup",[t._v("3")]),t._v(")")]):t._e(),6==t.dialogLogistic.errorType?r("div",[t._v(t._s(t.$t("orders.该订单以下商品属性不符合可发货商品的属性要求")))]):t._e(),7==t.dialogLogistic.errorType?r("div",[t._v(t._s(t.$t("orders.该订单商品总重量不符合可发货要求")))]):t._e()]),3==t.dialogLogistic.errorType||5==t.dialogLogistic.errorType?r("el-row",{staticClass:"tx-center pd-15"},[r("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:t.items}},[r("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),r("el-table-column",{attrs:{label:t.$t("orders.重量")+"(g)",prop:"weight"}}),r("el-table-column",{attrs:{label:t.$t("orders.数量"),prop:"number"}}),r("el-table-column",{attrs:{label:t.$t("orders.总重量")+"(g)",prop:"weightTotal"}})],1)],1):t._e(),2==t.dialogLogistic.errorType||4==t.dialogLogistic.errorType?r("el-row",{staticClass:"tx-center pd-15"},[r("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:t.items}},[r("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),r("el-table-column",{attrs:{prop:"volume"}},[r("template",{slot:"header"},[t._v(" "+t._s(t.$t("orders.体积"))+"(cm"),r("sup",[t._v("3")]),t._v(") ")])],2),r("el-table-column",{attrs:{label:t.$t("orders.数量"),prop:"number"}}),r("el-table-column",{attrs:{prop:"volumeTotal"}},[r("template",{slot:"header"},[t._v(" "+t._s(t.$t("orders.总体积"))+"(cm"),r("sup",[t._v("3")]),t._v(") ")])],2)],1)],1):t._e(),6==t.dialogLogistic.errorType?r("el-row",{staticClass:"tx-center pd-15"},[r("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:t.items}},[r("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),r("el-table-column",{attrs:{label:t.$t("orders.属性")},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.productType,(function(e,a){return r("div",{key:a},[t._v(" "+t._s(t.$dict.productType[e]?t.$t(t.$dict.productType[e].text):"")+" ")])}))}}],null,!1,2337534688)})],1)],1):t._e(),r("el-row",{staticClass:"tx-center"},[r("el-button",{staticClass:"mt-15",attrs:{type:"primary"},on:{click:t.closeHandle}},[t._v(t._s(t.$t("orders.知道了")))])],1)],1)],1)}),p=[],f={props:["dialogLogistic"],data:function(){return{items:[]}},watch:{"dialogLogistic.items":{handler:function(){this.dialogLogistic.items&&(this.items=Object.values(this.dialogLogistic.items))},deep:!0,immediate:!0}},mounted:function(){},methods:{closeHandle:function(){this.dialogLogistic.isShow=!1,this.dialogLogistic.items=[],this.dialogLogistic.errorType=null,this.dialogLogistic.min="",this.dialogLogistic.max=""}}},h=f,m=(r("8e3e"),r("2877")),g=Object(m["a"])(h,u,p,!1,null,"a658c750",null),v=g.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{staticClass:"dialog-association",attrs:{visible:t.dialogAssociation.isShow,width:"500px",title:""},on:{"update:visible":function(e){return t.$set(t.dialogAssociation,"isShow",e)}}},[t.dialogAssociation.hasProduct?r("el-row",[r("el-row",{staticClass:"tx-center"},[r("h3",{staticStyle:{padding:"40px 0"}},[t._v(t._s(t.$t("orders.之前已有选中商品尚未被处理，是否继续报价？")))]),r("div",[r("el-button",{staticClass:"mt-15",attrs:{type:"primary"},on:{click:t.giveUpFn}},[t._v(t._s(t.$t("orders.放弃")))]),r("el-button",{staticClass:"mt-15",attrs:{type:"primary"},on:{click:t.continueFn}},[t._v(t._s(t.$t("orders.继续报价")))])],1)])],1):t._e(),t.dialogAssociation.hasProduct?t._e():r("el-row",[r("el-row",{staticClass:"tx-flex"},[r("div",[r("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"","show-file-list":!1,"on-change":t.handleUploadChange,"auto-upload":!1}},[r("i",{staticClass:"el-icon-document-copy"}),r("div",{staticClass:"el-upload__text"},[t._v(t._s(t.$t("orders.选择文件")))])])],1),r("div",{staticStyle:{width:"200px"}},[r("div",[t._v(t._s(t.$t("orders.请按规范填写表格仅支持xlsx格式文件")))]),r("div",[t._v(t._s(t.$t("orders.上传的文件不能超过10M"))+" ")])])]),r("el-row",{staticClass:"tx-right pd-30"},[r("el-button",{on:{click:t.cancelFn}},[t._v(t._s(t.$t("orders.取消")))])],1)],1)],1)},b=[],w={props:["dialogAssociation"],mounted:function(){},methods:{cancelFn:function(){this.dialogAssociation.isShow=!1},giveUpFn:function(){var t=this;this.$apiCall("api.ShopifyOrder.clearWaitBindItem",{},(function(e){9999==e.ErrorCode?t.dialogAssociation.hasProduct=!1:t.$elementMessage(e.Message,"error")}))},continueFn:function(){this.$router.push({path:"/orderAssociation"})},handleUploadChange:function(t){var e=this;this.$showLoading(),this.$apiCall("api.ShopifyOrder.importNotBindItem",{"@file":t.raw},(function(t){e.$hideLoading(),9999==t.ErrorCode?e.$router.push({path:"/orderAssociation"}):e.$elementMessage(t.Message,"error")}))}}},_=w,k=(r("1e07"),r("0967"),Object(m["a"])(_,y,b,!1,null,"d2c8a382",null)),S=k.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{visible:t.quoteData.isShow,title:t.$t("orders.Made"),width:"800px"},on:{"update:visible":function(e){return t.$set(t.quoteData,"isShow",e)}}},[r("el-divider"),r("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.quoteData.items}},[r("el-table-column",{attrs:{label:t.$t("orders.productinfo"),width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticClass:"d-flex"},[r("img",{attrs:{src:e.row.imgUrl,width:"60",height:"60"}}),r("div",{staticClass:"mg-l-20"},[r("p",[t._v(t._s(e.row.name))]),r("p",[t._v("SPU: "+t._s(e.row.spu))]),r("p",[t._v("SKU: "+t._s(e.row.sku))])])])]}}])}),r("el-table-column",{attrs:{prop:"quantity",label:t.$t("orders.qty"),width:"150"}}),r("el-table-column",{attrs:{label:t.$t("orders.price"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.currency)+" "+t._s(e.row.price||0))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.operate")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[r("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:t.goto}},[t._v(" "+t._s(t.$t("orders.putaway"))+" ")]),r("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(r){return t.openRelate(e.row)}}},[t._v(" "+t._s(t.$t("orders.relate"))+" ")])],1)]}}])})],1)],1),r("el-divider"),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.quoteData.isShow=!1}}},[t._v(t._s(t.$t("orders.cancel")))])],1)],1)},I=[],x={props:["quoteData"],data:function(){return{vendorId:localStorage.getItem("vendorId")}},methods:{goto:function(){if("148982"!=this.vendorId&&"146428"!=this.vendorId&&"144875"!=this.vendorId&&"144843"!=this.vendorId&&"143779"!=this.vendorId&&"143654"!=this.vendorId&&"74"!=this.vendorId){var t=this.$router.resolve({name:"AddGoods2"});window.open(t.href,"_blank")}else{var e=this.$router.resolve({name:"AddGoods"});window.open(e.href,"_blank")}},openRelate:function(t){this.$emit("openRelate",t)}}},D=x,E=(r("89ce"),Object(m["a"])(D,C,I,!1,null,"ce4300fc",null)),P=E.exports,M=r("8c6c"),O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{visible:t.importData.isShow,title:t.$t("invoice.shippinginformation"),width:"800px"},on:{"update:visible":function(e){return t.$set(t.importData,"isShow",e)}}},[r("el-divider"),r("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[r("div",{staticClass:"draw-alert mg-b-20"},[r("el-alert",{attrs:{type:"warning",closable:!1}},[r("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[r("span",[t._v(t._s(t.$t("invoice.templateprovided")))]),r("el-button",{attrs:{type:"text"},on:{click:t.downloadFile}},[t._v(t._s(t.$t("invoice.template")))])],1)])],1),r("div",{staticStyle:{"margin-top":"40px"}},[r("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","auto-upload":!1,"file-list":t.uploadfileList,"on-change":t.handleUploadChange}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v(t._s(t.$t("invoice.fileSelect")))]),[r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v(" "+t._s(t.$t("invoice.shippinginformation"))+" ")])],r("div",{staticClass:"el-upload__tip mg-y-15",staticStyle:{"margin-top":"20px"},attrs:{slot:"tip"},slot:"tip"},[r("p",[t._v(t._s(t.$t("invoice.shippinginformation1")))]),r("p",[t._v(t._s(t.$t("invoice.shippinginformation2")))])])],2)],1)]),r("el-divider"),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.importData.isShow=!1}}},[t._v("取消")])],1)],1)},N=[],F={props:["importData"],data:function(){return{uploadfileList:[]}},methods:{downloadFile:function(){var t="/newFile/orders_impor.xlsx";0==$("#downloadFile").length&&$("body").append('<iframe id="downloadFile" style="display:none"></iframe>');var e=function(t){document.getElementById("downloadFile").src=t};e(t)},handleUploadChange:function(t){this.uploadfileList=[],this.uploadfileList.push(t)},submitUpload:function(){if(this.uploadfileList.length){var t=this.uploadfileList[0].raw;this.$emit("submitUpload",t)}else this.$elementMessage(this.$t("invoice.selectfile"),"error")}}},L=F,A=Object(m["a"])(L,O,N,!1,null,"570c5446",null),R=A.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{visible:t.data.isShow,title:t.$t("orders.创建订单"),width:"600px"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)},close:t.closeDialog}},[r("el-divider"),r("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[r("el-alert",{attrs:{type:"warning",closable:!1}},[r("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[r("span",[t._v(t._s(t.$t("orders.请按照提供的模板文件创建订单")))]),r("el-button",{attrs:{type:"text"},on:{click:t.downloadFile}},[t._v(t._s(t.$t("invoice.template")))])],1)]),r("div",{staticClass:"mg-t-20"},[r("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","auto-upload":!1,"file-list":t.uploadfileList,"on-change":t.handleUploadChange}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v(t._s(t.$t("invoice.fileSelect")))]),r("div",{staticClass:"el-upload__tip mg-y-15",staticStyle:{"margin-top":"20px"},attrs:{slot:"tip"},slot:"tip"},[r("p",[t._v("1."+t._s(t.$t("orders.请按规范填写表格，仅支持xlsx格式文件")))]),r("p",[t._v("2."+t._s(t.$t("orders.上传的文件不能超过2M，只处理前99条数据")))]),r("p",{staticStyle:{color:"#f56c6c"}},[t._v("3."+t._s(t.$t("orders.订单编号处若填写同一编号为同一订单")))])])],1)],1)],1),r("el-divider"),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.data.isShow=!1}}},[t._v(t._s(t.$t("orders.取消")))]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createUpload()}}},[t._v(t._s(t.$t("orders.提交")))])],1)],1)},B=[],J={props:["data"],data:function(){return{uploadfileList:[]}},methods:{closeDialog:function(){this.uploadfileList=[]},downloadFile:function(){var t="/newFile/orders_creat.xlsx";0==$("#downloadFileCreate").length&&$("body").append('<iframe id="downloadFileCreate" style="display:none"></iframe>');var e=function(t){document.getElementById("downloadFileCreate").src=t};e(t)},handleUploadChange:function(t){this.uploadfileList=[],this.uploadfileList.push(t)},createUpload:function(){if(this.uploadfileList.length)if(this.uploadfileList[0].raw.size/1024/1024>2)this.$message({message:this.$t("orders.上传文件不能大于2MB"),type:"error"});else{var t=this.uploadfileList[0].raw;this.$emit("createUpload",t),this.uploadfileList=[]}else this.$elementMessage(this.$t("invoice.selectfile"),"error")}}},j=J,U=Object(m["a"])(j,T,B,!1,null,"18e4feaa",null),q=U.exports,K=r("5538"),z=r("fa9e"),W=r("cd22"),H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:t.$t("invoice.shippedMark"),visible:t.dialogMarkShipped.isShow,width:"700px"},on:{"update:visible":function(e){return t.$set(t.dialogMarkShipped,"isShow",e)}}},[r("el-divider"),r("div",{staticClass:"d-body"},[t.dialogMarkShipped.item?r("el-row",{staticClass:"pd-x-20",attrs:{gutter:20}},[r("el-col",{staticStyle:{color:"#303133"},attrs:{span:24}},[t._v(" "+t._s(t.dialogMarkShipped.item.name)+" ")]),r("el-col",{attrs:{span:24}},[r("el-form",{attrs:{"label-width":"160px"}},[r("el-form-item",{attrs:{label:t.$t("invoice.Logisticsnumber"),required:""}},[r("el-input",{attrs:{placeholder:t.$t("invoice.Logisticsnumber")},model:{value:t.dialogMarkShipped.trackNumber,callback:function(e){t.$set(t.dialogMarkShipped,"trackNumber",e)},expression:"dialogMarkShipped.trackNumber"}})],1),r("el-form-item",{attrs:{label:t.$t("invoice.Logisticscompany"),required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("invoice.Logisticscompany")},model:{value:t.dialogMarkShipped.trackKey,callback:function(e){t.$set(t.dialogMarkShipped,"trackKey",e)},expression:"dialogMarkShipped.trackKey"}},t._l(t.dialogMarkShipped.shopifyCompany,(function(t){return r("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1),99==t.dialogMarkShipped.trackKey?r("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:t.$t("invoice.Logisticscompany")},model:{value:t.dialogMarkShipped.trackCompany,callback:function(e){t.$set(t.dialogMarkShipped,"trackCompany",e)},expression:"dialogMarkShipped.trackCompany"}}):t._e()],1),99==t.dialogMarkShipped.trackKey?r("el-form-item",{attrs:{label:t.$t("invoice.Trackinglinks")}},[r("el-input",{attrs:{placeholder:t.$t("invoice.Trackinglinks")},model:{value:t.dialogMarkShipped.trackUrl,callback:function(e){t.$set(t.dialogMarkShipped,"trackUrl",e)},expression:"dialogMarkShipped.trackUrl"}})],1):t._e()],1)],1)],1):t._e()],1),r("el-divider"),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogMarkShipped.isShow=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),r("el-button",{attrs:{type:"primary",loading:t.dialogMarkShipped.loading},on:{click:t.saveMarkShipped}},[t._v(" "+t._s(t.$t("invoice.confirm"))+" ")])],1)],1)},V=[],Q={props:["dialogMarkShipped"],data:function(){return{invoiceInfo:{}}},methods:{saveMarkShipped:function(){var t=this;if(this.dialogMarkShipped.trackNumber)if(this.dialogMarkShipped.trackKey)if(99!=this.dialogMarkShipped.trackKey||this.dialogMarkShipped.trackCompany){this.dialogMarkShipped.shopifyCompany.forEach((function(e){t.dialogMarkShipped.trackKey==e.key&&(99!=t.dialogMarkShipped.trackKey?e.name:t.dialogMarkShipped.trackCompany)})),this.$emit("saveMarkShipped")}else this.$elementMessage(this.$t("invoice.logisticscompany"),"error");else this.$elementMessage(this.$t("invoice.logisticscompany"),"error");else this.$elementMessage(this.$t("invoice.logisticsnumber"),"error")}}},Y=Q,G=Object(m["a"])(Y,H,V,!1,null,"e9348b1c",null),X=G.exports,Z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.data.loading,expression:"data.loading"}],attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,title:"订单信息",visible:t.data.isShow,width:"90%"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)}}},[r("el-divider"),r("div",{staticClass:"pd-x-20 mg-y-30"},[r("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.data.items}},[r("el-table-column",{attrs:{prop:"codeName",label:t.$t("orders.third"),width:"150"}}),r("el-table-column",{attrs:{prop:"orderId",label:t.$t("orders.orderID"),width:"150"}}),r("el-table-column",{attrs:{label:t.$t("orders.vendorName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(t._s(e.row.customer?e.row.customer.name:"---"))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.storeName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.store||"---"))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.CreateDate"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.timeCreated||"---"))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.address"),"min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[r("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.zip?e.row.shippingJsonInfo.zip:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.address1?e.row.shippingJsonInfo.address1:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.city?e.row.shippingJsonInfo.city:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.province?e.row.shippingJsonInfo.province:"---")+" "+t._s(e.row.shippingJsonInfo&&e.row.shippingJsonInfo.country?e.row.shippingJsonInfo.country:"---")+" ")]),r("span",[t._v(t._s(e.row.receiverAddress||"---"))])])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.receiver"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.receiverName||"---"))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.logistics"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.trackCompany?e.row.trackCompany+(e.row.trackNumber?"："+e.row.trackNumber:""):"---"))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.logisticsFee")+"("+t.$store.state.country.symbol+")",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.discountType?r("span",[r("span",[t._v("0 ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(e.row.trackFee||"---"))])])]):r("span",[t._v(t._s(e.row.trackFee||"---"))])]}}])}),r("el-table-column",{attrs:{label:t.$t("orders.tradeAmount")+"("+t.$store.state.country.symbol+")",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.discountType?r("span",[r("span",[t._v(t._s(e.row.payAmount||"---")+" ")]),r("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[r("span",{staticStyle:{color:"#606266"}},[t._v(t._s(e.row.realAmount||"---"))])])]):r("span",[t._v(t._s(e.row.realAmount||"---"))])]}}])})],1)],1),r("el-divider"),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},on:{click:function(e){t.data.isShow=!1}},slot:"footer"},[r("el-button",[t._v(" "+t._s(t.$t("orders.cancel"))+" ")])],1)],1)],1)},tt=[],et={props:["data"],data:function(){return{}},created:function(){},mounted:function(){},methods:{}},rt=et,at=(r("eeb3"),Object(m["a"])(rt,Z,tt,!1,null,"026aafdb",null)),ot=at.exports,it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("el-dialog",{attrs:{title:"批量筛选",visible:t.filterData.isShowDialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){return t.$set(t.filterData,"isShowDialog",e)}}},[r("el-row",{staticClass:"pd20"},[r("el-col",{staticClass:"pm20"},[r("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[r("el-radio",{attrs:{label:3}},[t._v("第三方交易号")]),r("el-radio",{attrs:{label:4}},[t._v("订单编号")])],1)],1),r("el-col",[r("el-input",{attrs:{type:"textarea",rows:6,placeholder:"每行一个订单编号（支持excel复制黏贴）,一次最多支持2000个"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("确 定")])],1)],1)],1)},st=[],nt=(r("ac1f"),r("1276"),r("5319"),{components:{},props:["filterData"],data:function(){return{radio:3,textarea:"",param:{show:!1}}},computed:{},watch:{},methods:{handleOk:function(){if(this.textarea){var t=this.textarea.split("\n").map((function(t){return t.replace(/\s+/g,"")})).filter((function(t){return t}));3===this.radio?(this.param.ok=1,this.param.order=t):(this.param.ok=2,this.param.order=t),this.textarea="",this.radio=3,this.$emit("callBackFilter",this.param)}else this.$message.error("请填写内容")},handleClose:function(){this.textarea="",this.radio=3,this.$emit("callBackCloseFilter",this.param)}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}}),lt=nt,ct=(r("4d2f"),Object(m["a"])(lt,it,st,!1,null,"bf4b02e0",null)),dt=ct.exports,ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("el-dialog",{attrs:{title:"返回结果",visible:t.failData.isShowDialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){return t.$set(t.failData,"isShowDialog",e)}}},[r("el-row",{staticClass:"pd20"},[r("el-col",{staticClass:"pm20"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.failData.obj,border:""}},[r("el-table-column",{attrs:{label:"编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row))])]}}])}),r("el-table-column",{attrs:{prop:"name",label:"描述"}},[[r("span",[t._v("订单不存在或者不满足搜索要求")])]],2)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.handleClose}},[t._v("确 定")])],1)],1)],1)},pt=[],ft={components:{},props:["failData"],data:function(){return{tableData:""}},computed:{},watch:{},methods:{handleClose:function(){this.$emit("callBackFail",this.param)}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},ht=ft,mt=(r("b584"),Object(m["a"])(ht,ut,pt,!1,null,"fedd14c6",null)),gt=mt.exports,vt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:t.$t("orders.拆分订单"),visible:t.keyData.isShow,width:"1000px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.keyData,"isShow",e)}}},[r("el-divider"),r("div",{staticClass:"d-body"},[t._l(t.keyData.items,(function(e,a){return r("el-card",{key:e.id,staticClass:"mg-t-20",attrs:{shadow:"never"}},[r("div",{staticClass:"clearfix d-flex justify-content-between",attrs:{slot:"header"},slot:"header"},[r("div",[t._v(" "+t._s(t.$t("orders.订单编号：{num1}，订单重量：{num2} g",{num1:e.orderId,num2:t.countTotal(e.items,"totalWe")}))+" ")]),r("div",[t._v(" "+t._s(t.$t("orders.新订单将包含{num1}个商品，商品重量 {num2} g，总重量 {num3} g",{num1:e.checkIds?e.checkIds.length:0,num2:e.checkIdsWeight||0,num3:e.checkIdsWeight||0}))+" ")])]),r("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,"row-key":function(t){return t.id}},on:{"selection-change":function(r){return t.handleSelectionChange(r,e)}}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{label:t.$t("quotation.图片")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-image",{attrs:{src:e.row.imgUrl,width:"50",height:"50"}},[r("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),r("span",{staticClass:"dot"},[t._v("...")])]),r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])])]}}],null,!0)}),r("el-table-column",{attrs:{label:t.$t("orders.SKU/name"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(" "+t._s(e.row.vendorSku||"--")+" ")]),r("div",[t._v(" "+t._s(e.row.vendorProductName||"--")+" ")])]}}],null,!0)}),r("el-table-column",{attrs:{label:t.$t("quotation.价格")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(" "+t._s(e.row.currency||"")+" "+t._s(e.row.vendorPrice||"--")+" ")])]}}],null,!0)}),r("el-table-column",{attrs:{label:t.$t("orders.总重量")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(" "+t._s(e.row.totalWe||"--")+" g ")])]}}],null,!0)}),r("el-table-column",{attrs:{label:t.$t("orders.数量")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(" "+t._s(e.row.quantity||"--")+" ")])]}}],null,!0)}),r("el-table-column",{attrs:{label:t.$t("orders.库存")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(" "+t._s(e.row.inventory||"--")+" ")])]}}],null,!0)}),r("el-table-column",{attrs:{label:t.$t("orders.拆分数量")},scopedSlots:t._u([{key:"default",fn:function(a){return[r("div",[r("el-input-number",{staticStyle:{width:"50px"},attrs:{step:1,"step-strictly":!0,min:1,max:a.row.qty,controls:!1,size:"small"},on:{change:function(r){return t.changeWeight(r,a.row,e)}},model:{value:a.row.splitQty,callback:function(e){t.$set(a.row,"splitQty",e)},expression:"scope.row.splitQty"}})],1)]}}],null,!0)})],1)],1)})),r("div",{staticClass:"mg-t-20"},[r("el-input",{attrs:{placeholder:t.$t("quotation.备注"),width:"500"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],2),r("el-divider"),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.keyData.isShow=!1}}},[t._v(t._s(t.$t("orders.cancel")))]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.splitOrderFn()}}},[t._v(t._s(t.$t("orders.confirm")))])],1)],1)},yt=[],bt=(r("13d5"),{props:["keyData"],data:function(){return{remark:""}},methods:{splitOrderFn:function(){var t=[],e={};if(this.keyData.items.forEach((function(r){r.checkIds&&(r.checkIds.length==r.items.length&&r.items.every((function(t){return t.splitQty&&t.splitQty==t.qty}))&&t.push(r),r.checkIds.forEach((function(t){r.items.forEach((function(r){t==r.id&&(e[t]=r.splitQty)}))})))})),t.length){var r=t.map((function(t){return t.orderId}));this.$elementMessage(this.$t("orders.{num} 拆分的新订单商品信息同原来一致，拆单无效",{num:r}),"error")}else{var a={remark:this.remark,itemSplit:JSON.stringify(e)};console.log(a),this.$emit("splitOrderFn",a)}},handleSelectionChange:function(t,e){var r=this;t.length||(this.$set(e,"checkIds",[]),this.$set(e,"checkIdsWeight",0)),t.forEach((function(t){r.$set(t,"checkIdsWeight",(t.vendorProductWeight?Number(t.vendorProductWeight):0)*(t.splitQty?Number(t.splitQty):0))})),this.$set(e,"checkIds",t.map((function(t){return t.id}))),this.$set(e,"checkIdsWeight",this.countTotal(t,"checkIdsWeight"))},changeWeight:function(t,e,r){this.$set(e,"checkIdsWeight",(e.vendorProductWeight?Number(e.vendorProductWeight):0)*(e.splitQty?Number(e.splitQty):0)),this.$set(r,"checkIdsWeight",this.countTotal(r.items,"checkIdsWeight"))},countTotal:function(t,e){var r=0;return r=t.reduce((function(t,r,a,o){return r[e]?t+Number(r[e]):t}),0),r}}}),wt=bt,_t=(r("fcf0"),Object(m["a"])(wt,vt,yt,!1,null,"0c558022",null)),kt=_t.exports,$t=r("21a6"),St=r.n($t),Ct=(r("bc3a"),{data:function(){var t;return t={host:location.host,dialogVisibleHouse:!1,formHouse:{type:""},formInline:{templateFile:""},afterData:{dialogVisible:!1,shopifyAccountId:"",orderId:""},isExpansion:!1,bathBundDialog:!1,batchNum:0,offlineNum:0,vipOrderReserveDay:this.$root.$children[0].vipNowData.orderReserveDay,isVipUp:!1,loading:!1,vendorId:localStorage.getItem("vendorId"),filterDialog:{isShowDialog:!1,obj:{}},failData:{isShowDialog:!1,obj:{}},billStatus:1,tableHeight:400,reSizeTime:0,batchType:1,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("ordersRowsPerPage")?Number(localStorage.getItem("ordersRowsPerPage")):10,items:[],total:0,totalPage:0,status:this.$route.params.status?Number(this.$route.params.status):1,activeName:"1",tabList:[],storeList:[],vendorList:[],checkIds:[],checkItems:[],vendorAllOrderCnt:{},filterParams:{date:[],dateFrom:"",dateTo:"",date2:[],dateFrom2:"",dateTo2:"",accountIds:"",relationshipId:"",orderId:"",codeName:"",receiverName:"",sysCode:""},filterParamsDefault:"{}",dialogAssociationDefault:"{}",dialogAssociation:{isShow:!1,hasProduct:!1},dialogLogisticDefault:"{}",dialogLogistic:{isShow:!1,errorType:null,items:[],max:"",min:""},dialogQuoteInfo:{isShow:!1,loading:!1,items:[]},dialogQuoteInfoDefault:"{}",dialogRelateInfo:{isShow:!1,loading:!1,items:[],Pagination:{},item:"",list:[]},dialogRelateInfoDefault:"{}",dialogSplitInfo:{isShow:!1,loading:!1,items:[]},dialogSplitInfoDefault:"{}",dialoImportInfo:{isShow:!1,loading:!1},dialogImportInfoDefault:"{}",dialoAuthInfo:{isShow:!1,loading:!1,shopData:[]},dialogAuthInfoDefault:"{}",dialogCreateInfo:{isShow:!1,loading:!1},dialogCreateInfoDefault:"{}",dialoKeyInfo:{isShow:!1,loading:!1},dialogKeyInfoDefault:"{}",DialogEditComment:{loading:!1,uploadLoading:!1,visible:!1,contents:"",shopName:"",attach:[],commentId:"",item:null},DialogEditCommentDefault:"{}",dialogMarkShipped:{isShow:!1,loading:!1,trackNumber:"",trackCompany:"",realCompany:"",item:null,shopifyCompany:[],trackKey:"",trackUrl:""},dialogMarkShippedDefault:"{}",dialogOrderCnt:{isShow:!1,items:[]},statusArr:{1:{text:this.$t("orders.tabBar14"),type:"warning",val:1},2:{text:this.$t("orders.tabBar1"),type:"warning",val:2},3:{text:this.$t("orders.tabBar13"),type:"warning",val:3},4:{text:this.$t("orders.tabBar2"),type:"warning",val:4},5:{text:this.$t("orders.tabBar3"),type:"warning",val:5},6:{text:this.$t("orders.ordersMenu2"),type:"success",val:6},7:{text:this.$t("orders.ordersMenu4"),type:"success",val:7},8:{text:this.$t("orders.tabBar4"),type:"info",val:8},9:{text:this.$t("orders.tabBar5"),type:"info",val:9},10:{text:this.$t("orders.tabBar6"),type:"info",val:10},11:{text:this.$t("orders.tabBar11"),type:"info",val:11},12:{text:this.$t("orders.tabBar12"),type:"info",val:12},14:{text:this.$t("orders.tabBar144"),type:"info",val:14}},storehouseList:[],statusPayArr:{1:{text:this.$t("orders.obligation"),type:"danger",val:1},4:{text:this.$t("orders.payFail"),type:"warning",val:4},5:{text:this.$t("orders.suppliernot"),type:"warning",val:5}}},Object(d["a"])(t,"checkIds",[]),Object(d["a"])(t,"checkItems",[]),t},computed:{isVipOrder:function(){var t=!1;return t=!!(this.filterParams.date[0]&&this.GetDateStr(this.vipOrderReserveDay)>=new Date(this.filterParams.date[0]).getTime())&&0!=this.vipOrderReserveDay,t}},components:{dialogAssociation:S,dialogLogistic:v,dialogQuote:P,dialogRelate:M["a"],dialogImport:R,dialogCreateOrder:q,dialoAuth:K["a"],dialogKey:z["a"],DialogEditComment:W["a"],dialogMarkShipped:X,orderCnt:ot,dialogSplit:kt,filterOrder:dt,orderFail:gt},watch:{status:function(){this.$refs.gridTable.clearSelection(),this.filterParams=JSON.parse(this.filterParamsDefault),this.activeName=this.$route.params.active},$route:function(t,e){this.activeName=this.$route.params.active,this.status=this.$route.params.status?Number(this.$route.params.status):1,t.params.status!==e.params.status&&(this.filterParams=JSON.parse(this.filterParamsDefault),this.batchType=1),this.vipOrderReserveDay=this.$root.$children[0].vipNowData.orderReserveDay,this.changeRole(),this.gotoPage()},activeName:function(){this.$refs.gridTable.clearSelection(),this.toPage(1)}},created:function(){},mounted:function(){this.isVip(),this.activeName=this.$route.params.active,this.changeRole(),this.batchType=1,this.filterParamsDefault=JSON.stringify(this.filterParams),this.dialogAssociationDefault=JSON.stringify(this.dialogAssociation),this.dialogQuoteInfoDefault=JSON.stringify(this.dialogQuoteInfo),this.dialogLogisticDefault=JSON.stringify(this.dialogLogistic),this.dialogRelateInfoDefault=JSON.stringify(this.dialogRelateInfo),this.dialogImportInfoDefault=JSON.stringify(this.dialoImportInfo),this.dialogCreateInfoDefault=JSON.stringify(this.dialogCreateInfo),this.dialogAuthInfoDefault=JSON.stringify(this.dialoAuthInfo),this.dialogKeyInfoDefault=JSON.stringify(this.dialoKeyInfo),this.DialogEditCommentDefault=JSON.stringify(this.DialogEditComment),this.dialogMarkShippedDefault=JSON.stringify(this.dialogMarkShipped),this.dialogSplitInfoDefault=JSON.stringify(this.dialogSplitInfo),this.getItem()},beforeDestroy:function(){},methods:(c={splitOrder:function(){var t=this;this.checkIds.length?(this.dialogSplitInfo.isShow=!0,this.checkItems.forEach((function(e){e.items.forEach((function(e){t.$set(e,"qty",Number(e.quantity)),t.$set(e,"totalWe",(Number(e.quantity)*Number(e.vendorProductWeight)).toFixed(2))}))})),this.dialogSplitInfo.items=this.checkItems):this.$elementMessage("Please select an order first","error")},batchUnbundling:function(){this.bathBundDialog=!0},handleCloseBund:function(){this.bathBundDialog=!1,this.formInline.templateFile=""},toggleRowExpansion:function(){this.items.length&&(this.isExpansion=!this.isExpansion,this.toggleRowExpansionAll(this.items,this.isExpansion))},toggleRowExpansionAll:function(t,e){var r=this;console.log(t,"datas"),t.forEach((function(t){r.$refs.gridTable.toggleRowExpansion(t,e),void 0!==t.items&&null!==t.items&&r.toggleRowExpansionAll(t.items,e)}))},handleExpandChange:function(t,e){this.items.length==e.length?this.isExpansion=!0:this.isExpansion=!1},rowStyle:function(t){t.row,t.rowIndex;var e={background:"#DDDFEF",borderBottom:"1px solid #d9d9d9",fontWeight:"500"};return e},cellClassName:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;return 0===e?"sub-table-cell":""},downloadFileBuild:function(){var t="/file/UnbundTemp.xlsx";fetch(t).then((function(t){return t.blob()})).then((function(t){var e=new File([t],"my-excel-file.xlsx",{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});St.a.saveAs(e)})).catch((function(t){console.log(t)}))},uploadFileClick:function(){document.getElementById("uploadFile").click()},setDialog:function(){var t=this;if(0==this.formInline.templateFile.length)return this.$message.error("请上传文件"),!1;var e=document.getElementById("uploadFile").files[0];console.log(e,"this.formInline.templateFile.");var r={"@file":e};this.$apiCall("api.ShopifyOrder.cancelRelationships",r,(function(e){9999==e.ErrorCode?(t.$message.success("Binding succeeded!"),t.bathBundDialog=!1,t.formInline.templateFile="",t.getItem()):t.$message({message:e.Message,type:"error"})}))},uploadExcel:function(t){var e=this,r=t.currentTarget.files[0];e.formInline.templateFile=r.name},batchWareHouse:function(){0!=this.checkIds.length?this.dialogVisibleHouse=!0:this.$message.error("Please select an order")},cancelHouseDialog:function(){this.dialogVisibleHouse=!1,this.formHouse.type=[]},buildOrder:function(){var t=this,e={id:this.checkIds,warehouseId:Number(this.formHouse.type)};this.$apiCall("api.ShopifyOrder.orderChooseWarehouse",e,(function(e){9999==e.ErrorCode?(t.$message.success("Binding succeeded!"),t.dialogVisibleHouse=!1,t.formHouse.type=[],t.getItem()):t.$message({message:e.Message,type:"error"})}))},openStorehouse:function(){var t=this;this.$apiCall("api.Warehouse.finds",{},(function(e){9999==e.ErrorCode?(t.storehouseList=e.Data.Results,0==e.Data.Results.length&&t.$message.error("There is no warehouse, please go to add！")):t.$message({message:e.Message,type:"error"})}))},splitOrderFn:function(t){var e=this;this.$showLoading(),this.$apiCall("api.ShopifyOrder.splitShopifyOrder",t,(function(t){"9999"==t.ErrorCode?(e.$elementMessage(e.$t("orders.success"),"success"),e.dialogSplitInfo=JSON.parse(e.dialogSplitInfoDefault),e.$refs.gridTable.clearSelection(),e.getItem()):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e)),e.$hideLoading()}))},exportOrder:function(){var t=this;this.checkIds.length||this.$elementMessage("Please select an order first","error"),this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var e=function(t){document.getElementById("ifilePro").src=t},r="api.ShopifyOrder.exportShopifyOrder2";this.$apiCall(r,{idList:this.checkIds},(function(r){"9999"==r.ErrorCode?(t.$elementMessage(t.$t("orders.success"),"success"),e(r.Data.Results)):(t.$elementMessage(r.Message,"error"),"1002"!=r.ErrorCode&&"1003"!=r.ErrorCode||t.$userFailure(t)),t.$hideLoading()}))},shippedFn:function(t){this.dialogLogistic.errorType=t.shippingMethodArr.errorType,t.shippingMethodArr.errorSkuList&&(this.dialogLogistic.items=t.shippingMethodArr.errorSkuList),this.dialogLogistic.max=t.shippingMethodArr.max,this.dialogLogistic.min=t.shippingMethodArr.min,this.dialogLogistic.isShow=!0},importFn:function(){var t=this;this.$apiCall("api.ShopifyOrder.getWaitBindItem",{},(function(e){9999==e.ErrorCode?(e.Data.Results.length>0&&(t.dialogAssociation.hasProduct=!0),t.dialogAssociation.isShow=!0):t.$elementMessage(e.Message,"error")}))},exportFn:function(){var t=this;this.checkIds.length?this.$apiCall("api.ShopifyOrder.exportNotBindItem",{ids:this.checkIds},(function(e){9999==e.ErrorCode?(window.open(e.Data.Results),t.$refs.gridTable.clearSelection(),t.checkIds=[]):t.$elementMessage(e.Message,"error")})):this.$elementMessage(this.$t("orders.selectOrder"),"error")},openCustomer:function(t){console.log(t,"333"),window.open(t,"_blank")},unable:function(t){var e=this;this.$confirm(this.$t("orders.确定将该商品无法采购?"),"Tips",{confirmButtonText:this.$t("shop.确定"),cancelButtonText:this.$t("shop.取消"),type:"warning"}).then((function(){e.$apiCall("api.ShopifyOrder.setUnableToPurchase",{itemId:t.id},(function(t){9999==t.ErrorCode?(e.getItem(),e.$elementMessage(e.$t("orders.已添加到无法采购"),"success")):e.$elementMessage(t.Message,"error")}))})).catch((function(){e.$message({type:"info",message:e.$t("orders.已取消")})}))},show:function(t){var e=this;this.$refs["popover"+t.orderId].showPopper=!0,this.$nextTick((function(){e.$refs["popover"+t.orderId].updatePopper()}))},enter:function(t){this.show(t)},leave:function(t){this.$refs["popover"+t.orderId].showPopper=!1},changeRole:function(){this.$route.params.status&&2!=this.$route.params.status?3==this.$route.params.status?this.$route.meta.roleWrite="invoiceDeliverEdit":4==this.$route.params.status?this.$route.meta.roleWrite="invoiceAbnormalEdit":5==this.$route.params.status?this.$route.meta.roleWrite="invoiceCompleteEdit":6==this.$route.params.status&&(this.$route.meta.roleWrite="invoiceAllEdit"):this.$route.meta.roleWrite="invoiceWaitEdit"},handleTypeOrder:function(t){this.batchType=t,this.getItem()},GetDateStr:function(t){var e=new Date;return e.setDate(e.getDate()-t),e.getTime()},isVip:function(){var t=this;this.$apiCall("api.Admin.getWaitShopifyOrder",{},(function(e){9999==e.ErrorCode&&(t.isVipUp=e.Data.Results)}))},handleAllFilter:function(){this.filterDialog.isShowDialog=!0},goToUP:function(){this.$router.push({name:"pricingUp"})},shopifyOrderCnt:function(t){var e=this;this.$showLoading(),this.$apiCall("api.ShopifyOrder.findByVendor",{invoiceId:t.id},(function(t){"9999"==t.ErrorCode?(t.Data.Results.length&&t.Data.Results.forEach((function(t){e.$set(t,"shippingJsonInfo",t.shippingJson?JSON.parse(t.shippingJson):"")})),e.dialogOrderCnt.items=t.Data.Results,e.dialogOrderCnt.isShow=!0):e.$elementMessage(t.Message,"error"),e.$hideLoading()}))},selectable:function(t,e){setTimeout((function(){return!(!t||!t.paymentType||1!=t.paymentType)}),1e3)},saveMarkShipped:function(){var t=this;return l(s().mark((function e(){var r,a,o,i;return s().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.dialogMarkShipped.loading=!0,r=[],a=[],o=t.dialogMarkShipped.item.items.map((function(t){return{id:t.id,isManage:t.isManage}})),i=0;case 5:if(!(i<o.length)){e.next=13;break}if(1!=o[i].isManage){e.next=10;break}return r.push(o[i]),e.next=10,t.saveMarkShippedItem(o[i].id).then((function(t){a.push(t)}));case 10:i++,e.next=5;break;case 13:a.length==r.length&&(t.$elementMessage(t.$t("orders.success"),"success"),t.dialogMarkShipped.isShow=!1,t.getItem());case 14:case"end":return e.stop()}}),e)})))()},saveMarkShippedItem:function(t){var e=this;return new Promise((function(r,a){e.$apiCall("api.ShopifyOrder.changeDeliver",{itemId:t,trackNumber:e.dialogMarkShipped.trackNumber,trackCompany:e.dialogMarkShipped.trackCompany,trackKey:e.dialogMarkShipped.trackKey,trackUrl:e.dialogMarkShipped.trackUrl},(function(e){"9999"==e.ErrorCode?r(t):a(t)}))}))},downPdf:function(t,e){var r=this,a=[];e?a=[{accountId:t.shopifyAccountId,orderId:t.orderId}]:(this.checkIds.length||this.$elementMessage("Please select an order first","error"),this.$showLoading(),a=this.checkItems.map((function(t){var e={accountId:t.shopifyAccountId,orderId:t.orderId};return e}))),this.$apiCall("api.BillSet.exportBill",{orderInfo:a},(function(t){if("9999"==t.ErrorCode){var e=document.createElement("a");e.href=t.Data.Results.url,e.click()}else r.$elementMessage(t.Message,"error");r.$hideLoading()}))},sendEmail:function(t,e){var r=this,a=[];if(e)a=[{accountId:t.shopifyAccountId,orderId:t.orderId}];else{if(!this.checkIds.length)return void this.$elementMessage("Please select an order first","error");this.$showLoading(),console.log(this.checkItems,"111"),a=this.checkItems.map((function(t){var e={accountId:t.shopifyAccountId,orderId:t.orderId};return e}))}this.$apiCall("api.BillSet.exportBill",{orderInfo:a,isSend:1},(function(t){"9999"==t.ErrorCode?r.$elementMessage("send success","success"):r.$elementMessage(t.Message,"error"),r.$hideLoading()}))},markShippedOpen:function(t){var e=this;this.dialogMarkShipped=JSON.parse(this.dialogMarkShippedDefault),this.$showLoading(),this.$apiCall("api.Invoice.getShopifyCompany",{},(function(r){e.$hideLoading(),"9999"==r.ErrorCode?(e.dialogMarkShipped.shopifyCompany=r.Data.Results,e.dialogMarkShipped.isShow=!0,e.dialogMarkShipped.item=t):e.$elementMessage(r.Message,"error")}))},changeFail:function(t){this.failData.isShowDialog=!1},openAddComment:function(){this.$refs.uploadFile&&this.$refs.uploadFile.clearFiles(),this.DialogEditComment=JSON.parse(this.DialogEditCommentDefault),this.DialogEditComment.visible=!0},openSecretKey:function(){this.dialoKeyInfo=JSON.parse(this.dialogKeyInfoDefault),this.dialoKeyInfo.isShow=!0},openAuth:function(){this.dialoAuthInfo=JSON.parse(this.dialogAuthInfoDefault),this.dialoAuthInfo.shopData=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).erpShops:[],this.dialoAuthInfo.isShow=!0},submitUpload:function(t){var e=this;this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var r=function(t){document.getElementById("ifilePro").src=t},a="api.ShopifyOrder.deliverImportNew",o={"@file":t};this.$apiCall(a,o,(function(t){"9999"==t.ErrorCode?(e.$elementMessage(e.$t("invoice.successImport"),"success"),r(t.Data.Results.file),e.dialoImportInfo=JSON.parse(e.dialogImportInfoDefault),e.getItem()):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e)),e.$hideLoading()}))},createUpload:function(t){var e=this;this.$showLoading(),0==$("#ifileProCreate").length&&$("body").append('<iframe id="ifileProCreate" style="display:none"></iframe>');var r=function(t){document.getElementById("ifileProCreate").src=t},a="api.ShopifyOrder.importOrderExcel",o={"@file":t};this.$apiCall(a,o,(function(t){"9999"==t.ErrorCode?(e.$elementMessage("创建成功","success"),r(t.Data.Results.file),e.dialogCreateInfo=JSON.stringify(e.dialogCreateInfoDefault),e.getItem()):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e)),e.$hideLoading()}))},openImport:function(){this.dialoImportInfo=JSON.parse(this.dialogImportInfoDefault),this.dialoImportInfo.isShow=!0},openCreate:function(){this.dialogCreateInfo=JSON.parse(this.dialogCreateInfoDefault),this.dialogCreateInfo.isShow=!0},relateFn:function(t){var e=this;this.$showLoading(),this.$apiCall("api.ShopifyOrder.setSkuRelation",{customerSku:this.dialogRelateInfo.item.variableId,customerId:this.dialogRelateInfo.item.customerId,vendorSku:t},(function(t){"9999"==t.ErrorCode?(e.$elementMessage(e.$t("orders.success"),"success"),e.dialogQuoteInfo=JSON.parse(e.dialogQuoteInfoDefault),e.dialogRelateInfo=JSON.parse(e.dialogRelateInfoDefault),e.$refs.gridTable.clearSelection(),e.getItem()):e.$elementMessage(t.Message,"error"),e.$hideLoading()}))},openRelate:function(t){var e=this;this.$showLoading(),this.$apiCall("api.VendorShop.vendorFindProducts",{page:1,rowsPerPage:10,status:1},(function(r){if("9999"==r.ErrorCode){if(!r.Data.Results.products||!r.Data.Results.products.length)return;e.dialogRelateInfo=JSON.parse(e.dialogRelateInfoDefault),e.dialogRelateInfo.isShow=!0,e.dialogRelateInfo.item=t,e.dialogRelateInfo.Pagination=r.Data.Pagination,e.dialogRelateInfo.items=[],e.dialogRelateInfo.list=[],r.Data.Results.products.forEach((function(t){t.stocks&&t.stocks.length&&t.stocks.forEach((function(r){e.$set(r,"name",t.name),e.dialogRelateInfo.items.push(r)})),e.dialogRelateInfo.list.push(t)}))}else e.$elementMessage(r.Message,"error");e.$hideLoading()}))},syncFn:function(t,e){"row"==t?this.sync(t,e):this.checkIds.length?this.sync():this.$elementMessage(this.$t("orders.selectOrder"),"error")},sync:function(t,e){var r=this,a=[];"row"==t?a.push(e.id):a=this.checkIds,this.$showLoading(),this.$apiCall("api.ShopifyOrder.setNotAbnormal",{ids:a},(function(t){"9999"==t.ErrorCode?(r.$elementMessage(r.$t("orders.success"),"success"),r.getItem()):r.$elementMessage(t.Message,"error"),r.$hideLoading()}))},payFn:function(t,e){if("row"==t)this.pay(t,e);else if(this.checkIds.length){var r=0;this.checkItems.forEach((function(t){1==t.paymentType&&r++})),r==this.checkIds.length?this.pay():this.$elementMessage("只有线下付款的订单支持确认收款","error")}else this.$elementMessage(this.$t("orders.selectOrder"),"error")},pay:function(t,e){var r=this;this.$confirm(this.$t("orders.confirmRe"),"",{confirmButtonText:this.$t("orders.confirm"),cancelButtonText:this.$t("orders.cancel"),type:""}).then((function(){var a=[];"row"==t?a.push(e.id):a=r.checkIds,r.payConfirm(a)})).catch((function(){}))},payConfirm:function(t){var e=this;return l(s().mark((function r(){var a,o;return s().wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$showLoading(),a=[],o=0;case 3:if(!(o<t.length)){r.next=9;break}return r.next=6,e.payConfirmItem(t[o]).then((function(t){a.push(t)}));case 6:o++,r.next=3;break;case 9:a.length==t.length&&(e.$elementMessage(e.$t("orders.success"),"success"),e.$hideLoading(),e.getItem());case 10:case"end":return r.stop()}}),r)})))()},payConfirmItem:function(t){var e=this;return new Promise((function(r,a){e.$apiCall("api.ShopifyOrder.setPaid",{id:t},(function(o){"9999"==o.ErrorCode?r(t):(e.$hideLoading(),e.$elementMessage(o.Message,"error"),a(t))}))}))},payCancelFn:function(t,e){"row"==t?this.payCancel(t,e):this.checkIds.length?this.payCancel():this.$elementMessage(this.$t("orders.selectOrder"),"error")},payCancel:function(t,e){var r=this;this.$confirm(this.$t("orders.payagain"),"",{confirmButtonText:this.$t("orders.confirm"),cancelButtonText:this.$t("orders.cancel"),type:""}).then((function(){var a=[];"row"==t?a.push(e.id):a=r.checkIds,r.payCanceled(a)})).catch((function(){}))},payCanceled:function(t){var e=this;return l(s().mark((function r(){var a,o;return s().wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$showLoading(),a=[],o=0;case 3:if(!(o<t.length)){r.next=9;break}return r.next=6,e.payCancelItem(t[o]).then((function(t){a.push(t)}));case 6:o++,r.next=3;break;case 9:a.length==t.length&&(e.$elementMessage(e.$t("orders.success"),"success"),e.$hideLoading(),e.getItem());case 10:case"end":return r.stop()}}),r)})))()},payCancelItem:function(t){var e=this;return new Promise((function(r,a){e.$apiCall("api.ShopifyOrder.setNotPaid",{id:t},(function(o){"9999"==o.ErrorCode?r(t):(e.$hideLoading(),e.$elementMessage(o.Message,"error"),a(t))}))}))},quoteFn:function(t,e){"row"==t?this.quote(t,e):this.checkIds.length?this.quote():this.$elementMessage(this.$t("orders.selectOrder"),"error")},quote:function(t,e){var r=this,a=[];"row"==t?a.push(e.id):a=this.checkIds,this.$showLoading(),this.$apiCall("api.ShopifyOrder.getOfferShopifyItems",{ids:a},(function(t){if("9999"==t.ErrorCode){var e=Object.values(t.Data.Results);if(!e||!e.length)return r.$hideLoading(),void r.$elementMessage("No data","error");localStorage.setItem("needQuoteOrders",JSON.stringify(e)),r.$router.push({name:"orderQuote",params:{ids:a}})}else r.$elementMessage(t.Message,"error");r.$hideLoading()}))},getStatus:function(){var t=this,e="";if(3==this.status)e=6;else if(5==this.status)e=7;else if(6==this.status)e="";else if(311==this.status)e=311;else if(15==this.status)e=15;else{var r=this.tabList.filter((function(e){return e.name==t.activeName}));e=r[0].id,2==this.status&&2==this.activeName&&(e=3)}return e},changeBackData:function(t){if(this.filterDialog.isShowDialog=t.show,t.ok){this.isFitterOrder=!0;var e={status:this.getStatus(),page:this.page,rowsPerPage:this.rowsPerPage};1==t.ok?e.codeNameList=t.order:e.orderIdList=t.order,this.filterDialog.obj=e,this.filterOrderFun(e)}},filterOrderFun:function(t){var e=this;this.$apiCall("api.ShopifyOrder.findByVendor",t,(function(t){9999==t.ErrorCode?(console.log(t.Data.Results,"asd1r.Data.Results"),e.items=t.Data.Results.searchResult,e.total=Number(t.Data.Pagination.totalCount),e.totalPage=Number(t.Data.Pagination.totalPage),e.page=t.Data.Pagination.page,t.Data.Results.noSearchList&&(e.failData.isShowDialog=!0,e.failData.obj=t.Data.Results.noSearchList)):e.$message({message:t.Message,type:"error"})}))},closeFilter:function(t){this.filterDialog.isShowDialog=t.show}},Object(d["a"])(c,"changeFail",(function(t){this.failData.isShowDialog=!1})),Object(d["a"])(c,"quoteCancelFn",(function(){var t=this;this.checkIds.length?this.$confirm(this.$t("orders.waive"),"",{confirmButtonText:this.$t("orders.confirm"),cancelButtonText:this.$t("orders.cancel"),type:""}).then((function(){t.$showLoading(),t.$apiCall("api.ShopifyOrder.cancel",{ids:t.checkIds},(function(e){"9999"==e.ErrorCode?(t.$elementMessage(t.$t("orders.success"),"success"),t.$refs.gridTable.clearSelection(),t.getItem()):t.$elementMessage(e.Message,"error"),t.$hideLoading()}))})).catch((function(){})):this.$elementMessage(this.$t("orders.selectOrder"),"error")})),Object(d["a"])(c,"handleSelectionChange",(function(t){var e=this;this.checkIds=[],this.checkItems=[],t.length&&t.forEach((function(t){e.checkItems.push(t),e.checkIds.push(t.id)}))})),Object(d["a"])(c,"dateChange",(function(){this.filterParams.date.length>1&&(this.filterParams.dateFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.dateTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem())})),Object(d["a"])(c,"dateChange2",(function(){this.filterParams.date2&&this.filterParams.date2.length>1?(this.filterParams.dateFrom2=this.$moment(this.filterParams.date2[0]).format("YYYY-MM-DD"),this.filterParams.dateTo2=this.$moment(this.filterParams.date2[1]).format("YYYY-MM-DD"),this.filterItem()):this.clearFilter("date2")})),Object(d["a"])(c,"clearFilter",(function(t){switch(t){case"codeName":this.filterParams.codeName="";break;case"orderId":this.filterParams.orderId="";break;case"receiverName":this.filterParams.receiverName="";break;case"accountIds":this.filterParams.accountIds="";break;case"relationshipId":this.filterParams.relationshipId="";break;case"date":this.filterParams.date=[],this.filterParams.dateFrom="",this.filterParams.dateTo="";break;case"date2":this.filterParams.date2=[],this.filterParams.dateFrom2="",this.filterParams.dateTo2="";break;case"sysCode":this.filterParams.sysCode="";break;default:this.filterParams=JSON.parse(this.filterParamsDefault);break}this.filterItem()})),Object(d["a"])(c,"filterItem",(function(t){1==this.$route.query.page?this.getItem():this.$router.push({path:"/ordersManage/".concat(Number(this.status),"/").concat(Number(this.activeName)),query:{page:1}})})),Object(d["a"])(c,"gettabList",(function(){switch(this.status){case 2:this.tabList=[{id:2,name:1,title:this.$t("orders.tabBar1")},{id:22,name:2,title:this.$t("orders.tabBar2")},{id:5,name:3,title:this.$t("orders.tabBar3")}];break;case 4:this.tabList=[{id:8,name:1,title:this.$t("orders.tabBar4")},{id:9,name:2,title:this.$t("orders.tabBar5")},{id:10,name:3,title:this.$t("orders.tabBar6")}];break;default:this.tabList=[];break}})),Object(d["a"])(c,"remoteMethodCustom",(function(){var t=this;this.vendorList=[],this.$apiCall("api.Relationship.findByVendor",{},(function(e){9999==e.ErrorCode?t.vendorList=e.Data.Results:t.$message({message:e.Message,type:"error"})}))})),Object(d["a"])(c,"getShopName",(function(){var t=this;this.storeList=[],this.$apiCall("api.Invoice.findStoreByVendor",{},(function(e){9999==e.ErrorCode?t.storeList=e.Data.Results:t.$message({message:e.Message,type:"error"})}))})),Object(d["a"])(c,"getVendorAllOrderCnt",(function(){var t=this;this.$apiCall("api.ShopifyOrder.getVendorAllOrderCnt",{},(function(e){9999==e.ErrorCode?t.vendorAllOrderCnt=e.Data.Results:t.$message({message:e.Message,type:"error"})}))})),Object(d["a"])(c,"getVendorOrderCnt",(function(t){var e=this;this.$apiCall("api.ShopifyOrder.getVendorAllOrderCnt",{status:5,shippingType:t},(function(r){9999==r.ErrorCode?(1==t?e.batchNum=r.Data.Results[5]:e.offlineNum=r.Data.Results[5],e.vendorAllOrderCnt=r.Data.Results):e.$message({message:r.Message,type:"error"})}))})),Object(d["a"])(c,"vendorAllOrderCntText",(function(t){var e=0;return e=22==t?this.vendorAllOrderCnt.waitVendorConfirmCnt?this.vendorAllOrderCnt.waitVendorConfirmCnt:0:this.vendorAllOrderCnt[t]?this.vendorAllOrderCnt[t]:0,e})),Object(d["a"])(c,"getItem",(function(t){var e=this;this.isFitterOrder=!1,this.gettabList(),this.remoteMethodCustom(),this.getShopName(),this.getVendorAllOrderCnt(),this.items=[];var r,a="",o="api.ShopifyOrder.findByVendor",i={page:this.page,rowsPerPage:this.rowsPerPage,status:a,dateFrom:this.filterParams.dateFrom,dateTo:this.filterParams.dateTo,accountIds:this.filterParams.accountIds?[this.filterParams.accountIds]:"",relationshipId:this.filterParams.relationshipId,orderId:this.filterParams.orderId,keywords:this.filterParams.codeName,receiverName:this.filterParams.receiverName},s={page:this.page,rowsPerPage:this.rowsPerPage,status:a,sysCode:this.filterParams.sysCode,timeCreatedFrom:this.filterParams.dateFrom2,timeCreatedTo:this.filterParams.dateTo2};if(r=i,3==this.status)a=6;else if(5==this.status)a=7;else if(6==this.status)a="",r=Object.assign(i,s);else if(311==this.status)a=311;else if(15==this.status)a=15;else{var n=this.tabList.filter((function(t){return t.name==e.activeName}));a=n[0].id,2==this.status&&2==this.activeName&&(a=3,r=s,o="api.ShopifyOrder.findByInvoice")}this.billStatus=a,r.shippingType=5==a?this.batchType:"",this.loading=!0,r.status=a,this.$apiCall(o,r,(function(r){e.loading=!1,9999==r.ErrorCode?(e.items=r.Data.Results,e.items.forEach((function(t){e.$set(t,"shippingJsonInfo",t.shippingJson?JSON.parse(t.shippingJson):""),t.accountPayment&&t.accountPayment.extJson&&(e.$set(t,"voucherUrl",t.accountPayment.extJson.voucherUrl||""),e.$set(t,"voucherUrlPreview",[t.accountPayment.extJson.voucherUrl]))})),e.total=Number(r.Data.Pagination.totalCount),e.totalPage=Number(r.Data.Pagination.totalPage),e.$getTableHeight(e),t||(e.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0)):e.$message({message:r.Message,type:"error"})})),2==this.status&&3==this.activeName&&(this.getVendorOrderCnt(1),this.getVendorOrderCnt(2))})),Object(d["a"])(c,"toPage",(function(t){this.isFitterOrder?(this.filterDialog.obj.page=t,this.filterOrderFun(this.filterDialog.obj)):t!=this.$route.query.page&&this.$router.push({path:"/ordersManage/".concat(Number(this.status),"/").concat(Number(this.activeName)),query:{page:t}})})),Object(d["a"])(c,"changePageSize",(function(t){this.rowsPerPage=t,localStorage.setItem("ordersRowsPerPage",t),this.isFitterOrder?(this.filterDialog.obj.rowsPerPage=t,this.filterOrderFun(this.filterDialog.obj)):this.getItem()})),Object(d["a"])(c,"gotoPage",(function(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()})),Object(d["a"])(c,"handleClick",(function(t,e){this.filterParams=JSON.parse(this.filterParamsDefault),this.getItem()})),c)}),It=Ct,xt=(r("1324"),r("bd3c"),Object(m["a"])(It,a,o,!1,null,"4e8d5a6d",null));e["default"]=xt.exports},ab36:function(t,e,r){"use strict";var a=r("861d"),o=r("9112");t.exports=function(t,e){a(e)&&"cause"in e&&o(t,"cause",e.cause)}},aeb0:function(t,e,r){"use strict";var a=r("9bf2").f;t.exports=function(t,e,r){r in t||a(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},afed:function(t,e,r){t.exports=r.p+"img/secretKey1.5bdafac9.png"},b584:function(t,e,r){"use strict";r("260b")},b636:function(t,e,r){"use strict";var a=r("e065");a("asyncIterator")},b980:function(t,e,r){"use strict";var a=r("d039"),o=r("5c6c");t.exports=!a((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},bbe4:function(t,e,r){},bd3c:function(t,e,r){"use strict";r("d5d4")},cd22:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:t.$t("ticket.submitTicket"),visible:t.DialogEditComment.visible,width:"800px","append-to-body":""},on:{"update:visible":function(e){return t.$set(t.DialogEditComment,"visible",e)},closed:function(e){return t.$refs.uploadFile.clearFiles()}}},[r("el-divider"),r("div",[r("el-form",{ref:"CommentForm"},[r("el-form-item",{attrs:{label:t.$t("ticket.problemsOrRequirements")}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.DialogEditComment.contents,callback:function(e){t.$set(t.DialogEditComment,"contents",e)},expression:"DialogEditComment.contents"}})],1),r("el-form-item",{attrs:{label:""}},[r("div",{staticStyle:{"font-size":"16px","font-weight":"bold",margin:"20px 0 0"}},[t._v(" "+t._s(t.$t("ticket.uploadImageAttachment"))+" ")])]),r("el-form-item",{attrs:{label:""}},[r("el-upload",{ref:"uploadFile",staticClass:"upload-file",attrs:{"on-change":t.handleChangeImg,"before-remove":t.handleRemoveImg,action:"","auto-upload":!1,accept:"image/gif,image/jpeg,image/jpg,image/png"}},[r("el-button",{ref:"uploadBtn",attrs:{size:"small",type:"primary",loading:t.DialogEditComment.uploadLoading}},[t._v(t._s(t.$t("ticket.browse")))])],1)],1)],1)],1),r("el-divider"),r("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[r("div",{staticClass:"mg-r-15"},[r("el-button",{attrs:{size:"small",type:"primary",loading:t.DialogEditComment.loading},on:{click:t.saveComment}},[t._v(t._s(t.$t("ticket.submitTicket")))])],1),r("div",[r("el-button",{attrs:{size:"small"},on:{click:function(e){t.DialogEditComment.visible=!1}}},[t._v(" "+t._s(t.$t("invoice.cancel")))])],1)])],1)},o=[],i=(r("d3b7"),r("159b"),r("b0c0"),r("a434"),{props:["DialogEditComment"],data:function(){return{}},methods:{handleRemoveImg:function(t,e){var r=this;e.forEach((function(e,a){e.name==t.name&&r.DialogEditComment.attach.splice(a,1)}))},handleChangeImg:function(t){var e=this;this.DialogEditComment.loading=!0,this.DialogEditComment.uploadLoading=!0,this.$apiCall("api.Comment.uploadAttach",{"@file":t.raw},(function(t){e.DialogEditComment.loading=!1,e.DialogEditComment.uploadLoading=!1,"9999"==t.ErrorCode?e.DialogEditComment.attach.push(t.Data.Results.url):e.$elementMessage(t.Message,"error")}))},saveComment:function(){var t=this;if(!this.DialogEditComment.contents)return this.$message({message:this.$t("invoice.emptyQuestion"),type:"error"}),!1;this.DialogEditComment.loading=!0,this.$apiCall("api.Comment.addByUser",{commentId:this.DialogEditComment.commentId,contents:this.DialogEditComment.contents,shopName:this.DialogEditComment.shopName,attach:this.DialogEditComment.attach},(function(e){t.DialogEditComment.loading=!1,9999==e.ErrorCode?(t.DialogEditComment.visible=!1,t.$message({message:t.$t("app._wewillReplyASAP"),type:"success"})):t.$message({message:e.Message,type:"error"})}))}}}),s=i,n=r("2877"),l=Object(n["a"])(s,a,o,!1,null,null,null);e["a"]=l.exports},d58f:function(t,e,r){"use strict";var a=r("59ed"),o=r("7b0b"),i=r("44ad"),s=r("07fa"),n=TypeError,l=function(t){return function(e,r,l,c){a(r);var d=o(e),u=i(d),p=s(d),f=t?p-1:0,h=t?-1:1;if(l<2)while(1){if(f in u){c=u[f],f+=h;break}if(f+=h,t?f<0:p<=f)throw new n("Reduce of empty array with no initial value")}for(;t?f>=0:p>f;f+=h)f in u&&(c=r(c,u[f],f,d));return c}};t.exports={left:l(!1),right:l(!0)}},d5d4:function(t,e,r){},d9e2:function(t,e,r){"use strict";var a=r("23e7"),o=r("da84"),i=r("2ba4"),s=r("e5cb"),n="WebAssembly",l=o[n],c=7!==new Error("e",{cause:7}).cause,d=function(t,e){var r={};r[t]=s(t,e,c),a({global:!0,constructor:!0,arity:1,forced:c},r)},u=function(t,e){if(l&&l[t]){var r={};r[t]=s(n+"."+t,e,c),a({target:n,stat:!0,constructor:!0,arity:1,forced:c},r)}};d("Error",(function(t){return function(e){return i(t,this,arguments)}})),d("EvalError",(function(t){return function(e){return i(t,this,arguments)}})),d("RangeError",(function(t){return function(e){return i(t,this,arguments)}})),d("ReferenceError",(function(t){return function(e){return i(t,this,arguments)}})),d("SyntaxError",(function(t){return function(e){return i(t,this,arguments)}})),d("TypeError",(function(t){return function(e){return i(t,this,arguments)}})),d("URIError",(function(t){return function(e){return i(t,this,arguments)}})),u("CompileError",(function(t){return function(e){return i(t,this,arguments)}})),u("LinkError",(function(t){return function(e){return i(t,this,arguments)}})),u("RuntimeError",(function(t){return function(e){return i(t,this,arguments)}}))},e391:function(t,e,r){"use strict";var a=r("577e");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:a(t)}},e3b9:function(t,e,r){},e5cb:function(t,e,r){"use strict";var a=r("d066"),o=r("1a2d"),i=r("9112"),s=r("3a9b"),n=r("d2bb"),l=r("e893"),c=r("aeb0"),d=r("7156"),u=r("e391"),p=r("ab36"),f=r("6f19"),h=r("83ab"),m=r("c430");t.exports=function(t,e,r,g){var v="stackTraceLimit",y=g?2:1,b=t.split("."),w=b[b.length-1],_=a.apply(null,b);if(_){var k=_.prototype;if(!m&&o(k,"cause")&&delete k.cause,!r)return _;var $=a("Error"),S=e((function(t,e){var r=u(g?e:t,void 0),a=g?new _(t):new _;return void 0!==r&&i(a,"message",r),f(a,S,a.stack,2),this&&s(k,this)&&d(a,this,S),arguments.length>y&&p(a,arguments[y]),a}));if(S.prototype=k,"Error"!==w?n?n(S,$):l(S,$,{name:!0}):h&&v in _&&(c(S,_,v),c(S,_,"prepareStackTrace")),l(S,_),!m)try{k.name!==w&&i(k,"name",w),k.constructor=S}catch(C){}return S}}},e667:function(t,e,r){"use strict";r("6f3a")},eeb3:function(t,e,r){"use strict";r("7c32")},fa9e:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.$t("invoice.usertoken"),visible:t.keyData.isShow,width:"800px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.keyData,"isShow",e)}}},[a("el-divider"),a("div",{staticStyle:{margin:"20px",color:"#303133"}},[a("p",[t._v(" "+t._s(t.$t("invoice.software"))+" ")])]),a("div",{staticClass:"d-body"},[a("p",[t._v(" "+t._s(t.$t("invoice.pastetoken"))+" ")]),a("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-around",margin:"15px 0"}},[a("div",{staticStyle:{width:"48%","margin-right":"2%"}},[a("p",{staticClass:"mg-y-10"},[t._v(t._s(t.$t("invoice.Picture1")))]),a("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:r("afed")}})]),a("div",{staticStyle:{width:"48%","margin-left":"2%"}},[a("p",{staticClass:"mg-y-10"},[t._v(t._s(t.$t("invoice.Picture2")))]),a("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:r("69a3")}})])]),a("p",{staticStyle:{"margin-top":"10px"}},[t._v(" "+t._s(t.$t("invoice.present"))+" "),a("el-link",{attrs:{target:"_blank",type:"primary",underline:!1,href:"//www.mabangerp.com/"}},[t._v("马帮ERP ")]),t._v(" "+t._s(t.$t("invoice.soon"))+" ")],1)]),a("div",{staticStyle:{margin:"20px",color:"rgb(153, 153, 153)"}},[a("p",[t._v(" "+t._s(t.$t("invoice.sametime"))+" "),a("el-link",{attrs:{type:"primary",underline:!1},on:{click:t.openAddComment}},[t._v(" "+t._s(t.$t("invoice.contact"))+" ")]),t._v("。 ")],1)]),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.keyData.isShow=!1}}},[t._v(" "+t._s(t.$t("importdata.gotIt"))+" ")])],1)],1)},o=[],i={props:["keyData"],data:function(){return{}},methods:{openAddComment:function(){this.$emit("openAddComment")}}},s=i,n=(r("4c55"),r("2877")),l=Object(n["a"])(s,a,o,!1,null,"af075a7e",null);e["a"]=l.exports},fb6a:function(t,e,r){"use strict";var a=r("23e7"),o=r("e8b5"),i=r("68ee"),s=r("861d"),n=r("23cb"),l=r("07fa"),c=r("fc6a"),d=r("8418"),u=r("b622"),p=r("1dde"),f=r("f36a"),h=p("slice"),m=u("species"),g=Array,v=Math.max;a({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var r,a,u,p=c(this),h=l(p),y=n(t,h),b=n(void 0===e?h:e,h);if(o(p)&&(r=p.constructor,i(r)&&(r===g||o(r.prototype))?r=void 0:s(r)&&(r=r[m],null===r&&(r=void 0)),r===g||void 0===r))return f(p,y,b);for(a=new(void 0===r?g:r)(v(b-y,0)),u=0;y<b;y++,u++)y in p&&d(a,u,p[y]);return a.length=u,a}})},fcf0:function(t,e,r){"use strict";r("49c5")}}]);