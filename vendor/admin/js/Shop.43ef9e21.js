(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Shop"],{"19f7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel role-management-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("h2",[t._v(t._s(t.$t("shop.交易币种")))])])]),a("div",{staticClass:"right"})]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"mg-b-20",staticStyle:{"font-size":"20px"}},[t._v(t._s(t.$t("shop.交易币种")))]),a("div",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("shop.用户可以选择他们的常用货币类型来与您进行交易")))]),a("div",[a("el-select",{staticClass:"mg-r-20",attrs:{placeholder:t.$t("shop.请选择一个币种"),clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addCurrency.apply(null,arguments)}},model:{value:t.selectCurrency,callback:function(e){t.selectCurrency=e},expression:"selectCurrency"}},t._l(t.currencyArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("el-link",{attrs:{type:"primary",underline:!1},on:{click:t.addCurrency}},[t._v(t._s(t.$t("shop.添加")))])],1),a("el-divider"),a("div",{staticClass:"mg-b-20",staticStyle:{"font-size":"20px"}},[t._v(t._s(t.$t("shop.已选币种")))]),t.currencyList.length>0?a("div",{staticClass:"selected-currency"},t._l(t.currencyList,(function(e){return a("div",{key:e.id,staticClass:"mg-b-30 d-flex"},[a("span",{staticClass:"mg-r-10"},[t._v("1 "+t._s(t.$store.state.country.symbol)+t._s(t.$store.state.country.shopCurrency)+" = ")]),a("el-input-number",{staticStyle:{width:"120px"},attrs:{precision:2,min:0,controls:!1},model:{value:e.rate,callback:function(a){t.$set(e,"rate",a)},expression:"info.rate"}}),a("span",{staticClass:"mg-l-5"},[t._v(t._s(t.$CE[e.name].code3))]),a("i",{staticClass:"el-icon-circle-close close",on:{click:function(a){return t.delCurrency(e)}}})],1)})),0):a("div",{staticClass:"none"},[t._v(t._s(t.$t("shop.暂无已选币种")))]),a("el-divider"),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v(t._s(t.$t("shop.保存")))])],1)],1)],1)],1)],1)],1)])},i=[],o=(a("d3b7"),a("159b"),a("a434"),{data:function(){return{selectCurrency:"",loading:!1,currencyArr:[{name:"AUD",id:"1"},{name:"EGP",id:"2"},{name:"RUB",id:"3"},{name:"COP",id:"4"},{name:"CAD",id:"5"},{name:"EUR",id:"6"},{name:"JPY",id:"7"},{name:"CNY",id:"8"},{name:"GBP",id:"9"},{name:"INR",id:"10"}],currencyList:[],isAdd:!0,isSave:!0}},mounted:function(){this.$store.state.userInfo.vendorCurrency&&(this.currencyList=this.$store.state.userInfo.vendorCurrency)},methods:{addCurrency:function(){var t=this;this.isAdd=!0,this.selectCurrency?(this.currencyList&&this.currencyList.length>0&&this.currencyList.forEach((function(e){e.id==t.selectCurrency&&(t.isAdd=!1,t.$elementMessage(t.$t("shop.不能选择重复币种"),"error"))})),this.isAdd&&this.isRe()):this.$elementMessage(this.$t("shop.请选择一个币种"),"error")},delCurrency:function(t){var e=this;this.$confirm(this.$t("shop.确定删除此币种?"),"",{confirmButtonText:this.$t("shop.确定"),cancelButtonText:this.$t("shop.取消"),type:"warning"}).then((function(){e.currencyList.forEach((function(a,s){a==t&&e.currencyList.splice(s,1)})),e.$message({type:"success",message:e.$t("shop.删除成功")})})).catch((function(){}))},isRe:function(){var t=this;this.currencyArr.forEach((function(e){e.id==t.selectCurrency&&(e.rate=void 0,t.currencyList.push(e))}))},save:function(){var t=this;this.isSave=!0,this.currencyList.forEach((function(e){if(!e.rate)return t.$elementMessage(t.$t("shop.请输入汇率"),"error"),void(t.isSave=!1)})),this.isSave&&(this.loading=!0,this.$apiCall("api.User.changeVendorConfig",{vendorCurrency:this.currencyList},(function(e){t.loading=!1,9999==e.ErrorCode?(t.$root.$children[0].routerCheckLogin(),t.$elementMessage(t.$t("shop.该货币类型已生效"),"success")):t.$elementMessage(e.Message,"error")})))}},components:{}}),r=o,l=(a("9790"),a("2877")),n=Object(l["a"])(r,s,i,!1,null,"072bb762",null);e["default"]=n.exports},"1ab7":function(t,e,a){"use strict";a("4633")},"1dfd":function(t,e,a){"use strict";a("2850")},2850:function(t,e,a){},39344:function(t,e,a){},"3c15":function(t,e,a){},4633:function(t,e,a){},"4c55":function(t,e,a){"use strict";a("e3b9")},5413:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel role-management-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("h2",[t._v(t._s(t.$t("shop.角色管理")))])])]),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary",disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{click:t.addRole}},[t._v(t._s(t.$t("shop.添加角色")))])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"pageFilter",staticClass:"page-filter"},[a("el-table",{ref:"gridTable2",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:"","row-key":"id"}},[a("el-table-column",{attrs:{label:t.$t("shop.员工角色"),prop:"name"}}),a("el-table-column",{attrs:{label:t.$t("shop.描述"),prop:"remark"}}),a("el-table-column",{attrs:{label:t.$t("shop.员工数据"),prop:"subUserCnt"}}),a("el-table-column",{attrs:{label:t.$t("shop.操作")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary"},on:{click:function(a){return t.view(e.row)}}},[t._v(" "+t._s(t.$t("shop.查看"))+" ")])]}}])})],1)],1)])],1)],1)],1)],1)],1),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}],attrs:{"append-to-body":"","close-on-click-modal":!1,visible:t.addRoleVis,width:"50%",title:t.roleDetailVis?t.$t("shop.角色详情"):t.$t("shop.添加角色")},on:{close:t.closeVis}},[a("el-divider"),a("div",[a("el-form",{staticClass:"mg-b-15",attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:t.$t("shop.角色名称"),required:""}},[a("el-input",{attrs:{placeholder:t.$t("shop.请输入角色名称，如高级管理员，普通管理员等")},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:t.$t("shop.角色描述")}},[a("el-input",{attrs:{placeholder:t.$t("shop.至多输入50个汉字"),maxlength:"50"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),a("el-form-item",{attrs:{label:t.$t("shop.权限"),required:""}},[a("div",{staticStyle:{height:"280px",overflow:"auto"}},[a("el-tree",{key:t.addRoleVis,ref:"roleTree",staticClass:"mg-t-15",attrs:{"default-expand-all":t.addRoleVis,data:t.treeData,props:t.defaultProps,"node-key":"key","show-checkbox":""},on:{"check-change":t.handleCheckChange}})],1)])],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addRoleVis=!1}}},[t._v(t._s(t.$t("shop.取消")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v(t._s(t.$t("shop.保存"))+" ")])],1)],1)],1)},i=[],o=(a("b0c0"),a("d3b7"),a("159b"),a("4de4"),{data:function(){return{roleId:"",roleDetailVis:!1,treeData:[],defaultProps:{label:"name",children:"subMenu"},form:{name:"",remark:""},loading:!1,dialogLoading:!1,addRoleVis:!1,items:[],roleArr:[],roleList:[],checkedRole:[],changeRole:!1}},mounted:function(){this.getRole(),this.getRightArr()},methods:{closeVis:function(){this.addRoleVis=!1,this.roleId="",this.form.name="",this.form.remark="",this.roleArr=[],this.checkedRole=[],this.$refs.roleTree.setCheckedKeys(this.checkedRole),this.roleDetailVis=!1},getRole:function(){var t=this;this.loading=!0,this.$apiCall("api.UserRole.findByUser",{},(function(e){t.loading=!1,9999==e.ErrorCode?t.items=e.Data.Results:t.$message({message:e.Message,type:"error"})}))},getRightArr:function(){var t=this;this.$apiCall("api.UserRole.getSystemRights",{},(function(e){9999==e.ErrorCode?(t.treeData=e.Data.Results.rights,t.roleList=e.Data.Results.endpoint):t.$message.error(e.Message)}))},handleCheckChange:function(){this.changeRole=!0;var t=this.$refs.roleTree.getCheckedKeys(!0),e=[];0!=t.length?this.roleList.forEach((function(a){-1==t.indexOf(a)&&e.push(a)})):this.changeRole=!1,this.roleArr=e},view:function(t){var e=this;this.roleId=t.id,this.form.name=t.name,this.form.remark=t.remark,this.roleArr=t.rights,this.checkedRole=this.roleList.filter((function(t){return!e.roleArr.some((function(e){return e===t}))})),this.roleDetailVis=!0,this.addRoleVis=!0,this.$nextTick((function(){e.$refs.roleTree.setCheckedKeys(e.checkedRole)}))},addRole:function(){this.addRoleVis=!0},save:function(){var t=this;return this.form.name?this.changeRole||0!=this.roleArr.length?void(this.roleDetailVis?(this.dialogLoading=!0,this.$apiCall("api.UserRole.changeUserRole",{name:this.form.name,remark:this.form.remark,rights:this.roleArr,id:this.roleId},(function(e){9999==e.ErrorCode?(t.dialogLoading=!1,t.getRole(),t.addRoleVis=!1,t.$message({message:t.$t("shop.修改成功"),type:"success"})):t.$message({message:e.Message,type:"error"})}))):(this.dialogLoading=!0,this.$apiCall("api.UserRole.addUserRole",{name:this.form.name,remark:this.form.remark,rights:this.roleArr},(function(e){t.dialogLoading=!1,9999==e.ErrorCode?(t.getRole(),t.addRoleVis=!1,t.$message({message:t.$t("shop.保存成功"),type:"success"})):t.$message({message:e.Message,type:"error"})})))):(this.$message({message:this.$t("shop.请选择权限"),type:"error"}),!1):(this.$message({message:this.$t("shop.请填写角色名称"),type:"error"}),!1)}},components:{}}),r=o,l=a("2877"),n=Object(l["a"])(r,s,i,!1,null,"817feeea",null);e["default"]=n.exports},5538:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.authData.isShow,title:t.$t("orders.mabang"),width:"800px"},on:{"update:visible":function(e){return t.$set(t.authData,"isShow",e)}}},[a("el-divider"),a("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[a("div",[a("div",{staticClass:"mg-y-20"},[a("span",{staticStyle:{margin:"0 16px",display:"inline-block"}},[t._v(t._s(t.$t("invoice.tokenerp")))]),t.isStaff?[a("span",{staticClass:"mg-r-10"},[t._v(" "+t._s(t.authData.staffData&&t.authData.staffData.secretKey?t.authData.staffData.secretKey:"---")+" ")]),t.authData.staffData&&t.authData.staffData.secretKey?a("el-button",{attrs:{size:"mini",type:"text"}},[a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.authData.staffData.secretKey,expression:"authData.staffData.secretKey",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()]:[a("span",{staticClass:"mg-r-10"},[t._v(t._s(t.$store.state.userInfo&&t.$store.state.userInfo.secretKey?t.$store.state.userInfo.secretKey:"---"))]),t.$store.state.userInfo&&t.$store.state.userInfo.secretKey?a("el-button",{attrs:{size:"mini",type:"text"}},[a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.$store.state.userInfo.secretKey,expression:"$store.state.userInfo.secretKey",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"mini",type:"text"},on:{click:t.openSecretKey}},[t._v(" "+t._s(t.$t("invoice.usertoken"))+" ")])],2),a("el-alert",{attrs:{title:t.isStaff?t.$t("invoice.将员工令牌授权到马帮ERP之前"):t.$t("invoice.如果已经在erp授权了员工令牌"),type:"warning",closable:!1}})],1)]),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.authData.isShow=!1}}},[t._v("取消")])],1)],1)},i=[],o=(a("4de4"),a("d3b7"),a("99af"),a("a9e3"),{props:["authData","isStaff"],data:function(){return{shopName:"",invoiceInfo:{}}},methods:{openSecretKey:function(){this.$emit("openSecretKey")},querySearch:function(t,e){var a=this.authData.shopData,s=t?a.filter(this.createFilter(t)):a;e(s)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.shopName=t.value},onCopy:function(t){this.$elementMessage(this.$t("successfullyToClipboard"),"success")},onError:function(t){this.$elementMessage(this.$t("failedToClipboard"),"error")},confirmMoneyFn:function(){var t=this;this.tempCode="".concat(this.invoiceInfo.id).concat(Date.parse(new Date)),this.$apiCall("api.Invoice.setSyncToErp",{invoiceId:this.invoiceInfo.id,shopName:this.shopName,tempCode:this.tempCode},(function(t){})),this.DialogLoadingCnt.loadingCnt=0,this.DialogLoadingCnt.isShow=!0,this.getInvocieTime=setInterval((function(){t.$apiCall("api.Invoice.checkPriceResult",{tempCode:t.tempCode,type:4},(function(e){if("9999"==e.ErrorCode){var a=e.Data.Results;Number(a.count)&&Number(a.total)&&(t.DialogLoadingCnt.loadingCnt=a.count/a.total),1!=a.status&&(t.tempCode="",clearInterval(t.getInvocieTime),t.DialogLoadingCnt.isShow=!1,3==a.status&&t.$elementMessage(a.message,"error"),2==a.status&&(t.$elementMessage(t.$t("invoice.storeSet"),"success"),t.confirmMoneyOpen=!1,t.getData()))}}))}),1e3)}}}),r=o,l=a("2877"),n=Object(l["a"])(r,s,i,!1,null,"63bb7ade",null);e["a"]=n.exports},"5e8a":function(t,e,a){},"69a3":function(t,e,a){t.exports=a.p+"img/secretKey2.9602a74a.jpg"},"6f91f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"contentpanel edit-goods-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.goto()}}},[t._v("返回到域名管理")]),a("span",{staticStyle:{margin:"0 20px"}},[t._v("/")]),a("h2",[t._v("添加域名")])],1)]),a("div",{staticClass:"right"})]),a("div",{staticClass:"pagebody"},[a("el-card",[a("div",{staticStyle:{padding:"20px 200px"}},[a("el-steps",{attrs:{active:t.active,"finish-status":"success"}},[a("el-step",{attrs:{title:t.$t("shop.输入域名")}}),a("el-step",{attrs:{title:t.$t("shop.解析域名")}}),a("el-step",{attrs:{title:t.$t("shop.完成")}})],1)],1),t.active<3?a("div",{staticClass:"bind"},[t.isSure?a("div",{staticClass:"input-domain"},[a("b",{staticStyle:{"font-size":"18px",color:"#333"}},[t._v(t._s(t.$t("shop.域名")))]),a("p",{staticClass:"d-flex"},[a("span",{staticStyle:{"font-size":"18px",color:"#666",height:"36px"}},[t._v(t._s(t.linkUrl))]),a("el-link",{staticClass:"mg-l-20",attrs:{type:"primary"},on:{click:function(e){return t.changUrl(!1)}}},[t._v(t._s(t.$t("shop.修改"))+" ")])],1),t.isSuccess?a("p",{staticClass:"mg-t-20"},[t._v(" "+t._s(t.$t("shop.请登录您的域名服务提供商，参照下述表格修改域名的DNS设置。由于域名绑定需要一定时间后才能生效，请添加之后，稍等片刻再来查看是否连接成功。"))+" ")]):t._e()]):a("div",{staticClass:"input-domain"},[a("p",[t._v(t._s(t.$t("shop.绑定已有域名")))]),a("p",[t._v(t._s(t.$t("shop.你可以在Godaddy、阿里云等域名服务商处购买第三方域名，并输入到此处。")))]),a("p",{staticClass:"mg-t-20"},[a("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:t.$t("shop.请输入")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changUrl(!0)}},model:{value:t.linkUrl,callback:function(e){t.linkUrl=e},expression:"linkUrl"}}),a("el-link",{staticClass:"mg-l-20",attrs:{type:"primary"},on:{click:function(e){return t.changUrl(!0)}}},[t._v(t._s(t.$t("shop.确定")))])],1),a("p",{staticClass:"mg-t-20"},[t._v(" "+t._s(t.$t("shop.请登录您的域名服务提供商，参照下述表格修改域名的DNS设置。由于域名绑定需要一定时间后才能生效，请添加之后，稍等片刻再来查看是否连接成功。"))+" ")])]),a("div",{staticClass:"mg-t-20 input-domain"},[t.isSuccess?t._e():[a("el-alert",{attrs:{closable:!1,title:t.errorText,type:"error","show-icon":""}}),a("div",{staticClass:"mg-t-10 mg-b-10"},[t._v(" "+t._s(t.$t("shop.请前往你的域名服务商处，参照下述表格添加或修改域名的DNS设置。修改后一般10分钟左右生效，若验证不通过请检查记录值或再次验证。"))+" ")])],a("el-table",{ref:"gridTable",attrs:{data:t.items,border:"","row-key":"id"}},[a("el-table-column",{attrs:{prop:"type",label:t.$t("shop.记录类型")}}),a("el-table-column",{attrs:{prop:"record",label:t.$t("shop.主机记录")}}),a("el-table-column",{attrs:{prop:"ip",label:t.$t("shop.当前记录值")}}),a("el-table-column",{attrs:{prop:"correctIp",label:t.$t("shop.正确记录值")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.correctIp)+" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.correctIp,expression:"scope.row.correctIp",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-cc-copy copy"})]}}],null,!1,1666784182)})],1)],2),a("p",{staticClass:"tx-center mg-t-30"},[a("el-button",{staticStyle:{"margin-right":"50px"},on:{click:t.goto}},[t._v(" "+t._s(t.$t("shop.取消"))+" ")]),a("el-button",{attrs:{type:"primary",disabled:!t.isSure},on:{click:t.save}},[t._v(" "+t._s(this.isSuccess?t.$t("shop.解析域名"):t.$t("shop.再次解析"))+" ")])],1)]):a("div",{staticClass:"finish",staticStyle:{height:"400px","padding-top":"50px"}},[a("el-result",{attrs:{icon:"success",title:t.$t("shop.绑定成功"),subTitle:t.$t("shop.OurMall 将为你的域名激活SSL安全证书，根据域名服务商不同，最快加密时间10分钟，最晚24小时后自动生效")}})],1)])],1)])},i=[],o=a("2909"),r=(a("d3b7"),a("159b"),a("7db0"),{data:function(){return{errorText:"",isSuccess:!0,isSure:!1,active:0,pageLoading:!1,linkUrl:"",items:[{type:"A",record:"@",ip:"",correctIp:"172.65.227.72"},{type:"CNAME",record:"WWW",ip:"www.hongniu.com",correctIp:"vip.xxxx.store"}]}},components:{},computed:{},methods:{changUrl:function(t){this.isSure=t,this.active=t?1:0},onCopy:function(){this.$elementMessage(this.$t("mycustomer.copiedSuccess"),"success")},onError:function(){this.$elementMessage(this.$t("mycustomer.copiedFailed"),"error")},goto:function(){this.$router.push("/domain")},save:function(){var t=this;this.pageLoading=!0,this.$apiCall("api.VendorShop.shopUrlResolution",{url:this.linkUrl},(function(e){if(t.pageLoading=!1,9999==e.ErrorCode){var a=e.Data.Results;t.items.forEach((function(t,e){t.ip=a[e].ip,t.correctIp=a[e].correctIp,t.type=a[e].type})),t.items=Object(o["a"])(t.items),t.active=2,t.add()}else t.isSuccess=!1,t.active=1,t.errorText=e.Message,t.$message({message:e.Message,type:"error"})}))},add:function(){var t=this,e=this.items.find((function(t){return"A"==t.type}));e.ip==e.correctIp?this.$apiCall("api.VendorShop.addShopUrl",{url:this.linkUrl},(function(e){9999==e.ErrorCode?(t.$message({message:t.$t("shop.添加成功"),type:"success"}),t.active=3):(t.active=2,t.$message({message:e.Message,type:"error"}))})):this.$message.error("解析失败，A记录值不正确")}}}),l=r,n=(a("c46b"),a("2877")),c=Object(n["a"])(l,s,i,!1,null,null,null);e["default"]=c.exports},"6f9a":function(t,e,a){"use strict";a("97ce")},"78ce":function(t,e,a){"use strict";a("ba22")},"88d1":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel shop-set-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-dianpushezhi"}),a("h2",[t._v(t._s(t.$t("shop.刊登平台")))])])]),a("div",{staticClass:"right"})]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},t._l(t.platformLists,(function(e){return a("div",{key:e.id,staticClass:"p-4 mt-60"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"font-medium text-20"},[t._v(t._s(e.name))])]),a("el-col",{attrs:{span:16}},[a("el-switch",{model:{value:e.switch,callback:function(a){t.$set(e,"switch",a)},expression:"item.switch"}})],1)],1),a("el-row",[a("el-card",{staticClass:"box-card mt-20"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"img_box border-solid"},[a("el-image",{attrs:{src:e.src,fit:"contain",lazy:""}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[a("i",{staticClass:"el-icon-picture-outline"})])])],1),a("div",{staticClass:"flex-grow flex_box text-16 font-medium"},[t._v(" "+t._s(e.title)+" ")])])])],1)],1)})),0)])},i=[],o=(a("d81d"),{data:function(){return{loading:!1,value:!0,src:"https://global.mabangerp.com/main_refactor/image/ico/ico_shopee.jpg",platformList:[{id:1,name:"Shopify",switch:1,src:"https://global.mabangerp.com/main_refactor/image/ico/ico_shopee.jpg",title:"新增一个刊登平台管理菜单，作为店铺设置下的子菜单。（对应的角色管理下，需要加上这个菜单 刊登平台，仅查看，可操作）"},{id:2,name:"Woocommerce",switch:1,src:"https://global.mabangerp.com/main_refactor/image/ico/ico_shopee.jpg",title:"新增一个刊登平台管理菜单，作为店铺设置下的子菜单。（对应的角色管理下，需要加上这个菜单 刊登平台，仅查看，可操作）"},{id:3,name:"Shopee",switch:1,src:"https://global.mabangerp.com/main_refactor/image/ico/ico_shopee.jpg",title:"新增一个刊登平台管理菜单，作为店铺设置下的子菜单。（对应的角色管理下，需要加上这个菜单 刊登平台，仅查看，可操作）"}],platformLists:[]}},mounted:function(){this.getPlatformList()},methods:{getPlatformList:function(){var t=this.platformList.map((function(t){return 1==t.switch?t.switch=!0:t.switch=!1,t}));this.platformLists=t}}}),r=o,l=(a("78ce"),a("2877")),n=Object(l["a"])(r,s,i,!1,null,"7b0fc76e",null);e["default"]=n.exports},"94c7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("h2",{staticStyle:{"font-size":"16px"}},[a("i",{staticClass:"el-icon-collection"}),a("span",[a("strong",[t._v(t._s(t.$t("ticket.票类设置")))])])]),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"type",label:t.$t("ticket.类型"),align:"center",width:"180"}},[[a("span",[t._v("发票")])]],2),a("el-table-column",{attrs:{prop:"model",label:t.$t("ticket.使用模板"),align:"center",width:"180"}},[a("span",[t._v("模板一")])]),a("el-table-column",{attrs:{prop:"logo",label:t.$t("ticket.发票logo"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.logo,fit:"fit"}})]}}])}),a("el-table-column",{attrs:{prop:"address",align:"center",label:t.$t("ticket.公司地址")}}),a("el-table-column",{attrs:{prop:"language",align:"center",label:t.$t("ticket.语言")}}),a("el-table-column",{attrs:{prop:"status",align:"center",label:t.$t("ticket.状态")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?t.$t("ticket.启用"):t.$t("ticket.停用")))])]}}])}),a("el-table-column",{attrs:{align:"center",label:t.$t("ticket.操作")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.edit(e.row)}}},[t._v(t._s(t.$t("ticket.编辑")))])]}}])})],1)],1),a("el-dialog",{attrs:{title:t.$t("ticket.发票设置"),visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e},open:function(e){return t.open()}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:t.$t("ticket.使用模板")}},[a("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v(t._s(t.form.type)+" "),a("el-radio",{attrs:{label:"1"}},[t._v("模板一")])],1)],1),a("el-form-item",{attrs:{label:t.$t("ticket.公司地址")}},[a("el-input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),a("el-form-item",{attrs:{label:t.$t("ticket.发票logo")}},[a("div",{staticClass:"up-avatar"},[a("el-upload",{ref:"elupload",staticClass:"avatar-uploader",attrs:{action:"#","http-request":t.httpRequest,"show-file-list":!1,"before-upload":t.beforeAvatarUpload,"on-remove":t.handleRemove}},[t.form.logo?a("img",{staticClass:"avatar",attrs:{src:t.form.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),a("el-form-item",{attrs:{label:t.$t("ticket.发票语言")}},[a("el-radio-group",{model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}},[a("el-radio",{attrs:{label:"CN"}},[t._v(t._s(t.$t("ticket.中文")))]),a("el-radio",{attrs:{label:"GE"}},[t._v(t._s(t.$t("ticket.德文")))])],1)],1),a("el-form-item",{attrs:{label:t.$t("ticket.状态")}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{attrs:{label:t.$t("ticket.启用"),value:"1"}}),a("el-option",{attrs:{label:t.$t("ticket.停用"),value:"2"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("ticket.取消")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.changeTicket}},[t._v(t._s(t.$t("ticket.确定")))])],1)],1)],1)},i=[],o=(a("b0c0"),a("d3b7"),a("159b"),a("a434"),a("ac1f"),a("1276"),a("466d"),{components:{},data:function(){return{dialogVisible:!1,form:{address:"",id:"",type:"",logo:"https://upload.ourmall.com/user/helpDoc/3ef25cda5aae0828b8b4af13f103be62.png",language:"CN",logoImage:[],status:"1"},tableData:[],fileBase64:"",imgName:"",nowFile:""}},computed:{},watch:{},methods:{edit:function(t){this.form={id:t.id,address:t.address,type:"1",logo:t.logo,language:t.language,logoImage:t.logo?[{name:"logo",url:t.logo}]:[],status:t.status},this.dialogVisible=!0},open:function(){console.log(this.form,"this.form")},beforeAvatarUpload:function(t){console.log(t),this.imgName=t.name,this.nowFile=t},handleRemoveOtherERPDialog:function(t,e){var a=this;e.forEach((function(e,s){e.name==t.name&&a.form.logo.splice(s,1)}))},httpRequest:function(t){var e=this,a="image/jpeg"===t.file.type||"image/jpg"===t.file.type||"image/png"===t.file.type,s=t.file.size/1024/1024<2;a?s?this.getBase64(t.file).then((function(t){e.fileBase64=t.split(",")[1];var a=t.match(/data:image\/(.*);base64,.*/)[1];console.log(e.tempUrl,"this.tempUrl"),e.getUploadImgUrl(e.fileBase64,a)})):this.$message.error("上传文件大小不能超过 2MB!"):this.$message.error("上传头像图片只能是 JPG、PNG、JPEG 格式!")},getUploadImgUrl:function(t,e){var a=this;this.$apiCall("api.Comment.uploadImg",{imgUrlBase64:t,ext:e},(function(t){9999==t.ErrorCode?a.form.logo=t.Data.Results.imgUrl:a.$message({message:t.Message,type:"error"})}))},getBase64:function(t){return new Promise((function(e,a){var s=new FileReader,i="";s.readAsDataURL(t),s.onload=function(){i=s.result},s.onerror=function(t){a(t)},s.onloadend=function(){e(i)}}))},handleRemove:function(t,e){},getBil:function(){var t=this;this.$apiCall("api.BillSet.get",{},(function(e){9999==e.ErrorCode?(t.tableData=e.Data.Results,console.log(e.Data,"25415")):t.$message({message:e.Message,type:"error"})}))},changeTicket:function(){var t=this,e={id:this.form.id,status:this.form.status,language:this.form.language,model:this.form.model,address:this.form.address,logo:this.form.logo};this.$apiCall("api.BillSet.change",e,(function(e){9999==e.ErrorCode?(t.dialogVisible=!1,t.getBil()):t.$message({message:e.Message,type:"error"})}))}},created:function(){this.getBil()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}}),r=o,l=(a("a5cd"),a("2877")),n=Object(l["a"])(r,s,i,!1,null,"036f5a14",null);e["default"]=n.exports},9790:function(t,e,a){"use strict";a("39344")},"97ce":function(t,e,a){},a5cd:function(t,e,a){"use strict";a("ab66")},ab66:function(t,e,a){},afed:function(t,e,a){t.exports=a.p+"img/secretKey1.5bdafac9.png"},b12d:function(t,e,a){"use strict";a("5e8a")},ba22:function(t,e,a){},bc52:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel role-management-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("h2",[t._v(t._s(t.$t("shop.域名管理")))])])]),a("div",{staticClass:"right"})]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"pageFilter",staticClass:"page-filter"},[a("div",{staticClass:"main-name"},[a("div",[a("div",{staticClass:"mg-b-20"},[t._v(t._s(t.$t("shop.主域名")))]),a("div",[t._v(t._s(t.mainUrl||t.subDomain)+" "),t.mainUrl?t._e():a("span",[t._v(t._s(t.$t("shop.（OurMall提供）")))])])]),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.changeMain}},[t._v(" "+t._s(t.$t("shop.更改主域名"))+" ")])],1)]),a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("h2",[t._v(t._s(t.$t("shop.多域名管理")))])])]),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addDomain}},[t._v(" "+t._s(t.$t("shop.添加域名"))+" ")])],1)]),a("el-table",{ref:"gridTable2",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:"","row-key":"id"}},[a("el-table-column",{attrs:{label:t.$t("shop.域名"),prop:"url"}}),a("el-table-column",{attrs:{label:t.$t("shop.操作"),width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.delDomain(e.row)}}},[t._v(" "+t._s(t.$t("shop.删除"))+" ")])]}}])})],1)],1)])],1)],1)],1)],1),t.items.length?a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[a("div",[a("el-pagination",{attrs:{"current-page":t.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),a("el-dialog",{attrs:{visible:t.visibleDomain,width:"400px"},on:{"update:visible":function(e){t.visibleDomain=e},close:t.closeSelectAssign}},[a("div",{staticClass:"tx-center dialog-content",staticStyle:{padding:"20px"}},[t.visibleDomain?[a("el-select",{staticClass:"mg-r-15",attrs:{remote:"",placeholder:t.$t("shop.请选择域名")},model:{value:t.changeUrl,callback:function(e){t.changeUrl=e},expression:"changeUrl"}},t._l(t.allItems,(function(t,e){return a("el-option",{key:e,attrs:{label:t.url,value:t.url}})})),1)]:t._e()],2),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeSelectAssign}},[t._v(t._s(t.$t("shop.取消")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.changeMainDomain}},[t._v(t._s(t.$t("shop.确定")))])],1)])],1)},i=[],o=(a("a9e3"),a("b0c0"),{data:function(){return{mainUrl:"",oldUrl:"",name:"",changeUrl:"",visibleDomain:!1,subDomain:"",loading:!1,items:[],allItems:[],pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("myDomainPerPage")?Number(localStorage.getItem("myDomainPerPage")):10,total:0,totalPage:0}},watch:{$route:"gotoPage"},mounted:function(){this.getItems()},methods:{closeSelectAssign:function(){this.visibleDomain=!1,this.allItems=[]},getVonders:function(){var t=this;this.$apiCall("api.VendorShop.getByVendor",{},(function(e){if(9999==e.ErrorCode){var a=e.Data.Results;t.name=a.name,t.mainUrl=a.url,t.oldUrl=t.subDomain=window.location.host.indexOf("sandbox")>=0?"sandbox".concat(a.name,".myourmall.com"):"".concat(a.name,".myourmall.com"),t.subDomain?t.subDomain=window.location.host.indexOf("sandbox")>=0?"sandbox".concat(a.subDomain,".myourmall.com"):"".concat(a.subDomain,".myourmall.com"):t.subDomain=t.oldUrl}}))},toPage:function(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},changePageSize:function(t){this.rowsPerPage=t,localStorage.setItem("myDomainPerPage",t),this.getItems()},gotoPage:function(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItems()},getAllItems:function(){var t=this;this.$apiCall("api.VendorShop.getShopUrlList",{},(function(e){9999==e.ErrorCode&&(t.allItems=e.Data.Results,t.allItems.push({url:t.oldUrl}))}))},getItems:function(t){var e=this;this.loading=!0,this.$apiCall("api.VendorShop.getShopUrlList",{page:this.page,rowsPerPage:this.rowsPerPage},(function(a){e.loading=!1,9999==a.ErrorCode&&(e.items=a.Data.Results,e.getVonders(),e.total=Number(a.Data.Pagination.totalCount),e.totalPage=Number(a.Data.Pagination.totalPage),t||(e.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0))}))},addDomain:function(){this.$router.push("/add-domain")},delDomain:function(t){var e=this;this.$confirm(this.$t("shop.确定删除该域名？"),this.$t("products.删除"),{confirmButtonText:this.$t("products.删除"),cancelButtonText:this.$t("products.取消"),type:"warning"}).then((function(){e.$apiCall("api.VendorShop.deleteShopUrl",{id:t.id},(function(t){9999==t.ErrorCode?(e.getItems(),e.$message({message:e.$t("shop.删除成功"),type:"success"})):e.$message({message:t.Message,type:"error"})}))}))},changeMain:function(){this.getAllItems(),this.visibleDomain=!0},changeMainDomain:function(){var t=this;this.$apiCall("api.VendorShop.changeShopUrl",{url:this.changeUrl,setDefault:this.changeUrl==this.oldUrl?"1":void 0},(function(e){9999==e.ErrorCode?(t.getVonders(),t.visibleDomain=!1,t.$message({message:t.$t("shop.更换成功"),type:"success"})):t.$message({message:e.Message,type:"error"})}))}},components:{}}),r=o,l=(a("b12d"),a("2877")),n=Object(l["a"])(r,s,i,!1,null,"46d4b570",null);e["default"]=n.exports},c414:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel edit-goods-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.goto()}}},[t._v(t._s(t.$t("shop.返回到店铺设置")))]),a("span",{staticStyle:{margin:"0 20px"}},[t._v("/")]),a("h2",[t._v(t._s(t.$t("shop.shopify 应用更换")))])],1)]),a("div",{staticClass:"right"})]),a("div",{staticClass:"pagebody"},[a("el-card",{staticClass:"bind"},[a("p",{staticClass:"mg-b-30",staticStyle:{"font-size":"18px"}},[t._v(t._s(t.$t("shop.请联系您对接的销售提交更换应用所需要的资料，我们会在尽快 为您提供更换应用服务；")))]),a("p",{staticClass:"mg-b-20",staticStyle:{"font-size":"16px"}},[t._v(t._s(t.$t("shop.需准备资料：")))]),a("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("shop.set1")))]),a("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("shop.set2")))]),a("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("shop.set3")))]),a("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("shop.set4")))]),a("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("shop.set5")))]),a("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("shop.set6")))]),a("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("shop.set7")))]),a("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("shop.set8")))])])],1)])},i=[],o={data:function(){return{}},methods:{goto:function(){this.$router.push("/Shop")}}},r=o,l=(a("1dfd"),a("2877")),n=Object(l["a"])(r,s,i,!1,null,null,null);e["default"]=n.exports},c46b:function(t,e,a){"use strict";a("3c15")},c730:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel role-management-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("h2",[t._v(t._s(t.$t("shop.汇率设置")))])])]),a("div",{staticClass:"right"})]),a("div",{staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-alert",{attrs:{title:t.$t("shop.商品价格=填写价格×商品系数÷汇率，结果保留2位小数"),type:"warning",closable:!1}}),a("p",{staticStyle:{"margin-bottom":"10px"}}),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",[t._v(" "+t._s(t.$t("shop.汇率"))+" "),a("el-input-number",{staticStyle:{width:"200px"},attrs:{placeholder:t.$t("shop.请输入有效数值"),min:0,precision:2},model:{value:t.form.Rate,callback:function(e){t.$set(t.form,"Rate",e)},expression:"form.Rate"}}),t._v(" "+t._s(t.$t("shop.系数"))+" "),a("el-input-number",{staticStyle:{width:"200px"},attrs:{placeholder:t.$t("shop.请输入有效数值"),min:0,precision:2},model:{value:t.form.ratio,callback:function(e){t.$set(t.form,"ratio",e)},expression:"form.ratio"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(t._s(t.$t("shop.确定")))])],1)],1)],1)],1)],1)],1)],1)],1)])},i=[],o={data:function(){return{form:{Rate:"",ratio:""}}},mounted:function(){this.getRea()},methods:{onSubmit:function(){var t=this;this.$apiCall("api.User.setExchangeRate",{exchangeRate:this.form.Rate,productCoefficient:this.form.ratio},(function(e){"9999"==e.ErrorCode?t.$elementMessage(e.Message,"success"):t.$elementMessage(e.Message,"error")}))},getRea:function(){var t=this;this.$apiCall("api.User.getUserConfig",{},(function(e){"9999"==e.ErrorCode?(t.form.Rate=e.Data.Results.exchangeRate,t.form.ratio=e.Data.Results.productCoefficient):t.$elementMessage(e.Message,"error")}))}},components:{}},r=o,l=a("2877"),n=Object(l["a"])(r,s,i,!1,null,"ebb79400",null);e["default"]=n.exports},cad8:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel staff-management-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("h2",[t._v(t._s(t.$t("shop.员工管理")))]),a("div",{staticClass:"mg-l-20"},[t._v(t._s(t.$t("package.当前版本支持添加员工数为：{num1}个，还可再添加{num2}个",{num1:t.$root.$children[0].vipNowDetail.subUserCnt,num2:t.$root.$children[0].vipNowDetail.nowSubUserCnt}))+" ")])])]),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary",disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{click:function(e){return t.addStaff()}}},[t._v(" "+t._s(t.$t("shop.添加员工")))])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"pageFilter",staticClass:"page-filter"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:t.$t("shop.角色")}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:t.$t("mycustomer.all")},on:{change:t.filterItem},model:{value:t.filterParams.roleId,callback:function(e){t.$set(t.filterParams,"roleId",e)},expression:"filterParams.roleId"}},[a("el-option",{attrs:{label:t.$t("mycustomer.all"),value:""}}),t._l(t.roleList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),a("el-form-item",[a("el-input",{attrs:{placeholder:t.$t("shop.输入员工账号或姓名"),clearable:""},on:{clear:function(e){return t.clearFilter("name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem()}},model:{value:t.filterParams.nameLike,callback:function(e){t.$set(t.filterParams,"nameLike",e)},expression:"filterParams.nameLike"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.filterItem()}}},[t._v(t._s(t.$t("mycustomer.filter")))]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.clearFilter()}}},[t._v(t._s(t.$t("mycustomer.clear")))])],1)],1)],1)])],1),a("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:"","row-key":"id"}},[a("el-table-column",{attrs:{label:t.$t("shop.员工账号"),prop:"username"}}),a("el-table-column",{attrs:{label:t.$t("shop.员工姓名"),prop:"name"}}),a("el-table-column",{attrs:{label:t.$t("shop.员工联系方式"),prop:"email"}}),a("el-table-column",{attrs:{label:t.$t("shop.角色")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.roleChange(e.row.roleId))+" ")]}}])}),a("el-table-column",{attrs:{label:t.$t("shop.操作")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-link",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary"},on:{click:function(a){return t.addStaff(e.row)}}},[t._v(t._s(t.$t("shop.编辑")))]),a("el-link",{staticClass:"mg-l-20",attrs:{type:"primary"},on:{click:function(a){return t.openAuth(e.row)}}},[t._v(" "+t._s(t.$t("invoice.token")))])],1),a("div")]}}])})],1)],1)],1)],1),t.items.length?a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[a("div",[a("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),a("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:t.addStaffVis,width:"50%",title:t.editStaff?t.$t("shop.编辑员工信息"):t.$t("shop.添加员工")},on:{close:t.closeVis}},[a("div",[a("el-divider"),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.addLoading,expression:"addLoading"}],staticClass:"mg-b-15",attrs:{"label-width":"120px"}},[t.editStaff?t._e():[a("el-form-item",{attrs:{label:t.$t("shop.员工账号"),required:""}},[a("el-input",{attrs:{placeholder:t.$t("shop.请输入员工注册时的邮箱/手机号码")},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),a("div",{staticStyle:{color:"#909399"}},[t._v(" "+t._s(t.$t("shop.员工使用该手机号作为帐号即可登录后台"))+" ")])],1),a("el-form-item",{attrs:{label:t.$t("shop.账号密码"),required:""}},[a("el-input",{attrs:{placeholder:t.$t("shop.请输入员工账号的密码"),"show-password":"","auto-complete":"new-password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],a("el-form-item",{attrs:{label:t.$t("shop.员工姓名"),required:""}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:t.$t("shop.员工联系方式")}},[a("el-input",{attrs:{placeholder:t.$t("shop.请输入邮箱/手机号码")},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:t.$t("shop.所属角色"),required:""}},[a("el-select",{staticStyle:{width:"300px"},attrs:{filterable:""},model:{value:t.form.roleId,callback:function(e){t.$set(t.form,"roleId",e)},expression:"form.roleId"}},t._l(t.roleList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("span",{staticClass:"mg-l-10"},[t._v("暂无角色？前往 "),a("span",{staticStyle:{color:"#5c6ac4",cursor:"pointer"},on:{click:t.goAddRole}},[t._v("添加角色")])])],1),a("el-form-item",{attrs:{label:t.$t("shop.员工数据")}},[a("vue-tags-input",{attrs:{tags:t.form.tags,placeholder:t.$t("shop.请输入邮箱")},on:{"tags-changed":t.tagsChange},model:{value:t.tagIpt,callback:function(e){t.tagIpt=e},expression:"tagIpt"}}),a("div",[t._v(t._s(t.$t("shop.可通过指定客户限制员工查看客户相关页面数据")))])],1)],2)],1),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addStaffVis=!1}}},[t._v(t._s(t.$t("shop.取消")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v(" "+t._s(t.$t("shop.保存"))+" ")])],1)],1),a("el-dialog",{attrs:{visible:t.dialogVipUp,width:"400px"},on:{close:function(e){t.dialogVipUp=!1}}},[a("el-divider"),a("div",{staticStyle:{padding:"20px","font-size":"18px","line-height":"36px"}},[t._v(" 您当前添加员工的数量已达"+t._s(t.$root.$children[0].vipNowDetail.subUserCnt)+" 个，是否进行套餐升级？")]),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVipUp=!1}}},[t._v(t._s(t.$t("shop.取消")))])],1)],1),a("dialoAuth",{attrs:{authData:t.dialoAuthInfo,isStaff:1},on:{openSecretKey:t.openSecretKey}}),a("dialogKey",{attrs:{keyData:t.dialoKeyInfo},on:{openAddComment:t.openAddComment}}),a("DialogEditComment",{attrs:{DialogEditComment:t.DialogEditComment}})],1)},i=[],o=(a("a9e3"),a("e9c4"),a("d81d"),a("d3b7"),a("159b"),a("b0c0"),a("ac1f"),a("1276"),a("5538")),r=a("fa9e"),l=a("cd22"),n=a("c7a0"),c=a.n(n),d={data:function(){return{dialoAuthInfo:{isShow:!1,loading:!1,shopData:[],staffData:""},dialogAuthInfoDefault:"{}",dialoKeyInfo:{isShow:!1,loading:!1},dialogKeyInfoDefault:"{}",DialogEditComment:{loading:!1,uploadLoading:!1,visible:!1,contents:"",shopName:"",attach:[],commentId:"",item:null},DialogEditCommentDefault:"{}",dialogVipUp:!1,staffId:"",multipleSelection:[],editStaff:!1,isSelectItems:!1,allCheckedData:!1,form:{username:"",password:"",name:"",email:"",roleId:"",tags:[]},tagIpt:"",pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("staffPerPage")?Number(localStorage.getItem("staffPerPage")):10,total:0,totalPage:0,addLoading:!1,addStaffVis:!1,items:[],loading:!1,filterParams:{roleId:"",nameLike:"",username:""},roleList:[]}},watch:{allChecked:function(){this.allCheckedData=this.allChecked},$route:"gotoPage"},mounted:function(){this.dialogAuthInfoDefault=JSON.stringify(this.dialoAuthInfo),this.dialogKeyInfoDefault=JSON.stringify(this.dialoKeyInfo),this.DialogEditCommentDefault=JSON.stringify(this.DialogEditComment),this.getItem(),this.getRole()},methods:{openAddComment:function(){this.$refs.uploadFile&&this.$refs.uploadFile.clearFiles(),this.DialogEditComment=JSON.parse(this.DialogEditCommentDefault),this.DialogEditComment.visible=!0},openSecretKey:function(){this.dialoKeyInfo=JSON.parse(this.dialogKeyInfoDefault),this.dialoKeyInfo.isShow=!0},openAuth:function(t){this.dialoAuthInfo=JSON.parse(this.dialogAuthInfoDefault),this.dialoAuthInfo.shopData=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).erpShops:[],this.dialoAuthInfo.staffData=JSON.parse(JSON.stringify(t)),this.dialoAuthInfo.isShow=!0},tagsChange:function(t){this.form.tags=t.map((function(t){return t}))},goAddRole:function(){this.$router.push({path:"/Role"})},goToUP:function(){this.$router.push({name:"pricingUp"})},roleChange:function(t){var e="";return this.roleList.forEach((function(a){t==a.id&&(e=a.name)})),e},getRole:function(){var t=this;this.$apiCall("api.UserRole.findByUser",{},(function(e){9999==e.ErrorCode?t.roleList=e.Data.Results:t.$message({message:e.Message,type:"error"})}))},closeVis:function(){this.editStaff=!1,this.staffId="",this.form={username:"",password:"",name:"",email:"",roleId:""},this.addStaffVis=!1},delItem:function(t){var e=this;this.$confirm(this.$t("shop.确定删除该员工吗?"),"Tips",{confirmButtonText:this.$t("shop.确定"),cancelButtonText:this.$t("shop.取消"),type:"warning"}).then((function(){e.$apiCall("api.SubUser.deleteByUser",{id:t.id},(function(t){9999==t.ErrorCode?(e.$message({message:e.$t("shop.删除成功"),type:"success"}),e.getItem()):e.$message({message:t.Message,type:"error"})}))})).catch((function(){return!1}))},allChange:function(){var t=this;this.items.forEach((function(e){t.$set(e,"checked",t.allCheckedData)}))},toPage:function(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},changePageSize:function(t){this.rowsPerPage=t,localStorage.setItem("staffPerPage",t),this.getItem()},gotoPage:function(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()},getItem:function(){var t=this;this.loading=!0,this.$apiCall("api.SubUser.findByUser",{page:this.page,rowsPerPage:this.rowsPerPage,nameLike:this.filterParams.nameLike,roleId:this.filterParams.roleId,username:this.filterParams.username},(function(e){t.loading=!1,9999==e.ErrorCode?(t.items=e.Data.Results,t.total=Number(e.Data.Pagination.totalCount),t.totalPage=Number(e.Data.Pagination.totalPage),t.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0):t.$message({message:e.Message,type:"error"})}))},filterItem:function(){1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},clearFilter:function(t){t||(this.filterParams.roleId=""),this.filterParams.nameLike="",1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},addStaff:function(t){var e=this;if(this.form.tags=[],t){this.staffId=t.id,this.editStaff=!0,this.form.name=t.name,this.form.email=t.email,this.form.roleId=t.roleId;var a=t.relationCustomer?t.relationCustomer.split(","):[];a.length&&a.forEach((function(t){e.form.tags.push({text:t,tiClasses:["ti-valid"]})}))}this.addStaffVis=!0},save:function(){var t=this,e={};if(this.editStaff){if(e={ids:this.staffId,name:this.form.name,email:this.form.email,roleId:this.form.roleId},!this.form.name)return this.$message({message:this.$t("shop.请输入员工姓名"),type:"error"}),!1;if(!this.form.roleId)return this.$message({message:this.$t("shop.请选择所属角色"),type:"error"}),!1}else{if(e=this.form,!this.form.username)return this.$message({message:this.$t("shop.请输入员工账号"),type:"error"}),!1;if(!this.form.password)return this.$message({message:this.$t("shop.请输入员工账号的密码"),type:"error"}),!1;if(!this.form.roleId)return this.$message({message:this.$t("shop.请选择所属角色"),type:"error"}),!1}var a=this.form.tags.map((function(t){return t.text}));e.relationCustomer=a,this.$apiCall(this.editStaff?"api.SubUser.changeByUser":"api.SubUser.insertByUser",e,(function(e){9999==e.ErrorCode?(t.addStaffVis=!1,t.editStaff=!1,t.getItem(),t.$root.$children[0].getVipDetail(),t.$message({message:t.$t("shop.保存成功"),type:"success"})):202120803==e.ErrorCode?t.dialogVipUp=!0:t.$message({message:e.Message,type:"error"})}))}},components:{dialoAuth:o["a"],dialogKey:r["a"],DialogEditComment:l["a"],VueTagsInput:c.a}},m=d,p=(a("6f9a"),a("2877")),u=Object(p["a"])(m,s,i,!1,null,"73cc9214",null);e["default"]=u.exports},cd1c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel shop-set-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-dianpushezhi"}),a("h2",[t._v(t._s(t.$t("shop.店铺设置")))])])]),a("div",{staticClass:"right"})]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-form",{ref:"shopForm",staticClass:"inner",attrs:{model:t.form,rules:t.rulesReg}},[a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:t.$t("shop.店铺名称"),prop:"name"}},[a("el-input",{attrs:{maxlength:"36",minlength:"3",disabled:!0,"show-word-limit":"",placeholder:t.$t("shop.请输入店铺名称")},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:t.$t("shop.店铺链接")}},[!t.form.url&&t.apiSubUserId?a("el-input",{attrs:{disabled:""},model:{value:t.form.subDomain+"/home?invitationCode="+t.invitationCode,callback:function(e){t.$set(t.form,"subDomain+'/home?invitationCode='+invitationCode",e)},expression:"form.subDomain+'/home?invitationCode='+invitationCode"}}):t.form.url&&t.apiSubUserId?a("el-input",{attrs:{disabled:""},model:{value:t.form.url+"/home?invitationCode="+t.invitationCode,callback:function(e){t.$set(t.form,"url+'/home?invitationCode='+invitationCode",e)},expression:"form.url+'/home?invitationCode='+invitationCode"}}):t.form.url?a("el-input",{attrs:{disabled:""},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}):a("el-input",{attrs:{disabled:""},model:{value:t.form.subDomain,callback:function(e){t.$set(t.form,"subDomain",e)},expression:"form.subDomain"}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("shop.查看店铺"),placement:"top-start"}},[a("i",{staticClass:"el-icon-view view",on:{click:t.goMyStore}})])],1),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"当前店铺在shopify应用"}},[a("el-input",{attrs:{disabled:""},model:{value:t.form.accountStoreName,callback:function(e){t.$set(t.form,"accountStoreName",e)},expression:"form.accountStoreName"}})],1),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:t.$t("shop.店铺邮箱"),prop:"email"}},[a("el-input",{attrs:{placeholder:t.$t("shop.请输入店铺邮箱")},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),a("div",{staticClass:"tip"},[t._v(t._s(t.$t("shop.如有需要，我们会通过此邮箱来联系您")))])],1),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:t.$t("shop.店主手机号"),prop:"phone"}},[a("el-input",{attrs:{placeholder:t.$t("shop.请输入店主手机号")},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:t.$t("shop.工信部备案号")}},[a("el-input",{attrs:{placeholder:t.$t("shop.请输入")},model:{value:t.form.referenceNumber,callback:function(e){t.$set(t.form,"referenceNumber",e)},expression:"form.referenceNumber"}})],1),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:t.$t("shop.店铺头像")}},[a("div",{staticClass:"upload",on:{click:t.uploadOpen}},[t.form.logo?a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.form.logo,fit:"cover"}}):a("i",{staticClass:"el-icon-plus"})],1),a("div",{staticClass:"tip"},[t._v(t._s(t.$t("shop.Support the format of image/jpeg, image/png，One picture utmost, each cannot beyond 1 MB, general size 50x50 PX")))])]),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:t.$t("shop.财务邮箱"),prop:"financialEmail"}},[a("el-input",{attrs:{placeholder:t.$t("shop.请输入财务邮箱")},model:{value:t.form.financialEmail,callback:function(e){t.$set(t.form,"financialEmail",e)},expression:"form.financialEmail"}}),a("div",{staticClass:"tip"},[t._v(t._s(t.$t("shop.用于存在费用争议时联系的邮箱，请务必填")))])],1),a("el-form-item",[a("el-button",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary"},on:{click:t.save}},[t._v(" "+t._s(t.$t("shop.保存"))+" ")])],1)],1)],1)],1)],1)],1),a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"imgFile",accept:".jpg,.png,.gif"},on:{change:function(e){return t.Base64(e)}}}),a("el-dialog",{attrs:{visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"tx-center dialog-content",staticStyle:{padding:"30px 0 50px","font-size":"18px"}},[a("span",[t._v("很抱歉，该版本无法修改域名，请升级版本")]),a("el-link",{staticStyle:{position:"relative",top:"-3px",left:"2px","font-size":"18px"},attrs:{type:"primary"},on:{click:t.gotoUp}},[t._v("去升级")])],1)])],1)},i=[],o=(a("e9c4"),a("99af"),a("b0c0"),a("ac1f"),a("00b4"),a("5319"),a("466d"),a("1276"),{data:function(){return{invitationCode:"",apiSubUserId:null,dialogVisible:!1,loading:!1,form:{name:"",accountStoreName:"",subDomain:"",email:"",phone:"",logo:"",referenceNumber:"",financialEmail:"",url:""},rulesReg:{name:[{required:!0,message:this.$t("shop.请输入店铺名称"),trigger:"blur"},{pattern:/^[A-Za-z0-9]{3,35}$/,message:this.$t("shop.店铺名称格式错误"),trigger:"blur"}],email:[{pattern:/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,message:this.$t("shop.邮箱格式错误"),trigger:"blur"}],financialEmail:[{pattern:/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,message:this.$t("shop.邮箱格式错误"),trigger:"blur"},{required:!0,message:this.$t("shop.请输入财务邮箱"),trigger:"blur"}],phone:[{pattern:/^1[34578]\d{9}$/,message:this.$t("shop.手机号格式错误"),trigger:"blur"}]}}},mounted:function(){console.log(this.$isRole("shopEdit")),this.getVonders()},created:function(){localStorage.getItem("apiSubUserId")&&(this.apiSubUserId=JSON.parse(localStorage.getItem("apiSubUserId")))},methods:{gotoUp:function(){this.$router.push("/pricingUp")},saveStoreLogo:function(){var t=this,e=JSON.parse(JSON.stringify(this.$store.state.configJson.header));e.logo=this.form.logo,this.$store.commit("setStoreHeader",e),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},(function(e){9999==e.ErrorCode||t.$message({message:e.Message,type:"error"})}))},goMyStore:function(){this.form.url&&this.apiSubUserId?window.open("//".concat(this.form.url,"/?invitationCode=").concat(this.invitationCode)):!this.form.url&&this.apiSubUserId?window.open("//".concat(this.form.subDomain,"/?invitationCode=").concat(this.invitationCode)):this.form.url?window.open("//".concat(this.form.url)):window.open("//".concat(this.form.subDomain))},save:function(){var t=this;this.$refs.shopForm.validate((function(e){if(e){t.loading=!0;var a=t.form;a.subDomain=a.name,t.$apiCall("api.VendorShop.changeByVendor",a,(function(e){if(t.loading=!1,9999==e.ErrorCode){var a=JSON.parse(JSON.stringify(t.$store.state.configJson.header));a.logo=t.form.logo,t.$store.commit("setStoreHeader",a),t.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(t.$store.state.configJson)},(function(e){if(9999==e.ErrorCode){var a,s=/^localhost:/,i=/^sandbox/,o=".myourmall.com";if("/admin"!=t.$root.$children[0].baseUrl&&(o=".myourmall.com/admin"),s.test(window.location.host))t.$router.go(0);else a=i.test(window.location.host)?window.location.href.replace(window.location.host,"//sandbox".concat(t.form.name).concat(o)):window.location.href.replace(window.location.host,"//".concat(t.form.name).concat(o)),window.location="".concat(a);t.$message({message:t.$t("shop.保存成功"),type:"success"})}else t.$message({message:e.Message,type:"error"})}))}else t.$message({message:e.Message,type:"error"})}))}}))},getVonders:function(){var t=this;this.loading=!0,this.$apiCall("api.VendorShop.getByVendor",{},(function(e){if(t.loading=!1,9999==e.ErrorCode){var a=e.Data.Results;t.invitationCode=a.invitationCode||"",t.form.name=a.name,t.form.subDomain?t.form.subDomain=window.location.host.indexOf("sandbox")>=0?"sandbox".concat(a.subDomain,".myourmall.com"):"".concat(a.subDomain,".myourmall.com"):t.form.subDomain=window.location.host.indexOf("sandbox")>=0?"sandbox".concat(a.name,".myourmall.com"):"".concat(a.name,".myourmall.com"),t.form.email=a.email?a.email:t.$store.state.userInfo.email,t.form.url=a.url,t.form.phone=a.phone,t.form.accountStoreName=a.accountStoreName||"ourmall app",t.form.logo=a.logo,t.form.financialEmail=a.financialEmail,t.form.referenceNumber=a.referenceNumber}else t.$message({message:e.Message,type:"error"})}))},uploadOpen:function(){document.getElementById("imgFile").click()},Base64:function(t){var e=this;if(t.target.value){if(t.target.files[0].size/1024/1024>1)return void this.$message({message:"上传文件不能大于1MB",type:"error"});var a=new FileReader,s=new Image,i="";a.onload=function(t){s.src=t.target.result;var a=t.target.result.match(/data:image\/(.*);base64,.*/);i=a[1],e.uploadImgBase64(t.target.result.split(",").pop(),i)},a.readAsDataURL(t.target.files[0])}},uploadImgBase64:function(t,e){var a=this;this.loading=!0,this.$apiCall("api.User.uploadImgBase64",{imgUrlBase64:t,ext:e},(function(t){a.loading=!1,9999==t.ErrorCode?a.form.logo=t.Data.Results.imgUrl:a.$message.error(t.Message)}))},tip:function(t){this.$root.$children[0].vipDetail.service?t?this.$router.push("/shopifyApp"):this.$router.push("/domain"):this.dialogVisible=!0}},components:{}}),r=o,l=(a("1ab7"),a("2877")),n=Object(l["a"])(r,s,i,!1,null,"51b168e6",null);e["default"]=n.exports},cd22:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.$t("ticket.submitTicket"),visible:t.DialogEditComment.visible,width:"800px","append-to-body":""},on:{"update:visible":function(e){return t.$set(t.DialogEditComment,"visible",e)},closed:function(e){return t.$refs.uploadFile.clearFiles()}}},[a("el-divider"),a("div",[a("el-form",{ref:"CommentForm"},[a("el-form-item",{attrs:{label:t.$t("ticket.problemsOrRequirements")}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.DialogEditComment.contents,callback:function(e){t.$set(t.DialogEditComment,"contents",e)},expression:"DialogEditComment.contents"}})],1),a("el-form-item",{attrs:{label:""}},[a("div",{staticStyle:{"font-size":"16px","font-weight":"bold",margin:"20px 0 0"}},[t._v(" "+t._s(t.$t("ticket.uploadImageAttachment"))+" ")])]),a("el-form-item",{attrs:{label:""}},[a("el-upload",{ref:"uploadFile",staticClass:"upload-file",attrs:{"on-change":t.handleChangeImg,"before-remove":t.handleRemoveImg,action:"","auto-upload":!1,accept:"image/gif,image/jpeg,image/jpg,image/png"}},[a("el-button",{ref:"uploadBtn",attrs:{size:"small",type:"primary",loading:t.DialogEditComment.uploadLoading}},[t._v(t._s(t.$t("ticket.browse")))])],1)],1)],1)],1),a("el-divider"),a("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"mg-r-15"},[a("el-button",{attrs:{size:"small",type:"primary",loading:t.DialogEditComment.loading},on:{click:t.saveComment}},[t._v(t._s(t.$t("ticket.submitTicket")))])],1),a("div",[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.DialogEditComment.visible=!1}}},[t._v(" "+t._s(t.$t("invoice.cancel")))])],1)])],1)},i=[],o=(a("d3b7"),a("159b"),a("b0c0"),a("a434"),{props:["DialogEditComment"],data:function(){return{}},methods:{handleRemoveImg:function(t,e){var a=this;e.forEach((function(e,s){e.name==t.name&&a.DialogEditComment.attach.splice(s,1)}))},handleChangeImg:function(t){var e=this;this.DialogEditComment.loading=!0,this.DialogEditComment.uploadLoading=!0,this.$apiCall("api.Comment.uploadAttach",{"@file":t.raw},(function(t){e.DialogEditComment.loading=!1,e.DialogEditComment.uploadLoading=!1,"9999"==t.ErrorCode?e.DialogEditComment.attach.push(t.Data.Results.url):e.$elementMessage(t.Message,"error")}))},saveComment:function(){var t=this;if(!this.DialogEditComment.contents)return this.$message({message:this.$t("invoice.emptyQuestion"),type:"error"}),!1;this.DialogEditComment.loading=!0,this.$apiCall("api.Comment.addByUser",{commentId:this.DialogEditComment.commentId,contents:this.DialogEditComment.contents,shopName:this.DialogEditComment.shopName,attach:this.DialogEditComment.attach},(function(e){t.DialogEditComment.loading=!1,9999==e.ErrorCode?(t.DialogEditComment.visible=!1,t.$message({message:t.$t("app._wewillReplyASAP"),type:"success"})):t.$message({message:e.Message,type:"error"})}))}}}),r=o,l=a("2877"),n=Object(l["a"])(r,s,i,!1,null,null,null);e["a"]=n.exports},e3b9:function(t,e,a){},fa9e:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:t.$t("invoice.usertoken"),visible:t.keyData.isShow,width:"800px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.keyData,"isShow",e)}}},[s("el-divider"),s("div",{staticStyle:{margin:"20px",color:"#303133"}},[s("p",[t._v(" "+t._s(t.$t("invoice.software"))+" ")])]),s("div",{staticClass:"d-body"},[s("p",[t._v(" "+t._s(t.$t("invoice.pastetoken"))+" ")]),s("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-around",margin:"15px 0"}},[s("div",{staticStyle:{width:"48%","margin-right":"2%"}},[s("p",{staticClass:"mg-y-10"},[t._v(t._s(t.$t("invoice.Picture1")))]),s("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:a("afed")}})]),s("div",{staticStyle:{width:"48%","margin-left":"2%"}},[s("p",{staticClass:"mg-y-10"},[t._v(t._s(t.$t("invoice.Picture2")))]),s("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:a("69a3")}})])]),s("p",{staticStyle:{"margin-top":"10px"}},[t._v(" "+t._s(t.$t("invoice.present"))+" "),s("el-link",{attrs:{target:"_blank",type:"primary",underline:!1,href:"//www.mabangerp.com/"}},[t._v("马帮ERP ")]),t._v(" "+t._s(t.$t("invoice.soon"))+" ")],1)]),s("div",{staticStyle:{margin:"20px",color:"rgb(153, 153, 153)"}},[s("p",[t._v(" "+t._s(t.$t("invoice.sametime"))+" "),s("el-link",{attrs:{type:"primary",underline:!1},on:{click:t.openAddComment}},[t._v(" "+t._s(t.$t("invoice.contact"))+" ")]),t._v("。 ")],1)]),s("el-divider"),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.keyData.isShow=!1}}},[t._v(" "+t._s(t.$t("importdata.gotIt"))+" ")])],1)],1)},i=[],o={props:["keyData"],data:function(){return{}},methods:{openAddComment:function(){this.$emit("openAddComment")}}},r=o,l=(a("4c55"),a("2877")),n=Object(l["a"])(r,s,i,!1,null,"af075a7e",null);e["a"]=n.exports}}]);