(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addCode"],{"8acf":function(e,t,s){},cabb:function(e,t,s){"use strict";s("8acf")},f7ae:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"contentpanel transaction-page"},[s("el-link",{staticClass:" mg-r-20",attrs:{icon:"el-icon-back",underline:!1},on:{click:e.returnCode}},[e._v(e._s(e.$t("storecode.title")))]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pagebody"},[s("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[s("el-col",{attrs:{span:24}},[s("h2",[e._v(e._s("edit"!==e.type?e.$t("storecode.addtitle"):e.$t("storecode.editTitle")))]),s("el-card",[s("p",[e._v(e._s(e.$t("storecode.codename")))]),s("el-divider"),s("el-input",{attrs:{type:"text",placeholder:e.$t("storecode.nameplace"),maxlength:"60","show-word-limit":""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),s("el-card",{staticClass:"mg-t-20"},[s("p",[e._v(e._s(e.$t("storecode.codecontent")))]),s("el-divider"),s("el-input",{attrs:{type:"textarea",rows:"6",placeholder:e.$t("storecode.contentplace")},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),s("div",{staticClass:"tap-wrap mg-t-20"},[s("el-card",[s("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[s("span",[e._v(e._s(e.$t("storecode.tap")))]),s("el-link",{staticClass:" mg-l-20",attrs:{type:"primary",underline:!1},on:{click:e.openDrawer}},[e._v(e._s(e.$t("storecode.edit")))])],1),s("el-divider"),s("div",[e.form.pages.length?s("div",e._l(e.form.pages,(function(t,o){return s("span",{key:o,staticStyle:{"margin-right":"10px"}},[e._v(" "+e._s(t)+" ")])})),0):s("div",[e._v(e._s(e.$t("storecode.tapplace")))])])],1)],1),s("div",{staticClass:"tap-wrap mg-t-20 mg-l-20"},[s("el-card",[s("p",[e._v(" "+e._s(e.$t("storecode.position"))+" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("storecode.positontip"),placement:"right"}},[s("el-link",{staticClass:" mg-l-20",attrs:{type:"primary",underline:!1,icon:"el-icon-question"}})],1)],1),s("el-divider"),s("el-radio-group",{model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}},[s("el-radio",{attrs:{label:e.$t("storecode.top")}}),s("el-radio",{attrs:{label:e.$t("storecode.bottom")}})],1)],1)],1),s("el-divider"),s("div",{staticClass:"mg-t-20",staticStyle:{"text-align":"right"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("storecode.save")))])],1)],1)],1)],1),s("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:20}}),s("el-drawer",{attrs:{title:"请选择触发页面",visible:e.drawer,"with-header":!1},on:{"update:visible":function(t){e.drawer=t}}},[s("div",{staticStyle:{padding:"30px"}},[s("p",{staticStyle:{"margin-bottom":"30px","font-size":"16px"}},[e._v(e._s(e.$t("storecode.selecttap")))]),s("el-divider"),s("div",[s("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(e._s(e.$t("storecode.selectall"))+" ")]),s("div",{staticStyle:{margin:"20px 0"}}),s("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.checkedItems,callback:function(t){e.checkedItems=t},expression:"checkedItems"}},e._l(e.pages,(function(t){return s("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1),s("div",{staticStyle:{"margin-top":"100px"}},[s("el-button",{on:{click:function(t){e.drawer=!1}}},[e._v(e._s(e.$t("storecode.cancel")))]),s("el-button",{attrs:{type:"primary"},on:{click:e.saveDrawer}},[e._v(e._s(e.$t("storecode.save")))])],1)],1)])],1)},i=[],a=(s("10dd"),s("87d5"),{data:function(){return{loading:!1,form:{name:"",desc:"",position:"",pages:[]},drawer:!1,checkAll:!1,checkedItems:[],pages:[this.$t("storecode.page1"),this.$t("storecode.page2"),this.$t("storecode.page3"),this.$t("storecode.page4"),this.$t("storecode.page6")],isIndeterminate:!0,configJson:[],type:""}},components:{},watch:{},mounted:function(){this.getConfig(),console.log(this.$route.params);var e=this.$route.params.items;this.type=this.$route.params.type,"edit"==this.type&&(this.form.name=e.name,this.form.desc=e.desc,this.form.position=e.position,this.form.pages=e.pages,this.checkedItems=e.pages)},methods:{getConfig:function(){var e=this;this.$apiCall("api.VendorShop.getShopConfig",{},(function(t){9999==t.ErrorCode&&t.Data.Results.header&&e.$store.commit("getStoreComponent",t.Data.Results)}))},handleCheckAllChange:function(e){this.checkedItems=e?this.pages:[],this.isIndeterminate=!1},handleCheckedChange:function(e){var t=e.length;this.checkAll=t===this.pages.length,this.isIndeterminate=t>0&&t<this.pages.length},openDrawer:function(){this.drawer=!0},saveDrawer:function(){this.form.pages=this.checkedItems,this.drawer=!1},onSubmit:function(){var e=this,t={id:this.$moment().unix(),name:this.form.name,desc:this.form.desc,position:this.form.position,pages:this.form.pages};"edit"==this.type?(t.id=this.$route.params.id,this.$store.commit("editCustomCode",t)):this.$store.commit("addCustomCode",t),this.loading=!0,this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},(function(t){e.loading=!1,9999==t.ErrorCode?(e.$elementMessage(e.$t("storecode.success"),"success"),e.$router.go(-1)):e.$message({message:t.Message,type:"error"})}))},returnCode:function(){this.$router.go(-1)}}}),r=a,n=(s("cabb"),s("cba8")),c=Object(n["a"])(r,o,i,!1,null,"970d6016",null);t["default"]=c.exports}}]);