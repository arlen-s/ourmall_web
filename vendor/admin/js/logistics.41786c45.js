(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["logistics"],{"19c0":function(t,e,i){t.exports=i.p+"img/none-logistics.bbdcb2c3.webp"},"2a98":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contentpanel logistics-page"},[s("div",{ref:"pageHeader",staticClass:"pagetitle"},[s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[s("i",{staticClass:"el-icon-guide"}),s("h2",[t._v(t._s(t.$t("logistics.运费设置")))])])]),s("div",{staticClass:"right"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.setPostageAmount()}}},[t._v(t._s(t.$t("logistics.免邮规则设置")))]),s("el-button",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary",size:"small"},on:{click:function(e){return t.goto("settingsLogistics")}}},[t._v(t._s(t.$t("logistics.添加区域方案")))])],1)]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[s("el-card",[t.items.length?s("div",{staticClass:"table-wrap"},[s("el-table",{ref:"AreaShippingTable",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:""}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-table",{attrs:{data:e.row.shippings,border:""}},[s("el-table-column",{attrs:{label:t.$t("logistics.方案名称"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"tx-ellipsis1"},[t._v(t._s(e.row.name))])]}}],null,!0)}),s("el-table-column",{attrs:{label:t.$t("logistics.运费"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("TableFreight",{attrs:{item:t.row}})]}}],null,!0)}),s("el-table-column",{attrs:{label:t.$t("logistics.时效天数")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.agingDaysBegin)+" - "+t._s(e.row.agingDaysEnd)+" "+t._s(t.$t("logistics.天"))+" ")]}}],null,!0)}),s("el-table-column",{attrs:{label:t.$t("logistics.商品属性")},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.productType,(function(e,i){return s("div",{key:i},[t._v(" "+t._s(t.$dict.productType[e]?t.$t(t.$dict.productType[e].text):"")+" ")])}))}}],null,!0)}),s("el-table-column",{attrs:{label:t.$t("logistics.计算规则"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("TableWeight",{attrs:{item:t.row}})]}}],null,!0)})],1)]}}],null,!1,2969296439)}),s("el-table-column",{attrs:{label:t.$t("logistics.方案名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}],null,!1,2507105690)}),s("el-table-column",{attrs:{label:t.$t("logistics.国家地区")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$t("logistics.包含"))+" "+t._s(t.showCountryName(e.row.countrys[0]))),e.row.countrys.length>1?s("span",[t._v(" "+t._s(t.$t("logistics.等")))]):t._e(),t._v(" "),s("b",[t._v(t._s(e.row.countrys.length))]),t._v(" "+t._s(t.$t("logistics.个国家"))+" ")]}}],null,!1,1764586825)}),s("el-table-column",{attrs:{label:t.$t("logistics.操作"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-link",{staticClass:"mg-r-15",attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary"},on:{click:function(i){return t.editAreaShipping(e.row)}}},[t._v(t._s(t.$t("logistics.编辑方案")))]),s("el-link",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"danger"},on:{click:function(i){return t.delAreaShipping(e.row,e.$index)}}},[t._v(t._s(t.$t("logistics.删除")))])]}}],null,!1,3262264462)})],1)],1):s("div",{staticClass:"none-list"},[s("img",{staticStyle:{"margin-bottom":"40px",width:"360px",height:"232px"},attrs:{src:i("19c0")}}),s("p",{staticStyle:{"margin-bottom":"15px","font-weight":"bold","font-size":"16px"}},[t._v(t._s(t.$t("logistics.请设置你的物流方案")))]),s("p",{staticStyle:{"margin-bottom":"50px",color:"#909399"}},[t._v(t._s(t.$t("logistics.开始设置并完善你的运费方案，以便顾客轻松选择最合适的运费方案，获得更好的购物体验。")))]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.goto("settingsLogistics")}}},[t._v(t._s(t.$t("logistics.添加区域方案")))])],1)])],1),s("el-dialog",{attrs:{title:"免邮规则",visible:t.dialogVisibleAmount,width:"30%","before-close":t.closeDialogA},on:{"update:visible":function(e){t.dialogVisibleAmount=e},open:t.openAut}},[s("el-row",[s("el-col",{staticStyle:{padding:"0 20px"}},[s("p",[t._v("当订单商品总价大于等于（包含）"),s("el-input",{staticStyle:{width:"70px"},attrs:{placeholder:"0.00"},on:{input:function(e){return t.limitInput(e)}},model:{value:t.amounts,callback:function(e){t.amounts=e},expression:"amounts"}}),t._v("时免邮")],1),s("p",{staticClass:"tips-trip"},[t._v("温馨提示：订单总金额计算仅为购物车商品总售价")])])],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeDialogA}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.saveAmount}},[t._v("确 定")])],1)],1)],1)},n=[],o=(i("d3b7"),i("159b"),i("b64b"),i("99af"),i("ac1f"),i("466d"),i("5319"),i("a434"),i("d81d"),i("c895")),l=i("b879"),a=i("3d50"),r={data:function(){return{loading:!1,amounts:"",dialogVisibleAmount:!1,items:[]}},components:{TableFreight:l["a"],TableWeight:a["a"]},mounted:function(){this.getAreaShipping()},methods:{showCountryName:function(t){var e="";return Object.keys(o).forEach((function(i){Object.keys(o[i]).forEach((function(s){s==t&&(e="".concat(o[i][s].nameCN," (").concat(o[i][s].nameEN,")"))}))})),e},openAut:function(){this.getFee()},limitInput:function(t){this.amounts=(""+t).replace(/[^\d^\.]+/g,"").replace(/^0+(\d)/,"$1").replace(/^\./,"0.").match(/^\d*(\.?\d{0,2})/g)[0]||""},editAreaShipping:function(t){this.$router.push({name:"settingsLogistics",query:{id:t.id}})},closeDialogA:function(){this.dialogVisibleAmount=!1,this.amounts=""},getFee:function(){var t=this;this.$apiCall("api.AreaShipping.getShippingConfig",{},(function(e){"9999"==e.ErrorCode&&(t.amounts=null==e.Data.Results.orderPriceFreeShipping?0:e.Data.Results.orderPriceFreeShipping)}))},saveAmount:function(){var t=this;this.$apiCall("api.AreaShipping.changeShippingConfig",{orderPriceFreeShipping:this.amounts},(function(e){"9999"==e.ErrorCode?(t.$message.success("success"),t.dialogVisibleAmount=!1,t.amounts=""):t.$message.success(e.msg)}))},setPostageAmount:function(){this.dialogVisibleAmount=!0},delAreaShipping:function(t,e){var i=this;this.$confirm(this.$t("logistics.是否确定删除该区域方案？"),{type:"warning",confirmButtonText:this.$t("logistics.删除"),cancelButtonText:this.$t("logistics.取消"),confirmButtonClass:"el-button--danger"}).then((function(){i.loading=!0,i.$apiCall("api.AreaShipping.delete",{id:t.id},(function(t){i.loading=!1,"9999"==t.ErrorCode?i.items.splice(e,1):i.$elementMessage(t.Message,"error")}))})).catch((function(){}))},getAreaShipping:function(){var t=this;this.loading=!0,this.$apiCall("api.AreaShipping.findByVendor",{},(function(e){t.loading=!1,"9999"==e.ErrorCode?e.Data.Results&&e.Data.Results.length&&(t.items=e.Data.Results.map((function(t){return t}))):t.$elementMessage(e.Message,"error")}))},goto:function(t){this.$router.push({name:t})}}},c=r,u=(i("6f91"),i("2877")),p=Object(u["a"])(c,s,n,!1,null,"10a38756",null);e["default"]=p.exports},3499:function(t,e,i){},"6f91":function(t,e,i){"use strict";i("3499")}}]);