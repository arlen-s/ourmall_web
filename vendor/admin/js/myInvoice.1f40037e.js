(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["myInvoice"],{"0e33":function(e,t,i){"use strict";i("e07f")},4480:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"contentpanel my-invoice-page"},[t("div",{ref:"pageHeader",staticClass:"pagetitle"},[t("div",{staticClass:"left d-flex align-items-center"},[t("div",{staticClass:"title",staticStyle:{"margin-right":"20px"}},[t("i",{staticClass:"el-icon-s-order"}),t("h2",[e._v(e._s(e.$t("myinvoice.purchaseOrders")))])]),t("div",{staticStyle:{"margin-top":"8px"}},[1==e.cancelStatus?t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.filterGetItem2(2)}}},[e._v(e._s(e.$t("myinvoice.viewCancelled")))]):e._e(),2==e.cancelStatus?t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.filterGetItem2(1)}}},[e._v(e._s(e.$t("myinvoice.viewAll")))]):e._e()],1)]),t("div",{staticClass:"right"},[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.gotoImport}},[e._v(e._s(e.$t("myinvoice.createCus")))])],1)]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pagebody"},[t("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("el-card",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("div",{ref:"pageFilter",staticClass:"page-filter"},[t("el-form",{attrs:{inline:!0,size:"mini"}},[t("el-form-item",{staticClass:"mg-r-5",attrs:{label:"#"}},[t("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:e.$t("myinvoice.invoiceNum")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterGetItem.apply(null,arguments)}},model:{value:e.filterParams.code,callback:function(t){e.$set(e.filterParams,"code",t)},expression:"filterParams.code"}})],1),t("el-form-item",{staticClass:"mg-r-5"},[t("el-select",{attrs:{filterable:"",remote:"","remote-method":e.remoteMethodCustom,loading:e.selectLoading,placeholder:e.$t("myinvoice.pleaseCusName")},on:{change:e.filterGetItem},model:{value:e.filterParams.id,callback:function(t){e.$set(e.filterParams,"id",t)},expression:"filterParams.id"}},e._l(e.selectArr,(function(e){return t("el-option",{key:e.id,attrs:{label:e.customerName,value:e.id}})})),1)],1),t("el-form-item",{staticClass:"mg-r-5"},[t("el-select",{attrs:{filterable:"",remote:"","remote-method":e.getShopName,loading:e.getShopNameInput.loading,placeholder:"请输入查询店铺名"},on:{change:e.filterGetItem},model:{value:e.filterParams.accountId,callback:function(t){e.$set(e.filterParams,"accountId",t)},expression:"filterParams.accountId"}},e._l(e.getShopNameInput.shopList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.shopName,value:e.id}})})),1)],1),t("el-form-item",{staticClass:"mg-r-5"},[t("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:e.$t("myinvoice.losNum")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterGetItem.apply(null,arguments)}},model:{value:e.filterParams.trackNumber,callback:function(t){e.$set(e.filterParams,"trackNumber",t)},expression:"filterParams.trackNumber"}})],1),t("el-form-item",{staticClass:"mg-r-5"},[t("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:e.$t("myinvoice.shopifyNum")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterGetItem.apply(null,arguments)}},model:{value:e.filterParams.codeName,callback:function(t){e.$set(e.filterParams,"codeName",t)},expression:"filterParams.codeName"}})],1),t("el-form-item",{staticClass:"mg-r-20"},[t("el-select",{staticClass:"mg-r-5",staticStyle:{width:"170px"},attrs:{placeholder:e.$t("myinvoice.filterTime")},model:{value:e.filterParams.timeFilter,callback:function(t){e.$set(e.filterParams,"timeFilter",t)},expression:"filterParams.timeFilter"}},e._l(e.filterParams.timeOption,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e.filterParams.timeFilter?t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":e.$t("myinvoice.to"),"start-placeholder":e.$t("myinvoice.startDate"),"end-placeholder":e.$t("myinvoice.endDate")},on:{change:e.dateChange},model:{value:e.filterParams.date,callback:function(t){e.$set(e.filterParams,"date",t)},expression:"filterParams.date"}}):e._e()],1),t("el-form-item",{attrs:{label:e.$t("myinvoice.orderStatus")}},[t("el-select",{attrs:{placeholder:e.$t("myinvoice.pleaseSelect")},on:{change:e.filterGetItem},model:{value:e.filterParams.status,callback:function(t){e.$set(e.filterParams,"status",t)},expression:"filterParams.status"}},[t("el-option",{attrs:{label:e.$t("importdata.all"),value:""}}),e._l(e.$dict.invoiceStatus,(function(i){return 9!=i.val?t("el-option",{key:i.text,attrs:{label:e.$t(i.text),value:i.val}}):e._e()}))],2)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.filterGetItem}},[e._v(e._s(e.$t("myinvoice.filter")))]),t("el-button",{attrs:{type:"danger"},on:{click:e.clearFilter}},[e._v(e._s(e.$t("myinvoice.clear")))])],1)],1)],1)])],1),t("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:e.items,"row-key":"id",stripe:"",height:e.tableHeight,"row-class-name":e.tableRowClassName}},[t("el-table-column",{attrs:{label:e.$t("myinvoice.invoiceNum"),prop:"code",width:"250"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticClass:"d-flex align-items-center"},[e._v(" "+e._s(i.row.code)+" "),4!=i.row.status&&5!=i.row.status&&6!=i.row.status?[t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[i.row.extraJson&&i.row.extraJson.importErrorLog&&i.row.extraJson.importErrorLog.length?e._l(i.row.extraJson.importErrorLog,(function(i){return t("p",[e._v(" "+e._s(i)+" ")])})):e._e()],2),1==i.row.importError?t("i",{staticClass:"el-icon-warning tx-danger",staticStyle:{"font-size":"14px","margin-left":"5px"}}):e._e()])]:e._e()],2),t("p",{staticClass:"tx-gray-600",staticStyle:{"white-space":"nowrap"}},[t("span",{domProps:{innerHTML:e._s(e.$t("myinvoice.includeNum",{num:Number(i.row.orderCnt)}))}}),e._v(" / "),i.row.totalCnt?t("el-popover",{attrs:{trigger:"hover",placement:"right"}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:i.row.loadCnt,expression:"scope.row.loadCnt"}],staticStyle:{"min-height":"50px","font-size":"12px"},attrs:{slot:""},slot:"default"},[t("div",{staticStyle:{"margin-bottom":"5px"}},[e._v(e._s(e.$t("myinvoice.totalOrders"))),t("b",[e._v(e._s(i.row.totalCnt))]),e._v(" "+e._s(e.$t("myinvoice.pros")))]),i.row.cnt?[t("div",{staticStyle:{"margin-bottom":"15px","padding-left":"10px"}},e._l(i.row.cnt,(function(i,s){return t("div",{key:s},[t("span",{staticStyle:{"white-space":"nowrap"}},[e._v(e._s(i.name)+" :")]),e._v(" "),t("span",{staticStyle:{color:"#606266","white-space":"nowrap"}},[e._v(e._s(i.cnt))])])})),0),t("div",{staticStyle:{"text-align":"right"}},[t("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.cntText,expression:"scope.row.cntText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.cntOnCopy,expression:"cntOnCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.cntOnError,expression:"cntOnError",arg:"error"}],staticStyle:{color:"#5c6ac4"},attrs:{href:"javascript:;"}},[e._v(e._s(e.$t("myinvoice.copyData")))])])]:e._e()],2),t("a",{staticStyle:{color:"#5c6ac4"},attrs:{slot:"reference",href:"javascript:;"},on:{mouseenter:function(t){return e.getCntCountry(i.row)}},slot:"reference"},[e._v(e._s(i.row.totalCnt))])]):t("span",{staticStyle:{color:"#606266"}},[e._v("0")]),e._v(" "+e._s(e.$t("myinvoice.pros"))+" / "),i.row.shops.length?t("el-popover",{attrs:{trigger:"hover",placement:"right"}},[t("div",{staticStyle:{"min-height":"50px","font-size":"12px"}},[t("div",{staticStyle:{"margin-bottom":"5px"}},[e._v("总共店铺数："),t("b",[e._v(e._s(i.row.shops.length))]),e._v("店铺")]),e._l(i.row.shops,(function(i){return t("div",{key:i.id},[e._v(e._s(i.shopName))])}))],2),t("a",{staticStyle:{color:"#5c6ac4"},attrs:{slot:"reference",href:"javascript:;"},slot:"reference"},[e._v(e._s(i.row.shops.length))])]):t("span",{staticStyle:{color:"#606266"}},[e._v("0")]),e._v(" 个店铺 ")],1)]}}])}),t("el-table-column",{attrs:{label:e.$t("myinvoice.cus"),prop:"customerName",width:"150"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",[e._v(e._s(i.row.customerName))]),t("div",[e._v(e._s(i.row.customerRemark))])]}}])}),t("el-table-column",{attrs:{label:e.$t("myinvoice.skuKinds"),prop:"itemCnt",align:"center",width:"120"}}),t("el-table-column",{attrs:{label:e.$t("myinvoice.originalAndDiscount"),width:"250"},scopedSlots:e._u([{key:"default",fn:function(i){return[Number(i.row.totalAmount)?t("div",[e._v("US$ "+e._s(i.row.totalAmount))]):t("div",[e._v(e._s(e.$t("myinvoice.setUp")))]),t("div",{staticClass:"tx-success"},[e._v("- US$ "+e._s((Number(i.row.totalAmount)-Number(i.row.realAmount)).toFixed(2)))])]}}])}),t("el-table-column",{attrs:{label:e.$t("myinvoice.actualAmount"),prop:"realAmount",width:"200",align:"right"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",{staticClass:"tx-danger"},[Number(i.row.realAmount)?t("span",[e._v("US$ "+e._s(i.row.realAmount))]):t("div",[e._v(e._s(e.$t("myinvoice.setUp")))])])]}}])}),t("el-table-column",{attrs:{label:e.$t("myinvoice.statistics"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{"white-space":"nowrap"}},[t("span",{},[e._v(e._s(e.$t("myinvoice.shippedAndDelivered")))]),t("span",[e._v(e._s(i.row.orderStatusCnt?i.row.orderStatusCnt.undeliveredCnt:"---"))]),e._v(" / "),t("span",[e._v(e._s(i.row.orderStatusCnt?i.row.orderStatusCnt.deliveredCnt:"---"))])]),i.row.orderStatusCnt&&Number(i.row.orderStatusCnt.notSyncCnt)>0?t("div",{staticStyle:{"white-space":"nowrap"}},[[t("span",{staticClass:"tx-warning"},[t("el-popover",{attrs:{placement:"bottom",title:e.$t("myinvoice.Download"),width:"500",trigger:"hover"}},[t("div",{staticClass:"mg-t-15 mg-b-15",staticStyle:{"white-space":"nowrap"}},[t("span",{staticClass:"tx-gray-600"},[e._v(e._s(e.$t("myinvoice.shippedquantity"))+" ")]),t("a",{attrs:{href:"javascript:;"}},[e._v(e._s(i.row.orderStatusCnt?i.row.orderStatusCnt.deliveredCnt:"---"))]),i.row.orderStatusCnt&&Number(i.row.orderStatusCnt.notSyncCnt)>0?t("span",{staticClass:"mg-l-10"},[e._v(" （"),t("a",{attrs:{href:"javascript:;"}},[e._v(e._s(i.row.orderStatusCnt?Number(i.row.orderStatusCnt.notSyncCnt):"---"))]),e._v(" "+e._s(e.$t("myinvoice.syncShopify"))+"） ")]):e._e()]),t("el-alert",{staticClass:"icon-color",attrs:{closable:!1,title:e.$t("myinvoice.Downloadtext"),type:"info","show-icon":""}}),t("div",{staticClass:"mg-t-15 d-flex justify-content-center"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.exportDeliver(i.row.id,1)}}},[e._v(e._s(e.$t("myinvoice.Downloadall")))]),i.row.orderStatusCnt&&Number(i.row.orderStatusCnt.notSyncCnt)>0?t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.exportDeliver(i.row.id,2)}}},[e._v(e._s(e.$t("myinvoice.Downloadallunsync")))]):e._e()],1),t("a",{attrs:{slot:"reference",href:"javascript:;"},slot:"reference"},[e._v(e._s(i.row.orderStatusCnt?Number(i.row.orderStatusCnt.notSyncCnt):"---"))])],1),e._v(" "+e._s(e.$t("myinvoice.syncShopify"))+" ")],1)]],2):e._e(),i.row.orderStatusCnt&&Number(i.row.orderStatusCnt.abnormalCnt)>0&&6!=i.row.status?t("div",{staticStyle:{"white-space":"nowrap"}},[t("span",{staticClass:"tx-danger"},[e._v(e._s(i.row.orderStatusCnt?i.row.orderStatusCnt.abnormalCnt:"---"))]),e._v(" "+e._s(e.$t("myinvoice.abnormal"))+" ")]):e._e()]}}])}),t("el-table-column",{attrs:{label:e.$t("myinvoice.status"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(i){return[e.$dict.invoiceStatus[i.row.status]?t("span",{class:"tx-"+e.$dict.invoiceStatus[i.row.status].type},[e._v(e._s(e.$t(e.$dict.invoiceStatus[i.row.status].text)))]):e._e()]}}])}),t("el-table-column",{attrs:{label:e.$t("myinvoice.dateTime"),width:"250"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.timeCreated?t("div",{staticStyle:{"white-space":"nowrap"}},[t("span",{staticClass:"tx-gray-600"},[e._v(e._s(e.$t("myinvoice.orderCreate")))]),t("span",[e._v(e._s(e.$moment.unix(i.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")))])]):e._e(),i.row.timeRead?t("div",{staticStyle:{"white-space":"nowrap"}},[t("span",{staticClass:"tx-gray-600"},[e._v(e._s(e.$t("myinvoice.orderPaid")))]),t("span",[e._v(e._s(e.$moment.unix(i.row.timeRead).format("YYYY-MM-DD HH:mm:ss")))])]):e._e(),i.row.timePaid?t("div",{staticStyle:{"white-space":"nowrap"}},[t("span",{staticClass:"tx-gray-600"},[e._v(e._s(e.$t("myinvoice.orderConfirm")))]),t("span",[e._v(e._s(e.$moment.unix(i.row.timePaid).format("YYYY-MM-DD HH:mm:ss")))])]):e._e()]}}])}),t("el-table-column",{attrs:{fixed:"right",label:e.$t("myinvoice.action"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",[3!=i.row.status&&4!=i.row.status&&5!=i.row.status&&6!=i.row.status&&9!=i.row.status?t("el-dropdown",{attrs:{size:"mini","split-button":"",type:"text"},on:{click:function(t){return e.gotoInvoice(i.row)},command:e.handleCommand}},[e._v(" "+e._s(e.$t("myinvoice.viewDetail"))+" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:e.beforeHandleCommand(i.row,"b")}},[e._v(e._s(e.$t("myinvoice.exportShopify")))]),t("el-dropdown-item",{attrs:{command:e.beforeHandleCommand(i.row,"a")}},[e._v(e._s(e.$t("myinvoice.importInfo")))])],1)],1):t("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:function(t){return e.gotoInvoice(i.row)}}},[e._v(e._s(e.$t("myinvoice.viewDetail")))])],1),9!=i.row.status&&1!=i.row.status?t("div",[t("el-link",{staticStyle:{"font-size":"12px"},attrs:{disabled:i.row.submitLoading,type:"primary"},on:{click:function(t){return e.sendInvoice(i.row)}}},[e._v(e._s(e.$t("myinvoice.sendCus")))])],1):e._e(),1!=i.row.status&&2!=i.row.status&&3!=i.row.status?t("div",[t("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:function(t){return e.handleCommandFn(i.row,"c")}}},[e._v(e._s(e.$t("myinvoice.exportt")))])],1):e._e(),1==i.row.status||2==i.row.status?t("div",[t("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"danger"},on:{click:function(t){return e.cancelInvoice(i.row)}}},[e._v(e._s(e.$t("myinvoice.cancelOrder")))])],1):e._e()]}}])})],1)],1)],1)],1),e.items.length?t("el-row",{ref:"pageFooter",attrs:{gutter:20}},[t("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[t("div",[t("el-pagination",{attrs:{"current-page":e.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.pageSizes,"page-size":e.rowsPerPage,total:Number(e.total)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e()],1),t("el-dialog",{attrs:{width:"80%",title:"b"==e.exportInvoiceType?e.$t("myinvoice.exportShopify"):e.$t("myinvoice.exportOrder"),visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[t("div",{staticClass:"modal-export"},[t("el-divider"),t("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[t("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3F4EAE","padding-left":"10px"}},[e._v(e._s(e.$t("myinvoice.exportFields"))),t("span",{staticClass:"mg-l-5"},[e._v(e._s(e.$t("myinvoice.dragging")))])]),t("div",{staticClass:"draggable-wrap"},[t("draggable",{attrs:{list:e.modalCustomExport.selectedTitles,draggable:".dargDiv",options:{animation:300},group:"tags"}},e._l(e.modalCustomExport.selectedTitles,(function(i,s){return t("el-tag",{key:i.name,staticClass:"dargDiv",attrs:{closable:"","disable-transitions":!1},on:{close:function(t){return e.removeTitle(s)}}},[e._v(" "+e._s(i.name)+" ")])})),1),e.modalCustomExport.selectedTitles.length?e._e():t("div",{staticClass:"w-100 justify-content-center"},[t("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.$t("myinvoice.PleaseSelectBelow")))])])],1)]),t("el-divider"),t("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[t("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3F4EAE","padding-left":"10px"}},[e._v(e._s(e.$t("myinvoice.optionalfields"))+" "),t("span",{staticClass:"tx-danger tx-12",staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.$t("myinvoice.notExport")))])]),t("div",{staticClass:"tag-wrap"},[t("draggable",{attrs:{list:e.modalCustomExport.unselectedTitles,draggable:".uns-tag",options:{animation:300},group:"tags"}},e._l(e.modalCustomExport.unselectedTitles,(function(i,s){return t("el-tag",{key:i.orName,attrs:{effect:"dark"},on:{click:function(t){return e.selectTitle(s)}}},[e._v(" "+e._s(i.orName)+" ")])})),1)],1)]),t("el-divider"),t("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[t("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3F4EAE","padding-left":"10px"}},[e._v(" "+e._s(e.$t("myinvoice.customField"))+" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("myinvoice.rename"),placement:"top"}},[t("i",{staticClass:"fa fa-question-circle-o",staticStyle:{color:"#5C6AC4","text-decoration":"none"}})]),t("a",{staticClass:"mg-l-20",staticStyle:{color:"#5C6AC4","text-decoration":"none"},attrs:{href:"javascript:;"},on:{click:function(t){e.showCustom=!e.showCustom}}},[e._v(e._s(e.showCustom?e.$t("myinvoice.hideFields"):e.$t("myinvoice.showFields")))])],1),t("div",{staticClass:"row custom-wrap",class:{hide:!e.showCustom}},[t("el-row",{staticStyle:{margin:"0"},attrs:{gutter:20}},e._l(e.modalCustomExport.selectedTitles,(function(i){return t("el-col",{key:i.orName,staticStyle:{"margin-top":"10px"},attrs:{span:12}},[t("div",{staticClass:"grid-content",staticStyle:{display:"flex","align-items":"center"}},[t("label",{staticStyle:{width:"200px","white-space":"nowrap","text-align":"right","margin-right":"10px",color:"#999"}},[e._v("["+e._s(i.orName)+"]"+e._s(e.$t("myinvoice.showAs"))+"：")]),t("div",{staticClass:"col-6"},[t("el-input",{attrs:{placeholder:i.orName,size:"small"},model:{value:i.name,callback:function(t){e.$set(i,"name",t)},expression:"title.name"}})],1)])])})),1)],1)]),t("el-divider")],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.innerVisible=!1}}},[e._v(e._s(e.$t("myinvoice.discard")))]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveCustomExportSettingOnly}},[e._v(e._s(e.$t("myinvoice.saveSetting")))]),1!=e.exportItem.payStatus&&"c"==e.exportInvoiceType?[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.$t("myinvoice.confirmReceipt"))+" ")]),t("el-button",{staticStyle:{"background-color":"#b3e19d","border-color":"#b3e19d",cursor:"not-allowed"},attrs:{type:"success",size:"small"}},[e._v(" "+e._s(e.$t("myinvoice.saveSettingExcel"))+" ")])],1),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.$t("myinvoice.confirmReceipt"))+" ")]),t("el-button",{staticStyle:{"background-color":"#b3e19d","border-color":"#b3e19d",cursor:"not-allowed"},attrs:{type:"success",size:"small"}},[e._v(" "+e._s(e.$t("myinvoice.saveSettingCsv"))+" ")])],1)]:[t("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.saveCustomExport("1")}}},[e._v(e._s(e.$t("myinvoice.saveSettingExcel")))]),t("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.saveCustomExport("2")}}},[e._v(e._s(e.$t("myinvoice.saveSettingCsv")))])]],2)]),t("el-dialog",{attrs:{"custom-class":"sendInvoice",title:e.$t("myinvoice.sendInvoice"),visible:e.sendInvoiceOpen,width:"50%"},on:{open:e.openSkype,"update:visible":function(t){e.sendInvoiceOpen=t}}},[[t("div",{staticStyle:{position:"relative","z-index":"1"}},[t("div",{staticStyle:{position:"absolute",right:"30px",top:"15px"}},[t("el-switch",{on:{change:e.changeShowItemPrice},model:{value:e.showItemPrice,callback:function(t){e.showItemPrice=t},expression:"showItemPrice"}}),e._v(" "+e._s(e.$t("myinvoice.showPrice"))+" ")],1)]),t("el-tabs",{staticStyle:{"margin-left":"20px","margin-top":"10px"},attrs:{type:"card"},model:{value:e.activeShareName,callback:function(t){e.activeShareName=t},expression:"activeShareName"}},[t("el-tab-pane",{attrs:{name:"shareLink"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"iconfont icon-link"}),e._v(" "+e._s(e.$t("myinvoice.shareLink")))]),t("div",{staticClass:"d-flex mg-y-20"},[t("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[e._v(e._s(e.$t("myinvoice.shareUrl")))]),t("div",[t("span",[e._v(e._s(e.invoiceInfo.url))])])]),t("div",{staticClass:"d-flex mg-y-20"},[t("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}}),t("div",[t("div",[t("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.invoiceInfo.url,expression:"invoiceInfo.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],attrs:{size:"mini",type:"success"}},[e._v(e._s(e.$t("myinvoice.shareCopy")))])],1)])])]),t("el-tab-pane",{attrs:{name:"shareWeixin"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"iconfont icon-shejiao"}),e._v(" "+e._s(e.$t("myinvoice.showApp")))]),t("div",[t("div",{staticClass:"d-flex mg-y-20"},[t("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[e._v(e._s(e.$t("myinvoice.setTitle")))]),t("div",{staticStyle:{width:"70%"}},[t("el-input",{attrs:{type:"text",size:"small"},on:{change:function(t){return e.saveRemark("2")}},model:{value:e.shareTitle,callback:function(t){e.shareTitle=t},expression:"shareTitle"}})],1)]),t("div",{staticClass:"d-flex mg-y-20 align-items-center"},[t("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[e._v(e._s(e.$t("myinvoice.setContent")))]),t("div",{staticStyle:{width:"70%"}},[t("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:3,maxRows:6},size:"small"},on:{change:function(t){return e.saveRemark("2")}},model:{value:e.shareDesc,callback:function(t){e.shareDesc=t},expression:"shareDesc"}})],1)]),t("div",{staticClass:"d-flex mg-y-20"},[t("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[e._v(e._s(e.$t("myinvoice.setType")))]),t("div",{staticClass:"d-flex",staticStyle:{width:"70%"}},[t("div",{staticClass:"skype-share",staticStyle:{"margin-right":"30px"},attrs:{"data-href":e.shareTitle+e.shareDesc,"data-lang":"en-US","data-text":e.invoiceInfo.url,"data-style":"large"}}),t("div",[t("el-tooltip",{attrs:{placement:"bottom"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("p",{staticClass:"tx-center mg-b-10"},[e._v(e._s(e.$t("myinvoice.scan")))]),t("img",{attrs:{src:e.invoiceInfo.qrcodeBase64,width:"130"}}),t("img",{staticStyle:{position:"absolute",left:"50%",top:"50%","margin-left":"-15px","margin-top":"-4px"},attrs:{src:"images/weixin.png",width:"30px"}})]),t("a",{staticClass:"share-weixin",attrs:{href:"javascript:;"}},[t("i",{staticClass:"fa fa-weixin"}),e._v(" "+e._s(e.$t("myinvoice.share"))+" ")])])],1)])])])])],1)],t("el-divider"),t("div",{staticClass:"dialog-footer d-flex justify-content-between",attrs:{slot:"footer"},slot:"footer"},[t("div",[t("el-button",{directives:[{name:"show",rawName:"v-show",value:"shareWeixin"==e.activeShareName,expression:"activeShareName == 'shareWeixin'"}],attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.saveRemark("1")}}},[e._v(e._s(e.$t("myinvoice.reset")))])],1),t("div",[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.sendInvoiceOpen=!1}}},[e._v(e._s(e.$t("myinvoice.cancel")))]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.invoicePreview(e.invoiceInfo.url)}}},[e._v(e._s(e.$t("myinvoice.previewInvocie")))])],1)])],2),t("el-dialog",{attrs:{title:"您当前采购订单中有 0 元供货价的商品",visible:e.dialogZeroAlert.isShow,width:"600px"},on:{"update:visible":function(t){return e.$set(e.dialogZeroAlert,"isShow",t)}}},[t("div",{staticStyle:{padding:"0 20px"}},[t("div",{staticClass:"mg-b-10"},[e._v(" 您当前的采购订单中有设置为 0 元供货价的商品： ")]),e._l(e.dialogZeroAlert.items,(function(i){return t("div",{key:i.id,staticStyle:{"margin-bottom":"5px","padding-left":"15px",color:"#909399"}},[e._v(" "+e._s(i.codeName)+" - "+e._s(i.sku)+" × "+e._s(i.quantity)+" ")])})),t("div",{staticClass:"mg-t-30"},[t("el-alert",{attrs:{title:"确定要发送当前发票发送给客户吗",type:"warning",closable:!1}})],1)],2),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogZeroAlert.isShow=!1}}},[e._v(" 我再看看 ")]),t("el-button",{attrs:{size:"small",type:"primary",loading:e.dialogZeroAlert.loading},on:{click:function(t){return e.toSendInvoice(e.dialogZeroAlert.invoice,!0)}}},[e._v(" 确定 ")])],1)])],1)},a=[],r=(i("14d9"),i("3c65"),i("b76a")),o=i.n(r),l={data(){return{getShopNameInput:{loading:!1,shopList:[]},orderOtherStatus:0,loading:!1,reSizeTime:0,tableHeight:400,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("myInvoiceRowsPerPage")?Number(localStorage.getItem("myInvoiceRowsPerPage")):10,items:[],total:0,totalPage:0,filterParams:{timeOption:[{label:this.$t("myinvoice.createdTime"),value:"timeCreated"},{label:this.$t("myinvoice.confirmedTime"),value:"timePaid"},{label:this.$t("myinvoice.downloadTime"),value:"timeApiGet"},{label:this.$t("myinvoice.paidTime"),value:"timeRead"}],timeFilter:"",date:[],dateFrom:"",dateTo:"",code:"",status:this.$route.query.status?Number(this.$route.query.status):"",customerRead:"",payStatus:"",name:"",id:"",trackNumber:"",codeName:"",accountId:""},selectLoading:!1,selectArr:[],selectedCustomerId:"",cancelStatus:1,innerVisible:!1,showCustom:!1,modalCustomExport:{tags:[],selectedTitles:[],unselectedTitles:[]},modalCustomExportDefault:"",exportItem:"",exportInvoiceType:"",sendInvoiceOpen:!1,activeShareName:"shareLink",showCustom:!1,shareTitle:"",shareDesc:"",showDownloadInvoice:!1,stopResource:"1",activeConfirm:"confirmErp",showItemPrice:!0,invoiceInfo:"",dialogZeroAlert:{isShow:!1,loading:!1,items:[],invoice:null},dialogZeroAlertDefault:"{}"}},watch:{items(){this.items.forEach((e,t)=>{e.isLoadOrderCnt||(e.isLoadOrderCnt=0)}),setTimeout(()=>{this.loadCnt()},500)},$route:"gotoPage"},components:{draggable:o.a},mounted(){if(this.dialogZeroAlertDefault=JSON.stringify(this.dialogZeroAlert),console.log(null!=this.$route.query.orderStatus),null!=this.$route.query.orderStatus){const{orderStatus:e}=this.$route.query;Number(e)>=10?this.orderOtherStatus=Number(e):this.filterParams.status=Number(e)}this.filterParamsDefault=JSON.stringify(this.filterParams),this.$route.params.id&&(this.filterParams.name=this.$route.params.customerName?this.$route.params.customerName:"",this.filterParams.id=this.$route.params.id?this.$route.params.id:"",this.selectArr=[{id:this.$route.params.id,customerName:this.$route.params.customerName}]),this.getItem(),window.onresize=()=>{this.$getTableHeight(this)},this.modalCustomExportDefault=JSON.stringify(this.modalCustomExport);let e,t=this.$refs.gridTable.bodyWrapper;t.onscroll=()=>{setTimeout(()=>{this.loadCnt()},100)},$(window).scroll(()=>{clearTimeout(e),e=setTimeout(()=>{this.loadCnt()},100)}).resize(()=>{clearTimeout(e),e=setTimeout(()=>{this.loadCnt()},100)})},beforeDestroy(){window.onresize=()=>{}},methods:{getShopName(e){this.getShopNameInput.shopList=[],e&&(this.getShopNameInput.loading=!0,this.$apiCall("api.Invoice.findStoreByVendor",{shopName:e},e=>{this.getShopNameInput.loading=!1,9999==e.ErrorCode?this.getShopNameInput.shopList=e.Data.Results:this.$message({message:e.Message,type:"error"})}))},exportDeliver(e,t){this.$showLoading(),this.$apiCall("api.Invoice.exportDeliverTitle",{invoiceId:e},i=>{if("9999"==i.ErrorCode){let a=[];for(var s in i.Data.Results.titles){let e={};e.key=s,e.orName=i.Data.Results.titles[s],e.name=i.Data.Results.titles[s],a.push(e)}let r={};a.forEach(e=>{r[e.key]=e.name});let o={invoiceId:e,titles:r,onlyDelivered:!0};2==t&&(o.onlyNotSync=!0),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let l=e=>{document.getElementById("ifilePro").src=e};this.$apiCall("api.Invoice.exportDeliver",o,e=>{this.$hideLoading(),"9999"==e.ErrorCode?(this.$elementMessage("下载成功","success"),l(e.Data.Results.file)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure())})}else this.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||his.$userFailure()})},cntOnError(){this.$elementMessage(this.$t("myinvoice.copyFailed"),"error")},cntOnCopy(){this.$elementMessage(this.$t("myinvoice.copyItems"),"success")},getCntCountry(e){e.cnt||(e.loadCnt=!0),this.$apiCall("api.Invoice.getItemsCountry",{invoiceId:e.id},t=>{if(e.loadCnt=!1,"9999"==t.ErrorCode){e.cnt=t.Data.Results;let i=`总共采购商品数：${e.totalCnt},`;Object.keys(t.Data.Results).forEach(e=>{i+=`${t.Data.Results[e].name}: ${t.Data.Results[e].cnt},`}),e.cntText=i.slice(0,i.length-1)}})},tableRowClassName({row:e,rowIndex:t}){return"data-invocieid invocieid"+this.items[t].id},loadCnt(){if(!this.$refs.gridTable)return;let e=this.$refs.gridTable.bodyWrapper,t=e.scrollHeight,i=e.scrollTop;$(".el-table__body-wrapper .data-invocieid").each(e=>{$(".el-table__body-wrapper .data-invocieid").eq(e);let s=$(".el-table__body-wrapper .data-invocieid").eq(e).offset().top-200;if(s<t+i&&s>i){let t=this.items[e].id;this.items.some(e=>{e.id==t&&(e.isLoadOrderCnt||this.getOrderCnt(t))})}})},getOrderCnt(e){let t,i=!1,s=!1;this.items.some(s=>{if(s.id==e)return s.isLoadOrderCnt?i=!0:t=s,!0}),s||(t.isLoadOrderCnt=1,this.$apiCall("api.Invoice.getSummary",{invoiceId:e},e=>{this.$hideLoading(),"9999"==e.ErrorCode?this.$set(t,"orderStatusCnt",e.Data.Results):(this.$elementMessage(e.Message,"error"),t.isLoadOrderCnt=2)}))},onCopy(e){this.$elementMessage(this.$t("successfullyToClipboard"),"success")},onError(e){this.$elementMessage(this.$t("failedToClipboard"),"error")},saveRemark(e){this.$showLoading(),this.$apiCall("api.Invoice.saveRemark",{uniCode:this.invoiceInfo.uniCode,title:1==e?"":this.shareTitle,desc:1==e?"":this.shareDesc},e=>{this.$hideLoading(),"9999"==e.ErrorCode?(this.shareTitle=e.Data.Results.title,this.shareDesc=e.Data.Results.desc):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},invoicePreview(e){let t=window.open("/blank.html","invoicePreview");t.location.href=e},openSkype(){let e=0,t=setInterval(()=>{(function(e,t,i){e.loadSkypeWebSdkAsync=e.loadSkypeWebSdkAsync||function(e){var s,a=t.getElementsByTagName(i)[0];t.getElementById(e.id)||(s=t.createElement(i),s.id=e.id,s.src=e.scriptToLoad,s.onload=e.callback,a.parentNode.insertBefore(s,a))};var s={scriptToLoad:"https://swx.cdn.skype.com/shared/v/latest/skypewebsdk.js",id:"skype_web_sdk"};e.loadSkypeWebSdkAsync(s)})(window,document,"script"),e++,e>10&&clearInterval(t)},300)},toSendInvoice(e,t){this.showItemPrice="1"==e.showItemPrice,this.sendInvoiceOpen=!0,this.activeShareName="shareLink",t&&(this.dialogZeroAlert.loading=!0),this.$apiCall("api.Invoice.getShareUrl",{invoiceId:e.id},e=>{this.$hideLoading(),"9999"==e.ErrorCode?(this.invoiceInfo=e.Data.Results,this.shareTitle=this.invoiceInfo.remark?this.invoiceInfo.remark.title:"",this.shareDesc=this.invoiceInfo.remark?this.invoiceInfo.remark.desc:"",this.sendInvoiceOpen=!0,this.activeShareName="shareLink",t&&(this.dialogZeroAlert.isShow=!1)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure())})},sendInvoice(e){e.submitLoading=!0,this.$apiCall("api.Invoice.checkItemPrice",{invoiceId:e.id},t=>{if(e.submitLoading=!1,"9999"==t.ErrorCode){let i=t.Data.Results;i.noSkuArr.length||i.nullPriceArr.length||i.zeroPriceArr.length?(this.dialogZeroAlert=JSON.parse(this.dialogZeroAlertDefault),this.dialogZeroAlert.items=i.noSkuArr.concat(i.noSkuArr,i.nullPriceArr,i.zeroPriceArr),this.dialogZeroAlert.isShow=!0,this.dialogZeroAlert.invoice=e):this.toSendInvoice(e)}else this.$elementMessage(t.Message,"error")})},changeShowItemPrice(){this.$apiCall("api.Invoice.setShowPrice",{uniCode:this.invoiceInfo.uniCode},e=>{"9999"==e.ErrorCode?this.getItem(!0):(this.showItemPrice=!this.showItemPrice,this.$elementMessage(e.Message,"error"))})},selectTitle(e){this.modalCustomExport.selectedTitles.push(this.modalCustomExport.unselectedTitles[e]),this.modalCustomExport.unselectedTitles.splice(e,1)},removeTitle(e){this.modalCustomExport.unselectedTitles.unshift(this.modalCustomExport.selectedTitles[e]),this.modalCustomExport.selectedTitles.splice(e,1)},saveCustomExport(e){this.saveCustomExportSettingOnly(e)},saveCustomExportSettingOnly(e){if(!this.modalCustomExport.selectedTitles.length)return this.$elementMessage(this.$t("myinvoice.leastOne"),"error"),!1;if(this.modalCustomExport.selectedTitles.some(e=>!e.name))return this.$elementMessage(this.$t("myinvoice.notEmpty"),"error"),!1;this.$showLoading();let t={};this.modalCustomExport.selectedTitles.forEach(e=>{t[e.key]=e.name});let i="b"==this.exportInvoiceType?"api.Invoice.saveInvoiceTitle":"api.Invoice.saveExportTitle";this.$apiCall(i,{titles:t},i=>{if("9999"==i.ErrorCode)if(e>0){0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let i=e=>{document.getElementById("ifilePro").src=e},s="b"==this.exportInvoiceType?"api.Invoice.exportInvoice":"api.Invoice.exportOrder";this.$apiCall(s,{titles:t,invoiceId:this.exportItem.id,type:1==e?"excel":"csv"},e=>{this.$hideLoading(),"9999"==e.ErrorCode?(this.innerVisible=!1,this.$elementMessage(this.$t("myinvoice.saveSettingAndExport"),"success"),i(e.Data.Results.file)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})}else this.$elementMessage(this.$t("myinvoice.saveSettingSuccess"),"success"),this.innerVisible=!1;else this.$hideLoading(),this.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||this.$userFailure(this)})},setExportOnly(e){this.exportInvoiceType=e,this.$showLoading(),this.showCustom=!1,this.modalCustomExport=JSON.parse(this.modalCustomExportDefault);let t="b"==this.exportInvoiceType?"api.Invoice.exportInvoiceTitle":"api.Invoice.exportTitle";this.$apiCall(t,{},e=>{if(this.$hideLoading(),"9999"==e.ErrorCode){for(var t in this.innerVisible=!0,e.Data.Results.default){let i={};i.key=t,i.orName=e.Data.Results.default[t],i.name=e.Data.Results.default[t],this.modalCustomExport.tags.push(i)}for(var t in e.Data.Results.titles){let i={};i.key=t,i.orName=e.Data.Results.titles[t],i.name=e.Data.Results.titles[t],this.modalCustomExport.selectedTitles.push(i)}this.modalCustomExport.tags.forEach(e=>{this.modalCustomExport.selectedTitles.some(t=>e.key==t.key)||this.modalCustomExport.unselectedTitles.unshift(e),this.modalCustomExport.selectedTitles.some(t=>{e.key==t.key&&this.$set(t,"orName",e.name)})})}else this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this)})},beforeHandleCommand(e,t){return{row:e,command:t}},handleCommandFn(e,t){this.exportItem=e,this.exportInvoiceType=t,this.setExportOnly(t)},handleCommand(e){switch(this.exportItem=e.row,this.exportInvoiceType=e.command,e.command){case"a":this.$router.push({name:"importData",query:{rid:this.exportItem.relationshipId,id:this.exportItem.id}});break;case"b":this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let e=e=>{document.getElementById("ifilePro").src=e},t="b"==this.exportInvoiceType?"api.Invoice.exportInvoice":"api.Invoice.exportOrder";this.$apiCall(t,{invoiceId:this.exportItem.id,type:"excel"},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.$elementMessage(this.$t("myinvoice.exportSuccess"),"success"),e(t.Data.Results.file)):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))});break;case"c":this.setExportOnly("c");break}},remoteMethodCustom(e){this.selectArr=[],e&&(this.selectLoading=!0,this.$apiCall("api.Relationship.findByVendor",{name:e},e=>{this.selectLoading=!1,9999==e.ErrorCode?this.selectArr=e.Data.Results:this.$message({message:e.Message,type:"error"})}))},clearFilter(){this.selectArr=[],this.filterParams=JSON.parse(this.filterParamsDefault),1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},filterGetItem(){this.orderOtherStatus=0,1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},filterGetItem2(e){this.cancelStatus=e,1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},dateChange(){this.filterParams.date.length>1&&(this.filterParams.dateFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.dateTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterGetItem())},cancelInvoice(e){this.$confirm(this.$t("myinvoice.confirmToCancel"),"",{confirmButtonText:this.$t("myinvoice.cancel"),cancelButtonText:this.$t("myinvoice.discard"),type:"error"}).then(()=>{this.loading=!0,this.$apiCall("api.Invoice.cancel",{invoiceId:e.id},e=>{this.loading=!1,9999==e.ErrorCode?(this.$message({message:this.$t("myinvoice.cancelSuccess"),type:"success"}),this.getItem(!0)):this.$message({message:e.Message,type:"error"})})}).catch(()=>{})},getItem(e){this.loading=!0,this.$apiCall("api.Invoice.findByVendor",{page:this.page,rowsPerPage:this.rowsPerPage,timeFilter:this.filterParams.timeFilter,dateFrom:this.filterParams.dateFrom,dateTo:this.filterParams.dateTo,code:this.filterParams.code,status:2==this.cancelStatus?9:this.filterParams.status,customerRead:this.filterParams.customerRead,payStatus:this.filterParams.payStatus,relationshipId:this.filterParams.id,trackNumber:this.filterParams.trackNumber,codeName:this.filterParams.codeName,isAbnormal:10===this.orderOtherStatus,syncFail:11===this.orderOtherStatus,accountId:this.filterParams.accountId},t=>{this.loading=!1,9999==t.ErrorCode?(this.items=[],t.Data.Results.forEach(e=>{7!=e.status&&(e.loadCnt=!1),e.cnt=null,e.cntText="",e.submitLoading=!1,this.items.push(e)}),this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage),this.$getTableHeight(this),e||(this.$refs.gridTable.bodyWrapper.scrollTop=0)):this.$message({message:t.Message,type:"error"})})},toPage(e){e!=this.$route.query.page&&this.$router.push({query:{page:e}})},changePageSize(e){this.rowsPerPage=e,localStorage.setItem("myInvoiceRowsPerPage",e),this.getItem()},gotoPage(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()},gotoImport(){this.$router.push({name:"importData"})},gotoInvoice(e){let t=this.$router.resolve({name:"Invoice",query:{uniCode:e.uniCode,fromPage:1}});window.open(t.href,"_blank")}}},n=l,c=(i("0e33"),i("92d2"),i("2877")),m=Object(c["a"])(n,s,a,!1,null,"a4ecb86e",null);t["default"]=m.exports},8586:function(e,t,i){},"92d2":function(e,t,i){"use strict";i("8586")},e07f:function(e,t,i){}}]);