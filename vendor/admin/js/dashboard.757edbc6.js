(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"1cae":function(t,a,e){},4601:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"contentpanel dashboard-page"},[a("div",{staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("i",{staticClass:"el-icon-s-home"}),a("h2",[t._v(t._s(t.$t("dashboard.dashboard")))])])]),a("div",{staticClass:"right"})]),a("div",{staticClass:"pagebody",staticStyle:{display:"none"}},[a("el-row",{staticClass:"mg-b-30",attrs:{gutter:15}},[a("el-col",{attrs:{span:14}},[a("el-card",[a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"d-flex align-items-center mg-b-30 top-box-wrap",attrs:{span:12}},[a("div",{staticClass:"top-box"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("dashboard.customerAdded")))]),a("div",{staticClass:"t-link"},[a("el-link",{staticClass:"mg-r-10",attrs:{type:"primary",href:"#/my-custom"}},[t._v(" "+t._s(t.$store.state.cnt.customerCnt))]),t._v(" "+t._s(t.$t("dashboard.pcs"))+" ")],1)]),a("i",{staticClass:"el-icon-s-custom"})])]),a("el-col",{staticClass:"d-flex align-items-center mg-b-30 top-box-wrap",attrs:{span:12}},[a("div",{staticClass:"top-box"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("dashboard.authorizedShopifyCustomers")))]),a("div",{staticClass:"t-link"},[a("el-link",{staticClass:"mg-r-10",attrs:{type:"primary",href:"#/my-custom?isAuth=true"}},[t._v(" "+t._s(t.$store.state.cnt.customerAuthCnt))]),t._v(" "+t._s(t.$t("dashboard.pcs"))+" ")],1)]),a("i",{staticClass:"el-icon-s-goods"})])]),a("el-col",{staticClass:"d-flex align-items-center top-box-wrap",attrs:{span:12}},[a("div",{staticClass:"top-box"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("dashboard.validInvoice")))]),a("div",{staticClass:"t-link"},[a("el-link",{staticClass:"mg-r-10",attrs:{type:"primary",href:"#/my-invoice"}},[t._v(" "+t._s(t.$store.state.cnt.invoiceCnt)+" ")]),t._v(" "+t._s(t.$t("dashboard.pcs"))+" ")],1)]),a("i",{staticClass:"el-icon-s-order"})])])],1)],1)],1),a("el-col",{attrs:{offset:1,span:7}},[a("el-card",{staticClass:"add-box"},[a("a",{staticClass:"d-flex",attrs:{href:"javascript:;"},on:{click:t.openAddVendor}},[a("i",{staticClass:"el-icon-plus"}),a("span",[t._v(t._s(t.$t("dashboard.addNumCustomer",{num:Number(t.$store.state.cnt.customerCnt)+1})))])])])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[t.lastVendor.length?a("div",{staticClass:"last-customer"},[a("div",{staticClass:"header"},[t._v(" "+t._s(t.$t("dashboard.recentCooperation"))+" "),a("el-link",{attrs:{type:"primary",href:"#/my-custom"}},[t._v(t._s(t.$t("dashboard.more")))])],1),a("el-row",{attrs:{gutter:20}},t._l(t.lastVendor,(function(e,s){return a("el-col",{key:e.id,attrs:{xl:6,lg:12,md:12}},[a("el-card",{staticClass:"c-box"},[a("div",{staticClass:"c-box-content"},[a("div",{staticClass:"left tx-ellipsis1",attrs:{title:e.customerName}},[a("i",{staticClass:"avatar-title",style:{backgroundColor:t.aBg[s]}},[t._v(t._s(e.customerName.substr(0,1)))]),a("div",{staticClass:"name tx-ellipsis1",staticStyle:{"max-width":"100px"}},[t._v(" "+t._s(e.customerName))])]),a("div",{staticClass:"right"},[a("div",{staticClass:"mg-b-10 d-flex align-items-center v-content"},[a("span",{staticClass:"v-content-title"},[t._v(t._s(t.$t("dashboard.validInvoice2")))]),a("el-link",{staticClass:"v-content-val",attrs:{type:"primary"},on:{click:function(a){return t.gotoInvoice(e)}}},[t._v(t._s(e.invoiceCnt))])],1),a("div",{staticClass:"mg-b-20 d-flex align-items-center v-content"},[a("span",{staticClass:"v-content-title"},[t._v(t._s(t.$t("dashboard.authorizedShopifyStores")))]),a("span",{staticClass:"v-content-val"},[t._v(t._s(e.customerAuthCnt))])]),a("div",{staticClass:"tx-right"},[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.gotoCustom(e)}}},[t._v(" "+t._s(t.$t("mycustomer.Invitecustomers2"))+" ")])],1)])])])],1)})),1)],1):t._e()])],1)],1),a("div",{staticClass:"pagebodytwo",staticStyle:{display:"block"}},[a("el-row",{staticClass:"mg-b-30 user-status-list",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"box-card bg-box",attrs:{"body-style":{height:"290px"}}},[a("div",[a("el-image",{staticStyle:{width:"70px",height:"70px","border-radius":"50%"},attrs:{src:this.$store.state.userInfo.logo,fit:"fit"}},[a("div",{staticClass:"image-slot",staticStyle:{background:"#f6e9e9"},attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])])],1),a("div",{staticStyle:{color:"#fff","padding-top":"10px"}},[a("b",[t._v(" 嗨，"+t._s(this.$store.state.userInfo.username))])]),a("div",[a("p",{staticStyle:{color:"#fff","padding-top":"10px"}},[t._v("用户编号:"+t._s(this.$store.state.userInfo.id))])])])],1),a("el-col",{attrs:{span:16}},[a("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"0px 0px 20px 0px",height:"232px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.$t("dashboard.system notification")))])]),t._l(t.advData.slice(0,5),(function(e){return a("div",{key:e.id,staticClass:"text item fit-box"},[a("p",{staticClass:"text-style",on:{click:function(a){return t.lookLog(e.id)}}},[a("el-link",{attrs:{type:"primary"}},[a("i",{staticClass:"round"}),t._v(" "+t._s(e.title))]),a("span",[t._v(t._s(e.createdAt))])],1)])}))],2)],1)],1),a("el-row",{staticClass:"mg-b-30 user-status-list",attrs:{gutter:20}},[a("el-col",{attrs:{span:8,xs:24,sm:12,md:8,lg:8,type:"flex"}},[a("div",{staticClass:"user-status-item",on:{click:function(a){return t.gotoPage(1)}}},[a("div",{staticClass:"status-icon"},[a("i",{staticClass:"iconfont icon-daiwanshankaoshi"})]),a("div",{staticClass:"status-content"},[a("div",{staticClass:"status-num",staticStyle:{color:"#e6a23c"}},[t._v(t._s(t.vendorAllOrderCntText(2)||"0"))]),a("div",{staticClass:"status-description"},[t._v(t._s(t.$t("dashboard.待报价订单")))])])])]),a("el-col",{attrs:{span:8,xs:24,sm:12,md:8,lg:8,type:"flex"}},[a("div",{staticClass:"user-status-item",on:{click:function(a){return t.gotoPage(2)}}},[a("div",{staticClass:"status-icon"},[a("i",{staticClass:"el-icon-finished"})]),a("div",{staticClass:"status-content"},[a("div",{staticClass:"status-num",staticStyle:{color:"#e6a23c"}},[t._v(t._s(t.vendorAllOrderCntText(22)||"0"))]),a("div",{staticClass:"status-description"},[t._v(t._s(t.$t("dashboard.待确认收款订单")))])])])]),a("el-col",{attrs:{span:8,xs:24,sm:12,md:8,lg:8,type:"flex"}},[a("div",{staticClass:"user-status-item",on:{click:function(a){return t.gotoPage(3)}}},[a("div",{staticClass:"status-icon"},[a("i",{staticClass:"el-icon-truck"})]),a("div",{staticClass:"status-content"},[a("div",{staticClass:"status-num",staticStyle:{color:"#e6a23c"}},[t._v(t._s(t.vendorAllOrderCntText(5)||"0"))]),a("div",{staticClass:"status-description"},[t._v(t._s(t.$t("dashboard.待发货订单")))])])])])],1),a("div",{staticClass:"chart mg-b-30"},[a("div",{staticClass:"chart-header"},[a("div",{staticClass:"chart-title"},[t._v(t._s(t.$t("dashboard.销售统计")))]),a("div",{staticClass:"chart-right"},[a("el-date-picker",{attrs:{"picker-options":t.pickerOptions0,"value-format":"yyyyMMdd",type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":t.$t("dashboard.起始"),"end-placeholder":t.$t("dashboard.截止")},on:{change:t.dateChange},model:{value:t.statisticDate,callback:function(a){t.statisticDate=a},expression:"statisticDate"}}),a("el-select",{staticClass:"mg-l-20",staticStyle:{width:"200px"},attrs:{placeholder:t.$t("dashboard.日期范围")},on:{change:t.dateRangeChange},model:{value:t.statisticDateRange,callback:function(a){t.statisticDateRange=a},expression:"statisticDateRange"}},t._l(t.dateArr,(function(e,s){return a("el-option",{key:e,attrs:{label:t.$t(e),value:s}})})),1)],1)]),a("div",{staticClass:"chart-body",staticStyle:{width:"100%"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowCart,expression:"isShowCart"}],ref:"chart",staticStyle:{width:"100%",height:"400px"},attrs:{id:"dashboardCharts"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowCart,expression:"!isShowCart"}],staticClass:"tx-center",staticStyle:{height:"100px","line-height":"100px",color:"#909399"}},[t._v(t._s(t.$t("invoice.Nodata")))])])]),a("el-row",{staticClass:"mg-b-30",attrs:{gutter:20}},[a("el-col",{attrs:{span:16,type:"flex"}},[a("div",{staticClass:"day-statistics mg-b-30"},[a("div",{staticClass:"day-statistics-title"},[t._v(t._s(t.$t("dashboard.每日统计")))]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"date",label:t.$t("dashboard.日期")},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"tableTiop"},[t._v(t._s(t.$t("dashboard.日期")))])]},proxy:!0}])}),a("el-table-column",{attrs:{prop:"customerCnt",label:t.$t("dashboard.下单客户量")},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"tableTiop"},[t._v(t._s(t.$t("dashboard.下单客户量")))])]},proxy:!0}])}),a("el-table-column",{attrs:{prop:"orderCnt",label:t.$t("dashboard.订单数")},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"tableTiop"},[t._v(t._s(t.$t("dashboard.订单数")))])]},proxy:!0}])}),a("el-table-column",{attrs:{prop:"amount",label:t.$t("dashboard.销售额US$")},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"tableTiop"},[t._v(t._s(t.$t("dashboard.销售额US$"))+" ")])]},proxy:!0}])})],1),a("div",{staticClass:"day-statistics-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.showMoreReference}},[t._v(t._s(t.$t("dashboard.显示更多")))])],1)],1)]),a("el-col",{attrs:{span:8,type:"flex"}},[a("div",{staticClass:"info-aggregation mg-b-30"},[a("div",{staticClass:"info-aggregation-title"},[t._v(t._s(t.$t("dashboard.信息汇总")))]),a("el-divider"),a("div",{staticClass:"info-aggregation-list"},[a("div",{staticClass:"item",on:{click:function(a){return t.gotoPage(8)}}},[a("div",{staticClass:"icon"},[a("i",{staticClass:"el-icon-sell"})]),a("div",{staticClass:"text"},[a("div",[t._v(t._s(t.$t("dashboard.上架商品数"))+": "),a("b",[t._v(t._s(t.vendorDashboardSummary.productCnt||"0"))])])])]),a("el-divider"),a("div",{staticClass:"item",on:{click:function(a){return t.gotoPage(5)}}},[a("div",{staticClass:"icon"},[a("i",{staticClass:"el-icon-user-solid"})]),a("div",{staticClass:"text"},[a("div",[t._v(t._s(t.$t("dashboard.下单客户量"))+": "),a("b",[t._v(t._s(t.vendorDashboardSummary.customerCnt||"0"))])])])]),a("el-divider"),a("div",{staticClass:"item",on:{click:function(a){return t.gotoPage(1)}}},[a("div",{staticClass:"icon"},[a("i",{staticClass:"el-icon-s-order"})]),a("div",{staticClass:"text"},[a("div",[t._v(t._s(t.$t("dashboard.订单数"))+": "),a("b",[t._v(t._s(t.vendorDashboardSummary.orderCnt||"0"))])])])]),a("el-divider"),a("div",{staticClass:"item",on:{click:function(a){return t.gotoPage(10)}}},[a("div",{staticClass:"icon"},[a("i",{staticClass:"fa fa-exchange"})]),a("div",{staticClass:"text"},[a("div",[t._v(t._s(t.$t("dashboard.销售额US$"))+": "),a("b",[t._v(t._s(Number(t.vendorDashboardSummary.orderTotalAmount).toFixed(2)||"0"))])])])]),a("el-divider")],1)],1)])],1)],1),a("el-dialog",{attrs:{loading:t.moreReference.loading,title:"Reference",visible:t.moreReference.isShow,width:"800px"},on:{"update:visible":function(a){return t.$set(t.moreReference,"isShow",a)}}},[a("el-divider"),a("div",{staticClass:"mg-t-20 mg-b-20 mg-l-20 mg-r-20"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.moreReference.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"date",label:t.$t("dashboard.日期"),width:"180"}}),a("el-table-column",{attrs:{prop:"customerCnt",label:t.$t("dashboard.下单客户量")}}),a("el-table-column",{attrs:{prop:"orderCnt",label:t.$t("dashboard.订单数"),width:"180"}}),a("el-table-column",{attrs:{prop:"amount",label:t.$t("dashboard.销售额US$"),width:"180"}})],1)],1),t.tableData.length?a("el-row",{staticClass:"mg-b-20",attrs:{gutter:20}},[a("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[a("div",[a("el-pagination",{attrs:{"current-page":t.moreReference.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.moreReference.pageSizes,"page-size":t.moreReference.rowsPerPage,total:Number(t.moreReference.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e(),a("el-divider"),a("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[a("div",[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.moreReference.isShow=!1}}},[t._v("Close")])],1)])],1),a("el-dialog",{attrs:{title:t.$t("dashboard.welcomeOurMallApp"),visible:t.createdNameDialog.isShow,width:"650px","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(a){return t.$set(t.createdNameDialog,"isShow",a)}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("p",{staticStyle:{"padding-left":"20px"}},[t._v(t._s(t.$t("dashboard.relevantInformation")))]),a("el-form",[a("el-form-item",{attrs:{label:t.$t("dashboard.yourCompany"),"label-width":t.createdNameDialog.labelW,required:""}},[a("el-input",{attrs:{placeholder:t.$t("dashboard.customersView"),"auto-complete":"off"},model:{value:t.createdNameDialog.name,callback:function(a){t.$set(t.createdNameDialog,"name",a)},expression:"createdNameDialog.name"}})],1),a("el-form-item",{attrs:{label:t.$t("dashboard.yourEmail"),"label-width":t.createdNameDialog.labelW}},[this.$store.state.userInfo.email?a("span",[t._v(" "+t._s(this.$store.state.userInfo.email)+" "),a("a",{attrs:{href:"javascript:;"},on:{click:t.changeMail}},[t._v(t._s(t.$t("dashboard.modify")))])]):a("a",{attrs:{href:"javascript:;"},on:{click:t.changeMail}},[t._v(t._s(t.$t("dashboard.add")))])])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:t.createdNameDialog.loading},on:{click:t.saveName}},[t._v(" "+t._s(t.$t("dashboard.save")))])],1)],1),a("el-dialog",{attrs:{title:t.advLook.title,visible:t.dialogVisibleLog,width:"40%"},on:{"update:visible":function(a){t.dialogVisibleLog=a}}},[a("div",{staticClass:"set-css",staticStyle:{padding:"0 20px"},domProps:{innerHTML:t._s(t.advLook.content)}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dialogVisibleLog=!1}}},[t._v(t._s(t.$t("dashboard.save")))])],1)])],1)},i=[],r=(e("14d9"),{data(){return{statisticDateRange:"3",statisticDateFrom:"",statisticDateTo:"",statisticDate:[],advData:[],advLook:{},dialogVisibleLog:!1,dateArr:{1:"dashboard.今天",2:"dashboard.7天前",3:"dashboard.30天前",4:"dashboard.90天前",5:"dashboard.一年前",6:"dashboard.自定义"},pickerOptions0:{disabledDate(t){return t.getTime()>Date.now()-864e4}},tableData:[],chartData:{columns:[this.$t("dashboard.日期"),this.$t("dashboard.销售额US$"),this.$t("dashboard.订单数")],rows:[]},moreReference:{isShow:!1,pageSizes:[10,20,50,100],page:1,rowsPerPage:10,items:[],total:0,totalPage:0,loading:!1,tableData:[]},vendorDashboardSummary:{waitCompleteCnt:"",waitDeliverCnt:"",abnormalCnt:"",syncFailCnt:"",customerCnt:"",shopCnt:"",offerItemCnt:""},dialogVisibleAddVendor:!1,addVendorDialog:{isShow:!1,loading:!1,labelW:"100px",name:"",remark:"",email:""},addVendorDialogDefault:"{}",lastVendor:[],aBg:["#343a40","#c5a46b","#f46a6a","#34c38f"],createdNameDialog:{isShow:!1,loading:!1,labelW:"150px",name:"",email:""},createdNameDialogDefault:"{}",isShowCart:!0,vendorAllOrderCnt:{}}},components:{},mounted(){this.initPageData(),this.getCharts(),this.getAdvList(),this.getVendorAllOrderCnt(),this.addVendorDialogDefault=JSON.stringify(this.addVendorDialog),this.createdNameDialogDefault=JSON.stringify(this.createdNameDialog),this.getLastVendor(),this.$store.state.userInfo.name||(this.createdNameDialog.isShow=!0)},methods:{getVendorAllOrderCnt(){this.$apiCall("api.ShopifyOrder.getVendorAllOrderCnt",{},t=>{9999==t.ErrorCode?this.vendorAllOrderCnt=t.Data.Results:10086!=t.ErrorCode&&this.$message({message:t.Message,type:"error"})})},vendorAllOrderCntText(t){let a=0;return a=22==t?this.vendorAllOrderCnt.waitVendorConfirmCnt?this.vendorAllOrderCnt.waitVendorConfirmCnt:0:this.vendorAllOrderCnt[t]?this.vendorAllOrderCnt[t]:0,a},getAdvList(){this.$apiCall("api.Notice.finds",{rType:1},t=>{9999==t.ErrorCode?this.advData=t.Data.Results.filter(t=>{if("1"==t.status)return t}):this.$message.error(t.Message)})},lookLog(t){this.dialogVisibleLog=!0,this.$apiCall("api.Notice.get",{id:t},t=>{9999==t.ErrorCode?this.advLook=t.Data.Results:this.$message.error(t.Message)})},gotoPage(t){switch(t){case 1:this.$router.push({path:"/ordersManage/2/1"});break;case 2:this.$router.push({path:"/ordersManage/2/2"});break;case 3:this.$router.push({path:"/ordersManage/2/3"});break;case 4:this.$router.push({path:"/abnormal"});break;case 5:this.$router.push({path:"/my-custom"});break;case 6:this.$router.push({path:"/shopify-orders"});break;case 7:this.$router.push({path:"/products",query:{filterParams:1}});break;case 8:this.$router.push({path:"/goods-mgr/shelves"});break;case 9:this.$router.push({name:"allOrders"});break;case 10:break}},toPage(t){t!=this.moreReference.page&&(this.moreReference.page=t),this.getTableData()},changePageSize(t){this.moreReference.rowsPerPage=t,this.moreReference.page=1,localStorage.setItem("moreReferenceRowsPerPage",t),this.getTableData()},showMoreReference(){this.moreReference.isShow=!0,this.getTableData()},getTableData(){this.moreReference.loading=!0,this.$apiCall("api.Invoice.vendorDashboardStatistic",{page:this.moreReference.page,rowsPerPage:this.moreReference.rowsPerPage},t=>{this.moreReference.loading=!1,9999==t.ErrorCode?(this.moreReference.tableData=Object.values(t.Data.Results),this.moreReference.tableData.length&&(this.moreReference.tableData.forEach(t=>{this.$set(t,"dateCode1",Number(t.dateCode)),this.$set(t,"date",t.dateCode.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3"))}),this.moreReference.total=Number(t.Data.Pagination.totalCount),this.moreReference.totalPage=Number(t.Data.Pagination.totalPage),this.moreReference.tableData=this.moreReference.tableData.sort(this.sortData))):10086!=t.ErrorCode&&this.$elementMessage(t.Message,"error")})},dateChange(){this.statisticDate.length>1&&(this.statisticDateFrom=this.$moment(this.statisticDate[0]).format("YYYYMMDD"),this.statisticDateTo=this.$moment(this.statisticDate[1]).format("YYYYMMDD"),this.getCharts(1),this.statisticDateRange="")},dateRangeChange(){let t=this.statisticDateRange;switch(t){case"1":this.statisticDateFrom=this.$moment().format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"2":this.statisticDateFrom=this.$moment().subtract(7,"d").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"3":this.statisticDateFrom=this.$moment().subtract(30,"d").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"4":this.statisticDateFrom=this.$moment().subtract(90,"d").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;case"5":this.statisticDateFrom=this.$moment().subtract(12,"M").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD");break;default:this.statisticDateFrom="",this.statisticDateTo="";break}this.statisticDate=[this.statisticDateFrom,this.statisticDateTo],this.getCharts(1)},initPageData(){this.$showLoading(),this.$apiCall("api.Invoice.vendorDashboardSummary",{},t=>{9999==t.ErrorCode?(this.vendorDashboardSummary=t.Data.Results,this.$hideLoading()):10086!=t.ErrorCode&&this.$message({message:t.Message,type:"error"})}),this.$apiCall("api.Invoice.vendorDashboardStatistic",{page:this.moreReference.page,rowsPerPage:this.moreReference.rowsPerPage},t=>{9999==t.ErrorCode?(this.tableData=Object.values(t.Data.Results),this.tableData.length&&this.tableData.forEach(t=>{this.$set(t,"dateCode1",Number(t.dateCode)),this.$set(t,"date",t.dateCode.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3"))}),this.tableData=this.tableData.reverse(),this.$hideLoading()):10086!=t.ErrorCode&&this.$message({message:t.Message,type:"error"})})},getCharts(t){const a=this.$refs.chart;t||(this.statisticDateFrom=this.$moment().subtract(1,"M").format("YYYYMMDD"),this.statisticDateTo=this.$moment().format("YYYYMMDD"),this.statisticDate=[this.statisticDateFrom,this.statisticDateTo]),this.$showLoading();let e=[];this.$apiCall("api.Invoice.vendorDashboardStatistic",{dateFrom:this.statisticDateFrom,dateTo:this.statisticDateTo},t=>{if(this.$hideLoading(),9999==t.ErrorCode){if(e=Object.values(t.Data.Results),!e.length)return void(this.isShowCart=!1);this.isShowCart=!0,e.forEach(t=>{this.$set(t,"date",t.dateCode.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3"))});const s=this.$echarts.init(a),i={title:{text:""},tooltip:{trigger:"axis"},legend:{data:[this.$t("dashboard.销售额US$"),this.$t("dashboard.订单数")]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e.map(t=>t.date)},yAxis:{type:"value"},series:[{name:this.$t("dashboard.销售额US$"),type:"line",stack:this.$t("dashboard.销售额US$"),data:e.map(t=>t.amount),smooth:!0},{name:this.$t("dashboard.订单数"),type:"line",stack:this.$t("dashboard.订单数"),data:e.map(t=>t.orderCnt),smooth:!0}]};s.setOption(i),setTimeout(()=>{s.resize()},200),window.onresize=function(){s.resize()}}else 10086!=t.ErrorCode&&this.$elementMessage(t.Message,"error")})},changeMail(){this.$root.$children[0].changeUserEmail()},saveName(){this.createdNameDialog.name?(this.createdNameDialog.loading=!0,this.$apiCall("api.User.changeByUser",{name:this.createdNameDialog.name},t=>{if(9999==t.ErrorCode){this.createdNameDialog.isShow=!1;let t=this.$store.state.userInfo;t.name=this.createdNameDialog.name,localStorage.setItem("userInfo",JSON.stringify(t)),this.$store.commit("setUserInfo",t),this.firstCustomer()}else this.$message({message:t.Message,type:"error"})})):this.$message({message:this.$t("dashboard.nameEnter"),type:"error"})},gotoCustom(t){this.$router.push({name:"myCustom",params:{item:t}})},gotoInvoice(t){this.$router.push({name:"allOrders",params:{customerName:t.customerName,id:t.id}})},getLastVendor(){this.$showLoading(),this.$apiCall("api.Relationship.findByVendor",{last:!0,page:1,rowsPerPage:4},t=>{this.$hideLoading(),9999==t.ErrorCode?(this.lastVendor=t.Data.Results,this.lastVendor.forEach(t=>{this.$apiCall("api.Relationship.getCntDetail",{relationshipId:t.id},a=>{9999==a.ErrorCode&&(t.invoiceCnt=a.Data.Results.invoiceCnt,t.totalAmount=a.Data.Results.totalAmount,t.orderCnt=a.Data.Results.orderCnt,t.skuCnt=a.Data.Results.skuCnt,t.offerSkuCnt=a.Data.Results.offerSkuCnt,this.lastVendor=[...this.lastVendor])})})):10086!=t.ErrorCode&&this.$message({message:t.Message,type:"error"})})},addVendorSaveSuccess(){this.$root.$children[0].getCnt(),this.getLastVendor()},openAddVendor(){this.addVendorDialog=JSON.parse(this.addVendorDialogDefault),this.addVendorDialog.isShow=!0},firstCustomer(){this.openAddVendor()},gotoImport(t){this.$router.push({name:"importData",query:{rid:t.id}})}}}),o=r,l=(e("a34a"),e("8f67"),e("2877")),d=Object(l["a"])(o,s,i,!1,null,"f97fb632",null);a["default"]=d.exports},"88da":function(t,a,e){},"8f67":function(t,a,e){"use strict";e("1cae")},a34a:function(t,a,e){"use strict";e("88da")}}]);