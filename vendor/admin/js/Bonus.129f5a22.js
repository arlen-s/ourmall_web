(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Bonus"],{"000a":function(t,e,a){"use strict";a("c084")},"52d1":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel Bonus-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("h2",[t._v(t._s(t.$t("mycustomer.Bonus账单明细")))])])]),a("div",{staticClass:"right"})]),a("div",{staticStyle:{"margin-bottom":"15px"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/dashboard"}}},[t._v(t._s(t.$t("mycustomer.首页")))]),a("el-breadcrumb-item",{attrs:{to:{path:"/my-custom"}}},[t._v(t._s(t.$t("mycustomer.我的客户")))]),a("el-breadcrumb-item",[t._v(t._s(t.$t("mycustomer.Bonus账单明细")))])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"pageFilter",staticClass:"page-filter"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:t.$t("mycustomer.单号查询")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.code,callback:function(e){t.$set(t.filterParams,"code",e)},expression:"filterParams.code"}})],1),a("el-form-item",[a("el-select",{attrs:{filterable:"",remote:"",clearable:"",placeholder:t.$t("mycustomer.请选择类型")},on:{change:function(e){return t.filterItem()}},model:{value:t.filterParams.symbol,callback:function(e){t.$set(t.filterParams,"symbol",e)},expression:"filterParams.symbol"}},[a("el-option",{attrs:{label:"ALL",value:""}}),a("el-option",{attrs:{label:t.$t("mycustomer.充值"),value:"1"}}),a("el-option",{attrs:{label:t.$t("mycustomer.支出"),value:"2"}})],1)],1),a("el-form-item",[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":t.$t("myinvoice.to"),"start-placeholder":t.$t("myinvoice.startDate"),"end-placeholder":t.$t("myinvoice.endDate")},on:{change:t.dateChange},model:{value:t.filterParams.date,callback:function(e){t.$set(t.filterParams,"date",e)},expression:"filterParams.date"}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.filterItem()}}},[t._v(t._s(t.$t("myinvoice.filter")))]),a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.clear()}}},[t._v(t._s(t.$t("myinvoice.clear")))])],1)],1)],1)])],1),2!=t.filterParams.symbol?[a("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:""}},[a("el-table-column",{attrs:{label:t.$t("mycustomer.类型")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.symbol?t.$t("mycustomer.充值"):t.$t("mycustomer.支出")))])]}}],null,!1,2682036760)}),a("el-table-column",{attrs:{label:t.$t("mycustomer.交易流水号"),prop:"code"}}),a("el-table-column",{attrs:{label:t.$t("mycustomer.充值时间")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.$moment.unix(e.row.timeCreated).format("YYYY-MM-DD HH:mm:ss"))+" ")])]}}],null,!1,979244261)}),a("el-table-column",{attrs:{label:t.$t("mycustomer.金额（$）"),prop:"amount"}}),a("el-table-column",{attrs:{label:t.$t("mycustomer.备注")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.remark))]),e.row.remark?t._e():a("span",[t._v("---")])]}}],null,!1,3172042890)})],1)]:[a("el-table",{ref:"gridTable2",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:""}},[a("el-table-column",{attrs:{label:t.$t("mycustomer.类型")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.symbol?t.$t("mycustomer.充值"):t.$t("mycustomer.支出")))])]}}])}),a("el-table-column",{attrs:{label:t.$t("mycustomer.订单号"),prop:"code"}}),a("el-table-column",{attrs:{label:t.$t("mycustomer.支付时间")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.$moment.unix(e.row.timeCreated).format("YYYY-MM-DD HH:mm:ss"))+" ")])]}}])}),a("el-table-column",{attrs:{label:t.$t("mycustomer.金额（$）"),prop:"amount"}})],1)]],2)],1)],1)],1),t.items.length?a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[a("div",[a("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e(),a("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:20}})],1)},s=[],o=(a("51b3"),{data:function(){return{id:this.$route.query.id,loading:!1,filterParams:{code:"",symbol:"",timeCreatedFrom:"",timeCreatedTo:""},items:[],pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("myCustomRowsPerPage")?Number(localStorage.getItem("myInvoiceRowsPerPage")):10,total:0,totalPage:0}},watch:{$route:"gotoPage"},mounted:function(){this.id=this.$route.query.id,this.getBonus()},methods:{toPage:function(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},changePageSize:function(t){this.rowsPerPage=t,localStorage.setItem("myCustomRowsPerPage",t),this.getBonus()},gotoPage:function(){this.page=this.$route.query.page?this.$route.query.page:1,this.getBonus()},getBonus:function(){var t=this;this.loading=!0,this.$apiCall("api.Relationship.bonusList",{relationshipId:this.id,code:this.filterParams.code,symbol:this.filterParams.symbol,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,page:this.page,rowsPerPage:this.rowsPerPage},(function(e){t.loading=!1,9999==e.ErrorCode?(t.items=e.Data.Results,t.total=Number(e.Data.Pagination.totalCount),t.totalPage=Number(e.Data.Pagination.totalPage),t.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0):t.$message({message:e.Message,type:"error"})}))},dateChange:function(){this.filterParams.date.length>1&&(this.filterParams.timeCreatedFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem())},filterItem:function(){1==this.$route.query.page?this.getBonus():this.$router.push({query:{page:1}})},clear:function(){this.filterParams={code:"",symbol:"",timeCreatedFrom:"",timeCreatedTo:""},this.filterItem()}},components:{}}),l=o,i=(a("000a"),a("cba8")),n=Object(i["a"])(l,r,s,!1,null,"fb86f046",null);e["default"]=n.exports},c084:function(t,e,a){}}]);