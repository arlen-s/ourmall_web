(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addCode"],{"0a5a":function(e,t,s){},f7ae:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"contentpanel transaction-page"},[t("el-link",{staticClass:"mg-r-20",attrs:{icon:"el-icon-back",underline:!1},on:{click:e.returnCode}},[e._v(e._s(e.$t("storecode.title")))]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pagebody"},[t("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("h2",[e._v(e._s("edit"!==e.type?e.$t("storecode.addtitle"):e.$t("storecode.editTitle")))]),t("el-card",[t("p",[e._v(e._s(e.$t("storecode.codename")))]),t("el-divider"),t("el-input",{attrs:{type:"text",placeholder:e.$t("storecode.nameplace"),maxlength:"60","show-word-limit":""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-card",{staticClass:"mg-t-20"},[t("p",[e._v(e._s(e.$t("storecode.codecontent")))]),t("el-divider"),t("el-input",{attrs:{type:"textarea",rows:"6",placeholder:e.$t("storecode.contentplace")},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),t("div",{staticClass:"tap-wrap mg-t-20"},[t("el-card",[t("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[t("span",[e._v(e._s(e.$t("storecode.tap")))]),t("el-link",{staticClass:"mg-l-20",attrs:{type:"primary",underline:!1},on:{click:e.openDrawer}},[e._v(e._s(e.$t("storecode.edit")))])],1),t("el-divider"),t("div",[e.form.pages.length?t("div",e._l(e.form.pages,(function(s,o){return t("span",{key:o,staticStyle:{"margin-right":"10px"}},[e._v(" "+e._s(s)+" ")])})),0):t("div",[e._v(e._s(e.$t("storecode.tapplace")))])])],1)],1),t("div",{staticClass:"tap-wrap mg-t-20 mg-l-20"},[t("el-card",[t("p",[e._v(" "+e._s(e.$t("storecode.position"))+" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("storecode.positontip"),placement:"right"}},[t("el-link",{staticClass:"mg-l-20",attrs:{type:"primary",underline:!1,icon:"el-icon-question"}})],1)],1),t("el-divider"),t("el-radio-group",{model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}},[t("el-radio",{attrs:{label:e.$t("storecode.top")}}),t("el-radio",{attrs:{label:e.$t("storecode.bottom")}})],1)],1)],1),t("el-divider"),t("div",{staticClass:"mg-t-20",staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("storecode.save")))])],1)],1)],1)],1),t("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:20}}),t("el-drawer",{attrs:{title:"请选择触发页面",visible:e.drawer,"with-header":!1},on:{"update:visible":function(t){e.drawer=t}}},[t("div",{staticStyle:{padding:"30px"}},[t("p",{staticStyle:{"margin-bottom":"30px","font-size":"16px"}},[e._v(e._s(e.$t("storecode.selecttap")))]),t("el-divider"),t("div",[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(e._s(e.$t("storecode.selectall"))+" ")]),t("div",{staticStyle:{margin:"20px 0"}}),t("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.checkedItems,callback:function(t){e.checkedItems=t},expression:"checkedItems"}},e._l(e.pages,(function(s){return t("el-checkbox",{key:s,attrs:{label:s}},[e._v(e._s(s))])})),1)],1),t("div",{staticStyle:{"margin-top":"100px"}},[t("el-button",{on:{click:function(t){e.drawer=!1}}},[e._v(e._s(e.$t("storecode.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveDrawer}},[e._v(e._s(e.$t("storecode.save")))])],1)],1)])],1)},i=[],a={data(){return{loading:!1,form:{name:"",desc:"",position:"",pages:[]},drawer:!1,checkAll:!1,checkedItems:[],pages:[this.$t("storecode.page1"),this.$t("storecode.page2"),this.$t("storecode.page3"),this.$t("storecode.page4"),this.$t("storecode.page6")],isIndeterminate:!0,configJson:[],type:""}},components:{},watch:{},mounted(){this.getConfig(),console.log(this.$route.params);let e=this.$route.params.items;this.type=this.$route.params.type,"edit"==this.type&&(this.form.name=e.name,this.form.desc=e.desc,this.form.position=e.position,this.form.pages=e.pages,this.checkedItems=e.pages)},methods:{getConfig(){this.$apiCall("api.VendorShop.getShopConfig",{},e=>{9999==e.ErrorCode&&e.Data.Results.header&&this.$store.commit("getStoreComponent",e.Data.Results)})},handleCheckAllChange(e){this.checkedItems=e?this.pages:[],this.isIndeterminate=!1},handleCheckedChange(e){let t=e.length;this.checkAll=t===this.pages.length,this.isIndeterminate=t>0&&t<this.pages.length},openDrawer(){this.drawer=!0},saveDrawer(){this.form.pages=this.checkedItems,this.drawer=!1},onSubmit(){let e={id:this.$moment().unix(),name:this.form.name,desc:this.form.desc,position:this.form.position,pages:this.form.pages};"edit"==this.type?(e.id=this.$route.params.id,this.$store.commit("editCustomCode",e)):this.$store.commit("addCustomCode",e),this.loading=!0,this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},e=>{this.loading=!1,9999==e.ErrorCode?(this.$elementMessage(this.$t("storecode.success"),"success"),this.$router.go(-1)):this.$message({message:e.Message,type:"error"})})},returnCode(){this.$router.go(-1)}}},r=a,n=(s("fbd6"),s("2877")),c=Object(n["a"])(r,o,i,!1,null,"970d6016",null);t["default"]=c.exports},fbd6:function(e,t,s){"use strict";s("0a5a")}}]);