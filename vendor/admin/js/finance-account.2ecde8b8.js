(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["finance-account"],{"1b5b":function(t,a,s){"use strict";s("9dbc")},"9dbc":function(t,a,s){},f11e:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t._self._c;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:t.loading,expression:"loading",modifiers:{fullscreen:!0}}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.3)"}},[t.$store.state.userInfo.walletOpen?[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:2}},[a("div",{staticStyle:{height:"5px"}})]),a("el-col",{attrs:{span:4}},[a("el-card",{staticClass:"amount-card"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"总余额",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),a("div",{staticClass:"center-i"},[a("i",{staticClass:"el-icon-s-finance"})]),a("div",{staticClass:"info"},[a("p",{staticClass:"type"},[t._v("钱包余额("+t._s(t.$store.state.country.symbol)+")")]),a("div",{staticClass:"amount"},[t._v(t._s(t.balance))])])],1)],1),a("el-col",{attrs:{span:4}},[a("el-card",{staticClass:"amount-card"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"可提现余额=总额-提现中的金额-冻结金额",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),a("div",{staticClass:"center-i"},[a("i",{staticClass:"iconfont icon-withdraw"})]),a("div",{staticClass:"info"},[a("p",{staticClass:"type"},[t._v("可提现金额("+t._s(t.$store.state.country.symbol)+")")]),a("div",{staticClass:"amount"},[t._v(t._s(t.withdrawAmount))])])],1)],1),a("el-col",{staticClass:"mg-b-20",attrs:{span:4}},[a("el-card",{staticClass:"amount-card"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"供应商申请提现中的金额",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),a("div",{staticClass:"center-i"},[a("i",{staticClass:"iconfont icon-withdrawaing"})]),a("div",{staticClass:"info"},[a("p",{staticClass:"type"},[t._v("提现中金额("+t._s(t.$store.state.country.symbol)+")")]),a("div",{staticClass:"amount"},[t._v(t._s(t.withdrawing))])])],1)],1),a("el-col",{attrs:{span:4}},[a("el-card",{staticClass:"amount-card"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"供应商已提现的金额总和",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),a("div",{staticClass:"center-i"},[a("i",{staticClass:"el-icon-circle-check"})]),a("div",{staticClass:"info"},[a("p",{staticClass:"type"},[t._v("已提现金额("+t._s(t.$store.state.country.symbol)+")")]),a("div",{staticClass:"amount"},[t._v(t._s(t.withdraw))])])],1)],1),a("el-col",{attrs:{span:4}},[a("el-card",{staticClass:"amount-card"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"包含订单金额冻结期内金额及平台冻结金额",placement:"top-start"}},[a("i",{staticClass:"el-icon-question"})]),a("div",{staticClass:"center-i"},[a("i",{staticClass:"iconfont icon-freeze"})]),a("div",{staticClass:"info"},[a("p",{staticClass:"type"},[t._v("冻结金额("+t._s(t.$store.state.country.symbol)+")")]),a("div",{staticClass:"amount"},[t._v(t._s(t.frozen))])])],1)],1)],1),a("el-row",[a("el-col",{staticClass:"action-wrap",attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:t.openWithdraw}},[t._v("提现")])],1)],1)]:[a("div",{staticClass:"open-wrap"},[a("h2",[t._v("设置收款方式")]),a("h3",[t._v("支持在线支付：")]),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:8}},[a("el-card",[a("p",{staticClass:"msg"},[t._v("当您激活在线支付， 客户付款时会由OurMall进行代收， 付款金额会在您的钱包显示， 支持您进行提现。")]),a("div",{staticClass:"tx-right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.openWallet}},[t._v("激活")])],1)])],1)],1)],1)],a("el-dialog",{staticClass:"dialog-withdraw",attrs:{title:"提现",visible:t.dialogWithdraw.isShow,width:"40%"},on:{"update:visible":function(a){return t.$set(t.dialogWithdraw,"isShow",a)}}},[a("el-divider"),1==t.dialogWithdraw.status?a("div",{staticClass:"dialog-body"},[a("div",{staticStyle:{padding:"15px 0","font-size":"16px"}},[t._v(" 每月"),a("b",{staticClass:"tx-danger"},[t._v("1")]),t._v("日、 "),a("b",{staticClass:"tx-danger"},[t._v("15")]),t._v("日可以提现 ")]),a("div",{staticClass:"content"},[a("el-form",{attrs:{"label-width":"120px"}},[a("h3",[t._v("提现方式")]),a("div",{staticClass:"d-flex mg-b-20"},[a("el-radio",{staticClass:"d-flex",staticStyle:{display:"flex"},attrs:{label:"2"},model:{value:t.dialogWithdraw.accountType,callback:function(a){t.$set(t.dialogWithdraw,"accountType",a)},expression:"dialogWithdraw.accountType"}},[a("span",{staticClass:"pay-logo alipay",class:{active:2==t.dialogWithdraw.accountType}})]),a("el-radio",{staticClass:"d-flex",staticStyle:{display:"flex"},attrs:{label:"1"},model:{value:t.dialogWithdraw.accountType,callback:function(a){t.$set(t.dialogWithdraw,"accountType",a)},expression:"dialogWithdraw.accountType"}},[a("span",{staticClass:"pay-logo paypal",class:{active:1==t.dialogWithdraw.accountType}})])],1),a("el-form-item",{staticClass:"mg-b-10",attrs:{label:`提现金额(${t.$store.state.country.symbol})`,required:""}},[a("el-input-number",{attrs:{min:50,max:t.withdrawAmount,precision:2,controls:!1},model:{value:t.dialogWithdraw.amount,callback:function(a){t.$set(t.dialogWithdraw,"amount",a)},expression:"dialogWithdraw.amount"}})],1),a("div",{staticClass:"mg-b-10 tx-warning"},[t._v(" 可提现金额： $"+t._s(t.withdrawAmount)+" (折合人民币约 ￥"+t._s(t.withdrawAmountCNY)+") ")]),a("div",{staticClass:"mg-b-20 tx-danger"},[t._v(" *最小提现额度为： $50， 最大为可提现金额 ")]),a("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"收款人",required:""}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:t.dialogWithdraw.name,callback:function(a){t.$set(t.dialogWithdraw,"name",a)},expression:"dialogWithdraw.name"}})],1)],1),a("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"收款账号",required:""}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:t.dialogWithdraw.account,callback:function(a){t.$set(t.dialogWithdraw,"account",a)},expression:"dialogWithdraw.account"}})],1)],1),a("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"验证方式",required:""}},[a("el-col",{attrs:{span:24}},[a("el-select",{staticClass:"mg-r-15",staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.dialogWithdraw.tokenType,callback:function(a){t.$set(t.dialogWithdraw,"tokenType",a)},expression:"dialogWithdraw.tokenType"}},[a("el-option",{key:1,attrs:{label:"邮箱",value:1}},[t._v("邮箱")]),a("el-option",{key:2,attrs:{label:"手机",value:2}},[t._v("手机")])],1),a("b",{staticClass:"mg-r-20"},[t._v(t._s(t.mobile))]),a("el-button",{attrs:{type:"primary",disabled:!(t.mobile&&!t.sec),loading:t.dialogWithdraw.tokenLoading},on:{click:t.getSendToken}},[t.sec?a("span",[t._v("("+t._s(t.sec)+")秒后可重新获取验证码")]):a("span",[t._v("获取验证码")])])],1)],1),a("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"验证码",required:""}},[a("el-col",{staticClass:"mg-r-15",attrs:{span:10}},[a("el-input",{attrs:{width:"200"},model:{value:t.dialogWithdraw.token,callback:function(a){t.$set(t.dialogWithdraw,"token",a)},expression:"dialogWithdraw.token"}})],1)],1)],1)],1)]):t._e(),2==t.dialogWithdraw.status?a("div",{staticClass:"dialog-body success"},[a("div",{staticClass:"success-text"},[a("i",{staticClass:"el-icon-success"}),t._v("提交申请成功，请等待OurMall进行审核。")]),a("div",{staticClass:"account-info"},[a("h3",[t._v("收款账号")]),a("p",[t._v("提现方式："),a("span",[t._v(t._s(1==t.dialogWithdraw.accountType?"PayPal":"AliPay"))])]),a("p",[t._v("收款人："),a("span",[t._v(t._s(t.dialogWithdraw.name))])]),a("p",[t._v("收款账号："),a("span",[t._v(t._s(t.dialogWithdraw.account))])]),a("p",[t._v("金额("+t._s(t.$store.state.country.symbol)+")："),a("span",[t._v(t._s(t.dialogWithdraw.amount))])])])]):t._e(),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==t.dialogWithdraw.status?a("el-button",{attrs:{loading:t.sendWithdrawalLoading,type:"primary"},on:{click:t.sendWithdrawal}},[t._v("确认")]):a("el-button",{on:{click:t.withdrawClose}},[t._v("关闭")])],1)],1),a("el-dialog",{staticClass:"dialog-open-wallet",attrs:{title:"您确定激活线上支付方式？",visible:t.dialogOpenWallet.isShow,width:"30%"},on:{"update:visible":function(a){return t.$set(t.dialogOpenWallet,"isShow",a)}}},[a("el-divider"),a("div",{staticClass:"dialog-body"},[a("p",[t._v("客户可以通过线上支付方式直接进行支付，划入您的OurMall钱包。")])]),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(a){t.dialogOpenWallet.isShow=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.dialogOpenWallet.loading},on:{click:t.sendOpenWallet}},[t._v("确定")])],1)],1)],2)},e=[],l={data(){return{loading:!1,dialogWithdraw:{isShow:!1,status:1,accountType:"2",amount:void 0,tokenType:1,account:"",name:"",tokenLoading:!1,token:""},dialogWithdrawDefault:"{}",balance:"0.00",withdrawAmount:"0.00",withdrawing:"0.00",withdraw:"0.00",frozen:"0.00",withdrawAmountCNY:"0.00",sec:0,time:0,sendWithdrawalLoading:!1,dialogOpenWallet:{isShow:!1,loading:!1}}},mounted(){this.dialogWithdrawDefault=JSON.stringify(this.dialogWithdraw),this.getSummary()},computed:{mobile(){let t=1==this.dialogWithdraw.tokenType?this.$store.state.userInfo.email:this.$store.state.userInfo.mobile;return t||""}},methods:{sendOpenWallet(){this.dialogOpenWallet.loading=!0,this.$apiCall("api.User.openWallet",{},t=>{"9999"==t.ErrorCode?(this.$message({message:"激活钱包成功",type:"success"}),setTimeout(()=>{location.reload()},1500)):this.$message({message:t.Message,type:"error"})})},openWallet(){this.dialogOpenWallet.isShow=!0},withdrawClose(){this.getSummary(),this.dialogWithdraw.isShow=!1},sendWithdrawal(){if(!this.dialogWithdraw.amount)return void this.$message({message:"请输入提现金额",type:"error"});if(!this.dialogWithdraw.name)return void this.$message({message:"请输入收款人",type:"error"});if(!this.dialogWithdraw.account)return void this.$message({message:"请输入收款账号",type:"error"});if(!this.mobile)return void this.$message({message:"请选择有效验证方式",type:"error"});if(!this.dialogWithdraw.token)return void this.$message({message:"请输入验证码",type:"error"});this.sendWithdrawalLoading=!0;let t={account:this.dialogWithdraw.account,accountType:this.dialogWithdraw.accountType,name:this.dialogWithdraw.name,amount:this.dialogWithdraw.amount,token:this.dialogWithdraw.token,mobile:this.mobile};this.$apiCall("api.AccountPayment.withdrawal",t,t=>{this.sendWithdrawalLoading=!1,"9999"==t.ErrorCode?(this.dialogWithdraw.status=2,this.getSummary()):this.$message({message:t.Message,type:"error"})})},getSendToken(){this.dialogWithdraw.tokenLoading=!0,this.$apiCall("api.AccountPayment.sendToken",{mobile:this.mobile},t=>{this.dialogWithdraw.tokenLoading=!1,"9999"==t.ErrorCode?(this.$message({message:"验证码已发送到 "+this.mobile,type:"success"}),this.sec=60,this.time=setInterval(()=>{this.sec>0?this.sec--:(clearInterval(this.time),this.sec=0)},1e3)):this.$message({message:t.Message,type:"error"})})},openWithdraw(){this.dialogWithdraw=JSON.parse(this.dialogWithdrawDefault),this.time=0,this.sec=0,this.dialogWithdraw.isShow=!0},getSummary(){this.$store.state.userInfo.walletOpen&&(this.loading=!0,this.$apiCall("api.AccountPayment.getSummary",{},t=>{if(this.loading=!1,"9999"==t.ErrorCode){let a=t.Data.Results;this.balance=Number(a.balance)||"0.00",this.withdrawAmount=Number(a.withdrawAmount)||"0.00",this.withdrawing=Number(a.withdrawing)||"0.00",this.withdraw=Number(a.withdraw)||"0.00",this.frozen=Number(a.frozen)||"0.00",this.withdrawAmountCNY=Number(a.withdrawAmountCNY)||"0.00"}else this.$message({message:t.Message,type:"error"})}))}}},o=l,r=(s("1b5b"),s("2877")),n=Object(r["a"])(o,i,e,!1,null,"d1476ace",null);a["default"]=n.exports}}]);