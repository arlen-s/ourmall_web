(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["transactionDetail"],{"0554":function(t,e,a){"use strict";a("638c")},"0fc3":function(t,e,a){},"1c0e":function(t,e,a){"use strict";a("96de")},"2aab":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel transaction-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("i",{staticClass:"el-icon-s-finance"}),a("h2",[t._v(t._s(t.$t("withdraw.客户明细")))])])]),a("div",{staticClass:"right"})]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"pageFilter",staticClass:"page-filter"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:t.$t("withdraw.上传物流单号时间")}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placement:"top",type:"daterange",align:"right","unlink-panels":"","range-separator":t.$t("myinvoice.to"),"start-placeholder":t.$t("myinvoice.startDate"),"end-placeholder":t.$t("myinvoice.endDate")},on:{change:t.dateChange},model:{value:t.filterParams.date,callback:function(e){t.$set(t.filterParams,"date",e)},expression:"filterParams.date"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("transaction.filter")))])],1)],1)],1)])],1),a("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark","row-key":function(t){return t.id}}},[a("el-table-column",{attrs:{label:t.$t("mycustomer.customersName")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.funcName||"--"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("withdraw.发货物流票数")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.quantity))])]}}])})],1),t.items.length?a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[a("div",[a("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.gotoPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1)],1)],1)],1)])},s=[],i=(a("a9e3"),{data:function(){return{loading:!1,vendorId:localStorage.getItem("vendorId"),pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("transactionRowsPerPage")?Number(localStorage.getItem("transactionRowsPerPage")):10,items:[],selectLoading:!1,selectArr:[],total:0,totalPage:0,filterParams:{date:[],timeCreatedFrom:"",timeCreatedTo:""}}},components:{},watch:{},mounted:function(){this.getItem()},methods:{gotoPage:function(t){this.page=t,this.getItem()},dateChange:function(){null==this.filterParams.date&&(this.filterParams.date=[],this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="",this.filterItem()),this.filterParams.date.length>1&&(this.filterParams.timeCreatedFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem())},filterItem:function(){this.getItem()},getItem:function(){var t=this;this.loading=!0,this.$apiCall("api.Invoice.getOrderNumber",{pageNum:this.page,pageRow:this.rowsPerPage,timeFrom:this.filterParams.timeCreatedFrom,timeTo:this.filterParams.timeCreatedTo},(function(e){t.loading=!1,9999==e.ErrorCode?(t.items=e.Data.Results.data,t.total=Number(e.Data.Results.totalCount),t.totalPage=Number(e.Data.Results.pageNum)):t.$message({message:e.Message,type:"error"})}))}}}),l=i,n=(a("2e2b"),a("2877")),o=Object(n["a"])(l,r,s,!1,null,"1bc7d6e8",null);e["default"]=o.exports},"2e2b":function(t,e,a){"use strict";a("7cf0")},"638c":function(t,e,a){},"7cf0":function(t,e,a){},8081:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel transaction-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("i",{staticClass:"el-icon-s-finance"}),a("h2",[t._v(t._s(t.$t("withdraw.店铺销量统计")))])])]),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.exportOrder}},[t._v(t._s(t.$t("quotation.导出")))])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"pageFilter",staticClass:"page-filter"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:t.$t("withdraw.店长名称")+":"}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("accountIds")}},model:{value:t.filterParams.accountIds,callback:function(e){t.$set(t.filterParams,"accountIds",e)},expression:"filterParams.accountIds"}},t._l(t.storeList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.customerName,value:t.customerId}})})),1)],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"",placement:t.placement,"range-separator":"-","start-placeholder":t.$t("bill.开始日期"),"end-placeholder":t.$t("bill.结束日期"),"value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.timer,callback:function(e){t.timer=e},expression:"timer"}})],1)],1)],1)])],1),a("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:t.$t("withdraw.店长名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.customerName||"--"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("withdraw.销售数量")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.saleNum))])]}}])}),a("el-table-column",{attrs:{label:t.$t("withdraw.销售总金额")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.totalAmount))])]}}])}),a("el-table-column",{attrs:{label:t.$t("withdraw.历史总佣金")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.totalHistoricalCommission))])]}}])}),a("el-table-column",{attrs:{label:t.$t("withdraw.当前未提现佣金")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.commissionBalance))])]}}])}),a("el-table-column",{attrs:{label:t.$t("withdraw.历史已提现佣金")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.totalHistoricalWithdrawnCommission))])]}}])}),a("el-table-column",{attrs:{label:t.$t("withdraw.创建时间")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.timeCreated))])]}}])})],1),t.items.length?a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[a("div",[a("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1)],1)],1)],1)])},s=[],i=(a("a9e3"),{data:function(){return{loading:!1,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("transactionRowsPerPage")?Number(localStorage.getItem("transactionRowsPerPage")):10,items:[],selectLoading:!1,selectArr:[],total:0,totalPage:0,filterParams:{accountIds:""},timer:"",storeList:[],placement:"bottom-end"}},components:{},watch:{},mounted:function(){this.getItem(),this.getShopName()},methods:{getShopName:function(){var t=this;this.storeList=[],this.$apiCall("api.Relationship.findByVendor",{},(function(e){9999==e.ErrorCode?t.storeList=e.Data.Results:t.$message({message:e.Message,type:"error"})}))},exportOrder:function(){var t=this;this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var e=function(t){document.getElementById("ifilePro").src=t};this.$apiCall("api.AccountPayment.findByVendorGroupDate",{timeCreatedFrom:this.timer?this.timer[0]:"",timeCreatedTo:this.timer?this.timer[1]:"",customerId:this.filterParams.accountIds,isExport:1},(function(a){"9999"==a.ErrorCode?(t.$elementMessage(t.$t("orders.success"),"success"),e(a.Data.Results)):(t.$elementMessage(a.Message,"error"),"1002"!=a.ErrorCode&&"1003"!=a.ErrorCode||t.$userFailure(t)),t.$hideLoading()}))},toPage:function(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},changePageSize:function(t){this.rowsPerPage=t,localStorage.setItem("transactionRowsPerPage",t),this.getItem()},gotoPage:function(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()},changeDate:function(){this.getItem()},filterItem:function(){this.getItem()},getItem:function(){var t=this;this.loading=!0,this.$apiCall("api.AccountPayment.findByVendorGroupDate",{page:this.page,rowsPerPage:this.rowsPerPage,timeCreatedFrom:this.timer?this.timer[0]:"",timeCreatedTo:this.timer?this.timer[1]:"",customerId:this.filterParams.accountIds},(function(e){t.loading=!1,9999==e.ErrorCode?(t.items=e.Data.Results,t.total=Number(e.Data.Pagination.totalCount),t.totalPage=Number(e.Data.Pagination.totalPage)):t.$message({message:e.Message,type:"error"})}))}}}),l=i,n=(a("dc2e"),a("2877")),o=Object(n["a"])(l,r,s,!1,null,"6941dde5",null);e["default"]=o.exports},"96de":function(t,e,a){},a15a9:function(t,e,a){"use strict";a("0fc3")},b24b:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel transaction-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("i",{staticClass:"el-icon-s-finance"}),a("h2",[t._v(t._s(t.$t("withdraw.提现列表")))])])]),a("div",{staticClass:"right"})]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"pageFilter",staticClass:"page-filter"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",[a("el-select",{attrs:{filterable:"",remote:"","remote-method":t.remoteMethodCustom,loading:t.selectLoading,placeholder:t.$t("myinvoice.pleaseCusName"),clearable:""},on:{change:function(e){return t.filterItem("relationshipId")},clear:t.close},model:{value:t.filterParams.name,callback:function(e){t.$set(t.filterParams,"name",e)},expression:"filterParams.name"}},t._l(t.selectArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.customerName,value:t.customerName}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("withdraw.提现方式")}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("drawType")}},model:{value:t.filterParams.drawType,callback:function(e){t.$set(t.filterParams,"drawType",e)},expression:"filterParams.drawType"}},t._l(t.typeArrMail,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("transaction.CreateDate")}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placement:"top",type:"daterange",align:"right","unlink-panels":"","range-separator":t.$t("myinvoice.to"),"start-placeholder":t.$t("myinvoice.startDate"),"end-placeholder":t.$t("myinvoice.endDate")},on:{clear:function(e){return t.clearFilter("date")},change:t.dateChange},model:{value:t.filterParams.date,callback:function(e){t.$set(t.filterParams,"date",e)},expression:"filterParams.date"}})],1),a("el-form-item",{attrs:{label:t.$t("withdraw.accountPayee")}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("accountPayee")}},model:{value:t.filterParams.accountPayee,callback:function(e){t.$set(t.filterParams,"accountPayee",e)},expression:"filterParams.accountPayee"}},t._l(t.accountPayeeArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("transaction.filter"))+" ")]),a("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v(t._s(t.$t("transaction.clear"))+" ")])],1)],1)],1)])],1),a("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark","row-key":function(t){return t.id}}},[a("el-table-column",{attrs:{label:t.$t("mycustomer.customersName")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.customerName||"--"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("withdraw.提现方式")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.drawType?t.$t("余额"):t.$t("线下")))])]}}])}),a("el-table-column",{attrs:{label:t.$t("withdraw.状态")},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.drawStatus?a("span",[t._v("待审核")]):2==e.row.drawStatus?a("span",[t._v("通过")]):a("span",[t._v("拒绝")])]}}])}),a("el-table-column",{attrs:{label:""+t.$t("withdraw.tradeAmount")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.amount||"--"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("quotation.备注")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.remark||"---"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.operate"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.drawStatus?a("div",[a("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(a){return t.changeStatus("2",e.row)}}},[t._v(" "+t._s(t.$t("withdraw.agree"))+" ")]),a("el-link",{staticClass:"mg-r-20",attrs:{type:"danger"},on:{click:function(a){return t.changeStatus("3",e.row)}}},[t._v(" "+t._s(t.$t("withdraw.reject"))+" ")])],1):t._e()]}}])})],1),t.items.length?a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[a("div",[a("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1)],1)],1)],1)])},s=[],i=a("ade3"),l=(a("a9e3"),a("e9c4"),a("d3b7"),a("159b"),a("b0c0"),{data:function(){var t;return t={loading:!1,vendorId:localStorage.getItem("vendorId"),pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("transactionRowsPerPage")?Number(localStorage.getItem("transactionRowsPerPage")):10,items:[],selectLoading:!1,selectArr:[],total:0,totalPage:0,typeArrMail:[{value:"1",label:"余额"},{value:"2",label:"线下"}],filterParams:{name:"",accountPayee:"",tradeStatus:"",tradeType:"",date:[],drawType:"",timeCreatedFrom:"",timeCreatedTo:"",creditStatus:"2",relationshipId:""},accountPayeeArr:[{id:1,name:"待审批"},{id:2,name:"已审批"}]},Object(i["a"])(t,"selectArr",[]),Object(i["a"])(t,"filterParamsDefault","{}"),t},components:{},watch:{},mounted:function(){this.getItem(),this.filterParamsDefault=JSON.stringify(this.filterParams)},methods:{remoteMethodCustom:function(t){var e=this;this.selectArr=[],t&&(this.selectLoading=!0,this.$apiCall("api.Relationship.findByVendor",{name:t},(function(t){e.selectLoading=!1,9999==t.ErrorCode?e.selectArr=t.Data.Results:e.$message({message:t.Message,type:"error"})})))},toPage:function(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},changeStatus:function(t,e){var a=this;this.$apiCall("api.CustomerWithdrawal.checkStatus",{drawStatus:t,id:e.id},(function(t){a.selectLoading=!1,9999==t.ErrorCode?a.getItem():a.$message({message:t.Message,type:"error"})}))},changePageSize:function(t){this.rowsPerPage=t,localStorage.setItem("transactionRowsPerPage",t),this.getItem()},gotoPage:function(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()},dateChange:function(){this.filterParams.date.length>1&&(this.filterParams.timeCreatedFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem())},clearFilter:function(t){switch(t){case"tradeStatus":this.filterParams.tradeStatus="";break;case"accountPayee":this.filterParams.accountPayee="";break;case"date":this.filterParams.date=[],this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="";break;default:this.filterParams=JSON.parse(this.filterParamsDefault);break}this.filterItem()},filterItem:function(t){var e=this;this.$refs.gridTable.clearSelection(),"relationshipId"==t?(this.selectArr.forEach((function(t){t.customerName==e.filterParams.name&&(e.filterParams.relationshipId=t.id)})),this.getItem()):1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}}),1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},close:function(){this.selectArr=[],this.filterParams.relationshipId="",this.getItem()},getItem:function(t){var e=this;console.log(this.filterParams.creditStatus,"this.filterParams.creditStatus"),this.loading=!0,this.$apiCall("api.CustomerWithdrawal.get",{page:this.page,rowsPerPage:this.rowsPerPage,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,customerId:this.filterParams.relationshipId,drawType:this.filterParams.drawType,drawStatus:this.filterParams.accountPayee},(function(t){e.loading=!1,9999==t.ErrorCode?(e.items=t.Data.Results,e.total=Number(t.Data.Pagination.totalCount),e.totalPage=Number(t.Data.Pagination.totalPage)):e.$message({message:t.Message,type:"error"})}))}}}),n=l,o=(a("a15a9"),a("2877")),c=Object(o["a"])(n,r,s,!1,null,"5bbc44b4",null);e["default"]=c.exports},c330:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentpanel transaction-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("i",{staticClass:"el-icon-s-finance"}),a("h2",[t._v(t._s(t.$t("transaction.title")))])])]),a("div",{staticClass:"right"})]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:t.$t("transaction.正常账单"),name:"2"}},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"pageFilter",staticClass:"page-filter"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:t.$t("transaction.CreateDate")}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":t.$t("myinvoice.to"),"start-placeholder":t.$t("myinvoice.startDate"),"end-placeholder":t.$t("myinvoice.endDate")},on:{clear:function(e){return t.clearFilter("date")},change:t.dateChange},model:{value:t.filterParams.date,callback:function(e){t.$set(t.filterParams,"date",e)},expression:"filterParams.date"}})],1),a("el-form-item",[a("el-radio-group",{attrs:{size:"mini"},on:{change:t.filterDate},model:{value:t.dateFilter,callback:function(e){t.dateFilter=e},expression:"dateFilter"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v(t._s(t.$t("transaction.today")))]),a("el-radio-button",{attrs:{label:"2"}},[t._v(t._s(t.$t("transaction.yestoday"))+" ")]),a("el-radio-button",{attrs:{label:"3"}},[t._v(t._s(t.$t("transaction.last7Days"))+" ")]),a("el-radio-button",{attrs:{label:"4"}},[t._v(t._s(t.$t("transaction.last30Days"))+" ")])],1)],1),a("el-form-item",[a("el-input",{attrs:{placeholder:t.$t("transaction.paymentCode"),clearable:""},on:{clear:function(e){return t.clearFilter("paymentCode")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.paymentCode,callback:function(e){t.$set(t.filterParams,"paymentCode",e)},expression:"filterParams.paymentCode"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:t.$t("transaction.third"),clearable:""},on:{clear:function(e){return t.clearFilter("code")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.code,callback:function(e){t.$set(t.filterParams,"code",e)},expression:"filterParams.code"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:t.$t("transaction.vendorName"),clearable:""},on:{clear:function(e){return t.clearFilter("vendorName")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.vendorName,callback:function(e){t.$set(t.filterParams,"vendorName",e)},expression:"filterParams.vendorName"}})],1),a("el-form-item",{attrs:{label:t.$t("transaction.tradeType")}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("tradeType")}},model:{value:t.filterParams.tradeType,callback:function(e){t.$set(t.filterParams,"tradeType",e)},expression:"filterParams.tradeType"}},t._l(t.tradeTypeArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("transaction.tradeStatus")}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("tradeStatus")}},model:{value:t.filterParams.tradeStatus,callback:function(e){t.$set(t.filterParams,"tradeStatus",e)},expression:"filterParams.tradeStatus"}},t._l(t.tradeStatusArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("transaction.accountPayee")}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("accountPayee")}},model:{value:t.filterParams.accountPayee,callback:function(e){t.$set(t.filterParams,"accountPayee",e)},expression:"filterParams.accountPayee"}},t._l(t.accountPayeeArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-input",{attrs:{placeholder:t.$t("discount.订单编号"),clearable:""},on:{clear:function(e){return t.clearFilter("shopifyOrder")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.shopifyOrder,callback:function(e){t.$set(t.filterParams,"shopifyOrder",e)},expression:"filterParams.shopifyOrder"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("transaction.filter"))+" ")]),a("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v(t._s(t.$t("transaction.clear"))+" ")])],1)],1)],1)])],1),a("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark","row-key":function(t){return t.id}}},[a("el-table-column",{attrs:{label:t.$t("transaction.CreateDate")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.$moment.unix(e.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.paymentCode")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sysCode||"---"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.third")},scopedSlots:t._u([{key:"default",fn:function(e){return["96"==e.row.code||"97"==e.row.code||"98"==e.row.code||"99"==e.row.code?a("span",[t._v("---")]):a("span",[t._v(t._s(e.row.code||"---"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.vendorName")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.customerName||"---"))])]}}])}),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?a("el-table-column",{attrs:{label:t.$t("transaction.仓库")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.warehouseName||"--"))])]}}],null,!1,605806532)}):t._e(),a("el-table-column",{attrs:{label:t.$t("transaction.tradeType")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.filterText("tradeType",e.row.type)))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.tradeAmount")+"("+t.$store.state.country.symbol+")"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.status?a("span",{staticClass:"tx-danger"},[t._v("- "+t._s(e.row.totalAmount))]):a("span",[t._v(t._s(e.row.totalAmount))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.tradeStatus")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.filterText("tradeStatus",e.row.status)))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.paymentType")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.filterText("platformType",e.row.platformType)))])]}}])}),a("el-table-column",{attrs:{label:t.$t("quotation.备注")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.remark||"---"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.operate"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-link",{staticClass:"mg-r-20",attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite)||"1"!=e.row.type,type:"primary"},on:{click:function(a){return t.openExportDetail(e.row)}}},[t._v(" "+t._s(t.$t("transaction.detailView"))+" ")])],1)]}}])})],1)],1)],1)],1),t.items.length?a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[a("div",[a("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),a("el-tab-pane",{attrs:{label:t.$t("transaction.异常账单"),name:"1"}},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{ref:"pageFilter",staticClass:"page-filter"},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",[a("el-radio-group",{attrs:{size:"mini"},on:{change:t.filterDate},model:{value:t.dateFilter,callback:function(e){t.dateFilter=e},expression:"dateFilter"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v(t._s(t.$t("transaction.today")))]),a("el-radio-button",{attrs:{label:"2"}},[t._v(t._s(t.$t("transaction.yestoday"))+" ")]),a("el-radio-button",{attrs:{label:"3"}},[t._v(t._s(t.$t("transaction.last7Days"))+" ")]),a("el-radio-button",{attrs:{label:"4"}},[t._v(t._s(t.$t("transaction.last30Days"))+" ")])],1)],1),a("el-form-item",[a("el-input",{attrs:{placeholder:t.$t("transaction.paymentCode"),clearable:""},on:{clear:function(e){return t.clearFilter("paymentCode")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.paymentCode,callback:function(e){t.$set(t.filterParams,"paymentCode",e)},expression:"filterParams.paymentCode"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:t.$t("transaction.third"),clearable:""},on:{clear:function(e){return t.clearFilter("code")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.code,callback:function(e){t.$set(t.filterParams,"code",e)},expression:"filterParams.code"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:t.$t("transaction.vendorName"),clearable:""},on:{clear:function(e){return t.clearFilter("vendorName")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.vendorName,callback:function(e){t.$set(t.filterParams,"vendorName",e)},expression:"filterParams.vendorName"}})],1),a("el-form-item",{attrs:{label:t.$t("transaction.tradeType")}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("tradeType")}},model:{value:t.filterParams.tradeType,callback:function(e){t.$set(t.filterParams,"tradeType",e)},expression:"filterParams.tradeType"}},t._l(t.tradeTypeArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("transaction.tradeStatus")}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("tradeStatus")}},model:{value:t.filterParams.tradeStatus,callback:function(e){t.$set(t.filterParams,"tradeStatus",e)},expression:"filterParams.tradeStatus"}},t._l(t.tradeStatusArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("transaction.accountPayee")}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("accountPayee")}},model:{value:t.filterParams.accountPayee,callback:function(e){t.$set(t.filterParams,"accountPayee",e)},expression:"filterParams.accountPayee"}},t._l(t.accountPayeeArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-input",{attrs:{placeholder:t.$t("discount.订单编号"),clearable:""},on:{clear:function(e){return t.clearFilter("shopifyOrder")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.shopifyOrder,callback:function(e){t.$set(t.filterParams,"shopifyOrder",e)},expression:"filterParams.shopifyOrder"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("transaction.filter"))+" ")]),a("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v(t._s(t.$t("transaction.clear"))+" ")])],1)],1)],1)])],1),a("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark","row-key":function(t){return t.id}}},[a("el-table-column",{attrs:{label:t.$t("transaction.CreateDate")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.$moment.unix(e.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.paymentCode")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sysCode||"---"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.third")},scopedSlots:t._u([{key:"default",fn:function(e){return["96"==e.row.code||"97"==e.row.code||"98"==e.row.code||"99"==e.row.code?a("span",[t._v("---")]):a("span",[t._v(t._s(e.row.code||"---"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.vendorName")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.customerName||"---"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.tradeType")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.filterText("tradeType",e.row.type)))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.交易"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"tx-danger"},[t._v(" "+t._s(Number(e.row.bonusAmount).toFixed(2)))]),t._v(" "),a("br"),a("span",[t._v(t._s(Number(e.row.creditAmount).toFixed(2)))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.tradeStatus")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.filterText("tradeStatus",e.row.status)))])]}}])}),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?a("el-table-column",{attrs:{label:t.$t("transaction.仓库")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.warehouseName||"--"))])]}}],null,!1,605806532)}):t._e(),a("el-table-column",{attrs:{label:t.$t("transaction.paymentType")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.filterText("platformType",e.row.platformType)))])]}}])}),a("el-table-column",{attrs:{label:t.$t("quotation.备注")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.remark||"---"))])]}}])}),a("el-table-column",{attrs:{label:t.$t("transaction.operate"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-link",{staticClass:"mg-r-20",attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite)||"1"!=e.row.type,type:"primary"},on:{click:function(a){return t.openExportDetail(e.row)}}},[t._v(" "+t._s(t.$t("transaction.detailView"))+" ")]),t._v(" "),a("br"),a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.setOrder(e.row)}}},[t._v("处理")])],1)]}}])})],1)],1)],1)],1),t.items.length?a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[a("div",[a("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1)],1)],1),a("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:20}}),a("el-dialog",{staticClass:"dialog-open-custom",attrs:{title:t.$t("transaction.exportTitle"),visible:t.viewDetail.isShow,width:"50%"},on:{close:function(e){t.viewDetail.isShow=!1}}},[a("el-divider"),a("div",{staticClass:"dialog-body"},[a("el-row",{staticClass:"tltle"},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.exportTime"))+"："+t._s(t.$moment().format("YYYY-MM-DD HH:mm:ss"))+" ")])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.Petitioner"))+"："+t._s(t.$store.state.userInfo.name)+" ")])])],1),t._l(t.viewDetail.items,(function(e,r){return a("div",{key:r,staticClass:"item-wrap"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.CreateDate"))+"："+t._s(t.$moment.unix(e.timeCreated).format("YYYY-MM-DD HH:mm:ss"))+" ")])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.paymentCode"))+"："+t._s(e.sysCode)+" ")])])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.tradeType"))+"："+t._s(t.filterText("tradeType",e.type))+" ")])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.tradeAmount")+"("+t.$store.state.country.symbol+")")+"："+t._s(e.totalAmount)+" ")])])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.third"))+"："+t._s(e.code)+" ")])])],1)],1)}))],2),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.viewDetail.isShow=!1}}},[t._v(t._s(t.$t("transaction.cancel")))]),a("el-button",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary",loading:t.viewDetail.exportLoading},on:{click:t.exportDetailFn}},[t._v(" "+t._s(t.$t("transaction.export"))+" ")])],1)],1),a("DialogDetail",{attrs:{data:t.dialogDetailData}})],1)},s=[],i=(a("a9e3"),a("e9c4"),a("d81d"),a("b64b"),a("b0c0"),a("d3b7"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.$t("transaction.支付明细"),visible:t.data.isShow,width:"990px","custom-class":"d-detail"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)}}},[a("el-divider"),a("div",{staticClass:"d-body"},[a("div",{staticClass:"t-table"},[a("div",{staticClass:"t-header"},[a("div",{staticClass:"c c1"},[t._v(t._s(t.$t("transaction.订单类型")))]),a("div",{staticClass:"c c1"},[t._v(t._s(t.$t("transaction.第三方订单")))]),a("div",{staticClass:"c c2"},[t._v(t._s(t.$t("transaction.平台订单号")))]),a("div",{staticClass:"c c3"},[t._v(t._s(t.$t("transaction.实际支付总额"))+"("+t._s(t.$store.state.country.shopCurrency)+")")]),a("div",{staticClass:"c c4"},[t._v(t._s(t.$t("transaction.实际支付运费"))+"("+t._s(t.$store.state.country.shopCurrency)+")")]),a("div",{staticClass:"c c5"},[t._v(t._s(t.$t("transaction.实际支付商品总额"))+"("+t._s(t.$store.state.country.shopCurrency)+")")]),a("div",{staticClass:"c c6"},[t._v(t._s(t.$t("transaction.SKU明细")))]),a("div",{staticClass:"c c7"},[t._v(t._s(t.$t("transaction.实际支付商品单价"))+"("+t._s(t.$store.state.country.shopCurrency)+")")]),a("div",{staticClass:"c c8"},[t._v(t._s(t.$t("transaction.商品数量")))]),a("div",{staticClass:"c c9"},[t._v(t._s(t.$t("transaction.重量"))+"(g)")])]),a("div",{staticClass:"t-body"},t._l(t.data.items,(function(e){return a("div",{key:e.id,staticClass:"t-row"},[a("div",{staticClass:"c c1"},[t._v(t._s(1==e.shippingType?t.$t("transaction.批发单"):t.$t("transaction.自提单")))]),a("div",{staticClass:"c c1"},[t._v(t._s(e.codeName))]),a("div",{staticClass:"c c2"},[t._v(t._s(e.orderId))]),a("div",{staticClass:"c c3"},[t._v(t._s(e.payTotalAmount))]),a("div",{staticClass:"c c4"},[t._v(t._s(e.shippingAllAmount))]),a("div",{staticClass:"c c5"},[t._v(t._s(e.itemAllAmount))]),a("div",{staticClass:"c c6-9"},t._l(e.items,(function(e){return a("div",{key:e.id,staticClass:"c-sub"},[a("div",{staticClass:"c c6"},[t._v(t._s(e.vendorSku))]),a("div",{staticClass:"c c7"},[t._v(t._s(e.vendorPrice))]),a("div",{staticClass:"c c8"},[t._v(t._s(e.quantity))]),a("div",{staticClass:"c c9"},[t._v(t._s(Number(e.weight)*Number(e.quantity)))])])})),0)])})),0)])]),a("el-divider"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.data.isShow=!1}}},[t._v(t._s(t.$t("transaction.cancel")))]),a("el-button",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary",loading:t.data.loading},on:{click:t.exportDetailFn}},[t._v(" "+t._s(t.$t("transaction.export"))+" ")])],1)],1)}),l=[],n={props:["data"],methods:{exportDetailFn:function(){var t=this;this.data.loading=!0,0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>'),console.log(this.data.ids),this.$apiCall("api.AccountPayment.exportPayment",{ids:this.data.ids,isNew:1},(function(e){t.data.loading=!1,"9999"==e.ErrorCode?(document.getElementById("ifilePro").src=e.Data.Results.file,t.$elementMessage(t.$t("myinvoice.exportSuccess"),"success"),t.data.isShow=!1):t.$elementMessage(e.Message,"error")}))}}},o=n,c=(a("1c0e"),a("2877")),d=Object(c["a"])(o,i,l,!1,null,"0f03337f",null),u=d.exports,m={data:function(){return{loading:!1,vendorId:localStorage.getItem("vendorId"),pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("transactionRowsPerPage")?Number(localStorage.getItem("transactionRowsPerPage")):10,items:[],total:0,activeName:"2",totalPage:0,filterParams:{vendorName:"",accountIds:"",paymentCode:"",code:"",accountPayee:"",tradeStatus:"",tradeType:"",date:[],timeCreatedFrom:"",timeCreatedTo:"",shopifyOrder:"",creditStatus:"2"},filterParamsDefault:"{}",dateFilter:"",viewDetail:{isShow:!1,exportLoading:!1,items:[]},tradeTypeArr:[{id:1,name:this.$t("transaction.type1")},{id:6,name:this.$t("transaction.type6")},{id:7,name:this.$t("transaction.type7")},{id:8,name:this.$t("transaction.type8")}],tradeStatusArr:[{id:1,name:this.$t("transaction.status1")},{id:2,name:this.$t("transaction.status2")},{id:3,name:this.$t("transaction.status3")},{id:9,name:this.$t("transaction.status9")}],accountPayeeArr:[{id:1,name:"stripe"},{id:2,name:"ebanx"},{id:3,name:"PayPal"},{id:4,name:"checkout"},{id:6,name:this.$t("transaction.payment6")},{id:7,name:this.$t("transaction.payment7")},{id:8,name:this.$t("transaction.payment8")},{id:10,name:"dLocal"},{id:11,name:"PAYONEER"},{id:12,name:this.$t("transaction.payment12")}],checkItems:[],storeList:[],dialogDetailData:{isShow:!1,loading:!1,ids:[],items:[]},defaultDialogDetailData:"{}"}},components:{DialogDetail:u},watch:{$route:"gotoPage"},mounted:function(){this.defaultDialogDetailData=JSON.stringify(this.dialogDetailData),this.filterParamsDefault=JSON.stringify(this.filterParams),this.getItem(),this.getShopName()},methods:{openExportDetail:function(t){var e=this;this.loading=!0,this.$apiCall("api.AccountPayment.getInvoiceShopifyInfo",{id:t.id},(function(a){e.loading=!1,"9999"==a.ErrorCode?(e.dialogDetailData=JSON.parse(e.defaultDialogDetailData),e.dialogDetailData.ids=[t.id],e.dialogDetailData.items=Object.keys(a.Data.Results).map((function(t){return a.Data.Results[t]})),e.dialogDetailData.isShow=!0):e.$elementMessage(a.Message,"error")}))},handleClick:function(t,e){this.filterParams={vendorName:"",paymentCode:"",code:"",accountPayee:"",tradeStatus:"",tradeType:"",date:[],timeCreatedFrom:"",timeCreatedTo:"",shopifyOrder:"",creditStatus:t.name},this.$refs.gridTable.clearSelection(),this.getItem()},exportDetailFn:function(){var t=this,e=[];if(this.viewDetail.items.length){this.viewDetail.items.forEach((function(t){e.push(t.id)})),this.viewDetail.exportLoading=!0,0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var a=function(t){document.getElementById("ifilePro").src=t},r="api.AccountPayment.exportPayment";this.$apiCall(r,{ids:e,isNew:1},(function(e){t.viewDetail.exportLoading=!1,"9999"==e.ErrorCode?(t.$elementMessage(t.$t("myinvoice.exportSuccess"),"success"),a(e.Data.Results.file)):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))}},handleSelectionChange:function(t){this.viewDetail.items=[],this.checkItems=[],t.length&&(this.viewDetail.items=t,this.checkItems=t)},viewDetailFn:function(t,e){this.viewDetail.isShow=!0,"row"==t&&(this.viewDetail.items=[],this.viewDetail.items.push(e))},filterText:function(t,e){var a;switch(t){case"tradeType":this.tradeTypeArr.forEach((function(t){t.id==e&&(a=t)}));break;case"tradeStatus":this.tradeStatusArr.forEach((function(t){t.id==e&&(a=t)}));break;case"platformType":this.accountPayeeArr.forEach((function(t){t.id==e&&(a=t)}));break;default:break}return a?a.name:"---"},setOrder:function(t){var e=this;this.$apiCall("api.AccountPayment.changeCreditStatus",{id:t.id},(function(t){e.loading=!1,"9999"==t.ErrorCode?(e.$elementMessage(t.Message,"success"),e.getItem()):e.$elementMessage(t.Message,"error")}))},toPage:function(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},changePageSize:function(t){this.rowsPerPage=t,localStorage.setItem("transactionRowsPerPage",t),this.getItem()},gotoPage:function(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()},filterDate:function(){var t=Number(this.dateFilter),e=this.$moment().format("YYYY-MM-DD"),a=this.$moment().add(-1,"days").format("YYYY-MM-DD"),r=this.$moment().add(-6,"days").format("YYYY-MM-DD"),s=this.$moment().add(-29,"days").format("YYYY-MM-DD");switch(this.filterParams.timeCreatedTo=e,t){case 1:this.filterParams.timeCreatedFrom=e;break;case 2:this.filterParams.timeCreatedFrom=a,this.filterParams.timeCreatedTo=a;break;case 3:this.filterParams.timeCreatedFrom=r;break;case 4:this.filterParams.timeCreatedFrom=s;break;default:break}this.filterItem()},dateChange:function(){this.filterParams.date.length>1&&(this.filterParams.timeCreatedFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem())},clearFilter:function(t){switch(t){case"paymentCode":this.filterParams.paymentCode="";break;case"code":this.filterParams.code="";break;case"vendorName":this.filterParams.vendorName="";break;case"shopifyOrder":this.filterParams.shopifyOrder="";break;case"accountIds":this.filterParams.accountIds="";break;case"tradeType":this.filterParams.tradeType="";break;case"tradeStatus":this.filterParams.tradeStatus="";break;case"accountPayee":this.filterParams.accountPayee="";break;case"date":this.filterParams.date=[],this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="";break;default:this.dateFilter="",this.filterParams=JSON.parse(this.filterParamsDefault);break}this.filterItem()},getShopName:function(){var t=this;this.storeList=[],this.$apiCall("api.Invoice.findStoreByVendor",{},(function(e){9999==e.ErrorCode?t.storeList=e.Data.Results:t.$message({message:e.Message,type:"error"})}))},filterItem:function(t){this.$refs.gridTable.clearSelection(),1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},getItem:function(t){var e=this;this.loading=!0,this.$apiCall("api.AccountPayment.findByVendor",{page:this.page,rowsPerPage:this.rowsPerPage,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,sysCode:this.filterParams.paymentCode,code:this.filterParams.code,nameLike:this.filterParams.vendorName,shopifyOrder:this.filterParams.shopifyOrder,platformType:this.filterParams.accountPayee,paymentType:this.filterParams.tradeType,status:this.filterParams.tradeStatus,creditStatus:this.activeName},(function(t){e.loading=!1,9999==t.ErrorCode?(e.items=t.Data.Results,e.total=Number(t.Data.Pagination.totalCount),e.totalPage=Number(t.Data.Pagination.totalPage)):e.$message({message:t.Message,type:"error"})}))}}},f=m,p=(a("0554"),Object(c["a"])(f,r,s,!1,null,"ad677ea2",null));e["default"]=p.exports},dc2e:function(t,e,a){"use strict";a("e8fe")},e8fe:function(t,e,a){}}]);