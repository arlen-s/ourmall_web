(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Invoice"],{"0d4a":function(t,e,i){"use strict";i("fba0")},"2d90":function(t,e,i){},"65fb":function(t,e,i){"use strict";i("7042")},7042:function(t,e,i){},cbf3:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-scrollbar",{ref:"myScrollbar1",staticClass:"page-content",staticStyle:{height:"100%"}},[i("div",{staticClass:"invoice"},[t.fromPage?t._e():i("div",{staticClass:"invoice-top",staticStyle:{height:"60px"}},[1==t.loginType||2==t.loginType?i("div",[i("header",{staticStyle:{position:"fixed",top:"0",left:"0","z-index":"9",width:"100%",height:"60px",padding:"0 15px"}},[i("div",{staticStyle:{width:"1100px",margin:"0 auto",padding:"0px 30px 0 0"}},[2==t.loginType?i("div",{staticClass:"tx-left",staticStyle:{"background-color":"rgb(253, 246, 236)","border-radius":"4px","border-left":"5px solid rgb(230, 162, 60)",margin:"0 0 0 0px",height:"60px",padding:"0 20px","box-shadow":"rgba(33, 33, 33, 0.4) 0px 1px 4px 0px"}},[i("p",{staticClass:"d-flex justify-content-start",staticStyle:{color:"#606266","font-weight":"600","margin-bottom":"0","font-size":"14px","line-height":"60px"}},[t._v(" "+t._s(t.$t("invoice.justneed"))+" "),i("a",{staticStyle:{"margin-right":"5px","margin-left":"5px",color:"#e6a23c","text-decoration":"underline","font-size":"14px"},attrs:{href:"javascript:;"},on:{click:t.openLogin}},[t._v(t._s(t.$t("invoice.complete")))]),t._v(" "+t._s(t.$t("invoice.then"))+" "),i("a",{staticStyle:{"margin-right":"5px","margin-left":"5px",color:"#e6a23c","text-decoration":"underline","font-size":"14px"},attrs:{href:"javascript:;"},on:{click:t.openLogin}},[t._v(t._s(t.$t("invoice.my")))]),t._v(" "+t._s(t.$t("invoice.historical"))+" ")])]):t._e(),1==t.loginType?i("div",{staticClass:"tx-left",staticStyle:{"background-color":"rgb(253, 246, 236)","border-radius":"4px","border-left":"5px solid rgb(230, 162, 60)",margin:"0 0 0 0px",height:"60px",padding:"0 20px","box-shadow":"rgba(33, 33, 33, 0.4) 0px 1px 4px 0px"}},[i("p",{staticClass:"d-flex justify-content-start",staticStyle:{color:"#606266","font-weight":"600","margin-bottom":"0","font-size":"14px","line-height":"60px"}},[t._v(" "+t._s(t.$t("invoice.just"))+" "),i("a",{staticStyle:{"margin-right":"5px","margin-left":"5px",color:"#e6a23c","text-decoration":"underline","font-size":"14px"},attrs:{href:"javascript:;"},on:{click:t.openLogin}},[t._v(t._s(t.$t("invoice.sign")))]),t._v(" "+t._s(t.$t("invoice.then"))+" "),i("a",{staticStyle:{"margin-right":"5px","margin-left":"5px",color:"#e6a23c","text-decoration":"underline","font-size":"14px"},attrs:{href:"javascript:;"},on:{click:t.openLogin}},[t._v(t._s(t.$t("invoice.my")))]),t._v(" "+t._s(t.$t("invoice.historical"))+" ")])]):t._e()])])]):t.showTopTip&&!t.fromPage?i("div",[i("header",{staticStyle:{position:"fixed",top:"0",left:"0","z-index":"9",width:"100%",height:"60px",padding:"0 15px"}},[i("div",{staticStyle:{width:"1100px",margin:"0 auto",padding:"0px 30px 0 0"}},[i("div",{staticClass:"tx-left",staticStyle:{"background-color":"#f0f9eb","border-radius":"4px","border-left":"5px solid #67c23a",margin:"0 0 0 0px",height:"60px",padding:"0 20px","box-shadow":"rgba(33, 33, 33, 0.4) 0px 1px 4px 0px"}},[i("p",{staticClass:"d-flex justify-content-start",staticStyle:{color:"#606266","font-weight":"600","margin-bottom":"0","font-size":"14px","line-height":"60px"}},[t._v(" "+t._s(t.$t("invoice.click"))+" "),i("router-link",{staticStyle:{"margin-right":"5px","margin-left":"5px",color:"#67c23a","text-decoration":"underline","font-size":"14px"},attrs:{to:{path:"/dashboard"},target:"_blank"}},[t._v(t._s(t.$t("invoice.my")))]),t._v(" "+t._s(t.$t("invoice.historical"))+" ")],1)])])])]):t._e()]),i("div",{attrs:{"infinite-scroll-distance":800,"infinite-scroll-disabled":"disabled"}},[i("el-container",{class:t.noMore||5==t.tabActive?"":"pd-b-100",attrs:{id:"invoiceContainer"}},[i("el-main",{staticStyle:{position:"relative"}},[i("el-card",{staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"always"}},[i("el-steps",{attrs:{active:t.stepActive,"process-status":"wait"}},[i("el-step",{attrs:{title:t.$t("invoice.step1"),icon:t.stepActive>1?"el-icon-success":"",description:t.$t("invoice.ImportShopify")}}),i("el-step",{attrs:{title:t.$t("invoice.step2"),icon:t.stepActive>2?"el-icon-success":"",description:t.$t("invoice.Improvenumber")}}),i("el-step",{attrs:{title:t.$t("invoice.step3"),icon:t.stepActive>3?"el-icon-success":"",description:t.$t("invoice.collectionstatus")}}),i("el-step",{attrs:{title:t.$t("invoice.step4"),icon:t.stepActive>4?"el-icon-success":"",description:t.$t("invoice.cooperation")}})],1)],1),4!=t.invoiceInfo.status&&5!=t.invoiceInfo.status&&6!=t.invoiceInfo.status?[t.invoiceInfo.extraJson&&t.invoiceInfo.extraJson.importErrorLog&&t.invoiceInfo.extraJson.importErrorLog.length?i("div",{staticClass:"warning",staticStyle:{padding:"8px 16px","background-color":"#fff6f7","border-radius":"4px","border-left":"5px solid #fe6c6f",margin:"20px 0"}},[i("div",{staticClass:"d-flex align-items-center justify-content-between",staticStyle:{cursor:"pointer"},on:{click:function(e){t.showErrorLog=!t.showErrorLog}}},[i("span",[t._v(" "+t._s(t.invoiceInfo.extraJson.importErrorLog[0])+" "),!t.showErrorLog&&t.invoiceInfo.extraJson.importErrorLog.length?i("span",{staticStyle:{"margin-left":"30px"}},[t._v("(等"+t._s(t.invoiceInfo.extraJson.importErrorLog.length)+"条错误数据,"),i("a",{attrs:{href:"javascript:;"}},[t._v("点击展开")]),t._v("查看详情)")]):t._e()]),i("i",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.extraJson.importErrorLog.length>1,expression:"invoiceInfo.extraJson.importErrorLog.length > 1"}],class:t.showErrorLog?"el-icon-arrow-down":"el-icon-arrow-up"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showErrorLog&&t.invoiceInfo.extraJson.importErrorLog.length>1,expression:"\n                    showErrorLog &&\n                    invoiceInfo.extraJson.importErrorLog.length > 1\n                  "}]},t._l(t.invoiceInfo.extraJson.importErrorLog,(function(e,o){return 0!=o?i("p",[t._v(" "+t._s(e)+" ")]):t._e()})),0)]):t._e()]:t._e(),i("el-card",{staticClass:"m-card",attrs:{shadow:"always"}},["9"==t.invoiceInfo.status?i("div",{staticClass:"cancel-label"},[t._v(" "+t._s(t.$t("invoice.cancel"))+" ")]):t._e(),i("div",{staticClass:"top-1"},[i("div",{staticClass:"left"},[i("h2",[t._v(t._s(t.$t("invoice.采购订单")))])]),i("div",{staticClass:"center"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"grid-content invoice-header-logo"},[t.showLogo?t._e():[i("el-upload",{ref:"upload_img",staticClass:"avatar-uploader",attrs:{action:"",accept:"image/jpeg,image/jpg,image/png",name:"file","show-file-list":!1,"http-request":t.uploadSectionFile}},[t.showLogo?i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.logoUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],t.showLogo?[i("div",{staticClass:"tx-left"},[i("el-image",{staticStyle:{height:"70px",width:"70px"},attrs:{src:t.logoUrl,"preview-src-list":[t.logoUrl]}}),i("el-button",{staticClass:"mg-l-10",staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:t.removelogo}},[t._v("删除LOGO")])],1)]:t._e()],2)]),i("div",[i("div",{staticClass:"grid-content invoice-header-info"},[t.invoiceInfo.vendorName?[i("div",{staticClass:"wv-text-strong"},[t._v(" "+t._s(t.invoiceInfo.vendorName?t.invoiceInfo.vendorName:"---")+" "),2==t.invoiceInfo.payStatus&&"9"!=t.invoiceInfo.status?i("el-button",{staticStyle:{padding:"0"},attrs:{slot:"reference",type:"text"},on:{click:t.editCompany},slot:"reference"},[t._v(t._s(t.$t("invoice.edit")))]):t._e()],1)]:[i("el-input",{staticClass:"tx-right-input",staticStyle:{margin:"10px 0"},attrs:{size:"small",placeholder:t.$t("invoice.fillname")},on:{change:function(e){return t.editCompanyByInput()}},model:{value:t.editCompanyName,callback:function(e){t.editCompanyName=e},expression:"editCompanyName"}})]],2)]),i("div",{staticClass:"right"},[i("div",{staticClass:"code"},[t._v("PO # "+t._s(t.invoiceInfo.code||"---"))]),i("div",{staticClass:"date"},[t._v(" "+t._s(t.$t("invoice.采购单日期"))+"："+t._s(t.invoiceInfo.timeCreated||"---")+" ")]),i("div",{staticClass:"lang"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"中文",placement:"top"}},[i("a",{class:{active:"zh"==t.$i18n.locale},attrs:{href:"javascript:;"},on:{click:function(e){return t.changeLang("zh")}}},[i("svg",{staticClass:"icon",staticStyle:{width:"32px",height:"24px"},attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-flag-c"}})])])]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"EN",placement:"top"}},[i("a",{class:{active:"en"==t.$i18n.locale},attrs:{href:"javascript:;"},on:{click:function(e){return t.changeLang("en")}}},[i("svg",{staticClass:"icon",staticStyle:{width:"32px",height:"24px"},attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-flag-e"}})])])])],1)])]),i("el-divider"),i("div",{staticClass:"top-2"},[i("div",{staticClass:"left"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("invoice.客户名称")))]),i("div",{staticClass:"t-name"},[i("span",{staticClass:"mg-r-15"},[t._v(t._s(t.invoiceInfo.customerName||"---"))]),t.invoiceInfo.customerShopName||t.invoiceInfo.customerShopNameAlia?i("span",[t._v(" ("+t._s(t.invoiceInfo.customerShopNameAlia?t.invoiceInfo.customerShopNameAlia:t.invoiceInfo.customerShopName)+") ")]):t._e()])]),i("div",{staticClass:"right"},[t.invoiceInfo.status?i("div",{staticClass:"t-status"},[t._v(" "+t._s(t.$t("invoice.订单状态"))+"： "),"9"==t.invoiceInfo.status&&t.invoiceInfo.stopReason?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.invoiceInfo.stopReason,placement:"top"}},[i("span",[t._v(t._s(t.$t(t.$dict.invoiceStatus[t.invoiceInfo.status].text)))])]):i("span",{class:"tx-"+t.$dict.invoiceStatus[t.invoiceInfo.status].type},[t._v(t._s(t.$t(t.$dict.invoiceStatus[t.invoiceInfo.status].text)))])],1):t._e(),i("div",{staticClass:"t-amount"},[t._v(" "+t._s(t.$t("invoice.采购单金额"))+"(US$): "),i("span",{class:{"active tx-danger":t.realAmount&&t.realAmount>0},style:{fontWeight:t.realAmount&&t.realAmount>0?"bold":"normal"}},[t._v(" "+t._s(t.realAmount&&t.realAmount>0?t.$numberToCurrency(t.realAmount):t.$t("invoice.Notset"))+" ")])])])]),i("div",{staticClass:"table-fixed"},[i("div",{staticClass:"tabs d-flex"},[i("div",{staticClass:"tab-btn",class:1==t.tabActive||2==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(1)}}},[t._v(" "+t._s(t.$t("invoice.全部订单商品"))+" ("+t._s(t.invoiceCnt.orderCnt)+") ")]),i("div",{staticClass:"tab-btn",class:3==t.tabActive?"active":"",staticStyle:{display:"none"},on:{click:function(e){return t.tabcChange(3)}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-exclamation-triangle",staticStyle:{color:"rgb(245, 108, 108)"}}),t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.notBindCnt)+")")])]),i("div",{staticClass:"tab-btn",class:4==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(4)}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-tubiaozhizuomoban",staticStyle:{"font-size":"18px",color:"rgb(230, 162, 60)"}}),t._v(" "+t._s(t.$t("invoice.Notshipped"))+"("+t._s(t.invoiceCnt.notDeliverCnt>99?"99+":t.invoiceCnt.notDeliverCnt)+")")])]),i("div",{staticClass:"tab-btn",class:8==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(8)}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-plane",staticStyle:{"font-size":"18px",color:"#67c23a"}}),t._v(" "+t._s(t.$t("invoice.Delivered"))+"("+t._s(t.invoiceCnt.deliverCnt>99?"99+":t.invoiceCnt.deliverCnt)+")")])]),i("div",{staticClass:"tab-btn",class:5==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(5)}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-times",staticStyle:{color:"#f56c6c"}}),t._v(" "+t._s(t.$t("invoice.设为不发货"))+" ("+t._s(t.invoiceCnt.noQuantityCnt>99?"99+":t.invoiceCnt.noQuantityCnt)+")")])]),i("div",{staticClass:"tab-btn",class:9==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(9)}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-warning",staticStyle:{color:"#f56c6c"}}),t._v(" "+t._s(t.$t("invoice.Abnormal"))+" ("+t._s(t.invoiceCnt.abnormalCnt>99?"99+":t.invoiceCnt.abnormalCnt)+")")])]),i("div",{staticClass:"pos-absolute",staticStyle:{right:"-15px",bottom:"10px"}},[i("el-button-group",{staticClass:"text-btn"},[i("el-button",{class:1==t.showType?"active":"",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.changeShowType("1")}}},[i("b",{staticClass:"radio-span"}),i("i",{staticClass:"iconfont icon-shuzhuangtu"}),i("span",[t._v(t._s(t.$t("invoice.Ordergroup")))])]),i("el-button",{class:2==t.showType?"active":"",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.changeShowType("2")}}},[i("b",{staticClass:"radio-span"}),i("i",{staticClass:"iconfont icon-shuzhuang"}),i("span",[t._v(t._s(t.$t("invoice.Productgroup")))])])],1)],1)]),i("div",{ref:"orderItemsTable",staticClass:"table-wrap"},[1==t.tabActive?[i("el-tooltip",{attrs:{placement:"left"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.notBindCnt)+") ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceCnt.notBindCnt>0,expression:"invoiceCnt.notBindCnt > 0"}],staticClass:"tab-btn",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.tabcChange(3)}}},[i("i",{staticClass:"fa fa-exclamation-triangle fa-2x"}),i("span",[t._v(t._s(t.invoiceCnt.notBindCnt>99?"99+":t.invoiceCnt.notBindCnt))])])])]:t._e(),2==t.tabActive?[i("el-tooltip",{attrs:{placement:"left"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.groupSkuCnt)+") ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceCnt.notBindCnt>0,expression:"invoiceCnt.notBindCnt > 0"}],staticClass:"tab-btn",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.tabcChange(6)}}},[i("i",{staticClass:"fa fa-exclamation-triangle fa-2x"}),i("span",[t._v(t._s(t.invoiceCnt.groupSkuCnt>99?"99+":t.invoiceCnt.groupSkuCnt))])])])]:t._e(),i("el-table",{staticClass:"table-only",attrs:{"header-cell-style":t.getRowClass,"cell-style":t.cellStyle}},[i("el-table-column",{attrs:{width:"150",label:""}}),i("el-table-column",{attrs:{label:""}}),i("el-table-column",{attrs:{label:"",width:"160"}}),i("el-table-column",{attrs:{label:"",width:"120"}}),i("el-table-column",{attrs:{label:"",width:"120"}})],1),2!=t.tabActive?i("div",{staticClass:"table1"},[i("el-table",{staticClass:"table-with-body",attrs:{"header-cell-style":t.getRowClass,"cell-class-name":t.getCellClass,"cell-style":t.cellStyle}},[i("el-table-column",[i("template",{slot:"header"},[t.searchName||t.searchTrack?t._e():i("div",[i("div",{staticClass:"d-flex align-items-center justify-content-between"},[i("div",[t._v(" "+t._s(t.$t("invoice.采购订单信息"))+" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchName=!0}}},[i("i",{staticClass:"el-icon-search mg-l-5"})])],1),i("div",[t._v(" "+t._s(t.$t("invoice.物流信息"))+" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchTrack=!0}}},[i("i",{staticClass:"el-icon-search mg-l-5"})])],1)])]),t.searchName||t.searchTrack?i("div",{staticClass:"d-flex"},[i("el-input",{ref:"searchNameInput",attrs:{size:"mini",type:"text",placeholder:t.searchName?t.$t("invoice.Supportsearchname"):t.$t("invoice.Supportsearchnumber"),clearable:""},on:{clear:function(e){return t.Filter(2,"name")},blur:function(e){return t.Filter(3,"name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Filter(1,"name")}},model:{value:t.searchNameInput,callback:function(e){t.searchNameInput=e},expression:"searchNameInput"}},[i("el-button",{attrs:{slot:"append",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){return t.Filter(1,"name")}},slot:"append"})],1)],1):t._e()])],2),i("el-table-column",{attrs:{width:"140"}},[i("template",{slot:"header"},[1==t.tabActive?i("div",{staticClass:"d-flex align-item-center change-type"},[t._v(" "+t._s(t.$t("invoice.我的SKU编号"))+" ")]):i("div",[t._v(" "+t._s(t.$t("invoice.我的SKU编号"))+" ")])])],2),i("el-table-column",{attrs:{prop:"qty",width:"140"}},[i("template",{slot:"header"},[i("div",{staticClass:"tx-center"},[t._v(" "+t._s(t.$t("invoice.发货数量"))+" ")])])],2),i("el-table-column",{attrs:{prop:"price",label:t.$t("invoice.Supplyunit"),width:t.isChangeAmount()?"120px":"160px"},scopedSlots:t._u([{key:"header",fn:function(){return[i("span",{staticClass:"supplyunit"},[t._v(t._s(t.$t("invoice.Supplyunit")))]),t.isChangeAmount()||t.tempCode?t._e():i("a",{staticClass:"mg-l-0",staticStyle:{"font-weight":"bold"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setLotPrice()}}},[t._v(t._s(t.$t("invoice.Batchset")))]),t.tempCode?i("span",{staticStyle:{color:"#e6a23c"}},[t._v("(设价中)")]):t._e()]},proxy:!0}],null,!1,3490931937)}),i("el-table-column",{attrs:{label:"每单运费",width:"100",align:"center"}},[i("template",{slot:"header"},[i("div",{staticClass:"tx-center"},[t._v(" "+t._s(t.$t("invoice.每单运费"))+" ")])])],2),i("el-table-column",{attrs:{label:t.$t("invoice.小计")+"(US$)",width:"80",align:"center"}}),i("el-table-column",{attrs:{label:t.$t("invoice.操作"),width:"100"}})],1)],1):t._e(),2==t.tabActive?i("div",{staticClass:"table2"},[i("el-table",{staticClass:"table-with-body",attrs:{"header-cell-style":t.getRowClass3,"cell-class-name":t.getCellClass,"cell-style":t.cellStyle}},[i("el-table-column",{attrs:{type:"expand",width:"20",label:""}}),i("el-table-column",{attrs:{width:"180"}},[i("template",{slot:"header"},[i("div",{staticClass:"d-flex align-item-center change-type"},[t._v(" "+t._s(t.$t("invoice.SupplierSKU"))+" ")])])],2),i("el-table-column",[i("template",{slot:"header"},[t.searchName||t.searchTrack?t._e():i("div",[i("div",{staticClass:"d-flex align-items-center justify-content-between"},[i("div",[t._v(" "+t._s(t.$t("invoice.Orderitems"))+" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchName=!0}}},[i("i",{staticClass:"el-icon-search mg-l-5"})])],1),i("div",[t._v(" "+t._s(t.$t("invoice.Logisticsnumber"))+" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchTrack=!0}}},[i("i",{staticClass:"el-icon-search mg-l-5"})])],1)])]),t.searchName||t.searchTrack?i("div",{staticClass:"d-flex"},[i("el-input",{ref:"searchNameInput",attrs:{size:"mini",type:"text",placeholder:t.searchName?t.$t("invoice.Supportsearchname"):t.$t("invoice.Supportsearchnumber"),clearable:""},on:{clear:function(e){return t.Filter(2,"name")},blur:function(e){return t.Filter(3,"name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Filter(1,"name")}},model:{value:t.searchNameInput,callback:function(e){t.searchNameInput=e},expression:"searchNameInput"}},[i("el-button",{attrs:{slot:"append",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){return t.Filter(1,"name")}},slot:"append"})],1)],1):t._e()])],2),i("el-table-column",{attrs:{prop:"qty",width:"160"}},[i("template",{slot:"header"},[t._v(" "+t._s(t.$t("invoice.Purchasequantity"))+" ")])],2),i("el-table-column",{attrs:{prop:"price",label:t.$t("invoice.Supplyunit"),width:"200"}}),i("el-table-column",{attrs:{label:t.$t("invoice.Totalsupply"),width:"120"}})],1)],1):t._e()],2)]),i("div",{staticClass:"tabs d-flex"},[i("div",{staticClass:"tab-btn",class:1==t.tabActive||2==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(1)}}},[t._v(" "+t._s(t.$t("invoice.全部订单商品"))+" ("+t._s(t.invoiceCnt.orderCnt)+") ")]),i("div",{staticClass:"tab-btn",class:3==t.tabActive?"active":"",staticStyle:{display:"none"},on:{click:function(e){return t.tabcChange(3)}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-exclamation-triangle",staticStyle:{color:"rgb(245, 108, 108)"}}),t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.notBindCnt)+")")])]),i("div",{staticClass:"tab-btn",class:4==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(4)}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-tubiaozhizuomoban",staticStyle:{"font-size":"18px",color:"rgb(230, 162, 60)"}}),t._v(" "+t._s(t.$t("invoice.Notshipped"))+"("+t._s(t.invoiceCnt.notDeliverCnt>99?"99+":t.invoiceCnt.notDeliverCnt)+")")])]),i("div",{staticClass:"tab-btn",class:8==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(8)}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-plane",staticStyle:{"font-size":"18px",color:"#67c23a"}}),t._v(" "+t._s(t.$t("invoice.Delivered"))+"("+t._s(t.invoiceCnt.deliverCnt>99?"99+":t.invoiceCnt.deliverCnt)+")")])]),i("div",{staticClass:"tab-btn",class:5==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(5)}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"fa fa-times",staticStyle:{color:"#f56c6c"}}),t._v(" "+t._s(t.$t("invoice.设为不发货"))+"("+t._s(t.invoiceCnt.noQuantityCnt>99?"99+":t.invoiceCnt.noQuantityCnt)+")")])]),i("div",{staticClass:"tab-btn",class:9==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(9)}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-warning",staticStyle:{color:"#f56c6c"}}),t._v(" "+t._s(t.$t("invoice.Abnormal"))+" ("+t._s(t.invoiceCnt.abnormalCnt>99?"99+":t.invoiceCnt.abnormalCnt)+")")])]),i("div",{staticClass:"pos-absolute",staticStyle:{bottom:"10px",right:"-15px"}},[i("el-button-group",{staticClass:"text-btn"},[i("el-button",{class:1==t.showType?"active":"",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.changeShowType("1")}}},[i("span",{staticClass:"radio-span"}),i("i",{staticClass:"iconfont icon-shuzhuangtu"}),i("span",[t._v(t._s(t.$t("invoice.Ordergroup")))])]),i("el-button",{class:2==t.showType?"active":"",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.changeShowType("2")}}},[i("span",{staticClass:"radio-span"}),i("i",{staticClass:"iconfont icon-shuzhuang"}),i("span",[t._v(t._s(t.$t("invoice.Productgroup")))])])],1)],1)]),[i("div",{staticClass:"table-wrap"},[t.invoiceData.length?[1==t.tabActive?[i("el-tooltip",{attrs:{placement:"left"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.notBindCnt)+") ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceCnt.notBindCnt>0,expression:"invoiceCnt.notBindCnt > 0"}],staticClass:"tab-btn",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.tabcChange(3)}}},[i("i",{staticClass:"fa fa-exclamation-triangle fa-2x"}),i("span",[t._v(t._s(t.invoiceCnt.notBindCnt>99?"99+":t.invoiceCnt.notBindCnt))])])])]:t._e(),2==t.tabActive?[i("el-tooltip",{attrs:{placement:"left"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.groupSkuCnt)+") ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceCnt.notBindCnt>0,expression:"invoiceCnt.notBindCnt > 0"}],staticClass:"tab-btn",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.tabcChange(6)}}},[i("i",{staticClass:"fa fa-exclamation-triangle fa-2x"}),i("span",[t._v(t._s(t.invoiceCnt.groupSkuCnt>99?"99+":t.invoiceCnt.groupSkuCnt))])])])]:t._e(),i("el-table",{staticClass:"table-only table-only-top",attrs:{"header-cell-style":t.getRowClass,"cell-style":t.cellStyle}},[i("el-table-column",{attrs:{width:"150",label:t.$t("invoice.SupplierSKU")}}),i("el-table-column",{attrs:{label:"Items"}}),i("el-table-column",{attrs:{label:"Quantity",width:"160"}}),i("el-table-column",{attrs:{label:"Unit Cost(US$)",width:"120"}}),i("el-table-column",{attrs:{label:"Subtotal(US$)",width:"120"}})],1),2!=t.tabActive?i("div",[i("el-table",{staticClass:"table-with-body",attrs:{"row-class-name":t.tableRowClassName,"header-cell-style":t.getRowClass,"cell-class-name":t.getCellClass,"cell-style":t.cellStyle,data:t.invoiceData,stripe:"",border:""}},[i("el-table-column",{scopedSlots:t._u([{key:"header",fn:function(){return[t.searchName||t.searchTrack?t._e():i("div",[i("div",{staticClass:"d-flex align-items-center justify-content-between"},[i("div",[t._v(" "+t._s(t.$t("invoice.采购订单信息"))+" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchName=!0}}},[i("i",{staticClass:"el-icon-search mg-l-5"})])],1),i("div",[8==t.tabActive?[Number(t.invoiceCnt.deliverCnt)&&"abnormal"!=t.type?i("span",{staticClass:"mg-r-15"},[t._v(" 共计："+t._s(t.invoiceCnt.deliverCnt)+"条 "),Number(t.invoiceCnt.notSyncCnt)?i("span",[t._v(" ( 同步异常: "),i("a",{staticClass:"notsyn-link",attrs:{href:"javascript:;"},on:{click:function(e){return t.setType("abnormal")}}},[t._v(" "+t._s(t.invoiceCnt.notSyncCnt)+" 条")]),t._v(" ) ")]):t._e()]):t._e(),"abnormal"==t.type?i("span",{staticClass:"mg-r-15"},[i("el-tag",{staticStyle:{margin:"0",height:"26px","line-height":"26px"},attrs:{type:"danger",effect:"plain",closable:""},on:{close:function(e){return t.setType("deliver")}}},[t._v("同步异常")])],1):t._e()]:t._e(),t._v(" "+t._s(t.$t("invoice.物流信息"))+" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchTrack=!0}}},[i("i",{staticClass:"el-icon-search mg-l-5"})])],2)])]),t.searchName||t.searchTrack?i("div",{staticClass:"d-flex"},[i("el-input",{ref:"searchNameInput",attrs:{size:"mini",type:"text",placeholder:t.searchName?t.$t("invoice.Supportsearchname"):t.$t("invoice.Supportsearchnumber"),clearable:""},on:{clear:function(e){return t.Filter(2,"name")},blur:function(e){return t.Filter(3,"name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Filter(1,"name")}},model:{value:t.searchNameInput,callback:function(e){t.searchNameInput=e},expression:"searchNameInput"}},[i("el-button",{attrs:{slot:"append",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){return t.Filter(1,"name")}},slot:"append"})],1)],1):t._e()]},proxy:!0},{key:"default",fn:function(e){return[i("div",{staticStyle:{display:"flex","align-items":"flex-start"}},[i("el-image",{staticStyle:{"min-width":"70px",width:"70px",height:"70px",margin:"5px 5px 0 0",border:"1px solid #ddd"},attrs:{lazy:"",src:e.row.imgUrl,"preview-src-list":e.row.previewList}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"20px"}})])]),i("div",{staticStyle:{"max-width":"100%","text-align":"left",flex:"100%"}},[i("div",{staticClass:"tx-600"},[t._v(" "+t._s(e.row.name)+" "),e.row.customerProperties&&e.row.customerProperties.length?t._l(e.row.customerProperties,(function(e){return i("div",{key:e.name,staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{"text-align":"right",color:"#999"}},[t._v(" "+t._s(e.name)+": ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.value)+" ")])])])})):t._e()],2),i("div",{staticClass:"tx-600"},[i("b",[t._v("SKU:")]),t._v(" "+t._s(e.row.sku)+" ")]),2!=t.tabActive?i("div",{staticClass:"d-flex no-wrap justify-content-between"},[i("div",{staticClass:"d-flex"},[i("el-popover",{attrs:{"popper-class":"customer-popover",placement:"bottom",width:"600",trigger:"hover"}},[i("div",{staticStyle:{cursor:"pointer",display:"flex","max-width":"280px"},attrs:{slot:"reference"},slot:"reference"},[i("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.row.codeName)),i("i",{staticClass:"el-icon-caret-bottom el-icon--right"})])]),i("div",{staticClass:"mg-b-20 mg-t-10"},[i("div",{staticClass:"d-flex mg-b-20",staticStyle:{"justify-content":"space-between"}},[i("div",{staticClass:"title",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(" "+t._s(t.$t("invoice.ShopifyOrders"))+" "+t._s(e.row.codeName)+" ")]),i("div",[i("span",{staticStyle:{color:"#999"}},[t._v(t._s(t.$t("invoice.Orderdate")))]),i("span",{staticClass:"mg-l-5 pd-r-15"},[t._v(t._s(e.row.timeCreated?e.row.timeCreated:"---"))])])]),i("div",{staticClass:"mg-y-10",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(" 收件信息 ")]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 收件人: ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.name?e.row.shippingJson.name:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[e.row.shippingJson&&e.row.shippingJson.name?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.shippingJson.name,expression:"\n                                                    scope.row.shippingJson.name\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 收货地址1: ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.address1?e.row.shippingJson.address1:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[e.row.shippingJson&&e.row.shippingJson.address1?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.shippingJson.address1,expression:"\n                                                    scope.row.shippingJson\n                                                      .address1\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 收货地址2: ")]),i("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{"max-width":"75%"}},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.address2?e.row.shippingJson.address2:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[e.row.shippingJson&&e.row.shippingJson.address2?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.shippingJson.address2,expression:"\n                                                    scope.row.shippingJson\n                                                      .address2\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"50%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 城市: ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.city?e.row.shippingJson.city:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[e.row.shippingJson&&e.row.shippingJson.city?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.shippingJson.city,expression:"\n                                                    scope.row.shippingJson.city\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1),i("div",{staticClass:"d-flex",staticStyle:{width:"50%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 省份: ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.province?e.row.shippingJson.province:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[e.row.shippingJson&&e.row.shippingJson.province?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.shippingJson.city,expression:"\n                                                    scope.row.shippingJson.city\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),i("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[i("div",{staticClass:"d-flex",staticStyle:{flex:"0 0 50%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 国家: ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.country?e.row.shippingJson.country:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[e.row.shippingJson&&e.row.shippingJson.country?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.shippingJson.country,expression:"\n                                                    scope.row.shippingJson\n                                                      .country\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1),i("div",{staticClass:"d-flex",staticStyle:{flex:"0 0 50%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 邮编: ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.zip?e.row.shippingJson.zip:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[e.row.shippingJson&&e.row.shippingJson.zip?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.shippingJson.zip,expression:"\n                                                    scope.row.shippingJson.zip\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),i("div",{staticClass:"mg-y-10",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(" 收件信息 ")]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 联系电话: ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.phone?e.row.shippingJson.phone:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[e.row.shippingJson.phone?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.shippingJson.phone,expression:"\n                                                    scope.row.shippingJson.phone\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),e.row.ioss?[i("div",{staticClass:"mg-y-10",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(" IOSS信息 ")]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" IOSS: ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.ioss)+" ")])])])]:t._e(),e.row.note?[i("div",{staticClass:"mg-y-10",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(" 订单备注 ")]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 备注: ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.note)+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[e.row.note?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.note,expression:"\n                                                      scope.row.note\n                                                    ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)])]:t._e()],2)]),e.row.shippingJson&&e.row.shippingJson.name?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.shippingJson.name,placement:"top"}},[i("el-button",{attrs:{size:"mini"}},[t._v("To")])],1):t._e(),i("div",{staticClass:"mg-l-5 mg-r-5"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.country?e.row.shippingJson.country:"---")+" ")])],1),i("div",{staticClass:"no-wrap d-flex"},[e.row.trackNumber?i("div",{staticClass:"d-flex"},[i("div",[e.row.trackCompany&&e.row.realCompany?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(e.row.trackCompany)+"("+t._s(e.row.realCompany)+") ")]),t._v(" "+t._s(e.row.trackNumber)+" ")]),i("i",{staticClass:"fa fa-truck"})]):e.row.trackCompany?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(e.row.trackCompany)+" ")]),t._v(" "+t._s(e.row.trackNumber)+" ")]),i("i",{staticClass:"fa fa-truck"})]):i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(e.row.realCompany)+" ")]),t._v(" "+t._s(e.row.trackNumber)+" ")]),i("i",{staticClass:"fa fa-truck"})])],1),2==e.row.syncStatus?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.deliveredgoods"))+" "),i("br"),t._v(t._s(t.$t("invoice.Reason"))+" "+t._s(1!=t.invoiceInfo.hasAuth?t.$t("invoice.notauthorized"):e.row.syncContent)+" ")]),i("i",{staticClass:"invoice-icon-tongbu1"})]):i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.hasbeensync"),placement:"right"}},[i("i",{staticClass:"invoice-icon-tongbu2"})])],1):1==e.row.fulfillStatus?i("div",[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.hasnot"),placement:"right"}},[i("el-alert",{attrs:{title:t.$t("invoice.Notshipped"),type:"warning",closable:!1}})],1)],1):i("div",[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.wontReason")+e.row.stopReason,placement:"right"}},[i("el-alert",{attrs:{title:t.$t("invoice.wontdeliver"),type:"error",closable:!1}})],1)],1)])]):t._e()])],1)]}}],null,!1,3610289200)}),i("el-table-column",{attrs:{width:"180"},scopedSlots:t._u([{key:"header",fn:function(){return[1==t.tabActive?i("div",{staticClass:"d-flex align-item-center change-type"},[t._v(" "+t._s(t.$t("invoice.我的SKU编号"))+" ")]):i("div",[t._v(" "+t._s(t.$t("invoice.我的SKU编号"))+" ")])]},proxy:!0},{key:"default",fn:function(e){return[i("div",{staticClass:"d-flex sku-with-error"},[e.row.sku&&e.row.price||!(e.row.quantity>0)||2==e.row.fulfillStatus?t._e():i("el-tooltip",{attrs:{placement:"left"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))),i("br"),t._v(t._s(t.$t("invoice.Reason"))+" "),e.row.sku||e.row.price?e.row.sku?e.row.price?t._e():i("span",[t._v(t._s(t.$t("invoice.supplypricemissing")))]):i("span",[t._v(t._s(t.$t("invoice.SKUmissing")))]):i("span",[t._v(t._s(t.$t("invoice.pricemissing")))])]),i("i",{staticClass:"fa fa-exclamation-triangle mg-r-10",staticStyle:{color:"#f56c6c"}})]),i("div",[t.isChangeSku(e.row)?i("div",[t._v(" "+t._s(e.row.sku||"---")+" ")]):[i("el-popover",{ref:"popoverSku-"+e.$index,attrs:{"popper-class":"with-shadow",width:"400",placement:"top",title:t.$t("invoice.Batchset"),trigger:"manual"}},[i("div",[i("div",{staticClass:"mg-t-20"},[i("a",{staticClass:"input-btn d-flex",class:1==t.form.resource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setResource(1)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.samekind"))+" "),i("p",{directives:[{name:"show",rawName:"v-show",value:e.row.noneCntSku,expression:"scope.row.noneCntSku"}],staticStyle:{display:"inline","margin-left":"5px"},domProps:{innerHTML:t._s(t.$t("invoice.hereare",{num:Number(e.row.noneCntSku)}))}})])]),i("div",{staticClass:"mg-t-10"},[i("a",{staticClass:"input-btn d-flex",class:2==t.form.resource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setResource(2)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Allsame"))+" "),i("p",{directives:[{name:"show",rawName:"v-show",value:e.row.sameCntSku,expression:"scope.row.sameCntSku"}],staticStyle:{display:"inline","margin-left":"5px"},domProps:{innerHTML:t._s(t.$t("invoice.hereare",{num:Number(e.row.sameCntSku)}))}})])]),i("div",{staticClass:"mg-t-10"},[i("div",{staticClass:"d-flex justify-content-between"},[i("span",{},[t._v(t._s(t.$t("invoice.Batchsetto"))+" "),i("span",{staticClass:"color-primary tx-600"},[t._v(t._s(e.row.sku))])]),i("div",{staticClass:"tx-right"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e._self.$refs["popoverSku-"+e.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.changeSkuBatch(e.row)}}},[t._v(t._s(t.$t("invoice.Save1")))])],1)])])]),i("el-input",{staticStyle:{"min-width":"160px"},attrs:{slot:"reference",size:"small",placeholder:"SKU"},on:{change:function(i){return t.changeSkuFn(e.row,e.$index)}},nativeOn:{keyup:function(i){return t.getSkuInfo(e.row,e.$index)}},slot:"reference",model:{value:e.row.sku,callback:function(i){t.$set(e.row,"sku",i)},expression:"scope.row.sku"}})],1)]],2)],1)]}}],null,!1,240136543)}),i("el-table-column",{attrs:{prop:"qty",width:"135"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("invoice.发货数量"))+" "),t.totalCnt?i("el-popover",{attrs:{trigger:"hover",placement:"right"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadCnt,expression:"loadCnt"}],staticStyle:{"min-height":"50px","font-size":"12px"},attrs:{slot:""},slot:"default"},[i("div",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(t.$t("invoice.Totalpurchases"))),i("b",[t._v(t._s(t.totalCnt))]),t._v(" 个 ")]),t.cnt?[i("div",{staticStyle:{"margin-bottom":"15px","padding-left":"10px"}},t._l(t.cnt,(function(e,o){return i("div",{key:o},[i("span",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(e.name)+" :")]),i("span",{staticStyle:{color:"#606266","white-space":"nowrap"}},[t._v(t._s(e.cnt))])])})),0),i("div",{staticStyle:{"text-align":"right"}},[i("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.cntText,expression:"cntText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.cntOnCopy,expression:"cntOnCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.cntOnError,expression:"cntOnError",arg:"error"}],staticStyle:{color:"#5c6ac4"},attrs:{href:"javascript:;"}},[t._v(t._s(t.$t("invoice.copy")))])])]:t._e()],2),i("span",{attrs:{slot:"reference"},on:{mouseenter:t.getCntCountry},slot:"reference"},[t._v(" ("),i("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer"}},[t._v(t._s(t.totalCnt))]),t._v(") ")])]):t._e()]},proxy:!0},{key:"default",fn:function(e){return[t.isChangeOther(e.row)?[t._v(" "+t._s(e.row.quantity||0)+" ")]:[i("el-input-number",{staticStyle:{width:"110px"},attrs:{size:"small","controls-position":"right",min:1},on:{change:function(i){return t.handleChange(e.row,i)}},model:{value:e.row.quantity,callback:function(i){t.$set(e.row,"quantity",i)},expression:"scope.row.quantity"}})],i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Abnormalreasons")+e.row.abnormalReason,placement:"right"}},[1==e.row.isAbnormal?i("span",{staticClass:"tx-danger",staticStyle:{"margin-top":"10px",display:"inline-block"}},[i("i",{staticClass:"el-icon-info"}),t._v(t._s(t.$t("invoice.Abnormal"))+" ")]):t._e()])]}}],null,!1,4278290594)}),i("el-table-column",{attrs:{label:t.$t("invoice.客户实际售价"),width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.customerPrice?[e.row.currency?i("span",{staticStyle:{color:"#909399"}},[t._v(t._s(e.row.currency)+t._s(t.$CE[e.row.currency].symbol))]):i("span",{staticStyle:{color:"#909399"}},[t._v("US$")]),t._v(" "+t._s(e.row.customerPrice)+" ")]:[i("span",{staticStyle:{color:"#c0c4cc"}},[t._v("---")])]]}}],null,!1,2390674292)}),i("el-table-column",{attrs:{prop:"price",label:"",width:t.isChangeAmount()?"120px":"140px"},scopedSlots:t._u([{key:"header",fn:function(){return[i("span",{staticClass:"supplyunit"},[t._v(t._s(t.$t("invoice.Supplyunit")))]),t.isChangeAmount()||t.tempCode?t._e():i("a",{staticClass:"mg-l-0",staticStyle:{"font-weight":"bold"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setLotPrice()}}},[t._v(t._s(t.$t("invoice.Batchset")))]),t.tempCode?i("span",{staticStyle:{color:"#e6a23c"}},[t._v("(设价中)")]):t._e()]},proxy:!0},{key:"default",fn:function(e){return[i("div",[t.isChangePrice(e.row)?i("div",[t._v(" "+t._s(e.row.price||"0.00")+" ")]):[null!==e.row.price?i("el-popover",{ref:"popoverPrice-"+e.$index,attrs:{"popper-class":"with-shadow",width:"400",placement:"top",title:t.$t("invoice.Batchsupplyset"),trigger:"manual"}},[i("div",[i("div",{staticClass:"mg-t-20"},[i("a",{staticClass:"input-btn d-flex",class:1==t.formPrice.resource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setPriceResource(1)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Allproducts"))+" "),i("p",{directives:[{name:"show",rawName:"v-show",value:e.row.noneCntPrice,expression:"scope.row.noneCntPrice"}],staticStyle:{display:"inline","margin-left":"5px"},domProps:{innerHTML:t._s(t.$t("invoice.hereare",{num:Number(e.row.noneCntPrice)}))}})])]),i("div",{staticClass:"mg-t-10"},[i("a",{staticClass:"input-btn d-flex",class:2==t.formPrice.resource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setPriceResource(2)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Allsame"))+" "),i("p",{directives:[{name:"show",rawName:"v-show",value:e.row.sameCntPrice,expression:"scope.row.sameCntPrice"}],staticStyle:{display:"inline","margin-left":"5px"},domProps:{innerHTML:t._s(t.$t("invoice.hereare",{num:Number(e.row.sameCntPrice)}))}})])]),i("div",{staticClass:"mg-t-10"},[i("div",{staticClass:"d-flex justify-content-between"},[i("span",{},[t._v(t._s(t.$t("invoice.Batchsetto"))+" "),i("span",{staticClass:"color-primary tx-600"},[t._v(t._s(e.row.price))])]),i("div",{staticClass:"tx-right"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e._self.$refs["popoverPrice-"+e.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.changePriceBatch(e.row)}}},[t._v(t._s(t.$t("invoice.Save1")))])],1)])])]),i("el-input",{ref:"refInput"+e.$index,attrs:{slot:"reference",type:"number",name:"price-input",size:"small",placeholder:t.$t("invoice.Supplyunit")},on:{input:function(t){e.row.price=e.row.price.match(/^\d*(\.?\d{0,2})/g)[0]||null},change:function(i){return t.changePriceFn(e.row,e.$index)},blur:function(i){return t.blueChange(e.row,e.$index)}},nativeOn:{keyup:function(i){return t.getPriceInfo(e.row,e.$index)}},slot:"reference",model:{value:e.row.price,callback:function(i){t.$set(e.row,"price",i)},expression:"scope.row.price"}})],1):i("div",[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.noAllow"),placement:"top"},model:{value:e.row.tooltipShow,callback:function(i){t.$set(e.row,"tooltipShow",i)},expression:"scope.row.tooltipShow"}},[i("div",[i("el-input",{staticClass:"unactive",attrs:{slot:"reference",type:"number",name:"price-input",size:"small"},on:{input:function(t){e.row.price=e.row.price.match(/^\d*(\.?\d{0,2})/g)[0]||null},change:function(i){return t.changePriceFn(e.row,e.$index)},focus:function(i){return t.focusChange(e.row,e.$index)}},nativeOn:{keyup:function(i){return t.getPriceInfo(e.row,e.$index)}},slot:"reference",model:{value:e.row.price,callback:function(i){t.$set(e.row,"price",i)},expression:"scope.row.price"}}),t._v(" "+t._s(e.row.price)+" ")],1)])],1)]],2)]}}],null,!1,964058657)}),i("el-table-column",{attrs:{label:"每单运费",width:"90",align:"center"},scopedSlots:t._u([{key:"header",fn:function(){return[i("div",{staticClass:"tx-center"},[t._v(" "+t._s(t.$t("invoice.每单运费"))+" ")])]},proxy:!0},{key:"default",fn:function(e){return[t.isChangePrice(e.row)&&1!=t.invoiceInfo.status?i("div",{staticClass:"tx-center"},[t._v(" "+t._s(e.row.shippingFee||"0.00")+" ")]):i("div",{staticClass:"tx-center"},[i("el-input-number",{staticStyle:{width:"70px"},attrs:{min:0,label:"运费",controls:!1,size:"small",precision:2},on:{change:function(i){return t.setShippingFee(e.row)}},model:{value:e.row.shippingFee,callback:function(i){t.$set(e.row,"shippingFee",i)},expression:"scope.row.shippingFee"}})],1)]}}],null,!1,1156940885)}),i("el-table-column",{attrs:{label:t.$t("invoice.小计")+"(US$)",width:"75",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[void 0==e.row.price?i("div",{staticClass:"tx-center"},[t._v(" 0.00 ")]):i("div",{staticClass:"tx-center"},[t._v(" "+t._s(t.itemTotalAmount(e.row))+" ")])]}}],null,!1,1983273004)}),i("el-table-column",{attrs:{label:t.$t("invoice.操作"),width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"tx-left"},["1"!=t.invoiceInfo.payStatus||"9"==t.invoiceInfo.status||e.row.trackNumber||2==e.row.fulfillStatus?t._e():i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return t.markShippedOpen(e.row)}}},[t._v(t._s(t.$t("invoice.shippedMark")))])]),i("div",{staticClass:"tx-left"},[1!=t.invoiceInfo.payStatus&&1!=t.invoiceInfo.customerRead?i("div",{staticStyle:{"margin-top":"0"}},[1==e.row.fulfillStatus?[i("el-popover",{ref:"popover-stop-"+e.$index,attrs:{width:"400",placement:"top",title:t.$t("invoice.deleteReason"),trigger:"click"}},[i("div",[i("div",{staticClass:"mg-t-20"},[i("a",{staticClass:"input-btn d-flex",class:1==t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(1)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Outstock"))+" ")])]),i("div",{staticClass:"mg-t-10"},[i("a",{staticClass:"input-btn d-flex",class:2===t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(2)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" 暂时移除 "),i("el-tooltip",{attrs:{content:"表示从当前采购单中暂时移除，稍候可以继续对此Shopify订单生成采购订单。",placement:"right"}},[i("i",{staticClass:"el-icon-info",staticStyle:{"margin-left":"2px","font-size":"14px",color:"#5c6ac4"}})])],1)]),i("div",{staticClass:"mg-t-10"},[i("a",{staticClass:"input-btn d-flex",class:3===t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(3)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" 尚未合作 "),i("el-tooltip",{attrs:{placement:"right"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 表示该商品您无法供货，之后再新生成采购订单时，该商品将自动设为不发货"),i("br"),t._v("（如您以后可以供货，可在“尚未合作商品”列表中对该商品进行报价和处理） ")]),i("i",{staticClass:"el-icon-info",staticStyle:{"margin-left":"2px","font-size":"14px",color:"#5c6ac4"}})])],1)]),i("div",{staticClass:"mg-t-10"},[i("a",{staticClass:"input-btn d-flex",class:99==t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(99)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Other"))+" ")])]),i("div",{staticClass:"mg-t-10"},[i("div",{staticClass:"tx-right"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e._self.$refs["popover-stop-"+e.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.setStop(e.row,"2")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1)])]),i("el-link",{staticStyle:{color:"#f56c6c","font-size":"12px"},attrs:{slot:"reference",underline:!1},on:{click:t.showPopover3},slot:"reference"},[t._v(" "+t._s(t.$t("invoice.Setdelete"))+" ")])],1)]:1==t.invoiceInfo.allowWithdraw?[i("el-button",{staticStyle:{color:"#67c23a","font-size":"12px"},attrs:{type:"text"},on:{click:function(i){return t.setStop(e.row,"1")}}},[t._v(t._s(t.$t("invoice.Resume")))])]:t._e(),"2"==e.row.fulfillStatus?i("div",{staticClass:"tx-center"},[i("el-link",{attrs:{slot:"reference",type:"danger"},on:{click:function(i){return t.setRestore(e.row)}},slot:"reference"},[t._v("删除")])],1):t._e()],2):t._e()])]}}],null,!1,3106071976)})],1)],1):t._e(),2==t.tabActive?i("div",[i("el-table",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.pageLoading,expression:"pageLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"table-with-body",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.6)","row-class-name":t.tableRowClassName2,"header-cell-style":t.getRowClass3,"cell-class-name":t.getCellClass,"cell-style":t.cellStyle,data:t.invoiceData,stripe:"",border:"","row-key":t.getRowKey,"expand-row-keys":t.expands},on:{"row-click":t.rowClick,"expand-change":t.expandChange}},[i("el-table-column",{attrs:{type:"expand",width:"20"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-card",{attrs:{shadow:"never"}},[i("div",[i("el-table",{staticClass:"table-with-body",attrs:{"header-cell-style":t.getRowClass2,"cell-style":t.cellStyle2,data:e.row.displayItems,stripe:"",border:""}},[i("el-table-column",{attrs:{width:"150",prop:"sku",label:t.$t("invoice.SupplierSKU")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"d-flex sku-with-error"},[e.row.sku&&e.row.price||!(e.row.quantity>0)||2==e.row.fulfillStatus?t._e():i("el-tooltip",{attrs:{placement:"left"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))),i("br"),t._v(t._s(t.$t("invoice.Reason"))+" "),e.row.sku||e.row.price?e.row.sku?i("span",[t._v(t._s(t.$t("invoice.supplypricemissing")))]):i("span",[t._v(t._s(t.$t("invoice.SKUmissing")))]):i("span",[t._v(t._s(t.$t("invoice.pricemissing")))])]),i("i",{staticClass:"fa fa-exclamation-triangle mg-r-10",staticStyle:{color:"#f56c6c",left:"-55px"}})]),i("div",[t.isChangeSku(e.row)?i("div",[i("el-input",{attrs:{disabled:"disabled",size:"small",placeholder:"SKU"},on:{change:function(i){return t.changeSkuFnBySub(e.row)}},model:{value:e.row.sku,callback:function(i){t.$set(e.row,"sku",i)},expression:"scope.row.sku"}})],1):[i("el-input",{attrs:{slot:"reference",size:"small",placeholder:"SKU"},on:{change:function(i){return t.changeSkuFnBySub(e.row)}},slot:"reference",model:{value:e.row.sku,callback:function(i){t.$set(e.row,"sku",i)},expression:"scope.row.sku"}})]],2)],1)]}}],null,!0)}),i("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[i("div",{staticStyle:{"max-width":"100%","text-align":"left"}},[i("div",{staticClass:"d-flex no-wrap justify-content-between"},[i("el-popover",{staticClass:"d-flex",attrs:{"popper-class":"customer-popover",placement:"bottom",title:t.$t("invoice.ShopifyOrders")+" "+e.row.codeName,width:"500",trigger:"hover"}},[i("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[i("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.row.codeName)),i("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e.row.shippingJson&&e.row.shippingJson.name?i("span",{staticClass:"tx-ellipsis1",staticStyle:{display:"inline-block","max-width":"100px"}},[t._v("To "+t._s(e.row.shippingJson.name)+" ")]):t._e(),e.row.shippingJson&&e.row.shippingJson.country?i("span",{staticStyle:{display:"inline-block","max-width":"100px","text-overflow":"ellipsis"}},[t._v(" ("+t._s(e.row.shippingJson.country)+")")]):t._e()]),i("div",{staticClass:"mg-y-15 mg-t-20"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" "+t._s(t.$t("invoice.Orderdate"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.timeCreated)+" ")])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" "+t._s(t.$t("invoice.Buyer"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.name?e.row.shippingJson.name:"---")+" ")])]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Copyinformation"),placement:"left"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.shippingJson.name,expression:"\n                                                          scope.row.shippingJson\n                                                            .name\n                                                        ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"\n                                                          onCopy\n                                                        ",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"\n                                                          onError\n                                                        ",arg:"error"}],staticClass:"el-icon-document-copy"})])],1)],1),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" "+t._s(t.$t("invoice.address"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{"max-width":"75%"}},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.zip?e.row.shippingJson.zip:"---")+" "+t._s(e.row.shippingJson&&e.row.shippingJson.address1?e.row.shippingJson.address1:"---")+" "+t._s(e.row.shippingJson&&e.row.shippingJson.city?e.row.shippingJson.city:"---")+" "+t._s(e.row.shippingJson&&e.row.shippingJson.province?e.row.shippingJson.province:"---")+" ")])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}}),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.country?e.row.shippingJson.country:"---")+" ")])]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Copyaddress"),placement:"left"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.shippingJson.zip+e.row.shippingJson.address1+e.row.shippingJson.city+e.row.shippingJson.province+e.row.shippingJson.country,expression:"\n                                                          scope.row.shippingJson\n                                                            .zip +\n                                                          scope.row.shippingJson\n                                                            .address1 +\n                                                          scope.row.shippingJson\n                                                            .city +\n                                                          scope.row.shippingJson\n                                                            .province +\n                                                          scope.row.shippingJson\n                                                            .country\n                                                        ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"\n                                                          onCopy\n                                                        ",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"\n                                                          onError\n                                                        ",arg:"error"}],staticClass:"el-icon-document-copy"})])],1)],1),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" "+t._s(t.$t("invoice.BuyerEmail"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.email)+" ")])]),e.row.email?[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.CopyEmail"),placement:"left"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.email,expression:"\n                                                            scope.row.email\n                                                          ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"\n                                                            onCopy\n                                                          ",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"\n                                                            onError\n                                                          ",arg:"error"}],staticClass:"el-icon-document-copy"})])],1)]:t._e()],2)])])],1)])])]}}],null,!0)},[i("template",{slot:"header"},[t._v(" "+t._s(t.$t("invoice.ShopifyOrders"))+" ")])],2),i("el-table-column",{attrs:{prop:"qty",width:"160"},scopedSlots:t._u([{key:"default",fn:function(o){return[[t.isChangeOther(o.row)?[i("el-input-number",{attrs:{disabled:!0,size:"small",min:1},on:{change:function(i){return t.handleChangeBySub(e,o.row,i)}},model:{value:o.row.quantity,callback:function(e){t.$set(o.row,"quantity",e)},expression:"scope.row.quantity"}})]:[i("el-input-number",{attrs:{size:"small",min:1},on:{change:function(i){return t.handleChangeBySub(e,o.row,i)}},model:{value:o.row.quantity,callback:function(e){t.$set(o.row,"quantity",e)},expression:"scope.row.quantity"}})]]]}}],null,!0)},[i("template",{slot:"header"},[t._v(" "+t._s(t.$t("invoice.Purchasequantity"))+" ")])],2),i("el-table-column",{attrs:{label:t.$t("invoice.客户实际售价"),width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.customerPrice?[e.row.currency?i("span",{staticStyle:{color:"#909399"}},[t._v(t._s(e.row.currency)+t._s(t.$CE[e.row.currency].symbol))]):i("span",{staticStyle:{color:"#909399"}},[t._v("US$")]),t._v(" "+t._s(e.row.customerPrice)+" ")]:[i("span",{staticStyle:{color:"#c0c4cc"}},[t._v("---")])]]}}],null,!0)}),i("el-table-column",{attrs:{prop:"price",label:t.$t("invoice.Supplyunit"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(o){return[i("div",[t.isChangePrice(o.row)?i("div",[i("el-input",{attrs:{disabled:"disabled",name:"price-input",size:"small",placeholder:t.$t("invoice.Supplyunit")},on:{change:function(i){return t.changePriceFnBySub(e,o.row)}},model:{value:o.row.price,callback:function(e){t.$set(o.row,"price",e)},expression:"scope.row.price"}})],1):[i("el-input-number",{attrs:{slot:"reference",name:"price-input",size:"small",placeholder:t.$t("invoice.Supplyunit"),min:0,controls:!1,precision:2},on:{change:function(i){return t.changePriceFnBySub(e,o.row)}},slot:"reference",model:{value:o.row.price,callback:function(e){t.$set(o.row,"price",e)},expression:"scope.row.price"}})]],2)]}}],null,!0)}),i("el-table-column",{attrs:{label:t.$t("invoice.Totalsupply"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(o){return[t.isChangePrice(o.row)?i("div",[i("el-input",{attrs:{name:"price-input",disabled:"disabled",size:"small",placeholder:t.$t("invoice.Totalsupply")},model:{value:o.row.amount,callback:function(e){t.$set(o.row,"amount",e)},expression:"scope.row.amount"}})],1):[i("el-input",{attrs:{name:"price-input",type:"number",size:"small",placeholder:t.$t("invoice.Totalsupply")},on:{input:function(t){o.row.amount=o.row.amount.match(/^\d*(\.?\d{0,2})/g)[0]||null},change:function(i){return t.changePriceTotalFnBySub(e,o.row)}},model:{value:o.row.amount,callback:function(e){t.$set(o.row,"amount",e)},expression:"scope.row.amount"}})]]}}],null,!0)})],1),i("div",{staticClass:"expandPage"},[i("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":e.row.displayItemsPage,background:!0,layout:"total, prev, pager, next, jumper","page-size":50,total:Number(e.row.allItems.length)},on:{"current-change":function(i){return t.DisplayToPage(i,e.row)}}})],1)],1)])]}}],null,!1,2658837656)}),i("el-table-column",{attrs:{width:"240"},scopedSlots:t._u([{key:"header",fn:function(){return[i("div",{staticClass:"d-flex align-item-center change-type"},[t._v(" "+t._s(t.$t("invoice.SupplierSKU"))+" ")])]},proxy:!0},{key:"default",fn:function(e){return[i("div",{staticClass:"d-flex sku-with-error"},[e.row.sku&&e.row.price||!(e.row.quantity>0)||2==e.row.fulfillStatus?t._e():i("el-tooltip",{attrs:{placement:"left"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))),i("br"),t._v(t._s(t.$t("invoice.Reason"))+" "),e.row.sku||e.row.price?e.row.sku?i("span",[t._v(t._s(t.$t("invoice.supplypricemissing")))]):i("span",[t._v(t._s(t.$t("invoice.SKUmissing")))]):i("span",[t._v(t._s(t.$t("invoice.pricemissing")))])]),i("i",{staticClass:"fa fa-exclamation-triangle mg-r-10",staticStyle:{color:"#f56c6c",left:"-55px"}})]),i("div",[t.isChangeSku(e.row)?i("div",[i("el-input",{attrs:{disabled:"disabled",size:"small",placeholder:"SKU"},on:{change:function(i){return t.changeSkuFn(e.row,e.$index)}},model:{value:e.row.sku,callback:function(i){t.$set(e.row,"sku",i)},expression:"scope.row.sku"}})],1):[i("el-popover",{ref:"popoverSkuGroup-"+e.$index,attrs:{"popper-class":"with-shadow",width:"400",placement:"top",title:t.$t("invoice.Batchset"),trigger:"manual"}},[i("div",[i("div",{staticClass:"mg-t-10"},[i("div",{staticClass:"d-flex justify-content-between"},[i("span",{},[t._v(t._s(t.$t("invoice.Total"))+" "),i("span",{staticClass:"color-primary tx-600"},[t._v(t._s(e.row.cnt))]),t._v(t._s(t.$t("invoice.haveset"))+" "),i("span",{staticClass:"color-primary tx-600"},[t._v(t._s(e.row.sku))])])])]),i("div",{staticClass:"mg-t-10"},[i("div",{staticClass:"tx-right"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e._self.$refs["popoverSkuGroup-"+e.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.changeSkuFn(e.row,e.$index,"close")}}},[t._v(t._s(t.$t("invoice.Save1")))])],1)])]),i("el-input",{attrs:{slot:"reference",size:"small",placeholder:"SKU"},on:{change:function(i){return t.changeSkuFn(e.row,e.$index)}},nativeOn:{keyup:function(i){return t.getSkuInfo2(e.row,e.$index,"popoverSkuGroup")}},slot:"reference",model:{value:e.row.sku,callback:function(i){t.$set(e.row,"sku",i)},expression:"scope.row.sku"}})],1),1!=t.invoiceInfo.payStatus&&1!=t.invoiceInfo.customerRead?i("el-popover",{ref:"popover-stop-"+e.$index,attrs:{width:"400",placement:"top",title:t.$t("invoice.deleteReason"),trigger:"click"},on:{show:t.setDefaultResource}},[i("div",[i("div",{staticClass:"mg-t-20"},[i("a",{staticClass:"input-btn d-flex",class:1==t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(1)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Outstock"))+" ")])]),i("div",{staticClass:"mg-t-10"},[i("a",{staticClass:"input-btn d-flex",class:2===t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(2)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" 暂时移除 "),i("el-tooltip",{attrs:{content:"表示从当前采购单中暂时移除，稍候可以继续对此Shopify订单生成采购订单。",placement:"right"}},[i("i",{staticClass:"el-icon-info",staticStyle:{"margin-left":"2px","font-size":"14px",color:"#5c6ac4"}})])],1)]),i("div",{staticClass:"mg-t-10"},[i("a",{staticClass:"input-btn d-flex",class:3===t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(3)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" 尚未合作 "),i("el-tooltip",{attrs:{placement:"right"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 表示该商品您无法供货，之后再新生成采购订单时，该商品将自动设为不发货 "),i("br"),t._v("（如您以后可以供货，可在“尚未合作商品”列表中对该商品进行报价和处理 ")]),i("i",{staticClass:"el-icon-info",staticStyle:{"margin-left":"2px","font-size":"14px",color:"#5c6ac4"}})])],1)]),i("div",{staticClass:"mg-t-10"},[i("a",{staticClass:"input-btn d-flex",class:99==t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(99)}}},[i("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Other"))+" ")])]),i("div",{staticClass:"mg-t-10"},[i("div",{staticClass:"tx-right"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e._self.$refs["popover-stop-"+e.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.setStop(e.row,"2")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1)])]),i("el-link",{staticStyle:{color:"#f56c6c","font-size":"12px","text-align":"left",display:"block"},attrs:{slot:"reference",underline:!1},on:{click:t.showPopover3},slot:"reference"},[i("i",{staticClass:"el-icon-remove-outline sbns-icon",staticStyle:{"margin-right":"3px"}}),t._v(" "+t._s(t.$t("invoice.Setdelete"))+" ")])],1):t._e()]],2)],1)]}}],null,!1,619046840)}),i("el-table-column",{scopedSlots:t._u([{key:"header",fn:function(){return[t.searchName||t.searchTrack?t._e():i("div",[i("div",{staticClass:"d-flex align-items-center justify-content-between"},[i("div",[t._v(" "+t._s(t.$t("invoice.Orderitems"))+" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchName=!0}}},[i("i",{staticClass:"el-icon-search mg-l-5"})])],1),i("div",[t._v(" "+t._s(t.$t("invoice.Logisticsnumber"))+" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchTrack=!0}}},[i("i",{staticClass:"el-icon-search mg-l-5"})])],1)])]),t.searchName||t.searchTrack?i("div",{staticClass:"d-flex"},[i("el-input",{ref:"searchNameInput",attrs:{size:"mini",type:"text",placeholder:t.searchName?t.$t("invoice.Supportsearchname"):t.$t("invoice.Supportsearchnumber"),clearable:""},on:{clear:function(e){return t.Filter(2,"name")},blur:function(e){return t.Filter(3,"name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Filter(1,"name")}},model:{value:t.searchNameInput,callback:function(e){t.searchNameInput=e},expression:"searchNameInput"}},[i("el-button",{attrs:{slot:"append",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){return t.Filter(1,"name")}},slot:"append"})],1)],1):t._e()]},proxy:!0},{key:"default",fn:function(e){return[i("div",{staticClass:"d-flex"},[i("el-image",{staticStyle:{"min-width":"70px",width:"70px",height:"70px",margin:"0 5px 0 0",border:"1px solid #ddd"},attrs:{lazy:"",src:e.row.imgUrl,"preview-src-list":e.row.previewList}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"20px"}})])]),i("div",{staticStyle:{"max-width":"100%","text-align":"left"}},[i("div",{staticClass:"tx-600"},[t._v(" "+t._s(e.row.name)+" ")])])],1)]}}],null,!1,3896335951)}),i("el-table-column",{attrs:{prop:"qty",width:"80"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("invoice.Purchasequantity"))+" ")]},proxy:!0},{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.quantity))])]}}],null,!1,256918277)}),i("el-table-column",{attrs:{prop:"price",width:t.isChangeAmount()?"120px":"200px"},scopedSlots:t._u([{key:"header",fn:function(){return[i("div",{staticClass:"supplyunit",staticStyle:{"text-align":"center"}},[t._v(" "+t._s(t.$t("invoice.Supplyunit"))+" ")])]},proxy:!0},{key:"default",fn:function(e){return[i("div",[t.isChangePrice(e.row)?i("div",{staticClass:"d-flex"},[i("el-input",{attrs:{disabled:"disabled",name:"price-input",size:"small",placeholder:t.$t("invoice.Supplyunit")},on:{change:function(i){return t.changePriceFn(e.row,e.$index)}},model:{value:e.row.price,callback:function(i){t.$set(e.row,"price",i)},expression:"scope.row.price"}}),t.isChangeAmount()||"1"!==e.fulfillStatus?t._e():i("a",{staticClass:"mg-l-0",staticStyle:{"font-weight":"bold","white-space":"nowrap","margin-left":"10px"},attrs:{href:"javascript:;"},on:{click:function(i){return i.stopPropagation(),t.setLotPrice(e.row)}}},[t._v(t._s(t.$t("invoice.Batchset")))])],1):i("div",{staticClass:"d-flex"},[null!==e.row.price?i("el-popover",{ref:"popoverPriceGroup-"+e.$index,attrs:{"popper-class":"with-shadow",width:"400",placement:"top",title:t.$t("invoice.Batchsupplyset"),trigger:"manual"}},[i("div",[i("div",{staticClass:"mg-t-10"},[i("div",{staticClass:"d-flex justify-content-between"},[i("span",{},[i("span",{domProps:{innerHTML:t._s(t.$t("invoice.hereare",{num:Number(e.row.cnt)}))}}),t._v(t._s(t.$t("invoice.Batchsetto"))+" "),i("span",{staticClass:"color-primary tx-600"},[t._v(t._s(e.row.price))])])])]),i("div",{staticClass:"mg-t-10"},[i("div",{staticClass:"tx-right"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e._self.$refs["popoverPriceGroup-"+e.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.changePriceFn(e.row,e.$index,"close")}}},[t._v(t._s(t.$t("invoice.Save1")))])],1)])]),i("el-input",{ref:"refInput"+e.$index,attrs:{slot:"reference",type:"number",name:"price-input",size:"small",placeholder:t.$t("invoice.Supplyunit")},on:{input:function(t){e.row.price=e.row.price.match(/^\d*(\.?\d{0,2})/g)[0]||null},change:function(i){return t.changePriceFn(e.row,e.$index)},blur:function(i){return t.blueChange(e.row,e.$index)}},nativeOn:{keyup:function(i){return t.getPriceInfo2(e.row,e.$index,"popoverPriceGroup")}},slot:"reference",model:{value:e.row.price,callback:function(i){t.$set(e.row,"price",i)},expression:"scope.row.price"}})],1):i("div",[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.noAllow"),placement:"top"},model:{value:e.row.tooltipShow,callback:function(i){t.$set(e.row,"tooltipShow",i)},expression:"scope.row.tooltipShow"}},[i("div",[i("el-input",{staticClass:"unactive",attrs:{slot:"reference",type:"number",name:"price-input",size:"small"},on:{input:function(t){e.row.price=e.row.price.match(/^\d*(\.?\d{0,2})/g)[0]||null},change:function(i){return t.changePriceFn(e.row,e.$index)},focus:function(i){return t.focusChange(e.row,e.$index)}},nativeOn:{keyup:function(i){return t.getPriceInfo(e.row,e.$index)}},slot:"reference",model:{value:e.row.price,callback:function(i){t.$set(e.row,"price",i)},expression:"scope.row.price"}}),t._v(" "+t._s(e.row.price)+" ")],1)])],1),t.isChangeAmount()?t._e():i("a",{staticClass:"mg-l-0",staticStyle:{"font-weight":"bold","white-space":"nowrap","margin-left":"10px"},attrs:{href:"javascript:;"},on:{click:function(i){return i.stopPropagation(),t.setLotPrice(e.row)}}},[t._v(t._s(t.$t("invoice.Batchset")))])],1),i("p",{directives:[{name:"show",rawName:"v-show",value:e.row.minPrice>0&&e.row.minPrice!=e.row.maxPrice,expression:"\n                                  scope.row.minPrice > 0 &&\n                                  scope.row.minPrice != scope.row.maxPrice\n                                "}]},[t._v(" "+t._s(t.$t("invoice.supplyprice"))+t._s(t.$numberToCurrency(e.row.minPrice))+" ~ "+t._s(t.$numberToCurrency(e.row.maxPrice))+" ")])])]}}],null,!1,505544216)}),i("el-table-column",{attrs:{label:t.$t("invoice.Totalsupply"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[t._v(" "+t._s(t.$numberToCurrency(e.row.amount))+" ")])]}}],null,!1,2205276743)})],1)],1):t._e()]:t._e(),0==t.invoiceData.length?[i("el-table",{staticClass:"table-only",attrs:{"header-cell-style":t.getRowClass,"cell-style":t.cellStyle}},[i("el-table-column",{attrs:{width:"150",label:t.$t("invoice.SupplierSKU")}}),i("el-table-column",{attrs:{label:"Items"}}),i("el-table-column",{attrs:{label:"Quantity",width:"160"}}),i("el-table-column",{attrs:{label:"Unit Cost(US$)",width:"120"}}),i("el-table-column",{attrs:{label:"Subtotal(US$)",width:"120"}})],1),i("el-table",{staticClass:"table-with-body",attrs:{"row-class-name":t.tableRowClassName,"header-cell-style":t.getRowClass,"cell-class-name":t.getCellClass,"cell-style":t.cellStyle,data:t.invoiceData,stripe:"",border:""}},[i("el-table-column",{attrs:{width:"150"}},[i("template",{slot:"header"},[t._v(" "+t._s(t.$t("invoice.SupplierSKU"))+" ")])],2),i("el-table-column",[i("template",{slot:"header"},[t.searchName||t.searchTrack?t._e():i("div",[i("div",{staticClass:"d-flex align-items-center justify-content-between"},[i("div",[t._v(" "+t._s(t.$t("invoice.Orderitems"))+" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchName=!0}}},[i("i",{staticClass:"el-icon-search mg-l-5"})])],1),i("div",[t._v(" "+t._s(t.$t("invoice.Logisticsnumber"))+" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchTrack=!0}}},[i("i",{staticClass:"el-icon-search mg-l-5"})])],1)])]),t.searchName||t.searchTrack?i("div",{staticClass:"d-flex"},[i("el-input",{ref:"searchNameInput",attrs:{size:"mini",type:"text",placeholder:t.searchName?t.$t("invoice.Supportsearchname"):t.$t("invoice.Supportsearchnumber"),clearable:""},on:{clear:function(e){return t.Filter(2,"name")},blur:function(e){return t.Filter(3,"name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Filter(1,"name")}},model:{value:t.searchNameInput,callback:function(e){t.searchNameInput=e},expression:"searchNameInput"}},[i("el-button",{attrs:{slot:"append",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){return t.Filter(1,"name")}},slot:"append"})],1)],1):t._e()])],2),i("el-table-column",{attrs:{prop:"qty",width:"160"},scopedSlots:t._u([{key:"header",fn:function(e){return[t._v(" "+t._s(t.$t("invoice.Purchasequantity"))+" ")]}}],null,!1,3053079991)}),i("el-table-column",{attrs:{prop:"price",label:t.$t("invoice.Supplyunit"),width:"120"}}),i("el-table-column",{attrs:{label:t.$t("invoice.Totalsupply"),width:"120"}})],1)]:t._e()],2),t.invoiceData.length?i("el-row",{attrs:{gutter:20}},[i("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[i("div",{staticStyle:{position:"relative",top:"10px"}},[i("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":t.page,background:!0,layout:"total, prev, pager, next, jumper","page-size":t.rowsPerPage,total:Number(t.totalCount)},on:{"current-change":t.toPage}})],1)])],1):t._e(),i("el-divider"),1==t.tabActive||2==t.tabActive?[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-footer mg-t-30 mg-b-10",staticStyle:{"min-height":"50px","z-index":"0"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("div",{staticClass:"text item"},[i("div",{staticStyle:{"background-color":"#fff",padding:"20px"}},[i("p",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.customerRead,expression:"invoiceInfo.customerRead == 1"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Customerconfirmed")))]),t._v(t._s(t.invoiceInfo.timeRead?t.invoiceInfo.timeRead:"---")+" ")]),i("p",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.payStatus,expression:"invoiceInfo.payStatus == 1"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Supplierconfirmed"))+" ")]),t._v(t._s(t.invoiceInfo.timePaid?t.invoiceInfo.timePaid:"---")+" ")]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.timeApiGet,expression:"invoiceInfo.timeApiGet"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.ERPdownloaded"))+" ")]),t._v(t._s(t.invoiceInfo.timeApiGet?t.invoiceInfo.timeApiGet:"---")+" ")]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.firstDeliverTime,expression:"invoiceInfo.firstDeliverTime"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Supplierstarts")))]),t._v(t._s(t.invoiceInfo.firstDeliverTime?t.invoiceInfo.firstDeliverTime:"---")+" ")])])])]),i("el-col",{attrs:{span:16}},[i("div",{staticClass:"grid-content invoice-bottom"},[i("div",{staticClass:"d-flex justify-content-end mg-b-10"},[i("div",{},[t._v(" "+t._s(t.$t("invoice.Producttotal"))+"(US$) : ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(t.realAmount>0?t.$numberToCurrency(t.itemAmount):t.$t("invoice.Notset"))+" ")])]),i("div",{staticClass:"d-flex justify-content-end"},[i("div",{},[t._v(" "+t._s(t.$t("invoice.Shippingtotal"))+" (US$) : ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(Number(t.shippingAmount)?t.$numberToCurrency(t.shippingAmount):"0.00")+" ")])]),i("el-divider"),i("div",{staticClass:"d-flex justify-content-end mg-t-10 bold-input"},[i("div",{staticClass:"tx-bold"},[t._v(" "+t._s(t.$t("invoice.Totalamount"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15 tx-danger tx-bold",staticStyle:{"font-size":"16px"}},[t._v(" "+t._s(t.realAmount&&t.realAmount>0?t.$numberToCurrency(t.realAmount):t.$t("invoice.Notset"))+" ")])]),t.$store.state.userInfo.canUseWallet?i("div",{staticClass:"d-flex justify-content-end mg-t-10 set-paytype-3",staticStyle:{"align-items":"center","background-color":"#f2f6fc",padding:"15px 0"}},[i("div",{},[t._v(" "+t._s(t.$t("invoice.Paymentmethod"))+" : ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[2==t.invoiceInfo.paymentType&&t.invoiceInfo.payUrl?i("a",{attrs:{href:t.invoiceInfo.payUrl,target:"_blank"}},[t._v(" "+t._s(t.$t(t.$dict.paymentType[t.invoiceInfo.paymentType].text))+" ")]):i("span",[t._v(" "+t._s(t.invoiceInfo.paymentType?t.$t(t.$dict.paymentType[t.invoiceInfo.paymentType].text):t.$t("invoice.Notset"))+" ")]),1!=t.invoiceInfo.payStatus?i("el-link",{staticClass:"mg-l-15",attrs:{type:"primary"},on:{click:t.openSetPayment}},[i("i",{staticClass:"el-icon-edit"})]):t._e()],1)]):t._e()],1),"9"!=t.invoiceInfo.status&&"1"!=t.invoiceInfo.status?i("div",{staticClass:"tx-right mg-t-15 d-flex justify-content-end"},[t.invoiceCnt.notBindCnt>0?[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.stillInvoice"))+" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.changeTabByTip}},[i("i",{staticClass:"fa fa-exclamation-triangle",staticStyle:{color:"#f56c6c"}})]),t._v(" "+t._s(t.$t("invoice.stillmissing"))),i("br"),t._v(t._s(t.$t("invoice.invoicedetails"))+" ")],1),t.invoiceInfo.status<5?i("el-button",{staticClass:"with-disabled step-btn-4",staticStyle:{"margin-right":"10px"},attrs:{disabled:"9"==t.invoiceInfo.status,size:"medium",icon:"fa fa-send"}},[t._v(t._s(t.$t("invoice.Sendinvoiceto")))]):t._e()],1)]:[i("el-button",{staticClass:"step-btn-4",staticStyle:{"margin-right":"10px"},attrs:{disabled:"9"==t.invoiceInfo.status,size:"medium",type:"success",icon:"fa fa-send"},on:{click:function(e){return t.sendInvoice()}}},[t._v(t._s(t.$t("invoice.Sendinvoiceto")))])],0==t.invoiceCnt.notBindCnt?[i("div",{staticClass:"d-flex btn-wrap"},[2==t.invoiceInfo.payStatus?[i("el-tooltip",{attrs:{disabled:!t.hasAbnormal,effect:"dark",content:"采购数量异常，请处理后再操作",placement:"top-start"}},[i("el-popover",{attrs:{placement:"top",width:"460",trigger:"manual"},model:{value:t.confirmVisible,callback:function(e){t.confirmVisible=e},expression:"confirmVisible"}},[i("div",[i("div",{staticClass:"mg-b-5",staticStyle:{"line-height":"20px"}},[t._v(" "+t._s(t.$t("invoice.Received"))+" ")]),i("div",{staticClass:"tx-error mg-b-10",staticStyle:{"line-height":"20px"}},[t._v(" "+t._s(t.$t("invoice.Afterconfirmation"))+" ")])]),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.confirmVisible=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.confirmMoneyOnly("1")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1),i("a",{staticClass:"btn-item btn-item1",class:{" with-disabled":"9"==t.invoiceInfo.status||t.hasAbnormal},attrs:{slot:"reference",href:"javascript:;"},on:{click:t.showPopover},slot:"reference"},[i("i",{staticClass:"fa fa-dollar"}),i("span",[t._v(t._s(t.$t("invoice.Confirmation")))])])])],1)]:t._e(),"9"==t.invoiceInfo.status?[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.paymentmethod"))+" ")]),i("a",{staticClass:"btn-item btn-item1 with-disabled",attrs:{href:"javascript:;"}},[i("i",{staticClass:"fa fa-dollar"}),i("span",[t._v(t._s(t.$t("invoice.Confirmation")))])])])]:t._e(),1==t.invoiceInfo.payStatus?[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.haveconfirmed"))+" ")]),i("a",{staticClass:"btn-item btn-item1 with-disabled",attrs:{href:"javascript:;"}},[i("i",{staticClass:"fa fa-dollar"}),i("span",[t._v(t._s(t.$t("invoice.Confirmation")))])])]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.Clickbutton"))+" ")]),i("a",{staticClass:"btn-item btn-item2 confirmStep1",attrs:{href:"javascript:;"},on:{click:t.confirmMoney}},[i("i",{staticClass:"el-icon-connection"}),i("span",[t._v(t._s(t.$t("invoice.ERPsystem")))])])])]:[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.receivepayment"))+" ")]),i("a",{staticClass:"btn-item btn-item2 with-disabled confirmStep1",class:t.hasAbnormal?"with-disabled-btn1":"",attrs:{href:"javascript:;"}},[i("i",{staticClass:"el-icon-connection"}),i("span",[t._v(t._s(t.$t("invoice.ERPsystem")))])])])]],2)]:t._e()],2):t._e(),Number(t.invoiceCnt.notBindCnt)||"1"!=t.invoiceInfo.status?t._e():i("div",{staticClass:"tx-right mg-t-15 d-flex justify-content-end"},[i("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"medium"},on:{click:function(e){return t.setPriceConfirm()}}},[t._v(" "+t._s(t.$t("invoice.确认完成报价"))+" ")])],1)])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.noMore,expression:"!noMore"}],staticClass:"page-footer-fixed"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceConfirmTourShow,expression:"invoiceConfirmTourShow"}],staticClass:"tour-mask"}),i("div",{staticStyle:{width:"1270px",margin:"0 auto"}},[i("div",{staticClass:"without-hover"},[i("el-row",{staticStyle:{margin:"20px 15px 10px -15px"}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"d-flex justify-content-between"},[i("div",{staticClass:"d-flex"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.customerRead,expression:"invoiceInfo.customerRead == 1"}],staticStyle:{display:"flex","align-items":"center",color:"#67c23a","margin-right":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("div",{staticStyle:{"margin-left":"5px"}},[t._v(" "+t._s(t.invoiceInfo.timeRead?t.invoiceInfo.timeRead:"---")+" "),i("span",{staticStyle:{display:"block","white-space":"normal"}},[t._v(t._s(t.$t("invoice.Customerconfirmed")))])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.payStatus,expression:"invoiceInfo.payStatus == 1"}],staticStyle:{display:"flex","align-items":"center",color:"#67c23a","margin-right":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("div",{staticStyle:{"margin-left":"5px"}},[t._v(" "+t._s(t.invoiceInfo.timePaid?t.invoiceInfo.timePaid:"---")+" "),i("span",{staticStyle:{display:"block","white-space":"normal"}},[t._v(t._s(t.$t("invoice.Supplierconfirmed")))])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.timeApiGet,expression:"invoiceInfo.timeApiGet"}],staticStyle:{display:"flex","align-items":"center",color:"#67c23a","margin-right":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("div",{staticStyle:{"margin-left":"5px"}},[t._v(" "+t._s(t.invoiceInfo.timeApiGet?t.invoiceInfo.timeApiGet:"---")+" "),i("span",{staticStyle:{display:"block","white-space":"normal"}},[t._v(t._s(t.$t("invoice.ERPdownloaded")))])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.firstDeliverTime,expression:"invoiceInfo.firstDeliverTime"}],staticStyle:{display:"flex","align-items":"center",color:"#67c23a","margin-right":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("div",{staticStyle:{"margin-left":"5px"}},[t._v(" "+t._s(t.invoiceInfo.firstDeliverTime?t.invoiceInfo.firstDeliverTime:"---")+" "),i("span",{staticStyle:{display:"block","white-space":"normal"}},[t._v(t._s(t.$t("invoice.Supplierstarts")))])])])]),i("div",{staticClass:"d-flex justify-content-end",staticStyle:{"white-space":"nowrap"}},[i("div",{staticClass:"tx-bold"},[t._v(" "+t._s(t.$t("invoice.Totalamount"))+" ")]),i("div",{staticClass:"mg-l-5",staticStyle:{"font-weight":"bold","font-size":"16px !important"}},[t._v(" "+t._s(t.realAmount>0?t.$numberToCurrency(t.realAmount):t.$t("invoice.Notset"))+" ")])])])])],1)],1),i("div",{staticClass:"with-hover"},[i("el-row",{staticStyle:{margin:"10px 15px 10px -15px"}},[i("el-col",{attrs:{span:8}},[i("div",{staticClass:"text item"},[i("div",{staticStyle:{"background-color":"#fff",padding:"20px"}},[i("p",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.customerRead,expression:"invoiceInfo.customerRead == 1"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Customerconfirmed"))+" ")]),t._v(t._s(t.invoiceInfo.timeRead?t.invoiceInfo.timeRead:"---")+" ")]),i("p",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.payStatus,expression:"invoiceInfo.payStatus == 1"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Supplierconfirmed"))+" ")]),t._v(t._s(t.invoiceInfo.timePaid?t.invoiceInfo.timePaid:"---")+" ")]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.timeApiGet,expression:"invoiceInfo.timeApiGet"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.ERPdownloaded"))+" ")]),t._v(t._s(t.invoiceInfo.timeApiGet?t.invoiceInfo.timeApiGet:"---")+" ")]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.firstDeliverTime,expression:"invoiceInfo.firstDeliverTime"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[i("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),i("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Supplierstarts"))+" ")]),t._v(t._s(t.invoiceInfo.firstDeliverTime?t.invoiceInfo.firstDeliverTime:"---")+" ")])])])]),i("el-col",{staticStyle:{overflow:"visible"},attrs:{span:16}},[i("div",{staticClass:"grid-content invoice-bottom"},[i("div",{staticClass:"d-flex justify-content-end mg-b-10"},[i("div",{},[t._v(" "+t._s(t.$t("invoice.Producttotal"))+" (US$) : ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(t.realAmount>0?t.$numberToCurrency(t.itemAmount):t.$t("invoice.Notset"))+" ")])]),i("div",{staticClass:"d-flex justify-content-end"},[i("div",{},[t._v(" "+t._s(t.$t("invoice.Shippingtotal"))+" (US$) : ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(Number(t.shippingAmount)?t.$numberToCurrency(t.shippingAmount):"0.00")+" ")])]),i("el-divider",{staticStyle:{margin:"20px -20px 20px 20px"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.discount>0,expression:"discount > 0"}],staticClass:"d-flex justify-content-end mg-t-10"},[i("div",{},[t._v(" "+t._s(t.$t("invoice.Discount"))+" (US$) : ")]),i("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{color:"rgb(103, 194, 58)"}},[t._v(" - "+t._s(t.$numberToCurrency(t.discount))+" ")])]),i("div",{staticClass:"d-flex justify-content-end mg-t-10 bold-input"},[i("div",{staticClass:"tx-bold"},[t._v(" "+t._s(t.$t("invoice.Totalamount"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15 tx-danger tx-bold",staticStyle:{"font-size":"16px"}},[t._v(" "+t._s(t.realAmount&&t.realAmount>0?t.$numberToCurrency(t.realAmount):t.$t("invoice.Notset"))+" ")])]),t.$store.state.userInfo.canUseWallet?i("div",{staticClass:"d-flex justify-content-end mg-t-10",staticStyle:{"align-items":"flex-start"}},[i("div",{},[t._v(" "+t._s(t.$t("invoice.Paymentmethod"))+" : ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[2==t.invoiceInfo.paymentType&&t.invoiceInfo.payUrl?i("a",{attrs:{href:t.invoiceInfo.payUrl,target:"_blank"}},[t._v(" "+t._s(t.$t(t.$dict.paymentType[t.invoiceInfo.paymentType].text))+" ")]):i("span",[t._v(" "+t._s(t.invoiceInfo.paymentType?t.$t(t.$dict.paymentType[t.invoiceInfo.paymentType].text):t.$t("invoice.Notset"))+" ")]),1!=t.invoiceInfo.payStatus?i("el-link",{staticClass:"mg-l-15",attrs:{type:"primary"},on:{click:t.openSetPayment}},[i("i",{staticClass:"el-icon-edit"})]):t._e()],1)]):t._e()],1),"1"!=t.invoiceInfo.status&&"9"!=t.invoiceInfo.status?i("div",{staticClass:"tx-right mg-t-15 d-flex justify-content-end"},[t.invoiceCnt.notBindCnt>0?[i("div",{staticClass:"tooltip-wrap"},[i("el-button",{staticClass:"with-disabled",staticStyle:{"margin-right":"10px"},attrs:{disabled:"9"==t.invoiceInfo.status,size:"medium",icon:"fa fa-send"}},[t._v(t._s(t.$t("invoice.Sendinvoiceto")))]),i("span",{staticClass:"tooltiptext"},[t._v(" "+t._s(t.$t("invoice.stillInvoice"))+" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.changeTabByTip}},[i("i",{staticClass:"fa fa-exclamation-triangle",staticStyle:{color:"#f56c6c"}})]),t._v(" "+t._s(t.$t("invoice.stillmissing"))),i("br"),t._v(t._s(t.$t("invoice.invoicedetails"))+" ")],1)],1)]:[i("el-button",{staticStyle:{"margin-right":"10px"},attrs:{disabled:"9"==t.invoiceInfo.status,size:"medium",type:"success",icon:"fa fa-send"},on:{click:function(e){return t.sendInvoice()}}},[t._v(t._s(t.$t("invoice.Sendinvoiceto")))])],0==t.invoiceCnt.notBindCnt?[i("div",{staticClass:"d-flex btn-wrap"},[2==t.invoiceInfo.payStatus?[i("el-tooltip",{attrs:{disabled:!t.hasAbnormal,effect:"dark",content:"采购数量异常，请处理后再操作",placement:"top-start"}},[i("el-popover",{attrs:{placement:"top",width:"460",trigger:"manual"},on:{hide:t.hidePopover},model:{value:t.confirmVisible2,callback:function(e){t.confirmVisible2=e},expression:"confirmVisible2"}},[i("div",[i("div",{staticClass:"mg-b-5",staticStyle:{"line-height":"20px"}},[t._v(" "+t._s(t.$t("invoice.Received"))+" ")]),i("div",{staticClass:"tx-error mg-b-10",staticStyle:{"line-height":"20px"}},[t._v(" "+t._s(t.$t("invoice.Afterconfirmation"))+" ")])]),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.confirmVisible2=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.confirmMoneyOnly("2")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1),i("a",{staticClass:"btn-item btn-item1",class:{" with-disabled":"9"==t.invoiceInfo.status||t.hasAbnormal},attrs:{slot:"reference",href:"javascript:;"},on:{click:t.showPopover2},slot:"reference"},[i("i",{staticClass:"fa fa-dollar"}),i("span",[t._v(t._s(t.$t("invoice.Confirmation")))])])])],1)]:t._e(),1==t.invoiceInfo.payStatus?[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.haveconfirmed"))+" ")]),i("a",{staticClass:"btn-item btn-item1 with-disabled",attrs:{href:"javascript:;"}},[i("i",{staticClass:"fa fa-dollar"}),i("span",[t._v(t._s(t.$t("invoice.Confirmation")))])])]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.Clickbutton"))+" ")]),i("a",{staticClass:"btn-item btn-item2 confirmStep",attrs:{href:"javascript:;"},on:{click:t.confirmMoney}},[i("i",{staticClass:"el-icon-connection"}),i("span",[t._v(t._s(t.$t("invoice.ERPsystem")))])])])]:[i("div",{staticClass:"tooltip-wrap"},[i("a",{staticClass:"btn-item btn-item2 with-disabled",class:t.hasAbnormal?"with-disabled-btn1":"",attrs:{href:"javascript:;"}},[i("i",{staticClass:"el-icon-connection"}),i("span",[t._v(t._s(t.$t("invoice.ERPsystem")))])]),i("span",{staticClass:"tooltiptext"},[t._v(t._s(t.$t("invoice.receivepayment")))])])]],2)]:t._e(),t._e()],2):t._e(),Number(t.invoiceCnt.notBindCnt)||"1"!=t.invoiceInfo.status?t._e():i("div",{staticClass:"tx-right mg-t-15 d-flex justify-content-end"},[i("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"medium"},on:{click:function(e){return t.setPriceConfirm()}}},[t._v(" "+t._s(t.$t("invoice.确认完成报价"))+" ")])],1)])],1)],1)])])]:t._e()]],2),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showDownloadInvoice,expression:"showDownloadInvoice"}],staticClass:"download-invoice",staticStyle:{position:"relative",left:"9999px"}},[i("el-card",{attrs:{shadow:"always"}},[i("el-row",{staticStyle:{"margin-top":"25px","align-items":"flex-start"},attrs:{type:"flex"}},[i("el-col",{attrs:{span:12}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"grid-content invoice-header-logo"})]),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content invoice-header-info"},[i("div",{staticClass:"wv-heading-title"},[t._v("INVOICE")]),[i("div",{staticClass:"wv-text-strong"},[t._v(" "+t._s(t.invoiceInfo.vendorName?t.invoiceInfo.vendorName:"---")+" ")])]],2)])],1),i("el-divider"),i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content invoice-metadata-custome tx-left pos-relative"},[i("div",[t._v(" BILL To "),i("br"),[i("span",{staticClass:"wv-text-strong",staticStyle:{cursor:"pointer"}},[t._v(t._s(t.invoiceInfo.customerName?t.invoiceInfo.customerName:"---"))])]],2),i("div",{staticClass:"change-customer"})])]),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"invoice-metadata-info mg-b-20"},[i("div",{staticClass:"text-right"},[i("p",[t._v("Invoice Number :")]),i("p",{staticClass:"mg-y-10"},[t._v("Invoice Date :")]),i("p",{staticClass:"text-bg"},[t._v("Amount Due (US$) :")])]),i("div",{staticClass:"text-left"},[i("p",[t._v(" # "+t._s(t.invoiceInfo.code?t.invoiceInfo.code:"---")+" ")]),i("p",{staticClass:"mg-y-10"},[t._v(" "+t._s(t.invoiceInfo.timeCreated?t.invoiceInfo.timeCreated:"---")+" ")]),i("p",{staticClass:"wv-text-strong text-bg",staticStyle:{"padding-left":"0"}},[t._v(" $ "+t._s(t.realAmount?t.$numberToCurrency(t.realAmount):"0.00")+" ")])])])])],1),[i("div",{staticClass:"table-wrap"},[i("el-table",{staticClass:"table-only",attrs:{"header-cell-style":t.getRowClass,"cell-style":t.cellStyle}},[i("el-table-column",{attrs:{label:"Items"}}),i("el-table-column",{attrs:{label:"Quantity",width:"160"}}),i("el-table-column",{attrs:{label:"Unit Cost(US$)",width:"120"}}),i("el-table-column",{attrs:{label:"Subtotal(US$)",width:"120"}})],1),i("el-table",{staticClass:"table-with-body",attrs:{"row-class-name":t.tableRowClassName,"header-cell-style":t.getRowClass,"cell-style":t.cellStyle,data:t.invoiceData3,stripe:"",border:""}},[i("el-table-column",{attrs:{label:"Items"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{},[i("div",{staticStyle:{"max-width":"100%","text-align":"left"}},[i("div",{staticClass:"tx-600"},[t._v(" "+t._s(e.row.name)+" ")]),2!=t.tabActive?i("div",{staticClass:"d-flex no-wrap justify-content-between"},[i("el-popover",{staticClass:"d-flex",attrs:{"popper-class":"customer-popover",placement:"bottom",title:"Shopify Order "+e.row.codeName,width:"500",trigger:"hover"}},[i("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[i("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.row.codeName)),i("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e.row.shippingJson&&e.row.shippingJson.name?i("span",{staticClass:"tx-ellipsis1",staticStyle:{display:"inline-block"}},[t._v("To "+t._s(e.row.shippingJson.name)+" ")]):t._e(),e.row.shippingJson&&e.row.shippingJson.country?i("span",{staticStyle:{display:"inline-block","max-width":"100px","text-overflow":"ellipsis",overflow:"hidden"}},[t._v(" ("+t._s(e.row.shippingJson.country)+")")]):t._e()]),i("div",{staticClass:"mg-y-15 mg-t-20"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"120px","text-align":"right",color:"#999"}},[t._v(" Order Date : ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.timeCreated)+" ")])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"120px","text-align":"right",color:"#999"}},[t._v(" Customer : ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.name?e.row.shippingJson.name:"---")+" ")])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"120px","text-align":"right",color:"#999"}},[t._v(" Shipping Address : ")]),i("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{"max-width":"75%"}},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.zip?e.row.shippingJson.zip:"---")+" "+t._s(e.row.shippingJson&&e.row.shippingJson.address1?e.row.shippingJson.address1:"---")+" "+t._s(e.row.shippingJson&&e.row.shippingJson.city?e.row.shippingJson.city:"---")+" "+t._s(e.row.shippingJson&&e.row.shippingJson.province?e.row.shippingJson.province:"---")+" ")])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"120px","text-align":"right",color:"#999"}}),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.shippingJson&&e.row.shippingJson.country?e.row.shippingJson.country:"---")+" ")])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"120px","text-align":"right",color:"#999"}},[t._v(" Email： ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(e.row.email)+" ")])])])])]),i("div",{staticClass:"no-wrap"},[e.row.trackNumber?i("div",{staticClass:"d-flex"},[i("div",[e.row.trackCompany&&e.row.realCompany?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(e.row.trackCompany)+"("+t._s(e.row.realCompany)+") ")]),t._v(" "+t._s(e.row.trackNumber)+" ")]),i("i",{staticClass:"fa fa-truck"})]):e.row.trackCompany?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(e.row.trackCompany)+" ")]),t._v(" "+t._s(e.row.trackNumber)+" ")]),i("i",{staticClass:"fa fa-truck"})]):i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(e.row.realCompany)+" ")]),t._v(" "+t._s(e.row.trackNumber)+" ")]),i("i",{staticClass:"fa fa-truck"})])],1),2==e.row.syncStatus?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.deliveredgoods"))+" "),i("br"),t._v(t._s(t.$t("invoice.Reason"))+" "+t._s(1!=t.invoiceInfo.hasAuth?t.$t("invoice.notauthorized"):e.row.syncContent)+" ")]),i("i",{staticClass:"invoice-icon-tongbu1"})]):i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.hasbeensync"),placement:"right"}},[i("i",{staticClass:"invoice-icon-tongbu2"})])],1):1==e.row.fulfillStatus?i("div",[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.hasnot"),placement:"right"}},[i("el-alert",{attrs:{title:t.$t("invoice.Notshipped"),type:"warning",closable:!1}})],1)],1):i("div",[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.wontReason")+e.row.stopReason,placement:"right"}},[i("el-alert",{attrs:{title:t.$t("invoice.wontdeliver"),type:"error",closable:!1}})],1)],1)])],1):t._e()])])]}}])}),i("el-table-column",{attrs:{prop:"qty",label:"Quantity",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[2!=t.tabActive?[i("el-input-number",{attrs:{size:"small",min:1},on:{change:function(i){return t.handleChange(e.row,i)}},model:{value:e.row.quantity,callback:function(i){t.$set(e.row,"quantity",i)},expression:"scope.row.quantity"}})]:t._e(),2==t.tabActive?i("div",[t._v(" "+t._s(e.row.quantity)+" ")]):t._e(),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Abnormalreasons")+e.row.abnormalReason,placement:"right"}},[1==e.row.isAbnormal?i("span",{staticClass:"tx-danger",staticStyle:{"margin-top":"10px",display:"inline-block"}},[i("i",{staticClass:"el-icon-info"}),t._v(t._s(t.$t("invoice.Abnormal")))]):t._e()])]}}])}),i("el-table-column",{attrs:{prop:"price",label:"Unit Cost(US$)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[2!=t.tabActive?i("div",[i("div",[t._v(" "+t._s(e.row.price)+" ")])]):t._e(),2==t.tabActive?i("div",[t._v(" "+t._s(e.row.price)+" ")]):t._e()]}}])}),i("el-table-column",{attrs:{label:"Subtotal(US$)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$numberToCurrency(e.row.amount))+" ")]}}])})],1)],1),i("div",{staticClass:"page-footer mg-t-30 mg-b-10",staticStyle:{"min-height":"50px","z-index":"0"}},[i("el-row",[i("el-col",{attrs:{span:20,offset:4}},[i("div",{staticClass:"grid-content invoice-bottom"},[i("div",{staticClass:"d-flex justify-content-end mg-b-10"},[i("div",{},[t._v("Items total (US$) :")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(t.$numberToCurrency(t.itemAmount))+" ")])]),i("div",{staticClass:"d-flex justify-content-end"},[i("div",{},[t._v("Shipping total (US$) :")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(t.$numberToCurrency(t.shippingAmount))+" ")])]),i("el-divider"),t.discount&&t.discount>0?i("div",{staticClass:"d-flex justify-content-end"},[i("div",{},[t._v("Subtotal (US$) :")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(t.$numberToCurrency(t.totalAmount))+" ")])]):t._e(),t.discount&&t.discount>0?i("div",{staticClass:"d-flex justify-content-end mg-t-10"},[i("div",{},[t._v("Discount (US$) :")]),i("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{color:"rgb(103, 194, 58)"}},[t._v(" - "+t._s(t.$numberToCurrency(t.discount))+" ")])]):t._e(),i("div",{staticClass:"d-flex justify-content-end mg-t-10 bold-input"},[i("div",{staticClass:"tx-bold"},[t._v("Amount Due (US$) :")]),i("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(" "+t._s(t.$numberToCurrency(t.realAmount))+" ")])]),i("div",{staticClass:"d-flex justify-content-end mg-t-10",staticStyle:{"align-items":"flex-start"}},[i("div",{},[t._v("Payment :")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(1==t.paymentType?"Transfer by bank or PayPal":"AliExpress")+" ")])])],1),1==t.invoiceInfo.paymentType||2==t.invoiceInfo.paymentType||3==t.invoiceInfo.paymentType?[1==t.invoiceInfo.payStatus?i("div",{staticClass:"tx-right mg-t-15"},[i("span",[i("el-alert",{staticStyle:{display:"inline"},attrs:{title:"The vender has confirmed the payment.",type:"success",closable:!1}})],1)]):t._e()]:t._e()],2)],1)],1),i("div",{staticClass:"d-flex",staticStyle:{"align-items":"flex-end"}},[i("div",{staticStyle:{position:"relative"}},[i("img",{attrs:{src:t.invoiceInfo.qrcodeBase64,width:"200"}}),i("img",{staticStyle:{position:"absolute",left:"50%",top:"50%","margin-left":"-15px","margin-top":"-15px"},attrs:{src:"images/weixin.png",width:"30px"}})]),i("div",[i("span",[t._v("You can check the invoice by scan this QR Code or visit this URL by your web browser:")]),i("el-link",{staticStyle:{"text-decoration":"underline",margin:"0 3px"},attrs:{underline:!1}},[t._v(t._s(t.invoiceInfo.url))])],1)])]],2)],1)],2),i("el-aside",{staticStyle:{position:"relative",left:"50px"},attrs:{width:"50px"}},[["9"!=t.invoiceInfo.status?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.exportImport"),placement:"right"}},[i("el-button",{staticStyle:{position:"fixed",bottom:"260px",width:"40px",height:"40px","line-height":"40px","text-align":"center",padding:"0","z-index":"1"},attrs:{size:"medium",circle:"",type:"primary"},on:{click:function(e){return t.opendrawer("3")}}},[i("i",{staticClass:"iconfont icon-xiazai",staticStyle:{"margin-right":"0","font-size":"22px"}})])],1):t._e()],i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Orderstatistics"),placement:"right"}},[i("el-button",{staticStyle:{"margin-left":"0",position:"fixed",bottom:"200px",width:"40px",height:"40px","line-height":"40px","text-align":"center",padding:"0","z-index":"1"},attrs:{size:"medium",circle:"",type:"primary"},on:{click:function(e){return t.opendrawer("1")}}},[i("i",{staticClass:"fa fa-bar-chart",staticStyle:{"margin-right":"0"}})])],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Helpcenter"),placement:"right"}},[i("el-button",{staticStyle:{"margin-left":"0",position:"fixed",bottom:"140px",width:"40px",height:"40px","line-height":"40px","text-align":"center",padding:"0","z-index":"1"},attrs:{size:"medium",circle:"",type:"primary"},on:{click:function(e){return t.opendrawer("2")}}},[i("i",{staticClass:"fa fa-question-circle-o",staticStyle:{"margin-right":"0","font-size":"20px"}})])],1),i("el-backtop",{staticStyle:{right:"auto",bottom:"80px","z-index":"1"},attrs:{target:".el-scrollbar__wrap"}})],2)],1)],1),i("el-container",{directives:[{name:"show",rawName:"v-show",value:5!=t.tabActive&&t.noMore||5==t.tabActive,expression:"(tabActive != 5 && noMore) || tabActive == 5"}],attrs:{id:"messageContainer"}},[i("el-main",[i("div",{staticClass:"d-flex justify-content-between mg-b-20 pd-x-20"},[i("span",{staticClass:"tx-16 tx-600"},[t._v(t._s(t.$t("invoice.Timeline")))]),i("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v(t._s(t.$t("invoice.Showmessage")))])],1),i("el-divider"),i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:12}},[t.currentPageDataLog.length?i("el-timeline",[t._l(t.currentPageDataLog,(function(e){return[i("el-timeline-item",[t._v(" "+t._s(e.date)+" ")]),t._l(e.listInfo,(function(e,o){return i("el-timeline-item",{attrs:{color:"#5c6ac4"}},[i("div",{staticClass:"d-flex justify-content-between",staticStyle:{"align-items":"flex-start"}},[i("span",{staticStyle:{"max-width":"515px","word-break":"break-all"}},[t._v(t._s(e.content))]),i("span",{staticStyle:{"white-space":"nowrap","margin-left":"10px",color:"#999"}},[t._v(t._s(e.datetime))])])])}))]}))],2):i("p",{staticClass:"tx-center"},[t._v(t._s(t.$t("invoice.Nodata")))])],1),i("el-col",{attrs:{span:12}},["9"!=t.invoiceInfo.status?i("div",{staticClass:"mg-b-15",staticStyle:{"margin-left":"40px",position:"relative",background:"#fff",border:"1px solid #ddd",padding:"10px"}},[i("ul",{staticClass:"figure-list"},t._l(t.fileList,(function(e,o){return i("li",{key:o},[i("figure",{style:{backgroundImage:"url("+e.url+")",backgroundSize:"cover"}},[i("a",{attrs:{href:"#"}}),i("a",{staticClass:"btn",attrs:{href:"#"},on:{click:function(e){return t.removeMsgImg(o)}}},[i("i",{staticClass:"el-icon-close"})])])])})),0),i("textarea",{staticClass:"form-control textarea-control",attrs:{placeholder:t.$t("invoice.Pleasemessage"),autosize:"",resize:"none","data-emojiable":"true"}}),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end",position:"absolute",bottom:"10px",right:"10px"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:"",accept:"image/jpeg,image/jpg,image/png","show-file-list":!1,"http-request":t.uploadSectionFile2}},[i("i",{staticClass:"fa fa-paperclip",staticStyle:{"font-size":"20px",margin:"0 10px"}})]),i("el-button",{attrs:{slot:"append",size:"small"},on:{click:t.addMessage},slot:"append"},[t._v(t._s(t.$t("ticket.send")))])],1)]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"checked"}]},[t.currentmessages.length?i("el-timeline",[t._l(t.currentmessages,(function(e){return[i("el-timeline-item",[t._v(" "+t._s(e.date)+" ")]),t._l(e.listInfo,(function(e,o){return[1==e.type?i("el-timeline-item",{attrs:{color:"#5c6ac4",timestamp:e.datetime,placement:"top"}},[i("el-card",[i("div",{staticClass:"d-flex timeline-customer"},[i("el-avatar",{attrs:{size:40}},[t._v(" "+t._s(e.cname)+" ")]),i("div",{staticClass:"mg-l-10"},[i("h4",[t._v(t._s(e.customerName))]),i("p",{staticClass:"mg-t-5",staticStyle:{"word-break":"break-all"},domProps:{innerHTML:t._s(e.content)}}),e.imgJson?i("p",{staticClass:"mg-t-10"},t._l(e.imgJson,(function(t){return i("img",{staticClass:"mg-l-10",attrs:{src:t,width:"60"}})})),0):t._e()])],1)])],1):t._e(),2==e.type?i("el-timeline-item",{attrs:{color:"#5c6ac4",timestamp:e.datetime,placement:"top"}},[i("el-card",{attrs:{"body-style":{background:"#9eea6a"}}},[i("div",{staticClass:"d-flex justify-content-end tx-right timeline-self"},[i("div",{staticClass:"mg-r-10"},[i("h4",[t._v(t._s(e.vendorName))]),i("p",{staticClass:"mg-t-5",staticStyle:{"word-break":"break-all"},domProps:{innerHTML:t._s(e.content)}}),e.imgJson?i("p",{staticClass:"mg-t-10"},t._l(e.imgJson,(function(t){return i("img",{staticClass:"mg-l-10",attrs:{src:t,width:"60"}})})),0):t._e()]),i("el-avatar",{attrs:{size:40}},[t._v(" "+t._s(e.vname)+" ")])],1)])],1):t._e()]}))]}))],2):i("p",{staticClass:"tx-center"},[t._v(t._s(t.$t("invoice.Nodata")))])],1)])],1)],1),i("el-aside",{attrs:{width:"50px"}})],1),i("el-dialog",{attrs:{"custom-class":"addCustomer",title:t.$t("invoice.newcustomer"),visible:t.addCustomerOpen,width:"40%"},on:{"update:visible":function(e){t.addCustomerOpen=e}}},[i("el-divider"),i("el-form",{ref:"formNewcustomer",attrs:{rules:t.formNewcustomerRules,model:t.formNewcustomer,"label-position":"right","label-width":"100px"}},[i("el-form-item",{attrs:{label:t.$t("mycustomer.customersName"),prop:"name"}},[i("el-input",{attrs:{placeholder:t.$t("invoice.Pleasename")},model:{value:t.formNewcustomer.name,callback:function(e){t.$set(t.formNewcustomer,"name",e)},expression:"formNewcustomer.name"}})],1),i("el-form-item",{attrs:{label:t.$t("importdata.cusEmail"),prop:"email"}},[i("el-input",{attrs:{placeholder:t.$t("invoice.PleaseEmail")},model:{value:t.formNewcustomer.email,callback:function(e){t.$set(t.formNewcustomer,"email",e)},expression:"formNewcustomer.email"}})],1),i("el-form-item",{attrs:{label:t.$t("mycustomer.remarks"),prop:"remark"}},[i("el-input",{attrs:{placeholder:t.$t("invoice.Pleaseremarks")},model:{value:t.formNewcustomer.remark,callback:function(e){t.$set(t.formNewcustomer,"remark",e)},expression:"formNewcustomer.remark"}})],1)],1),i("el-divider"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addCustomerOpen=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitAddcustomer("formNewcustomer")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1)],1),i("el-dialog",{attrs:{"custom-class":"editCustomer",title:t.$t("invoice.modifiedCustomer"),visible:t.editCustomerOpen,width:"40%"},on:{"update:visible":function(e){t.editCustomerOpen=e}}},[i("el-divider"),i("el-form",{ref:"formEditcustomer",attrs:{rules:t.formEditcustomerRules,model:t.formEditcustomer,"label-position":"right","label-width":"100px"}},[i("el-form-item",{attrs:{label:t.$t("mycustomer.customersName"),prop:"name"}},[i("el-input",{attrs:{placeholder:t.$t("invoice.Pleasename")},model:{value:t.formEditcustomer.name,callback:function(e){t.$set(t.formEditcustomer,"name",e)},expression:"formEditcustomer.name"}})],1),i("el-form-item",{attrs:{label:t.$t("importdata.cusEmail"),prop:"email"}},[i("el-input",{attrs:{placeholder:t.$t("invoice.PleaseEmail")},model:{value:t.formEditcustomer.email,callback:function(e){t.$set(t.formEditcustomer,"email",e)},expression:"formEditcustomer.email"}})],1),i("el-form-item",{attrs:{label:t.$t("mycustomer.remarks"),prop:"remark"}},[i("el-input",{attrs:{placeholder:t.$t("invoice.Pleaseremarks")},model:{value:t.formEditcustomer.remark,callback:function(e){t.$set(t.formEditcustomer,"remark",e)},expression:"formEditcustomer.remark"}})],1)],1),i("el-divider"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.editCustomerOpen=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.submitEditcustomer("formEditcustomer")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1)],1),i("el-dialog",{attrs:{"custom-class":"editCompany",title:t.$t("invoice.modifiedCompany"),visible:t.editCompanyInfoOpen,width:"40%"},on:{"update:visible":function(e){t.editCompanyInfoOpen=e}}},[i("el-divider"),i("el-form",{ref:"formEditCompany",attrs:{rules:t.formEditCompanyRules,model:t.formEditCompany,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:t.$t("invoice.companyName"),prop:"name"}},[i("el-input",{attrs:{placeholder:t.$t("invoice.fillcompany")},model:{value:t.formEditCompany.name,callback:function(e){t.$set(t.formEditCompany,"name",e)},expression:"formEditCompany.name"}})],1)],1),i("el-divider"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.editCompanyInfoOpen=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.submitEditCompany("formEditCompany")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1)],1),i("el-dialog",{attrs:{title:t.$t("invoice.shippedMark"),visible:t.dialogMarkShipped.isShow,width:"700px"},on:{"update:visible":function(e){return t.$set(t.dialogMarkShipped,"isShow",e)}}},[t.dialogMarkShipped.item?i("el-row",{staticClass:"pd-x-20",attrs:{gutter:20}},[i("el-col",{staticStyle:{color:"#303133"},attrs:{span:24}},[t._v(" "+t._s(t.dialogMarkShipped.item.name)+" ")]),i("el-col",{attrs:{span:24}},[i("el-form",{attrs:{"label-width":"160px"}},[i("el-form-item",{attrs:{label:t.$t("invoice.Supplier")}},[i("span",{staticStyle:{color:"#303133"}},[t._v(t._s(t.invoiceInfo.vendorName?t.invoiceInfo.vendorName:"---"))])]),i("el-form-item",{attrs:{label:t.$t("invoice.Logisticsnumber"),required:""}},[i("el-input",{attrs:{placeholder:t.$t("invoice.Logisticsnumber")},model:{value:t.dialogMarkShipped.trackNumber,callback:function(e){t.$set(t.dialogMarkShipped,"trackNumber",e)},expression:"dialogMarkShipped.trackNumber"}})],1),i("el-form-item",{attrs:{label:t.$t("invoice.Logisticscompany"),required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("invoice.Logisticscompany")},model:{value:t.dialogMarkShipped.trackKey,callback:function(e){t.$set(t.dialogMarkShipped,"trackKey",e)},expression:"dialogMarkShipped.trackKey"}},t._l(t.dialogMarkShipped.shopifyCompany,(function(t){return i("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1),99==t.dialogMarkShipped.trackKey?i("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:t.$t("invoice.Logisticscompany")},model:{value:t.dialogMarkShipped.trackCompany,callback:function(e){t.$set(t.dialogMarkShipped,"trackCompany",e)},expression:"dialogMarkShipped.trackCompany"}}):t._e()],1),99==t.dialogMarkShipped.trackKey?i("el-form-item",{attrs:{label:t.$t("invoice.Trackinglinks")}},[i("el-input",{attrs:{placeholder:t.$t("invoice.Trackinglinks")},model:{value:t.dialogMarkShipped.trackUrl,callback:function(e){t.$set(t.dialogMarkShipped,"trackUrl",e)},expression:"dialogMarkShipped.trackUrl"}})],1):t._e()],1)],1)],1):t._e(),i("div",{staticClass:"dialog-footer d-flex justify-content-between",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogMarkShipped.isShow=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{type:"primary",loading:t.dialogMarkShipped.loading},on:{click:t.saveMarkShipped}},[t._v(t._s(t.$t("invoice.shippedMark")))])],1)],1),i("el-dialog",{attrs:{"custom-class":"sendInvoice",title:t.$t("invoice.Sendinvoiceto"),visible:t.sendInvoiceOpen,width:"50%"},on:{open:t.openSkype,"update:visible":function(e){t.sendInvoiceOpen=e}}},[[i("div",{staticStyle:{position:"relative","z-index":"1"}},[i("div",{staticStyle:{position:"absolute",right:"30px",top:"15px"}},[i("el-switch",{on:{change:t.changeShowItemPrice},model:{value:t.showItemPrice,callback:function(e){t.showItemPrice=e},expression:"showItemPrice"}}),t._v(" "+t._s(t.$t("invoice.Showsupply"))+" ")],1)]),i("el-tabs",{staticStyle:{"margin-left":"20px","margin-top":"10px"},attrs:{type:"card"},model:{value:t.activeShareName,callback:function(e){t.activeShareName=e},expression:"activeShareName"}},[i("el-tab-pane",{attrs:{name:"shareLink"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-link"}),t._v(" "+t._s(t.$t("myinvoice.shareLink")))]),i("div",{staticClass:"d-flex mg-y-20"},[i("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[t._v(" "+t._s(t.$t("myinvoice.shareUrl"))+" ")]),i("div",[i("span",[t._v(t._s(t.invoiceInfo.url))])])]),i("div",{staticClass:"d-flex mg-y-20"},[i("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}}),i("div",[i("div",[i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.invoiceInfo.url,expression:"invoiceInfo.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{size:"mini",type:"success"}},[t._v(t._s(t.$t("myinvoice.shareCopy")))])],1)])])]),i("el-tab-pane",{attrs:{name:"shareWeixin"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-shejiao"}),t._v(" "+t._s(t.$t("invoice.Sharethrough")))]),i("div",[i("div",{staticClass:"d-flex mg-y-20"},[i("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[t._v(" "+t._s(t.$t("invoice.SetshareTitle"))+" ")]),i("div",{staticStyle:{width:"70%"}},[i("el-input",{attrs:{type:"text",size:"small"},on:{change:function(e){return t.saveRemark("2")}},model:{value:t.shareTitle,callback:function(e){t.shareTitle=e},expression:"shareTitle"}})],1)]),i("div",{staticClass:"d-flex mg-y-20 align-items-center"},[i("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[t._v(" "+t._s(t.$t("invoice.Setsharecontent"))+" ")]),i("div",{staticStyle:{width:"70%"}},[i("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:3,maxRows:6},size:"small"},on:{change:function(e){return t.saveRemark("2")}},model:{value:t.shareDesc,callback:function(e){t.shareDesc=e},expression:"shareDesc"}})],1)]),i("div",{staticClass:"d-flex mg-y-20"},[i("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[t._v(" "+t._s(t.$t("invoice.Sharemethod"))+" ")]),i("div",{staticClass:"d-flex",staticStyle:{width:"70%"}},[i("div",{staticClass:"skype-share",staticStyle:{"margin-right":"30px"},attrs:{"data-href":t.shareTitle+t.shareDesc,"data-lang":"en-US","data-text":t.invoiceInfo.url,"data-style":"large"}}),i("div",[i("el-tooltip",{attrs:{placement:"bottom"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("p",{staticClass:"tx-center mg-b-10"},[t._v(" "+t._s(t.$t("myinvoice.scan"))+" ")]),i("img",{attrs:{src:t.invoiceInfo.qrcodeP,width:"130"}}),i("img",{staticStyle:{position:"absolute",left:"50%",top:"50%","margin-left":"-15px","margin-top":"-4px"},attrs:{src:"images/weixin.png",width:"30px"}})]),i("a",{staticClass:"share-weixin",attrs:{href:"javascript:;"}},[i("i",{staticClass:"fa fa-weixin"}),t._v(" "+t._s(t.$t("myinvoice.share"))+" ")])])],1),i("a",{staticClass:"share-weixin share-download",attrs:{href:"javascript:;"},on:{click:t.downloadInvoice}},[i("i",{staticClass:"fa fa-download"}),t._v(" "+t._s(t.$t("invoice.Downloadinvoice"))+" ")])])])])])],1)],i("el-divider"),i("div",{staticClass:"dialog-footer d-flex justify-content-between",attrs:{slot:"footer"},slot:"footer"},[i("div",[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"shareWeixin"==t.activeShareName,expression:"activeShareName == 'shareWeixin'"}],attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.saveRemark("1")}}},[t._v(t._s(t.$t("myinvoice.reset")))])],1),i("div",[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.sendInvoiceOpen=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.invoicePreview(t.invoiceInfo.url)}}},[t._v(t._s(t.$t("myinvoice.previewInvocie")))])],1)])],2),i("el-dialog",{attrs:{"custom-class":"confirmMoney",title:t.$t("invoice.processorders"),visible:t.confirmMoneyOpen,width:"40%"},on:{"update:visible":function(e){t.confirmMoneyOpen=e}}},[i("el-dialog",{attrs:{title:t.$t("ticket.submitTicket"),visible:t.DialogEditComment.visible,width:"760px","append-to-body":""},on:{"update:visible":function(e){return t.$set(t.DialogEditComment,"visible",e)},closed:function(e){return t.$refs.uploadFile.clearFiles()}}},[i("el-divider"),i("div",[i("el-form",{ref:"CommentForm"},[i("el-form-item",{attrs:{label:t.$t("ticket.problemsOrRequirements")}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.DialogEditComment.contents,callback:function(e){t.$set(t.DialogEditComment,"contents",e)},expression:"DialogEditComment.contents"}})],1),i("el-form-item",{attrs:{label:""}},[i("div",{staticStyle:{"font-size":"16px","font-weight":"bold",margin:"20px 0 0"}},[t._v(" "+t._s(t.$t("ticket.uploadImageAttachment"))+" ")])]),i("el-form-item",{attrs:{label:""}},[i("el-upload",{ref:"uploadFile",staticClass:"upload-file",attrs:{"on-change":t.handleChangeImg,"before-remove":t.handleRemoveImg,action:"","auto-upload":!1,accept:"image/gif,image/jpeg,image/jpg,image/png"}},[i("el-button",{ref:"uploadBtn",attrs:{size:"small",type:"primary",loading:t.DialogEditComment.uploadLoading}},[t._v(t._s(t.$t("ticket.browse")))])],1)],1)],1)],1),i("el-divider"),i("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"mg-r-15"},[i("el-button",{attrs:{size:"small",type:"primary",loading:t.DialogEditComment.loading},on:{click:t.saveComment}},[t._v(t._s(t.$t("ticket.submitTicket")))])],1),i("div",[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.DialogEditComment.visible=!1}}},[t._v(t._s(t.$t("invoice.cancel")))])],1)])],1),i("el-dialog",{attrs:{title:t.$t("invoice.usertoken"),visible:t.secretKeyOpen,width:"50%","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.secretKeyOpen=e}}},[i("el-divider"),i("div",{staticStyle:{margin:"20px",color:"#303133"}},[i("p",[t._v(" "+t._s(t.$t("invoice.software"))+" ")])]),i("div",{staticStyle:{margin:"0 20px",padding:"15px","background-color":"#fafafa",border:"1px solid #eaeefb","border-radius":"4px",color:"#303133"}},[i("p",[t._v(" "+t._s(t.$t("invoice.pastetoken"))+" ")]),i("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-around",margin:"15px 0"}},[i("div",{staticStyle:{width:"48%","margin-right":"2%"}},[i("p",{staticClass:"mg-y-10"},[t._v(t._s(t.$t("invoice.Picture1")))]),i("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:"images/secretKey1.png"}})]),i("div",{staticStyle:{width:"48%","margin-left":"2%"}},[i("p",{staticClass:"mg-y-10"},[t._v(t._s(t.$t("invoice.Picture2")))]),i("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:"images/secretKey2.jpg"}})])]),i("p",{staticStyle:{"margin-top":"10px"}},[t._v(" "+t._s(t.$t("invoice.present"))+" "),i("el-link",{attrs:{target:"_blank",type:"primary",underline:!1,href:"//www.mabangerp.com/"}},[t._v("马帮ERP")]),t._v(" "+t._s(t.$t("invoice.soon"))+" ")],1)]),i("div",{staticStyle:{margin:"20px",color:"rgb(153, 153, 153)"}},[i("p",[t._v(" "+t._s(t.$t("invoice.sametime"))+" "),i("el-link",{attrs:{type:"primary",underline:!1},on:{click:t.openAddComment}},[t._v(t._s(t.$t("invoice.contact")))]),t._v("。 ")],1)]),i("el-divider"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.secretKeyOpen=!1}}},[t._v(t._s(t.$t("importdata.gotIt")))])],1)],1),i("el-tabs",{staticStyle:{"margin-left":"20px","margin-top":"10px"},attrs:{type:"card"},model:{value:t.activeConfirm,callback:function(e){t.activeConfirm=e},expression:"activeConfirm"}},[i("el-tab-pane",{attrs:{name:"confirmErp"}},[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("invoice.authorizederp")))]),i("div",[i("div",{staticClass:"mg-y-20"},[i("span",{staticStyle:{margin:"0 10px 0 26px",display:"inline-block",width:"177px","text-align":"right"}},[t._v(t._s(t.$t("invoice.tokenerp")))]),i("span",[t._v(" "+t._s(t.userInfo&&t.userInfo.secretKey?t.userInfo.secretKey:"---")+" ")]),t.userInfo&&t.userInfo.secretKey?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.userInfo.secretKey,expression:"userInfo.secretKey",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e(),i("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"mini",type:"text"},on:{click:t.openSecretKey}},[t._v(" "+t._s(t.$t("invoice.usertoken"))+" ")])],1),i("div",{staticClass:"mg-y-20",staticStyle:{display:"flex","align-items":"center"}},[i("span",{staticStyle:{margin:"0 10px 0 26px"}},[t._v(t._s(t.$t("invoice.storename")))]),i("el-autocomplete",{staticClass:"inline-input",attrs:{disabled:!!t.invoiceInfo.timeApiGet,size:"medium","fetch-suggestions":t.querySearch,placeholder:t.$t("invoice.entershopname")},on:{select:t.handleSelect},model:{value:t.shopName,callback:function(e){t.shopName=e},expression:"shopName"}})],1),t.invoiceInfo.timeApiGet?i("div",{staticClass:"mg-y-20"},[i("span",{staticStyle:{margin:"0 10px 0 26px",opacity:"0"}},[t._v(t._s(t.$t("invoice.storename")))]),i("span",{staticClass:"tx-error"},[i("span",{staticStyle:{margin:"0 5px"}},[t._v(t._s(t.$t("invoice.ERPdownloaded"))+" ")]),t._v(t._s(t.invoiceInfo.timeApiGet?t.invoiceInfo.timeApiGet:"---")+" ")])]):t._e(),i("div",{staticClass:"mg-y-20"},[i("span",{staticStyle:{margin:"0 10px 0 26px",opacity:"0"}},[t._v(t._s(t.$t("invoice.storename")))]),i("el-button",{attrs:{disabled:!!t.invoiceInfo.timeApiGet,size:"small",icon:"fa fa-save",type:"primary"},on:{click:function(e){return t.confirmMoneyFn()}}},[t._v(t._s(t.$t("invoice.savesettings")))])],1)])]),i("el-tab-pane",{attrs:{name:"confirmExcel"}},[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("invoice.exportedExcel")))]),i("div",{staticClass:"mg-y-20"},[i("p",{staticStyle:{"margin-left":"50px"},domProps:{innerHTML:t._s(t.$t("invoice.qualifiedorders",{num:Number(t.invoiceCnt.orderCnt)}))}})]),i("div",{staticClass:"mg-y-20",staticStyle:{"margin-left":"50px"}},[i("el-button",{attrs:{size:"small",icon:"iconfont icon-excel3",type:"success"},on:{click:function(e){return t.saveCustomExportOnly("1")}}},[t._v(t._s(t.$t("invoice.Exportexcel")))]),i("el-button",{attrs:{size:"small",icon:"iconfont icon-csv11",type:"success"},on:{click:function(e){return t.saveCustomExportOnly("2")}}},[t._v(t._s(t.$t("invoice.Exportcsv")))]),i("el-button",{attrs:{size:"small",icon:"fa fa-cog",plain:"",type:"primary"},on:{click:function(e){return t.setExportOnly()}}},[t._v(t._s(t.$t("invoice.exportfields2")))])],1),i("el-dialog",{attrs:{width:"80%",title:t.$t("invoice.exportfields2"),visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[i("div",{staticClass:"modal-export"},[i("el-divider"),i("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[i("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("invoice.exportFields"))),i("span",{staticClass:"mg-l-5"},[t._v("("+t._s(t.$t("invoice.dragging"))+")")])]),i("div",{staticClass:"draggable-wrap"},[i("draggable",{attrs:{list:t.modalCustomExport.selectedTitles,draggable:".dargDiv",options:{animation:300},group:"tags"}},t._l(t.modalCustomExport.selectedTitles,(function(e,o){return i("el-tag",{key:e.name,staticClass:"dargDiv",attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.removeTitle(o)}}},[t._v(" "+t._s(e.name)+" ")])})),1),t.modalCustomExport.selectedTitles.length?t._e():i("div",{staticClass:"w-100 justify-content-center"},[i("span",{staticStyle:{color:"#f56c6c"}},[t._v(t._s(t.$t("invoice.selectPlease")))])])],1)]),i("el-divider"),i("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[i("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("myinvoice.optionalfields"))+" "),i("span",{staticClass:"tx-danger tx-12",staticStyle:{color:"#f56c6c"}},[t._v(t._s(t.$t("myinvoice.notExport")))])]),i("div",{staticClass:"tag-wrap"},[i("draggable",{attrs:{list:t.modalCustomExport.unselectedTitles,draggable:".uns-tag",options:{animation:300},group:"tags"}},t._l(t.modalCustomExport.unselectedTitles,(function(e,o){return i("el-tag",{key:e.orName,attrs:{effect:"dark"},on:{click:function(e){return t.selectTitle(o)}}},[t._v(" "+t._s(e.orName)+" ")])})),1)],1)]),i("el-divider"),i("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[i("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("myinvoice.customField"))+" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("myinvoice.rename"),placement:"top"}},[i("i",{staticClass:"fa fa-question-circle-o",staticStyle:{color:"#5c6ac4","text-decoration":"none"}})]),i("a",{staticClass:"mg-l-20",staticStyle:{color:"#5c6ac4","text-decoration":"none"},attrs:{href:"javascript:;"},on:{click:function(e){return t.customWrapState()}}},[t._v(t._s(t.showCustom?t.$t("invoice.fieldsHide"):t.$t("invoice.fieldsShow")))])],1),i("div",{staticClass:"row custom-wrap",class:{hide:!t.showCustom}},[i("el-row",{staticStyle:{margin:"0"},attrs:{gutter:20}},t._l(t.modalCustomExport.selectedTitles,(function(e){return i("el-col",{key:e.orName,staticStyle:{"margin-top":"10px"},attrs:{span:12}},[i("div",{staticClass:"grid-content",staticStyle:{display:"flex","align-items":"center"}},[i("label",{staticStyle:{width:"200px","white-space":"nowrap","text-align":"right","margin-right":"10px",color:"#999"}},[t._v("["+t._s(e.orName)+"] "+t._s(t.$t("myinvoice.showAs")))]),i("div",{staticClass:"col-6"},[i("el-input",{attrs:{placeholder:e.orName,size:"small"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"title.name"}})],1)])])})),1)],1)]),i("el-divider")],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.innerVisible=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveCustomExportSettingOnly}},[t._v(t._s(t.$t("myinvoice.saveSetting")))])],1)])],1)],1),i("el-divider"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.confirmMoneyOpen=!1}}},[t._v(t._s(t.$t("invoice.cancel")))])],1)],1),i("el-dialog",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.setLotPriceDialog.loading,expression:"setLotPriceDialog.loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":4==t.setLotPriceDialog.step?"批量改价已提交请稍候 ":"",title:t.$t("invoice.Batchset2"),visible:t.setLotPriceDialog.isShow,width:"800px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.setLotPriceDialog,"isShow",e)}}},[i("el-divider"),1==t.setLotPriceDialog.step?[i("el-row",[i("el-col",{attrs:{offset:4,span:7}},[i("div",{staticClass:"tx-center set-price",on:{click:function(e){return t.setLotPriceStep(1)}}},[i("div",{staticClass:"logo-wrap"}),i("p",[t._v("马帮ERP授权")])])]),i("el-col",{attrs:{offset:2,span:7}},[i("div",{staticClass:"tx-center set-price other",on:{click:function(e){return t.setLotPriceStep(2)}}},[i("div",{staticClass:"logo-wrap"},[t._v("其他")]),i("p",[t._v("其他ERP授权")])])])],1)]:t._e(),2==t.setLotPriceDialog.step?[i("el-form",{ref:"form",attrs:{model:t.setLotPriceDialog,"label-width":"160px",size:"medium"}},[i("el-form-item",{attrs:{label:"当前授权ERP："}},[2==t.userInfo.source?i("span",[t._v("马帮ERP2.0")]):t._e(),3==t.userInfo.source?i("span",[t._v("马帮ERP3.0")]):t._e(),3==t.userInfo.source?i("a",{staticClass:"mg-l-20",attrs:{href:"javascript:;"},on:{click:function(e){return t.unbind()}}},[t._v("解除绑定")]):t._e()]),i("el-form-item",{staticClass:"mg-t-15",attrs:{label:"供货价和运费："}},[i("el-radio-group",{on:{change:t.changePriceType},model:{value:t.setLotPriceDialog.price,callback:function(e){t.$set(t.setLotPriceDialog,"price",e)},expression:"setLotPriceDialog.price"}},[i("el-radio",{attrs:{label:"1"}},[t._v(" 供货单价=（商品成本价+物流成本）+单价利润，每单运费设置为0 ")]),3==t.userInfo.source?i("el-radio",{staticClass:"mg-t-10",attrs:{label:"2"}},[t._v("供货单价=商品成本价+商品目标利润，总运费=物流成本+物流目标利润")]):t._e()],1)],1),3==t.userInfo.source?i("el-form-item",{staticClass:"mg-t-15",attrs:{label:"每件商品处理费(US$)："}},[i("el-input-number",{staticStyle:{"margin-right":"10px",width:"100px"},attrs:{controls:!1,precision:2},model:{value:t.setLotPriceDialog.addPrice,callback:function(e){t.$set(t.setLotPriceDialog,"addPrice",e)},expression:"setLotPriceDialog.addPrice"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[i("template",{slot:"content"},[i("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("每件商品处理费")]),i("p",[t._v(" 在已计算得到的供货单价上额外增加处理费，如设置"),i("br"),t._v(" 每件商品处理费为US$ 1, 某个商品采购数量3件，则"),i("br"),t._v(" 在供货单价上额外增加US$ 3 ")])]),i("i",{staticClass:"el-icon-question"})],2)],1):t._e(),3==t.userInfo.source?i("el-form-item",{staticClass:"mg-t-15",attrs:{label:"运费规则："}},[i("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",placeholder:"请选择运费规则"},model:{value:t.setLotPriceDialog.ruleId,callback:function(e){t.$set(t.setLotPriceDialog,"ruleId",e)},expression:"setLotPriceDialog.ruleId"}},[i("el-option",{attrs:{label:"请选择运费规则",value:""}}),t._l(t.setLotPriceDialog.erpRules,(function(t){return i("el-option",{key:t.shippingFeeRuleId,attrs:{label:t.name,value:t.shippingFeeRuleId}})}))],2)],1):t._e(),i("el-form-item",{staticClass:"mg-t-15",attrs:{label:"设置商品："}},[t.setLotPriceDialog.sku?i("div",[t._v(t._s(t.setLotPriceDialog.sku))]):i("el-radio-group",{model:{value:t.setLotPriceDialog.onlyNone,callback:function(e){t.$set(t.setLotPriceDialog,"onlyNone",e)},expression:"setLotPriceDialog.onlyNone"}},[i("el-radio",{attrs:{label:"1",disabled:2==t.setLotPriceDialog.price}},[t._v("仅设置 [未填写供货价] 商品")]),i("el-radio",{staticClass:"mg-t-10 d-block",attrs:{label:"2"}},[t._v("当前采购订单 [全部] 商品")]),i("el-radio",{staticClass:"mg-t-10 d-block",attrs:{label:"3"}},[t._v("选择指定商品("),i("a",{on:{click:t.setDesignatedGood}},[t._v(t._s(t.DesignatedGoodDialog.data.length))]),t._v(")")])],1)],1),2==t.userInfo.source?i("el-form-item",{staticClass:"mg-t-15",attrs:{label:"物流渠道："}},[i("div",{staticStyle:{display:"flex"}},[i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择物流渠道"},model:{value:t.setLotPriceDialog.logType,callback:function(e){t.$set(t.setLotPriceDialog,"logType",e)},expression:"setLotPriceDialog.logType"}},[i("el-option",{attrs:{label:"全部订单使用同一个物流渠道计算",value:"1"}}),i("el-option",{attrs:{label:"按订单的国家选择物流渠道计算",value:"2"}})],1),1==t.setLotPriceDialog.logType?i("div",[i("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请填写物流渠道名称",maxlength:"50"},model:{value:t.setLotPriceDialog.shipTypeStr,callback:function(e){t.$set(t.setLotPriceDialog,"shipTypeStr",e)},expression:"setLotPriceDialog.shipTypeStr"}})],1):t._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.setLotPriceDialog.logType,expression:"setLotPriceDialog.logType == 2"}],staticClass:"countrylist"},t._l(t.setLotPriceDialog.cntArr,(function(e){return i("div",{key:e.countryCode,staticClass:"d-flex mg-t-10 countrylist-item"},[i("div",{staticClass:"countrylist-name"},[i("el-tooltip",{attrs:{content:e.country,placement:"top"}},[i("span",[t._v(t._s(e.country)+" :")])])],1),i("div",{staticClass:"countrylist-input"},[i("el-input",{attrs:{placeholder:"不填即该国订单不计算",maxlength:"50"},model:{value:e.shipTypeStr,callback:function(i){t.$set(e,"shipTypeStr",i)},expression:"cnt.shipTypeStr"}})],1)])})),0)]):t._e(),i("el-form-item",{staticClass:"mg-t-15",attrs:{label:"当前采购单目标利润："}},[i("div",[i("el-input",{staticStyle:{width:"200px"},model:{value:t.setLotPriceDialog.numbers,callback:function(e){t.$set(t.setLotPriceDialog,"numbers",e)},expression:"setLotPriceDialog.numbers"}}),t._v(" % ")],1),i("p",{staticClass:"tx-gray-600"},[t._v("如果希望采购单利润20%，请在输入框填写20")])])],1)]:t._e(),3==t.setLotPriceDialog.step?[i("div",{staticStyle:{margin:"20px 50px"}},[i("div",{staticClass:"mg-b-20 mg-t-20"},[t._v(" 设置成功："),i("span",{staticClass:"tx-success"},[t._v(t._s(t.setLotPriceDialog.results.success&&t.setLotPriceDialog.results.success.cnt>=0?t.setLotPriceDialog.results.success.cnt:"---"))]),t._v(" 个 ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.setLotPriceDialog.successDetail,expression:"!setLotPriceDialog.successDetail"}]},t._l(t.setLotPriceDialog.results.success.detail,(function(e,o){return i("p",{staticClass:"mg-b-10"},[t._v(" "+t._s(e.sku)+" ")])})),0),i("div",{staticClass:"mg-b-20"},[t._v(" 设置失败："),i("span",{staticClass:"tx-danger"},[t._v(t._s(t.setLotPriceDialog.results.fail&&t.setLotPriceDialog.results.fail.cnt>=0?t.setLotPriceDialog.results.fail.cnt:"---"))]),t._v(" 个 "),t.setLotPriceDialog.results.fail.cnt>0?i("el-link",{staticClass:"mg-l-10",attrs:{type:"primary"},on:{click:function(e){t.setLotPriceDialog.failDetail=!t.setLotPriceDialog.failDetail}}},[t._v(t._s(t.setLotPriceDialog.failDetail?"查看":"折叠")+"失败详情")]):t._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.setLotPriceDialog.failDetail,expression:"!setLotPriceDialog.failDetail"}]},t._l(t.setLotPriceDialog.results.fail.detail,(function(e,o){return i("p",{staticClass:"mg-b-10"},[t._v(" "+t._s(e.country)+" - "+t._s(e.sku)+" - "+t._s(e.logisticsName)+"： "+t._s(e.message)+" ")])})),0)])]:t._e(),4==t.setLotPriceDialog.step?[i("div",{staticStyle:{margin:"20px 50px"}},[i("i",{staticClass:"el-icon-loading"}),t._v(" "+t._s(parseInt(100*t.setLotPriceDialog.loadingCnt))+"% 批量改价已提交，请稍候 ")])]:t._e(),i("el-divider"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[2==t.setLotPriceDialog.step?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveSetLotPrice}},[t._v("批量设置")]):t._e(),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.setLotPriceDialog.isShow=!1}}},[t._v("关闭")])],1)],2),i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.DesignatedGoodDialog.loading,expression:"DesignatedGoodDialog.loading"}],attrs:{title:"选择指定商品",visible:t.DesignatedGoodDialog.isShow,width:"890px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.DesignatedGoodDialog,"isShow",e)}}},[i("div",{staticStyle:{padding:"20px"}},[i("el-transfer",{attrs:{filterable:!0,titles:["商品列表","指定商品"],"button-texts":["取消","指定"],data:t.transferData},on:{change:t.DesignatedChange},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.option;return i("span",{staticClass:"flex-center"},[i("div",[i("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:o.imgUrl,alt:""}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"20px"}})])])],1),i("div",{staticClass:"ml-10"},[i("div",[t._v(" "+t._s(o.name)+" ")]),i("div",[t._v("SKU: "+t._s(o.sku))])])])}}]),model:{value:t.DesignatedGoodDialog.data,callback:function(e){t.$set(t.DesignatedGoodDialog,"data",e)},expression:"DesignatedGoodDialog.data"}})],1)]),i("el-dialog",{attrs:{title:"请输入您希望对接的ERP名称",visible:t.setOtherERPDialog.isShow,width:"800px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.setOtherERPDialog,"isShow",e)},closed:function(e){return t.$refs.uploadFile.clearFiles()}}},[i("el-divider"),i("el-form",{attrs:{"label-position":"top"}},[i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入您希望对接的ERP名称"},model:{value:t.setOtherERPDialog.contents,callback:function(e){t.$set(t.setOtherERPDialog,"contents",e)},expression:"setOtherERPDialog.contents"}})],1),i("el-row",{staticClass:"d-flex align-items-center mg-b-10",staticStyle:{"margin-top":"22px"},attrs:{gutter:15}},[i("el-col",{staticStyle:{"min-width":"155px"},attrs:{span:5}},[i("span",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(t._s(t.$t("ticket.uploadImageAttachment")))])]),i("el-upload",{ref:"uploadFile",staticClass:"upload-file",attrs:{"on-change":t.handleChangeOtherERPDialog,"before-remove":t.handleRemoveOtherERPDialog,action:"","auto-upload":!1,accept:"image/gif,image/jpeg,image/jpg,image/png"}},[i("el-button",{ref:"uploadBtn",attrs:{size:"small",type:"primary",loading:t.DialogEditComment.uploadLoading}},[t._v(t._s(t.$t("ticket.browse")))])],1)],1)],1),i("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"mg-r-15"},[i("el-button",{attrs:{size:"small",type:"primary",loading:t.setOtherERPDialog.loading},on:{click:t.commitOtherERP}},[t._v("提交工单")])],1),i("div",[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.setOtherERPDialog.isShow=!1}}},[t._v("取消")])],1)])],1),i("el-drawer",{attrs:{size:"40%","destroy-on-close":!0,visible:t.drawer,"custom-class":"drawer-outline",wrapperClosable:!1},on:{"update:visible":function(e){t.drawer=e}}},[i("div",{staticClass:"clearfix",attrs:{slot:"title"},slot:"title"},[i("h2",{staticStyle:{padding:"0","font-size":"24px"}},[t._v(t._s(t.drawerTitle))])]),i("el-divider",{staticStyle:{"margin-top":"0","margin-bottom":"0"}}),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.uploadLoading,expression:"uploadLoading"}]},[1==t.drawertype?[i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v(t._s(t.$t("invoice.informationBasic")))])]),i("div",{staticStyle:{"margin-top":"-30px"}},[i("el-form",{attrs:{"label-position":"right","label-width":"200px"}},[i("el-form-item",{attrs:{label:t.$t("invoice.validTotal")}},[t._v(" "+t._s(t.drawerinfo.orderCnt)+t._s(t.$t("invoice.num"))+" ")]),i("el-form-item",{attrs:{label:t.$t("invoice.productsOrder")}},[t._v(" "+t._s(t.drawerinfo.skuCnt)+t._s(t.$t("invoice.kind"))+" ")]),i("el-form-item",{attrs:{label:t.$t("invoice.productTotal")}},[t._v(" "+t._s(t.drawerinfo.totalCnt)+t._s(t.$t("invoice.pro"))+" ")]),i("el-form-item",{attrs:{label:t.$t("invoice.amountTotal")}},[t._v(" US$ "+t._s(t.$numberToCurrency(t.drawerinfo.totalAmount))+" ")])],1)],1)]),i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v(t._s(t.$t("invoice.statisticsDelivery")))])]),i("div",{staticStyle:{"margin-top":"-30px"}},[i("el-form",{attrs:{"label-position":"right","label-width":"250px"}},[i("el-form-item",{attrs:{label:t.$t("invoice.deliveredProducts")}},[i("span",{staticClass:"tx-success"},[t._v(t._s(t.drawerinfo.deliveredCnt))]),t._v(" "+t._s(t.$t("invoice.Sync"))+" "),i("span",{staticClass:"tx-success"},[t._v(t._s(t.drawerinfo.syncCnt))]),t._v(t._s(t.$t("invoice.pro"))+" ")]),i("el-form-item",{attrs:{label:t.$t("invoice.amount")}},[t._v(" US$ "),i("span",{staticClass:"tx-success"},[t._v(t._s(t.$numberToCurrency(t.drawerinfo.deliveredAmount)))])]),i("el-form-item",{attrs:{label:t.$t("invoice.notQuantity")}},[i("span",{staticClass:"tx-warning"},[t._v(t._s(t.drawerinfo.undeliveredCnt))]),t._v(t._s(t.$t("invoice.pro"))+" ")]),i("el-form-item",{attrs:{label:t.$t("invoice.rate")}},[i("span",{staticClass:"tx-success"},[t._v(t._s(t.drawerinfo.deliverRate)+"%")])]),i("el-form-item",{attrs:{label:t.$t("invoice.wontQuantity")}},[i("span",{staticClass:"tx-error"},[t._v(t._s(t.drawerinfo.notDeliveredCnt))]),t._v(t._s(t.$t("invoice.pro"))+" ")]),i("el-form-item",{attrs:{label:t.$t("invoice.wontAmount")}},[t._v(" US$ "),i("span",{staticClass:"tx-error"},[t._v(t._s(Number(t.drawerinfo.notDeliveredSku)?t.$numberToCurrency(t.drawerinfo.notDeliveredSku):"0.00"))])]),i("el-form-item",{attrs:{label:t.$t("invoice.notAmount")}},[t._v(" US$ "),i("span",{staticClass:"tx-warning"},[t._v(t._s(Number(t.drawerinfo.undeliveredAmount)?t.$numberToCurrency(t.drawerinfo.undeliveredAmount):"0.00"))])])],1)],1)])]:t._e(),2==t.drawertype?[2==t.invoiceInfo.payStatus?i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("el-steps",{attrs:{direction:"vertical",active:1}},[i("el-step",{attrs:{title:"STEP 1"}},[i("template",{slot:"description"},[i("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.skuSet")))]),i("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step1.png",width:"100%"}})])],2),i("el-step",{attrs:{title:"STEP 2"}},[i("template",{slot:"description"},[i("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.priceSet")))]),i("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step2.png",width:"100%"}})])],2),i("el-step",{attrs:{title:"STEP 3"}},[i("template",{slot:"description"},[i("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.paymentSet")))]),i("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step3.png",width:"100%"}})])],2),i("el-step",{attrs:{title:"STEP 4"}},[i("template",{slot:"description"},[i("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.invoiceSend")))]),i("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step4.png",width:"100%"}})])],2)],1)],1):t._e(),1==t.invoiceInfo.payStatus?i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("el-steps",{attrs:{direction:"vertical",active:1}},[i("el-step",{attrs:{title:"STEP 1"}},[i("template",{slot:"description"},[i("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.ordersDownload")))]),i("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step1-1.png",width:"100%"}})])],2),i("el-step",{attrs:{title:"STEP 2"}},[i("template",{slot:"description"},[i("p",{staticClass:"mg-b-10"},[t._v(" "+t._s(t.$t("invoice.logisticsinformation"))+" ")]),i("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step1-2.png",width:"100%"}})])],2),i("el-step",{attrs:{title:"STEP 3"}},[i("template",{slot:"description"},[i("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.customerInform")))]),i("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/url2-1.png"}})])],2)],1)],1):t._e()]:t._e(),3==t.drawertype?[i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClickTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"导出采购订单",name:"first"}},[i("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"30px"},attrs:{shadow:"never"}},[i("div",[i("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[i("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("invoice.exportFields"))),i("span",{staticClass:"mg-l-5"},[t._v("("+t._s(t.$t("invoice.dragging"))+")")])]),i("div",{staticClass:"draggable-wrap"},[i("draggable",{attrs:{list:t.modalCustomExport.selectedTitles,draggable:".dargDiv",options:{animation:300},group:"tags"}},t._l(t.modalCustomExport.selectedTitles,(function(e,o){return i("el-tag",{key:e.name,staticClass:"dargDiv",attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.removeTitle(o)}}},[t._v(" "+t._s(e.name)+" ")])})),1),t.modalCustomExport.selectedTitles.length?t._e():i("div",{staticClass:"w-100 justify-content-center"},[i("span",{staticStyle:{color:"#f56c6c"}},[t._v(t._s(t.$t("invoice.selectPlease")))])])],1)]),i("el-divider"),i("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[i("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("myinvoice.optionalfields"))+" "),i("span",{staticClass:"tx-danger tx-12",staticStyle:{color:"#f56c6c"}},[t._v(t._s(t.$t("myinvoice.notExport")))])]),i("div",{staticClass:"tag-wrap"},[i("draggable",{attrs:{list:t.modalCustomExport.unselectedTitles,draggable:".uns-tag",options:{animation:300},group:"tags"}},t._l(t.modalCustomExport.unselectedTitles,(function(e,o){return i("el-tag",{key:e.orName,attrs:{effect:"dark"},on:{click:function(e){return t.selectTitle(o)}}},[t._v(" "+t._s(e.orName)+" ")])})),1)],1)]),i("el-divider"),i("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[i("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("myinvoice.customField"))+" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.quantity0"),placement:"right"}},[i("i",{staticClass:"fa fa-question-circle-o mg-l-5"})]),i("a",{staticClass:"mg-l-20",staticStyle:{color:"#5c6ac4"},attrs:{href:"javascript:;"},on:{click:function(e){return t.customWrapState()}}},[t._v(t._s(t.showCustom?t.$t("invoice.fieldsHide"):t.$t("invoice.fieldsShow")))])],1),i("div",{staticClass:"row custom-wrap",class:{hide:!t.showCustom}},[i("el-row",{staticStyle:{margin:"0"},attrs:{gutter:20}},t._l(t.modalCustomExport.selectedTitles,(function(e){return i("el-col",{key:e.orName,staticStyle:{"margin-top":"10px"},attrs:{span:20}},[i("div",{staticClass:"grid-content",staticStyle:{display:"flex","align-items":"center"}},[i("label",{staticStyle:{width:"200px","white-space":"nowrap","text-align":"right","margin-right":"10px",color:"#999"}},[t._v("["+t._s(e.orName)+"] "+t._s(t.$t("myinvoice.showAs")))]),i("div",{staticClass:"col-6"},[i("el-input",{attrs:{placeholder:e.orName,size:"small"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"title.name"}})],1)])])})),1)],1)]),i("el-divider"),i("div",{staticClass:"text-left"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveCustomExportSetting}},[t._v(t._s(t.$t("myinvoice.saveSetting")))]),1!=t.invoiceInfo.payStatus?[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.proceeding"))+" ")]),i("el-button",{staticStyle:{"background-color":"#b3e19d","border-color":"#b3e19d",cursor:"not-allowed"},attrs:{type:"success",size:"small"}},[t._v(" "+t._s(t.$t("invoice.exportExcel"))+" ")])],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.proceeding"))+" ")]),i("el-button",{staticStyle:{"background-color":"#b3e19d","border-color":"#b3e19d",cursor:"not-allowed"},attrs:{type:"success",size:"small"}},[t._v(" "+t._s(t.$t("invoice.exportcsv"))+" ")])],1)]:[i("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.saveCustomExport("1")}}},[t._v(t._s(t.$t("invoice.exportExcel")))]),i("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.saveCustomExport("2")}}},[t._v(t._s(t.$t("invoice.exportcsv")))])]],2)],1)])],1),i("el-tab-pane",{attrs:{label:t.$t("invoice.shippinginformation"),name:"second"}},[i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("div",{staticClass:"draw-alert mg-b-20"},[i("el-alert",{attrs:{type:"warning",closable:!1}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[i("span",[t._v(t._s(t.$t("invoice.templateprovided")))]),i("el-button",{attrs:{type:"text"},on:{click:t.downloadFile}},[t._v(t._s(t.$t("invoice.template")))])],1)])],1),i("div",{staticStyle:{"margin-top":"40px"}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","auto-upload":!1,"file-list":t.uploadfileList,"on-change":t.handleUploadChange}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v(t._s(t.$t("invoice.fileSelect")))]),1!=t.invoiceInfo.payStatus?[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.proceeding"))+" ")]),i("el-button",{staticStyle:{"background-color":"#b3e19d","border-color":"#b3e19d",cursor:"not-allowed","margin-left":"10px"},attrs:{size:"small",type:"success"}},[t._v(t._s(t.$t("invoice.shippinginformation")))])],1)]:[i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v(t._s(t.$t("invoice.shippinginformation")))])],i("div",{staticClass:"el-upload__tip mg-y-15",staticStyle:{"margin-top":"20px"},attrs:{slot:"tip"},slot:"tip"},[i("p",[t._v(t._s(t.$t("invoice.shippinginformation1")))]),i("p",[t._v(t._s(t.$t("invoice.shippinginformation2")))])])],2)],1)])],1),3!=t.invoiceInfo.status&&4!=t.invoiceInfo.status&&5!=t.invoiceInfo.status&&6!=t.invoiceInfo.status&&9!=t.invoiceInfo.status?i("el-tab-pane",{attrs:{label:t.$t("invoice.ExportShopify"),name:"third"}},[i("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"30px"},attrs:{shadow:"never"}},[i("div",[i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.saveCustomExportShopify}},[t._v(t._s(t.$t("invoice.ExportShopify")))])],1)])],1):t._e(),3!=t.invoiceInfo.status&&4!=t.invoiceInfo.status&&5!=t.invoiceInfo.status&&6!=t.invoiceInfo.status&&9!=t.invoiceInfo.status?i("el-tab-pane",{attrs:{label:t.$t("invoice.supplyinformation"),name:"fourth"}},[i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("div",{staticClass:"draw-alert mg-b-20"},[i("el-alert",{attrs:{type:"warning",closable:!1}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[i("span",[t._v(t._s(t.$t("invoice.templateprovided")))]),i("el-button",{attrs:{type:"text"},on:{click:t.downloadFile}},[t._v(t._s(t.$t("invoice.template")))])],1)])],1),i("div",{staticStyle:{"margin-top":"40px"}},[[i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v(t._s(t.$t("invoice.supplyinformation")))])],i("div",{staticClass:"el-upload__tip mg-y-15",staticStyle:{"margin-top":"20px"},attrs:{slot:"tip"},slot:"tip"},[i("p",[t._v(t._s(t.$t("invoice.shippinginformation1")))]),i("p",[t._v(t._s(t.$t("invoice.shippinginformation2")))])])],2)])],1):t._e()],1)]:t._e(),i("div",{staticClass:"d-flex justify-content-center mg-t-20",staticStyle:{padding:"30px","margin-bottom":"100px"}},[i("el-divider"),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.drawer=!1}}},[t._v(t._s(3==t.drawertype?t.$t("invoice.cancel"):t.$t("importdata.gotIt")))])],1)],2)],1)],1),i("v-tour",{attrs:{name:"invoiceTour",steps:t.steps,callbacks:t.myCallbacks,options:t.myOptions},scopedSlots:t._u([{key:"default",fn:function(e){return[i("transition",{attrs:{name:"fade"}},[t._l(e.steps,(function(o,s){return[e.currentStep===s?i("v-step",{key:s+"tourStep",attrs:{step:o,"previous-step":e.previousStep,"next-step":e.nextStep,stop:e.stop,"is-first":e.isFirst,"is-last":e.isLast,labels:e.labels,highlight:e.highlight}},[[i("div",{staticClass:"d-flex justify-content-between align-item-center pd-x-15",attrs:{slot:"actions"},slot:"actions"},[e.currentStep!=t.steps.length-1?i("div",{staticClass:"close-tour"},[i("a",{staticStyle:{color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.stopDistributorTour}},[i("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]):t._e(),i("div",{staticClass:"btn tx-12 mg-r-30"},[t._v(" "+t._s(t.$t("invoice.Step",{index:s+1,length:t.steps.length}))+" ")]),i("div",[s?i("el-button",{staticClass:"tx-white hover-white mg-r-15 tx-12",staticStyle:{color:"#fff","font-size":"12px"},attrs:{size:"mini",id:"supplier-prev-"+o.name+"-"+(s+1),type:"text"},on:{click:e.previousStep}},[t._v(t._s(t.$t("invoice.Back")))]):t._e(),e.currentStep==t.steps.length-1?i("el-button",{staticStyle:{"font-size":"12px"},attrs:{id:"stop-supplier-step",type:"primary",size:"mini"},on:{click:t.stopDistributorTour}},[t._v(t._s(t.$t("importdata.gotIt")))]):i("el-button",{staticClass:"btn btn-primary btn-sm",staticStyle:{"font-size":"12px"},attrs:{id:"supplier-next-"+o.name+"-"+(s+1),type:"primary",size:"mini"},on:{click:e.nextStep}},[t._v(t._s(t.$t("invoice.Next")))])],1)])]],2):t._e()]}))],2)]}}])}),i("v-tour",{attrs:{name:"invoiceConfirmTour",steps:t.confirmsteps},scopedSlots:t._u([{key:"default",fn:function(e){return[i("transition",{attrs:{name:"fade"}},[t._l(e.steps,(function(o,s){return[e.currentStep===s?i("v-step",{key:s+"tourStep",attrs:{step:o,"previous-step":e.previousStep,"next-step":e.nextStep,stop:e.stop,"is-first":e.isFirst,"is-last":e.isLast,labels:e.labels,highlight:e.highlight}},[[i("div",{staticClass:"pd-x-15",attrs:{slot:"actions"},slot:"actions"},[e.currentStep!=t.steps.length-1?i("div",{staticClass:"close-tour"},[i("a",{staticStyle:{color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.stopConfirmTour}},[i("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]):t._e(),i("div",{staticClass:"tx-right"},[i("el-button",{staticStyle:{"font-size":"12px"},attrs:{id:"stop-supplier-step",type:"primary",size:"mini"},on:{click:t.stopConfirmTour}},[t._v(t._s(t.$t("importdata.gotIt")))])],1)])]],2):t._e()]}))],2)]}}])}),i("v-tour",{attrs:{name:"invoiceConfirmTour1",steps:t.confirmsteps1},scopedSlots:t._u([{key:"default",fn:function(e){return[i("transition",{attrs:{name:"fade"}},[t._l(e.steps,(function(o,s){return[e.currentStep===s?i("v-step",{key:s+"tourStep",attrs:{step:o,"previous-step":e.previousStep,"next-step":e.nextStep,stop:e.stop,"is-first":e.isFirst,"is-last":e.isLast,labels:e.labels,highlight:e.highlight}},[[i("div",{staticClass:"pd-x-15",attrs:{slot:"actions"},slot:"actions"},[e.currentStep!=t.steps.length-1?i("div",{staticClass:"close-tour"},[i("a",{staticStyle:{color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.stopConfirmTour1}},[i("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]):t._e(),i("div",{staticClass:"tx-right"},[i("el-button",{staticStyle:{"font-size":"12px"},attrs:{id:"stop-supplier-step",type:"primary",size:"mini"},on:{click:t.stopConfirmTour1}},[t._v(t._s(t.$t("importdata.gotIt")))])],1)])]],2):t._e()]}))],2)]}}])}),i("login",{attrs:{show:t.loginShow,type:t.loginType,rid:t.loginRId}}),i("input",{staticStyle:{display:"none"},attrs:{id:"bottomUploadImg",type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png"},on:{change:function(e){return t.bottomUploadimg(e)}}}),i("el-dialog",{attrs:{title:"您当前采购订单中有 0 元供货价的商品",visible:t.dialogZeroAlert.isShow,width:"600px"},on:{"update:visible":function(e){return t.$set(t.dialogZeroAlert,"isShow",e)}}},[i("div",{staticStyle:{padding:"0 20px"}},[i("div",{staticClass:"mg-b-10"},[t._v("您当前的采购订单中有设置为 0 元供货价的商品：")]),t._l(t.dialogZeroAlert.items,(function(e){return i("div",{key:e.id,staticStyle:{"margin-bottom":"5px","padding-left":"15px",color:"#909399"}},[t._v(" "+t._s(e.codeName)+" - "+t._s(e.sku)+" × "+t._s(e.quantity)+" ")])})),i("div",{staticClass:"mg-t-30"},[i("el-alert",{attrs:{title:"确定要发送当前发票发送给客户吗",type:"warning",closable:!1}})],1)],2),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogZeroAlert.isShow=!1}}},[t._v(" 我再看看 ")]),i("el-button",{attrs:{size:"small",type:"primary",loading:t.dialogZeroAlert.loading},on:{click:function(e){return t.toSendInvoice(t.dialogZeroAlert.invoice,!0)}}},[t._v(" 确定 ")])],1)]),i("el-dialog",{attrs:{title:t.$t("invoice.采购单付款方式"),visible:t.dialogSetPayment.isShow,width:"600px"},on:{"update:visible":function(e){return t.$set(t.dialogSetPayment,"isShow",e)}}},[i("el-divider"),i("div",{staticStyle:{padding:"15px 20px"}},[i("div",{staticClass:"pay-row"},[i("div",{staticClass:"left"},[t._v(t._s(t.$t("invoice.客户接受的付款方式：")))]),i("div",{staticClass:"right"},[t._v(" "+t._s(t.dialogSetPayment.acceptPayment.length?"":"---")+" "),t._l(t.dialogSetPayment.acceptPayment,(function(e,o){return i("span",{key:e},[t._v(" "+t._s(t.$t(t.$dict.paymentType[e].text))+" "+t._s(o<t.dialogSetPayment.acceptPayment.length-1?",":"")+" ")])}))],2)]),i("div",{staticClass:"pay-row"},[i("div",{staticClass:"left"},[t._v(t._s(t.$t("invoice.当前采购单付款方式：")))]),i("div",{staticClass:"right radio-wrap"},[t._l(t.$dict.paymentType,(function(e){return[4!=e.val&&5!=e.val&&6!=e.val?[i("el-radio",{key:e.val,attrs:{label:e.val,disabled:!t.$store.state.userInfo.walletOpen&&4==e.val},model:{value:t.dialogSetPayment.payment,callback:function(e){t.$set(t.dialogSetPayment,"payment",e)},expression:"dialogSetPayment.payment"}},[t._v(" "+t._s(t.$t(e.text))+" ")]),2==t.dialogSetPayment.payment&&2==e.val?i("div",{key:e.val+"b",staticStyle:{"margin-bottom":"15px"}},[i("el-input",{staticStyle:{width:"320px"},attrs:{size:"small",placeholder:"请输入速卖通代拍商品链接地址"},model:{value:t.dialogSetPayment.payUrl,callback:function(e){t.$set(t.dialogSetPayment,"payUrl",e)},expression:"dialogSetPayment.payUrl"}})],1):t._e()]:t._e()]}))],2)])]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogSetPayment.isShow=!1}}},[t._v(" "+t._s(t.$t("invoice.取消"))+" ")]),i("el-button",{attrs:{size:"small",type:"primary",loading:t.dialogSetPayment.loading,disabled:t.dialogSetPayment.loading},on:{click:function(e){return t.saveSetPayment()}}},[t._v(" "+t._s(t.$t("invoice.保存设置"))+" ")])],1)],1),i("el-dialog",{attrs:{visible:t.DialogLoadingCnt.isShow,width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(e){return t.$set(t.DialogLoadingCnt,"isShow",e)}}},[i("div",{staticClass:"get-invocie-loading"},[i("i",{staticClass:"el-icon-loading"}),i("span",[t._v("Loading "),i("span",[t._v(t._s(parseInt(100*t.DialogLoadingCnt.loadingCnt))+" %")])])])])],1)},s=[],a=i("5530"),n=i("ade3"),r=(i("a9e3"),i("d3b7"),i("b680"),i("159b"),i("e9c4"),i("fb6a"),i("99af"),i("b64b"),i("b0c0"),i("a434"),i("4de4"),i("a630"),i("3ca3"),i("6062"),i("ddb0"),i("d81d"),i("25f0"),i("ac1f"),i("1276"),i("466d"),i("5319"),i("b76a")),l=i.n(r),c=i("c0e9"),p=i.n(c),d=i("8200"),u={name:"invoice",data:function(){var t,e=this;return t={transferData:[],DesignatedGoodDialog:{isShow:!1,loading:!1,data:[]},tooltipShow:!1,setOtherERPDialog:{isShow:!1,contents:"",loading:!1,uploadLoading:!1,attach:[]},setLotPriceDialog:{loading:!1,isShow:!1,step:1,price:"1",type:"",numbers:"",shippingTypeArr:{},onlyNone:"1",shipTypeStr:"",logType:"1",cntArr:[],sku:"",erpRules:[],ruleId:"",failDetail:!0,successDetail:!0,results:[],addPrice:"",loadingCnt:0},setLotPriceDialogDefault:{},dialogselectProduct:{items:[],selectItems:[],page:1,totalPage:1,goto:function(t){}},dialogselectProductDefault:"{}",showErrorLog:!1,userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):"",shopData:[],shopName:"",confirmMoneyType:"1",stepActive:2,showType:1,expands:[],confirmsteps:[{target:".confirmStep",header:{title:this.$t("invoice.ERPsystem")},content:"<div style='text-align:left;'>".concat(this.$t("invoice.importerp"),"</div>"),params:{placement:"top",highlight:!0}}],confirmsteps1:[{target:".confirmStep1",header:{title:this.$t("invoice.ERPsystem")},content:"<div style='text-align:left;'>".concat(this.$t("invoice.importerp"),"</div>"),params:{placement:"top",highlight:!0}}],steps:[{target:".step-sku-1",header:{title:"STEP 1"},content:this.$t("invoice.skuSet"),params:{placement:"bottom",highlight:!0}},{target:".step-price-2",header:{title:"STEP 2"},content:this.$t("invoice.priceSet"),params:{placement:"bottom",highlight:!0}},{target:".set-paytype-3",header:{title:"STEP 3"},content:this.$t("invoice.paymentSet"),params:{placement:"top",highlight:!0}},{target:".step-btn-4",header:{title:"STEP 4"},content:this.$t("invoice.invoiceSend"),params:{placement:"top",highlight:!0}}],myCallbacks:{onStart:function(){setTimeout((function(){$(".v-step").css("opacity",1)}),200),e.invoiceTour=!1},onPreviousStep:function(t){$(".v-step").css("opacity",0),setTimeout((function(){$(".v-step").css("opacity",1)}),200),e.invoiceTour=!1},onNextStep:function(t){$(".v-step").css("opacity",0),setTimeout((function(){$(".v-step").css("opacity",1)}),200),e.invoiceTour=!1},onStop:function(){e.invoiceTour=!0}},myOptions:{startTimeout:0},invoiceTour:!0,editCompanyName:"",editCompanyAddress:"",confirmMoneyOpen:!1,payUrl:"",platformRate:"",paymentType:"",msgContent:"",drawer:!1,drawerTitle:"",drawertype:"",drawerinfo:"",modalCustomExport:{tags:[],selectedTitles:[],unselectedTitles:[]},modalCustomExportDefault:"",alreadySet:!1,isCollapse:!0,formNewcustomer:{name:"",email:"",remark:""},formNewcustomerRules:{name:[{required:!0,message:this.$t("invoice.entername"),trigger:"blur"}],email:[{type:"email",message:this.$t("invoice.fillcompanyEmail"),trigger:"change"}]},formEditCompany:{name:"",address:""},formEditCompanyRules:{name:[{required:!0,message:this.$t("invoice.fillcompany"),trigger:"blur"}]},formEditcustomer:{name:"",email:"",remark:"",id:""},formEditcustomerRules:{name:[{required:!0,message:this.$t("invoice.entername"),trigger:"blur"}],email:[{type:"email",message:this.$t("invoice.fillcompanyEmail"),trigger:"change"}]},customerName:"",changeCustomerStatus:!1,activities:[{content:"Business address and contact details, title, and logo",timestamp:"JUNE 2"},{content:"支持自定义颜色",timestamp:"",color:"#5c6ac4"},{content:"支持自定义Business address and contact details, title, and logo",timestamp:"",color:"#5c6ac4"},{content:"默认样式的节点",timestamp:"",color:"#5c6ac4"},{content:"Business address and contact details, title, and logo",timestamp:"",color:"#5c6ac4"},{content:"支持自定义尺寸",timestamp:"",color:"#5c6ac4"},{content:"Business address and contact details, title, and logo节点",timestamp:"",color:"#5c6ac4"}],checked:!0,form:{resource:"1"},formPrice:{resource:"1"},activeName:"1",Amount:"",Shipping:"",tableData:[],addCustomerOpen:!1,editCompanyInfoOpen:!1,editCustomerOpen:!1,activeNames:"1",count:20,loading:!1,pageLoading:!1,uploadLoading:!1,tabActive:1,imageUrl:"",page:this.$route.query.page?Number(this.$route.query.page):1,totalPage:1,rowsPerPage:50,totalCount:0,type:"all",invoiceInfo:"",invoiceData:[],firstLoading:!0,invoiceCnt:"",getListFlag:!0,relationship:[],showLogo:!1,logoUrl:"",shippingAmount:"",itemAmount:"",totalAmount:"",realAmount:"",discount:"",operateLog:[],totalPageLog:1,currentPageLog:1,pageSizeLog:20,currentPageDataLog:[],getLogFlag:!0,messages:[],currentmessages:[],msgpage:1,msgtotalPage:1,msgrowsPerPage:20,msgtotalCount:0,getMsgFlag:!0,pack:"",fileList:[],uploadfileList:[],uniCode:this.$route.query.uniCode?this.$route.query.uniCode:"",tipWithHover:{container:"page-footer-fixed"},invoiceData2:[],invoiceData3:[],sendInvoiceOpen:!1,activeShareName:"shareLink",showCustom:!1,shareTitle:"",shareDesc:"",showDownloadInvoice:!1,stopResource:"1",activeConfirm:"confirmErp",innerVisible:!1,confirmVisible:!1,confirmVisible2:!1,invoiceConfirmTourShow:!1,invoiceConfirmTourShow1:!1,loginShow:!1,loginType:0,loginRId:"",searchName:!1,searchTrack:!1,searchNameInput:"",showTopTip:!1,fromPage:this.$route.query.fromPage?this.$route.query.fromPage:"",secretKeyOpen:!1,DialogEditComment:{loading:!1,uploadLoading:!1,visible:!1,contents:"",shopName:"",attach:[],commentId:"",item:null},DialogEditCommentDefault:"{}",showItemPrice:!0},Object(n["a"])(t,"activeName","first"),Object(n["a"])(t,"exportInvoiceType",""),Object(n["a"])(t,"dialogMarkShipped",{isShow:!1,loading:!1,trackNumber:"",trackCompany:"",realCompany:"",item:null,shopifyCompany:[],trackKey:"",trackUrl:""}),Object(n["a"])(t,"dialogMarkShippedDefault","{}"),Object(n["a"])(t,"loadCnt",!1),Object(n["a"])(t,"cnt",null),Object(n["a"])(t,"cntText",""),Object(n["a"])(t,"totalCnt",0),Object(n["a"])(t,"dialogZeroAlert",{isShow:!1,loading:!1,items:[],invoice:null}),Object(n["a"])(t,"dialogZeroAlertDefault","{}"),Object(n["a"])(t,"tempCode",""),Object(n["a"])(t,"setLotPriceCallBackTime",0),Object(n["a"])(t,"iframeId",null),Object(n["a"])(t,"setShippingTime",0),Object(n["a"])(t,"dialogSetPayment",{isShow:!1,loading:!1,acceptPayment:[],payment:"",payUrl:""}),Object(n["a"])(t,"dialogSetPaymentDefault","{}"),Object(n["a"])(t,"tempCode",""),Object(n["a"])(t,"getInvocieTime",0),Object(n["a"])(t,"DialogLoadingCnt",{isShow:!1,loadingCnt:0}),t},computed:{hasAbnormal:function(){return this.invoiceData.some((function(t){return 1===Number(t.isAbnormal)}))},noMore:function(){return!0},disabled:function(){return this.loading||this.noMore},fullPath:function(){return this.$route.fullPath}},watch:{$route:"gotoPage",fullPath:function(){},noMore:function(){this.noMore&&(this.getOperateLog(this.invoiceInfo.id),this.getMessages(this.invoiceInfo.id))},customerName:function(){this.changeCustomerName()},uniCode:function(){sessionStorage.removeItem("tabActiveAll"),sessionStorage.removeItem("tabActiveSku"),sessionStorage.removeItem("tabActiveNotBind"),sessionStorage.removeItem("tabActiveNotDeliver")},drawer:function(){this.drawer&&setTimeout((function(){$(".el-drawer__body").scrollTop(0)}),100)},realAmount:function(){Number(this.realAmount)<Number(this.totalAmount)&&Number(this.realAmount)>0?this.discount=this.toFixed(Number(this.totalAmount)-Number(this.realAmount)):this.discount=0},tabActive:function(){this.searchName=!1,this.searchTrack=!1,this.searchNameInput=""},searchName:function(){var t=this;this.searchName&&setTimeout((function(){t.$refs.searchNameInput.focus()}),300)},searchTrack:function(){var t=this;this.searchTrack&&setTimeout((function(){t.$refs.searchNameInput.focus()}),300)},invoiceData:function(){var t=this;this.invoiceData.length&&this.invoiceData.forEach((function(e,i){t.$set(e,"previewList",[]),e.imgUrl&&e.previewList.push(e.imgUrl)}))}},mounted:function(){var t=this;window.addEventListener("message",(function(e){e.data.type&&"isVendors"===e.data.type&&(t.iframeId=e.data.id);var i=localStorage.getItem("apiUserId")?localStorage.getItem("apiUserId"):"",o=localStorage.getItem("apiUserToken")?localStorage.getItem("apiUserToken"):"";i&&o||t.iframeId===t.invoiceInfo.customerId&&(t.loginShow=!1)})),this.dialogSetPaymentDefault=JSON.stringify(this.dialogSetPayment),this.dialogZeroAlertDefault=JSON.stringify(this.dialogZeroAlert),this.dialogMarkShippedDefault=JSON.stringify(this.dialogMarkShipped),this.DialogEditCommentDefault=JSON.stringify(this.DialogEditComment),this.setLotPriceDialogDefault=JSON.stringify(this.setLotPriceDialog),this.getDataAll(),3==this.userInfo.source&&this.getErpRules(),this.isCollapse=!0,this.$nextTick((function(){t.handleScroll(),window.emojiPicker=new EmojiPicker({emojiable_selector:"[data-emojiable=true]",assetsPath:"images/v-emoji",popupButtonClasses:"fa fa-smile-o"}),window.emojiPicker.discover()})),this.shopData=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).erpShops:[],this.modalCustomExportDefault=JSON.stringify(this.modalCustomExport),$("body").on("click",(function(t){var e=$(t.target);e.hasClass("el-popover")||0!==e.parent(".el-popover").length||$(".el-popover").remove()}))},created:function(){document.body.ondrop=function(t){t.preventDefault(),t.stopPropagation()}},destroyed:function(){},components:{draggable:l.a,login:d["a"]},methods:{DesignatedChange:function(t,e){},setDesignatedGood:function(){this.DesignatedGoodDialog.isShow=!0},openSelectProducts:function(){},focusChange:function(t,e){t.price=void 0,this.$nextTick((function(){this.$refs["refInput".concat(e)].focus()})),console.log(t,e)},blueChange:function(t,e){void 0==t.price&&(t.price=null,t.tooltipShow=!1),console.log(t,e)},setType:function(t){this.type=t,this.toPage(1)},gotoPage:function(){this.page=this.$route.query.page?Number(this.$route.query.page):1,this.getInvoiceData(this.invoiceInfo.id)},toPage:function(t){if(t!=this.$route.query.page){var e=Object(a["a"])(Object(a["a"])({},this.$route.query),{},{page:t});this.$router.push({query:e})}else this.getInvoiceData(this.invoiceInfo.id)},DisplayToPage:function(t,e){var i=this;this.pageLoading=!0,setTimeout((function(){i.$set(e,"displayItems",e.allItems.slice(50*(t-1),50*t)),i.$set(e,"displayItemsPage",t),i.pageLoading=!1}),500)},saveSetLotPrice:function(){var t=this;if(2!=this.userInfo.source||1!=this.setLotPriceDialog.logType||this.setLotPriceDialog.shipTypeStr)if(3!=this.setLotPriceDialog.onlyNone||0!=this.DesignatedGoodDialog.data.length){this.tempCode="".concat(this.invoiceInfo.id).concat(Date.parse(new Date));var e={invoiceId:this.invoiceInfo.id,shipType:this.setLotPriceDialog.type,shipTypeStr:this.setLotPriceDialog.shipTypeStr,addPricePercent:this.setLotPriceDialog.numbers,onlyNone:this.setLotPriceDialog.onlyNone,tempCode:this.tempCode};if(2==this.setLotPriceDialog.logType){if(!this.setLotPriceDialog.cntArr.length)return void(e.shipTypeArr=[]);var i=[];this.setLotPriceDialog.cntArr.forEach((function(t){i.push({countryCode:t.countryCode,shipType:t.shipType,shipTypeStr:t.shipTypeStr})})),e.shipTypeArr=i,e.shipType="",e.shipTypeStr=""}2==this.setLotPriceDialog.onlyNone&&this.setLotPriceDialog.sku&&(e.sku=this.setLotPriceDialog.sku),3==this.setLotPriceDialog.onlyNone&&this.DesignatedGoodDialog.data.length>0&&(e.ids=this.DesignatedGoodDialog.data),3==this.userInfo.source?(e.ruleId=this.setLotPriceDialog.ruleId,e.priceType=this.setLotPriceDialog.price,e.addPrice=this.setLotPriceDialog.addPrice):e.priceType=this.setLotPriceDialog.price,this.setLotPriceDialog.loading=!0,this.$apiCall("api.Invoice.getErpPrice",e,(function(t){})),this.setLotPriceDialog.step=4,this.setLotPriceDialog.loadingCnt=0,this.setLotPriceDialog.loading=!1;var o=0;this.setLotPriceCallBackTime=setInterval((function(){o++,o>300&&(t.setLotPriceDialog.loading=!1,t.setLotPriceDialog.isShow=!1,t.$elementMessage("批量改价失败","error"),t.tempCode="",clearInterval(t.setLotPriceCallBackTime)),t.$apiCall("api.Invoice.checkPriceResult",{tempCode:t.tempCode},(function(e){if("9999"==e.ErrorCode){t.DesignatedGoodDialog.data=[];var i=e.Data.Results;i.result&&i.result.now&&(t.setLotPriceDialog.loadingCnt=i.result.now/i.result.allCnt),1!=i.status&&(t.setLotPriceDialog.loading=!1,3!=i.status&&(t.setLotPriceDialog.isShow=!1),t.tempCode="",clearInterval(t.setLotPriceCallBackTime),2==i.status&&(t.setLotPriceDialog.isShow=!1,t.$elementMessage(i.message,"error")),3==i.status&&(t.setLotPriceDialog.step=3,t.setLotPriceDialog.results=i.result,t.getDataAll()))}}))}),1e3)}else this.$elementMessage("请选择指定商品","error");else this.$elementMessage("请填写物流渠道名称","error")},setLotPriceStep:function(t){var e=this;if(1===t){var i="https:"==document.location.protocol?"https":"http",o=window.location.host.toLowerCase().indexOf("sandbox")>=0?"sandboxvendor.ourmall.com":"vendor.ourmall.com",s=i+"://"+o+"/mabang-account.html";window.location.host.indexOf("localhost")>-1&&(s="http://".concat(window.location.host,"/mabang-account.html"));var a=encodeURI(s);window.open("http://www.mabangerp.com/index.php?mod=main.login&erp-type=5yoho&backUrl="+a,"mabang-account-window",void 0,!0);window.addEventListener("storage",(function(i){if("authorizMabangAccount"==i.key){var o=JSON.parse(localStorage.getItem("authorizMabangAccount"));e.$apiCall("api.User.mbLogin",{employeeId:o.employeeId,cKey:o.cKey},(function(i){if("9999"==i.ErrorCode){var o=JSON.parse(JSON.stringify(e.$store.state.userInfo));o.source=i.Data.Results.source,localStorage.setItem("userInfo",JSON.stringify(o)),e.userInfo=JSON.parse(localStorage.getItem("userInfo")),3==i.Data.Results.source&&e.getErpRules(),setTimeout((function(){e.$hideLoading(),e.setLotPriceDialog.step=t}),300)}else e.$hideLoading(),e.$elementMessage(i.Message,"error")}))}}))}else 2===t&&(this.setOtherERPDialog.loading=!1,this.setOtherERPDialog.uploadLoading=!1,this.setOtherERPDialog.contents="",this.setOtherERPDialog.attach=[],this.setOtherERPDialog.isShow=!0)},getErpRules:function(){var t=this;this.$apiCall("api.Invoice.getErpRules",{},(function(e){"9999"==e.ErrorCode&&(t.setLotPriceDialog.erpRules=e.Data.Results,t.setLotPriceDialog.erpRules.length&&t.setLotPriceDialog.erpRules.forEach((function(e){t.$set(e,"shippingFeeRuleId",Number(e.shippingFeeRuleId))})),t.setLotPriceDialog.isShow=!1,t.getData())}))},unbind:function(){var t=this;this.$showLoading(),this.$apiCall("api.User.unbind",{},(function(e){if(t.$hideLoading(),"9999"==e.ErrorCode){var i=JSON.parse(JSON.stringify(t.$store.state.userInfo));i.source=e.Data.Results.source,localStorage.setItem("userInfo",JSON.stringify(i)),t.userInfo=JSON.parse(localStorage.getItem("userInfo")),t.$elementMessage("解除绑定成功","success"),t.setLotPriceDialog.step=1}else t.$elementMessage(e.Message,"error")}))},changePriceType:function(){2==this.setLotPriceDialog.price&&(this.setLotPriceDialog.onlyNone="")},setLotPrice:function(t){var e=this;this.$showLoading(),t&&t.sku?(this.setLotPriceDialog.sku=t.sku,this.setLotPriceDialog.onlyNone="2"):(this.setLotPriceDialog.sku="",this.setLotPriceDialog.onlyNone="1"),1==this.userInfo.source?(this.setLotPriceDialog.step=1,this.setLotPriceDialog.isShow=!0,this.$hideLoading()):(this.setLotPriceDialog.step=2,this.setLotPriceDialog.loading=!0,this.$apiCall("api.Invoice.getPriceConfig",{invoiceId:this.invoiceInfo.id},(function(t){if(e.setLotPriceDialog.loading=!1,"9999"==t.ErrorCode){if(e.setLotPriceDialog.isShow=!0,e.setLotPriceDialog.shippingTypeArr=t.Data.Results.shippingTypeArr,e.setLotPriceDialog.type=t.Data.Results.shipType,e.setLotPriceDialog.numbers=t.Data.Results.addPricePercent,e.setLotPriceDialog.shipTypeStr=t.Data.Results.shipTypeStr,e.setLotPriceDialog.ruleId=t.Data.Results.ruleId?Number(t.Data.Results.ruleId):"",e.setLotPriceDialog.price=t.Data.Results.priceType?t.Data.Results.priceType:"1",2==e.setLotPriceDialog.price&&(e.setLotPriceDialog.onlyNone=""),2==e.showType&&(e.setLotPriceDialog.onlyNone="2"),e.setLotPriceDialog.shipTypeStr&&(e.setLotPriceDialog.type="999"),t.Data.Results.shipTypeArr&&t.Data.Results.shipTypeArr.length){e.setLotPriceDialog.logType="2",t.Data.Results.shipTypeArr.forEach((function(t){t.shipType||e.$set(t,"shipType","999"),e.setLotPriceDialog.cntArr.length&&e.setLotPriceDialog.cntArr.forEach((function(i){i.countryCode==t.countryCode&&(e.$set(i,"shipType",t.shipType),e.$set(i,"shipTypeStr",t.shipTypeStr))}))}))}e.$hideLoading()}else e.$elementMessage(t.Message,"error")})))},cntOnError:function(){this.$elementMessage(this.$t("myinvoice.copyFailed"),"error")},cntOnCopy:function(){this.$elementMessage(this.$t("myinvoice.copyItems"),"success")},getCntCountry:function(){var t=this;this.loadCnt=!0,this.$apiCall("api.Invoice.getItemsCountry",{invoiceId:this.invoiceInfo.id},(function(e){if(t.loadCnt=!1,"9999"==e.ErrorCode){t.cnt=e.Data.Results;var i="".concat(t.$t("invoice.Totalpurchases")).concat(t.totalCnt,",");t.totalCnt=0,t.setLotPriceDialog.cntArr=[],Object.keys(e.Data.Results).forEach((function(o){i+="".concat(e.Data.Results[o].name,": ").concat(e.Data.Results[o].cnt,","),t.totalCnt+=Number(e.Data.Results[o].cnt),t.setLotPriceDialog.cntArr.push({country:e.Data.Results[o].name,countryCode:o,shipType:"",shipTypeStr:""})})),t.cntText=i.slice(0,i.length-1)}}))},saveMarkShipped:function(){var t=this;if(this.dialogMarkShipped.trackNumber)if(this.dialogMarkShipped.trackKey)if(99!=this.dialogMarkShipped.trackKey||this.dialogMarkShipped.trackCompany){this.dialogMarkShipped.shopifyCompany.forEach((function(e){t.dialogMarkShipped.trackKey==e.key&&(99!=t.dialogMarkShipped.trackKey?e.name:t.dialogMarkShipped.trackCompany)})),this.dialogMarkShipped.loading=!0,this.$apiCall("api.Invoice.changeDeliver",{itemId:this.dialogMarkShipped.item.id,trackNumber:this.dialogMarkShipped.trackNumber,trackCompany:this.dialogMarkShipped.trackCompany,trackKey:this.dialogMarkShipped.trackKey,trackUrl:this.dialogMarkShipped.trackUrl},(function(e){t.dialogMarkShipped.loading=!1,"9999"==e.ErrorCode?(t.$elementMessage(t.$t("invoice.shippedMark"),"success"),t.dialogMarkShipped.isShow=!1,t.getCnt(t.invoiceInfo.id),t.getData(),t.$apiCall("api.Invoice.getItems",{uniCode:t.invoiceInfo.uniCode,invoiceId:t.invoiceInfo.id,id:t.dialogMarkShipped.item.id},(function(e){"9999"==e.ErrorCode?(console.log(e),t.invoiceData.forEach((function(i,o){i.id==e.Data.Results[0].id&&t.invoiceData.splice(o,1,e.Data.Results[0])}))):t.$elementMessage(e.Message,"error")}))):t.$elementMessage(e.Message,"error")}))}else this.$elementMessage(this.$t("invoice.logisticscompany"),"error");else this.$elementMessage(this.$t("invoice.logisticscompany"),"error");else this.$elementMessage(this.$t("invoice.logisticsnumber"),"error")},markShippedOpen:function(t){var e=this;this.dialogMarkShipped=JSON.parse(this.dialogMarkShippedDefault),this.$showLoading(),this.$apiCall("api.Invoice.getShopifyCompany",{},(function(i){e.$hideLoading(),"9999"==i.ErrorCode?(e.dialogMarkShipped.shopifyCompany=i.Data.Results,e.dialogMarkShipped.isShow=!0,e.dialogMarkShipped.item=t):e.$elementMessage(i.Message,"error")}))},handleClickTab:function(t,e){this.exportInvoiceType=t.paneName,"first"!=this.exportInvoiceType&&"third"!=this.exportInvoiceType||(this.$showLoading(),this.getExportTitle())},changeShowItemPrice:function(){var t=this;this.$apiCall("api.Invoice.setShowPrice",{uniCode:this.uniCode},(function(e){"9999"==e.ErrorCode||(t.showItemPrice=!t.showItemPrice,t.$elementMessage(e.Message,"error"))}))},handleRemoveImg:function(t,e){var i=this;e.forEach((function(e,o){e.name==t.name&&i.DialogEditComment.attach.splice(o,1)}))},handleChangeImg:function(t){var e=this;this.DialogEditComment.loading=!0,this.DialogEditComment.uploadLoading=!0,this.$apiCall("api.Comment.uploadAttach",{"@file":t.raw},(function(t){e.DialogEditComment.loading=!1,e.DialogEditComment.uploadLoading=!1,"9999"==t.ErrorCode?e.DialogEditComment.attach.push(t.Data.Results.url):e.$elementMessage(t.Message,"error")}))},openAddComment:function(){this.$refs.uploadFile&&this.$refs.uploadFile.clearFiles(),this.DialogEditComment=JSON.parse(this.DialogEditCommentDefault),this.DialogEditComment.visible=!0},saveComment:function(){var t=this;if(!this.DialogEditComment.contents)return this.$message({message:this.$t("invoice.emptyQuestion"),type:"error"}),!1;this.DialogEditComment.loading=!0,this.$apiCall("api.Comment.addByUser",{commentId:this.DialogEditComment.commentId,contents:this.DialogEditComment.contents,shopName:this.DialogEditComment.shopName,attach:this.DialogEditComment.attach},(function(e){t.DialogEditComment.loading=!1,9999==e.ErrorCode?(t.DialogEditComment.visible=!1,t.$message({message:t.$t("app._wewillReplyASAP"),type:"success"})):t.$message({message:e.Message,type:"error"})}))},openSecretKey:function(){this.secretKeyOpen=!0},Filter:function(t,e){if(3==t)!this.searchName&&!this.searchTrack||this.searchNameInput||(this.searchName=!1,this.searchTrack=!1);else if(2==t)this.searchName=!1,this.searchTrack=!1,this.searchNameInput="";else if(1==t&&!this.searchNameInput&&!this.searchTrack)return;this.page=1,this.getInvoiceData(this.invoiceInfo.id,this.searchNameInput)},openSkype:function(){this.getData();var t=0,e=setInterval((function(){(function(t,e,i){t.loadSkypeWebSdkAsync=t.loadSkypeWebSdkAsync||function(t){var o,s=e.getElementsByTagName(i)[0];e.getElementById(t.id)||(o=e.createElement(i),o.id=t.id,o.src=t.scriptToLoad,o.onload=t.callback,s.parentNode.insertBefore(o,s))};var o={scriptToLoad:"https://swx.cdn.skype.com/shared/v/latest/skypewebsdk.js",id:"skype_web_sdk"};t.loadSkypeWebSdkAsync(o)})(window,document,"script"),t++,t>10&&clearInterval(e)}),300)},isChangeSku:function(t){return!(!this.invoiceInfo.timeApiGet&&!this.invoiceInfo.timeCreateOrder&&2!=t.fulfillStatus&&9!=this.invoiceInfo.status)},isChangePrice:function(t){return!(!this.invoiceInfo.timeApiGet&&!this.invoiceInfo.timeCreateOrder&&2!=t.fulfillStatus&&9!=this.invoiceInfo.status&&1!=this.invoiceInfo.customerRead&&1!=this.invoiceInfo.payStatus)},isChangeOther:function(t){return!!(2==t.isAbnormal&&(this.invoiceInfo.timeApiGet||this.invoiceInfo.timeCreateOrder||2==t.fulfillStatus||9==this.invoiceInfo.status||1==this.invoiceInfo.customerRead||1==this.invoiceInfo.payStatus)||1==t.isAbnormal&&t.trackNumber)},isChangeAmount:function(){return!(!this.invoiceInfo.timeApiGet&&!this.invoiceInfo.timeCreateOrder&&9!=this.invoiceInfo.status&&1!=this.invoiceInfo.customerRead&&1!=this.invoiceInfo.payStatus)},hidePopoverFn:function(){$(".el-popover").remove()},showPopover:function(){this.hasAbnormal||(this.confirmVisible=!0,$(".el-popover").remove(),$("body").off())},showPopover3:function(){$(".el-popover").remove(),$("body").off()},showPopover2:function(){this.hasAbnormal||(this.confirmVisible2=!0,$(".el-popover").remove(),$("body").off(),$(".page-footer-fixed").addClass("show-hover"))},hidePopover:function(){$(".page-footer-fixed").removeClass("show-hover")},downloadInvoice:function(){var t=this;this.showDownloadInvoice=!0;var e=1,i=1;this.showLogo=!1,this.logoUrl="",this.$showLoading(),this.$apiCall("api.Invoice.getOne",{uniCode:this.uniCode},(function(o){"9999"==o.ErrorCode?(t.invoiceInfo=o.Data.Results,t.shopName=t.invoiceInfo.shopName?t.invoiceInfo.shopName:"",t.invoiceData3=[],t.getDownload(e,i),t.shareTitle=t.invoiceInfo.remark?t.invoiceInfo.remark.title:"",t.shareDesc=t.invoiceInfo.remark?t.invoiceInfo.remark.desc:"",t.invoiceInfo&&t.invoiceInfo.logo&&(t.showLogo=!0,t.logoUrl=t.invoiceInfo.logo),t.payUrl=t.invoiceInfo.payUrl?t.invoiceInfo.payUrl:"",t.platformRate=t.invoiceInfo.platformRate&&t.invoiceInfo.platformRate>0?t.invoiceInfo.platformRate:"",t.paymentType=t.invoiceInfo.paymentType?t.invoiceInfo.paymentType:"",t.shippingAmount=t.invoiceInfo.shippingAmount?t.toFixed(t.invoiceInfo.shippingAmount):"",t.itemAmount=t.invoiceInfo.itemAmount?t.toFixed(t.invoiceInfo.itemAmount):"",t.totalAmount=t.invoiceInfo.totalAmount?t.toFixed(t.invoiceInfo.totalAmount):"",t.realAmount=t.invoiceInfo.realAmount?t.toFixed(t.invoiceInfo.realAmount):""):(t.$elementMessage(o.Message,"error"),"1002"!=o.ErrorCode&&"1003"!=o.ErrorCode||t.$userFailure(t))}))},getDownload:function(t,e){var i=this;t>e?setTimeout((function(){i.getCanvas()}),1e3):this.$apiCall("api.Invoice.getItems",{invoiceId:this.invoiceInfo.id,type:"all",page:t,rowsPerPage:50},(function(e){if("9999"==e.ErrorCode){var o=e.Data.Pagination.totalPage;e.Data.Results.forEach((function(t,e){t.price?2!=t.fulfillStatus?i.$set(t,"amount",(Number(t.quantity)*Number(t.price)).toFixed(2)):i.$set(t,"amount","0.00"):i.$set(t,"amount",""),i.invoiceData3.push(t)})),t++,i.getDownload(t,o)}else i.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||i.$userFailure(i)}))},getCanvas:function(){var t=this,e=$(".download-invoice"),i=2;p()(e[0],{dpi:2*window.devicePixelRatio,scale:i,background:"#fff",allowTaint:!0,useCORS:!0}).then((function(e){t.$hideLoading();var i=e.toDataURL("image/jpeg"),o=$("<a>").attr("href",i).attr("download","Invoice # "+t.invoiceInfo.code+".jpg").appendTo("body");o[0].click(),o.remove(),t.showDownloadInvoice=!1}))},saveRemark:function(t){var e=this;this.$showLoading(),this.$apiCall("api.Invoice.saveRemark",{uniCode:this.uniCode,title:1==t?"":this.shareTitle,desc:1==t?"":this.shareDesc},(function(t){e.$hideLoading(),"9999"==t.ErrorCode?(e.shareTitle=t.Data.Results.title,e.shareDesc=t.Data.Results.desc):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))},saveCustomExportSetting:function(t){var e=this;if(!this.modalCustomExport.selectedTitles.length)return this.$elementMessage(this.$t("myinvoice.leastOne"),"error"),!1;if(this.modalCustomExport.selectedTitles.some((function(t){return!t.name})))return this.$elementMessage(this.$t("myinvoice.notEmpty"),"error"),!1;this.uploadLoading=!0;var i={};this.modalCustomExport.selectedTitles.forEach((function(t){i[t.key]=t.name}));var o="third"==this.exportInvoiceType?"api.Invoice.saveInvoiceTitle":"api.Invoice.saveExportTitle";this.$apiCall(o,{titles:i},(function(o){if("9999"==o.ErrorCode)if(t>0){0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var s=function(t){document.getElementById("ifilePro").src=t},a="third"==e.exportInvoiceType?"api.Invoice.exportInvoice":"api.Invoice.exportOrder";e.$apiCall(a,{titles:i,invoiceId:e.invoiceInfo.id,type:1==t?"excel":"csv"},(function(t){e.uploadLoading=!1,"9999"==t.ErrorCode?(e.$elementMessage(e.$t("myinvoice.saveSettingAndExport"),"success"),s(t.Data.Results.file)):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))}else e.$elementMessage(e.$t("myinvoice.saveSettingSuccess"),"success");else e.uploadLoading=!1,e.$elementMessage(o.Message,"error"),"1002"!=o.ErrorCode&&"1003"!=o.ErrorCode||e.$userFailure(e)}))},saveCustomExportShopify:function(){var t=this;this.uploadLoading=!0,0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var e=function(t){document.getElementById("ifilePro").src=t},i="third"==this.exportInvoiceType?"api.Invoice.exportInvoice":"api.Invoice.exportOrder";this.$apiCall(i,{invoiceId:this.invoiceInfo.id,type:"excel"},(function(i){t.uploadLoading=!1,"9999"==i.ErrorCode?(t.$elementMessage(t.$t("myinvoice.exportSuccess"),"success"),e(i.Data.Results.file)):(t.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||t.$userFailure(t))}))},saveCustomExport:function(t){this.saveCustomExportSetting(t)},customWrapState:function(){this.showCustom=!this.showCustom},selectTitle:function(t){this.modalCustomExport.selectedTitles.push(this.modalCustomExport.unselectedTitles[t]),this.modalCustomExport.unselectedTitles.splice(t,1)},removeTitle:function(t){this.modalCustomExport.unselectedTitles.unshift(this.modalCustomExport.selectedTitles[t]),this.modalCustomExport.selectedTitles.splice(t,1)},downloadFile:function(){var t="fourth"==this.exportInvoiceType?"/file/shopify_orders_import.csv":"/file/orders_impor.xlsx";0==$("#downloadFile").length&&$("body").append('<iframe id="downloadFile" style="display:none"></iframe>');var e=function(t){document.getElementById("downloadFile").src=t};e(t)},querySearch:function(t,e){var i=this.shopData,o=t?i.filter(this.createFilter(t)):i;e(o)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.shopName=t.value},getExportTitle:function(){var t=this;this.modalCustomExport=JSON.parse(this.modalCustomExportDefault);var e="third"==this.exportInvoiceType?"api.Invoice.exportInvoiceTitle":"api.Invoice.exportTitle";this.$apiCall(e,{},(function(e){if(t.$hideLoading(),"9999"==e.ErrorCode){for(var i in e.Data.Results.default){var o={};o.key=i,o.orName=e.Data.Results.default[i],o.name=e.Data.Results.default[i],t.modalCustomExport.tags.push(o)}for(var i in e.Data.Results.titles){var s={};s.key=i,s.orName=e.Data.Results.titles[i],s.name=e.Data.Results.titles[i],t.modalCustomExport.selectedTitles.push(s)}t.modalCustomExport.tags.forEach((function(e){t.modalCustomExport.selectedTitles.some((function(t){return e.key==t.key}))||t.modalCustomExport.unselectedTitles.unshift(e),t.modalCustomExport.selectedTitles.some((function(i){e.key==i.key&&t.$set(i,"orName",e.name)}))}))}else t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t)}))},saveCustomExportSettingOnly:function(t){var e=this;if(!this.modalCustomExport.selectedTitles.length)return this.$elementMessage(this.$t("myinvoice.leastOne"),"error"),!1;if(this.modalCustomExport.selectedTitles.some((function(t){return!t.name})))return this.$elementMessage(this.$t("myinvoice.notEmpty"),"error"),!1;this.$showLoading();var i={};this.modalCustomExport.selectedTitles.forEach((function(t){i[t.key]=t.name})),this.$apiCall("api.Invoice.saveExportTitle",{titles:i},(function(i){if(e.$hideLoading(),"9999"==i.ErrorCode)if(t>0){0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var o=function(t){document.getElementById("ifilePro").src=t};e.$apiCall("api.Invoice.exportOrder",{invoiceId:e.invoiceInfo.id,type:1==t?"excel":"csv"},(function(t){"9999"==t.ErrorCode?(e.innerVisible=!1,e.$elementMessage(e.$t("myinvoice.exportSuccess"),"success"),o(t.Data.Results.file),e.$hideLoading()):(e.$hideLoading(),e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))}else e.innerVisible=!1,e.$elementMessage(e.$t("myinvoice.saveSettingSuccess"),"success"),e.getExportTitle();else e.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||e.$userFailure(e)}))},saveCustomExportOnly:function(t){this.saveCustomExportSettingOnly(t)},setExportOnly:function(){var t=this;this.$showLoading(),this.showCustom=!1,this.modalCustomExport=JSON.parse(this.modalCustomExportDefault),this.$apiCall("api.Invoice.exportTitle",{},(function(e){if(t.$hideLoading(),"9999"==e.ErrorCode){for(var i in t.innerVisible=!0,e.Data.Results.default){var o={};o.key=i,o.orName=e.Data.Results.default[i],o.name=e.Data.Results.default[i],t.modalCustomExport.tags.push(o)}for(var i in e.Data.Results.titles){var s={};s.key=i,s.orName=e.Data.Results.titles[i],s.name=e.Data.Results.titles[i],t.modalCustomExport.selectedTitles.push(s)}t.modalCustomExport.tags.forEach((function(e){t.modalCustomExport.selectedTitles.some((function(t){return e.key==t.key}))||t.modalCustomExport.unselectedTitles.unshift(e),t.modalCustomExport.selectedTitles.some((function(i){e.key==i.key&&t.$set(i,"orName",e.name)}))}))}else t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t)}))},confirmMoney:function(){var t=this;this.invoiceConfirmTourShow||this.invoiceConfirmTourShow1||(this.$showLoading(),this.modalCustomExport=JSON.parse(this.modalCustomExportDefault),this.$apiCall("api.Invoice.exportTitle",{},(function(e){if(t.$hideLoading(),"9999"==e.ErrorCode){for(var i in t.confirmMoneyOpen=!0,t.confirmMoneyType="1",t.activeConfirm="confirmErp",e.Data.Results.default){var o={};o.key=i,o.orName=e.Data.Results.default[i],o.name=e.Data.Results.default[i],t.modalCustomExport.tags.push(o)}for(var i in e.Data.Results.titles){var s={};s.key=i,s.orName=e.Data.Results.titles[i],s.name=e.Data.Results.titles[i],t.modalCustomExport.selectedTitles.push(s)}t.modalCustomExport.tags.forEach((function(e){t.modalCustomExport.selectedTitles.some((function(t){return e.key==t.key}))||t.modalCustomExport.unselectedTitles.unshift(e),t.modalCustomExport.selectedTitles.some((function(i){e.key==i.key&&t.$set(i,"orName",e.name)}))}))}else t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t)})))},confirmMoneyFn:function(){var t=this;this.tempCode="".concat(this.invoiceInfo.id).concat(Date.parse(new Date)),this.$apiCall("api.Invoice.setSyncToErp",{invoiceId:this.invoiceInfo.id,shopName:this.shopName,tempCode:this.tempCode},(function(t){})),this.DialogLoadingCnt.loadingCnt=0,this.DialogLoadingCnt.isShow=!0,this.getInvocieTime=setInterval((function(){t.$apiCall("api.Invoice.checkPriceResult",{tempCode:t.tempCode,type:4},(function(e){if("9999"==e.ErrorCode){var i=e.Data.Results;Number(i.count)&&Number(i.total)&&(t.DialogLoadingCnt.loadingCnt=i.count/i.total),1!=i.status&&(t.tempCode="",clearInterval(t.getInvocieTime),t.DialogLoadingCnt.isShow=!1,3==i.status&&t.$elementMessage(i.message,"error"),2==i.status&&(t.$elementMessage(t.$t("invoice.storeSet"),"success"),t.confirmMoneyOpen=!1,t.getData()))}}))}),1e3)},confirmMoneyOnly:function(t){var e=this;this.$showLoading(),this.$apiCall("api.Invoice.setPayed",{invoiceId:this.invoiceInfo.id,shopName:this.shopName},(function(i){e.$hideLoading(),"9999"==i.ErrorCode?(e.$elementMessage(e.$t("invoice.successConfirm"),"success"),e.getData(),1==t?($("#messageContainer").css("display","none"),setTimeout((function(){e.invoiceConfirmTourShow1=!0,e.$tours["invoiceConfirmTour1"].start()}),1e3)):($(".page-footer-fixed").addClass("show-hover"),e.invoiceConfirmTourShow=!0,setTimeout((function(){e.$tours["invoiceConfirmTour"].start()}),1e3))):(e.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||e.$userFailure(e))}))},toSendInvoice:function(t){this.invoiceTour&&(this.sendInvoiceOpen=!0,this.activeShareName="shareLink",t&&(this.dialogZeroAlert.isShow=!1))},sendInvoice:function(){var t=this;this.loading=!0,this.$apiCall("api.Invoice.checkItemPrice",{invoiceId:this.invoiceInfo.id},(function(e){if(t.loading=!1,"9999"==e.ErrorCode){var i=e.Data.Results;i.noSkuArr.length||i.nullPriceArr.length||i.zeroPriceArr.length?(t.dialogZeroAlert=JSON.parse(t.dialogZeroAlertDefault),t.dialogZeroAlert.items=i.noSkuArr.concat(i.noSkuArr,i.nullPriceArr,i.zeroPriceArr),t.dialogZeroAlert.isShow=!0):t.toSendInvoice()}else t.$elementMessage(e.Message,"error")}))},invoicePreview:function(t){var e=window.open("/blank.html","invoicePreview");e.location.href=t},changeShowType:function(t){this.showType!=t&&(this.showType=t,this.tabcChange(this.showType))},getRowKey:function(t){return t.id},rowClick:function(t,e,i){if("1"===t.fulfillStatus){var o=i.type.indexOf("expand");0==o&&t.allItems.length<=0?this.expands=[]:t.allItems.length>0&&this.expands.indexOf(t.id)<0&&this.expands.push(t.id)}},expandChange:function(t,e){var i=this;this.expands=[],e.length?(e.forEach((function(t,e){"1"===t.fulfillStatus&&i.expands.push(t.id)})),this.expands=Array.from(new Set(this.expands))):this.expands=[]},stopDistributorTour:function(){this.invoiceTour=!0,this.$tours["invoiceTour"].stop(),localStorage.setItem("invocieTourFlag",!0),$(".el-scrollbar__wrap").scrollTop(0),this.page=1,this.getDataAll()},stopConfirmTour:function(){this.invoiceConfirmTourShow=!1,this.$tours["invoiceConfirmTour"].stop(),$(".page-footer-fixed").removeClass("show-hover")},stopConfirmTour1:function(){this.invoiceConfirmTourShow1=!1,this.$tours["invoiceConfirmTour1"].stop(),$("#messageContainer").css("display","block")},opendrawer:function(t){var e=this;if(this.drawertype=t,this.$showLoading(),3==t)this.drawerTitle=this.$t("invoice.exportImport"),this.showCustom=!1,this.activeName="first",this.uploadfileList=[],this.modalCustomExport=JSON.parse(this.modalCustomExportDefault),this.$apiCall("api.Invoice.exportTitle",{},(function(t){if(e.$hideLoading(),"9999"==t.ErrorCode){for(var i in e.drawer=!0,t.Data.Results.default){var o={};o.key=i,o.orName=t.Data.Results.default[i],o.name=t.Data.Results.default[i],e.modalCustomExport.tags.push(o)}for(var i in t.Data.Results.titles){var s={};s.key=i,s.orName=t.Data.Results.titles[i],s.name=t.Data.Results.titles[i],e.modalCustomExport.selectedTitles.push(s)}e.modalCustomExport.tags.forEach((function(t){e.modalCustomExport.selectedTitles.some((function(e){return t.key==e.key}))||e.modalCustomExport.unselectedTitles.unshift(t),e.modalCustomExport.selectedTitles.some((function(i){t.key==i.key&&e.$set(i,"orName",t.name)}))}))}else e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e)}));else if(2==t)if(this.drawerTitle=this.$t("invoice.Helpcenter"),localStorage.getItem("invocieTourFlag"))this.drawer=!0,this.$hideLoading();else if(2!=this.tabActive){if(!document.querySelectorAll(".step-btn-4").length)for(var i=0;i<this.steps.length;i++)".step-btn-4"==this.steps[i].target&&(this.steps.splice(i,1),i--);this.$tours["invoiceTour"].start()}else this.drawer=!0,this.$hideLoading();else this.drawerTitle=this.$t("invoice.Orderstatistics"),this.$apiCall("api.Invoice.getSummary",{invoiceId:this.invoiceInfo.id},(function(t){e.$hideLoading(),"9999"==t.ErrorCode?(e.drawer=!0,e.drawerinfo=t.Data.Results):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))},handleScroll:function(){var t=this,e=this.$refs.myScrollbar1.wrap;$(".invoice #invoiceContainer").offset().top,$(".invoice #invoiceContainer").outerHeight();e.onscroll=function(){$(".el-popover").remove(),localStorage.getItem("invocieTourFlag")&&($(".el-scrollbar__wrap").scrollTop()>=410?$(".el-scrollbar__wrap").scrollTop()+$(".el-scrollbar__wrap").height()>=$("#invoiceContainer").height()+$(window).height()-400?t.noMore&&setTimeout((function(){$(".table-fixed").removeClass("scrolling"),$(".invoice-top").css({display:"block",height:"0"})}),100):setTimeout((function(){$(".table-fixed").addClass("scrolling"),$(".invoice-top").css({display:"none",height:"0"})}),100):setTimeout((function(){$(".table-fixed").removeClass("scrolling"),$(".invoice-top").css("display","block"),0==$(".el-scrollbar__wrap").scrollTop()&&$(".invoice-top").css({display:"block",height:"60px"})}),100)),$(".el-scrollbar__wrap").scrollTop()+$(".el-scrollbar__wrap").height()>=$("#invoiceContainer").height()-10?t.noMore&&setTimeout((function(){$(".page-footer-fixed").css("display","none")}),100):setTimeout((function(){$(".page-footer-fixed").css("display","block")}),100),$(".el-scrollbar__wrap").scrollTop()+$(".el-scrollbar__wrap").height()>=$(".el-scrollbar__view").height()-100&&t.noMore&&setTimeout((function(){t.operateLog.length?t.nextPage():t.getOperateLog(t.invoiceInfo.id),t.getMessages(t.invoiceInfo.id)}),300)}},previewInvoice:function(){var t=this.$router.resolve({name:"preview",query:{uniCode:this.uniCode,preview:1}}),e=t.href;window.open(e,"_blank")},setPayment:function(){var t=this;this.invoiceTour&&(this.$showLoading(),this.$apiCall("api.Invoice.setPayment",{invoiceId:this.invoiceInfo.id,paymentType:this.paymentType,payUrl:this.payUrl,platformRate:this.platformRate},(function(e){t.$hideLoading(),"9999"==e.ErrorCode?(t.$elementMessage(t.$t("invoice.successPayment"),"success"),t.getData()):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))})))},getSkuInfo2:function(t,e,i){var o=this;if(this.invoiceTour){window.lazyGetSkuInfo2&&window.clearTimeout(window.lazyGetSkuInfo2);var s="popoverSkuGroup-".concat(e);this.invoiceData.forEach((function(t,e){var i="popoverSkuGroup-".concat(e);o.$refs[i]&&o.$refs[i].doClose()})),window.lazyGetSkuInfo2=setTimeout((function(){o.$apiCall("api.Invoice.getSameCnt",{invoiceId:o.invoiceInfo.id,customerSku:t.customerSku,type:"sku"},(function(e){"9999"==e.ErrorCode?(o.$set(t,"sameCntSku",e.Data.Results.sameCnt),o.$set(t,"noneCntSku",e.Data.Results.noneCnt),e.Data.Results.sameCnt>1&&o.$refs[s]&&o.$refs[s].doShow()):(o.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||o.$userFailure(o))}))}),400)}},getSkuInfo:function(t,e,i){var o=this;if(this.invoiceTour){window.lazyGetSkuInfo&&window.clearTimeout(window.lazyGetSkuInfo);var s="popoverSku-".concat(e);this.invoiceData.forEach((function(t,e){var i="popoverSku-".concat(e);o.$refs[i]&&o.$refs[i].doClose()})),window.lazyGetSkuInfo=setTimeout((function(){o.$apiCall("api.Invoice.getSameCnt",{invoiceId:o.invoiceInfo.id,customerSku:t.customerSku,type:"sku"},(function(e){"9999"==e.ErrorCode?(o.$set(t,"sameCntSku",e.Data.Results.sameCnt),o.$set(t,"noneCntSku",e.Data.Results.noneCnt),e.Data.Results.sameCnt>1&&o.$refs[s]&&o.$refs[s].doShow()):(o.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||o.$userFailure(o))}))}),400)}},getPriceInfo:function(t,e,i){var o=this;if(this.invoiceTour){if(window.lazyGetPriceInfo&&window.clearTimeout(window.lazyGetPriceInfo),"popoverPriceGroup"==i){var s="popoverPriceGroup-".concat(e);return this.invoiceData.forEach((function(t,e){var i="popoverPriceGroup-".concat(e);o.$refs[i]&&o.$refs[i].doClose()})),void(t.cnt>1&&this.$refs[s]&&this.$refs[s].doShow())}var a="popoverPrice-".concat(e);this.invoiceData.forEach((function(t,e){var i="popoverPrice-".concat(e);o.$refs[i]&&o.$refs[i].doClose()})),window.lazyGetPriceInfo=setTimeout((function(){o.$apiCall("api.Invoice.getSameCnt",{invoiceId:o.invoiceInfo.id,customerSku:t.customerSku,type:"price"},(function(e){"9999"==e.ErrorCode?(o.$set(t,"sameCntPrice",e.Data.Results.sameCnt),o.$set(t,"noneCntPrice",e.Data.Results.noneCnt),e.Data.Results.sameCnt>1&&o.$refs[a]&&o.$refs[a].doShow()):(o.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||o.$userFailure(o))}))}),400)}},getPriceInfo2:function(t,e,i){var o=this;if(this.invoiceTour){window.lazyGetPriceInfo2&&window.clearTimeout(window.lazyGetPriceInfo2);var s="popoverPriceGroup-".concat(e);this.invoiceData.forEach((function(t,e){var i="popoverPriceGroup-".concat(e);o.$refs[i]&&o.$refs[i].doClose()})),window.lazyGetPriceInfo2=setTimeout((function(){o.$apiCall("api.Invoice.getSameCnt",{invoiceId:o.invoiceInfo.id,customerSku:t.customerSku,type:"price"},(function(e){"9999"==e.ErrorCode?(o.$set(t,"sameCntPrice",e.Data.Results.sameCnt),o.$set(t,"noneCntPrice",e.Data.Results.noneCnt),e.Data.Results.sameCnt>1&&o.$refs[s]&&o.$refs[s].doShow()):(o.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||o.$userFailure(o))}))}),400)}},selectEmoji:function(t){console.log(t)},toFixed:function(t){return t&&""!=t?Number(t).toFixed(2):"0.00"},changeShippingAmount:function(){var t=this;this.$apiCall("api.Invoice.changeAmount",{invoiceId:this.invoiceInfo.id,shippingAmount:this.shippingAmount},(function(e){"9999"==e.ErrorCode?(t.shippingAmount=e.Data.Results.shippingAmount?t.toFixed(e.Data.Results.shippingAmount):"",t.totalAmount=e.Data.Results.totalAmount?t.toFixed(e.Data.Results.totalAmount):"",t.realAmount=e.Data.Results.realAmount?t.toFixed(e.Data.Results.realAmount):"",Number(t.realAmount)<Number(t.totalAmount)&&Number(t.realAmount)>0?t.discount=t.toFixed(Number(t.totalAmount)-Number(t.realAmount)):t.discount=0):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))},changeRealAmount:function(){var t=this;if(Number(this.realAmount)>Number(this.totalAmount))return this.$elementMessage(this.$t("invoice.smallnum"),"error"),void(this.discount=0);this.$apiCall("api.Invoice.changeAmount",{invoiceId:this.invoiceInfo.id,realAmount:this.realAmount},(function(e){"9999"==e.ErrorCode?(t.shippingAmount=e.Data.Results.shippingAmount?t.toFixed(e.Data.Results.shippingAmount):"",t.totalAmount=e.Data.Results.totalAmount?t.toFixed(e.Data.Results.totalAmount):"",t.realAmount=e.Data.Results.realAmount?t.toFixed(e.Data.Results.realAmount):"",Number(t.realAmount)<Number(t.totalAmount)&&Number(t.realAmount)>0?t.discount=t.toFixed(Number(t.totalAmount)-Number(t.realAmount)):t.discount=0):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))},setResource:function(t){this.form.resource=t},setDefaultResource:function(){this.stopResource=1},setStopResource:function(t){this.stopResource=t},setStop:function(t,e){var i=this;this.$showLoading();var o={fulfillStatus:e,invoiceId:this.invoiceInfo.id,reason:this.stopResource};if(null==t.allItems)o=Object(a["a"])(Object(a["a"])({},o),{},{itemId:t.id});else{var s=[];t.allItems.forEach((function(t){"1"===t.fulfillStatus&&s.push(t.id)})),o=Object(a["a"])(Object(a["a"])({},o),{},{itemIds:s})}this.$apiCall("api.Invoice.setFulfill",o,(function(o){i.$hideLoading(),"9999"==o.ErrorCode?(i.itemAmount=o.Data.Results.itemAmount?i.toFixed(o.Data.Results.itemAmount):"",i.totalAmount=o.Data.Results.totalAmount?i.toFixed(o.Data.Results.totalAmount):"",i.realAmount=o.Data.Results.realAmount?i.toFixed(o.Data.Results.realAmount):"",$(".el-popover").remove(),i.$elementMessage(i.$t("invoice.successModification"),"success"),i.getCnt(i.invoiceInfo.id),null==t.allItems?i.updateSuccessOnly(t.id):(i.invoiceData=i.invoiceData.map((function(i){return t.customerSku===i.customerSku?Object(a["a"])(Object(a["a"])({},i),{},{fulfillStatus:e.toString()}):i})),i.expands=i.expands.filter((function(e){return e!==t.id})))):(i.$elementMessage(o.Message,"error"),"1002"!=o.ErrorCode&&"1003"!=o.ErrorCode||i.$userFailure(i))}))},updateSuccessOnly:function(t){var e=this;this.getData(),console.log(3,{invoiceId:this.invoiceInfo.id,id:t}),this.$apiCall("api.Invoice.getItems",{invoiceId:this.invoiceInfo.id,id:t},(function(i){if("9999"==i.ErrorCode){if(0==i.Data.Results.length)return;e.invoiceData.forEach((function(o,s){o.id==t&&e.invoiceData.splice(s,1,i.Data.Results[0])}))}else e.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||e.$userFailure(e)}))},changeSkuBatch:function(t){var e=this;this.invoiceTour&&(t.sku?(2!=this.form.resource||0!=t.sameCntSku)&&(1!=this.form.resource||0!=t.noneCntSku)?(window.lazySkuBatch&&window.clearTimeout(window.lazySkuBatch),window.lazySkuBatch=setTimeout((function(){var i={type:1==e.form.resource?"onlyNone":"batch",invoiceId:e.invoiceInfo.id,customerSku:t.customerSku,sku:t.sku,price:t.price};2==e.tabActive&&(i.fromGroup=!0,i.type="batch"),e.$apiCall("api.Invoice.setSku",i,(function(i){"9999"==i.ErrorCode?($(".el-popover").remove(),e.$elementMessage(e.$t("invoice.successsetsku"),"success"),1==e.form.resource?e.invoiceData.forEach((function(i,o){i.customerSku!=t.customerSku||i.sku||2==i.fulfillStatus||e.$set(i,"sku",t.sku)})):e.invoiceData.forEach((function(i,o){i.customerSku==t.customerSku&&2!=i.fulfillStatus&&e.$set(i,"sku",t.sku)})),e.getCnt(e.invoiceInfo.id)):(e.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||e.$userFailure(e))}))}),400)):$(".el-popover").remove():this.$elementMessage(this.$t("invoice.fillsku"),"error"))},changeSkuFn:function(t,e,i){var o=this;this.invoiceTour&&(t.sku?(window.lazySku&&window.clearTimeout(window.lazySku),window.lazySku=setTimeout((function(){var e={type:"onlyOne",invoiceId:o.invoiceInfo.id,customerSku:t.customerSku,sku:t.sku,itemId:t.id,price:t.price};2==o.tabActive&&(e.fromGroup=!0,e.type="batch"),o.$apiCall("api.Invoice.setSku",e,(function(e){"9999"==e.ErrorCode?(o.getCnt(o.invoiceInfo.id),o.invoiceData.forEach((function(e,i){e.id==t.id&&e.allItems&&e.allItems.length&&2==o.tabActive&&o.updateAllSuccess(i,"sku")})),"close"==i&&$(".el-popover").remove()):(o.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||o.$userFailure(o))}))}),400)):this.$elementMessage(this.$t("invoice.fillsku"),"error"))},changeSkuFnBySub:function(t){var e=this;this.invoiceTour&&(t.sku?(window.lazySkuSub&&window.clearTimeout(window.lazySkuSub),window.lazySkuSub=setTimeout((function(){var i={type:"onlyOne",invoiceId:e.invoiceInfo.id,customerSku:t.customerSku,sku:t.sku,itemId:t.id,price:t.price};e.$apiCall("api.Invoice.setSku",i,(function(t){"9999"==t.ErrorCode?e.getCnt(e.invoiceInfo.id):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))}),400)):this.$elementMessage(this.$t("invoice.fillsku"),"error"))},changePriceBatch:function(t){var e=this;this.invoiceTour&&t.price&&((2!=this.formPrice.resource||0!=t.sameCntPrice)&&(1!=this.formPrice.resource||0!=t.noneCntPrice)?(window.lazyPriceBatch&&window.clearTimeout(window.lazyPriceBatch),window.lazyPriceBatch=setTimeout((function(){var i={type:1==e.formPrice.resource?"onlyNone":"batch",invoiceId:e.invoiceInfo.id,customerSku:t.customerSku,price:t.price,sku:t.sku};2==e.tabActive&&(i.fromGroup=!0,i.type="batch"),e.$apiCall("api.Invoice.setPrice",i,(function(i){"9999"==i.ErrorCode?($(".el-popover").remove(),e.$elementMessage(e.$t("invoice.successsetprice"),"success"),1==e.formPrice.resource?e.invoiceData.forEach((function(i,o){i.customerSku!=t.customerSku||i.price||2==i.fulfillStatus||(e.$set(i,"price",Number(t.price).toFixed(2)),i.price?2!=i.fulfillStatus?e.$set(i,"amount",(Number(i.quantity)*Number(i.price)).toFixed(2)):e.$set(i,"amount","0.00"):e.$set(i,"amount",""))})):e.invoiceData.forEach((function(i,o){i.customerSku==t.customerSku&&2!=i.fulfillStatus&&(e.$set(i,"price",Number(t.price).toFixed(2)),i.price?2!=i.fulfillStatus?e.$set(i,"amount",(Number(i.quantity)*Number(i.price)).toFixed(2)):e.$set(i,"amount","0.00"):e.$set(i,"amount",""))})),e.itemAmount=i.Data.Results.itemAmount?e.toFixed(i.Data.Results.itemAmount):"",e.totalAmount=i.Data.Results.totalAmount?e.toFixed(i.Data.Results.totalAmount):"",e.realAmount=i.Data.Results.realAmount?e.toFixed(i.Data.Results.realAmount):"",e.getCnt(e.invoiceInfo.id)):(e.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||e.$userFailure(e))}))}),400)):$(".el-popover").remove())},changePriceFn:function(t,e,i){var o=this;this.expands.length&&(this.expands=[]),this.invoiceTour&&t.price&&(window.lazyPrice&&window.clearTimeout(window.lazyPrice),window.lazyPrice=setTimeout((function(){var e={type:"onlyOne",invoiceId:o.invoiceInfo.id,customerSku:t.customerSku,price:t.price,itemId:t.id,sku:t.sku};2==o.tabActive&&(e.fromGroup=!0,e.type="batch"),o.$apiCall("api.Invoice.setPrice",e,(function(e){"9999"==e.ErrorCode?(o.invoiceData.forEach((function(e,i){e.id==t.id&&(2!=e.fulfillStatus&&(o.$set(e,"price",Number(t.price).toFixed(2)),e.price?2!=e.fulfillStatus?o.$set(e,"amount",(Number(e.quantity)*Number(e.price)).toFixed(2)):o.$set(e,"amount","0.00"):o.$set(e,"amount","")),e.allItems&&e.allItems.length&&2==o.tabActive&&o.updateAllSuccess(i,"price"))})),o.itemAmount=e.Data.Results.itemAmount?o.toFixed(e.Data.Results.itemAmount):"",o.totalAmount=e.Data.Results.totalAmount?o.toFixed(e.Data.Results.totalAmount):"",o.realAmount=e.Data.Results.realAmount?o.toFixed(e.Data.Results.realAmount):"",o.getCnt(o.invoiceInfo.id),"close"==i&&$(".el-popover").remove()):(o.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||o.$userFailure(o))}))}),400))},changePriceTotalFn:function(t,e){var i=this;this.invoiceTour&&(window.lazyPriceTotal&&window.clearTimeout(window.lazyPriceTotal),window.lazyPriceTotal=setTimeout((function(){var e={type:"onlyOne",invoiceId:i.invoiceInfo.id,customerSku:t.customerSku,totalPrice:t.amount,itemId:t.id,sku:t.sku};i.$apiCall("api.Invoice.setPrice",e,(function(e){"9999"==e.ErrorCode?(i.invoiceData.forEach((function(o,s){o.id==t.id&&2!=o.fulfillStatus&&(i.$set(o,"price",Number(e.Data.Results.price).toFixed(2)),o.price?2!=o.fulfillStatus?i.$set(o,"amount",(Number(o.quantity)*Number(o.price)).toFixed(2)):i.$set(o,"amount","0.00"):i.$set(o,"amount",""))})),i.itemAmount=e.Data.Results.itemAmount?i.toFixed(e.Data.Results.itemAmount):"",i.totalAmount=e.Data.Results.totalAmount?i.toFixed(e.Data.Results.totalAmount):"",i.realAmount=e.Data.Results.realAmount?i.toFixed(e.Data.Results.realAmount):"",i.getCnt(i.invoiceInfo.id)):(i.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||i.$userFailure(i))}))}),400))},changePriceTotalFnBySub:function(t,e){var i=this,o=t.$index;window.lazyPriceTotalSub&&window.clearTimeout(window.lazyPriceTotalSub),window.lazyPriceTotalSub=setTimeout((function(){var t={type:"onlyOne",invoiceId:i.invoiceInfo.id,customerSku:e.customerSku,totalPrice:e.amount,itemId:e.id,sku:e.sku};i.$apiCall("api.Invoice.setPrice",t,(function(t){"9999"==t.ErrorCode?(i.invoiceData[o].allItems.forEach((function(o,s){o.id==e.id&&(i.$set(o,"price",Number(t.Data.Results.price).toFixed(2)),o.price?2!=o.fulfillStatus?i.$set(o,"amount",(Number(o.quantity)*Number(o.price)).toFixed(2)):i.$set(o,"amount","0.00"):i.$set(o,"amount",""))})),i.itemAmount=t.Data.Results.itemAmount?i.toFixed(t.Data.Results.itemAmount):"",i.totalAmount=t.Data.Results.totalAmount?i.toFixed(t.Data.Results.totalAmount):"",i.realAmount=t.Data.Results.realAmount?i.toFixed(t.Data.Results.realAmount):"",i.getCnt(i.invoiceInfo.id),i.updateSuccess(o)):(i.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||i.$userFailure(i))}))}),400)},updateAllSuccess:function(t,e){var i=this;this.invoiceData[t].allItems.map((function(o){2!=o.fulfillStatus&&("sku"==e?i.$set(o,"sku",i.invoiceData[t].sku):(i.$set(o,"price",i.invoiceData[t].price),o.price?2!=o.fulfillStatus?i.$set(o,"amount",(Number(o.quantity)*Number(o.price)).toFixed(2)):i.$set(o,"amount","0.00"):i.$set(o,"amount","")))}))},setPriceResource:function(t){this.formPrice.resource=t},removelogo:function(){var t=this;this.pageLoading=!0,this.$apiCall("api.User.changeByUser",{invoiceId:this.invoiceInfo.id,logo:""},(function(e){t.pageLoading=!1,"9999"==e.ErrorCode?(t.$elementMessage(t.$t("invoice.successdeleted"),"success"),t.getData()):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))},handleUploadChange:function(t){this.uploadfileList=[],this.uploadfileList.push(t)},submitUpload:function(){var t=this;if("fourth"==this.exportInvoiceType)return this.drawer=!1,void setTimeout((function(){t.$router.push({name:"importData",query:{rid:t.invoiceInfo.relationshipId,id:t.invoiceInfo.id}}),localStorage.removeItem("fromPageReload")}),100);if(this.uploadfileList.length){this.uploadLoading=!0;var e=this.uploadfileList[0].raw;0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var i=function(t){document.getElementById("ifilePro").src=t},o="api.Invoice.deliverImport",s={invoiceId:this.invoiceInfo.id,"@file":e};this.$apiCall(o,s,(function(e){t.uploadLoading=!1,"9999"==e.ErrorCode?(t.drawer=!1,t.$elementMessage(t.$t("invoice.successImport"),"success"),i(e.Data.Results.file),t.page=1,t.getDataAll()):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))}else this.$elementMessage(this.$t("invoice.selectfile"),"error")},uploadSectionFile2:function(t){var e=this,i=t.file,o=i.size/1024/1024<.5;o?this.$apiCall("api.User.uploadImg",{"@file":i},(function(t){"9999"==t.ErrorCode?e.fileList.push({name:"test",url:t.Data.Results.imgUrl}):(e.pageLoading=!1,e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))})):this.$message.error(this.$t("invoice.size500"))},uploadSectionFile:function(t){var e=this,i=t.file,o=i.size/1024/1024<.5;o?(this.pageLoading=!0,this.$apiCall("api.User.uploadImg",{"@file":i},(function(t){"9999"==t.ErrorCode?e.changeLogoByUser(t.Data.Results.imgUrl):(e.pageLoading=!1,e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))):this.$message.error(this.$t("invoice.size500picture"))},changeLogoByUser:function(t){var e=this;this.$apiCall("api.User.changeByUser",{invoiceId:this.invoiceInfo.id,logo:t},(function(t){e.pageLoading=!1,"9999"==t.ErrorCode?(e.$elementMessage(e.$t("invoice.successModification"),"success"),e.getData()):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))},tabcChange:function(t){switch(this.invoiceData=[],this.tabActive=Number(t),t=Number(t),this.getCnt(this.invoiceInfo.id),t){case 1:this.type="all",this.showType=1;break;case 2:this.type="sku";break;case 3:this.tabActive=1,this.type="notBind",this.showType=1;break;case 4:this.type="notDeliver",this.showType=1;break;case 5:this.type="noQuantity",this.showType=1;break;case 6:this.tabActive=2,this.type="groupNotBind",this.showType=1;break;case 7:this.type="noQuantity",this.showType=1;break;case 8:this.type="deliver",this.showType=1;break;case 9:this.type="abnormal",this.showType=1;break;default:break}this.page=1,this.getInvoiceData(this.invoiceInfo.id)},changeTabByTip:function(){1==this.tabActive?this.type="notBind":this.type="groupNotBind",this.invoiceData=[],this.page=1,this.getInvoiceData(this.invoiceInfo.id)},onCopy:function(t){this.$elementMessage(this.$t("successfullyToClipboard"),"success")},onError:function(t){this.$elementMessage(this.$t("failedToClipboard"),"error")},load:function(){var t=this,e=$(".el-scrollbar__wrap").scrollTop();if(1!=this.page&&this.invoiceInfo){this.tabActive;if(this.getListFlag&&!(this.page>this.totalPage)&&this.invoiceTour){this.loading=!0,this.getListFlag=!1;var i={invoiceId:this.invoiceInfo.id,type:this.type,page:this.page,rowsPerPage:this.rowsPerPage};"abnormal"==this.type&&(i.type="all",i.isAbnormal=1),this.searchTrack&&(i.trackNumber=this.searchNameInput),this.searchName&&(i.keySearch=this.searchNameInput),this.$apiCall("api.Invoice.getItems",i,(function(i){$(".el-scrollbar__wrap").animate({scrollTop:e},10),t.getListFlag=!0,"9999"==i.ErrorCode?(t.totalPage=i.Data.Pagination.totalPage,t.totalCount=i.Data.Pagination.totalCount,i.Data.Results.forEach((function(e,i){e.price?2!=e.fulfillStatus?t.$set(e,"amount",(Number(e.quantity)*Number(e.price)).toFixed(2)):t.$set(e,"amount","0.00"):t.$set(e,"amount",""),null==e.shippingFee&&t.$set(e,"shippingFee",void 0),t.invoiceData.push(e)})),setTimeout((function(){t.loading=!1,t.page++}),300)):(t.loading=!1,t.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||t.$userFailure(t))}))}}},isCollapseFn:function(){this.isCollapse=!this.isCollapse},handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},getInvoiceData:function(t,e){var i=this,o={invoiceId:t,type:this.type,page:this.page,rowsPerPage:this.rowsPerPage};"abnormal"==this.type&&(o.type="all",o.isAbnormal=1),this.searchTrack&&(o.trackNumber=e),this.searchName&&(o.keySearch=e),this.$showLoading(),this.$apiCall("api.Invoice.getItems",o,(function(t){if(i.$nextTick((function(){i.$hideLoading()})),i.loading=!1,"9999"==t.ErrorCode){if(i.invoiceData=[],i.transferData=[],i.totalPage=t.Data.Pagination.totalPage,i.totalCount=t.Data.Pagination.totalCount,1==i.totalPage&&(i.getOperateLog(i.invoiceInfo.id),i.getMessages(i.invoiceInfo.id)),t.Data.Results.forEach((function(t,e){t.allItems&&t.allItems.length>0&&(i.$set(t,"displayItems",t.allItems.slice(0,50)),i.$set(t,"displayItemsPage",1)),i.$set(t,"previewList",[]),t.imgUrl&&t.previewList.push(t.imgUrl),t.price?2!=t.fulfillStatus?i.$set(t,"amount",(Number(t.quantity)*Number(t.price)).toFixed(2)):i.$set(t,"amount","0.00"):i.$set(t,"amount",""),null==t.shippingFee&&i.$set(t,"shippingFee",void 0),i.invoiceData.push(t)})),i.invoiceData.forEach((function(t,e){i.transferData.push(Object(a["a"])({label:"".concat(t.sku),key:t.id},t))})),!localStorage.getItem("invocieTourFlag")&&2!=i.tabActive){var e=[];e.push(i.invoiceData.shift()),i.invoiceData=e,setTimeout((function(){if(!document.querySelectorAll(".step-btn-4").length)for(var t=0;t<i.steps.length;t++)".step-btn-4"==i.steps[t].target&&(i.steps.splice(t,1),t--);i.$tours["invoiceTour"].start()}),1e3)}i.$refs.myScrollbar1.wrap.scrollTop=0}else i.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||i.$userFailure(i)}))},getCnt:function(t){var e=this;this.$apiCall("api.Invoice.getItemsCnt",{invoiceId:t},(function(t){"9999"==t.ErrorCode?(e.invoiceCnt=t.Data.Results,e.invoiceCnt.notBindCnt>0&&(e.stepActive=2),0==e.invoiceCnt.notBindCnt&&(e.stepActive=3),1==e.invoiceInfo.payStatus&&(e.stepActive=4),0==e.invoiceCnt.notDeliverCnt&&(e.stepActive=5)):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))},groupBy:function(t){for(var e={},i=[],o=0;o<t.length;o++){var s=t[o];if(e[s.date])for(var a=0;a<i.length;a++){var n=i[a];if(n.date==s.date){n.listInfo.push(s);break}}else i.push({date:s.date,listInfo:[s]}),e[s.date]=s}return i},getOperateLog:function(t){var e=this,i={invoiceId:t};"en"==this.$i18n.locale&&(i.lang="EN"),this.$apiCall("api.Invoice.getOperateLog",i,(function(t){"9999"==t.ErrorCode?(e.operateLog=t.Data.Results,e.operateLog.forEach((function(t){e.$set(t,"date",e.$moment(1e3*t.time).format("MMMM Do")),e.$set(t,"datetime",e.$moment(1e3*t.time).format("h:mm a"))})),e.totalPageLog=Math.ceil(e.operateLog.length/e.pageSizeLog),e.totalPageLog=0==e.totalPageLog?1:e.totalPageLog,e.setCurrentPageData()):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))},setCurrentPageData:function(){this.currentPageLog,this.pageSizeLog;var t=this.currentPageLog*this.pageSizeLog;this.currentPageDataLog=this.groupBy(this.operateLog.slice(0,t))},nextPage:function(){this.getLogFlag&&this.currentPageLog!=this.totalPageLog&&(this.getLogFlag=!1,this.currentPageLog++,this.setCurrentPageData(),this.getLogFlag=!0)},getMessages:function(t){var e=this;this.getMsgFlag&&(this.msgpage>this.msgtotalPage||(this.getMsgFlag=!1,this.$apiCall("api.Invoice.getMessages",{invoiceId:t,page:this.msgpage,rowsPerPage:this.msgrowsPerPage},(function(t){e.getMsgFlag=!0,"9999"==t.ErrorCode?(e.msgtotalPage=t.Data.Pagination.totalPage,e.msgtotalCount=t.Data.Pagination.totalCount,t.Data.Results.forEach((function(t,i){e.messages.push(t)})),e.$moment().locale("en"),e.messages.forEach((function(t){e.$set(t,"date",e.$moment(t.timeCreated).format("MMMM Do")),e.$set(t,"datetime",e.$moment(t.timeCreated).format("h:mm a")),e.$set(t,"vname",t.vendorName?t.vendorName.substr(0,1):"n"),e.$set(t,"cname",t.customerName?t.customerName.substr(0,1):"n")})),e.currentmessages=e.groupBy(e.messages),e.currentmessages.forEach((function(t){t.listInfo.forEach((function(t){e.$set(t,"content",e.forMatMsg(t.content))}))})),e.msgpage++):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))))},forMatMsg:function(t){var e=t.split("emoji"),i="";return e.length>0?e.forEach((function(t){""!=t&&(0===t.indexOf(":")&&t.lastIndexOf(":")===t.length-1&&(t=$.emojiarea.createIcon($.emojiarea.icons[t])),i+="<span>".concat(t,"</span>"))})):i="<span>".concat(t,"</span>"),i},addMessage:function(){var t=this,e=[];this.fileList.length&&this.fileList.forEach((function(t){e.push(t.url)}));var i=$(".emoji-wysiwyg-editor").html();if(i||this.fileList.length){if(i){var o=/<img.*?(?:>|\/>)/gi,s=/alt=[\'\"]?([^\'\"]*)[\'\"]?/i,a=i.match(o);if(a)for(var n=0;n<a.length;n++){var r=a[n].match(s);r&&r[1]&&(i=i.replace(a[n],"emoji"+r[1]+"emoji"))}else;}this.$showLoading(),this.$apiCall("api.Invoice.addMessage",{invoiceId:this.invoiceInfo.id,content:i,images:e},(function(e){t.$hideLoading(),"9999"==e.ErrorCode?(t.$elementMessage(t.$t("invoice.messageSend"),"success"),t.msgContent="",$(".emoji-wysiwyg-editor").empty(),t.fileList=[],t.msgpage=1,t.messages=[],t.$apiCall("api.Invoice.getMessages",{invoiceId:t.invoiceInfo.id,page:t.msgpage,rowsPerPage:t.msgrowsPerPage},(function(e){"9999"==e.ErrorCode?(t.msgtotalPage=e.Data.Pagination.totalPage,t.msgtotalCount=e.Data.Pagination.totalCount,e.Data.Results.forEach((function(e,i){t.messages.push(e)})),t.$moment().locale("en"),t.messages.forEach((function(e){t.$set(e,"date",t.$moment(e.timeCreated).format("MMMM Do")),t.$set(e,"datetime",t.$moment(e.timeCreated).format("h:mm a")),t.$set(e,"vname",e.vendorName?e.vendorName.substr(0,1):"n"),t.$set(e,"cname",e.customerName?e.customerName.substr(0,1):"n")})),t.currentmessages=t.groupBy(t.messages),t.currentmessages.forEach((function(e){e.listInfo.forEach((function(e){t.$set(e,"content",t.forMatMsg(e.content))}))})),t.msgpage++):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))}else this.$elementMessage(this.$t("invoice.messageFill"),"error")},removeMsgImg:function(t){this.fileList.splice(t,1)},openLogin:function(){this.loginShow=!0},getDataAll:function(){var t=this;this.$showLoading(),$(".el-scrollbar__wrap").scrollTop(0),this.page=1,this.showLogo=!1,this.logoUrl="",this.$apiCall("api.Invoice.getOne",{uniCode:this.uniCode},(function(e){if("9999"==e.ErrorCode){if(t.invoiceInfo=e.Data.Results,t.getCntCountry(),t.showItemPrice="1"==t.invoiceInfo.showItemPrice,"20010699"==t.invoiceInfo.code)t.$hideLoading(),t.loginShow=!0,t.loginRId=t.invoiceInfo,t.loginType=3;else if("20010698"==t.invoiceInfo.code)t.$hideLoading(),t.loginShow=!0,t.loginRId=t.invoiceInfo,t.loginType=4;else{var i=localStorage.getItem("apiUserId")?localStorage.getItem("apiUserId"):"",o=localStorage.getItem("apiUserToken")?localStorage.getItem("apiUserToken"):"";i&&o?(1==t.page&&t.getInvoiceData(t.invoiceInfo.id),t.getCnt(t.invoiceInfo.id),t.getRelationship(),t.showTopTip=!0):(t.iframeId!==t.invoiceInfo.customerId&&(t.$hideLoading(),t.loginShow=!0,t.loginRId=t.invoiceInfo,Number(t.invoiceInfo.vendorId)>0?t.loginType=1:t.loginType=2),t.getInvoiceData(t.invoiceInfo.id))}t.shopName=t.invoiceInfo.shopName?t.invoiceInfo.shopName:"",t.shareTitle=t.invoiceInfo.remark?t.invoiceInfo.remark.title:"",t.shareDesc=t.invoiceInfo.remark?t.invoiceInfo.remark.desc:"",t.invoiceInfo&&t.invoiceInfo.logo&&(t.showLogo=!0,t.logoUrl=t.invoiceInfo.logo),t.payUrl=t.invoiceInfo.payUrl?t.invoiceInfo.payUrl:"",t.platformRate=t.invoiceInfo.platformRate&&t.invoiceInfo.platformRate>0?t.invoiceInfo.platformRate:"",t.paymentType=t.invoiceInfo.paymentType?t.invoiceInfo.paymentType:"",t.shippingAmount=t.invoiceInfo.shippingAmount?t.toFixed(t.invoiceInfo.shippingAmount):"",t.itemAmount=t.invoiceInfo.itemAmount?t.toFixed(t.invoiceInfo.itemAmount):"",t.totalAmount=t.invoiceInfo.totalAmount?t.toFixed(t.invoiceInfo.totalAmount):"",t.realAmount=t.invoiceInfo.realAmount?t.toFixed(t.invoiceInfo.realAmount):""}else t.$hideLoading(),t.$elementMessage(e.Message,"error")}))},getData:function(){var t=this;this.showLogo=!1,this.logoUrl="",this.$apiCall("api.Invoice.getOne",{uniCode:this.uniCode},(function(e){"9999"==e.ErrorCode?(t.invoiceInfo=e.Data.Results,t.shopName=t.invoiceInfo.shopName?t.invoiceInfo.shopName:"",t.shareTitle=t.invoiceInfo.remark?t.invoiceInfo.remark.title:"",t.shareDesc=t.invoiceInfo.remark?t.invoiceInfo.remark.desc:"",t.invoiceInfo.logo?(t.showLogo=!0,t.logoUrl=t.invoiceInfo.logo):(t.showLogo=!1,t.logoUrl=""),t.payUrl=t.invoiceInfo.payUrl?t.invoiceInfo.payUrl:"",t.platformRate=t.invoiceInfo.platformRate&&t.invoiceInfo.platformRate>0?t.invoiceInfo.platformRate:"",t.paymentType=t.invoiceInfo.paymentType?t.invoiceInfo.paymentType:"",t.shippingAmount=t.invoiceInfo.shippingAmount?t.toFixed(t.invoiceInfo.shippingAmount):"",t.itemAmount=t.invoiceInfo.itemAmount?t.toFixed(t.invoiceInfo.itemAmount):"",t.totalAmount=t.invoiceInfo.totalAmount?t.toFixed(t.invoiceInfo.totalAmount):"",t.realAmount=t.invoiceInfo.realAmount?t.toFixed(t.invoiceInfo.realAmount):""):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))},getRelationship:function(){var t=this;this.$apiCall("api.Relationship.getByName",{},(function(e){"9999"==e.ErrorCode?t.relationship=e.Data.Results:(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))},handleChange:function(t,e){var i=this;setTimeout((function(){i.$apiCall("api.Invoice.changeQuantity",{invoiceId:i.invoiceInfo.id,itemId:t.id,quantity:t.quantity},(function(e){"9999"==e.ErrorCode?(i.itemAmount=e.Data.Results.itemAmount?i.toFixed(e.Data.Results.itemAmount):"",i.totalAmount=e.Data.Results.totalAmount?i.toFixed(e.Data.Results.totalAmount):"",i.realAmount=e.Data.Results.realAmount?i.toFixed(e.Data.Results.realAmount):"",i.invoiceData.map((function(e){t.id==e.id&&(i.$set(e,"quantity",Number(t.quantity)),e.price?2!=e.fulfillStatus?i.$set(e,"amount",(Number(e.quantity)*Number(e.price)).toFixed(2)):i.$set(e,"amount","0.00"):i.$set(e,"amount",""))})),i.getCnt(i.invoiceInfo.id)):(i.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||i.$userFailure(i))}))}),1e3)},handleChangeBySub:function(t,e,i){var o=this,s=t.$index;setTimeout((function(){o.$apiCall("api.Invoice.changeQuantity",{invoiceId:o.invoiceInfo.id,itemId:e.id,quantity:e.quantity},(function(t){"9999"==t.ErrorCode?(o.itemAmount=t.Data.Results.itemAmount?o.toFixed(t.Data.Results.itemAmount):"",o.totalAmount=t.Data.Results.totalAmount?o.toFixed(t.Data.Results.totalAmount):"",o.realAmount=t.Data.Results.realAmount?o.toFixed(t.Data.Results.realAmount):"",o.invoiceData[s].allItems.map((function(t){e.id==t.id&&o.$set(t,"quantity",Number(e.quantity))})),o.getCnt(o.invoiceInfo.id),o.updateSuccess(s)):(o.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||o.$userFailure(o))}))}),1e3)},changePriceFnBySub:function(t,e){var i=this;if(e.price){var o=t.$index;window.lazyPriceSub&&window.clearTimeout(window.lazyPriceSub),window.lazyPriceSub=setTimeout((function(){var t={type:"onlyOne",invoiceId:i.invoiceInfo.id,customerSku:e.customerSku,price:e.price,itemId:e.id,sku:e.sku};i.$apiCall("api.Invoice.setPrice",t,(function(t){"9999"==t.ErrorCode?(i.invoiceData[o].allItems.forEach((function(t,o){t.id==e.id&&(i.$set(t,"price",Number(e.price).toFixed(2)),t.price?2!=t.fulfillStatus?i.$set(t,"amount",(Number(t.quantity)*Number(t.price)).toFixed(2)):i.$set(t,"amount","0.00"):i.$set(t,"amount",""))})),i.itemAmount=t.Data.Results.itemAmount?i.toFixed(t.Data.Results.itemAmount):"",i.totalAmount=t.Data.Results.totalAmount?i.toFixed(t.Data.Results.totalAmount):"",i.realAmount=t.Data.Results.realAmount?i.toFixed(t.Data.Results.realAmount):"",i.getCnt(i.invoiceInfo.id),i.updateSuccess(o)):(i.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||i.$userFailure(i))}))}),400)}},updateSuccess:function(t){var e=this,i=[],o=[],s=[],a=0,n=0,r=0,l=0;this.invoiceData[t].allItems.map((function(t){t.price?2!=t.fulfillStatus?e.$set(t,"amount",(Number(t.quantity)*Number(t.price)).toFixed(2)):e.$set(t,"amount","0.00"):e.$set(t,"amount",""),i.push(Number(t.price)),o.push(Number(t.amount)),s.push(Number(t.quantity))})),o.forEach((function(t){a+=t})),s.forEach((function(t){n+=t})),r=Math.min.apply(Math,i),l=Math.max.apply(Math,i),this.$set(this.invoiceData[t],"minPrice",Number(r)),this.$set(this.invoiceData[t],"maxPrice",Number(l)),this.$set(this.invoiceData[t],"quantity",Number(n)),this.$set(this.invoiceData[t],"amount",Number(a))},addCustomer:function(){this.addCustomerOpen=!0,this.formNewcustomer.name=this.customerName?this.customerName:""},submitAddcustomer:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.$showLoading(".addCustomer"),e.$apiCall("api.Relationship.addByVendor",{name:e.formNewcustomer.name,remark:e.formNewcustomer.remark,email:e.formNewcustomer.email},(function(t){e.$hideLoading(),"9999"==t.ErrorCode?(e.$elementMessage(e.$t("invoice.addSuccess"),"success"),e.addCustomerOpen=!1,e.getData()):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))}))},editCompany:function(){this.editCompanyInfoOpen=!0,this.formEditCompany.name=this.invoiceInfo.vendorName?this.invoiceInfo.vendorName:"",this.formEditCompany.address=this.invoiceInfo.address?this.invoiceInfo.address:""},submitEditCompany:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.$showLoading(".editCustomer"),e.$apiCall("api.User.changeByUser",{invoiceId:e.invoiceInfo.id,name:e.formEditCompany.name,address:e.formEditCompany.address},(function(t){e.$hideLoading(),"9999"==t.ErrorCode?(e.$elementMessage(e.$t("invoice.successModification"),"success"),e.editCompanyInfoOpen=!1,e.getData()):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))}))},editCompanyByInput:function(){var t=this;window.editCompany&&window.clearTimeout(window.editCompany),window.editCompany=setTimeout((function(){t.$showLoading(),t.$apiCall("api.User.changeByUser",{invoiceId:t.invoiceInfo.id,name:t.editCompanyName,address:t.editCompanyAddress},(function(e){t.$hideLoading(),"9999"==e.ErrorCode?(t.$elementMessage(t.$t("invoice.successModification"),"success"),t.getData()):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))}),400)},editCustomer:function(){this.editCustomerOpen=!0,this.formEditcustomer.name=this.invoiceInfo.customerName?this.invoiceInfo.customerName:"",this.formEditcustomer.email=this.invoiceInfo.customerEmail?this.invoiceInfo.customerEmail:"",this.formEditcustomer.remark=this.invoiceInfo.customerRemark?this.invoiceInfo.customerRemark:"",this.formEditcustomer.id=this.invoiceInfo.relationshipId},submitEditcustomer:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.$showLoading(".editCustomer"),e.$apiCall("api.Relationship.changeByVendor",{relationshipId:e.formEditcustomer.id,name:e.formEditcustomer.name,remark:e.formEditcustomer.remark,email:e.formEditcustomer.email},(function(t){e.$hideLoading(),"9999"==t.ErrorCode?(e.$elementMessage(e.$t("invoice.successCustomer"),"success"),e.editCustomerOpen=!1,e.getData()):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))}))},changeCustomer:function(){var t=this;$(".el-popover").remove(),$("body").off(),this.changeCustomerStatus=!this.changeCustomerStatus,this.customerName="",setTimeout((function(){t.$refs.customerAutocomplete.focus()}),300)},selectCustomer:function(t){var e=this;this.$showLoading(),this.$apiCall("api.Invoice.changeCustomer",{invoiceId:this.invoiceInfo.id,relationshipId:t.id},(function(t){e.$hideLoading(),"9999"==t.ErrorCode?(e.$refs.popoverCustomer.doClose(),e.$elementMessage(e.$t("invoice.successChange"),"success"),e.getData()):(e.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||e.$userFailure(e))}))},changeCustomerName:function(){var t=this;window.lazy&&window.clearTimeout(window.lazy),window.lazy=setTimeout((function(){t.$apiCall("api.Relationship.getByName",{name:t.customerName},(function(e){"9999"==e.ErrorCode?t.relationship=e.Data.Results:(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))}),400)},tableRowClassName:function(t){t.row;var e=t.rowIndex;return this.invoiceData[e]&&2==this.invoiceData[e].fulfillStatus?"warning-row":""},tableRowClassName2:function(t){t.row;var e=t.rowIndex;return this.invoiceData[e]&&2==this.invoiceData[e].fulfillStatus?this.invoiceData[e].allItems&&this.invoiceData[e].allItems.length>0?"showrow warning-row":"hiderow warning-row":this.invoiceData[e].allItems&&this.invoiceData[e].allItems.length>0?"showrow":"hiderow"},getCellClass:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(0===e)return 0==i?"step-sku-1":3==i?"step-price-2":""},getRowClass:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(0===e)return 0==i?"padding-left:10px;text-align:left;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":1==i?"text-align:left;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":4==i||5==i?"padding-right:10px;text-align:right;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":"text-align:center;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;"},getRowClass3:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(0===e)return 0==i?"padding-left:10px;text-align:left;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":1==i||2==i?"text-align:left;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":4==i||5==i?"padding-right:10px;text-align:right;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":"text-align:center;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;"},cellStyle:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;return 0===e?"padding-left:10px;text-align:left;":4==e||5==e?"padding-right:10px;text-align:right;":"text-align:center;"},getRowClass2:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(0===e)return 0==i?"padding-left:10px;text-align:left;white-space:nowrap;font-weight: normal;font-size: 12px;color: #303133;border-right:1px solid rgb(217, 220, 239);background: rgb(233, 233, 235);":1==i?"text-align:left;white-space:nowrap;font-weight: normal;font-size: 12px;color: #303133;border-right:1px solid rgb(217, 220, 239);background: rgb(233, 233, 235);":4==i?"padding-right:10px;text-align:right;white-space:nowrap;font-weight: normal;font-size: 12px;color: #303133;background: rgb(233, 233, 235);":"text-align:center;white-space:nowrap;font-weight: normal;font-size: 12px;color: #303133;border-right:1px solid rgb(217, 220, 239);background: rgb(233, 233, 235);"},cellStyle2:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;return 0===e?"padding-left:10px;text-align:left;":4==e?"padding-right:10px;text-align:right;border-right:none;":"text-align:center;"},commitOtherERP:function(){var t=this;if(""===this.setOtherERPDialog.contents)return this.$message({message:this.$t("ticket.issueCannotEmpty"),type:"error"}),!1;this.setOtherERPDialog.loading=!0,this.$apiCall("api.Comment.addByUser",{contents:this.setOtherERPDialog.contents,attach:this.setOtherERPDialog.attach},(function(e){t.setOtherERPDialog.loading=!1,9999==e.ErrorCode?(t.setOtherERPDialog.isShow=!1,t.setLotPriceDialog.isShow=!1,t.setOtherERPDialog.contents="",t.$message({message:"我们已收到您的留言！我们将尽快在“我的OurMall”>>“客服支持”页面回复您。",type:"success"})):t.$message({message:e.Message,type:"error"})}))},handleChangeOtherERPDialog:function(t){var e=this;this.setOtherERPDialog.loading=!0,this.setOtherERPDialog.uploadLoading=!0,this.$apiCall("api.Comment.uploadAttach",{"@file":t.raw},(function(t){e.setOtherERPDialog.loading=!1,e.setOtherERPDialog.uploadLoading=!1,"9999"==t.ErrorCode?e.setOtherERPDialog.attach.push(t.Data.Results.url):e.$elementMessage(t.Message,"error")}))},handleRemoveOtherERPDialog:function(t,e){var i=this;e.forEach((function(e,o){e.name==t.name&&i.setOtherERPDialog.attach.splice(o,1)}))},changeLang:function(t){t!=this.$i18n.locale&&(this.$i18n.locale=t,localStorage.setItem("ourmallVendorLang",t),document.title=this.$t(this.$route.meta.title)+"- OurMall Dropshipping App")},setShippingFee:function(t){var e=this,i={invoiceId:this.invoiceInfo.id,itemId:t.id,shippingFee:t.shippingFee||0};this.$apiCall("api.Invoice.setShippingFee",i,(function(i){if("9999"==i.ErrorCode){var o=i.Data.Results;e.$set(t,"shippingFee",o.shippingFee),e.realAmount=o.realAmount,e.shippingAmount=o.shippingAmount,e.totalAmount=o.totalAmount}else e.$elementMessage(i.Message,"error")}))},itemTotalAmount:function(t){return(Number(t.quantity)*Number(t.price)+(isNaN(t.shippingFee)?0:Number(t.shippingFee))).toFixed(2)},openSetPayment:function(){this.dialogSetPayment=JSON.parse(this.dialogSetPaymentDefault),this.dialogSetPayment.acceptPayment=this.invoiceInfo.acceptPayment?this.invoiceInfo.acceptPayment.split(","):[],this.dialogSetPayment.payment=Number(this.invoiceInfo.paymentType),this.dialogSetPayment.payUrl=this.invoiceInfo.payUrl,this.dialogSetPayment.isShow=!0},saveSetPayment:function(){var t=this;if(!this.dialogSetPayment.payment)return this.$elementMessage("请选择一个付款方式","error"),!1;var e=this.dialogSetPayment.payUrl;e&&"http://"!=e.substr(0,7).toLowerCase()&&"https://"!=e.substr(0,8).toLowerCase()&&(e="https://"+e),this.dialogSetPayment.loading=!0,this.$apiCall("api.Invoice.setPayment",{invoiceId:this.invoiceInfo.id,paymentType:this.dialogSetPayment.payment,payUrl:e},(function(e){t.dialogSetPayment.loading=!1,"9999"==e.ErrorCode?(t.dialogSetPayment.isShow=!1,t.$elementMessage(t.$t("invoice.successPayment"),"success"),t.getData()):t.$elementMessage(e.Message,"error")}))},setPriceConfirm:function(){var t=this;this.$confirm(this.$t("invoice.是否要确认完成报价?"),"",{confirmButtonText:this.$t("invoice.确定"),cancelButtonText:this.$t("invoice.取消"),type:"warning"}).then((function(){t.$showLoading(),t.$apiCall("api.Invoice.setPriceConfirm",{invoiceId:t.invoiceInfo.id},(function(e){t.$hideLoading(),"9999"==e.ErrorCode?(t.$elementMessage(t.$t("invoice.确认完成报价成功"),"success"),t.getData()):t.$elementMessage(e.Message,"error")}))}))},setRestore:function(t){var e=this;this.$confirm("删除后可在托管店铺中重新生成, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$showLoading(),e.$apiCall("api.Invoice.itemRestore",{itemId:t.id},(function(i){e.$hideLoading(),"9999"==i.ErrorCode&&(e.getCnt(e.invoiceInfo.id),e.invoiceData.some((function(i,o){if(i.id==t.id)return e.invoiceData.splice(o,1),!0})),e.$elementMessage("删除成功","success"))}))}))}}},m=u,v=(i("0d4a"),i("dc2d"),i("65fb"),i("2877")),g=Object(v["a"])(m,o,s,!1,null,"3679a42b",null);e["default"]=g.exports},dc2d:function(t,e,i){"use strict";i("2d90")},fba0:function(t,e,i){}}]);