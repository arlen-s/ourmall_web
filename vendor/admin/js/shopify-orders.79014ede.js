(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shopify-orders"],{"0874":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("ca52"),i("2c45"),i("fd7d"),i("685e"),i("b0a9"),i("abd8"),i("7116");var a=i("84b9");function s(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(a["a"])(t,e):void 0}}},"113c":function(t,e,i){"use strict";i("5087")},"13d0":function(t,e,i){"use strict";i("f930")},1646:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.data.isShow,title:t.$t("app.通知"),width:"700px"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)}}},[i("el-divider"),i("div",{staticClass:"body-wrap"},[i("p",{staticClass:" mg-b-10"},[t._v(t._s(t.$t("app.该站长可处理的单量不足，请联系站长购买单量包。")))]),i("p",{staticClass:" mg-b-15"},[t._v("( "+t._s(t.$t("app.请将该提醒转发您的站长客户："))+" "),i("span",{staticStyle:{color:"#909399"}},[t._v(t._s(t.$t("app.Youdon")))]),t._v(" ) ")]),i("p",{staticClass:" mg-b-10 d-flex"},[t._v(t._s(t.$t("app.您若有疑问，"))),i("el-link",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.tawk()}}},[t._v(t._s(t.$t("app.可点此联系客服")))])],1)]),i("el-divider"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.data.isShow=!1}}},[t._v(t._s(t.$t("app.关闭")))])],1)],1)],1)},s=[],r={props:["data"],methods:{tawk:function(){}}},o=r,n=(i("8f71"),i("cba8")),l=Object(n["a"])(o,a,s,!1,null,"36deeecd",null);e["a"]=l.exports},2283:function(t,e,i){"use strict";var a=i("9277"),s=i("b2e7"),r=i("df48"),o=i("753b"),n=i("0e11"),l=s([].join),c=r!=Object,d=n("join",",");a({target:"Array",proto:!0,forced:c||!d},{join:function(t){return l(o(this),void 0===t?",":t)}})},"261b":function(t,e,i){"use strict";var a=i("9277"),s=i("72ae"),r=i("b2e7"),o=i("ccb6"),n=i("fc96"),l=i("cb1f"),c=i("bfa4"),d=i("1883"),u=i("8037"),h=i("be72"),p=i("73d2"),f=i("c050"),g=i("8fa6"),m=i("9e41");t.exports=function(t,e,i){var v=-1!==t.indexOf("Map"),y=-1!==t.indexOf("Weak"),b=v?"set":"add",S=s[t],C=S&&S.prototype,D=S,w={},_=function(t){var e=r(C[t]);n(C,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(y&&!h(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return y&&!h(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!h(t))&&e(this,0===t?0:t)}:function(t,i){return e(this,0===t?0:t,i),this})},k=o(t,!u(S)||!(y||C.forEach&&!p((function(){(new S).entries().next()}))));if(k)D=i.getConstructor(e,t,v,b),l.enable();else if(o(t,!0)){var x=new D,$=x[b](y?{}:-0,1)!=x,O=p((function(){x.has(1)})),I=f((function(t){new S(t)})),E=!y&&p((function(){var t=new S,e=5;while(e--)t[b](e,e);return!t.has(-0)}));I||(D=e((function(t,e){d(t,C);var i=m(new S,t,D);return void 0!=e&&c(e,i[b],{that:i,AS_ENTRIES:v}),i})),D.prototype=C,C.constructor=D),(O||E)&&(_("delete"),_("has"),v&&_("get")),(E||$)&&_(b),y&&C.clear&&delete C.clear}return w[t]=D,a({global:!0,forced:D!=S},w),g(D,t),y||i.setStrong(D,t,v),D}},"2c99":function(t,e,i){var a=i("be72"),s=i("8d99");t.exports=function(t,e){a(e)&&"cause"in e&&s(t,"cause",e.cause)}},"2e39":function(t,e,i){var a=i("73d2"),s=i("be72"),r=i("7928"),o=i("95b3"),n=Object.isExtensible,l=a((function(){n(1)}));t.exports=l||o?function(t){return!!s(t)&&((!o||"ArrayBuffer"!=r(t))&&(!n||n(t)))}:n},"3c7d":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var a=i("84b9");function s(t){if(Array.isArray(t))return Object(a["a"])(t)}i("237e"),i("5ee8"),i("2c45"),i("e9bb"),i("b0a9"),i("2ee7"),i("685e");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=i("0874");i("c24b");function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return s(t)||r(t)||Object(o["a"])(t)||n()}},"3da3":function(t,e,i){"use strict";var a=i("261b"),s=i("d14c");a("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),s)},"4cc0":function(t,e,i){},5087:function(t,e,i){},"592d":function(t,e,i){"use strict";var a=i("9277"),s=i("5fed").trim,r=i("863a");a({target:"String",proto:!0,forced:r("trim")},{trim:function(){return s(this)}})},"685e":function(t,e,i){var a=i("9277"),s=i("ec89"),r=i("c050"),o=!r((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:o},{from:s})},"783c":function(t,e,i){"use strict";var a=i("4e99"),s=i("9056"),r=i("8d99"),o=i("7b4c"),n=i("e0bd"),l=i("020d"),c=i("9e41"),d=i("9781"),u=i("2c99"),h=i("d2b3"),p=i("b953"),f=i("e87e");t.exports=function(t,e,i,g){var m=g?2:1,v=t.split("."),y=v[v.length-1],b=a.apply(null,v);if(b){var S=b.prototype;if(!f&&s(S,"cause")&&delete S.cause,!i)return b;var C=a("Error"),D=e((function(t,e){var i=d(g?e:t,void 0),a=g?new b(t):new b;return void 0!==i&&r(a,"message",i),p&&r(a,"stack",h(a.stack,2)),this&&o(S,this)&&c(a,this,D),arguments.length>m&&u(a,arguments[m]),a}));if(D.prototype=S,"Error"!==y&&(n?n(D,C):l(D,C,{name:!0})),l(D,b),!f)try{S.name!==y&&r(S,"name",y),S.constructor=D}catch(w){}return D}}},"84b9":function(t,e,i){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}i.d(e,"a",(function(){return a}))},"863a":function(t,e,i){var a=i("8fd3").PROPER,s=i("73d2"),r=i("dc76"),o="​᠎";t.exports=function(t){return s((function(){return!!r[t]()||o[t]()!==o||a&&r[t].name!==t}))}},"8eb6":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:t.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"contentpanel orders-page",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.3)"}},[i("div",{ref:"pageHeader",staticClass:"pagetitle"},[i("div",{staticClass:"left"},[i("div",{staticClass:"title"},[i("i",{staticClass:"iconfont icon-shopify"}),i("h2",[t._v(t._s(1==t.isManage?t.$t("shopifyOrders.allShopifyOrders"):t.$t("shopifyOrders.allHiddenShopifyOrders"))+" "),t.activeStore?i("em",{staticStyle:{"font-size":"22px"}},[t._v("("+t._s(this.totalCount)+")")]):t._e()])])]),i("div",{staticClass:"right"},[t.tableData.length?i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.exportDialogOpen}},[i("i",{staticClass:"fa fa-download"}),t._v(t._s(t.$t("shopifyOrders.export"))+" ")]):t._e()],1)]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.selectLoading,expression:"selectLoading"}],staticClass:"pagebody"},[i("div",{staticClass:"design-tab-content"},[t.storeId?i("div",{ref:"pageFilter"},[i("div",{staticClass:"d-flex"},[i("el-popover",{ref:"selectRangePopover",attrs:{placement:"bottom",trigger:"click","popper-class":"d-block"}},[i("div",[i("el-form",{ref:"formRange",attrs:{"label-width":"80px"}},[i("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:t.$t("shopifyOrders.numberFrom")}},[i("el-input",{attrs:{size:"mini"},model:{value:t.orderMin,callback:function(e){t.orderMin=e},expression:"orderMin"}})],1),i("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:t.$t("shopifyOrders.numberTo")}},[i("el-input",{attrs:{size:"mini"},model:{value:t.orderMax,callback:function(e){t.orderMax=e},expression:"orderMax"}})],1),i("el-form-item",{staticStyle:{"margin-bottom":"0"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.filterItems("range")}}},[t._v(t._s(t.$t("shopifyOrders.select")))]),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.clearFilterItems("range")}}},[t._v(t._s(t.$t("shopifyOrders.close2")))])],1)],1)],1),i("el-button",{staticClass:"mg-r-10",attrs:{slot:"reference",size:"small"},on:{click:t.clearRange},slot:"reference"},[t._v(t._s(t.$t("shopifyOrders.orderNumberRange"))),i("i",{staticClass:"el-icon-caret-bottom el-icon--right"})])],1),i("div",{staticClass:"mg-l-10 mg-r-10"},[i("el-input",{attrs:{size:"small","prefix-icon":"el-icon-search",placeholder:t.$t("shopifyOrders.filterOrders"),clearable:""},on:{input:t.getCodeName,clear:t.clearFilterItems},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getCodeName.apply(null,arguments)}},model:{value:t.codeName,callback:function(e){t.codeName=e},expression:"codeName"}})],1),i("el-button-group",{staticStyle:{"min-width":"300px"}},[i("el-popover",{attrs:{placement:"bottom",title:"",trigger:"click","popper-class":"d-block"}},[i("el-radio-group",{on:{change:function(e){return t.filterItems("date")}},model:{value:t.timeFilter,callback:function(e){t.timeFilter=e},expression:"timeFilter"}},t._l(t.dateArr,(function(e,a){return i("el-radio",{key:a,attrs:{label:a}},[t._v(t._s(t.$t(e)))])})),1),6==t.timeFilter?i("div",[i("el-date-picker",{attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":"Start","end-placeholder":"End"},on:{change:t.dateChange},model:{value:t.filterDate,callback:function(e){t.filterDate=e},expression:"filterDate"}})],1):t._e(),i("div",[i("el-button",{attrs:{type:"text",disabled:!t.timeFilter},on:{click:function(e){return t.clearFilterItems("date")}}},[t._v(t._s(t.$t("shopifyOrders.clear")))])],1),i("el-button",{attrs:{slot:"reference",size:"small"},slot:"reference"},[t._v(t._s(t.$t("shopifyOrders.dateRanges"))),i("i",{staticClass:"el-icon-caret-bottom el-icon--right"})])],1),i("el-popover",{attrs:{placement:"bottom",title:"",trigger:"click","popper-class":"d-block"}},[i("el-checkbox-group",{on:{change:function(e){return t.filterItems("fulfill")}},model:{value:t.fulfillStatus,callback:function(e){t.fulfillStatus=e},expression:"fulfillStatus"}},[i("el-checkbox",{attrs:{label:"1"}},[t._v(t._s(t.$t("shopifyOrders.unfulfilled")))]),i("el-checkbox",{attrs:{label:"2"}},[t._v(t._s(t.$t("shopifyOrders.partiallyFulfilled")))])],1),i("div",[i("el-button",{attrs:{type:"text",disabled:!t.fulfillStatus.length},on:{click:function(e){return t.clearFilterItems("fulfill")}}},[t._v(t._s(t.$t("shopifyOrders.clear")))])],1),i("el-button",{attrs:{slot:"reference",size:"small"},slot:"reference"},[t._v(t._s(t.$t("shopifyOrders.fulfillmentStatus"))),i("i",{staticClass:"el-icon-caret-bottom el-icon--right"})])],1),i("el-popover",{attrs:{placement:"bottom",title:"",trigger:"click","popper-class":"d-block"}},[i("el-radio-group",{on:{change:function(e){return t.filterItems("sort")}},model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}},t._l(t.sortArr,(function(e,a){return i("el-radio",{key:a,attrs:{label:a}},[t._v(t._s(t.$t(e)))])})),1),i("div",[i("el-button",{attrs:{type:"text",disabled:!t.sortBy},on:{click:function(e){return t.clearFilterItems("sort")}}},[t._v(t._s(t.$t("shopifyOrders.clear")))])],1),i("el-button",{attrs:{slot:"reference",size:"small"},slot:"reference"},[t._v(t._s(t.$t("shopifyOrders.sortBy"))),i("i",{staticClass:"el-icon-caret-bottom el-icon--right"})])],1)],1),i("div",{staticStyle:{"margin-left":"auto","margin-right":"15px"}},[1==t.isManage?i("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.filterItems2(2)}}},[t._v(t._s(t.$t("shopifyOrders.showHiddenOrders")))]):t._e()],1)],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"sortWrap",staticClass:"mg-t-20"},[t.activeStore?i("el-tag",{staticClass:"mg-r-5",attrs:{size:"small",type:"info"}},[t._v(" "+t._s(t.activeStore.customerName)+" - "+t._s(t.activeStore.store)+" "),i("a",{staticClass:" mg-l-5",attrs:{href:"javascript:;"},on:{click:function(e){return t.removeStore()}}},[i("i",{staticClass:"el-icon-error"})])]):t._e(),t.filterParams.codeNameGeq||t.filterParams.codeNameLeq?i("el-tag",{staticClass:"mg-r-5",attrs:{size:"small",type:"info"}},[t._v(" "+t._s(t.filterParams.codeNameGeq+" - "+t.filterParams.codeNameLeq)+" "),i("a",{staticClass:" mg-l-5",attrs:{href:"javascript:;"},on:{click:function(e){return t.clearFilterItems("range")}}},[i("i",{staticClass:"el-icon-error"})])]):t._e(),t.timeFilter?i("el-tag",{staticClass:"mg-r-5",attrs:{size:"small",type:"info",closable:""},on:{close:function(e){return t.clearFilterItems("date")}}},[t._v(" "+t._s(t.$t(t.dateArr[t.timeFilter]))+" "),6==t.timeFilter&&t.filterDate.length?i("span",[t._v(" "+t._s(t.filterDate[0])+"--"+t._s(t.filterDate[1])+" ")]):t._e()]):t._e(),t.fulfillStatus.length?i("el-tag",{staticClass:"mg-r-5",attrs:{size:"small",type:"info",closable:""},on:{close:function(e){return t.clearFilterItems("fulfill")}}},[t._v(" "+t._s(1==t.fulfillStatus[0]?t.$t("shopifyOrders.unfulfilled"):t.$t("shopifyOrders.partiallyFulfilled"))),t.fulfillStatus.length>1?i("span",[t._v(","+t._s(1==t.fulfillStatus[1]?t.$t("shopifyOrders.unfulfilled"):t.$t("shopifyOrders.partiallyFulfilled")))]):t._e()]):t._e(),t.sortBy?i("el-tag",{staticClass:"mg-r-5",attrs:{size:"small",type:"info",closable:""},on:{close:function(e){return t.clearFilterItems("sort")}}},[t._v(t._s(t.$t(t.sortArr[t.sortBy])))]):t._e(),t.warningDialog.page?i("el-tag",{staticClass:"mg-r-5",attrs:{size:"small",type:"info",closable:""},on:{close:function(e){return t.removeStore()}}},[t._v("限制"+t._s(this.warningDialog.orders)+"条")]):t._e()],1)]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.storeId,expression:"storeId"}],staticClass:"invoice-list mg-t-20"},[i("ul",{staticClass:"invoice-header"},[i("li",{staticClass:"invoice-item",staticStyle:{width:"63px","max-width":"63px","padding-left":"24px","border-left":"0",position:"relative"}},[t.checkLoading?i("i",{staticClass:"el-icon-loading",staticStyle:{position:"absolute",left:"5px",top:"8px"}}):t._e(),i("el-checkbox",{on:{change:t.checkedAll},model:{value:t.isAll1,callback:function(e){t.isAll1=e},expression:"isAll1"}})],1),i("li",{staticClass:"invoice-item"},[i("a",{attrs:{href:"javascript:;"},on:{click:t.expandChange}},[i("i",{class:t.expandAll?"el-icon-minus":"el-icon-plus"})]),t._v(" "+t._s(t.$t("shopifyOrders.orderID"))+" ")]),i("li",{staticClass:"invoice-item"},[t._v(t._s(t.$t("shopifyOrders.shopifyStores")))]),i("li",{staticClass:"invoice-item"},[t._v(t._s(t.$t("shopifyOrders.date")))]),i("li",{ref:"customerH",staticClass:"invoice-item",style:{width:t.customerH?t.customerH+30+"px":"auto"}},[t._v(t._s(t.$t("shopifyOrders.customer")))]),i("li",{staticClass:"invoice-item tx-right pd-r-15"},[t._v(t._s(t.$t("shopifyOrders.shopifyOrderTotal")))]),i("li",{staticClass:"invoice-item"},[t._v(t._s(t.$t("shopifyOrders.fulfillment")))]),i("li",{staticClass:"invoice-item"},[t._v(t._s(t.$t("shopifyOrders.items")))])]),[t.tableData?i("div",{ref:"treeWrap",staticClass:"tree-wrap",staticStyle:{"overflow-y":"scroll"}},[i("el-tree",{ref:"treeData",attrs:{props:t.props,data:t.tableData,"show-checkbox":"","node-key":"id","default-expand-all":t.expandAll,"default-expanded-keys":t.expandedKeys,"default-checked-keys":t.defaultChecked,"filter-node-method":t.showTree},on:{"node-expand":t.handleExpandChange,"check-change":t.handleCheckChange,check:t.handleCheck},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var a=e.data;return i("div",{staticClass:"custom-tree-node",class:{"d-hide":!a.isShow},attrs:{id:"customTreeNode"+a.id}},[a.span?i("div",{staticClass:"table_info_node table_info_top"},[i("div",{staticClass:"table_info_item d-flex"},[a.items&&a.items.length?i("span",{staticStyle:{"font-size":"12px",cursor:"pointer"}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-weight":"700"}}),t._v(" "+t._s(a.codeName)+" ")]):i("span",[i("i",{staticClass:"el-icon-plus",staticStyle:{opacity:"0"}}),t._v(" "+t._s(a.codeName)+" ")]),a.note?i("span",{staticClass:"mg-l-5"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.note,placement:"top"}},[i("i",{staticClass:"el-icon-info",staticStyle:{"font-size":"12px",width:"12px",color:"#5c6ac4"}})])],1):t._e()]),i("div",{staticClass:"table_info_item",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","word-break":"break-all","white-space":"nowrap"}},[t._v(t._s(a.store))]),i("div",{staticClass:"table_info_item"},[t._v(" "+t._s(t.$moment(a.timeCreated).format("ll [at] LTS"))+" ")]),i("div",{staticClass:"table_info_item"},[i("el-popover",{attrs:{"popper-class":"customer-popover",placement:"bottom",width:"600",trigger:"hover"}},[i("span",{staticClass:" d-flex",staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[i("span",{staticClass:" tx-ellipsis1",style:{width:t.customerH?t.customerH+"px":"auto"}},[t._v(t._s(a.shippingJson&&a.shippingJson.name?a.shippingJson.name:""))]),i("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),i("div",{staticClass:"mg-b-20 mg-t-10"},[i("div",{staticClass:"d-flex mg-b-20",staticStyle:{"justify-content":"space-between"}},[i("div",{staticClass:"title",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v("Shopify Order "+t._s(a.codeName))]),i("div",[i("span",{staticStyle:{color:"#999"}},[t._v(t._s(t.$t("invoice.Orderdate")))]),i("span",{staticClass:"mg-l-5 pd-r-15"},[t._v(t._s(a.timeCreated?a.timeCreated:"---"))])])]),i("div",{staticClass:"mg-y-10",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(t._s(t.$t("shopifyOrders.收件信息")))]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(t._s(t.$t("shopifyOrders.客户:"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(t._s(a.shippingJson&&a.shippingJson.name?a.shippingJson.name:"---"))]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[a.shippingJson&&a.shippingJson.name?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.shippingJson.name,expression:"data.shippingJson.name",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(t._s(t.$t("shopifyOrders.收货地址1:"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(a.shippingJson&&a.shippingJson.address1?a.shippingJson.address1:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[a.shippingJson&&a.shippingJson.address1?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.shippingJson.address1,expression:"data.shippingJson.address1",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(t._s(t.$t("shopifyOrders.收货地址2:"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{"max-width":"75%"}},[t._v(" "+t._s(a.shippingJson&&a.shippingJson.address2?a.shippingJson.address2:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[a.shippingJson&&a.shippingJson.address2?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.shippingJson.address2,expression:"data.shippingJson.address2",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"50%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(t._s(t.$t("shopifyOrders.城市:"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(a.shippingJson&&a.shippingJson.city?a.shippingJson.city:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[a.shippingJson&&a.shippingJson.city?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.shippingJson.city,expression:"data.shippingJson.city",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1),i("div",{staticClass:"d-flex",staticStyle:{width:"50%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(t._s(t.$t("shopifyOrders.省份:"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(a.shippingJson&&a.shippingJson.province?a.shippingJson.province:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[a.shippingJson&&a.shippingJson.province?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.shippingJson.city,expression:"data.shippingJson.city",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),i("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[i("div",{staticClass:"d-flex",staticStyle:{flex:"0 0 50%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(t._s(t.$t("shopifyOrders.国家:"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(a.shippingJson&&a.shippingJson.country?a.shippingJson.country:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[a.shippingJson&&a.shippingJson.country?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.shippingJson.country,expression:"data.shippingJson.country",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1),i("div",{staticClass:"d-flex",staticStyle:{flex:"0 0 50%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(t._s(t.$t("shopifyOrders.邮编:"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(a.shippingJson&&a.shippingJson.zip?a.shippingJson.zip:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[a.shippingJson&&a.shippingJson.zip?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.shippingJson.zip,expression:"data.shippingJson.zip",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),i("div",{staticClass:"mg-y-10",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(t._s(t.$t("shopifyOrders.收件信息")))]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[i("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(t._s(t.$t("shopifyOrders.联系电话:"))+" ")]),i("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(a.shippingJson&&a.shippingJson.phone?a.shippingJson.phone:"---")+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[a.shippingJson&&a.shippingJson.phone?i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.shippingJson.phone,expression:"data.shippingJson.phone",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)])])])],1),i("div",{staticClass:"table_info_item pd-r-15 d-flex",staticStyle:{"justify-content":"flex-end"}},[a.currency?i("span",[t._v(t._s(t.ce[a.currency]?t.ce[a.currency].symbol:a.currency)+" ")]):t._e(),t._v(" "+t._s(a.totalPrice)+" ")]),i("div",{staticClass:"table_info_item"},[a.fulfillmentStatus?"partial"==a.fulfillmentStatus?i("el-tag",{attrs:{size:"small",type:"partial"==a.fulfillmentStatus?"danger":""}},[i("span",{staticClass:"-EFlq"}),t._v(" "+t._s("partial"==a.fulfillmentStatus?t.$t("shopifyOrders.partiallyFulfilled"):t.$t("shopifyOrders.fulfilled"))+" ")]):t._e():i("el-tag",{attrs:{size:"small",type:"warning"}},[i("span",{staticClass:"-EFlq"}),t._v(" "+t._s(t.$t("shopifyOrders.unfulfilled"))+" ")])],1),i("div",{staticClass:"table_info_item"},[t._v(" "+t._s(a.items?a.items.length:"0")+" Items "),i("el-link",{staticClass:"mg-l-20",staticStyle:{display:"inline"},attrs:{underline:!1,type:"primary"},on:{click:function(e){return e.stopPropagation(),t.setOrderHide(a)}}},[t._v(t._s(1==t.isManage?t.$t("shopifyOrders.hide"):t.$t("shopifyOrders.show"))+" "+t._s(t.$t("shopifyOrders.thisOrder")))])],1)]):i("div",{staticClass:"table_info_node"},[i("div",{staticClass:"table_info_item",staticStyle:{flex:"2",overflow:"hidden","text-overflow":"ellipsis","word-break":"break-all","white-space":"nowrap"}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("el-image",{staticStyle:{"min-width":"40px",width:"40px",height:"40px",margin:"5px 15px 5px 0",border:"1px solid #ddd"},attrs:{src:a.imgUrl,"preview-src-list":a.previewList}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"20px"}})])]),i("div",{staticClass:"table_info_item",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","word-break":"break-all","white-space":"nowrap"}},[i("p",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","word-break":"break-all","white-space":"nowrap"},style:a.disabled?"text-decoration:line-through;":""},[t._v(t._s(a.name))]),a.customerProperties&&a.customerProperties.length?t._l(a.customerProperties,(function(e){return i("p",{key:e.name},[i("span",{staticStyle:{color:"#909399"}},[t._v(t._s(e.name))]),t._v(" "+t._s(e.value)+" ")])})):t._e(),i("p",[i("span",{staticStyle:{color:"#999"}},[t._v("SKU: ")]),t._v(t._s(a.sku))])],2)],1)]),i("div",{staticClass:"table_info_item"},[i("p",{class:a.unfulfillQuantity>0&&a.unfulfillQuantity<a.quantity?"line":""},[t._v(" x "+t._s(a.quantity)+" ")]),a.unfulfillQuantity>0&&a.unfulfillQuantity<a.quantity?i("p",[i("span",[t._v(" x "+t._s(a.unfulfillQuantity)+" ")]),i("span",{staticStyle:{color:"#c05717","margin-left":"20px"}},[t._v("("+t._s(a.fulfillQuantity)+" of "+t._s(a.quantity)+" purchased items are delivered)")])]):t._e(),0==a.unfulfillQuantity?i("p",[i("span",[t._v("("+t._s(a.fulfillQuantity)+" of "+t._s(a.quantity)+" fulfilled)")])]):t._e()]),i("div",{staticClass:"table_info_item"},[i("p",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right",color:"#999"}},[t._v(t._s(t.$t("shopifyOrders.vendor"))+" ")]),t._v(" "+t._s(a.vendorName?a.vendorName:"---")+" ")]),i("p",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right",color:"#999"}},[t._v(t._s(t.$t("shopifyOrders.costPerUnit"))+" ")]),t._v(" "+t._s(a.costPrice?"US$ "+a.costPrice:"---")+" ")])]),a.invoiceItems?i("div",{staticClass:"table_info_item"},[a.invoiceItems.length>0?[i("el-popover",{attrs:{"popper-class":"items-popover",placement:"bottom",title:"Selected by "+a.invoiceItems.length+" purchase Orders",width:"500",trigger:"hover"}},[i("span",{staticStyle:{"margin-right":"10px",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[t._v("# ("+t._s(a.invoiceItems.length)+")"),i("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),t._l(a.invoiceItems,(function(e){return i("div",{staticClass:"mg-y-15 mg-t-20"},[i("div",{staticClass:"d-flex mg-b-15"},[i("span",{staticClass:"mg-r-10"},[t._v("# "+t._s(e.code))]),i("span",{staticClass:"mg-r-10"},[t._v(t._s(e.vendorName))]),i("el-link",{attrs:{type:"primary"},on:{click:function(i){return t.gotoInvoice(e)}}},[t._v(t._s(t.$t("shopifyOrders.viewTheDetails")))])],1)])}))],2)]:t._e()],2):t._e()])])}}],null,!1,85150631)}),i("el-row",{staticStyle:{margin:"20px 0 35px"},attrs:{gutter:20}},[i("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[i("div",[i("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.totalCount)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1)],1):t._e()]],2),t.storeId?t._e():i("div",[i("el-card",{staticClass:"box-card"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("div",{ref:"pageFilter2",staticClass:"page-filter"},[i("el-form",{attrs:{inline:!0,size:"mini"}},[i("el-form-item",[i("el-select",{attrs:{filterable:"",remote:"","remote-method":t.remoteMethodCustom,loading:t.selectLoading,placeholder:t.$t("myinvoice.pleaseCusName"),clearable:""},on:{change:function(e){return t.filterGetItem("relationshipId")}},model:{value:t.filterParams.relationshipId,callback:function(e){t.$set(t.filterParams,"relationshipId",e)},expression:"filterParams.relationshipId"}},t._l(t.selectArr,(function(t){return i("el-option",{key:t.id,attrs:{label:t.customerName,value:t.id}})})),1)],1),i("el-form-item",[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Email/微信/Skype/Line/QQ/旺旺/WhatsApp"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem.apply(null,arguments)}},model:{value:t.filterParams.customerLike,callback:function(e){t.$set(t.filterParams,"customerLike",e)},expression:"filterParams.customerLike"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.filterGetItem}},[t._v(t._s(t.$t("shopifyOrders.筛选")))]),i("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v(t._s(t.$t("shopifyOrders.清空")))])],1)],1)],1),i("div",{staticClass:"webmaster-list mg-t-10"},t._l(t.storeList,(function(e){return i("div",{key:e.relationship.id,staticClass:"webmaster-item"},[i("div",{staticClass:"item-header"},[i("div",{staticClass:"webmaster-icon"},[i("i",{staticClass:"el-icon-s-custom"})]),i("div",{staticClass:"webmaster-name"},[i("span",{staticClass:"name"},[t._v(t._s(e.relationship.customerName))]),e.relationship.customerRemark?i("span",{staticClass:"mg-l-5"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.relationship.customerRemark,placement:"top"}},[i("i",{staticClass:"el-icon-info",staticStyle:{"font-size":"12px",width:"12px",color:"#5c6ac4"}})])],1):t._e()]),i("div",{staticClass:"webmaster-customerLike"},[e.relationship.customerEmail?i("div",[i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("a",{attrs:{href:"mailto:"+e.relationship.customerEmail,target:"_blank"}},[t._v(t._s(e.relationship.customerEmail))])]),i("i",{staticClass:"iconfont icon-email",staticStyle:{color:"#606266"}})])],1):t._e(),e.relationship.customerWeChat?i("div",[i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(e.relationship.customerWeChat)+" ")]),i("i",{staticClass:"iconfont icon-wechat",staticStyle:{color:"#55A947"}})])],1):t._e(),e.relationship.customerSkype?i("div",[i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("a",{attrs:{href:"skype:"+e.relationship.customerSkype+"?chat",target:"_blank"}},[t._v(" "+t._s(e.relationship.customerSkype)+" ")])]),i("i",{staticClass:"iconfont icon-skype",staticStyle:{color:"#00B0F6"}})])],1):t._e(),e.relationship.customerLine?i("div",[i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(e.relationship.customerLine)+" ")]),i("i",{staticClass:"iconfont icon-line",staticStyle:{color:"#00C300"}})])],1):t._e(),e.relationship.customerQQ?i("div",[i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("a",{attrs:{href:"tencent://message/?uin="+e.relationship.customerQQ+"&Site=5yoho&Menu=yes"}},[t._v(" "+t._s(e.relationship.customerQQ)+" ")])]),i("i",{staticClass:"iconfont icon-qq",staticStyle:{color:"#1E6FFF"}})])],1):t._e(),e.relationship.customerWangwang?i("div",[i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("a",{attrs:{href:"http://amos.alicdn.com/msg.aw?v=2&uid="+e.relationship.customerWangwang+"&site=cnalichn&s=11&charset=UTF-8",target:"_blank"}},[t._v(" "+t._s(e.relationship.customerWangwang)+" ")])]),i("i",{staticClass:"iconfont icon-wangwang",staticStyle:{color:"#009FFF"}})])],1):t._e(),e.relationship.customerWhatsapp?i("div",[i("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("a",{attrs:{href:"https://wa.me/"+e.relationship.customerWhatsapp,target:"_blank"}},[t._v(" "+t._s(e.relationship.customerWhatsapp)+" ")])]),i("i",{staticClass:"iconfont icon-whatsapp",staticStyle:{color:"#109D58"}})])],1):t._e()])]),i("div",{staticClass:"webmaster-body"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shops,"header-cell-style":t.headerCellStyle}},[i("el-table-column",{attrs:{prop:"name",label:t.$t("shopifyOrders.店铺名称")}}),i("el-table-column",{attrs:{label:t.$t("shopifyOrders.店铺地址")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("a",{attrs:{target:"_blank",href:"http://"+a.subUrl+".myshopify.com"}},[t._v(t._s(a.subUrl)+".myshopify.com")])]}}],null,!0)}),i("el-table-column",{attrs:{prop:"orderCnt",label:t.$t("shopifyOrders.当前可生成订单数")}}),i("el-table-column",{attrs:{prop:"hideOrderCnt",label:t.$t("shopifyOrders.已被隐藏的订单数")}}),i("el-table-column",{attrs:{label:t.$t("shopifyOrders.操作")},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.row;return[i("div",[i("el-link",{attrs:{disabled:!s.orderCnt,type:"primary"},on:{click:function(i){return t.selectStore(s,e.relationship.id)}}},[t._v(t._s(t.$t("shopifyOrders.查看并手工生成采购单")))])],1),s.hideOrderCnt?i("div",[i("el-link",{attrs:{type:"primary"},on:{click:function(i){return t.selectStore(s,e.relationship.id,"hidden")}}},[t._v(" "+t._s(t.$t("shopifyOrders.查看已隐藏的订单"))+" ")])],1):t._e()]}}],null,!0)})],1)],1)])})),0)])],1)],1)],1)])]),t.storeId?i("div",{ref:"ordersFooter",staticClass:"alert-wrap d-flex justify-content-between"},[i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.isManage,expression:"isManage == 1"}],staticClass:"is-bold"},[t._v(t._s(this.selectNum)+" "+t._s(t.$t("shopifyOrders.shopifyOrdersHaveBeen"))+" ")])]),i("div",{staticStyle:{"padding-right":"70px"}},[i("el-button",{staticClass:"button-new-tag",attrs:{type:"primary",size:"small"},on:{click:t.setOrderHideChecked}},[t._v(t._s(1==t.isManage?t.$t("shopifyOrders.hide"):t.$t("shopifyOrders.show"))+" "+t._s(t.$t("shopifyOrders.selectedOrders")))]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.isManage,expression:"isManage == 1"}],staticClass:"button-new-tag mg-l-10",attrs:{type:"success",size:"small"},on:{click:t.getInvocie}},[t._v(t._s(t.$t("shopifyOrders.makeAPurchaseOrder")))])],1)]):t._e(),i("el-dialog",{staticClass:"add-vendor-dialog",attrs:{title:t.$t("shopifyOrders.addANewVendor"),visible:t.addVendorDialog.isShow,width:"620px","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.addVendorDialog,"isShow",e)}}},[i("el-divider"),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form",[i("el-form-item",{attrs:{label:t.$t("shopifyOrders.name"),"label-width":t.addVendorDialog.labelW,required:""}},[i("el-input",{attrs:{placeholder:t.$t("shopifyOrders.name"),"auto-complete":"off"},model:{value:t.addVendorDialog.name,callback:function(e){t.$set(t.addVendorDialog,"name",e)},expression:"addVendorDialog.name"}})],1),i("el-form-item",{attrs:{label:t.$t("shopifyOrders.email"),"label-width":t.addVendorDialog.labelW}},[i("el-input",{attrs:{placeholder:t.$t("shopifyOrders.email"),"auto-complete":"off"},model:{value:t.addVendorDialog.email,callback:function(e){t.$set(t.addVendorDialog,"email",e)},expression:"addVendorDialog.email"}})],1),i("el-form-item",{attrs:{label:t.$t("shopifyOrders.remark"),"label-width":t.addVendorDialog.labelW}},[i("el-input",{attrs:{placeholder:t.$t("shopifyOrders.remark"),"auto-complete":"off"},model:{value:t.addVendorDialog.remark,callback:function(e){t.$set(t.addVendorDialog,"remark",e)},expression:"addVendorDialog.remark"}})],1)],1)],1)],1),i("el-divider"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.addVendorDialog.isShow=!1}}},[t._v(t._s(t.$t("shopifyOrders.close")))]),i("el-button",{attrs:{size:"small",type:"primary",loading:t.addVendorDialog.loading},on:{click:function(e){return t.saveVendor(2)}}},[t._v(t._s(t.$t("shopifyOrders.save")))])],1)],1),i("el-dialog",{staticClass:"d-block",attrs:{title:t.$t("shopifyOrders.exportTo"),visible:t.exportDialog,width:"620px","close-on-click-modal":!1},on:{"update:visible":function(e){t.exportDialog=e}}},[i("el-divider"),i("div",{staticStyle:{padding:"20px"}},[t.$store.state.userInfo.email?i("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("shopifyOrders.exportTo"))+" "+t._s(t.$store.state.userInfo.email))]):i("p",[i("el-link",{staticClass:"mg-l-10",attrs:{type:"primary",underline:!1},on:{click:t.$root.$children[0].changeUserEmail}},[t._v(t._s(t.$store.state.userInfo.email?t.$t("app.modifyEmail"):"您当前未绑定邮箱，请先添加邮箱"))])],1),i("el-radio-group",{model:{value:t.exportStatus,callback:function(e){t.exportStatus=e},expression:"exportStatus"}},[i("el-radio",{attrs:{label:"1"}},[t._v(t._s(t.$t("shopifyOrders.allOrders")))]),i("el-radio",{attrs:{label:"2",disabled:!t.selectNum}},[t._v(t._s(t.$t("shopifyOrders.selected"))+" "+t._s(t.selectNum)+" "+t._s(t.$t("shopifyOrders.orders")))])],1)],1),i("el-divider"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.exportDialog=!1}}},[t._v(t._s(t.$t("shopifyOrders.cancel")))]),i("el-button",{attrs:{size:"small",type:"primary",disabled:!t.exportStatus||!t.$store.state.userInfo.email,loading:t.exportLoading},on:{click:t.exportOrders}},[t._v(t._s(t.$t("shopifyOrders.exportOrders")))])],1)],1),i("el-dialog",{staticClass:"dialog-automatic",attrs:{visible:t.automaticSettingDialog.isShow,title:"Automatic dispatch orders setting"},on:{"update:visible":function(e){return t.$set(t.automaticSettingDialog,"isShow",e)}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.automaticSettingDialog.loading,expression:"automaticSettingDialog.loading"}],staticClass:"automatic-body"},[i("div",{staticStyle:{"margin-bottom":"15px"}},[i("el-alert",{attrs:{title:"The unfulfilled shopify order will be dispatched to the vendor according to the optimization apportion rules which you made. You can set up an automatic advice to your vendor to check order and offer quotation.",type:"warning","show-icon":"",closable:!1}})],1),t.automaticSettingDialog.openRulestatus?[i("div",{staticStyle:{"margin-bottom":"15px",padding:"15px",border:"1px #DCDFE6 solid"}},[i("div",{staticClass:" d-flex",staticStyle:{"margin-bottom":"10px"}},[i("el-select",{staticStyle:{"margin-right":"5px",width:"200px"},attrs:{filterable:"",remote:"",multiple:"",placeholder:"Please enter a product name","remote-method":t.remoteMethodGetProducts,loading:t.automaticSettingDialog.getProductsloading,size:"mini",disabled:t.automaticSettingDialog.allProducts},model:{value:t.automaticSettingDialog.productIds,callback:function(e){t.$set(t.automaticSettingDialog,"productIds",e)},expression:"automaticSettingDialog.productIds"}},t._l(t.automaticSettingDialog.products,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name.substring(0,18),value:e.id}},[i("div",{staticClass:"product-select-opt"},[i("div",{staticClass:"img-wrap",style:{backgroundImage:"url("+e.img+")"}}),i("div",{staticClass:"info"},[i("div",{staticClass:"name tx-ellipsis1"},[t._v(t._s(e.name))]),i("div",{staticClass:"price"},[i("span",{staticClass:"currency"},[t._v(t._s(e.currency))]),e.minShopPrice==e.maxShopPrice?i("span",[t._v(t._s(e.minShopPrice))]):i("span",[t._v(t._s(e.minShopPrice)+" - "+t._s(e.maxShopPrice))])])])])])})),1),i("el-checkbox",{staticStyle:{"margin-right":"25px","margin-bottom":"0"},model:{value:t.automaticSettingDialog.allProducts,callback:function(e){t.$set(t.automaticSettingDialog,"allProducts",e)},expression:"automaticSettingDialog.allProducts"}},[t._v(" Choose my all Shopify products ")]),i("el-select",{staticStyle:{"margin-right":"25px",width:"200px"},attrs:{filterable:"",remote:"",placeholder:"Please enter a vendor name","remote-method":t.remoteMethodGetVendors,loading:t.automaticSettingDialog.getVendorsloading,size:"mini"},model:{value:t.automaticSettingDialog.vendorId,callback:function(e){t.$set(t.automaticSettingDialog,"vendorId",e)},expression:"automaticSettingDialog.vendorId"}},t._l(t.automaticSettingDialog.vendors,(function(t){return i("el-option",{key:t.id,attrs:{label:t.vendorName,value:t.id}})})),1),i("div",[t._v(" Every "),i("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"circle period"},model:{value:t.automaticSettingDialog.period,callback:function(e){t.$set(t.automaticSettingDialog,"period",e)},expression:"automaticSettingDialog.period"}},t._l(15,(function(t){return i("el-option",{key:t,attrs:{label:t,value:t+""}})})),1),t._v(" day(s) ")],1)],1),i("div",[i("el-select",{staticStyle:{"margin-right":"25px",width:"200px"},attrs:{size:"mini",placeholder:"Vendor visibility"},model:{value:t.automaticSettingDialog.visibilityType,callback:function(e){t.$set(t.automaticSettingDialog,"visibilityType",e)},expression:"automaticSettingDialog.visibilityType"}},t._l(t.visibilityTypeArr,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:e}})})),1),i("el-select",{staticStyle:{"margin-right":"25px",width:"100px"},attrs:{size:"mini"},model:{value:t.automaticSettingDialog.status,callback:function(e){t.$set(t.automaticSettingDialog,"status",e)},expression:"automaticSettingDialog.status"}},[i("el-option",{attrs:{label:"Enabled",value:"1"}}),i("el-option",{attrs:{label:"Disabled",value:"2"}})],1),i("el-button",{attrs:{disabled:t.automaticSettingDialog.saveRuleLoading,loading:t.automaticSettingDialog.saveRuleLoading,type:"primary",size:"mini"},on:{click:function(e){return t.saveRule()}}},[t._v("Save Rule")]),i("el-button",{attrs:{disabled:t.automaticSettingDialog.saveRuleLoading,size:"mini"},on:{click:function(e){return t.changeOpenAddRule(!1)}}},[t._v("Cancel")])],1)])]:i("div",{staticStyle:{"margin-bottom":"10px"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.changeOpenAddRule(!0)}}},[t._v("+ Add a dispatch rule")])],1),i("div",[i("el-table",{ref:"autoSettingTable",staticClass:"auto-setting-table",staticStyle:{width:"100%"},attrs:{data:t.automaticSettingDialog.items,"row-key":"id",stripe:"",height:"300"}},[i("el-table-column",{attrs:{label:"Priority",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"el-icon-d-caret"}),t._v(" "+t._s(e.$index+1)+" "),e.$index?t._e():i("span",{staticStyle:{color:"#C0C4CC"}},[t._v("(Highest)")])]}}])}),i("el-table-column",{attrs:{label:"Products in Shopify",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.editMode?i("div",{staticClass:"d-flex"},[i("el-select",{staticStyle:{"margin-right":"5px",width:"200px"},attrs:{filterable:"",remote:"",multiple:"",placeholder:"Please enter a product name","remote-method":t.remoteMethodGetProducts,loading:t.automaticSettingDialog.getProductsloading,size:"mini",disabled:e.row.editMode.allProducts},model:{value:e.row.editMode.productIds,callback:function(i){t.$set(e.row.editMode,"productIds",i)},expression:"scope.row.editMode.productIds"}},t._l(t.automaticSettingDialog.products,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name.substring(0,18),value:e.id}},[i("div",{staticClass:"product-select-opt"},[i("div",{staticClass:"img-wrap",style:{backgroundImage:"url("+t.stockImg(e)+")"}}),i("div",{staticClass:"info"},[i("div",{staticClass:"name tx-ellipsis1"},[t._v(t._s(e.name))]),i("div",{staticClass:"price"},[i("span",{staticClass:"currency"},[t._v(t._s(e.currency))]),e.minPrice==e.maxPrice?i("span",[t._v(t._s(e.minPrice))]):i("span",[t._v(t._s(e.minPrice)+" - "+t._s(e.maxPrice))])])])])])})),1),i("el-checkbox",{staticStyle:{"margin-bottom":"0"},model:{value:e.row.editMode.allProducts,callback:function(i){t.$set(e.row.editMode,"allProducts",i)},expression:"scope.row.editMode.allProducts"}},[t._v(" all ")])],1):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.row.editMode,expression:"!scope.row.editMode"}],staticClass:"d-flex",on:{click:function(i){return t.showProducts(e.row)}}},[e.row.products.length?[t._l(e.row.products,(function(e,a){return[a<5?i("el-image",{key:e.id,staticStyle:{width:"26px",height:"26px","margin-right":"5px"},attrs:{src:t.stockImg(e),fit:"contain",lazy:""}},[i("div",{staticClass:"image-slot",staticStyle:{color:"#C0C4CC","text-align":"center"},attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline"})])]):t._e()]})),e.row.productCnt>5?[i("span",{staticStyle:{color:"#909399"}},[t._v(" ... ("),i("span",{staticStyle:{color:"#5c6ac4"}},[t._v(t._s(e.row.productCnt))]),t._v(") ")])]:t._e()]:[t._v("My all Shopify products")]],2)]}}])}),i("el-table-column",{attrs:{label:"Dispatch to vendor",width:"180",prop:"vendorName"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.editMode?i("el-select",{staticStyle:{width:"170px"},attrs:{filterable:"",remote:"",placeholder:"Please enter a vendor name","remote-method":t.remoteMethodGetVendors,loading:t.automaticSettingDialog.getVendorsloading,size:"mini"},model:{value:e.row.editMode.relationshipId,callback:function(i){t.$set(e.row.editMode,"relationshipId",i)},expression:"scope.row.editMode.relationshipId"}},t._l(t.automaticSettingDialog.vendors,(function(t){return i("el-option",{key:t.id,attrs:{label:t.vendorName,value:t.id}})})),1):i("span",[t._v(t._s(e.row.vendorName))])]}}])}),i("el-table-column",{attrs:{label:"Cycle Time",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.editMode?i("div",[i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini",placeholder:"period"},model:{value:e.row.editMode.period,callback:function(i){t.$set(e.row.editMode,"period",i)},expression:"scope.row.editMode.period"}},t._l(15,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e+""}},[i("span",[t._v(t._s(e))]),t._v(" "),i("span",{staticStyle:{color:"#C0C4CC"}},[t._v("day(s)")])])})),1)],1):i("span",[t._v(" Every "+t._s(e.row.period)+" day(s) ")])]}}])}),i("el-table-column",{attrs:{label:"Vendor visibility",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.editMode?i("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"Vendor visibility"},model:{value:e.row.editMode.visibilityType,callback:function(i){t.$set(e.row.editMode,"visibilityType",i)},expression:"scope.row.editMode.visibilityType"}},t._l(t.visibilityTypeArr,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:e}})})),1):i("span",[t._v(t._s(t.visibilityTypeArr[e.row.visibilityType]))])]}}])}),i("el-table-column",{attrs:{label:"Rule status",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.editMode?i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.row.editMode.status,callback:function(i){t.$set(e.row.editMode,"status",i)},expression:"scope.row.editMode.status"}},[i("el-option",{attrs:{label:"Enabled",value:"1"}}),i("el-option",{attrs:{label:"Disabled",value:"2"}})],1):i("el-tag",{attrs:{type:1==e.row.status?"success":"danger","disable-transitions":!0}},[t._v(" "+t._s(1==e.row.status?"Enabled":"Disabled")+" ")])]}}])}),i("el-table-column",{attrs:{label:"Action"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.editMode?[i("el-button",{attrs:{loading:e.row.loading,disabled:e.row.loading,size:"mini",type:"primary"},on:{click:function(i){return t.saveEditRule(e.row)}}},[t._v("Save Rule")]),i("el-button",{attrs:{disabled:e.row.loading,size:"mini"},on:{click:function(i){return t.cancelEditRule(e.row)}}},[t._v("Cancel")])]:[i("el-link",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(i){return t.editRule(e.row)}}},[t._v("Edit")]),i("el-link",{staticStyle:{"margin-right":"10px"},attrs:{disabled:e.row.statusLoading,type:1==e.row.status?"danger":"success"},on:{click:function(i){return t.changeRuleStatus(e.row)}}},[t._v(" "+t._s(1==e.row.status?"Disable":"Enable")+" ")]),i("el-popconfirm",{attrs:{title:"Do you want to delete it",iconColor:"red",confirmButtonText:"Delete",cancelButtonText:"Cancel"},on:{onConfirm:function(i){return t.delRuleStatus(e.row,e.$index)}}},[i("el-link",{attrs:{slot:"reference",disabled:e.row.delLoading,type:"danger"},slot:"reference"},[t._v("Delete")])],1)]]}}])})],1)],1)],2),i("div",{staticClass:"dialog-footer",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[i("div",[t._v(" Only matching last "),i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},on:{change:t.changeDay},model:{value:t.automaticSettingDialog.day,callback:function(e){t.$set(t.automaticSettingDialog,"day",e)},expression:"automaticSettingDialog.day"}},t._l(t.automaticSettingDialog.dayArr,(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})})),1),t._v(" days unfulfilled orders ")],1),i("div",[i("el-button",{attrs:{disabled:t.automaticSettingDialog.loading},on:{click:function(e){t.automaticSettingDialog.isShow=!1}}},[t._v("Close")]),i("el-button",{attrs:{type:"primary",loading:t.automaticSettingDialog.loading},on:{click:t.dispatchRuleTest}},[t._v(" Dispatch rule TEST ")])],1)]),i("el-dialog",{attrs:{width:"30%",title:"Dispatch rule Test Preview",visible:t.automaticSettingDialog.previewShow,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.automaticSettingDialog,"previewShow",e)}}},[i("div",{staticStyle:{padding:"20px"}},[i("p",{staticStyle:{"margin-bottom":"10px"}},[t._v(" According to your settings, we found some data for you: ")]),i("p",[t._v(" Shopify order: "),i("b",{staticStyle:{"margin-right":"15px",color:"#5c6ac4"}},[t._v(t._s(t.automaticSettingDialog.orderCnt))]),t._v(" (Dispatch to "),i("b",{staticStyle:{color:"#5c6ac4"}},[t._v(t._s(t.automaticSettingDialog.vendorCnt))]),t._v(" vendor(s)) ")])]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{disabled:t.automaticSettingDialog.runLoading},on:{click:function(e){t.automaticSettingDialog.previewShow=!1}}},[t._v(" Dispatch in the Next Cycle ")]),i("el-button",{attrs:{loading:t.automaticSettingDialog.runLoading,disabled:t.automaticSettingDialog.runLoading,type:"primary"},on:{click:t.runDispatchRule}},[t._v("Dispatch Immediately")])],1)]),i("el-dialog",{attrs:{width:"50%",title:"Products",visible:t.automaticSettingDialog.isShowProducts,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.automaticSettingDialog,"isShowProducts",e)}}},[i("div",{staticClass:"preview-product-list"},t._l(t.automaticSettingDialog.showProductsItems,(function(e){return i("div",{key:e.id,staticClass:"pro"},[i("el-image",{staticStyle:{width:"160px",height:"160px"},attrs:{src:t.stockImg(e),fit:"contain"}}),i("div",{staticClass:"name tx-ellipsis2",attrs:{title:e.name}},[t._v(" "+t._s(e.name)+" ")])],1)})),0),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.automaticSettingDialog.isShowProducts=!1}}},[t._v("Close")])],1)])],1),i("el-dialog",{attrs:{visible:t.warningDialog.visible,width:"500px"},on:{"update:visible":function(e){return t.$set(t.warningDialog,"visible",e)}}},[i("div",{staticClass:"warning-dialog"},[i("el-alert",{attrs:{type:"primary",description:t.$t("shopifyOrders.当前可生成订单超过2000条，为了不影响操作性能，建议您指定订单数量进行生成采购单操作"),"show-icon":"",closable:!1}}),i("div",{staticClass:"title"},[t._v(t._s(t.$t("shopifyOrders.请选择查看的订单：")))]),i("div",{staticClass:"radio-d"},[i("el-radio",{attrs:{label:1},on:{change:t.warningRadio},model:{value:t.warningDialog.radio,callback:function(e){t.$set(t.warningDialog,"radio",e)},expression:"warningDialog.radio"}},[t._v(t._s(t.$t("shopifyOrders.按订单编号筛选")))]),i("el-radio",{attrs:{label:2},on:{change:t.warningRadio},model:{value:t.warningDialog.radio,callback:function(e){t.$set(t.warningDialog,"radio",e)},expression:"warningDialog.radio"}},[t._v(t._s(t.$t("shopifyOrders.按订单数量筛选")))])],1),1===t.warningDialog.radio?i("div",[i("el-form",{attrs:{size:"small","label-position":"left","label-width":"120px",model:t.warningDialog}},[i("el-form-item",{attrs:{label:"Order ID From:"}},[i("el-input",{attrs:{type:"number"},model:{value:t.warningDialog.orderStart,callback:function(e){t.$set(t.warningDialog,"orderStart",e)},expression:"warningDialog.orderStart"}},[i("template",{slot:"prepend"},[t._v("#")])],2)],1),i("el-form-item",{attrs:{label:"Order ID TO:"}},[i("el-input",{attrs:{type:"number"},model:{value:t.warningDialog.orderEnd,callback:function(e){t.$set(t.warningDialog,"orderEnd",e)},expression:"warningDialog.orderEnd"}},[i("template",{slot:"prepend"},[t._v("#")])],2)],1)],1)],1):i("div",{staticClass:"warning-order-wrapper"},[i("el-checkbox-group",{attrs:{max:1},model:{value:t.warningDialog.checked,callback:function(e){t.$set(t.warningDialog,"checked",e)},expression:"warningDialog.checked"}},[i("el-checkbox",{attrs:{label:3}},[t._v(" "+t._s(t.$t("shopifyOrders.日期最早可处理的"))+" "),3!==t.warningDialog.checked[0]?i("el-input",{staticClass:"warning-order",attrs:{type:"number",size:"small",disabled:""}}):i("el-input",{staticClass:"warning-order",attrs:{type:"number",size:"small"},model:{value:t.warningDialog.orders,callback:function(e){t.$set(t.warningDialog,"orders",e)},expression:"warningDialog.orders"}}),t._v(" "+t._s(t.$t("shopifyOrders.条订单"))+" ")],1),i("el-checkbox",{attrs:{label:4}},[t._v(" "+t._s(t.$t("shopifyOrders.日期最新可处理的"))+" "),4!==t.warningDialog.checked[0]?i("el-input",{staticClass:"warning-order",attrs:{type:"number",size:"small",disabled:""}}):i("el-input",{staticClass:"warning-order",attrs:{type:"number",size:"small"},model:{value:t.warningDialog.orders,callback:function(e){t.$set(t.warningDialog,"orders",e)},expression:"warningDialog.orders"}}),t._v(" "+t._s(t.$t("shopifyOrders.条订单"))+" ")],1)],1)],1)],1),i("div",{staticClass:"warning-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",[i("el-link",{attrs:{type:"info"},on:{click:t.selectStore2}},[t._v(t._s(t.$t("shopifyOrders.显示全部订单")))])],1),i("div",[i("el-button",{on:{click:function(e){t.warningDialog.visible=!1}}},[t._v(t._s(t.$t("shopifyOrders.取消")))]),i("el-button",{attrs:{type:"primary",loading:t.warningDialog.btnLoading},on:{click:t.confirmViewOrder}},[t._v(t._s(t.$t("shopifyOrders.确认查看订单")))])],1)])]),i("el-dialog",{attrs:{visible:t.DialogLoadingCnt.isShow,width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(e){return t.$set(t.DialogLoadingCnt,"isShow",e)}}},[i("div",{staticClass:"get-invocie-loading"},[i("i",{staticClass:"el-icon-loading"}),i("span",[t._v("Loading "),i("span",[t._v(t._s(parseInt(100*t.DialogLoadingCnt.loadingCnt))+" %")])])])]),i("DialogOrderQTYAlert",{attrs:{data:t.dialogQtyAlert}}),i("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:60}})],1)},s=[],r=i("80ee"),o=(i("237e"),i("5ee8"),i("2c45"),i("e9bb"),i("b0a9"),i("2ee7"),i("c24b"),i("0874"));function n(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=Object(o["a"])(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var a=0,s=function(){};return{s:s,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==i["return"]||i["return"]()}finally{if(l)throw r}}}}var l,c=i("3c7d"),d=(i("6351"),i("1fbe"),i("2283"),i("3d7e"),i("390f"),i("fd7d"),i("abd8"),i("c12c"),i("2261"),i("b101"),i("592d"),i("ca52"),i("f95d"),i("3da3"),i("b3f9"),i("f6be"),i("2480")),u=i("1646"),h={data:function(){return{warningDialog:{visible:!1,radio:1,orderStart:"",orderEnd:"",checked:[],orders:"",page:null,data:null,relationshipId:null},warningDialogDefault:"{}",filterParams:{name:"",customerLike:"",relationshipId:"",codeNameGeq:"",codeNameLeq:""},dynamicTags:[],inputVisible:!1,inputVisible2:!1,vendorName:"",loading:!1,tableHeight:400,tableHeight2:400,page:this.$route.query.page?Number(this.$route.query.page):"1",rowsPerPage:localStorage.getItem("importPerPage")?Number(localStorage.getItem("importPerPage")):20,pageSizes:[10,20,30,50,100],items:[],totalCount:0,totalPage:0,updateOrderLoading:!1,cnow:0,now:Date.parse(new Date)/1e3-this.$store.state.userInfo.timeDiff,updateTime:localStorage.getItem("orders-updateTime")?Number(localStorage.getItem("orders-updateTime")):0,dispatchStatus:"",sortBy:"",fulfillStatus:[],timeFilter:"",shopifyStore:[],dateRangeValue:"",codeName:"",dateArr:{1:"shopifyOrders.today",2:"shopifyOrders.last7Days",3:"shopifyOrders.last30Days",4:"shopifyOrders.last90Days",5:"shopifyOrders.last12Months",6:"shopifyOrders.custom"},sortArr:{1:"shopifyOrders.orderNumberAascending",2:"shopifyOrders.orderNumberDescending",3:"shopifyOrders.dateOldestFirst",4:"shopifyOrders.dateNewestFirst"},dispatchArr:{1:"All",2:"Not dispatched to vendor",3:"Dispatched to vendor"},tableData:[],tableDataTab1:[],tableAll:[],multipleSelection:[],multipleSelectionSub:[],getRowKey:function(t){return t.id},getRowKeyChild:function(t){return t.id},props:{label:"id",children:"items"},checked:!1,filterDate:[],dateFrom:"",dateTo:"",storeList:[],shopifyStoreName:"",supplierList:[],isIndeterminate:!1,checkedSupplier:[],checkedSupplierName:"",isCheckAll:!1,isCancelAll:!1,checkAll:!1,vendorData:[],addVendorDialog:{isShow:!1,loading:!1,labelW:"120px",name:"",remark:"",email:"",id:""},addVendorDialogDefault:"{}",selectData:[],selectDataNoHalf:[],expandedKeys:[],expandAll:!1,exportDialog:!1,exportStatus:"",exportLoading:!1,automaticSettingDialog:{loading:!1,isShow:!1,getProductsloading:!1,allProducts:!1,products:[],productIds:[],getVendorsloading:!1,vendorId:"",vendors:[],period:"",visibilityType:"",status:"1",saveRuleLoading:!1,openRulestatus:!1,page:1,rowsPerPage:10,total:0,totalPage:0,items:[],previewShow:!1,vendorCnt:0,orderCnt:0,isShowProducts:!1,showProductsItems:[],day:30,dayArr:[7,10,15,20,30,45,60],runLoading:!1},automaticSettingDialogDefault:"{}",visibilityTypeArr:{1:"Auto dispatch",2:"After my reconfirm"},ruleCnt:0,isManage:1,defaultChecked:[],selectLoading:!1,checkLoading:!1,filterCustomLoading:!1,filterCustomItems:[],customerId:"",activeCustomer:null,orderMin:void 0,orderMax:void 0,storeId:"",activeStore:null,activeRange:null,activeRangeIds:[],customerH:0,ce:this.$CE,selectArr:[],reSizeTime2:0,isAll1:!1,selectSku:[],allSku:[],selectOrder:[],allOrder:[],tempCode:"",getInvocieTime:0,DialogLoadingCnt:{isShow:!1,loadingCnt:0},dialogQtyAlert:{isShow:!1,item:null}}},components:{DialogOrderQTYAlert:u["a"]},watch:{isAll:function(){this.isAll1=this.isAll},$route:"gotoPage","$store.state.userInfo":function(){this.$store.state.userInfo.ruleCnt&&(this.ruleCnt=this.$store.state.userInfo.ruleCnt)},shopifyStore:function(){var t=this;if(this.shopifyStore.length){var e=[];this.shopifyStore.forEach((function(i){t.storeList.forEach((function(t){i==t.shopifyAccountId&&e.push(t.store)}))})),this.shopifyStoreName=e.join(",")}},checkedSupplier:function(){var t=this;if(this.checkedSupplier.length){var e=[];this.checkedSupplier.forEach((function(i){t.supplierList.forEach((function(t){i==t.id&&"999e"!=t.id&&e.push(t.vendorName)}))})),this.checkedSupplierName=e.join(",")}},isShowFilter:function(){this.isShowFilter}},computed:{selectNum:function(){return this.isCancelAll?this.totalCount-(this.allOrder.length-this.selectOrder.length):this.selectOrder.length},isShowFilter:function(){return!(this.sortBy||this.fulfillStatus.length||this.shopifyStore.length||this.codeName||this.dispatchStatus)},isAll:function(){if(!this.storeId)return!1;for(var t=this.$refs.treeData.getCheckedNodes(),e=0;e<t.length;e++)t[e].items||(t.splice(e,1),e--);return t.length==this.tableData.length&&this.tableData.length>0||t.length==this.tableAll.length&&this.tableAll.length>0}},mounted:function(){var t=this;this.$route.query.page&&(this.page=1,this.$router.push({name:"shopifyOrders"})),this.warningDialogDefault=JSON.stringify(this.warningDialog),this.automaticSettingDialogDefault=JSON.stringify(this.automaticSettingDialog),this.addVendorDialogDefault=JSON.stringify(this.addVendorDialog),this.$nextTick((function(){t.customerH=t.$refs.customerH.clientWidth-30,t.getStore(),t.dynamicTags.push({id:t.$store.state.userInfo.id,vendorName:t.$store.state.userInfo.name}),t.loading=!1})),this.cnow=setInterval((function(){t.now=Date.parse(new Date)/1e3-t.$store.state.userInfo.timeDiff}),1e3),"999e"==this.$route.params.vid&&(this.timeFilter=""),this.$route.params.id&&(this.timeFilter=""),this.checkedSupplier=[]},beforeRouteEnter:function(t,e,i){i((function(t){t.loading=!0}))},beforeDestroy:function(){clearInterval(this.cnow)},methods:(l={formatCode:function(t){if(!t)return"";t=t.replace(/[^0-9]/gi,","),t=t.split(","),t=t.filter((function(t){return t&&t.trim()}));var e=0;return t.forEach((function(t){t>e&&(e=t)})),e},loadAll:function(){var t=this,e={timeFilter:this.timeFilter>=6?"":this.timeFilter,dateFrom:this.dateFrom,dateTo:this.dateTo,sort:this.sortBy,fulfillmentStatus:this.fulfillStatus,keywords:this.codeName,isManage:this.isManage,accountId:this.storeId,codeNameGeq:this.formatCode(this.filterParams.codeNameGeq),codeNameLeq:this.formatCode(this.filterParams.codeNameLeq)};this.$apiCall("api.Invoice.shopifyOrdersByVendor",e,(function(e){t.tableAll=e.Data.Results}))},cancelAll:function(){this.selectSku=[],this.allSku=[],this.allOrder=[],this.selectOrder=[],this.selectData=[],this.selectDataNoHalf=[],this.$refs.treeData.setCheckedKeys([]),this.isCancelAll=!1},selectAll:function(){var t=this;this.selectSku=[],this.allSku=[],this.allOrder=[],this.selectOrder=[],this.isCancelAll=!0,this.tableData.forEach((function(e){e.items&&(t.allOrder.push(e.id),t.selectOrder.push(e.id),e.items.forEach((function(e){t.selectSku.push(e.id),t.allSku.push(e.id)})))})),this.$refs.treeData.setCheckedKeys(this.selectSku)},handleExpandChange:function(t,e,i){},remoteMethodCustom:function(t){var e=this;this.selectArr=[],t&&(this.selectLoading=!0,this.$apiCall("api.Relationship.findByVendor",{name:t},(function(t){e.selectLoading=!1,9999==t.ErrorCode?e.selectArr=t.Data.Results:e.$message({message:t.Message,type:"error"})})))},openWarningDialog:function(t,e){this.warningDialog.radio=1,this.warningDialog.orderStart="",this.warningDialog.orderEnd="",this.warningDialog.checked=[],this.warningDialog.orders="",this.warningDialog.page=null,this.warningDialog.data=t,this.warningDialog.relationshipId=e,this.warningDialog.visible=!0},confirmViewOrder:function(){if(1===this.warningDialog.radio){if(""===this.warningDialog.orderStart||""===this.warningDialog.orderEnd)return void this.$message.error(this.$t("shopifyOrders.请输入订单号"));this.activeRange={max:this.warningDialog.orderEnd,min:this.warningDialog.orderStart}}else{if(!this.warningDialog.checked.length)return void this.$message.error(this.$t("shopifyOrders.请设置查询数量"));this.sortBy=this.warningDialog.checked[0];var t=this.warningDialog.orders;if(""===t)return void this.$message.error(this.$t("shopifyOrders.请设置查询数量"));this.warningDialog.page=Math.ceil(Number(t)/this.rowsPerPage)}var e=this.warningDialog.data;this.storeId=e.id,this.activeStore={shopifyAccountId:e.id,store:e.name,customerName:e.customerName,orderCnt:e.orderCnt,customerId:e.rid,orderNum:e.orderNum},this.warningDialog.visible=!1,this.getItems()},warningRadio:function(){this.warningDialog.checked=[],this.warningDialog.orders="",this.warningDialog.orderStart="",this.warningDialog.orderEnd=""},headerCellStyle:function(){return"color: #5c6ac4;"},filterGetItem:function(){this.getStore()},clearFilter:function(){this.filterParams.name="",this.filterParams.customerLike="",this.filterParams.relationshipId="",this.getStore()},removeStore:function(){this.warningDialog=JSON.parse(this.warningDialogDefault),this.activeRange=null,this.activeStore=null,this.storeId="",this.selectData=[],this.selectDataNoHalf=[],this.tableData=[],this.tableDataTab1=[],this.checked=!1,this.$router.push({name:"shopifyOrders"})},clearRange:function(){},showTree:function(t,e,i){return e.isShow},tableSelect:function(t){var e=this;if("remove"==t&&(this.$refs.treeData.setCheckedKeys([]),this.activeRange=null,this.getItems(),this.checked=!1),"range"==t){if(!this.orderMin&&!this.orderMax)return void this.$elementMessage(this.$t("shopifyOrders.请输入单号范围"),"error");if(this.orderMin>this.orderMax)return void this.$elementMessage(this.$t("shopifyOrders.起始单号必须小于结束单号"),"error");this.$refs.treeData.setCheckedKeys([]),this.selectDataNoHalf=[],this.selectData=[],this.tableData=this.tableDataTab1.slice();for(var i=[],a=function(t){var a=e.tableData[t].codeName;a=a.replace(/[^0-9]/gi,","),a=a.split(","),a=a.filter((function(e){return s=t,e&&e.trim()}));var r=0;a.forEach((function(t){t>r&&(r=t)})),r>=e.orderMin&&r<=(e.orderMax?e.orderMax:Number.POSITIVE_INFINITY)?i.push(e.tableData[t].id):(e.tableData.splice(t,1),t--),s=t},s=0;this.tableData.length>s;s++)a(s);this.$refs.treeData.setCheckedKeys(i),this.$elementMessage(this.$t("shopifyOrders.筛选到了{length}条数据",{length:i.length}),"success"),this.activeRange={min:this.orderMin,max:this.orderMax},this.checked=!!i.length,this.$nextTick((function(){e.handleCheck()})),this.$refs.selectRangePopover.doClose()}},selectStore2:function(){var t=this.warningDialog.data;this.storeId=t.id,this.activeStore={shopifyAccountId:t.id,store:t.name,customerName:t.customerName,orderCnt:t.orderCnt,customerId:t.rid,orderNum:t.orderNum},this.warningDialog.visible=!1,this.getItems()},selectStore:function(t,e,i){this.warningDialog.relationshipId=e,this.storeId=t.id,this.activeStore={shopifyAccountId:t.id,store:t.name,customerName:t.customerName,orderCnt:t.orderCnt,customerId:t.rid,orderNum:t.orderNum},this.isManage=i?2:1,this.cancelAll(),this.clearFilterItems(),this.loadAll()},getCustom:function(t){var e=this;t&&(this.filterCustomLoading=!0,this.$apiCall("api.Relationship.findByVendor",{name:t},(function(t){e.filterCustomLoading=!1,9999==t.ErrorCode?e.filterCustomItems=t.Data.Results:e.$elementMessage(t.Message,"error")})))},setOrderHideChecked:function(){var t=this;this.$confirm(2==this.isManage?this.$t("shopifyOrders.是否要显示选择订单, 是否继续?"):this.$t("shopifyOrders.是否要隐藏选择订单, 是否继续?"),this.$t("shopifyOrders.提示"),{confirmButtonText:2==this.isManage?this.$t("shopifyOrders.显示"):this.$t("shopifyOrders.隐藏"),cancelButtonText:this.$t("shopifyOrders.取消"),type:"warning"}).then((function(){var e=[];t.allOrder.forEach((function(i){t.selectOrder.some((function(t){if(t==i)return!0}))||e.push(i)}));var i={orderIds:t.isCancelAll?[]:t.selectOrder,notOrderIds:t.isCancelAll?e:[],type:1==t.isManage?2:1,isAll:t.isCancelAll,accountId:t.storeId,timeFilter:t.timeFilter>=6?"":t.timeFilter,dateFrom:t.dateFrom,dateTo:t.dateTo,fulfillmentStatus:t.fulfillStatus,keywords:t.codeName,codeNameGeq:t.formatCode(t.filterParams.codeNameGeq),codeNameLeq:t.formatCode(t.filterParams.codeNameLeq)};t.$showLoading(),t.$apiCall("api.ShopifyAccount.setOrderHideByVendor",i,(function(e){t.$hideLoading(),9999==e.ErrorCode?(t.cancelAll(),t.tableData=[],t.tableDataTab1=[],t.getItems(),t.selectDataNoHalf=[],t.selectData=[],t.$refs.treeData.setCheckedKeys([]),t.activeRange=null,t.tableSelect("remove")):(t.$hideLoading(),t.$elementMessage(e.Message,"error"))}))}))},setOrderHide:function(t){var e=this;this.$confirm(2==this.isManage?this.$t("shopifyOrders.是否要显示此订单, 是否继续?"):this.$t("shopifyOrders.是否要隐藏此订单, 是否继续?"),this.$t("shopifyOrders.提示"),{confirmButtonText:this.$t("shopifyOrders.隐藏"),cancelButtonText:this.$t("shopifyOrders.取消"),type:"warning"}).then((function(){var i=[];i.push(t.id),e.$showLoading(),e.$apiCall("api.ShopifyAccount.setOrderHideByVendor",{orderIds:i,type:1==e.isManage?2:1},(function(i){e.$hideLoading(),9999==i.ErrorCode?(e.allOrder.forEach((function(i,a){i==t.id&&e.allOrder.splice(a,1)})),e.selectOrder.forEach((function(i,a){i==t.id&&e.selectOrder.splice(a,1)})),e.tableData.forEach((function(i){i.id==t.id&&i.items.forEach((function(t){console.log(t.id),e.selectSku.forEach((function(i,a){i==t.id&&(console.log(1),e.selectSku.splice(a,1))})),e.allSku.forEach((function(i,a){i==t.id&&e.allSku.splice(a,1)}))}))})),e.tableData=[],e.tableDataTab1=[],e.selectDataNoHalf=[],e.selectData=[],e.activeRange=null,e.tableSelect("remove")):(e.$hideLoading(),e.$elementMessage(i.Message,"error"))}))}))},changeDay:function(){var t=this;this.$apiCall("api.DispatchOrderRule.setMatchTime",{day:this.automaticSettingDialog.day},(function(e){9999==e.ErrorCode?t.$root.$children[0].checkLogin():t.$elementMessage(e.Message,"error")}))},showProducts:function(t){var e=this;if(t.products.length){var i=function(){e.automaticSettingDialog.showProductsItems=t.products,e.automaticSettingDialog.isShowProducts=!0};t.productCnt>t.products.length?(this.automaticSettingDialog.loading=!0,this.$apiCall("api.DispatchOrderRule.getProductById",{ruleId:t.id},(function(a){e.automaticSettingDialog.loading=!1,9999==a.ErrorCode?(t.products=a.Data.Results,i()):e.$elementMessage(a.Message,"error")}))):i()}},runDispatchRule:function(){var t=this;this.automaticSettingDialog.runLoading=!0,this.$apiCall("api.DispatchOrderRule.testGenerate",{isGenerate:1},(function(e){t.automaticSettingDialog.runLoading=!1,9999==e.ErrorCode?(t.$elementMessage("success","success"),t.automaticSettingDialog.isShow=!1,t.automaticSettingDialog.previewShow=!1,t.getItems()):t.$elementMessage(e.Message,"error")}))},dispatchRuleTest:function(){var t=this;this.automaticSettingDialog.loading=!0,this.$apiCall("api.DispatchOrderRule.testGenerate",{},(function(e){t.automaticSettingDialog.loading=!1,9999==e.ErrorCode?(t.automaticSettingDialog.vendorCnt=e.Data.Results.vendorCnt,t.automaticSettingDialog.orderCnt=e.Data.Results.orderCnt,t.automaticSettingDialog.previewShow=!0):t.$elementMessage(e.Message,"error")}))},delRuleStatus:function(t,e){var i=this;t.delLoading=!0,this.$apiCall("api.DispatchOrderRule.deleteRule",{id:t.id},(function(a){t.delLoading=!1,9999==a.ErrorCode?(i.automaticSettingDialog.items.splice(e,1),i.ruleCnt=i.automaticSettingDialog.items.length):i.$elementMessage(a.Message,"error")}))},changeRuleStatus:function(t){var e=this;t.statusLoading=!0,this.$apiCall("api.DispatchOrderRule.setStatus",{id:t.id},(function(i){t.statusLoading=!1,9999==i.ErrorCode?e.$set(t,"status",1==t.status?"2":"1"):e.$elementMessage(i.Message,"error")}))},editRule:function(t){var e=this,i=function(){e.automaticSettingDialog.getProductsloading=!1,e.automaticSettingDialog.getVendorsloading=!1,e.automaticSettingDialog.items.forEach((function(t){e.$set(t,"editMode",null)})),t.editMode={id:t.id,relationshipId:t.relationshipId,period:t.period,visibilityType:t.visibilityType,status:t.status,productIds:[],allProducts:!t.products.length},e.automaticSettingDialog.vendors=[{vendorName:t.vendorName,id:t.relationshipId}],e.automaticSettingDialog.products=t.products,e.$nextTick((function(){e.automaticSettingDialog.products.forEach((function(e){t.editMode.productIds.push(e.id)}))}))};t.productCnt>t.products.length?(this.automaticSettingDialog.loading=!0,this.$apiCall("api.DispatchOrderRule.getProductById",{ruleId:t.id},(function(a){e.automaticSettingDialog.loading=!1,9999==a.ErrorCode?(t.products=a.Data.Results,i()):e.$elementMessage(a.Message,"error")}))):i()},stockImg:function(t){return JSON.parse(t.imgsJson)[0]},cancelEditRule:function(t){this.$set(t,"editMode",null)},saveEditRule:function(t){var e=this;if(t.editMode.allProducts||t.editMode.productIds.length)if(t.editMode.relationshipId)if(t.editMode.period)if(t.editMode.visibilityType){t.loading=!0;var i={id:t.editMode.id,relationshipId:t.editMode.relationshipId,period:t.editMode.period,visibilityType:t.editMode.visibilityType,productIds:t.editMode.productIds,status:t.editMode.status};t.editMode.allProducts&&(i.productIds=[]),this.$apiCall("api.DispatchOrderRule.changeByCustomer",i,(function(i){t.loading=!1,9999==i.ErrorCode?(e.$set(t,"editMode",null),e.getAutomaticSettingItems()):e.$elementMessage(i.Message,"error")}))}else this.$elementMessage(this.$t("shopifyOrders.pleaseSelectTheVendowVisibility"),"error");else this.$elementMessage(this.$t("shopifyOrders.pleaseSelectTheCirclePeriod"),"error");else this.$elementMessage(this.$t("shopifyOrders.pleaseSelectTheVendor"),"error");else this.$elementMessage(this.$t("shopifyOrders.pleaseSelectTheProducts"),"error")},saveRule:function(){var t=this;if(this.automaticSettingDialog.allProducts||this.automaticSettingDialog.productIds.length)if(this.automaticSettingDialog.vendorId)if(this.automaticSettingDialog.period)if(this.automaticSettingDialog.visibilityType){this.automaticSettingDialog.saveRuleLoading=!0;var e={relationshipId:this.automaticSettingDialog.vendorId,period:this.automaticSettingDialog.period,visibilityType:this.automaticSettingDialog.visibilityType,productIds:this.automaticSettingDialog.productIds,status:this.automaticSettingDialog.status};this.automaticSettingDialog.allProducts&&(e.productIds=[]),this.$apiCall("api.DispatchOrderRule.addByCustomer",e,(function(e){t.automaticSettingDialog.saveRuleLoading=!1,9999==e.ErrorCode?(t.changeOpenAddRule(!1),t.getAutomaticSettingItems()):t.$elementMessage(e.Message,"error")}))}else this.$elementMessage(this.$t("shopifyOrders.pleaseSelectTheVendowVisibility"),"error");else this.$elementMessage(this.$t("shopifyOrders.pleaseSelectTheCirclePeriod"),"error");else this.$elementMessage(this.$t("shopifyOrders.pleaseSelectTheVendor"),"error");else this.$elementMessage(this.$t("shopifyOrders.pleaseSelectTheProducts"),"error")},changeOpenAddRule:function(t){this.automaticSettingDialog.openRulestatus=t,t&&(this.automaticSettingDialog.getProductsloading=!1,this.automaticSettingDialog.allProducts=!1,this.automaticSettingDialog.products=[],this.automaticSettingDialog.productIds=[],this.automaticSettingDialog.getVendorsloading=!1,this.automaticSettingDialog.vendorId="",this.automaticSettingDialog.vendors=[],this.automaticSettingDialog.period="",this.automaticSettingDialog.visibilityType="",this.automaticSettingDialog.status="1")},remoteMethodGetVendors:function(t){var e=this;t&&(this.automaticSettingDialog.getVendorsloading=!0,this.$apiCall("api.Relationship.findByCustomer",{name:t},(function(t){e.automaticSettingDialog.getVendorsloading=!1,9999==t.ErrorCode&&(e.automaticSettingDialog.vendors=t.Data.Results)})))},remoteMethodGetProducts:function(t){var e=this;t&&(this.automaticSettingDialog.getProductsloading=!0,this.$apiCall("api.Product.findByUser",{name:t},(function(t){e.automaticSettingDialog.getProductsloading=!1,9999==t.ErrorCode&&(e.automaticSettingDialog.products=[],t.Data.Results.forEach((function(t){JSON.parse(t.imgsJson).length&&(t.img=JSON.parse(t.imgsJson)[0]),e.automaticSettingDialog.products.push(t)})))})))},getAutomaticSettingItems:function(t){var e=this;t||(this.automaticSettingDialog.loading=!0);var i={};this.$apiCall("api.DispatchOrderRule.findByCustomer",i,(function(t){e.automaticSettingDialog.loading=!1,9999==t.ErrorCode?(e.automaticSettingDialog.items=[],t.Data.Results.forEach((function(t){t.loading=!1,t.statusLoading=!1,t.delLoading=!1,t.editMode=null,e.automaticSettingDialog.items.push(t)})),e.ruleCnt=e.automaticSettingDialog.items.length):e.$elementMessage(t.Message,"error")}))},openAutomaticSetting:function(){var t=this;this.automaticSettingDialog=JSON.parse(this.automaticSettingDialogDefault),this.automaticSettingDialog.day=this.$store.state.userInfo.config&&this.$store.state.userInfo.config.matchDay?this.$store.state.userInfo.config.matchDay:30,this.automaticSettingDialog.isShow=!0,this.getAutomaticSettingItems(),this.$nextTick((function(){var e=t.$refs.autoSettingTable.$refs.bodyWrapper.childNodes[0].childNodes[1],i=t;d["default"].create(e,{onEnd:function(t){var e=t.newIndex,a=t.oldIndex,s={};a>e?(s.id=i.automaticSettingDialog.items[a].id,s.toId=i.automaticSettingDialog.items[e].id):(s.id=i.automaticSettingDialog.items[a].id,s.toId=e==i.automaticSettingDialog.items.length-1?"":i.automaticSettingDialog.items[e+1].id),i.$apiCall("api.DispatchOrderRule.changeSort",s,(function(t){i.getAutomaticSettingItems(!0),9999!=t.ErrorCode&&i.$elementMessage(t.Message,"error")}));var r=i.automaticSettingDialog.items.splice(a,1)[0];i.automaticSettingDialog.items.splice(e,0,r)}})}))},getStore:function(){var t=this;this.storeList=[],this.loading=!0,this.$apiCall("api.ShopifyAccount.findByVendor",{authStatus:1,customerName:this.filterParams.name,rid:this.filterParams.relationshipId,keywords:this.filterParams.customerLike},(function(e){if(t.loading=!1,9999==e.ErrorCode){if(!e.Data.Results.length)return;t.storeList=e.Data.Results,t.storeList.forEach((function(e){e.shops&&e.shops.forEach((function(i){i.orderNum=e.orderNum,i.rid=e.relationship.customerId,t.$apiCall("api.ShopifyAccount.getCntDetail",{accountId:i.id,relationshipId:e.relationship.id},(function(e){9999==e.ErrorCode&&(i.hideOrderCnt=e.Data.Results.hideOrderCnt,i.orderCnt=e.Data.Results.orderCnt,t.storeList=Object(c["a"])(t.storeList))}))}))}))}else t.$message({message:e.Message,type:"error"})}))},exportOrders:function(){var t=this,e={email:this.$store.state.userInfo.email,timeFilter:this.timeFilter>=6?"":this.timeFilter,dateFrom:this.dateFrom,dateTo:this.dateTo,sort:this.sortBy,fulfillmentStatus:this.fulfillStatus,accountIds:this.shopifyStore,keywords:this.codeName,codeNameGeq:this.formatCode(this.filterParams.codeNameGeq),codeNameLeq:this.formatCode(this.filterParams.codeNameLeq),accountId:this.activeStore.shopifyAccountId},i={email:this.$store.state.userInfo.email,accountId:this.activeStore.shopifyAccountId},a=[];if(this.allOrder.forEach((function(e){t.selectOrder.some((function(t){if(t==e)return!0}))||a.push(e)})),2==this.exportStatus&&(e.isAll=this.isCancelAll,e.ids=this.isCancelAll?[]:this.selectOrder,e.notOrderIds=this.isCheckAll?a:[]),3==this.exportStatus&&(2==this.dispatchStatus&&(e.fulfillType=1),3==this.dispatchStatus)){e.fulfillType=2;var s=[];this.checkedSupplier.forEach((function(e){t.supplierList.forEach((function(t){e==t.id&&s.push(t.id)}))})),e.fulfillRelationshipIds=s}this.exportLoading=!0,this.$apiCall("api.Invoice.exportShopifyOrdersByVendor",1==this.exportStatus?i:e,(function(e){if(t.exportLoading=!1,9999==e.ErrorCode){t.exportDialog=!1,console.log(t.$i18n.locale);var i="zh"==t.$i18n.locale?"<strong>订单正在导出</strong><br/>您导出的订单将会被发送到: ".concat(t.$store.state.userInfo.email,"。 <br/>订单导出的速度取决于所选订单数量的多少。"):"<strong>Your Orders are exporting</strong><br/>Your export will be delivered by email to: ".concat(t.$store.state.userInfo.email,". <br/>Depending on how many Orders you’re exporting, this could take some time.");t.$message({offset:200,duration:0,dangerouslyUseHTMLString:!0,showClose:!0,message:i,type:"success"})}else t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure()}))},exportDialogOpen:function(){this.exportDialog=!0,this.exportStatus="",this.exportLoading=!1},openAddVendor:function(){this.addVendorDialog=JSON.parse(this.addVendorDialogDefault),this.addVendorDialog.name=this.vendorName,this.addVendorDialog.isShow=!0},saveVendor:function(t){var e=this;if(this.addVendorDialog.name){this.addVendorDialog.loading=!0;var i="api.Relationship.addByCustomer",a={name:this.addVendorDialog.name,email:this.addVendorDialog.email,remark:this.addVendorDialog.remark};this.$apiCall(i,a,(function(i){e.addVendorDialog.loading=!1,9999==i.ErrorCode?(e.vendorName="",e.addVendorDialog.isShow=!1,e.$elementMessage(e.$t("shopifyOrders.customersSuccessfullyAdded"),"success"),2==t?(e.dynamicTags.push({id:i.Data.Results,vendorName:e.addVendorDialog.name}),e.inputVisible=!1,e.vendorName=""):e.showInput(),e.getVendor()):(e.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||e.$userFailure())}))}else this.$elementMessage("Customer name required","error")},getInvocie:function(){var t=this;if(this.getPageSku(),this.selectSku.length||this.isCancelAll){var e=[];this.allSku.forEach((function(i){t.selectSku.some((function(t){if(t==i)return!0}))||e.push(i)})),this.tempCode="".concat(this.storeId).concat(Date.parse(new Date));var i={skus:this.isCancelAll?[]:this.selectSku,relationshipId:this.warningDialog.relationshipId,isAll:this.isCancelAll,notSkus:this.isCancelAll?e:[],accountId:this.storeId,timeFilter:this.timeFilter>=6?"":this.timeFilter,dateFrom:this.dateFrom,dateTo:this.dateTo,fulfillmentStatus:this.fulfillStatus,keywords:this.codeName,tempCode:this.tempCode,codeNameGeq:this.formatCode(this.filterParams.codeNameGeq),codeNameLeq:this.formatCode(this.filterParams.codeNameLeq)};this.DialogLoadingCnt.loadingCnt=0,this.DialogLoadingCnt.isShow=!0,this.getInvocieTime=setInterval((function(){t.$apiCall("api.Invoice.checkPriceResult",{tempCode:t.tempCode,type:3},(function(e){if("9999"==e.ErrorCode){var i=e.Data.Results;i.count&&i.all&&(t.DialogLoadingCnt.loadingCnt=i.count/i.all),1!=i.status&&(t.tempCode="",clearInterval(t.getInvocieTime),t.DialogLoadingCnt.isShow=!1,3==i.status&&i.message&&t.$elementMessage(i.message,"error"),2==i.status&&(t.$elementMessage(t.$t("shopifyOrders.aNewOrderSuccessfullyCreated"),"success"),sessionStorage.setItem("selectedSaveInfo",JSON.stringify(i.invoiceArr)),setTimeout((function(){t.$router.push({name:"waitingForOffer",params:{saveCode:!0,code:i.invoiceArr[0].code}})}),1e3)))}}))}),1e3),this.$apiCall("api.Invoice.genInvoiceByVendor",i,(function(e){if(9998==e.ErrorCode)return t.dialogQtyAlert.isShow=!0,void(t.dialogQtyAlert.item=t.activeStore)}))}else this.$elementMessage(this.$t("shopifyOrders.pleaseChooseAnItem"),"error")},changeCustomerName:function(){var t=this;window.lazy&&window.clearTimeout(window.lazy),window.lazy=setTimeout((function(){t.$apiCall("api.Relationship.findByCustomer",{name:t.vendorName},(function(e){"9999"==e.ErrorCode?t.vendorData=e.Data.Results:(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure())}))}),400)},getVendor:function(){var t=this;this.$apiCall("api.Relationship.findByCustomer",{},(function(e){"9999"==e.ErrorCode?(t.vendorData=e.Data.Results,1==e.Data.Results.length&&t.dynamicTags.push(e.Data.Results[0])):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure())}))},selectCustomer:function(t){var e=this;this.dynamicTags=[],setTimeout((function(){e.inputVisible=!1,e.inputVisible2=!1,e.vendorName="",e.dynamicTags.push(t)}),300)},handleClose:function(t){this.dynamicTags.splice(t,1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},hidepopoverCustomer:function(){var t=this;setTimeout((function(){t.inputVisible=!1,t.inputVisible2=!1}),100)},handleCheckAllChange:function(t){var e=this,i=[];if(this.supplierList.forEach((function(t){i.push(t.id)})),this.checkedSupplier=t?i:[],this.isIndeterminate=!1,1==this.checkedSupplier.length)this.supplierList.forEach((function(t){t.id==e.checkedSupplier[0]&&e.changeSupplierTag(t)}));else{var a=[];this.checkedSupplier.forEach((function(t){e.supplierList.forEach((function(e){t==e.id&&"999e"!=t&&e.listInfo.length&&e.listInfo.forEach((function(t){a.push(t.id),t.items&&t.items.length&&t.items.forEach((function(t){a.push(t.id)}))}))}))})),this.tableData=this.tableDataTab1;var s=JSON.parse(JSON.stringify(this.tableDataTab1));s.forEach((function(t,e){s[e].items=[]})),a.length&&(a.forEach((function(t){e.tableData.forEach((function(e,i){e.items.forEach((function(e,a){t==e.id&&s[i].items.push(e)}))}))})),this.tableData=[],s.forEach((function(t,i){t.items.length>0&&e.tableData.push(t)})))}},handleCheckedCitiesChange:function(t){var e=this,i=t.length;if(this.checkAll=i===this.supplierList.length-1,this.isIndeterminate=i>0&&i<this.supplierList.length-1,1==this.checkedSupplier.length)this.supplierList.forEach((function(t){t.id==e.checkedSupplier[0]&&e.changeSupplierTag(t)}));else{var a=[];this.checkedSupplier.forEach((function(t){e.supplierList.forEach((function(e){t==e.id&&e.listInfo.length&&e.listInfo.forEach((function(t){a.push(t.id),t.items&&t.items.length&&t.items.forEach((function(t){a.push(t.id)}))}))}))})),this.tableData=this.tableDataTab1;var s=JSON.parse(JSON.stringify(this.tableDataTab1));s.forEach((function(t,e){s[e].items=[]})),a.length&&(a.forEach((function(t){e.tableData.forEach((function(e,i){e.items.forEach((function(e,a){t==e.id&&s[i].items.push(e)}))}))})),this.tableData=[],s.forEach((function(t,i){t.items.length>0&&e.tableData.push(t)})))}},dateChange:function(){this.filterDate.length>1&&(this.dateFrom=this.$moment(this.filterDate[0]).unix(),this.dateTo=this.$moment(this.filterDate[1]).endOf("d").unix(),this.selectData=[],this.expandedKeys=[],this.expandAll=!1,this.checked=!1,this.$refs.treeData.setCheckedKeys([]),this.page=1,this.clearRange(),this.getItems())},changeSupplierTag:function(t){var e=this;this.$showLoading();var i=this.$refs.treeData.store.nodesMap;for(var a in i)i[a].expanded=!1;setTimeout((function(){e.expandedKeys=[],"999e"!=t.id&&(e.dynamicTags=[],e.dynamicTags.push({id:t.id,vendorName:t.vendorName})),e.supplierTag=t.id,e.storeTag="";var i=[];t.listInfo.length&&(t.listInfo.forEach((function(t){i.push(t.id),t.items&&t.items.length&&t.items.forEach((function(t){i.push(t.id)}))})),e.$hideLoading()),e.tableData=e.tableDataTab1;var a=JSON.parse(JSON.stringify(e.tableDataTab1));a.forEach((function(t,e){a[e].items=[]})),i.length&&(i.forEach((function(t){e.tableData.forEach((function(e,i){e.items.forEach((function(e,s){t==e.id&&a[i].items.push(e)}))}))})),e.tableData=[],a.forEach((function(t,i){t.items.length>0&&e.tableData.push(t)})))}),300)},filterItems2:function(t){this.isManage=t,this.selectData=[],this.expandedKeys=[],this.expandAll=!1,this.checked=!1,this.$refs.treeData.setCheckedKeys([]),this.activeRange=null,this.page=1,this.cancelAll(),this.getItems()},filterItems:function(t){var e=this;switch(t){case"range":this.$refs.selectRangePopover.showPopper=!1,this.filterParams.codeNameGeq=this.orderMin,this.filterParams.codeNameLeq=this.orderMax;break;case"dispatch":return this.checkedSupplier=[],this.checkAll=!1,void(1==this.dispatchStatus?(this.selectData=[],this.expandedKeys=[],this.expandAll=!1,this.checked=!1,this.$refs.treeData.setCheckedKeys([]),this.getItems()):2==this.dispatchStatus&&this.supplierList.forEach((function(t){"999e"==t.id&&e.changeSupplierTag(t)})));case"store":break;case"date":if(this.filterDate=[],this.dateFrom="",this.dateTo="",6==this.timeFilter)return;break;case"fulfill":break;case"sort":break;case"activeRange":this.warningDialog.orderEnd="",this.warningDialog.orderStart="";break;default:break}this.selectData=[],this.expandedKeys=[],this.expandAll=!1,this.checked=!1,this.$refs.treeData.setCheckedKeys([]),this.activeRange=null,this.cancelAll(),1==this.page?this.getItems("range"==t&&(this.filterParams.codeNameGeq||this.filterParams.codeNameLeq)):this.$router.push({query:{page:1}})},getCodeName:function(){var t=this;this.codeName&&(this.cancelAll(),window.lazycodeName&&window.clearTimeout(window.lazycodeName),window.lazycodeName=setTimeout((function(){t.checked=!1,t.selectData=[],t.expandedKeys=[],t.expandAll=!1,t.checked=!1,t.$refs.treeData.setCheckedKeys([]),t.page=1,t.activeRange=null,t.getItems()}),400))},clearFilterItems:function(t){switch((this.$route.params.id||"999e"==this.$route.params.vid)&&window.location.reload(),t){case"range":this.$refs.selectRangePopover.showPopper=!1,this.orderMin=this.orderMax=this.filterParams.codeNameGeq=this.filterParams.codeNameLeq=void 0;break;case"dispatch":this.dispatchStatus="",this.checkedSupplier=[],this.isIndeterminate=!1;break;case"store":this.shopifyStore=[];break;case"date":this.timeFilter="",this.filterDate=[],this.dateFrom="",this.dateTo="";break;case"fulfill":this.fulfillStatus=[];break;case"sort":this.sortBy="";break;case"warningDialog-page":this.warningDialog.page=null;break;default:this.codeName="",this.timeFilter="",this.filterDate=[],this.dateFrom="",this.dateTo="",this.sortBy="",this.fulfillStatus=[];break}this.dynamicTags=[],this.selectData=[],this.expandedKeys=[],this.expandAll=!1,this.checked=!1,this.$refs.treeData.setCheckedKeys([]),this.activeRange=null,this.isShowFilter,this.cancelAll(),1==this.page?this.getItems():this.$router.push({query:{page:1}})},expandChange:function(){var t=this;this.tableData.length||reutrn,this.$showLoading(),this.expandAll=!this.expandAll,this.$nextTick((function(){var e=t.$refs.treeData.store.nodesMap;for(var i in e)e[i].expanded=t.expandAll;t.$hideLoading()}))},gotoInvoice:function(t){var e=this.$router.resolve({path:"/i/"+t.uniCode});window.open(e.href,"_blank")},handleCheckChange:function(t,e,i){var a=this;if(e)t.items?t.items.forEach((function(t){a.selectSku.push(t.id)})):this.selectSku.push(t.id);else if(t.items)for(var s=function(e){t.items.some((function(t){if(t.id==a.selectSku[e])return r=e,!0}))&&(a.selectSku.splice(e,1),e--),r=e},r=0;r<this.selectSku.length;r++)s(r);else this.selectSku.forEach((function(e,i){e==t.id&&a.selectSku.splice(i,1)}));this.selectSku=Object(c["a"])(new Set(this.selectSku))},handleCheck:function(t,e){var i=this;if(t){var a=this.$refs.treeData.getCheckedNodes().concat(this.$refs.treeData.getHalfCheckedNodes()),s=[],r=[];a.forEach((function(t){t.items&&s.push(t.id)})),this.tableData.forEach((function(t){s.some((function(e){if(e==t.id)return!0}))||r.push(t.id)})),s.forEach((function(t){i.selectOrder.push(t)})),console.log(r);for(var o=function(t){r.some((function(e){if(e==i.selectOrder[t])return n=t,!0}))&&(i.selectOrder.splice(t,1),t--),n=t},n=0;n<this.selectOrder.length;n++)o(n);this.selectOrder=Object(c["a"])(new Set(this.selectOrder))}this.$refs.treeData.getCheckedKeys();var l=this.$refs.treeData.getHalfCheckedNodes();this.selectData=[];var d=this.$refs.treeData.getCheckedNodes().concat(l);d.forEach((function(t){t.items&&i.selectData.push(t.id)})),this.selectDataNoHalf=this.selectData},changeAllCheck:function(t){var e=this;this.checkLoading=!0;var i=0;this.tableData.length&&this.tableData.forEach((function(t){i++})),this.tableData.length==i&&setTimeout((function(){e.checkLoading=!1}),1600),setTimeout((function(){e.defaultChecked=[];if(t){var i=[];e.tableData.length&&e.tableData.forEach((function(t){i.push(t.id),e.defaultChecked.push(t.id),t.items&&t.items.length&&t.items.forEach((function(t){i.push(t.id)}))})),e.$refs.treeData.setCheckedKeys(i)}else e.$refs.treeData.setCheckedKeys([]);e.handleCheck()}),600)},checkedAll:function(){var t=this;if(this.tableData.length){if(this.isCheckAll=this.isAll1,this.defaultChecked=[],this.isCheckAll){var e=[];this.tableData.forEach((function(i){e.push(i.id),t.selectOrder.push(i.id),t.defaultChecked.push(i.id),i.items&&i.items.length&&i.items.forEach((function(t){e.push(t.id)}))})),this.$refs.treeData.setCheckedKeys(e)}else{for(var i=function(e){t.tableData.some((function(i){if(i.id==t.selectOrder[e])return a=e,!0}))&&(t.selectOrder.splice(e,1),e--),a=e},a=0;a<this.selectOrder.length;a++)i(a);this.$refs.treeData.setCheckedKeys([])}this.selectOrder=Object(c["a"])(new Set(this.selectOrder)),this.handleCheck()}}},Object(r["a"])(l,"handleExpandChange",(function(t,e,i){})),Object(r["a"])(l,"getPageSku",(function(){var t=this,e=this.$refs.treeData.getCheckedNodes().concat(this.$refs.treeData.getHalfCheckedNodes());e.forEach((function(e){e.items?t.selectOrder.push(e.id):t.selectSku.push(e.id)})),this.tableData.forEach((function(e){e.items&&(e.items.forEach((function(e){t.allSku.push(e.id)})),t.allOrder.push(e.id))})),this.selectSku=Object(c["a"])(new Set(this.selectSku)),this.allSku=Object(c["a"])(new Set(this.allSku)),this.selectOrder=Object(c["a"])(new Set(this.selectOrder)),this.allOrder=Object(c["a"])(new Set(this.allOrder))})),Object(r["a"])(l,"getItems",(function(t){var e=this;this.loading=!0,this.getPageSku(),this.tableData=[],this.tableDataTab1=[];var i={page:this.page,rowsPerPage:this.rowsPerPage,timeFilter:this.timeFilter>=6?"":this.timeFilter,dateFrom:this.dateFrom,dateTo:this.dateTo,sort:this.sortBy,fulfillmentStatus:this.fulfillStatus,keywords:this.codeName,isManage:this.isManage,accountId:this.storeId,codeNameGeq:this.formatCode(this.filterParams.codeNameGeq),codeNameLeq:this.formatCode(this.filterParams.codeNameLeq)};this.$apiCall("api.Invoice.shopifyOrdersByVendor",i,(function(i){if("9999"==i.ErrorCode){e.tableData=[],e.tableDataTab1=[],e.totalPage=i.Data.Pagination.totalPage,e.totalCount=i.Data.Pagination.totalCount;var a=i.Data.Results;e.warningDialog.page&&e.warningDialog.page<=e.page&&Number(e.warningDialog.orders!=e.rowsPerPage)&&(a=a.slice(0,Number(e.warningDialog.orders)%e.rowsPerPage)),a.forEach((function(t){e.$set(t,"shippingJson",JSON.parse(t.shippingJson)),e.$set(t,"span",!0),e.$set(t,"isShow",!0),t.items.length&&t.items.forEach((function(t){e.$set(t,"previewList",[]),e.$set(t,"disabled",0==t.unfulfillQuantity),t.imgUrl&&t.previewList.push(t.imgUrl)})),e.tableData.push(t),e.tableDataTab1.push(t)}));var s=e.$refs.treeData?e.$refs.treeData.store.nodesMap:"";if(s)for(var r in s)s[r].expanded=!1;e.$nextTick((function(){e.loading=!1,e.$hideLoading()})),t&&(e.allOrder=[],e.isCancelAll=!0,e.tableData.forEach((function(t){t.items&&t.items.forEach((function(t){e.selectSku.push(t.id)}))})),e.selectSku=Object(c["a"])(new Set(e.selectSku)),e.$refs.treeData.setCheckedKeys(e.selectSku)),e.isCancelAll&&(e.tableData.forEach((function(t){t.items&&t.items.forEach((function(t){e.allSku.some((function(e){if(e==t.id)return!0}))||e.selectSku.push(t.id)}))})),e.selectSku=Object(c["a"])(new Set(e.selectSku))),e.$refs.treeData.setCheckedKeys(e.selectSku),e.$nextTick((function(){if(e.getPageSku(),e.expandAll){console.log(e.$refs.treeData.store.root);for(var t=0;t<e.$refs.treeData.store.root.childNodes.length;t++)e.$refs.treeData.store.root.childNodes[t].expanded=!0}}))}else e.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||e.$userFailure()}))})),Object(r["a"])(l,"toPage",(function(t){t!=this.$route.query.page?this.$router.push({query:{page:t}}):this.getItems()})),Object(r["a"])(l,"changePageSize",(function(t){this.rowsPerPage=t,localStorage.setItem("importPerPage",t),this.gotoPage()})),Object(r["a"])(l,"gotoPage",(function(){this.storeId&&(this.page=this.$route.query.page?this.$route.query.page:1,this.getItems(),this.selectData=[],this.$refs.treeData.setCheckedKeys([]))})),Object(r["a"])(l,"load",(function(t,e){var i=this;if(t>e)setTimeout((function(){var t=[];if(i.tableData.length){if(i.tableData.forEach((function(e,i){e.items&&e.items.length&&e.items.forEach((function(e,i){t.push(e)}))})),i.supplierList=i.buildArrayGroup(t),i.supplierList.forEach((function(t,e){if(!t.id){i.$set(t,"id","999e"),i.$set(t,"vendorName","Unbound vendors");var a=t;i.supplierList.splice(e,1),i.supplierList.unshift(a)}})),"999e"==i.$route.params.vid&&(i.dispatchStatus=2),i.$route.params.id&&(i.checkedSupplier=[],i.dispatchStatus=3,i.supplierList.forEach((function(t){i.$route.params.id==t.id&&i.checkedSupplier.push(i.$route.params.id)}))),2==i.dispatchStatus)i.supplierList.forEach((function(t){"999e"==t.id&&i.changeSupplierTag(t)}));else if(3==i.dispatchStatus)if(0==i.checkedSupplier.length)i.tableData=[];else if(1==i.checkedSupplier.length)i.supplierList.forEach((function(t){t.id==i.checkedSupplier[0]&&i.changeSupplierTag(t)}));else{var e=[];i.checkedSupplier.forEach((function(t){i.supplierList.forEach((function(i){t==i.id&&i.listInfo.length&&i.listInfo.forEach((function(t){e.push(t.id),t.items&&t.items.length&&t.items.forEach((function(t){e.push(t.id)}))}))}))})),i.tableData=i.tableDataTab1;var a=JSON.parse(JSON.stringify(i.tableDataTab1));a.forEach((function(t,e){a[e].items=[]})),e.length&&(e.forEach((function(t){i.tableData.forEach((function(e,i){e.items.forEach((function(e,s){t==e.id&&a[i].items.push(e)}))}))})),i.tableData=[],a.forEach((function(t,e){t.items.length>0&&i.tableData.push(t)})))}}else i.supplierList=[];i.loading=!1}),300);else{var a={page:this.page,rowsPerPage:this.rowsPerPage,timeFilter:this.timeFilter>=6?"":this.timeFilter,dateFrom:this.dateFrom,dateTo:this.dateTo,sort:this.sortBy,fulfillmentStatus:this.fulfillStatus,keywords:this.codeName,isManage:this.isManage,accountId:this.storeId,codeNameGeq:this.formatCode(this.filterParams.codeNameGeq),codeNameLeq:this.formatCode(this.filterParams.codeNameLeq)};this.$apiCall("api.Invoice.shopifyOrdersByVendor",a,(function(t){if("9999"==t.ErrorCode){var e=t.Data.Results;e.forEach((function(t,e){i.$set(t,"shippingJson",JSON.parse(t.shippingJson)),i.$set(t,"span",!0),i.$set(t,"isShow",!0),t.items.length&&t.items.forEach((function(t){i.$set(t,"previewList",[]),t.imgUrl&&t.previewList.push(t.imgUrl)})),i.tableData.push(t),i.tableDataTab1.push(t)})),i.warningDialog.page?(i.warningDialog.orders<i.tableData.length&&(i.tableData=i.tableData.slice(0,i.warningDialog.orders)),i.warningDialog.page>i.page?(i.page++,i.load(i.page,i.totalPage)):i.$nextTick((function(){i.loading=!1,i.$hideLoading()}))):(i.page++,i.load(i.page,i.totalPage))}else i.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||i.$userFailure(i)}))}})),Object(r["a"])(l,"buildArrayGroup",(function(t){var e,i=this,a=[],s=n(t);try{var r=function(){var t=e.value,i=t.relationshipId,s=t.vendorName,r=a.findIndex((function(t){return t.relationshipId===i})),o=-1!==r?a[r]:{};if(0===Object.keys(o).length){var n=[];n.push(t),o["relationshipId"]=i,o["vendorName"]=s,o["listInfo"]=n,a.push(o)}else{var l=a[r]||{},c=l["listInfo"];c.push(t)}};for(s.s();!(e=s.n()).done;)r()}catch(o){s.e(o)}finally{s.f()}return a.forEach((function(t){i.$set(t,"id",t.relationshipId)})),a})),Object(r["a"])(l,"groupBySupplier",(function(t){for(var e={},i=[],a=0;a<t.length;a++){var s=t[a];if(e[s.relationshipId])for(var r=0;r<i.length;r++){var o=i[r];if(o.relationshipId==s.relationshipId){o.listInfo.push(s);break}}else i.push({id:s.relationshipId,vendorName:s.vendorName,listInfo:[s]}),e[s.relationshipId]=s}return i})),Object(r["a"])(l,"groupBy",(function(t){for(var e={},i=[],a=0;a<t.length;a++){var s=t[a];if(e[s.shopifyAccountId])for(var r=0;r<i.length;r++){var o=i[r];if(o.shopifyAccountId==s.shopifyAccountId){o.listInfo.push(s);break}}else i.push({shopifyAccountId:s.shopifyAccountId,store:s.store,listInfo:[s]}),e[s.shopifyAccountId]=s}return i})),Object(r["a"])(l,"formatminute",(function(t){return this.$moment.duration(t/60,"minutes").locale("en").humanize()})),Object(r["a"])(l,"onCopy",(function(t){this.$elementMessage(this.$t("successfullyToClipboard"),"success")})),Object(r["a"])(l,"onError",(function(t){this.$elementMessage(this.$t("failedToClipboard"),"error")})),Object(r["a"])(l,"updateOrder",(function(){var t=this;this.updateOrderLoading=!0,this.$apiCall("api.ShopifyAccount.getOrderByHand",{},(function(e){t.updateOrderLoading=!1,"9999"==e.ErrorCode?(t.updateTime=e.Data.Results,localStorage.setItem("orders-updateTime",e.Data.Results),t.$elementMessage("Update Order Success","success")):t.$elementMessage(e.Message,"error")}))})),l)},p=h,f=(i("c21c"),i("13d0"),i("113c"),i("cba8")),g=Object(f["a"])(p,a,s,!1,null,"e4b3ba72",null);e["default"]=g.exports},"8f71":function(t,e,i){"use strict";i("4cc0")},9185:function(t,e,i){var a=i("73d2");t.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},"95b3":function(t,e,i){var a=i("73d2");t.exports=a((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},9781:function(t,e,i){var a=i("3727");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:a(t)}},"9a9e":function(t,e,i){var a=i("6f9a"),s=i("f5f9");t.exports=function(t,e,i,r){try{return r?e(a(i)[0],i[1]):e(i)}catch(o){s(t,"throw",o)}}},b953:function(t,e,i){var a=i("73d2"),s=i("2516");t.exports=!a((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",s(1,7)),7!==t.stack)}))},c21c:function(t,e,i){"use strict";i("fc24")},c24b:function(t,e,i){var a=i("9277"),s=i("72ae"),r=i("cd08"),o=i("783c"),n="WebAssembly",l=s[n],c=7!==Error("e",{cause:7}).cause,d=function(t,e){var i={};i[t]=o(t,e,c),a({global:!0,forced:c},i)},u=function(t,e){if(l&&l[t]){var i={};i[t]=o(n+"."+t,e,c),a({target:n,stat:!0,forced:c},i)}};d("Error",(function(t){return function(e){return r(t,this,arguments)}})),d("EvalError",(function(t){return function(e){return r(t,this,arguments)}})),d("RangeError",(function(t){return function(e){return r(t,this,arguments)}})),d("ReferenceError",(function(t){return function(e){return r(t,this,arguments)}})),d("SyntaxError",(function(t){return function(e){return r(t,this,arguments)}})),d("TypeError",(function(t){return function(e){return r(t,this,arguments)}})),d("URIError",(function(t){return function(e){return r(t,this,arguments)}})),u("CompileError",(function(t){return function(e){return r(t,this,arguments)}})),u("LinkError",(function(t){return function(e){return r(t,this,arguments)}})),u("RuntimeError",(function(t){return function(e){return r(t,this,arguments)}}))},ca52:function(t,e,i){"use strict";var a=i("9277"),s=i("72ae"),r=i("b467"),o=i("f4b3"),n=i("be72"),l=i("dd3f"),c=i("191d"),d=i("753b"),u=i("b8af"),h=i("ec39"),p=i("ee76"),f=i("b92c"),g=p("slice"),m=h("species"),v=s.Array,y=Math.max;a({target:"Array",proto:!0,forced:!g},{slice:function(t,e){var i,a,s,h=d(this),p=c(h),g=l(t,p),b=l(void 0===e?p:e,p);if(r(h)&&(i=h.constructor,o(i)&&(i===v||r(i.prototype))?i=void 0:n(i)&&(i=i[m],null===i&&(i=void 0)),i===v||void 0===i))return f(h,g,b);for(a=new(void 0===i?v:i)(y(b-g,0)),s=0;g<b;g++,s++)g in h&&u(a,s,h[g]);return a.length=s,a}})},cb1f:function(t,e,i){var a=i("9277"),s=i("b2e7"),r=i("5c2d"),o=i("be72"),n=i("9056"),l=i("a9c9").f,c=i("d2a3"),d=i("a8a1"),u=i("2e39"),h=i("9619"),p=i("9185"),f=!1,g=h("meta"),m=0,v=function(t){l(t,g,{value:{objectID:"O"+m++,weakData:{}}})},y=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!n(t,g)){if(!u(t))return"F";if(!e)return"E";v(t)}return t[g].objectID},b=function(t,e){if(!n(t,g)){if(!u(t))return!0;if(!e)return!1;v(t)}return t[g].weakData},S=function(t){return p&&f&&u(t)&&!n(t,g)&&v(t),t},C=function(){D.enable=function(){},f=!0;var t=c.f,e=s([].splice),i={};i[g]=1,t(i).length&&(c.f=function(i){for(var a=t(i),s=0,r=a.length;s<r;s++)if(a[s]===g){e(a,s,1);break}return a},a({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},D=t.exports={enable:C,fastKey:y,getWeakData:b,onFreeze:S};r[g]=!0},d14c:function(t,e,i){"use strict";var a=i("a9c9").f,s=i("2d97"),r=i("18f3"),o=i("7041"),n=i("1883"),l=i("bfa4"),c=i("fec0"),d=i("5b38"),u=i("7adc"),h=i("cb1f").fastKey,p=i("2719"),f=p.set,g=p.getterFor;t.exports={getConstructor:function(t,e,i,c){var d=t((function(t,a){n(t,p),f(t,{type:e,index:s(null),first:void 0,last:void 0,size:0}),u||(t.size=0),void 0!=a&&l(a,t[c],{that:t,AS_ENTRIES:i})})),p=d.prototype,m=g(e),v=function(t,e,i){var a,s,r=m(t),o=y(t,e);return o?o.value=i:(r.last=o={index:s=h(e,!0),key:e,value:i,previous:a=r.last,next:void 0,removed:!1},r.first||(r.first=o),a&&(a.next=o),u?r.size++:t.size++,"F"!==s&&(r.index[s]=o)),t},y=function(t,e){var i,a=m(t),s=h(e);if("F"!==s)return a.index[s];for(i=a.first;i;i=i.next)if(i.key==e)return i};return r(p,{clear:function(){var t=this,e=m(t),i=e.index,a=e.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete i[a.index],a=a.next;e.first=e.last=void 0,u?e.size=0:t.size=0},delete:function(t){var e=this,i=m(e),a=y(e,t);if(a){var s=a.next,r=a.previous;delete i.index[a.index],a.removed=!0,r&&(r.next=s),s&&(s.previous=r),i.first==a&&(i.first=s),i.last==a&&(i.last=r),u?i.size--:e.size--}return!!a},forEach:function(t){var e,i=m(this),a=o(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:i.first){a(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!y(this,t)}}),r(p,i?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),u&&a(p,"size",{get:function(){return m(this).size}}),d},setStrong:function(t,e,i){var a=e+" Iterator",s=g(e),r=g(a);c(t,e,(function(t,e){f(this,{type:a,target:t,state:s(t),kind:e,last:void 0})}),(function(){var t=r(this),e=t.kind,i=t.last;while(i&&i.removed)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),d(e)}}},d2b3:function(t,e,i){var a=i("b2e7"),s=a("".replace),r=function(t){return String(Error(t).stack)}("zxcasd"),o=/\n\s*at [^:]*:[^\n]*/,n=o.test(r);t.exports=function(t,e){if(n&&"string"==typeof t)while(e--)t=s(t,o,"");return t}},ec89:function(t,e,i){"use strict";var a=i("72ae"),s=i("7041"),r=i("7b14"),o=i("27a2"),n=i("9a9e"),l=i("eb5a"),c=i("f4b3"),d=i("191d"),u=i("b8af"),h=i("09f3"),p=i("c868"),f=a.Array;t.exports=function(t){var e=o(t),i=c(this),a=arguments.length,g=a>1?arguments[1]:void 0,m=void 0!==g;m&&(g=s(g,a>2?arguments[2]:void 0));var v,y,b,S,C,D,w=p(e),_=0;if(!w||this==f&&l(w))for(v=d(e),y=i?new this(v):f(v);v>_;_++)D=m?g(e[_],_):e[_],u(y,_,D);else for(S=h(e,w),C=S.next,y=i?new this:[];!(b=r(C,S)).done;_++)D=m?n(S,g,[b.value,_],!0):b.value,u(y,_,D);return y.length=_,y}},f930:function(t,e,i){},fc24:function(t,e,i){}}]);