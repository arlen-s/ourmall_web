(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Invoice"],{"2d12":function(t,e,i){"use strict";i("34fe")},"2f16":function(t,e,i){"use strict";i("3f3a")},"34fe":function(t,e,i){},"3f3a":function(t,e,i){},"7d62":function(t,e,i){"use strict";i("b5e1")},b5e1:function(t,e,i){},cbf3:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("el-scrollbar",{ref:"myScrollbar1",staticClass:"page-content",staticStyle:{height:"100%"}},[e("div",{staticClass:"invoice"},[t.fromPage?t._e():e("div",{staticClass:"invoice-top",staticStyle:{height:"60px"}},[1==t.loginType||2==t.loginType?e("div",[e("header",{staticStyle:{position:"fixed",top:"0",left:"0","z-index":"9",width:"100%",height:"60px",padding:"0 15px"}},[e("div",{staticStyle:{width:"1100px",margin:"0 auto",padding:"0px 30px 0 0"}},[2==t.loginType?e("div",{staticClass:"tx-left",staticStyle:{"background-color":"rgb(253, 246, 236)","border-radius":"4px","border-left":"5px solid rgb(230, 162, 60)",margin:"0 0 0 0px",height:"60px",padding:"0 20px","box-shadow":"rgba(33, 33, 33, 0.4) 0px 1px 4px 0px"}},[e("p",{staticClass:"d-flex justify-content-start",staticStyle:{color:"#606266","font-weight":"600","margin-bottom":"0","font-size":"14px","line-height":"60px"}},[t._v(" "+t._s(t.$t("invoice.justneed"))+" "),e("a",{staticStyle:{"margin-right":"5px","margin-left":"5px",color:"#e6a23c","text-decoration":"underline","font-size":"14px"},attrs:{href:"javascript:;"},on:{click:t.openLogin}},[t._v(t._s(t.$t("invoice.complete")))]),t._v(" "+t._s(t.$t("invoice.then"))+" "),e("a",{staticStyle:{"margin-right":"5px","margin-left":"5px",color:"#e6a23c","text-decoration":"underline","font-size":"14px"},attrs:{href:"javascript:;"},on:{click:t.openLogin}},[t._v(t._s(t.$t("invoice.my")))]),t._v(" "+t._s(t.$t("invoice.historical"))+" ")])]):t._e(),1==t.loginType?e("div",{staticClass:"tx-left",staticStyle:{"background-color":"rgb(253, 246, 236)","border-radius":"4px","border-left":"5px solid rgb(230, 162, 60)",margin:"0 0 0 0px",height:"60px",padding:"0 20px","box-shadow":"rgba(33, 33, 33, 0.4) 0px 1px 4px 0px"}},[e("p",{staticClass:"d-flex justify-content-start",staticStyle:{color:"#606266","font-weight":"600","margin-bottom":"0","font-size":"14px","line-height":"60px"}},[t._v(" "+t._s(t.$t("invoice.just"))+" "),e("a",{staticStyle:{"margin-right":"5px","margin-left":"5px",color:"#e6a23c","text-decoration":"underline","font-size":"14px"},attrs:{href:"javascript:;"},on:{click:t.openLogin}},[t._v(t._s(t.$t("invoice.sign")))]),t._v(" "+t._s(t.$t("invoice.then"))+" "),e("a",{staticStyle:{"margin-right":"5px","margin-left":"5px",color:"#e6a23c","text-decoration":"underline","font-size":"14px"},attrs:{href:"javascript:;"},on:{click:t.openLogin}},[t._v(t._s(t.$t("invoice.my")))]),t._v(" "+t._s(t.$t("invoice.historical"))+" ")])]):t._e()])])]):t.showTopTip&&!t.fromPage?e("div",[e("header",{staticStyle:{position:"fixed",top:"0",left:"0","z-index":"9",width:"100%",height:"60px",padding:"0 15px"}},[e("div",{staticStyle:{width:"1100px",margin:"0 auto",padding:"0px 30px 0 0"}},[e("div",{staticClass:"tx-left",staticStyle:{"background-color":"#f0f9eb","border-radius":"4px","border-left":"5px solid #67c23a",margin:"0 0 0 0px",height:"60px",padding:"0 20px","box-shadow":"rgba(33, 33, 33, 0.4) 0px 1px 4px 0px"}},[e("p",{staticClass:"d-flex justify-content-start",staticStyle:{color:"#606266","font-weight":"600","margin-bottom":"0","font-size":"14px","line-height":"60px"}},[t._v(" "+t._s(t.$t("invoice.click"))+" "),e("router-link",{staticStyle:{"margin-right":"5px","margin-left":"5px",color:"#67c23a","text-decoration":"underline","font-size":"14px"},attrs:{to:{path:"/dashboard"},target:"_blank"}},[t._v(t._s(t.$t("invoice.my")))]),t._v(" "+t._s(t.$t("invoice.historical"))+" ")],1)])])])]):t._e()]),e("div",{attrs:{"infinite-scroll-distance":800,"infinite-scroll-disabled":"disabled"}},[e("el-container",{class:t.noMore||5==t.tabActive?"":"pd-b-100",attrs:{id:"invoiceContainer"}},[e("el-main",{staticStyle:{position:"relative"}},[e("el-card",{staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"always"}},[e("el-steps",{attrs:{active:t.stepActive,"process-status":"wait"}},[e("el-step",{attrs:{title:t.$t("invoice.step1"),icon:t.stepActive>1?"el-icon-success":"",description:t.$t("invoice.ImportShopify")}}),e("el-step",{attrs:{title:t.$t("invoice.step2"),icon:t.stepActive>2?"el-icon-success":"",description:t.$t("invoice.Improvenumber")}}),e("el-step",{attrs:{title:t.$t("invoice.step3"),icon:t.stepActive>3?"el-icon-success":"",description:t.$t("invoice.collectionstatus")}}),e("el-step",{attrs:{title:t.$t("invoice.step4"),icon:t.stepActive>4?"el-icon-success":"",description:t.$t("invoice.cooperation")}})],1)],1),4!=t.invoiceInfo.status&&5!=t.invoiceInfo.status&&6!=t.invoiceInfo.status?[t.invoiceInfo.extraJson&&t.invoiceInfo.extraJson.importErrorLog&&t.invoiceInfo.extraJson.importErrorLog.length?e("div",{staticClass:"warning",staticStyle:{padding:"8px 16px","background-color":"#fff6f7","border-radius":"4px","border-left":"5px solid #fe6c6f",margin:"20px 0"}},[e("div",{staticClass:"d-flex align-items-center justify-content-between",staticStyle:{cursor:"pointer"},on:{click:function(e){t.showErrorLog=!t.showErrorLog}}},[e("span",[t._v(" "+t._s(t.invoiceInfo.extraJson.importErrorLog[0])+" "),!t.showErrorLog&&t.invoiceInfo.extraJson.importErrorLog.length?e("span",{staticStyle:{"margin-left":"30px"}},[t._v("(等"+t._s(t.invoiceInfo.extraJson.importErrorLog.length)+"条错误数据,"),e("a",{attrs:{href:"javascript:;"}},[t._v("点击展开")]),t._v("查看详情)")]):t._e()]),e("i",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.extraJson.importErrorLog.length>1,expression:"invoiceInfo.extraJson.importErrorLog.length > 1"}],class:t.showErrorLog?"el-icon-arrow-down":"el-icon-arrow-up"})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showErrorLog&&t.invoiceInfo.extraJson.importErrorLog.length>1,expression:"\n                    showErrorLog &&\n                    invoiceInfo.extraJson.importErrorLog.length > 1\n                  "}]},t._l(t.invoiceInfo.extraJson.importErrorLog,(function(i,s){return 0!=s?e("p",[t._v(" "+t._s(i)+" ")]):t._e()})),0)]):t._e()]:t._e(),e("el-card",{staticClass:"m-card",attrs:{shadow:"always"}},["9"==t.invoiceInfo.status?e("div",{staticClass:"cancel-label"},[t._v(" "+t._s(t.$t("invoice.cancel"))+" ")]):t._e(),e("div",{staticClass:"top-1"},[e("div",{staticClass:"left"},[e("h2",[t._v(t._s(t.$t("invoice.采购订单")))])]),e("div",{staticClass:"center"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"grid-content invoice-header-logo"},[t.showLogo?t._e():[e("el-upload",{ref:"upload_img",staticClass:"avatar-uploader",attrs:{action:"",accept:"image/jpeg,image/jpg,image/png",name:"file","show-file-list":!1,"http-request":t.uploadSectionFile}},[t.showLogo?e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.logoUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],t.showLogo?[e("div",{staticClass:"tx-left"},[e("el-image",{staticStyle:{height:"70px",width:"70px"},attrs:{src:t.logoUrl,"preview-src-list":[t.logoUrl]}}),e("el-button",{staticClass:"mg-l-10",staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:t.removelogo}},[t._v("删除LOGO")])],1)]:t._e()],2)]),e("div",[e("div",{staticClass:"grid-content invoice-header-info"},[t.invoiceInfo.vendorName?[e("div",{staticClass:"wv-text-strong"},[t._v(" "+t._s(t.invoiceInfo.vendorName?t.invoiceInfo.vendorName:"---")+" "),2==t.invoiceInfo.payStatus&&"9"!=t.invoiceInfo.status?e("el-button",{staticStyle:{padding:"0"},attrs:{slot:"reference",type:"text"},on:{click:t.editCompany},slot:"reference"},[t._v(t._s(t.$t("invoice.edit")))]):t._e()],1)]:[e("el-input",{staticClass:"tx-right-input",staticStyle:{margin:"10px 0"},attrs:{size:"small",placeholder:t.$t("invoice.fillname")},on:{change:function(e){return t.editCompanyByInput()}},model:{value:t.editCompanyName,callback:function(e){t.editCompanyName=e},expression:"editCompanyName"}})]],2)]),e("div",{staticClass:"right"},[e("div",{staticClass:"code"},[t._v("PO # "+t._s(t.invoiceInfo.code||"---"))]),e("div",{staticClass:"date"},[t._v(" "+t._s(t.$t("invoice.采购单日期"))+"："+t._s(t.invoiceInfo.timeCreated||"---")+" ")]),e("div",{staticClass:"lang"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"中文",placement:"top"}},[e("a",{class:{active:"zh"==t.$i18n.locale},attrs:{href:"javascript:;"},on:{click:function(e){return t.changeLang("zh")}}},[e("svg",{staticClass:"icon",staticStyle:{width:"32px",height:"24px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-flag-c"}})])])]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"EN",placement:"top"}},[e("a",{class:{active:"en"==t.$i18n.locale},attrs:{href:"javascript:;"},on:{click:function(e){return t.changeLang("en")}}},[e("svg",{staticClass:"icon",staticStyle:{width:"32px",height:"24px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-flag-e"}})])])])],1)])]),e("el-divider"),e("div",{staticClass:"top-2"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("invoice.客户名称")))]),e("div",{staticClass:"t-name"},[e("span",{staticClass:"mg-r-15"},[t._v(t._s(t.invoiceInfo.customerName||"---"))]),t.invoiceInfo.customerShopName||t.invoiceInfo.customerShopNameAlia?e("span",[t._v(" ("+t._s(t.invoiceInfo.customerShopNameAlia?t.invoiceInfo.customerShopNameAlia:t.invoiceInfo.customerShopName)+") ")]):t._e()])]),e("div",{staticClass:"right"},[t.invoiceInfo.status?e("div",{staticClass:"t-status"},[t._v(" "+t._s(t.$t("invoice.订单状态"))+"： "),"9"==t.invoiceInfo.status&&t.invoiceInfo.stopReason?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.invoiceInfo.stopReason,placement:"top"}},[e("span",[t._v(t._s(t.$t(t.$dict.invoiceStatus[t.invoiceInfo.status].text)))])]):e("span",{class:"tx-"+t.$dict.invoiceStatus[t.invoiceInfo.status].type},[t._v(t._s(t.$t(t.$dict.invoiceStatus[t.invoiceInfo.status].text)))])],1):t._e(),e("div",{staticClass:"t-amount"},[t._v(" "+t._s(t.$t("invoice.采购单金额"))+"(US$): "),e("span",{class:{"active tx-danger":t.realAmount&&t.realAmount>0},style:{fontWeight:t.realAmount&&t.realAmount>0?"bold":"normal"}},[t._v(" "+t._s(t.realAmount&&t.realAmount>0?t.$numberToCurrency(t.realAmount):t.$t("invoice.Notset"))+" ")])])])]),e("div",{staticClass:"table-fixed"},[e("div",{staticClass:"tabs d-flex"},[e("div",{staticClass:"tab-btn",class:1==t.tabActive||2==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(1)}}},[t._v(" "+t._s(t.$t("invoice.全部订单商品"))+" ("+t._s(t.invoiceCnt.orderCnt)+") ")]),e("div",{staticClass:"tab-btn",class:3==t.tabActive?"active":"",staticStyle:{display:"none"},on:{click:function(e){return t.tabcChange(3)}}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"fa fa-exclamation-triangle",staticStyle:{color:"rgb(245, 108, 108)"}}),t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.notBindCnt)+")")])]),e("div",{staticClass:"tab-btn",class:4==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(4)}}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"iconfont icon-tubiaozhizuomoban",staticStyle:{"font-size":"18px",color:"rgb(230, 162, 60)"}}),t._v(" "+t._s(t.$t("invoice.Notshipped"))+"("+t._s(t.invoiceCnt.notDeliverCnt>99?"99+":t.invoiceCnt.notDeliverCnt)+")")])]),e("div",{staticClass:"tab-btn",class:8==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(8)}}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"fa fa-plane",staticStyle:{"font-size":"18px",color:"#67c23a"}}),t._v(" "+t._s(t.$t("invoice.Delivered"))+"("+t._s(t.invoiceCnt.deliverCnt>99?"99+":t.invoiceCnt.deliverCnt)+")")])]),e("div",{staticClass:"tab-btn",class:5==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(5)}}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"fa fa-times",staticStyle:{color:"#f56c6c"}}),t._v(" "+t._s(t.$t("invoice.设为不发货"))+" ("+t._s(t.invoiceCnt.noQuantityCnt>99?"99+":t.invoiceCnt.noQuantityCnt)+")")])]),e("div",{staticClass:"tab-btn",class:9==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(9)}}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-warning",staticStyle:{color:"#f56c6c"}}),t._v(" "+t._s(t.$t("invoice.Abnormal"))+" ("+t._s(t.invoiceCnt.abnormalCnt>99?"99+":t.invoiceCnt.abnormalCnt)+")")])]),e("div",{staticClass:"pos-absolute",staticStyle:{right:"-15px",bottom:"10px"}},[e("el-button-group",{staticClass:"text-btn"},[e("el-button",{class:1==t.showType?"active":"",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.changeShowType("1")}}},[e("b",{staticClass:"radio-span"}),e("i",{staticClass:"iconfont icon-shuzhuangtu"}),e("span",[t._v(t._s(t.$t("invoice.Ordergroup")))])]),e("el-button",{class:2==t.showType?"active":"",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.changeShowType("2")}}},[e("b",{staticClass:"radio-span"}),e("i",{staticClass:"iconfont icon-shuzhuang"}),e("span",[t._v(t._s(t.$t("invoice.Productgroup")))])])],1)],1)]),e("div",{ref:"orderItemsTable",staticClass:"table-wrap"},[1==t.tabActive?[e("el-tooltip",{attrs:{placement:"left"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.notBindCnt)+") ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceCnt.notBindCnt>0,expression:"invoiceCnt.notBindCnt > 0"}],staticClass:"tab-btn",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.tabcChange(3)}}},[e("i",{staticClass:"fa fa-exclamation-triangle fa-2x"}),e("span",[t._v(t._s(t.invoiceCnt.notBindCnt>99?"99+":t.invoiceCnt.notBindCnt))])])])]:t._e(),2==t.tabActive?[e("el-tooltip",{attrs:{placement:"left"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.groupSkuCnt)+") ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceCnt.notBindCnt>0,expression:"invoiceCnt.notBindCnt > 0"}],staticClass:"tab-btn",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.tabcChange(6)}}},[e("i",{staticClass:"fa fa-exclamation-triangle fa-2x"}),e("span",[t._v(t._s(t.invoiceCnt.groupSkuCnt>99?"99+":t.invoiceCnt.groupSkuCnt))])])])]:t._e(),e("el-table",{staticClass:"table-only",attrs:{"header-cell-style":t.getRowClass,"cell-style":t.cellStyle}},[e("el-table-column",{attrs:{width:"150",label:""}}),e("el-table-column",{attrs:{label:""}}),e("el-table-column",{attrs:{label:"",width:"160"}}),e("el-table-column",{attrs:{label:"",width:"120"}}),e("el-table-column",{attrs:{label:"",width:"120"}})],1),2!=t.tabActive?e("div",{staticClass:"table1"},[e("el-table",{staticClass:"table-with-body",attrs:{"header-cell-style":t.getRowClass,"cell-class-name":t.getCellClass,"cell-style":t.cellStyle}},[e("el-table-column",[e("template",{slot:"header"},[t.searchName||t.searchTrack?t._e():e("div",[e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("div",[t._v(" "+t._s(t.$t("invoice.采购订单信息"))+" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchName=!0}}},[e("i",{staticClass:"el-icon-search mg-l-5"})])],1),e("div",[t._v(" "+t._s(t.$t("invoice.物流信息"))+" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchTrack=!0}}},[e("i",{staticClass:"el-icon-search mg-l-5"})])],1)])]),t.searchName||t.searchTrack?e("div",{staticClass:"d-flex"},[e("el-input",{ref:"searchNameInput",attrs:{size:"mini",type:"text",placeholder:t.searchName?t.$t("invoice.Supportsearchname"):t.$t("invoice.Supportsearchnumber"),clearable:""},on:{clear:function(e){return t.Filter(2,"name")},blur:function(e){return t.Filter(3,"name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Filter(1,"name")}},model:{value:t.searchNameInput,callback:function(e){t.searchNameInput=e},expression:"searchNameInput"}},[e("el-button",{attrs:{slot:"append",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){return t.Filter(1,"name")}},slot:"append"})],1)],1):t._e()])],2),e("el-table-column",{attrs:{width:"140"}},[e("template",{slot:"header"},[1==t.tabActive?e("div",{staticClass:"d-flex align-item-center change-type"},[t._v(" "+t._s(t.$t("invoice.我的SKU编号"))+" ")]):e("div",[t._v(" "+t._s(t.$t("invoice.我的SKU编号"))+" ")])])],2),e("el-table-column",{attrs:{prop:"qty",width:"140"}},[e("template",{slot:"header"},[e("div",{staticClass:"tx-center"},[t._v(" "+t._s(t.$t("invoice.发货数量"))+" ")])])],2),e("el-table-column",{attrs:{prop:"price",label:t.$t("invoice.Supplyunit"),width:t.isChangeAmount()?"120px":"160px"},scopedSlots:t._u([{key:"header",fn:function(){return[e("span",{staticClass:"supplyunit"},[t._v(t._s(t.$t("invoice.Supplyunit")))]),t.isChangeAmount()||t.tempCode?t._e():e("a",{staticClass:"mg-l-0",staticStyle:{"font-weight":"bold"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setLotPrice()}}},[t._v(t._s(t.$t("invoice.Batchset")))]),t.tempCode?e("span",{staticStyle:{color:"#e6a23c"}},[t._v("(设价中)")]):t._e()]},proxy:!0}],null,!1,3490931937)}),e("el-table-column",{attrs:{label:"每单运费",width:"100",align:"center"}},[e("template",{slot:"header"},[e("div",{staticClass:"tx-center"},[t._v(" "+t._s(t.$t("invoice.每单运费"))+" ")])])],2),e("el-table-column",{attrs:{label:t.$t("invoice.小计")+"(US$)",width:"80",align:"center"}}),e("el-table-column",{attrs:{label:t.$t("invoice.操作"),width:"100"}})],1)],1):t._e(),2==t.tabActive?e("div",{staticClass:"table2"},[e("el-table",{staticClass:"table-with-body",attrs:{"header-cell-style":t.getRowClass3,"cell-class-name":t.getCellClass,"cell-style":t.cellStyle}},[e("el-table-column",{attrs:{type:"expand",width:"20",label:""}}),e("el-table-column",{attrs:{width:"180"}},[e("template",{slot:"header"},[e("div",{staticClass:"d-flex align-item-center change-type"},[t._v(" "+t._s(t.$t("invoice.SupplierSKU"))+" ")])])],2),e("el-table-column",[e("template",{slot:"header"},[t.searchName||t.searchTrack?t._e():e("div",[e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("div",[t._v(" "+t._s(t.$t("invoice.Orderitems"))+" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchName=!0}}},[e("i",{staticClass:"el-icon-search mg-l-5"})])],1),e("div",[t._v(" "+t._s(t.$t("invoice.Logisticsnumber"))+" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchTrack=!0}}},[e("i",{staticClass:"el-icon-search mg-l-5"})])],1)])]),t.searchName||t.searchTrack?e("div",{staticClass:"d-flex"},[e("el-input",{ref:"searchNameInput",attrs:{size:"mini",type:"text",placeholder:t.searchName?t.$t("invoice.Supportsearchname"):t.$t("invoice.Supportsearchnumber"),clearable:""},on:{clear:function(e){return t.Filter(2,"name")},blur:function(e){return t.Filter(3,"name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Filter(1,"name")}},model:{value:t.searchNameInput,callback:function(e){t.searchNameInput=e},expression:"searchNameInput"}},[e("el-button",{attrs:{slot:"append",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){return t.Filter(1,"name")}},slot:"append"})],1)],1):t._e()])],2),e("el-table-column",{attrs:{prop:"qty",width:"160"}},[e("template",{slot:"header"},[t._v(" "+t._s(t.$t("invoice.Purchasequantity"))+" ")])],2),e("el-table-column",{attrs:{prop:"price",label:t.$t("invoice.Supplyunit"),width:"200"}}),e("el-table-column",{attrs:{label:t.$t("invoice.Totalsupply"),width:"120"}})],1)],1):t._e()],2)]),e("div",{staticClass:"tabs d-flex"},[e("div",{staticClass:"tab-btn",class:1==t.tabActive||2==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(1)}}},[t._v(" "+t._s(t.$t("invoice.全部订单商品"))+" ("+t._s(t.invoiceCnt.orderCnt)+") ")]),e("div",{staticClass:"tab-btn",class:3==t.tabActive?"active":"",staticStyle:{display:"none"},on:{click:function(e){return t.tabcChange(3)}}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"fa fa-exclamation-triangle",staticStyle:{color:"rgb(245, 108, 108)"}}),t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.notBindCnt)+")")])]),e("div",{staticClass:"tab-btn",class:4==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(4)}}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"iconfont icon-tubiaozhizuomoban",staticStyle:{"font-size":"18px",color:"rgb(230, 162, 60)"}}),t._v(" "+t._s(t.$t("invoice.Notshipped"))+"("+t._s(t.invoiceCnt.notDeliverCnt>99?"99+":t.invoiceCnt.notDeliverCnt)+")")])]),e("div",{staticClass:"tab-btn",class:8==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(8)}}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"fa fa-plane",staticStyle:{"font-size":"18px",color:"#67c23a"}}),t._v(" "+t._s(t.$t("invoice.Delivered"))+"("+t._s(t.invoiceCnt.deliverCnt>99?"99+":t.invoiceCnt.deliverCnt)+")")])]),e("div",{staticClass:"tab-btn",class:5==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(5)}}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"fa fa-times",staticStyle:{color:"#f56c6c"}}),t._v(" "+t._s(t.$t("invoice.设为不发货"))+"("+t._s(t.invoiceCnt.noQuantityCnt>99?"99+":t.invoiceCnt.noQuantityCnt)+")")])]),e("div",{staticClass:"tab-btn",class:9==t.tabActive?"active":"",on:{click:function(e){return t.tabcChange(9)}}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-warning",staticStyle:{color:"#f56c6c"}}),t._v(" "+t._s(t.$t("invoice.Abnormal"))+" ("+t._s(t.invoiceCnt.abnormalCnt>99?"99+":t.invoiceCnt.abnormalCnt)+")")])]),e("div",{staticClass:"pos-absolute",staticStyle:{bottom:"10px",right:"-15px"}},[e("el-button-group",{staticClass:"text-btn"},[e("el-button",{class:1==t.showType?"active":"",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.changeShowType("1")}}},[e("span",{staticClass:"radio-span"}),e("i",{staticClass:"iconfont icon-shuzhuangtu"}),e("span",[t._v(t._s(t.$t("invoice.Ordergroup")))])]),e("el-button",{class:2==t.showType?"active":"",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.changeShowType("2")}}},[e("span",{staticClass:"radio-span"}),e("i",{staticClass:"iconfont icon-shuzhuang"}),e("span",[t._v(t._s(t.$t("invoice.Productgroup")))])])],1)],1)]),[e("div",{staticClass:"table-wrap"},[t.invoiceData.length?[1==t.tabActive?[e("el-tooltip",{attrs:{placement:"left"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.notBindCnt)+") ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceCnt.notBindCnt>0,expression:"invoiceCnt.notBindCnt > 0"}],staticClass:"tab-btn",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.tabcChange(3)}}},[e("i",{staticClass:"fa fa-exclamation-triangle fa-2x"}),e("span",[t._v(t._s(t.invoiceCnt.notBindCnt>99?"99+":t.invoiceCnt.notBindCnt))])])])]:t._e(),2==t.tabActive?[e("el-tooltip",{attrs:{placement:"left"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))+"("+t._s(t.invoiceCnt.groupSkuCnt)+") ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceCnt.notBindCnt>0,expression:"invoiceCnt.notBindCnt > 0"}],staticClass:"tab-btn",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.tabcChange(6)}}},[e("i",{staticClass:"fa fa-exclamation-triangle fa-2x"}),e("span",[t._v(t._s(t.invoiceCnt.groupSkuCnt>99?"99+":t.invoiceCnt.groupSkuCnt))])])])]:t._e(),e("el-table",{staticClass:"table-only table-only-top",attrs:{"header-cell-style":t.getRowClass,"cell-style":t.cellStyle}},[e("el-table-column",{attrs:{width:"150",label:t.$t("invoice.SupplierSKU")}}),e("el-table-column",{attrs:{label:"Items"}}),e("el-table-column",{attrs:{label:"Quantity",width:"160"}}),e("el-table-column",{attrs:{label:"Unit Cost(US$)",width:"120"}}),e("el-table-column",{attrs:{label:"Subtotal(US$)",width:"120"}})],1),2!=t.tabActive?e("div",[e("el-table",{staticClass:"table-with-body",attrs:{"row-class-name":t.tableRowClassName,"header-cell-style":t.getRowClass,"cell-class-name":t.getCellClass,"cell-style":t.cellStyle,data:t.invoiceData,stripe:"",border:""}},[e("el-table-column",{scopedSlots:t._u([{key:"header",fn:function(){return[t.searchName||t.searchTrack?t._e():e("div",[e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("div",[t._v(" "+t._s(t.$t("invoice.采购订单信息"))+" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchName=!0}}},[e("i",{staticClass:"el-icon-search mg-l-5"})])],1),e("div",[8==t.tabActive?[Number(t.invoiceCnt.deliverCnt)&&"abnormal"!=t.type?e("span",{staticClass:"mg-r-15"},[t._v(" 共计："+t._s(t.invoiceCnt.deliverCnt)+"条 "),Number(t.invoiceCnt.notSyncCnt)?e("span",[t._v(" ( 同步异常: "),e("a",{staticClass:"notsyn-link",attrs:{href:"javascript:;"},on:{click:function(e){return t.setType("abnormal")}}},[t._v(" "+t._s(t.invoiceCnt.notSyncCnt)+" 条")]),t._v(" ) ")]):t._e()]):t._e(),"abnormal"==t.type?e("span",{staticClass:"mg-r-15"},[e("el-tag",{staticStyle:{margin:"0",height:"26px","line-height":"26px"},attrs:{type:"danger",effect:"plain",closable:""},on:{close:function(e){return t.setType("deliver")}}},[t._v("同步异常")])],1):t._e()]:t._e(),t._v(" "+t._s(t.$t("invoice.物流信息"))+" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchTrack=!0}}},[e("i",{staticClass:"el-icon-search mg-l-5"})])],2)])]),t.searchName||t.searchTrack?e("div",{staticClass:"d-flex"},[e("el-input",{ref:"searchNameInput",attrs:{size:"mini",type:"text",placeholder:t.searchName?t.$t("invoice.Supportsearchname"):t.$t("invoice.Supportsearchnumber"),clearable:""},on:{clear:function(e){return t.Filter(2,"name")},blur:function(e){return t.Filter(3,"name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Filter(1,"name")}},model:{value:t.searchNameInput,callback:function(e){t.searchNameInput=e},expression:"searchNameInput"}},[e("el-button",{attrs:{slot:"append",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){return t.Filter(1,"name")}},slot:"append"})],1)],1):t._e()]},proxy:!0},{key:"default",fn:function(i){return[e("div",{staticStyle:{display:"flex","align-items":"flex-start"}},[e("el-image",{staticStyle:{"min-width":"70px",width:"70px",height:"70px",margin:"5px 5px 0 0",border:"1px solid #ddd"},attrs:{lazy:"",src:i.row.imgUrl,"preview-src-list":i.row.previewList}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"20px"}})])]),e("div",{staticStyle:{"max-width":"100%","text-align":"left",flex:"100%"}},[e("div",{staticClass:"tx-600"},[t._v(" "+t._s(i.row.name)+" "),i.row.customerProperties&&i.row.customerProperties.length?t._l(i.row.customerProperties,(function(i){return e("div",{key:i.name,staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{"text-align":"right",color:"#999"}},[t._v(" "+t._s(i.name)+": ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.value)+" ")])])])})):t._e()],2),e("div",{staticClass:"tx-600"},[e("b",[t._v("SKU:")]),t._v(" "+t._s(i.row.sku)+" ")]),2!=t.tabActive?e("div",{staticClass:"d-flex no-wrap justify-content-between"},[e("div",{staticClass:"d-flex"},[e("el-popover",{attrs:{"popper-class":"customer-popover",placement:"bottom",width:"600",trigger:"hover"}},[e("div",{staticStyle:{cursor:"pointer",display:"flex","max-width":"280px"},attrs:{slot:"reference"},slot:"reference"},[e("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(i.row.codeName)),e("i",{staticClass:"el-icon-caret-bottom el-icon--right"})])]),e("div",{staticClass:"mg-b-20 mg-t-10"},[e("div",{staticClass:"d-flex mg-b-20",staticStyle:{"justify-content":"space-between"}},[e("div",{staticClass:"title",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(" "+t._s(t.$t("invoice.ShopifyOrders"))+" "+t._s(i.row.codeName)+" ")]),e("div",[e("span",{staticStyle:{color:"#999"}},[t._v(t._s(t.$t("invoice.Orderdate")))]),e("span",{staticClass:"mg-l-5 pd-r-15"},[t._v(t._s(i.row.timeCreated?i.row.timeCreated:"---"))])])]),e("div",{staticClass:"mg-y-10",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(" 收件信息 ")]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 收件人: ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.name?i.row.shippingJson.name:"---")+" ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[i.row.shippingJson&&i.row.shippingJson.name?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.shippingJson.name,expression:"\n                                                    scope.row.shippingJson.name\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 收货地址1: ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.address1?i.row.shippingJson.address1:"---")+" ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[i.row.shippingJson&&i.row.shippingJson.address1?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.shippingJson.address1,expression:"\n                                                    scope.row.shippingJson\n                                                      .address1\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 收货地址2: ")]),e("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{"max-width":"75%"}},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.address2?i.row.shippingJson.address2:"---")+" ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[i.row.shippingJson&&i.row.shippingJson.address2?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.shippingJson.address2,expression:"\n                                                    scope.row.shippingJson\n                                                      .address2\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"50%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 城市: ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.city?i.row.shippingJson.city:"---")+" ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[i.row.shippingJson&&i.row.shippingJson.city?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.shippingJson.city,expression:"\n                                                    scope.row.shippingJson.city\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1),e("div",{staticClass:"d-flex",staticStyle:{width:"50%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 省份: ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.province?i.row.shippingJson.province:"---")+" ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[i.row.shippingJson&&i.row.shippingJson.province?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.shippingJson.city,expression:"\n                                                    scope.row.shippingJson.city\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),e("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[e("div",{staticClass:"d-flex",staticStyle:{flex:"0 0 50%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 国家: ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.country?i.row.shippingJson.country:"---")+" ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[i.row.shippingJson&&i.row.shippingJson.country?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.shippingJson.country,expression:"\n                                                    scope.row.shippingJson\n                                                      .country\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1),e("div",{staticClass:"d-flex",staticStyle:{flex:"0 0 50%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 邮编: ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.zip?i.row.shippingJson.zip:"---")+" ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[i.row.shippingJson&&i.row.shippingJson.zip?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.shippingJson.zip,expression:"\n                                                    scope.row.shippingJson.zip\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),e("div",{staticClass:"mg-y-10",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(" 收件信息 ")]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 联系电话: ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.phone?i.row.shippingJson.phone:"---")+" ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[i.row.shippingJson.phone?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.shippingJson.phone,expression:"\n                                                    scope.row.shippingJson.phone\n                                                  ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)]),i.row.ioss?[e("div",{staticClass:"mg-y-10",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(" IOSS信息 ")]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" IOSS: ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.ioss)+" ")])])])]:t._e(),i.row.note?[e("div",{staticClass:"mg-y-10",staticStyle:{"font-weight":"bold","font-size":"16px"}},[t._v(" 订单备注 ")]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" 备注: ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.note)+" ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"copy",placement:"left"}},[i.row.note?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.note,expression:"\n                                                      scope.row.note\n                                                    ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],1)],1)])]:t._e()],2)]),i.row.shippingJson&&i.row.shippingJson.name?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:i.row.shippingJson.name,placement:"top"}},[e("el-button",{attrs:{size:"mini"}},[t._v("To")])],1):t._e(),e("div",{staticClass:"mg-l-5 mg-r-5"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.country?i.row.shippingJson.country:"---")+" ")])],1),e("div",{staticClass:"no-wrap d-flex"},[i.row.trackNumber?e("div",{staticClass:"d-flex"},[e("div",[i.row.trackCompany&&i.row.realCompany?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(i.row.trackCompany)+"("+t._s(i.row.realCompany)+") ")]),t._v(" "+t._s(i.row.trackNumber)+" ")]),e("i",{staticClass:"fa fa-truck"})]):i.row.trackCompany?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(i.row.trackCompany)+" ")]),t._v(" "+t._s(i.row.trackNumber)+" ")]),e("i",{staticClass:"fa fa-truck"})]):e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(i.row.realCompany)+" ")]),t._v(" "+t._s(i.row.trackNumber)+" ")]),e("i",{staticClass:"fa fa-truck"})])],1),2==i.row.syncStatus?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.deliveredgoods"))+" "),e("br"),t._v(t._s(t.$t("invoice.Reason"))+" "+t._s(1!=t.invoiceInfo.hasAuth?t.$t("invoice.notauthorized"):i.row.syncContent)+" ")]),e("i",{staticClass:"invoice-icon-tongbu1"})]):e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.hasbeensync"),placement:"right"}},[e("i",{staticClass:"invoice-icon-tongbu2"})])],1):1==i.row.fulfillStatus?e("div",[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.hasnot"),placement:"right"}},[e("el-alert",{attrs:{title:t.$t("invoice.Notshipped"),type:"warning",closable:!1}})],1)],1):e("div",[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.wontReason")+i.row.stopReason,placement:"right"}},[e("el-alert",{attrs:{title:t.$t("invoice.wontdeliver"),type:"error",closable:!1}})],1)],1)])]):t._e()])],1)]}}],null,!1,3610289200)}),e("el-table-column",{attrs:{width:"180"},scopedSlots:t._u([{key:"header",fn:function(){return[1==t.tabActive?e("div",{staticClass:"d-flex align-item-center change-type"},[t._v(" "+t._s(t.$t("invoice.我的SKU编号"))+" ")]):e("div",[t._v(" "+t._s(t.$t("invoice.我的SKU编号"))+" ")])]},proxy:!0},{key:"default",fn:function(i){return[e("div",{staticClass:"d-flex sku-with-error"},[i.row.sku&&i.row.price||!(i.row.quantity>0)||2==i.row.fulfillStatus?t._e():e("el-tooltip",{attrs:{placement:"left"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))),e("br"),t._v(t._s(t.$t("invoice.Reason"))+" "),i.row.sku||i.row.price?i.row.sku?i.row.price?t._e():e("span",[t._v(t._s(t.$t("invoice.supplypricemissing")))]):e("span",[t._v(t._s(t.$t("invoice.SKUmissing")))]):e("span",[t._v(t._s(t.$t("invoice.pricemissing")))])]),e("i",{staticClass:"fa fa-exclamation-triangle mg-r-10",staticStyle:{color:"#f56c6c"}})]),e("div",[t.isChangeSku(i.row)?e("div",[t._v(" "+t._s(i.row.sku||"---")+" ")]):[e("el-popover",{ref:"popoverSku-"+i.$index,attrs:{"popper-class":"with-shadow",width:"400",placement:"top",title:t.$t("invoice.Batchset"),trigger:"manual"}},[e("div",[e("div",{staticClass:"mg-t-20"},[e("a",{staticClass:"input-btn d-flex",class:1==t.form.resource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setResource(1)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.samekind"))+" "),e("p",{directives:[{name:"show",rawName:"v-show",value:i.row.noneCntSku,expression:"scope.row.noneCntSku"}],staticStyle:{display:"inline","margin-left":"5px"},domProps:{innerHTML:t._s(t.$t("invoice.hereare",{num:Number(i.row.noneCntSku)}))}})])]),e("div",{staticClass:"mg-t-10"},[e("a",{staticClass:"input-btn d-flex",class:2==t.form.resource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setResource(2)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Allsame"))+" "),e("p",{directives:[{name:"show",rawName:"v-show",value:i.row.sameCntSku,expression:"scope.row.sameCntSku"}],staticStyle:{display:"inline","margin-left":"5px"},domProps:{innerHTML:t._s(t.$t("invoice.hereare",{num:Number(i.row.sameCntSku)}))}})])]),e("div",{staticClass:"mg-t-10"},[e("div",{staticClass:"d-flex justify-content-between"},[e("span",{},[t._v(t._s(t.$t("invoice.Batchsetto"))+" "),e("span",{staticClass:"color-primary tx-600"},[t._v(t._s(i.row.sku))])]),e("div",{staticClass:"tx-right"},[e("el-button",{attrs:{size:"small"},on:{click:function(t){i._self.$refs["popoverSku-"+i.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.changeSkuBatch(i.row)}}},[t._v(t._s(t.$t("invoice.Save1")))])],1)])])]),e("el-input",{staticStyle:{"min-width":"160px"},attrs:{slot:"reference",size:"small",placeholder:"SKU"},on:{change:function(e){return t.changeSkuFn(i.row,i.$index)}},nativeOn:{keyup:function(e){return t.getSkuInfo(i.row,i.$index)}},slot:"reference",model:{value:i.row.sku,callback:function(e){t.$set(i.row,"sku",e)},expression:"scope.row.sku"}})],1)]],2)],1)]}}],null,!1,240136543)}),e("el-table-column",{attrs:{prop:"qty",width:"135"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("invoice.发货数量"))+" "),t.totalCnt?e("el-popover",{attrs:{trigger:"hover",placement:"right"}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadCnt,expression:"loadCnt"}],staticStyle:{"min-height":"50px","font-size":"12px"},attrs:{slot:""},slot:"default"},[e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(t.$t("invoice.Totalpurchases"))),e("b",[t._v(t._s(t.totalCnt))]),t._v(" 个 ")]),t.cnt?[e("div",{staticStyle:{"margin-bottom":"15px","padding-left":"10px"}},t._l(t.cnt,(function(i,s){return e("div",{key:s},[e("span",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(i.name)+" :")]),e("span",{staticStyle:{color:"#606266","white-space":"nowrap"}},[t._v(t._s(i.cnt))])])})),0),e("div",{staticStyle:{"text-align":"right"}},[e("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.cntText,expression:"cntText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.cntOnCopy,expression:"cntOnCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.cntOnError,expression:"cntOnError",arg:"error"}],staticStyle:{color:"#5c6ac4"},attrs:{href:"javascript:;"}},[t._v(t._s(t.$t("invoice.copy")))])])]:t._e()],2),e("span",{attrs:{slot:"reference"},on:{mouseenter:t.getCntCountry},slot:"reference"},[t._v(" ("),e("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer"}},[t._v(t._s(t.totalCnt))]),t._v(") ")])]):t._e()]},proxy:!0},{key:"default",fn:function(i){return[t.isChangeOther(i.row)?[t._v(" "+t._s(i.row.quantity||0)+" ")]:[e("el-input-number",{staticStyle:{width:"110px"},attrs:{size:"small","controls-position":"right",min:1},on:{change:function(e){return t.handleChange(i.row,e)}},model:{value:i.row.quantity,callback:function(e){t.$set(i.row,"quantity",e)},expression:"scope.row.quantity"}})],e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Abnormalreasons")+i.row.abnormalReason,placement:"right"}},[1==i.row.isAbnormal?e("span",{staticClass:"tx-danger",staticStyle:{"margin-top":"10px",display:"inline-block"}},[e("i",{staticClass:"el-icon-info"}),t._v(t._s(t.$t("invoice.Abnormal"))+" ")]):t._e()])]}}],null,!1,4278290594)}),e("el-table-column",{attrs:{label:t.$t("invoice.客户实际售价"),width:"100px"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.customerPrice?[i.row.currency?e("span",{staticStyle:{color:"#909399"}},[t._v(t._s(i.row.currency)+t._s(t.$CE[i.row.currency].symbol))]):e("span",{staticStyle:{color:"#909399"}},[t._v("US$")]),t._v(" "+t._s(i.row.customerPrice)+" ")]:[e("span",{staticStyle:{color:"#c0c4cc"}},[t._v("---")])]]}}],null,!1,2390674292)}),e("el-table-column",{attrs:{prop:"price",label:"",width:t.isChangeAmount()?"120px":"140px"},scopedSlots:t._u([{key:"header",fn:function(){return[e("span",{staticClass:"supplyunit"},[t._v(t._s(t.$t("invoice.Supplyunit")))]),t.isChangeAmount()||t.tempCode?t._e():e("a",{staticClass:"mg-l-0",staticStyle:{"font-weight":"bold"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setLotPrice()}}},[t._v(t._s(t.$t("invoice.Batchset")))]),t.tempCode?e("span",{staticStyle:{color:"#e6a23c"}},[t._v("(设价中)")]):t._e()]},proxy:!0},{key:"default",fn:function(i){return[e("div",[t.isChangePrice(i.row)?e("div",[t._v(" "+t._s(i.row.price||"0.00")+" ")]):[null!==i.row.price?e("el-popover",{ref:"popoverPrice-"+i.$index,attrs:{"popper-class":"with-shadow",width:"400",placement:"top",title:t.$t("invoice.Batchsupplyset"),trigger:"manual"}},[e("div",[e("div",{staticClass:"mg-t-20"},[e("a",{staticClass:"input-btn d-flex",class:1==t.formPrice.resource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setPriceResource(1)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Allproducts"))+" "),e("p",{directives:[{name:"show",rawName:"v-show",value:i.row.noneCntPrice,expression:"scope.row.noneCntPrice"}],staticStyle:{display:"inline","margin-left":"5px"},domProps:{innerHTML:t._s(t.$t("invoice.hereare",{num:Number(i.row.noneCntPrice)}))}})])]),e("div",{staticClass:"mg-t-10"},[e("a",{staticClass:"input-btn d-flex",class:2==t.formPrice.resource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setPriceResource(2)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Allsame"))+" "),e("p",{directives:[{name:"show",rawName:"v-show",value:i.row.sameCntPrice,expression:"scope.row.sameCntPrice"}],staticStyle:{display:"inline","margin-left":"5px"},domProps:{innerHTML:t._s(t.$t("invoice.hereare",{num:Number(i.row.sameCntPrice)}))}})])]),e("div",{staticClass:"mg-t-10"},[e("div",{staticClass:"d-flex justify-content-between"},[e("span",{},[t._v(t._s(t.$t("invoice.Batchsetto"))+" "),e("span",{staticClass:"color-primary tx-600"},[t._v(t._s(i.row.price))])]),e("div",{staticClass:"tx-right"},[e("el-button",{attrs:{size:"small"},on:{click:function(t){i._self.$refs["popoverPrice-"+i.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.changePriceBatch(i.row)}}},[t._v(t._s(t.$t("invoice.Save1")))])],1)])])]),e("el-input",{ref:"refInput"+i.$index,attrs:{slot:"reference",type:"number",name:"price-input",size:"small",placeholder:t.$t("invoice.Supplyunit")},on:{input:function(t){i.row.price=i.row.price.match(/^\d*(\.?\d{0,2})/g)[0]||null},change:function(e){return t.changePriceFn(i.row,i.$index)},blur:function(e){return t.blueChange(i.row,i.$index)}},nativeOn:{keyup:function(e){return t.getPriceInfo(i.row,i.$index)}},slot:"reference",model:{value:i.row.price,callback:function(e){t.$set(i.row,"price",e)},expression:"scope.row.price"}})],1):e("div",[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.noAllow"),placement:"top"},model:{value:i.row.tooltipShow,callback:function(e){t.$set(i.row,"tooltipShow",e)},expression:"scope.row.tooltipShow"}},[e("div",[e("el-input",{staticClass:"unactive",attrs:{slot:"reference",type:"number",name:"price-input",size:"small"},on:{input:function(t){i.row.price=i.row.price.match(/^\d*(\.?\d{0,2})/g)[0]||null},change:function(e){return t.changePriceFn(i.row,i.$index)},focus:function(e){return t.focusChange(i.row,i.$index)}},nativeOn:{keyup:function(e){return t.getPriceInfo(i.row,i.$index)}},slot:"reference",model:{value:i.row.price,callback:function(e){t.$set(i.row,"price",e)},expression:"scope.row.price"}}),t._v(" "+t._s(i.row.price)+" ")],1)])],1)]],2)]}}],null,!1,964058657)}),e("el-table-column",{attrs:{label:"每单运费",width:"90",align:"center"},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"tx-center"},[t._v(" "+t._s(t.$t("invoice.每单运费"))+" ")])]},proxy:!0},{key:"default",fn:function(i){return[t.isChangePrice(i.row)&&1!=t.invoiceInfo.status?e("div",{staticClass:"tx-center"},[t._v(" "+t._s(i.row.shippingFee||"0.00")+" ")]):e("div",{staticClass:"tx-center"},[e("el-input-number",{staticStyle:{width:"70px"},attrs:{min:0,label:"运费",controls:!1,size:"small",precision:2},on:{change:function(e){return t.setShippingFee(i.row)}},model:{value:i.row.shippingFee,callback:function(e){t.$set(i.row,"shippingFee",e)},expression:"scope.row.shippingFee"}})],1)]}}],null,!1,1156940885)}),e("el-table-column",{attrs:{label:t.$t("invoice.小计")+"(US$)",width:"75",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[void 0==i.row.price?e("div",{staticClass:"tx-center"},[t._v(" 0.00 ")]):e("div",{staticClass:"tx-center"},[t._v(" "+t._s(t.itemTotalAmount(i.row))+" ")])]}}],null,!1,1983273004)}),e("el-table-column",{attrs:{label:t.$t("invoice.操作"),width:"90"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"tx-left"},["1"!=t.invoiceInfo.payStatus||"9"==t.invoiceInfo.status||i.row.trackNumber||2==i.row.fulfillStatus?t._e():e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.markShippedOpen(i.row)}}},[t._v(t._s(t.$t("invoice.shippedMark")))])]),e("div",{staticClass:"tx-left"},[1!=t.invoiceInfo.payStatus&&1!=t.invoiceInfo.customerRead?e("div",{staticStyle:{"margin-top":"0"}},[1==i.row.fulfillStatus?[e("el-popover",{ref:"popover-stop-"+i.$index,attrs:{width:"400",placement:"top",title:t.$t("invoice.deleteReason"),trigger:"click"}},[e("div",[e("div",{staticClass:"mg-t-20"},[e("a",{staticClass:"input-btn d-flex",class:1==t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(1)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Outstock"))+" ")])]),e("div",{staticClass:"mg-t-10"},[e("a",{staticClass:"input-btn d-flex",class:2===t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(2)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" 暂时移除 "),e("el-tooltip",{attrs:{content:"表示从当前采购单中暂时移除，稍候可以继续对此Shopify订单生成采购订单。",placement:"right"}},[e("i",{staticClass:"el-icon-info",staticStyle:{"margin-left":"2px","font-size":"14px",color:"#5c6ac4"}})])],1)]),e("div",{staticClass:"mg-t-10"},[e("a",{staticClass:"input-btn d-flex",class:3===t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(3)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" 尚未合作 "),e("el-tooltip",{attrs:{placement:"right"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 表示该商品您无法供货，之后再新生成采购订单时，该商品将自动设为不发货"),e("br"),t._v("（如您以后可以供货，可在“尚未合作商品”列表中对该商品进行报价和处理） ")]),e("i",{staticClass:"el-icon-info",staticStyle:{"margin-left":"2px","font-size":"14px",color:"#5c6ac4"}})])],1)]),e("div",{staticClass:"mg-t-10"},[e("a",{staticClass:"input-btn d-flex",class:99==t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(99)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Other"))+" ")])]),e("div",{staticClass:"mg-t-10"},[e("div",{staticClass:"tx-right"},[e("el-button",{attrs:{size:"small"},on:{click:function(t){i._self.$refs["popover-stop-"+i.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.setStop(i.row,"2")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1)])]),e("el-link",{staticStyle:{color:"#f56c6c","font-size":"12px"},attrs:{slot:"reference",underline:!1},on:{click:t.showPopover3},slot:"reference"},[t._v(" "+t._s(t.$t("invoice.Setdelete"))+" ")])],1)]:1==t.invoiceInfo.allowWithdraw?[e("el-button",{staticStyle:{color:"#67c23a","font-size":"12px"},attrs:{type:"text"},on:{click:function(e){return t.setStop(i.row,"1")}}},[t._v(t._s(t.$t("invoice.Resume")))])]:t._e(),"2"==i.row.fulfillStatus?e("div",{staticClass:"tx-center"},[e("el-link",{attrs:{slot:"reference",type:"danger"},on:{click:function(e){return t.setRestore(i.row)}},slot:"reference"},[t._v("删除")])],1):t._e()],2):t._e()])]}}],null,!1,3106071976)})],1)],1):t._e(),2==t.tabActive?e("div",[e("el-table",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.pageLoading,expression:"pageLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"table-with-body",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.6)","row-class-name":t.tableRowClassName2,"header-cell-style":t.getRowClass3,"cell-class-name":t.getCellClass,"cell-style":t.cellStyle,data:t.invoiceData,stripe:"",border:"","row-key":t.getRowKey,"expand-row-keys":t.expands},on:{"row-click":t.rowClick,"expand-change":t.expandChange}},[e("el-table-column",{attrs:{type:"expand",width:"20"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-card",{attrs:{shadow:"never"}},[e("div",[e("el-table",{staticClass:"table-with-body",attrs:{"header-cell-style":t.getRowClass2,"cell-style":t.cellStyle2,data:i.row.displayItems,stripe:"",border:""}},[e("el-table-column",{attrs:{width:"150",prop:"sku",label:t.$t("invoice.SupplierSKU")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"d-flex sku-with-error"},[i.row.sku&&i.row.price||!(i.row.quantity>0)||2==i.row.fulfillStatus?t._e():e("el-tooltip",{attrs:{placement:"left"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))),e("br"),t._v(t._s(t.$t("invoice.Reason"))+" "),i.row.sku||i.row.price?i.row.sku?e("span",[t._v(t._s(t.$t("invoice.supplypricemissing")))]):e("span",[t._v(t._s(t.$t("invoice.SKUmissing")))]):e("span",[t._v(t._s(t.$t("invoice.pricemissing")))])]),e("i",{staticClass:"fa fa-exclamation-triangle mg-r-10",staticStyle:{color:"#f56c6c",left:"-55px"}})]),e("div",[t.isChangeSku(i.row)?e("div",[e("el-input",{attrs:{disabled:"disabled",size:"small",placeholder:"SKU"},on:{change:function(e){return t.changeSkuFnBySub(i.row)}},model:{value:i.row.sku,callback:function(e){t.$set(i.row,"sku",e)},expression:"scope.row.sku"}})],1):[e("el-input",{attrs:{slot:"reference",size:"small",placeholder:"SKU"},on:{change:function(e){return t.changeSkuFnBySub(i.row)}},slot:"reference",model:{value:i.row.sku,callback:function(e){t.$set(i.row,"sku",e)},expression:"scope.row.sku"}})]],2)],1)]}}],null,!0)}),e("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[e("div",{staticStyle:{"max-width":"100%","text-align":"left"}},[e("div",{staticClass:"d-flex no-wrap justify-content-between"},[e("el-popover",{staticClass:"d-flex",attrs:{"popper-class":"customer-popover",placement:"bottom",title:`${t.$t("invoice.ShopifyOrders")} ${i.row.codeName}`,width:"500",trigger:"hover"}},[e("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(i.row.codeName)),e("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),i.row.shippingJson&&i.row.shippingJson.name?e("span",{staticClass:"tx-ellipsis1",staticStyle:{display:"inline-block","max-width":"100px"}},[t._v("To "+t._s(i.row.shippingJson.name)+" ")]):t._e(),i.row.shippingJson&&i.row.shippingJson.country?e("span",{staticStyle:{display:"inline-block","max-width":"100px","text-overflow":"ellipsis"}},[t._v(" ("+t._s(i.row.shippingJson.country)+")")]):t._e()]),e("div",{staticClass:"mg-y-15 mg-t-20"},[e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" "+t._s(t.$t("invoice.Orderdate"))+" ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.timeCreated)+" ")])])]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" "+t._s(t.$t("invoice.Buyer"))+" ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.name?i.row.shippingJson.name:"---")+" ")])]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Copyinformation"),placement:"left"}},[e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.shippingJson.name,expression:"\n                                                          scope.row.shippingJson\n                                                            .name\n                                                        ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"\n                                                          onCopy\n                                                        ",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"\n                                                          onError\n                                                        ",arg:"error"}],staticClass:"el-icon-document-copy"})])],1)],1),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" "+t._s(t.$t("invoice.address"))+" ")]),e("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{"max-width":"75%"}},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.zip?i.row.shippingJson.zip:"---")+" "+t._s(i.row.shippingJson&&i.row.shippingJson.address1?i.row.shippingJson.address1:"---")+" "+t._s(i.row.shippingJson&&i.row.shippingJson.city?i.row.shippingJson.city:"---")+" "+t._s(i.row.shippingJson&&i.row.shippingJson.province?i.row.shippingJson.province:"---")+" ")])])]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}}),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.country?i.row.shippingJson.country:"---")+" ")])]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Copyaddress"),placement:"left"}},[e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.shippingJson.zip+i.row.shippingJson.address1+i.row.shippingJson.city+i.row.shippingJson.province+i.row.shippingJson.country,expression:"\n                                                          scope.row.shippingJson\n                                                            .zip +\n                                                          scope.row.shippingJson\n                                                            .address1 +\n                                                          scope.row.shippingJson\n                                                            .city +\n                                                          scope.row.shippingJson\n                                                            .province +\n                                                          scope.row.shippingJson\n                                                            .country\n                                                        ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"\n                                                          onCopy\n                                                        ",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"\n                                                          onError\n                                                        ",arg:"error"}],staticClass:"el-icon-document-copy"})])],1)],1),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"100px","text-align":"right",color:"#999"}},[t._v(" "+t._s(t.$t("invoice.BuyerEmail"))+" ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.email)+" ")])]),i.row.email?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.CopyEmail"),placement:"left"}},[e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:i.row.email,expression:"\n                                                            scope.row.email\n                                                          ",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"\n                                                            onCopy\n                                                          ",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"\n                                                            onError\n                                                          ",arg:"error"}],staticClass:"el-icon-document-copy"})])],1)]:t._e()],2)])])],1)])])]}}],null,!0)},[e("template",{slot:"header"},[t._v(" "+t._s(t.$t("invoice.ShopifyOrders"))+" ")])],2),e("el-table-column",{attrs:{prop:"qty",width:"160"},scopedSlots:t._u([{key:"default",fn:function(s){return[[t.isChangeOther(s.row)?[e("el-input-number",{attrs:{disabled:!0,size:"small",min:1},on:{change:function(e){return t.handleChangeBySub(i,s.row,e)}},model:{value:s.row.quantity,callback:function(e){t.$set(s.row,"quantity",e)},expression:"scope.row.quantity"}})]:[e("el-input-number",{attrs:{size:"small",min:1},on:{change:function(e){return t.handleChangeBySub(i,s.row,e)}},model:{value:s.row.quantity,callback:function(e){t.$set(s.row,"quantity",e)},expression:"scope.row.quantity"}})]]]}}],null,!0)},[e("template",{slot:"header"},[t._v(" "+t._s(t.$t("invoice.Purchasequantity"))+" ")])],2),e("el-table-column",{attrs:{label:t.$t("invoice.客户实际售价"),width:"100px"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.customerPrice?[i.row.currency?e("span",{staticStyle:{color:"#909399"}},[t._v(t._s(i.row.currency)+t._s(t.$CE[i.row.currency].symbol))]):e("span",{staticStyle:{color:"#909399"}},[t._v("US$")]),t._v(" "+t._s(i.row.customerPrice)+" ")]:[e("span",{staticStyle:{color:"#c0c4cc"}},[t._v("---")])]]}}],null,!0)}),e("el-table-column",{attrs:{prop:"price",label:t.$t("invoice.Supplyunit"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",[t.isChangePrice(s.row)?e("div",[e("el-input",{attrs:{disabled:"disabled",name:"price-input",size:"small",placeholder:t.$t("invoice.Supplyunit")},on:{change:function(e){return t.changePriceFnBySub(i,s.row)}},model:{value:s.row.price,callback:function(e){t.$set(s.row,"price",e)},expression:"scope.row.price"}})],1):[e("el-input-number",{attrs:{slot:"reference",name:"price-input",size:"small",placeholder:t.$t("invoice.Supplyunit"),min:0,controls:!1,precision:2},on:{change:function(e){return t.changePriceFnBySub(i,s.row)}},slot:"reference",model:{value:s.row.price,callback:function(e){t.$set(s.row,"price",e)},expression:"scope.row.price"}})]],2)]}}],null,!0)}),e("el-table-column",{attrs:{label:t.$t("invoice.Totalsupply"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(s){return[t.isChangePrice(s.row)?e("div",[e("el-input",{attrs:{name:"price-input",disabled:"disabled",size:"small",placeholder:t.$t("invoice.Totalsupply")},model:{value:s.row.amount,callback:function(e){t.$set(s.row,"amount",e)},expression:"scope.row.amount"}})],1):[e("el-input",{attrs:{name:"price-input",type:"number",size:"small",placeholder:t.$t("invoice.Totalsupply")},on:{input:function(t){s.row.amount=s.row.amount.match(/^\d*(\.?\d{0,2})/g)[0]||null},change:function(e){return t.changePriceTotalFnBySub(i,s.row)}},model:{value:s.row.amount,callback:function(e){t.$set(s.row,"amount",e)},expression:"scope.row.amount"}})]]}}],null,!0)})],1),e("div",{staticClass:"expandPage"},[e("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":i.row.displayItemsPage,background:!0,layout:"total, prev, pager, next, jumper","page-size":50,total:Number(i.row.allItems.length)},on:{"current-change":e=>t.DisplayToPage(e,i.row)}})],1)],1)])]}}],null,!1,2658837656)}),e("el-table-column",{attrs:{width:"240"},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"d-flex align-item-center change-type"},[t._v(" "+t._s(t.$t("invoice.SupplierSKU"))+" ")])]},proxy:!0},{key:"default",fn:function(i){return[e("div",{staticClass:"d-flex sku-with-error"},[i.row.sku&&i.row.price||!(i.row.quantity>0)||2==i.row.fulfillStatus?t._e():e("el-tooltip",{attrs:{placement:"left"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.SKUmissing"))),e("br"),t._v(t._s(t.$t("invoice.Reason"))+" "),i.row.sku||i.row.price?i.row.sku?e("span",[t._v(t._s(t.$t("invoice.supplypricemissing")))]):e("span",[t._v(t._s(t.$t("invoice.SKUmissing")))]):e("span",[t._v(t._s(t.$t("invoice.pricemissing")))])]),e("i",{staticClass:"fa fa-exclamation-triangle mg-r-10",staticStyle:{color:"#f56c6c",left:"-55px"}})]),e("div",[t.isChangeSku(i.row)?e("div",[e("el-input",{attrs:{disabled:"disabled",size:"small",placeholder:"SKU"},on:{change:function(e){return t.changeSkuFn(i.row,i.$index)}},model:{value:i.row.sku,callback:function(e){t.$set(i.row,"sku",e)},expression:"scope.row.sku"}})],1):[e("el-popover",{ref:"popoverSkuGroup-"+i.$index,attrs:{"popper-class":"with-shadow",width:"400",placement:"top",title:t.$t("invoice.Batchset"),trigger:"manual"}},[e("div",[e("div",{staticClass:"mg-t-10"},[e("div",{staticClass:"d-flex justify-content-between"},[e("span",{},[t._v(t._s(t.$t("invoice.Total"))+" "),e("span",{staticClass:"color-primary tx-600"},[t._v(t._s(i.row.cnt))]),t._v(t._s(t.$t("invoice.haveset"))+" "),e("span",{staticClass:"color-primary tx-600"},[t._v(t._s(i.row.sku))])])])]),e("div",{staticClass:"mg-t-10"},[e("div",{staticClass:"tx-right"},[e("el-button",{attrs:{size:"small"},on:{click:function(t){i._self.$refs["popoverSkuGroup-"+i.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.changeSkuFn(i.row,i.$index,"close")}}},[t._v(t._s(t.$t("invoice.Save1")))])],1)])]),e("el-input",{attrs:{slot:"reference",size:"small",placeholder:"SKU"},on:{change:function(e){return t.changeSkuFn(i.row,i.$index)}},nativeOn:{keyup:function(e){return t.getSkuInfo2(i.row,i.$index,"popoverSkuGroup")}},slot:"reference",model:{value:i.row.sku,callback:function(e){t.$set(i.row,"sku",e)},expression:"scope.row.sku"}})],1),1!=t.invoiceInfo.payStatus&&1!=t.invoiceInfo.customerRead?e("el-popover",{ref:"popover-stop-"+i.$index,attrs:{width:"400",placement:"top",title:t.$t("invoice.deleteReason"),trigger:"click"},on:{show:t.setDefaultResource}},[e("div",[e("div",{staticClass:"mg-t-20"},[e("a",{staticClass:"input-btn d-flex",class:1==t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(1)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Outstock"))+" ")])]),e("div",{staticClass:"mg-t-10"},[e("a",{staticClass:"input-btn d-flex",class:2===t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(2)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" 暂时移除 "),e("el-tooltip",{attrs:{content:"表示从当前采购单中暂时移除，稍候可以继续对此Shopify订单生成采购订单。",placement:"right"}},[e("i",{staticClass:"el-icon-info",staticStyle:{"margin-left":"2px","font-size":"14px",color:"#5c6ac4"}})])],1)]),e("div",{staticClass:"mg-t-10"},[e("a",{staticClass:"input-btn d-flex",class:3===t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(3)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" 尚未合作 "),e("el-tooltip",{attrs:{placement:"right"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 表示该商品您无法供货，之后再新生成采购订单时，该商品将自动设为不发货 "),e("br"),t._v("（如您以后可以供货，可在“尚未合作商品”列表中对该商品进行报价和处理 ")]),e("i",{staticClass:"el-icon-info",staticStyle:{"margin-left":"2px","font-size":"14px",color:"#5c6ac4"}})])],1)]),e("div",{staticClass:"mg-t-10"},[e("a",{staticClass:"input-btn d-flex",class:99==t.stopResource?"active":"",staticStyle:{color:"#333"},attrs:{href:"javascript:;"},on:{click:function(e){return t.setStopResource(99)}}},[e("span",{staticClass:"mg-r-5"}),t._v(" "+t._s(t.$t("invoice.Other"))+" ")])]),e("div",{staticClass:"mg-t-10"},[e("div",{staticClass:"tx-right"},[e("el-button",{attrs:{size:"small"},on:{click:function(t){i._self.$refs["popover-stop-"+i.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.setStop(i.row,"2")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1)])]),e("el-link",{staticStyle:{color:"#f56c6c","font-size":"12px","text-align":"left",display:"block"},attrs:{slot:"reference",underline:!1},on:{click:t.showPopover3},slot:"reference"},[e("i",{staticClass:"el-icon-remove-outline sbns-icon",staticStyle:{"margin-right":"3px"}}),t._v(" "+t._s(t.$t("invoice.Setdelete"))+" ")])],1):t._e()]],2)],1)]}}],null,!1,619046840)}),e("el-table-column",{scopedSlots:t._u([{key:"header",fn:function(){return[t.searchName||t.searchTrack?t._e():e("div",[e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("div",[t._v(" "+t._s(t.$t("invoice.Orderitems"))+" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchName=!0}}},[e("i",{staticClass:"el-icon-search mg-l-5"})])],1),e("div",[t._v(" "+t._s(t.$t("invoice.Logisticsnumber"))+" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchTrack=!0}}},[e("i",{staticClass:"el-icon-search mg-l-5"})])],1)])]),t.searchName||t.searchTrack?e("div",{staticClass:"d-flex"},[e("el-input",{ref:"searchNameInput",attrs:{size:"mini",type:"text",placeholder:t.searchName?t.$t("invoice.Supportsearchname"):t.$t("invoice.Supportsearchnumber"),clearable:""},on:{clear:function(e){return t.Filter(2,"name")},blur:function(e){return t.Filter(3,"name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Filter(1,"name")}},model:{value:t.searchNameInput,callback:function(e){t.searchNameInput=e},expression:"searchNameInput"}},[e("el-button",{attrs:{slot:"append",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){return t.Filter(1,"name")}},slot:"append"})],1)],1):t._e()]},proxy:!0},{key:"default",fn:function(i){return[e("div",{staticClass:"d-flex"},[e("el-image",{staticStyle:{"min-width":"70px",width:"70px",height:"70px",margin:"0 5px 0 0",border:"1px solid #ddd"},attrs:{lazy:"",src:i.row.imgUrl,"preview-src-list":i.row.previewList}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"20px"}})])]),e("div",{staticStyle:{"max-width":"100%","text-align":"left"}},[e("div",{staticClass:"tx-600"},[t._v(" "+t._s(i.row.name)+" ")])])],1)]}}],null,!1,3896335951)}),e("el-table-column",{attrs:{prop:"qty",width:"80"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("invoice.Purchasequantity"))+" ")]},proxy:!0},{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.quantity))])]}}],null,!1,256918277)}),e("el-table-column",{attrs:{prop:"price",width:t.isChangeAmount()?"120px":"200px"},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"supplyunit",staticStyle:{"text-align":"center"}},[t._v(" "+t._s(t.$t("invoice.Supplyunit"))+" ")])]},proxy:!0},{key:"default",fn:function(i){return[e("div",[t.isChangePrice(i.row)?e("div",{staticClass:"d-flex"},[e("el-input",{attrs:{disabled:"disabled",name:"price-input",size:"small",placeholder:t.$t("invoice.Supplyunit")},on:{change:function(e){return t.changePriceFn(i.row,i.$index)}},model:{value:i.row.price,callback:function(e){t.$set(i.row,"price",e)},expression:"scope.row.price"}}),t.isChangeAmount()||"1"!==i.fulfillStatus?t._e():e("a",{staticClass:"mg-l-0",staticStyle:{"font-weight":"bold","white-space":"nowrap","margin-left":"10px"},attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.setLotPrice(i.row)}}},[t._v(t._s(t.$t("invoice.Batchset")))])],1):e("div",{staticClass:"d-flex"},[null!==i.row.price?e("el-popover",{ref:"popoverPriceGroup-"+i.$index,attrs:{"popper-class":"with-shadow",width:"400",placement:"top",title:t.$t("invoice.Batchsupplyset"),trigger:"manual"}},[e("div",[e("div",{staticClass:"mg-t-10"},[e("div",{staticClass:"d-flex justify-content-between"},[e("span",{},[e("span",{domProps:{innerHTML:t._s(t.$t("invoice.hereare",{num:Number(i.row.cnt)}))}}),t._v(t._s(t.$t("invoice.Batchsetto"))+" "),e("span",{staticClass:"color-primary tx-600"},[t._v(t._s(i.row.price))])])])]),e("div",{staticClass:"mg-t-10"},[e("div",{staticClass:"tx-right"},[e("el-button",{attrs:{size:"small"},on:{click:function(t){i._self.$refs["popoverPriceGroup-"+i.$index].doClose()}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.changePriceFn(i.row,i.$index,"close")}}},[t._v(t._s(t.$t("invoice.Save1")))])],1)])]),e("el-input",{ref:"refInput"+i.$index,attrs:{slot:"reference",type:"number",name:"price-input",size:"small",placeholder:t.$t("invoice.Supplyunit")},on:{input:function(t){i.row.price=i.row.price.match(/^\d*(\.?\d{0,2})/g)[0]||null},change:function(e){return t.changePriceFn(i.row,i.$index)},blur:function(e){return t.blueChange(i.row,i.$index)}},nativeOn:{keyup:function(e){return t.getPriceInfo2(i.row,i.$index,"popoverPriceGroup")}},slot:"reference",model:{value:i.row.price,callback:function(e){t.$set(i.row,"price",e)},expression:"scope.row.price"}})],1):e("div",[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.noAllow"),placement:"top"},model:{value:i.row.tooltipShow,callback:function(e){t.$set(i.row,"tooltipShow",e)},expression:"scope.row.tooltipShow"}},[e("div",[e("el-input",{staticClass:"unactive",attrs:{slot:"reference",type:"number",name:"price-input",size:"small"},on:{input:function(t){i.row.price=i.row.price.match(/^\d*(\.?\d{0,2})/g)[0]||null},change:function(e){return t.changePriceFn(i.row,i.$index)},focus:function(e){return t.focusChange(i.row,i.$index)}},nativeOn:{keyup:function(e){return t.getPriceInfo(i.row,i.$index)}},slot:"reference",model:{value:i.row.price,callback:function(e){t.$set(i.row,"price",e)},expression:"scope.row.price"}}),t._v(" "+t._s(i.row.price)+" ")],1)])],1),t.isChangeAmount()?t._e():e("a",{staticClass:"mg-l-0",staticStyle:{"font-weight":"bold","white-space":"nowrap","margin-left":"10px"},attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.setLotPrice(i.row)}}},[t._v(t._s(t.$t("invoice.Batchset")))])],1),e("p",{directives:[{name:"show",rawName:"v-show",value:i.row.minPrice>0&&i.row.minPrice!=i.row.maxPrice,expression:"\n                                  scope.row.minPrice > 0 &&\n                                  scope.row.minPrice != scope.row.maxPrice\n                                "}]},[t._v(" "+t._s(t.$t("invoice.supplyprice"))+t._s(t.$numberToCurrency(i.row.minPrice))+" ~ "+t._s(t.$numberToCurrency(i.row.maxPrice))+" ")])])]}}],null,!1,505544216)}),e("el-table-column",{attrs:{label:t.$t("invoice.Totalsupply"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(" "+t._s(t.$numberToCurrency(i.row.amount))+" ")])]}}],null,!1,2205276743)})],1)],1):t._e()]:t._e(),0==t.invoiceData.length?[e("el-table",{staticClass:"table-only",attrs:{"header-cell-style":t.getRowClass,"cell-style":t.cellStyle}},[e("el-table-column",{attrs:{width:"150",label:t.$t("invoice.SupplierSKU")}}),e("el-table-column",{attrs:{label:"Items"}}),e("el-table-column",{attrs:{label:"Quantity",width:"160"}}),e("el-table-column",{attrs:{label:"Unit Cost(US$)",width:"120"}}),e("el-table-column",{attrs:{label:"Subtotal(US$)",width:"120"}})],1),e("el-table",{staticClass:"table-with-body",attrs:{"row-class-name":t.tableRowClassName,"header-cell-style":t.getRowClass,"cell-class-name":t.getCellClass,"cell-style":t.cellStyle,data:t.invoiceData,stripe:"",border:""}},[e("el-table-column",{attrs:{width:"150"}},[e("template",{slot:"header"},[t._v(" "+t._s(t.$t("invoice.SupplierSKU"))+" ")])],2),e("el-table-column",[e("template",{slot:"header"},[t.searchName||t.searchTrack?t._e():e("div",[e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("div",[t._v(" "+t._s(t.$t("invoice.Orderitems"))+" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchName=!0}}},[e("i",{staticClass:"el-icon-search mg-l-5"})])],1),e("div",[t._v(" "+t._s(t.$t("invoice.Logisticsnumber"))+" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.searchTrack=!0}}},[e("i",{staticClass:"el-icon-search mg-l-5"})])],1)])]),t.searchName||t.searchTrack?e("div",{staticClass:"d-flex"},[e("el-input",{ref:"searchNameInput",attrs:{size:"mini",type:"text",placeholder:t.searchName?t.$t("invoice.Supportsearchname"):t.$t("invoice.Supportsearchnumber"),clearable:""},on:{clear:function(e){return t.Filter(2,"name")},blur:function(e){return t.Filter(3,"name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Filter(1,"name")}},model:{value:t.searchNameInput,callback:function(e){t.searchNameInput=e},expression:"searchNameInput"}},[e("el-button",{attrs:{slot:"append",type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){return t.Filter(1,"name")}},slot:"append"})],1)],1):t._e()])],2),e("el-table-column",{attrs:{prop:"qty",width:"160"},scopedSlots:t._u([{key:"header",fn:function(e){return[t._v(" "+t._s(t.$t("invoice.Purchasequantity"))+" ")]}}],null,!1,3053079991)}),e("el-table-column",{attrs:{prop:"price",label:t.$t("invoice.Supplyunit"),width:"120"}}),e("el-table-column",{attrs:{label:t.$t("invoice.Totalsupply"),width:"120"}})],1)]:t._e()],2),t.invoiceData.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",{staticStyle:{position:"relative",top:"10px"}},[e("el-pagination",{attrs:{"hide-on-single-page":!0,"current-page":t.page,background:!0,layout:"total, prev, pager, next, jumper","page-size":t.rowsPerPage,total:Number(t.totalCount)},on:{"current-change":t.toPage}})],1)])],1):t._e(),e("el-divider"),1==t.tabActive||2==t.tabActive?[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-footer mg-t-30 mg-b-10",staticStyle:{"min-height":"50px","z-index":"0"}},[e("el-row",[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"text item"},[e("div",{staticStyle:{"background-color":"#fff",padding:"20px"}},[e("p",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.customerRead,expression:"invoiceInfo.customerRead == 1"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Customerconfirmed")))]),t._v(t._s(t.invoiceInfo.timeRead?t.invoiceInfo.timeRead:"---")+" ")]),e("p",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.payStatus,expression:"invoiceInfo.payStatus == 1"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Supplierconfirmed"))+" ")]),t._v(t._s(t.invoiceInfo.timePaid?t.invoiceInfo.timePaid:"---")+" ")]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.timeApiGet,expression:"invoiceInfo.timeApiGet"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.ERPdownloaded"))+" ")]),t._v(t._s(t.invoiceInfo.timeApiGet?t.invoiceInfo.timeApiGet:"---")+" ")]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.firstDeliverTime,expression:"invoiceInfo.firstDeliverTime"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Supplierstarts")))]),t._v(t._s(t.invoiceInfo.firstDeliverTime?t.invoiceInfo.firstDeliverTime:"---")+" ")])])])]),e("el-col",{attrs:{span:16}},[e("div",{staticClass:"grid-content invoice-bottom"},[e("div",{staticClass:"d-flex justify-content-end mg-b-10"},[e("div",{},[t._v(" "+t._s(t.$t("invoice.Producttotal"))+"(US$) : ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(t.realAmount>0?t.$numberToCurrency(t.itemAmount):t.$t("invoice.Notset"))+" ")])]),e("div",{staticClass:"d-flex justify-content-end"},[e("div",{},[t._v(" "+t._s(t.$t("invoice.Shippingtotal"))+" (US$) : ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(Number(t.shippingAmount)?t.$numberToCurrency(t.shippingAmount):"0.00")+" ")])]),e("el-divider"),e("div",{staticClass:"d-flex justify-content-end mg-t-10 bold-input"},[e("div",{staticClass:"tx-bold"},[t._v(" "+t._s(t.$t("invoice.Totalamount"))+" ")]),e("div",{staticClass:"mg-l-5 pd-r-15 tx-danger tx-bold",staticStyle:{"font-size":"16px"}},[t._v(" "+t._s(t.realAmount&&t.realAmount>0?t.$numberToCurrency(t.realAmount):t.$t("invoice.Notset"))+" ")])]),t.$store.state.userInfo.canUseWallet?e("div",{staticClass:"d-flex justify-content-end mg-t-10 set-paytype-3",staticStyle:{"align-items":"center","background-color":"#f2f6fc",padding:"15px 0"}},[e("div",{},[t._v(" "+t._s(t.$t("invoice.Paymentmethod"))+" : ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[2==t.invoiceInfo.paymentType&&t.invoiceInfo.payUrl?e("a",{attrs:{href:t.invoiceInfo.payUrl,target:"_blank"}},[t._v(" "+t._s(t.$t(t.$dict.paymentType[t.invoiceInfo.paymentType].text))+" ")]):e("span",[t._v(" "+t._s(t.invoiceInfo.paymentType?t.$t(t.$dict.paymentType[t.invoiceInfo.paymentType].text):t.$t("invoice.Notset"))+" ")]),1!=t.invoiceInfo.payStatus?e("el-link",{staticClass:"mg-l-15",attrs:{type:"primary"},on:{click:t.openSetPayment}},[e("i",{staticClass:"el-icon-edit"})]):t._e()],1)]):t._e()],1),"9"!=t.invoiceInfo.status&&"1"!=t.invoiceInfo.status?e("div",{staticClass:"tx-right mg-t-15 d-flex justify-content-end"},[t.invoiceCnt.notBindCnt>0?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.stillInvoice"))+" "),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.changeTabByTip}},[e("i",{staticClass:"fa fa-exclamation-triangle",staticStyle:{color:"#f56c6c"}})]),t._v(" "+t._s(t.$t("invoice.stillmissing"))),e("br"),t._v(t._s(t.$t("invoice.invoicedetails"))+" ")],1),t.invoiceInfo.status<5?e("el-button",{staticClass:"with-disabled step-btn-4",staticStyle:{"margin-right":"10px"},attrs:{disabled:"9"==t.invoiceInfo.status,size:"medium",icon:"fa fa-send"}},[t._v(t._s(t.$t("invoice.Sendinvoiceto")))]):t._e()],1)]:[e("el-button",{staticClass:"step-btn-4",staticStyle:{"margin-right":"10px"},attrs:{disabled:"9"==t.invoiceInfo.status,size:"medium",type:"success",icon:"fa fa-send"},on:{click:function(e){return t.sendInvoice()}}},[t._v(t._s(t.$t("invoice.Sendinvoiceto")))])],0==t.invoiceCnt.notBindCnt?[e("div",{staticClass:"d-flex btn-wrap"},[2==t.invoiceInfo.payStatus?[e("el-tooltip",{attrs:{disabled:!t.hasAbnormal,effect:"dark",content:"采购数量异常，请处理后再操作",placement:"top-start"}},[e("el-popover",{attrs:{placement:"top",width:"460",trigger:"manual"},model:{value:t.confirmVisible,callback:function(e){t.confirmVisible=e},expression:"confirmVisible"}},[e("div",[e("div",{staticClass:"mg-b-5",staticStyle:{"line-height":"20px"}},[t._v(" "+t._s(t.$t("invoice.Received"))+" ")]),e("div",{staticClass:"tx-error mg-b-10",staticStyle:{"line-height":"20px"}},[t._v(" "+t._s(t.$t("invoice.Afterconfirmation"))+" ")])]),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.confirmVisible=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.confirmMoneyOnly("1")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1),e("a",{staticClass:"btn-item btn-item1",class:{" with-disabled":"9"==t.invoiceInfo.status||t.hasAbnormal},attrs:{slot:"reference",href:"javascript:;"},on:{click:t.showPopover},slot:"reference"},[e("i",{staticClass:"fa fa-dollar"}),e("span",[t._v(t._s(t.$t("invoice.Confirmation")))])])])],1)]:t._e(),"9"==t.invoiceInfo.status?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.paymentmethod"))+" ")]),e("a",{staticClass:"btn-item btn-item1 with-disabled",attrs:{href:"javascript:;"}},[e("i",{staticClass:"fa fa-dollar"}),e("span",[t._v(t._s(t.$t("invoice.Confirmation")))])])])]:t._e(),1==t.invoiceInfo.payStatus?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.haveconfirmed"))+" ")]),e("a",{staticClass:"btn-item btn-item1 with-disabled",attrs:{href:"javascript:;"}},[e("i",{staticClass:"fa fa-dollar"}),e("span",[t._v(t._s(t.$t("invoice.Confirmation")))])])]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.Clickbutton"))+" ")]),e("a",{staticClass:"btn-item btn-item2 confirmStep1",attrs:{href:"javascript:;"},on:{click:t.confirmMoney}},[e("i",{staticClass:"el-icon-connection"}),e("span",[t._v(t._s(t.$t("invoice.ERPsystem")))])])])]:[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.receivepayment"))+" ")]),e("a",{staticClass:"btn-item btn-item2 with-disabled confirmStep1",class:t.hasAbnormal?"with-disabled-btn1":"",attrs:{href:"javascript:;"}},[e("i",{staticClass:"el-icon-connection"}),e("span",[t._v(t._s(t.$t("invoice.ERPsystem")))])])])]],2)]:t._e()],2):t._e(),Number(t.invoiceCnt.notBindCnt)||"1"!=t.invoiceInfo.status?t._e():e("div",{staticClass:"tx-right mg-t-15 d-flex justify-content-end"},[e("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"medium"},on:{click:function(e){return t.setPriceConfirm()}}},[t._v(" "+t._s(t.$t("invoice.确认完成报价"))+" ")])],1)])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.noMore,expression:"!noMore"}],staticClass:"page-footer-fixed"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceConfirmTourShow,expression:"invoiceConfirmTourShow"}],staticClass:"tour-mask"}),e("div",{staticStyle:{width:"1270px",margin:"0 auto"}},[e("div",{staticClass:"without-hover"},[e("el-row",{staticStyle:{margin:"20px 15px 10px -15px"}},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",{staticClass:"d-flex"},[e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.customerRead,expression:"invoiceInfo.customerRead == 1"}],staticStyle:{display:"flex","align-items":"center",color:"#67c23a","margin-right":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("div",{staticStyle:{"margin-left":"5px"}},[t._v(" "+t._s(t.invoiceInfo.timeRead?t.invoiceInfo.timeRead:"---")+" "),e("span",{staticStyle:{display:"block","white-space":"normal"}},[t._v(t._s(t.$t("invoice.Customerconfirmed")))])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.payStatus,expression:"invoiceInfo.payStatus == 1"}],staticStyle:{display:"flex","align-items":"center",color:"#67c23a","margin-right":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("div",{staticStyle:{"margin-left":"5px"}},[t._v(" "+t._s(t.invoiceInfo.timePaid?t.invoiceInfo.timePaid:"---")+" "),e("span",{staticStyle:{display:"block","white-space":"normal"}},[t._v(t._s(t.$t("invoice.Supplierconfirmed")))])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.timeApiGet,expression:"invoiceInfo.timeApiGet"}],staticStyle:{display:"flex","align-items":"center",color:"#67c23a","margin-right":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("div",{staticStyle:{"margin-left":"5px"}},[t._v(" "+t._s(t.invoiceInfo.timeApiGet?t.invoiceInfo.timeApiGet:"---")+" "),e("span",{staticStyle:{display:"block","white-space":"normal"}},[t._v(t._s(t.$t("invoice.ERPdownloaded")))])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.firstDeliverTime,expression:"invoiceInfo.firstDeliverTime"}],staticStyle:{display:"flex","align-items":"center",color:"#67c23a","margin-right":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("div",{staticStyle:{"margin-left":"5px"}},[t._v(" "+t._s(t.invoiceInfo.firstDeliverTime?t.invoiceInfo.firstDeliverTime:"---")+" "),e("span",{staticStyle:{display:"block","white-space":"normal"}},[t._v(t._s(t.$t("invoice.Supplierstarts")))])])])]),e("div",{staticClass:"d-flex justify-content-end",staticStyle:{"white-space":"nowrap"}},[e("div",{staticClass:"tx-bold"},[t._v(" "+t._s(t.$t("invoice.Totalamount"))+" ")]),e("div",{staticClass:"mg-l-5",staticStyle:{"font-weight":"bold","font-size":"16px !important"}},[t._v(" "+t._s(t.realAmount>0?t.$numberToCurrency(t.realAmount):t.$t("invoice.Notset"))+" ")])])])])],1)],1),e("div",{staticClass:"with-hover"},[e("el-row",{staticStyle:{margin:"10px 15px 10px -15px"}},[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"text item"},[e("div",{staticStyle:{"background-color":"#fff",padding:"20px"}},[e("p",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.customerRead,expression:"invoiceInfo.customerRead == 1"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Customerconfirmed"))+" ")]),t._v(t._s(t.invoiceInfo.timeRead?t.invoiceInfo.timeRead:"---")+" ")]),e("p",{directives:[{name:"show",rawName:"v-show",value:1==t.invoiceInfo.payStatus,expression:"invoiceInfo.payStatus == 1"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Supplierconfirmed"))+" ")]),t._v(t._s(t.invoiceInfo.timePaid?t.invoiceInfo.timePaid:"---")+" ")]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.timeApiGet,expression:"invoiceInfo.timeApiGet"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.ERPdownloaded"))+" ")]),t._v(t._s(t.invoiceInfo.timeApiGet?t.invoiceInfo.timeApiGet:"---")+" ")]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.invoiceInfo.firstDeliverTime,expression:"invoiceInfo.firstDeliverTime"}],staticStyle:{color:"#67c23a","margin-bottom":"20px"}},[e("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"16px"}}),e("span",{staticStyle:{display:"inline-block",width:"120px",margin:"0 5px"}},[t._v(t._s(t.$t("invoice.Supplierstarts"))+" ")]),t._v(t._s(t.invoiceInfo.firstDeliverTime?t.invoiceInfo.firstDeliverTime:"---")+" ")])])])]),e("el-col",{staticStyle:{overflow:"visible"},attrs:{span:16}},[e("div",{staticClass:"grid-content invoice-bottom"},[e("div",{staticClass:"d-flex justify-content-end mg-b-10"},[e("div",{},[t._v(" "+t._s(t.$t("invoice.Producttotal"))+" (US$) : ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(t.realAmount>0?t.$numberToCurrency(t.itemAmount):t.$t("invoice.Notset"))+" ")])]),e("div",{staticClass:"d-flex justify-content-end"},[e("div",{},[t._v(" "+t._s(t.$t("invoice.Shippingtotal"))+" (US$) : ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(Number(t.shippingAmount)?t.$numberToCurrency(t.shippingAmount):"0.00")+" ")])]),e("el-divider",{staticStyle:{margin:"20px -20px 20px 20px"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.discount>0,expression:"discount > 0"}],staticClass:"d-flex justify-content-end mg-t-10"},[e("div",{},[t._v(" "+t._s(t.$t("invoice.Discount"))+" (US$) : ")]),e("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{color:"rgb(103, 194, 58)"}},[t._v(" - "+t._s(t.$numberToCurrency(t.discount))+" ")])]),e("div",{staticClass:"d-flex justify-content-end mg-t-10 bold-input"},[e("div",{staticClass:"tx-bold"},[t._v(" "+t._s(t.$t("invoice.Totalamount"))+" ")]),e("div",{staticClass:"mg-l-5 pd-r-15 tx-danger tx-bold",staticStyle:{"font-size":"16px"}},[t._v(" "+t._s(t.realAmount&&t.realAmount>0?t.$numberToCurrency(t.realAmount):t.$t("invoice.Notset"))+" ")])]),t.$store.state.userInfo.canUseWallet?e("div",{staticClass:"d-flex justify-content-end mg-t-10",staticStyle:{"align-items":"flex-start"}},[e("div",{},[t._v(" "+t._s(t.$t("invoice.Paymentmethod"))+" : ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[2==t.invoiceInfo.paymentType&&t.invoiceInfo.payUrl?e("a",{attrs:{href:t.invoiceInfo.payUrl,target:"_blank"}},[t._v(" "+t._s(t.$t(t.$dict.paymentType[t.invoiceInfo.paymentType].text))+" ")]):e("span",[t._v(" "+t._s(t.invoiceInfo.paymentType?t.$t(t.$dict.paymentType[t.invoiceInfo.paymentType].text):t.$t("invoice.Notset"))+" ")]),1!=t.invoiceInfo.payStatus?e("el-link",{staticClass:"mg-l-15",attrs:{type:"primary"},on:{click:t.openSetPayment}},[e("i",{staticClass:"el-icon-edit"})]):t._e()],1)]):t._e()],1),"1"!=t.invoiceInfo.status&&"9"!=t.invoiceInfo.status?e("div",{staticClass:"tx-right mg-t-15 d-flex justify-content-end"},[t.invoiceCnt.notBindCnt>0?[e("div",{staticClass:"tooltip-wrap"},[e("el-button",{staticClass:"with-disabled",staticStyle:{"margin-right":"10px"},attrs:{disabled:"9"==t.invoiceInfo.status,size:"medium",icon:"fa fa-send"}},[t._v(t._s(t.$t("invoice.Sendinvoiceto")))]),e("span",{staticClass:"tooltiptext"},[t._v(" "+t._s(t.$t("invoice.stillInvoice"))+" "),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.changeTabByTip}},[e("i",{staticClass:"fa fa-exclamation-triangle",staticStyle:{color:"#f56c6c"}})]),t._v(" "+t._s(t.$t("invoice.stillmissing"))),e("br"),t._v(t._s(t.$t("invoice.invoicedetails"))+" ")],1)],1)]:[e("el-button",{staticStyle:{"margin-right":"10px"},attrs:{disabled:"9"==t.invoiceInfo.status,size:"medium",type:"success",icon:"fa fa-send"},on:{click:function(e){return t.sendInvoice()}}},[t._v(t._s(t.$t("invoice.Sendinvoiceto")))])],0==t.invoiceCnt.notBindCnt?[e("div",{staticClass:"d-flex btn-wrap"},[2==t.invoiceInfo.payStatus?[e("el-tooltip",{attrs:{disabled:!t.hasAbnormal,effect:"dark",content:"采购数量异常，请处理后再操作",placement:"top-start"}},[e("el-popover",{attrs:{placement:"top",width:"460",trigger:"manual"},on:{hide:t.hidePopover},model:{value:t.confirmVisible2,callback:function(e){t.confirmVisible2=e},expression:"confirmVisible2"}},[e("div",[e("div",{staticClass:"mg-b-5",staticStyle:{"line-height":"20px"}},[t._v(" "+t._s(t.$t("invoice.Received"))+" ")]),e("div",{staticClass:"tx-error mg-b-10",staticStyle:{"line-height":"20px"}},[t._v(" "+t._s(t.$t("invoice.Afterconfirmation"))+" ")])]),e("div",{staticStyle:{"text-align":"right",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.confirmVisible2=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.confirmMoneyOnly("2")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1),e("a",{staticClass:"btn-item btn-item1",class:{" with-disabled":"9"==t.invoiceInfo.status||t.hasAbnormal},attrs:{slot:"reference",href:"javascript:;"},on:{click:t.showPopover2},slot:"reference"},[e("i",{staticClass:"fa fa-dollar"}),e("span",[t._v(t._s(t.$t("invoice.Confirmation")))])])])],1)]:t._e(),1==t.invoiceInfo.payStatus?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.haveconfirmed"))+" ")]),e("a",{staticClass:"btn-item btn-item1 with-disabled",attrs:{href:"javascript:;"}},[e("i",{staticClass:"fa fa-dollar"}),e("span",[t._v(t._s(t.$t("invoice.Confirmation")))])])]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.Clickbutton"))+" ")]),e("a",{staticClass:"btn-item btn-item2 confirmStep",attrs:{href:"javascript:;"},on:{click:t.confirmMoney}},[e("i",{staticClass:"el-icon-connection"}),e("span",[t._v(t._s(t.$t("invoice.ERPsystem")))])])])]:[e("div",{staticClass:"tooltip-wrap"},[e("a",{staticClass:"btn-item btn-item2 with-disabled",class:t.hasAbnormal?"with-disabled-btn1":"",attrs:{href:"javascript:;"}},[e("i",{staticClass:"el-icon-connection"}),e("span",[t._v(t._s(t.$t("invoice.ERPsystem")))])]),e("span",{staticClass:"tooltiptext"},[t._v(t._s(t.$t("invoice.receivepayment")))])])]],2)]:t._e(),t._e()],2):t._e(),Number(t.invoiceCnt.notBindCnt)||"1"!=t.invoiceInfo.status?t._e():e("div",{staticClass:"tx-right mg-t-15 d-flex justify-content-end"},[e("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"medium"},on:{click:function(e){return t.setPriceConfirm()}}},[t._v(" "+t._s(t.$t("invoice.确认完成报价"))+" ")])],1)])],1)],1)])])]:t._e()]],2),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showDownloadInvoice,expression:"showDownloadInvoice"}],staticClass:"download-invoice",staticStyle:{position:"relative",left:"9999px"}},[e("el-card",{attrs:{shadow:"always"}},[e("el-row",{staticStyle:{"margin-top":"25px","align-items":"flex-start"},attrs:{type:"flex"}},[e("el-col",{attrs:{span:12}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"grid-content invoice-header-logo"})]),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content invoice-header-info"},[e("div",{staticClass:"wv-heading-title"},[t._v("INVOICE")]),[e("div",{staticClass:"wv-text-strong"},[t._v(" "+t._s(t.invoiceInfo.vendorName?t.invoiceInfo.vendorName:"---")+" ")])]],2)])],1),e("el-divider"),e("el-row",{attrs:{type:"flex",align:"middle"}},[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content invoice-metadata-custome tx-left pos-relative"},[e("div",[t._v(" BILL To "),e("br"),[e("span",{staticClass:"wv-text-strong",staticStyle:{cursor:"pointer"}},[t._v(t._s(t.invoiceInfo.customerName?t.invoiceInfo.customerName:"---"))])]],2),e("div",{staticClass:"change-customer"})])]),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"invoice-metadata-info mg-b-20"},[e("div",{staticClass:"text-right"},[e("p",[t._v("Invoice Number :")]),e("p",{staticClass:"mg-y-10"},[t._v("Invoice Date :")]),e("p",{staticClass:"text-bg"},[t._v("Amount Due (US$) :")])]),e("div",{staticClass:"text-left"},[e("p",[t._v(" # "+t._s(t.invoiceInfo.code?t.invoiceInfo.code:"---")+" ")]),e("p",{staticClass:"mg-y-10"},[t._v(" "+t._s(t.invoiceInfo.timeCreated?t.invoiceInfo.timeCreated:"---")+" ")]),e("p",{staticClass:"wv-text-strong text-bg",staticStyle:{"padding-left":"0"}},[t._v(" $ "+t._s(t.realAmount?t.$numberToCurrency(t.realAmount):"0.00")+" ")])])])])],1),[e("div",{staticClass:"table-wrap"},[e("el-table",{staticClass:"table-only",attrs:{"header-cell-style":t.getRowClass,"cell-style":t.cellStyle}},[e("el-table-column",{attrs:{label:"Items"}}),e("el-table-column",{attrs:{label:"Quantity",width:"160"}}),e("el-table-column",{attrs:{label:"Unit Cost(US$)",width:"120"}}),e("el-table-column",{attrs:{label:"Subtotal(US$)",width:"120"}})],1),e("el-table",{staticClass:"table-with-body",attrs:{"row-class-name":t.tableRowClassName,"header-cell-style":t.getRowClass,"cell-style":t.cellStyle,data:t.invoiceData3,stripe:"",border:""}},[e("el-table-column",{attrs:{label:"Items"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{},[e("div",{staticStyle:{"max-width":"100%","text-align":"left"}},[e("div",{staticClass:"tx-600"},[t._v(" "+t._s(i.row.name)+" ")]),2!=t.tabActive?e("div",{staticClass:"d-flex no-wrap justify-content-between"},[e("el-popover",{staticClass:"d-flex",attrs:{"popper-class":"customer-popover",placement:"bottom",title:"Shopify Order "+i.row.codeName,width:"500",trigger:"hover"}},[e("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(i.row.codeName)),e("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),i.row.shippingJson&&i.row.shippingJson.name?e("span",{staticClass:"tx-ellipsis1",staticStyle:{display:"inline-block"}},[t._v("To "+t._s(i.row.shippingJson.name)+" ")]):t._e(),i.row.shippingJson&&i.row.shippingJson.country?e("span",{staticStyle:{display:"inline-block","max-width":"100px","text-overflow":"ellipsis",overflow:"hidden"}},[t._v(" ("+t._s(i.row.shippingJson.country)+")")]):t._e()]),e("div",{staticClass:"mg-y-15 mg-t-20"},[e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"120px","text-align":"right",color:"#999"}},[t._v(" Order Date : ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.timeCreated)+" ")])])]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"120px","text-align":"right",color:"#999"}},[t._v(" Customer : ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.name?i.row.shippingJson.name:"---")+" ")])])]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"120px","text-align":"right",color:"#999"}},[t._v(" Shipping Address : ")]),e("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{"max-width":"75%"}},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.zip?i.row.shippingJson.zip:"---")+" "+t._s(i.row.shippingJson&&i.row.shippingJson.address1?i.row.shippingJson.address1:"---")+" "+t._s(i.row.shippingJson&&i.row.shippingJson.city?i.row.shippingJson.city:"---")+" "+t._s(i.row.shippingJson&&i.row.shippingJson.province?i.row.shippingJson.province:"---")+" ")])])]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"120px","text-align":"right",color:"#999"}}),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.shippingJson&&i.row.shippingJson.country?i.row.shippingJson.country:"---")+" ")])])]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex",staticStyle:{width:"90%"}},[e("div",{staticStyle:{width:"120px","text-align":"right",color:"#999"}},[t._v(" Email： ")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(i.row.email)+" ")])])])])]),e("div",{staticClass:"no-wrap"},[i.row.trackNumber?e("div",{staticClass:"d-flex"},[e("div",[i.row.trackCompany&&i.row.realCompany?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(i.row.trackCompany)+"("+t._s(i.row.realCompany)+") ")]),t._v(" "+t._s(i.row.trackNumber)+" ")]),e("i",{staticClass:"fa fa-truck"})]):i.row.trackCompany?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(i.row.trackCompany)+" ")]),t._v(" "+t._s(i.row.trackNumber)+" ")]),e("i",{staticClass:"fa fa-truck"})]):e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",{staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(i.row.realCompany)+" ")]),t._v(" "+t._s(i.row.trackNumber)+" ")]),e("i",{staticClass:"fa fa-truck"})])],1),2==i.row.syncStatus?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.deliveredgoods"))+" "),e("br"),t._v(t._s(t.$t("invoice.Reason"))+" "+t._s(1!=t.invoiceInfo.hasAuth?t.$t("invoice.notauthorized"):i.row.syncContent)+" ")]),e("i",{staticClass:"invoice-icon-tongbu1"})]):e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.hasbeensync"),placement:"right"}},[e("i",{staticClass:"invoice-icon-tongbu2"})])],1):1==i.row.fulfillStatus?e("div",[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.hasnot"),placement:"right"}},[e("el-alert",{attrs:{title:t.$t("invoice.Notshipped"),type:"warning",closable:!1}})],1)],1):e("div",[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.wontReason")+i.row.stopReason,placement:"right"}},[e("el-alert",{attrs:{title:t.$t("invoice.wontdeliver"),type:"error",closable:!1}})],1)],1)])],1):t._e()])])]}}])}),e("el-table-column",{attrs:{prop:"qty",label:"Quantity",width:"160"},scopedSlots:t._u([{key:"default",fn:function(i){return[2!=t.tabActive?[e("el-input-number",{attrs:{size:"small",min:1},on:{change:function(e){return t.handleChange(i.row,e)}},model:{value:i.row.quantity,callback:function(e){t.$set(i.row,"quantity",e)},expression:"scope.row.quantity"}})]:t._e(),2==t.tabActive?e("div",[t._v(" "+t._s(i.row.quantity)+" ")]):t._e(),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Abnormalreasons")+i.row.abnormalReason,placement:"right"}},[1==i.row.isAbnormal?e("span",{staticClass:"tx-danger",staticStyle:{"margin-top":"10px",display:"inline-block"}},[e("i",{staticClass:"el-icon-info"}),t._v(t._s(t.$t("invoice.Abnormal")))]):t._e()])]}}])}),e("el-table-column",{attrs:{prop:"price",label:"Unit Cost(US$)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(i){return[2!=t.tabActive?e("div",[e("div",[t._v(" "+t._s(i.row.price)+" ")])]):t._e(),2==t.tabActive?e("div",[t._v(" "+t._s(i.row.price)+" ")]):t._e()]}}])}),e("el-table-column",{attrs:{label:"Subtotal(US$)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$numberToCurrency(e.row.amount))+" ")]}}])})],1)],1),e("div",{staticClass:"page-footer mg-t-30 mg-b-10",staticStyle:{"min-height":"50px","z-index":"0"}},[e("el-row",[e("el-col",{attrs:{span:20,offset:4}},[e("div",{staticClass:"grid-content invoice-bottom"},[e("div",{staticClass:"d-flex justify-content-end mg-b-10"},[e("div",{},[t._v("Items total (US$) :")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(t.$numberToCurrency(t.itemAmount))+" ")])]),e("div",{staticClass:"d-flex justify-content-end"},[e("div",{},[t._v("Shipping total (US$) :")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(t.$numberToCurrency(t.shippingAmount))+" ")])]),e("el-divider"),t.discount&&t.discount>0?e("div",{staticClass:"d-flex justify-content-end"},[e("div",{},[t._v("Subtotal (US$) :")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(t.$numberToCurrency(t.totalAmount))+" ")])]):t._e(),t.discount&&t.discount>0?e("div",{staticClass:"d-flex justify-content-end mg-t-10"},[e("div",{},[t._v("Discount (US$) :")]),e("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{color:"rgb(103, 194, 58)"}},[t._v(" - "+t._s(t.$numberToCurrency(t.discount))+" ")])]):t._e(),e("div",{staticClass:"d-flex justify-content-end mg-t-10 bold-input"},[e("div",{staticClass:"tx-bold"},[t._v("Amount Due (US$) :")]),e("div",{staticClass:"mg-l-5 pd-r-15",staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(" "+t._s(t.$numberToCurrency(t.realAmount))+" ")])]),e("div",{staticClass:"d-flex justify-content-end mg-t-10",staticStyle:{"align-items":"flex-start"}},[e("div",{},[t._v("Payment :")]),e("div",{staticClass:"mg-l-5 pd-r-15"},[t._v(" "+t._s(1==t.paymentType?"Transfer by bank or PayPal":"AliExpress")+" ")])])],1),1==t.invoiceInfo.paymentType||2==t.invoiceInfo.paymentType||3==t.invoiceInfo.paymentType?[1==t.invoiceInfo.payStatus?e("div",{staticClass:"tx-right mg-t-15"},[e("span",[e("el-alert",{staticStyle:{display:"inline"},attrs:{title:"The vender has confirmed the payment.",type:"success",closable:!1}})],1)]):t._e()]:t._e()],2)],1)],1),e("div",{staticClass:"d-flex",staticStyle:{"align-items":"flex-end"}},[e("div",{staticStyle:{position:"relative"}},[e("img",{attrs:{src:t.invoiceInfo.qrcodeBase64,width:"200"}}),e("img",{staticStyle:{position:"absolute",left:"50%",top:"50%","margin-left":"-15px","margin-top":"-15px"},attrs:{src:"images/weixin.png",width:"30px"}})]),e("div",[e("span",[t._v("You can check the invoice by scan this QR Code or visit this URL by your web browser:")]),e("el-link",{staticStyle:{"text-decoration":"underline",margin:"0 3px"},attrs:{underline:!1}},[t._v(t._s(t.invoiceInfo.url))])],1)])]],2)],1)],2),e("el-aside",{staticStyle:{position:"relative",left:"50px"},attrs:{width:"50px"}},[["9"!=t.invoiceInfo.status?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.exportImport"),placement:"right"}},[e("el-button",{staticStyle:{position:"fixed",bottom:"260px",width:"40px",height:"40px","line-height":"40px","text-align":"center",padding:"0","z-index":"1"},attrs:{size:"medium",circle:"",type:"primary"},on:{click:function(e){return t.opendrawer("3")}}},[e("i",{staticClass:"iconfont icon-xiazai",staticStyle:{"margin-right":"0","font-size":"22px"}})])],1):t._e()],e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Orderstatistics"),placement:"right"}},[e("el-button",{staticStyle:{"margin-left":"0",position:"fixed",bottom:"200px",width:"40px",height:"40px","line-height":"40px","text-align":"center",padding:"0","z-index":"1"},attrs:{size:"medium",circle:"",type:"primary"},on:{click:function(e){return t.opendrawer("1")}}},[e("i",{staticClass:"fa fa-bar-chart",staticStyle:{"margin-right":"0"}})])],1),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.Helpcenter"),placement:"right"}},[e("el-button",{staticStyle:{"margin-left":"0",position:"fixed",bottom:"140px",width:"40px",height:"40px","line-height":"40px","text-align":"center",padding:"0","z-index":"1"},attrs:{size:"medium",circle:"",type:"primary"},on:{click:function(e){return t.opendrawer("2")}}},[e("i",{staticClass:"fa fa-question-circle-o",staticStyle:{"margin-right":"0","font-size":"20px"}})])],1),e("el-backtop",{staticStyle:{right:"auto",bottom:"80px","z-index":"1"},attrs:{target:".el-scrollbar__wrap"}})],2)],1)],1),e("el-container",{directives:[{name:"show",rawName:"v-show",value:5!=t.tabActive&&t.noMore||5==t.tabActive,expression:"(tabActive != 5 && noMore) || tabActive == 5"}],attrs:{id:"messageContainer"}},[e("el-main",[e("div",{staticClass:"d-flex justify-content-between mg-b-20 pd-x-20"},[e("span",{staticClass:"tx-16 tx-600"},[t._v(t._s(t.$t("invoice.Timeline")))]),e("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v(t._s(t.$t("invoice.Showmessage")))])],1),e("el-divider"),e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:12}},[t.currentPageDataLog.length?e("el-timeline",[t._l(t.currentPageDataLog,(function(i){return[e("el-timeline-item",[t._v(" "+t._s(i.date)+" ")]),t._l(i.listInfo,(function(i,s){return e("el-timeline-item",{attrs:{color:"#5c6ac4"}},[e("div",{staticClass:"d-flex justify-content-between",staticStyle:{"align-items":"flex-start"}},[e("span",{staticStyle:{"max-width":"515px","word-break":"break-all"}},[t._v(t._s(i.content))]),e("span",{staticStyle:{"white-space":"nowrap","margin-left":"10px",color:"#999"}},[t._v(t._s(i.datetime))])])])}))]}))],2):e("p",{staticClass:"tx-center"},[t._v(t._s(t.$t("invoice.Nodata")))])],1),e("el-col",{attrs:{span:12}},["9"!=t.invoiceInfo.status?e("div",{staticClass:"mg-b-15",staticStyle:{"margin-left":"40px",position:"relative",background:"#fff",border:"1px solid #ddd",padding:"10px"}},[e("ul",{staticClass:"figure-list"},t._l(t.fileList,(function(i,s){return e("li",{key:s},[e("figure",{style:{backgroundImage:"url("+i.url+")",backgroundSize:"cover"}},[e("a",{attrs:{href:"#"}}),e("a",{staticClass:"btn",attrs:{href:"#"},on:{click:function(e){return t.removeMsgImg(s)}}},[e("i",{staticClass:"el-icon-close"})])])])})),0),e("textarea",{staticClass:"form-control textarea-control",attrs:{placeholder:t.$t("invoice.Pleasemessage"),autosize:"",resize:"none","data-emojiable":"true"}}),e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end",position:"absolute",bottom:"10px",right:"10px"}},[e("el-upload",{staticClass:"upload-demo",attrs:{action:"",accept:"image/jpeg,image/jpg,image/png","show-file-list":!1,"http-request":t.uploadSectionFile2}},[e("i",{staticClass:"fa fa-paperclip",staticStyle:{"font-size":"20px",margin:"0 10px"}})]),e("el-button",{attrs:{slot:"append",size:"small"},on:{click:t.addMessage},slot:"append"},[t._v(t._s(t.$t("ticket.send")))])],1)]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"checked"}]},[t.currentmessages.length?e("el-timeline",[t._l(t.currentmessages,(function(i){return[e("el-timeline-item",[t._v(" "+t._s(i.date)+" ")]),t._l(i.listInfo,(function(i,s){return[1==i.type?e("el-timeline-item",{attrs:{color:"#5c6ac4",timestamp:i.datetime,placement:"top"}},[e("el-card",[e("div",{staticClass:"d-flex timeline-customer"},[e("el-avatar",{attrs:{size:40}},[t._v(" "+t._s(i.cname)+" ")]),e("div",{staticClass:"mg-l-10"},[e("h4",[t._v(t._s(i.customerName))]),e("p",{staticClass:"mg-t-5",staticStyle:{"word-break":"break-all"},domProps:{innerHTML:t._s(i.content)}}),i.imgJson?e("p",{staticClass:"mg-t-10"},t._l(i.imgJson,(function(t){return e("img",{staticClass:"mg-l-10",attrs:{src:t,width:"60"}})})),0):t._e()])],1)])],1):t._e(),2==i.type?e("el-timeline-item",{attrs:{color:"#5c6ac4",timestamp:i.datetime,placement:"top"}},[e("el-card",{attrs:{"body-style":{background:"#9eea6a"}}},[e("div",{staticClass:"d-flex justify-content-end tx-right timeline-self"},[e("div",{staticClass:"mg-r-10"},[e("h4",[t._v(t._s(i.vendorName))]),e("p",{staticClass:"mg-t-5",staticStyle:{"word-break":"break-all"},domProps:{innerHTML:t._s(i.content)}}),i.imgJson?e("p",{staticClass:"mg-t-10"},t._l(i.imgJson,(function(t){return e("img",{staticClass:"mg-l-10",attrs:{src:t,width:"60"}})})),0):t._e()]),e("el-avatar",{attrs:{size:40}},[t._v(" "+t._s(i.vname)+" ")])],1)])],1):t._e()]}))]}))],2):e("p",{staticClass:"tx-center"},[t._v(t._s(t.$t("invoice.Nodata")))])],1)])],1)],1),e("el-aside",{attrs:{width:"50px"}})],1),e("el-dialog",{attrs:{"custom-class":"addCustomer",title:t.$t("invoice.newcustomer"),visible:t.addCustomerOpen,width:"40%"},on:{"update:visible":function(e){t.addCustomerOpen=e}}},[e("el-divider"),e("el-form",{ref:"formNewcustomer",attrs:{rules:t.formNewcustomerRules,model:t.formNewcustomer,"label-position":"right","label-width":"100px"}},[e("el-form-item",{attrs:{label:t.$t("mycustomer.customersName"),prop:"name"}},[e("el-input",{attrs:{placeholder:t.$t("invoice.Pleasename")},model:{value:t.formNewcustomer.name,callback:function(e){t.$set(t.formNewcustomer,"name",e)},expression:"formNewcustomer.name"}})],1),e("el-form-item",{attrs:{label:t.$t("importdata.cusEmail"),prop:"email"}},[e("el-input",{attrs:{placeholder:t.$t("invoice.PleaseEmail")},model:{value:t.formNewcustomer.email,callback:function(e){t.$set(t.formNewcustomer,"email",e)},expression:"formNewcustomer.email"}})],1),e("el-form-item",{attrs:{label:t.$t("mycustomer.remarks"),prop:"remark"}},[e("el-input",{attrs:{placeholder:t.$t("invoice.Pleaseremarks")},model:{value:t.formNewcustomer.remark,callback:function(e){t.$set(t.formNewcustomer,"remark",e)},expression:"formNewcustomer.remark"}})],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.addCustomerOpen=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitAddcustomer("formNewcustomer")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1)],1),e("el-dialog",{attrs:{"custom-class":"editCustomer",title:t.$t("invoice.modifiedCustomer"),visible:t.editCustomerOpen,width:"40%"},on:{"update:visible":function(e){t.editCustomerOpen=e}}},[e("el-divider"),e("el-form",{ref:"formEditcustomer",attrs:{rules:t.formEditcustomerRules,model:t.formEditcustomer,"label-position":"right","label-width":"100px"}},[e("el-form-item",{attrs:{label:t.$t("mycustomer.customersName"),prop:"name"}},[e("el-input",{attrs:{placeholder:t.$t("invoice.Pleasename")},model:{value:t.formEditcustomer.name,callback:function(e){t.$set(t.formEditcustomer,"name",e)},expression:"formEditcustomer.name"}})],1),e("el-form-item",{attrs:{label:t.$t("importdata.cusEmail"),prop:"email"}},[e("el-input",{attrs:{placeholder:t.$t("invoice.PleaseEmail")},model:{value:t.formEditcustomer.email,callback:function(e){t.$set(t.formEditcustomer,"email",e)},expression:"formEditcustomer.email"}})],1),e("el-form-item",{attrs:{label:t.$t("mycustomer.remarks"),prop:"remark"}},[e("el-input",{attrs:{placeholder:t.$t("invoice.Pleaseremarks")},model:{value:t.formEditcustomer.remark,callback:function(e){t.$set(t.formEditcustomer,"remark",e)},expression:"formEditcustomer.remark"}})],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.editCustomerOpen=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.submitEditcustomer("formEditcustomer")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1)],1),e("el-dialog",{attrs:{"custom-class":"editCompany",title:t.$t("invoice.modifiedCompany"),visible:t.editCompanyInfoOpen,width:"40%"},on:{"update:visible":function(e){t.editCompanyInfoOpen=e}}},[e("el-divider"),e("el-form",{ref:"formEditCompany",attrs:{rules:t.formEditCompanyRules,model:t.formEditCompany,"label-position":"right","label-width":"150px"}},[e("el-form-item",{attrs:{label:t.$t("invoice.companyName"),prop:"name"}},[e("el-input",{attrs:{placeholder:t.$t("invoice.fillcompany")},model:{value:t.formEditCompany.name,callback:function(e){t.$set(t.formEditCompany,"name",e)},expression:"formEditCompany.name"}})],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.editCompanyInfoOpen=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.submitEditCompany("formEditCompany")}}},[t._v(t._s(t.$t("invoice.confirm")))])],1)],1),e("el-dialog",{attrs:{title:t.$t("invoice.shippedMark"),visible:t.dialogMarkShipped.isShow,width:"700px"},on:{"update:visible":function(e){return t.$set(t.dialogMarkShipped,"isShow",e)}}},[t.dialogMarkShipped.item?e("el-row",{staticClass:"pd-x-20",attrs:{gutter:20}},[e("el-col",{staticStyle:{color:"#303133"},attrs:{span:24}},[t._v(" "+t._s(t.dialogMarkShipped.item.name)+" ")]),e("el-col",{attrs:{span:24}},[e("el-form",{attrs:{"label-width":"160px"}},[e("el-form-item",{attrs:{label:t.$t("invoice.Supplier")}},[e("span",{staticStyle:{color:"#303133"}},[t._v(t._s(t.invoiceInfo.vendorName?t.invoiceInfo.vendorName:"---"))])]),e("el-form-item",{attrs:{label:t.$t("invoice.Logisticsnumber"),required:""}},[e("el-input",{attrs:{placeholder:t.$t("invoice.Logisticsnumber")},model:{value:t.dialogMarkShipped.trackNumber,callback:function(e){t.$set(t.dialogMarkShipped,"trackNumber",e)},expression:"dialogMarkShipped.trackNumber"}})],1),e("el-form-item",{attrs:{label:t.$t("invoice.Logisticscompany"),required:""}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("invoice.Logisticscompany")},model:{value:t.dialogMarkShipped.trackKey,callback:function(e){t.$set(t.dialogMarkShipped,"trackKey",e)},expression:"dialogMarkShipped.trackKey"}},t._l(t.dialogMarkShipped.shopifyCompany,(function(t){return e("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1),99==t.dialogMarkShipped.trackKey?e("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:t.$t("invoice.Logisticscompany")},model:{value:t.dialogMarkShipped.trackCompany,callback:function(e){t.$set(t.dialogMarkShipped,"trackCompany",e)},expression:"dialogMarkShipped.trackCompany"}}):t._e()],1),99==t.dialogMarkShipped.trackKey?e("el-form-item",{attrs:{label:t.$t("invoice.Trackinglinks")}},[e("el-input",{attrs:{placeholder:t.$t("invoice.Trackinglinks")},model:{value:t.dialogMarkShipped.trackUrl,callback:function(e){t.$set(t.dialogMarkShipped,"trackUrl",e)},expression:"dialogMarkShipped.trackUrl"}})],1):t._e()],1)],1)],1):t._e(),e("div",{staticClass:"dialog-footer d-flex justify-content-between",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogMarkShipped.isShow=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{type:"primary",loading:t.dialogMarkShipped.loading},on:{click:t.saveMarkShipped}},[t._v(t._s(t.$t("invoice.shippedMark")))])],1)],1),e("el-dialog",{attrs:{"custom-class":"sendInvoice",title:t.$t("invoice.Sendinvoiceto"),visible:t.sendInvoiceOpen,width:"50%"},on:{open:t.openSkype,"update:visible":function(e){t.sendInvoiceOpen=e}}},[[e("div",{staticStyle:{position:"relative","z-index":"1"}},[e("div",{staticStyle:{position:"absolute",right:"30px",top:"15px"}},[e("el-switch",{on:{change:t.changeShowItemPrice},model:{value:t.showItemPrice,callback:function(e){t.showItemPrice=e},expression:"showItemPrice"}}),t._v(" "+t._s(t.$t("invoice.Showsupply"))+" ")],1)]),e("el-tabs",{staticStyle:{"margin-left":"20px","margin-top":"10px"},attrs:{type:"card"},model:{value:t.activeShareName,callback:function(e){t.activeShareName=e},expression:"activeShareName"}},[e("el-tab-pane",{attrs:{name:"shareLink"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"iconfont icon-link"}),t._v(" "+t._s(t.$t("myinvoice.shareLink")))]),e("div",{staticClass:"d-flex mg-y-20"},[e("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[t._v(" "+t._s(t.$t("myinvoice.shareUrl"))+" ")]),e("div",[e("span",[t._v(t._s(t.invoiceInfo.url))])])]),e("div",{staticClass:"d-flex mg-y-20"},[e("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}}),e("div",[e("div",[e("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.invoiceInfo.url,expression:"invoiceInfo.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{size:"mini",type:"success"}},[t._v(t._s(t.$t("myinvoice.shareCopy")))])],1)])])]),e("el-tab-pane",{attrs:{name:"shareWeixin"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"iconfont icon-shejiao"}),t._v(" "+t._s(t.$t("invoice.Sharethrough")))]),e("div",[e("div",{staticClass:"d-flex mg-y-20"},[e("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[t._v(" "+t._s(t.$t("invoice.SetshareTitle"))+" ")]),e("div",{staticStyle:{width:"70%"}},[e("el-input",{attrs:{type:"text",size:"small"},on:{change:function(e){return t.saveRemark("2")}},model:{value:t.shareTitle,callback:function(e){t.shareTitle=e},expression:"shareTitle"}})],1)]),e("div",{staticClass:"d-flex mg-y-20 align-items-center"},[e("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[t._v(" "+t._s(t.$t("invoice.Setsharecontent"))+" ")]),e("div",{staticStyle:{width:"70%"}},[e("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:3,maxRows:6},size:"small"},on:{change:function(e){return t.saveRemark("2")}},model:{value:t.shareDesc,callback:function(e){t.shareDesc=e},expression:"shareDesc"}})],1)]),e("div",{staticClass:"d-flex mg-y-20"},[e("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[t._v(" "+t._s(t.$t("invoice.Sharemethod"))+" ")]),e("div",{staticClass:"d-flex",staticStyle:{width:"70%"}},[e("div",{staticClass:"skype-share",staticStyle:{"margin-right":"30px"},attrs:{"data-href":t.shareTitle+t.shareDesc,"data-lang":"en-US","data-text":t.invoiceInfo.url,"data-style":"large"}}),e("div",[e("el-tooltip",{attrs:{placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",{staticClass:"tx-center mg-b-10"},[t._v(" "+t._s(t.$t("myinvoice.scan"))+" ")]),e("img",{attrs:{src:t.invoiceInfo.qrcodeP,width:"130"}}),e("img",{staticStyle:{position:"absolute",left:"50%",top:"50%","margin-left":"-15px","margin-top":"-4px"},attrs:{src:"images/weixin.png",width:"30px"}})]),e("a",{staticClass:"share-weixin",attrs:{href:"javascript:;"}},[e("i",{staticClass:"fa fa-weixin"}),t._v(" "+t._s(t.$t("myinvoice.share"))+" ")])])],1),e("a",{staticClass:"share-weixin share-download",attrs:{href:"javascript:;"},on:{click:t.downloadInvoice}},[e("i",{staticClass:"fa fa-download"}),t._v(" "+t._s(t.$t("invoice.Downloadinvoice"))+" ")])])])])])],1)],e("el-divider"),e("div",{staticClass:"dialog-footer d-flex justify-content-between",attrs:{slot:"footer"},slot:"footer"},[e("div",[e("el-button",{directives:[{name:"show",rawName:"v-show",value:"shareWeixin"==t.activeShareName,expression:"activeShareName == 'shareWeixin'"}],attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.saveRemark("1")}}},[t._v(t._s(t.$t("myinvoice.reset")))])],1),e("div",[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.sendInvoiceOpen=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.invoicePreview(t.invoiceInfo.url)}}},[t._v(t._s(t.$t("myinvoice.previewInvocie")))])],1)])],2),e("el-dialog",{attrs:{"custom-class":"confirmMoney",title:t.$t("invoice.processorders"),visible:t.confirmMoneyOpen,width:"40%"},on:{"update:visible":function(e){t.confirmMoneyOpen=e}}},[e("el-dialog",{attrs:{title:t.$t("ticket.submitTicket"),visible:t.DialogEditComment.visible,width:"760px","append-to-body":""},on:{"update:visible":function(e){return t.$set(t.DialogEditComment,"visible",e)},closed:function(e){return t.$refs.uploadFile.clearFiles()}}},[e("el-divider"),e("div",[e("el-form",{ref:"CommentForm"},[e("el-form-item",{attrs:{label:t.$t("ticket.problemsOrRequirements")}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.DialogEditComment.contents,callback:function(e){t.$set(t.DialogEditComment,"contents",e)},expression:"DialogEditComment.contents"}})],1),e("el-form-item",{attrs:{label:""}},[e("div",{staticStyle:{"font-size":"16px","font-weight":"bold",margin:"20px 0 0"}},[t._v(" "+t._s(t.$t("ticket.uploadImageAttachment"))+" ")])]),e("el-form-item",{attrs:{label:""}},[e("el-upload",{ref:"uploadFile",staticClass:"upload-file",attrs:{"on-change":t.handleChangeImg,"before-remove":t.handleRemoveImg,action:"","auto-upload":!1,accept:"image/gif,image/jpeg,image/jpg,image/png"}},[e("el-button",{ref:"uploadBtn",attrs:{size:"small",type:"primary",loading:t.DialogEditComment.uploadLoading}},[t._v(t._s(t.$t("ticket.browse")))])],1)],1)],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[e("div",{staticClass:"mg-r-15"},[e("el-button",{attrs:{size:"small",type:"primary",loading:t.DialogEditComment.loading},on:{click:t.saveComment}},[t._v(t._s(t.$t("ticket.submitTicket")))])],1),e("div",[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.DialogEditComment.visible=!1}}},[t._v(t._s(t.$t("invoice.cancel")))])],1)])],1),e("el-dialog",{attrs:{title:t.$t("invoice.usertoken"),visible:t.secretKeyOpen,width:"50%","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.secretKeyOpen=e}}},[e("el-divider"),e("div",{staticStyle:{margin:"20px",color:"#303133"}},[e("p",[t._v(" "+t._s(t.$t("invoice.software"))+" ")])]),e("div",{staticStyle:{margin:"0 20px",padding:"15px","background-color":"#fafafa",border:"1px solid #eaeefb","border-radius":"4px",color:"#303133"}},[e("p",[t._v(" "+t._s(t.$t("invoice.pastetoken"))+" ")]),e("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-around",margin:"15px 0"}},[e("div",{staticStyle:{width:"48%","margin-right":"2%"}},[e("p",{staticClass:"mg-y-10"},[t._v(t._s(t.$t("invoice.Picture1")))]),e("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:"images/secretKey1.png"}})]),e("div",{staticStyle:{width:"48%","margin-left":"2%"}},[e("p",{staticClass:"mg-y-10"},[t._v(t._s(t.$t("invoice.Picture2")))]),e("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:"images/secretKey2.jpg"}})])]),e("p",{staticStyle:{"margin-top":"10px"}},[t._v(" "+t._s(t.$t("invoice.present"))+" "),e("el-link",{attrs:{target:"_blank",type:"primary",underline:!1,href:"//www.mabangerp.com/"}},[t._v("马帮ERP")]),t._v(" "+t._s(t.$t("invoice.soon"))+" ")],1)]),e("div",{staticStyle:{margin:"20px",color:"rgb(153, 153, 153)"}},[e("p",[t._v(" "+t._s(t.$t("invoice.sametime"))+" "),e("el-link",{attrs:{type:"primary",underline:!1},on:{click:t.openAddComment}},[t._v(t._s(t.$t("invoice.contact")))]),t._v("。 ")],1)]),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.secretKeyOpen=!1}}},[t._v(t._s(t.$t("importdata.gotIt")))])],1)],1),e("el-tabs",{staticStyle:{"margin-left":"20px","margin-top":"10px"},attrs:{type:"card"},model:{value:t.activeConfirm,callback:function(e){t.activeConfirm=e},expression:"activeConfirm"}},[e("el-tab-pane",{attrs:{name:"confirmErp"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("invoice.authorizederp")))]),e("div",[e("div",{staticClass:"mg-y-20"},[e("span",{staticStyle:{margin:"0 10px 0 26px",display:"inline-block",width:"177px","text-align":"right"}},[t._v(t._s(t.$t("invoice.tokenerp")))]),e("span",[t._v(" "+t._s(t.userInfo&&t.userInfo.secretKey?t.userInfo.secretKey:"---")+" ")]),t.userInfo&&t.userInfo.secretKey?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.userInfo.secretKey,expression:"userInfo.secretKey",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e(),e("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"mini",type:"text"},on:{click:t.openSecretKey}},[t._v(" "+t._s(t.$t("invoice.usertoken"))+" ")])],1),e("div",{staticClass:"mg-y-20",staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticStyle:{margin:"0 10px 0 26px"}},[t._v(t._s(t.$t("invoice.storename")))]),e("el-autocomplete",{staticClass:"inline-input",attrs:{disabled:!!t.invoiceInfo.timeApiGet,size:"medium","fetch-suggestions":t.querySearch,placeholder:t.$t("invoice.entershopname")},on:{select:t.handleSelect},model:{value:t.shopName,callback:function(e){t.shopName=e},expression:"shopName"}})],1),t.invoiceInfo.timeApiGet?e("div",{staticClass:"mg-y-20"},[e("span",{staticStyle:{margin:"0 10px 0 26px",opacity:"0"}},[t._v(t._s(t.$t("invoice.storename")))]),e("span",{staticClass:"tx-error"},[e("span",{staticStyle:{margin:"0 5px"}},[t._v(t._s(t.$t("invoice.ERPdownloaded"))+" ")]),t._v(t._s(t.invoiceInfo.timeApiGet?t.invoiceInfo.timeApiGet:"---")+" ")])]):t._e(),e("div",{staticClass:"mg-y-20"},[e("span",{staticStyle:{margin:"0 10px 0 26px",opacity:"0"}},[t._v(t._s(t.$t("invoice.storename")))]),e("el-button",{attrs:{disabled:!!t.invoiceInfo.timeApiGet,size:"small",icon:"fa fa-save",type:"primary"},on:{click:function(e){return t.confirmMoneyFn()}}},[t._v(t._s(t.$t("invoice.savesettings")))])],1)])]),e("el-tab-pane",{attrs:{name:"confirmExcel"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("invoice.exportedExcel")))]),e("div",{staticClass:"mg-y-20"},[e("p",{staticStyle:{"margin-left":"50px"},domProps:{innerHTML:t._s(t.$t("invoice.qualifiedorders",{num:Number(t.invoiceCnt.orderCnt)}))}})]),e("div",{staticClass:"mg-y-20",staticStyle:{"margin-left":"50px"}},[e("el-button",{attrs:{size:"small",icon:"iconfont icon-excel3",type:"success"},on:{click:function(e){return t.saveCustomExportOnly("1")}}},[t._v(t._s(t.$t("invoice.Exportexcel")))]),e("el-button",{attrs:{size:"small",icon:"iconfont icon-csv11",type:"success"},on:{click:function(e){return t.saveCustomExportOnly("2")}}},[t._v(t._s(t.$t("invoice.Exportcsv")))]),e("el-button",{attrs:{size:"small",icon:"fa fa-cog",plain:"",type:"primary"},on:{click:function(e){return t.setExportOnly()}}},[t._v(t._s(t.$t("invoice.exportfields2")))])],1),e("el-dialog",{attrs:{width:"80%",title:t.$t("invoice.exportfields2"),visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[e("div",{staticClass:"modal-export"},[e("el-divider"),e("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[e("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("invoice.exportFields"))),e("span",{staticClass:"mg-l-5"},[t._v("("+t._s(t.$t("invoice.dragging"))+")")])]),e("div",{staticClass:"draggable-wrap"},[e("draggable",{attrs:{list:t.modalCustomExport.selectedTitles,draggable:".dargDiv",options:{animation:300},group:"tags"}},t._l(t.modalCustomExport.selectedTitles,(function(i,s){return e("el-tag",{key:i.name,staticClass:"dargDiv",attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.removeTitle(s)}}},[t._v(" "+t._s(i.name)+" ")])})),1),t.modalCustomExport.selectedTitles.length?t._e():e("div",{staticClass:"w-100 justify-content-center"},[e("span",{staticStyle:{color:"#f56c6c"}},[t._v(t._s(t.$t("invoice.selectPlease")))])])],1)]),e("el-divider"),e("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[e("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("myinvoice.optionalfields"))+" "),e("span",{staticClass:"tx-danger tx-12",staticStyle:{color:"#f56c6c"}},[t._v(t._s(t.$t("myinvoice.notExport")))])]),e("div",{staticClass:"tag-wrap"},[e("draggable",{attrs:{list:t.modalCustomExport.unselectedTitles,draggable:".uns-tag",options:{animation:300},group:"tags"}},t._l(t.modalCustomExport.unselectedTitles,(function(i,s){return e("el-tag",{key:i.orName,attrs:{effect:"dark"},on:{click:function(e){return t.selectTitle(s)}}},[t._v(" "+t._s(i.orName)+" ")])})),1)],1)]),e("el-divider"),e("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[e("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("myinvoice.customField"))+" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("myinvoice.rename"),placement:"top"}},[e("i",{staticClass:"fa fa-question-circle-o",staticStyle:{color:"#5c6ac4","text-decoration":"none"}})]),e("a",{staticClass:"mg-l-20",staticStyle:{color:"#5c6ac4","text-decoration":"none"},attrs:{href:"javascript:;"},on:{click:function(e){return t.customWrapState()}}},[t._v(t._s(t.showCustom?t.$t("invoice.fieldsHide"):t.$t("invoice.fieldsShow")))])],1),e("div",{staticClass:"row custom-wrap",class:{hide:!t.showCustom}},[e("el-row",{staticStyle:{margin:"0"},attrs:{gutter:20}},t._l(t.modalCustomExport.selectedTitles,(function(i){return e("el-col",{key:i.orName,staticStyle:{"margin-top":"10px"},attrs:{span:12}},[e("div",{staticClass:"grid-content",staticStyle:{display:"flex","align-items":"center"}},[e("label",{staticStyle:{width:"200px","white-space":"nowrap","text-align":"right","margin-right":"10px",color:"#999"}},[t._v("["+t._s(i.orName)+"] "+t._s(t.$t("myinvoice.showAs")))]),e("div",{staticClass:"col-6"},[e("el-input",{attrs:{placeholder:i.orName,size:"small"},model:{value:i.name,callback:function(e){t.$set(i,"name",e)},expression:"title.name"}})],1)])])})),1)],1)]),e("el-divider")],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.innerVisible=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveCustomExportSettingOnly}},[t._v(t._s(t.$t("myinvoice.saveSetting")))])],1)])],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.confirmMoneyOpen=!1}}},[t._v(t._s(t.$t("invoice.cancel")))])],1)],1),e("el-dialog",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.setLotPriceDialog.loading,expression:"setLotPriceDialog.loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":4==t.setLotPriceDialog.step?"批量改价已提交请稍候 ":"",title:t.$t("invoice.Batchset2"),visible:t.setLotPriceDialog.isShow,width:"800px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.setLotPriceDialog,"isShow",e)}}},[e("el-divider"),1==t.setLotPriceDialog.step?[e("el-row",[e("el-col",{attrs:{offset:4,span:7}},[e("div",{staticClass:"tx-center set-price",on:{click:function(e){return t.setLotPriceStep(1)}}},[e("div",{staticClass:"logo-wrap"}),e("p",[t._v("马帮ERP授权")])])]),e("el-col",{attrs:{offset:2,span:7}},[e("div",{staticClass:"tx-center set-price other",on:{click:function(e){return t.setLotPriceStep(2)}}},[e("div",{staticClass:"logo-wrap"},[t._v("其他")]),e("p",[t._v("其他ERP授权")])])])],1)]:t._e(),2==t.setLotPriceDialog.step?[e("el-form",{ref:"form",attrs:{model:t.setLotPriceDialog,"label-width":"160px",size:"medium"}},[e("el-form-item",{attrs:{label:"当前授权ERP："}},[2==t.userInfo.source?e("span",[t._v("马帮ERP2.0")]):t._e(),3==t.userInfo.source?e("span",[t._v("马帮ERP3.0")]):t._e(),3==t.userInfo.source?e("a",{staticClass:"mg-l-20",attrs:{href:"javascript:;"},on:{click:function(e){return t.unbind()}}},[t._v("解除绑定")]):t._e()]),e("el-form-item",{staticClass:"mg-t-15",attrs:{label:"供货价和运费："}},[e("el-radio-group",{on:{change:t.changePriceType},model:{value:t.setLotPriceDialog.price,callback:function(e){t.$set(t.setLotPriceDialog,"price",e)},expression:"setLotPriceDialog.price"}},[e("el-radio",{attrs:{label:"1"}},[t._v(" 供货单价=（商品成本价+物流成本）+单价利润，每单运费设置为0 ")]),3==t.userInfo.source?e("el-radio",{staticClass:"mg-t-10",attrs:{label:"2"}},[t._v("供货单价=商品成本价+商品目标利润，总运费=物流成本+物流目标利润")]):t._e()],1)],1),3==t.userInfo.source?e("el-form-item",{staticClass:"mg-t-15",attrs:{label:"每件商品处理费(US$)："}},[e("el-input-number",{staticStyle:{"margin-right":"10px",width:"100px"},attrs:{controls:!1,precision:2},model:{value:t.setLotPriceDialog.addPrice,callback:function(e){t.$set(t.setLotPriceDialog,"addPrice",e)},expression:"setLotPriceDialog.addPrice"}}),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[e("template",{slot:"content"},[e("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("每件商品处理费")]),e("p",[t._v(" 在已计算得到的供货单价上额外增加处理费，如设置"),e("br"),t._v(" 每件商品处理费为US$ 1, 某个商品采购数量3件，则"),e("br"),t._v(" 在供货单价上额外增加US$ 3 ")])]),e("i",{staticClass:"el-icon-question"})],2)],1):t._e(),3==t.userInfo.source?e("el-form-item",{staticClass:"mg-t-15",attrs:{label:"运费规则："}},[e("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",placeholder:"请选择运费规则"},model:{value:t.setLotPriceDialog.ruleId,callback:function(e){t.$set(t.setLotPriceDialog,"ruleId",e)},expression:"setLotPriceDialog.ruleId"}},[e("el-option",{attrs:{label:"请选择运费规则",value:""}}),t._l(t.setLotPriceDialog.erpRules,(function(t){return e("el-option",{key:t.shippingFeeRuleId,attrs:{label:t.name,value:t.shippingFeeRuleId}})}))],2)],1):t._e(),e("el-form-item",{staticClass:"mg-t-15",attrs:{label:"设置商品："}},[t.setLotPriceDialog.sku?e("div",[t._v(t._s(t.setLotPriceDialog.sku))]):e("el-radio-group",{model:{value:t.setLotPriceDialog.onlyNone,callback:function(e){t.$set(t.setLotPriceDialog,"onlyNone",e)},expression:"setLotPriceDialog.onlyNone"}},[e("el-radio",{attrs:{label:"1",disabled:2==t.setLotPriceDialog.price}},[t._v("仅设置 [未填写供货价] 商品")]),e("el-radio",{staticClass:"mg-t-10 d-block",attrs:{label:"2"}},[t._v("当前采购订单 [全部] 商品")]),e("el-radio",{staticClass:"mg-t-10 d-block",attrs:{label:"3"}},[t._v("选择指定商品("),e("a",{on:{click:t.setDesignatedGood}},[t._v(t._s(t.DesignatedGoodDialog.data.length))]),t._v(")")])],1)],1),2==t.userInfo.source?e("el-form-item",{staticClass:"mg-t-15",attrs:{label:"物流渠道："}},[e("div",{staticStyle:{display:"flex"}},[e("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择物流渠道"},model:{value:t.setLotPriceDialog.logType,callback:function(e){t.$set(t.setLotPriceDialog,"logType",e)},expression:"setLotPriceDialog.logType"}},[e("el-option",{attrs:{label:"全部订单使用同一个物流渠道计算",value:"1"}}),e("el-option",{attrs:{label:"按订单的国家选择物流渠道计算",value:"2"}})],1),1==t.setLotPriceDialog.logType?e("div",[e("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请填写物流渠道名称",maxlength:"50"},model:{value:t.setLotPriceDialog.shipTypeStr,callback:function(e){t.$set(t.setLotPriceDialog,"shipTypeStr",e)},expression:"setLotPriceDialog.shipTypeStr"}})],1):t._e()],1),e("div",{directives:[{name:"show",rawName:"v-show",value:2==t.setLotPriceDialog.logType,expression:"setLotPriceDialog.logType == 2"}],staticClass:"countrylist"},t._l(t.setLotPriceDialog.cntArr,(function(i){return e("div",{key:i.countryCode,staticClass:"d-flex mg-t-10 countrylist-item"},[e("div",{staticClass:"countrylist-name"},[e("el-tooltip",{attrs:{content:i.country,placement:"top"}},[e("span",[t._v(t._s(i.country)+" :")])])],1),e("div",{staticClass:"countrylist-input"},[e("el-input",{attrs:{placeholder:"不填即该国订单不计算",maxlength:"50"},model:{value:i.shipTypeStr,callback:function(e){t.$set(i,"shipTypeStr",e)},expression:"cnt.shipTypeStr"}})],1)])})),0)]):t._e(),e("el-form-item",{staticClass:"mg-t-15",attrs:{label:"当前采购单目标利润："}},[e("div",[e("el-input",{staticStyle:{width:"200px"},model:{value:t.setLotPriceDialog.numbers,callback:function(e){t.$set(t.setLotPriceDialog,"numbers",e)},expression:"setLotPriceDialog.numbers"}}),t._v(" % ")],1),e("p",{staticClass:"tx-gray-600"},[t._v("如果希望采购单利润20%，请在输入框填写20")])])],1)]:t._e(),3==t.setLotPriceDialog.step?[e("div",{staticStyle:{margin:"20px 50px"}},[e("div",{staticClass:"mg-b-20 mg-t-20"},[t._v(" 设置成功："),e("span",{staticClass:"tx-success"},[t._v(t._s(t.setLotPriceDialog.results.success&&t.setLotPriceDialog.results.success.cnt>=0?t.setLotPriceDialog.results.success.cnt:"---"))]),t._v(" 个 ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.setLotPriceDialog.successDetail,expression:"!setLotPriceDialog.successDetail"}]},t._l(t.setLotPriceDialog.results.success.detail,(function(i,s){return e("p",{staticClass:"mg-b-10"},[t._v(" "+t._s(i.sku)+" ")])})),0),e("div",{staticClass:"mg-b-20"},[t._v(" 设置失败："),e("span",{staticClass:"tx-danger"},[t._v(t._s(t.setLotPriceDialog.results.fail&&t.setLotPriceDialog.results.fail.cnt>=0?t.setLotPriceDialog.results.fail.cnt:"---"))]),t._v(" 个 "),t.setLotPriceDialog.results.fail.cnt>0?e("el-link",{staticClass:"mg-l-10",attrs:{type:"primary"},on:{click:function(e){t.setLotPriceDialog.failDetail=!t.setLotPriceDialog.failDetail}}},[t._v(t._s(t.setLotPriceDialog.failDetail?"查看":"折叠")+"失败详情")]):t._e()],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.setLotPriceDialog.failDetail,expression:"!setLotPriceDialog.failDetail"}]},t._l(t.setLotPriceDialog.results.fail.detail,(function(i,s){return e("p",{staticClass:"mg-b-10"},[t._v(" "+t._s(i.country)+" - "+t._s(i.sku)+" - "+t._s(i.logisticsName)+"： "+t._s(i.message)+" ")])})),0)])]:t._e(),4==t.setLotPriceDialog.step?[e("div",{staticStyle:{margin:"20px 50px"}},[e("i",{staticClass:"el-icon-loading"}),t._v(" "+t._s(parseInt(100*t.setLotPriceDialog.loadingCnt))+"% 批量改价已提交，请稍候 ")])]:t._e(),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[2==t.setLotPriceDialog.step?e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveSetLotPrice}},[t._v("批量设置")]):t._e(),e("el-button",{attrs:{size:"small"},on:{click:function(e){t.setLotPriceDialog.isShow=!1}}},[t._v("关闭")])],1)],2),e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.DesignatedGoodDialog.loading,expression:"DesignatedGoodDialog.loading"}],attrs:{title:"选择指定商品",visible:t.DesignatedGoodDialog.isShow,width:"890px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.DesignatedGoodDialog,"isShow",e)}}},[e("div",{staticStyle:{padding:"20px"}},[e("el-transfer",{attrs:{filterable:!0,titles:["商品列表","指定商品"],"button-texts":["取消","指定"],data:t.transferData},on:{change:t.DesignatedChange},scopedSlots:t._u([{key:"default",fn:function({option:i}){return e("span",{staticClass:"flex-center"},[e("div",[e("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:i.imgUrl,alt:""}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"20px"}})])])],1),e("div",{staticClass:"ml-10"},[e("div",[t._v(" "+t._s(i.name)+" ")]),e("div",[t._v("SKU: "+t._s(i.sku))])])])}}]),model:{value:t.DesignatedGoodDialog.data,callback:function(e){t.$set(t.DesignatedGoodDialog,"data",e)},expression:"DesignatedGoodDialog.data"}})],1)]),e("el-dialog",{attrs:{title:"请输入您希望对接的ERP名称",visible:t.setOtherERPDialog.isShow,width:"800px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.setOtherERPDialog,"isShow",e)},closed:function(e){return t.$refs.uploadFile.clearFiles()}}},[e("el-divider"),e("el-form",{attrs:{"label-position":"top"}},[e("el-form-item",{attrs:{label:""}},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入您希望对接的ERP名称"},model:{value:t.setOtherERPDialog.contents,callback:function(e){t.$set(t.setOtherERPDialog,"contents",e)},expression:"setOtherERPDialog.contents"}})],1),e("el-row",{staticClass:"d-flex align-items-center mg-b-10",staticStyle:{"margin-top":"22px"},attrs:{gutter:15}},[e("el-col",{staticStyle:{"min-width":"155px"},attrs:{span:5}},[e("span",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(t._s(t.$t("ticket.uploadImageAttachment")))])]),e("el-upload",{ref:"uploadFile",staticClass:"upload-file",attrs:{"on-change":t.handleChangeOtherERPDialog,"before-remove":t.handleRemoveOtherERPDialog,action:"","auto-upload":!1,accept:"image/gif,image/jpeg,image/jpg,image/png"}},[e("el-button",{ref:"uploadBtn",attrs:{size:"small",type:"primary",loading:t.DialogEditComment.uploadLoading}},[t._v(t._s(t.$t("ticket.browse")))])],1)],1)],1),e("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[e("div",{staticClass:"mg-r-15"},[e("el-button",{attrs:{size:"small",type:"primary",loading:t.setOtherERPDialog.loading},on:{click:t.commitOtherERP}},[t._v("提交工单")])],1),e("div",[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.setOtherERPDialog.isShow=!1}}},[t._v("取消")])],1)])],1),e("el-drawer",{attrs:{size:"40%","destroy-on-close":!0,visible:t.drawer,"custom-class":"drawer-outline",wrapperClosable:!1},on:{"update:visible":function(e){t.drawer=e}}},[e("div",{staticClass:"clearfix",attrs:{slot:"title"},slot:"title"},[e("h2",{staticStyle:{padding:"0","font-size":"24px"}},[t._v(t._s(t.drawerTitle))])]),e("el-divider",{staticStyle:{"margin-top":"0","margin-bottom":"0"}}),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.uploadLoading,expression:"uploadLoading"}]},[1==t.drawertype?[e("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v(t._s(t.$t("invoice.informationBasic")))])]),e("div",{staticStyle:{"margin-top":"-30px"}},[e("el-form",{attrs:{"label-position":"right","label-width":"200px"}},[e("el-form-item",{attrs:{label:t.$t("invoice.validTotal")}},[t._v(" "+t._s(t.drawerinfo.orderCnt)+t._s(t.$t("invoice.num"))+" ")]),e("el-form-item",{attrs:{label:t.$t("invoice.productsOrder")}},[t._v(" "+t._s(t.drawerinfo.skuCnt)+t._s(t.$t("invoice.kind"))+" ")]),e("el-form-item",{attrs:{label:t.$t("invoice.productTotal")}},[t._v(" "+t._s(t.drawerinfo.totalCnt)+t._s(t.$t("invoice.pro"))+" ")]),e("el-form-item",{attrs:{label:t.$t("invoice.amountTotal")}},[t._v(" US$ "+t._s(t.$numberToCurrency(t.drawerinfo.totalAmount))+" ")])],1)],1)]),e("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v(t._s(t.$t("invoice.statisticsDelivery")))])]),e("div",{staticStyle:{"margin-top":"-30px"}},[e("el-form",{attrs:{"label-position":"right","label-width":"250px"}},[e("el-form-item",{attrs:{label:t.$t("invoice.deliveredProducts")}},[e("span",{staticClass:"tx-success"},[t._v(t._s(t.drawerinfo.deliveredCnt))]),t._v(" "+t._s(t.$t("invoice.Sync"))+" "),e("span",{staticClass:"tx-success"},[t._v(t._s(t.drawerinfo.syncCnt))]),t._v(t._s(t.$t("invoice.pro"))+" ")]),e("el-form-item",{attrs:{label:t.$t("invoice.amount")}},[t._v(" US$ "),e("span",{staticClass:"tx-success"},[t._v(t._s(t.$numberToCurrency(t.drawerinfo.deliveredAmount)))])]),e("el-form-item",{attrs:{label:t.$t("invoice.notQuantity")}},[e("span",{staticClass:"tx-warning"},[t._v(t._s(t.drawerinfo.undeliveredCnt))]),t._v(t._s(t.$t("invoice.pro"))+" ")]),e("el-form-item",{attrs:{label:t.$t("invoice.rate")}},[e("span",{staticClass:"tx-success"},[t._v(t._s(t.drawerinfo.deliverRate)+"%")])]),e("el-form-item",{attrs:{label:t.$t("invoice.wontQuantity")}},[e("span",{staticClass:"tx-error"},[t._v(t._s(t.drawerinfo.notDeliveredCnt))]),t._v(t._s(t.$t("invoice.pro"))+" ")]),e("el-form-item",{attrs:{label:t.$t("invoice.wontAmount")}},[t._v(" US$ "),e("span",{staticClass:"tx-error"},[t._v(t._s(Number(t.drawerinfo.notDeliveredSku)?t.$numberToCurrency(t.drawerinfo.notDeliveredSku):"0.00"))])]),e("el-form-item",{attrs:{label:t.$t("invoice.notAmount")}},[t._v(" US$ "),e("span",{staticClass:"tx-warning"},[t._v(t._s(Number(t.drawerinfo.undeliveredAmount)?t.$numberToCurrency(t.drawerinfo.undeliveredAmount):"0.00"))])])],1)],1)])]:t._e(),2==t.drawertype?[2==t.invoiceInfo.payStatus?e("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[e("el-steps",{attrs:{direction:"vertical",active:1}},[e("el-step",{attrs:{title:"STEP 1"}},[e("template",{slot:"description"},[e("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.skuSet")))]),e("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step1.png",width:"100%"}})])],2),e("el-step",{attrs:{title:"STEP 2"}},[e("template",{slot:"description"},[e("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.priceSet")))]),e("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step2.png",width:"100%"}})])],2),e("el-step",{attrs:{title:"STEP 3"}},[e("template",{slot:"description"},[e("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.paymentSet")))]),e("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step3.png",width:"100%"}})])],2),e("el-step",{attrs:{title:"STEP 4"}},[e("template",{slot:"description"},[e("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.invoiceSend")))]),e("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step4.png",width:"100%"}})])],2)],1)],1):t._e(),1==t.invoiceInfo.payStatus?e("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[e("el-steps",{attrs:{direction:"vertical",active:1}},[e("el-step",{attrs:{title:"STEP 1"}},[e("template",{slot:"description"},[e("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.ordersDownload")))]),e("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step1-1.png",width:"100%"}})])],2),e("el-step",{attrs:{title:"STEP 2"}},[e("template",{slot:"description"},[e("p",{staticClass:"mg-b-10"},[t._v(" "+t._s(t.$t("invoice.logisticsinformation"))+" ")]),e("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/step1-2.png",width:"100%"}})])],2),e("el-step",{attrs:{title:"STEP 3"}},[e("template",{slot:"description"},[e("p",{staticClass:"mg-b-10"},[t._v(t._s(t.$t("invoice.customerInform")))]),e("img",{staticClass:"mg-b-20",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"},attrs:{src:"images/url2-1.png"}})])],2)],1)],1):t._e()]:t._e(),3==t.drawertype?[e("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClickTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"导出采购订单",name:"first"}},[e("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"30px"},attrs:{shadow:"never"}},[e("div",[e("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[e("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("invoice.exportFields"))),e("span",{staticClass:"mg-l-5"},[t._v("("+t._s(t.$t("invoice.dragging"))+")")])]),e("div",{staticClass:"draggable-wrap"},[e("draggable",{attrs:{list:t.modalCustomExport.selectedTitles,draggable:".dargDiv",options:{animation:300},group:"tags"}},t._l(t.modalCustomExport.selectedTitles,(function(i,s){return e("el-tag",{key:i.name,staticClass:"dargDiv",attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.removeTitle(s)}}},[t._v(" "+t._s(i.name)+" ")])})),1),t.modalCustomExport.selectedTitles.length?t._e():e("div",{staticClass:"w-100 justify-content-center"},[e("span",{staticStyle:{color:"#f56c6c"}},[t._v(t._s(t.$t("invoice.selectPlease")))])])],1)]),e("el-divider"),e("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[e("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("myinvoice.optionalfields"))+" "),e("span",{staticClass:"tx-danger tx-12",staticStyle:{color:"#f56c6c"}},[t._v(t._s(t.$t("myinvoice.notExport")))])]),e("div",{staticClass:"tag-wrap"},[e("draggable",{attrs:{list:t.modalCustomExport.unselectedTitles,draggable:".uns-tag",options:{animation:300},group:"tags"}},t._l(t.modalCustomExport.unselectedTitles,(function(i,s){return e("el-tag",{key:i.orName,attrs:{effect:"dark"},on:{click:function(e){return t.selectTitle(s)}}},[t._v(" "+t._s(i.orName)+" ")])})),1)],1)]),e("el-divider"),e("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[e("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3f4eae","padding-left":"10px"}},[t._v(" "+t._s(t.$t("myinvoice.customField"))+" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("invoice.quantity0"),placement:"right"}},[e("i",{staticClass:"fa fa-question-circle-o mg-l-5"})]),e("a",{staticClass:"mg-l-20",staticStyle:{color:"#5c6ac4"},attrs:{href:"javascript:;"},on:{click:function(e){return t.customWrapState()}}},[t._v(t._s(t.showCustom?t.$t("invoice.fieldsHide"):t.$t("invoice.fieldsShow")))])],1),e("div",{staticClass:"row custom-wrap",class:{hide:!t.showCustom}},[e("el-row",{staticStyle:{margin:"0"},attrs:{gutter:20}},t._l(t.modalCustomExport.selectedTitles,(function(i){return e("el-col",{key:i.orName,staticStyle:{"margin-top":"10px"},attrs:{span:20}},[e("div",{staticClass:"grid-content",staticStyle:{display:"flex","align-items":"center"}},[e("label",{staticStyle:{width:"200px","white-space":"nowrap","text-align":"right","margin-right":"10px",color:"#999"}},[t._v("["+t._s(i.orName)+"] "+t._s(t.$t("myinvoice.showAs")))]),e("div",{staticClass:"col-6"},[e("el-input",{attrs:{placeholder:i.orName,size:"small"},model:{value:i.name,callback:function(e){t.$set(i,"name",e)},expression:"title.name"}})],1)])])})),1)],1)]),e("el-divider"),e("div",{staticClass:"text-left"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveCustomExportSetting}},[t._v(t._s(t.$t("myinvoice.saveSetting")))]),1!=t.invoiceInfo.payStatus?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.proceeding"))+" ")]),e("el-button",{staticStyle:{"background-color":"#b3e19d","border-color":"#b3e19d",cursor:"not-allowed"},attrs:{type:"success",size:"small"}},[t._v(" "+t._s(t.$t("invoice.exportExcel"))+" ")])],1),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.proceeding"))+" ")]),e("el-button",{staticStyle:{"background-color":"#b3e19d","border-color":"#b3e19d",cursor:"not-allowed"},attrs:{type:"success",size:"small"}},[t._v(" "+t._s(t.$t("invoice.exportcsv"))+" ")])],1)]:[e("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.saveCustomExport("1")}}},[t._v(t._s(t.$t("invoice.exportExcel")))]),e("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.saveCustomExport("2")}}},[t._v(t._s(t.$t("invoice.exportcsv")))])]],2)],1)])],1),e("el-tab-pane",{attrs:{label:t.$t("invoice.shippinginformation"),name:"second"}},[e("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[e("div",{staticClass:"draw-alert mg-b-20"},[e("el-alert",{attrs:{type:"warning",closable:!1}},[e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[e("span",[t._v(t._s(t.$t("invoice.templateprovided")))]),e("el-button",{attrs:{type:"text"},on:{click:t.downloadFile}},[t._v(t._s(t.$t("invoice.template")))])],1)])],1),e("div",{staticStyle:{"margin-top":"40px"}},[e("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","auto-upload":!1,"file-list":t.uploadfileList,"on-change":t.handleUploadChange}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v(t._s(t.$t("invoice.fileSelect")))]),1!=t.invoiceInfo.payStatus?[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("invoice.proceeding"))+" ")]),e("el-button",{staticStyle:{"background-color":"#b3e19d","border-color":"#b3e19d",cursor:"not-allowed","margin-left":"10px"},attrs:{size:"small",type:"success"}},[t._v(t._s(t.$t("invoice.shippinginformation")))])],1)]:[e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v(t._s(t.$t("invoice.shippinginformation")))])],e("div",{staticClass:"el-upload__tip mg-y-15",staticStyle:{"margin-top":"20px"},attrs:{slot:"tip"},slot:"tip"},[e("p",[t._v(t._s(t.$t("invoice.shippinginformation1")))]),e("p",[t._v(t._s(t.$t("invoice.shippinginformation2")))])])],2)],1)])],1),3!=t.invoiceInfo.status&&4!=t.invoiceInfo.status&&5!=t.invoiceInfo.status&&6!=t.invoiceInfo.status&&9!=t.invoiceInfo.status?e("el-tab-pane",{attrs:{label:t.$t("invoice.ExportShopify"),name:"third"}},[e("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"30px"},attrs:{shadow:"never"}},[e("div",[e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.saveCustomExportShopify}},[t._v(t._s(t.$t("invoice.ExportShopify")))])],1)])],1):t._e(),3!=t.invoiceInfo.status&&4!=t.invoiceInfo.status&&5!=t.invoiceInfo.status&&6!=t.invoiceInfo.status&&9!=t.invoiceInfo.status?e("el-tab-pane",{attrs:{label:t.$t("invoice.supplyinformation"),name:"fourth"}},[e("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[e("div",{staticClass:"draw-alert mg-b-20"},[e("el-alert",{attrs:{type:"warning",closable:!1}},[e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[e("span",[t._v(t._s(t.$t("invoice.templateprovided")))]),e("el-button",{attrs:{type:"text"},on:{click:t.downloadFile}},[t._v(t._s(t.$t("invoice.template")))])],1)])],1),e("div",{staticStyle:{"margin-top":"40px"}},[[e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v(t._s(t.$t("invoice.supplyinformation")))])],e("div",{staticClass:"el-upload__tip mg-y-15",staticStyle:{"margin-top":"20px"},attrs:{slot:"tip"},slot:"tip"},[e("p",[t._v(t._s(t.$t("invoice.shippinginformation1")))]),e("p",[t._v(t._s(t.$t("invoice.shippinginformation2")))])])],2)])],1):t._e()],1)]:t._e(),e("div",{staticClass:"d-flex justify-content-center mg-t-20",staticStyle:{padding:"30px","margin-bottom":"100px"}},[e("el-divider"),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.drawer=!1}}},[t._v(t._s(3==t.drawertype?t.$t("invoice.cancel"):t.$t("importdata.gotIt")))])],1)],2)],1)],1),e("v-tour",{attrs:{name:"invoiceTour",steps:t.steps,callbacks:t.myCallbacks,options:t.myOptions},scopedSlots:t._u([{key:"default",fn:function(i){return[e("transition",{attrs:{name:"fade"}},[t._l(i.steps,(function(s,o){return[i.currentStep===o?e("v-step",{key:o+"tourStep",attrs:{step:s,"previous-step":i.previousStep,"next-step":i.nextStep,stop:i.stop,"is-first":i.isFirst,"is-last":i.isLast,labels:i.labels,highlight:i.highlight}},[[e("div",{staticClass:"d-flex justify-content-between align-item-center pd-x-15",attrs:{slot:"actions"},slot:"actions"},[i.currentStep!=t.steps.length-1?e("div",{staticClass:"close-tour"},[e("a",{staticStyle:{color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.stopDistributorTour}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]):t._e(),e("div",{staticClass:"btn tx-12 mg-r-30"},[t._v(" "+t._s(t.$t("invoice.Step",{index:o+1,length:t.steps.length}))+" ")]),e("div",[o?e("el-button",{staticClass:"tx-white hover-white mg-r-15 tx-12",staticStyle:{color:"#fff","font-size":"12px"},attrs:{size:"mini",id:`supplier-prev-${s.name}-${o+1}`,type:"text"},on:{click:i.previousStep}},[t._v(t._s(t.$t("invoice.Back")))]):t._e(),i.currentStep==t.steps.length-1?e("el-button",{staticStyle:{"font-size":"12px"},attrs:{id:"stop-supplier-step",type:"primary",size:"mini"},on:{click:t.stopDistributorTour}},[t._v(t._s(t.$t("importdata.gotIt")))]):e("el-button",{staticClass:"btn btn-primary btn-sm",staticStyle:{"font-size":"12px"},attrs:{id:`supplier-next-${s.name}-${o+1}`,type:"primary",size:"mini"},on:{click:i.nextStep}},[t._v(t._s(t.$t("invoice.Next")))])],1)])]],2):t._e()]}))],2)]}}])}),e("v-tour",{attrs:{name:"invoiceConfirmTour",steps:t.confirmsteps},scopedSlots:t._u([{key:"default",fn:function(i){return[e("transition",{attrs:{name:"fade"}},[t._l(i.steps,(function(s,o){return[i.currentStep===o?e("v-step",{key:o+"tourStep",attrs:{step:s,"previous-step":i.previousStep,"next-step":i.nextStep,stop:i.stop,"is-first":i.isFirst,"is-last":i.isLast,labels:i.labels,highlight:i.highlight}},[[e("div",{staticClass:"pd-x-15",attrs:{slot:"actions"},slot:"actions"},[i.currentStep!=t.steps.length-1?e("div",{staticClass:"close-tour"},[e("a",{staticStyle:{color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.stopConfirmTour}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]):t._e(),e("div",{staticClass:"tx-right"},[e("el-button",{staticStyle:{"font-size":"12px"},attrs:{id:"stop-supplier-step",type:"primary",size:"mini"},on:{click:t.stopConfirmTour}},[t._v(t._s(t.$t("importdata.gotIt")))])],1)])]],2):t._e()]}))],2)]}}])}),e("v-tour",{attrs:{name:"invoiceConfirmTour1",steps:t.confirmsteps1},scopedSlots:t._u([{key:"default",fn:function(i){return[e("transition",{attrs:{name:"fade"}},[t._l(i.steps,(function(s,o){return[i.currentStep===o?e("v-step",{key:o+"tourStep",attrs:{step:s,"previous-step":i.previousStep,"next-step":i.nextStep,stop:i.stop,"is-first":i.isFirst,"is-last":i.isLast,labels:i.labels,highlight:i.highlight}},[[e("div",{staticClass:"pd-x-15",attrs:{slot:"actions"},slot:"actions"},[i.currentStep!=t.steps.length-1?e("div",{staticClass:"close-tour"},[e("a",{staticStyle:{color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.stopConfirmTour1}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]):t._e(),e("div",{staticClass:"tx-right"},[e("el-button",{staticStyle:{"font-size":"12px"},attrs:{id:"stop-supplier-step",type:"primary",size:"mini"},on:{click:t.stopConfirmTour1}},[t._v(t._s(t.$t("importdata.gotIt")))])],1)])]],2):t._e()]}))],2)]}}])}),e("login",{attrs:{show:t.loginShow,type:t.loginType,rid:t.loginRId}}),e("input",{staticStyle:{display:"none"},attrs:{id:"bottomUploadImg",type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png"},on:{change:function(e){return t.bottomUploadimg(e)}}}),e("el-dialog",{attrs:{title:"您当前采购订单中有 0 元供货价的商品",visible:t.dialogZeroAlert.isShow,width:"600px"},on:{"update:visible":function(e){return t.$set(t.dialogZeroAlert,"isShow",e)}}},[e("div",{staticStyle:{padding:"0 20px"}},[e("div",{staticClass:"mg-b-10"},[t._v("您当前的采购订单中有设置为 0 元供货价的商品：")]),t._l(t.dialogZeroAlert.items,(function(i){return e("div",{key:i.id,staticStyle:{"margin-bottom":"5px","padding-left":"15px",color:"#909399"}},[t._v(" "+t._s(i.codeName)+" - "+t._s(i.sku)+" × "+t._s(i.quantity)+" ")])})),e("div",{staticClass:"mg-t-30"},[e("el-alert",{attrs:{title:"确定要发送当前发票发送给客户吗",type:"warning",closable:!1}})],1)],2),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogZeroAlert.isShow=!1}}},[t._v(" 我再看看 ")]),e("el-button",{attrs:{size:"small",type:"primary",loading:t.dialogZeroAlert.loading},on:{click:function(e){return t.toSendInvoice(t.dialogZeroAlert.invoice,!0)}}},[t._v(" 确定 ")])],1)]),e("el-dialog",{attrs:{title:t.$t("invoice.采购单付款方式"),visible:t.dialogSetPayment.isShow,width:"600px"},on:{"update:visible":function(e){return t.$set(t.dialogSetPayment,"isShow",e)}}},[e("el-divider"),e("div",{staticStyle:{padding:"15px 20px"}},[e("div",{staticClass:"pay-row"},[e("div",{staticClass:"left"},[t._v(t._s(t.$t("invoice.客户接受的付款方式：")))]),e("div",{staticClass:"right"},[t._v(" "+t._s(t.dialogSetPayment.acceptPayment.length?"":"---")+" "),t._l(t.dialogSetPayment.acceptPayment,(function(i,s){return e("span",{key:i},[t._v(" "+t._s(t.$t(t.$dict.paymentType[i].text))+" "+t._s(s<t.dialogSetPayment.acceptPayment.length-1?",":"")+" ")])}))],2)]),e("div",{staticClass:"pay-row"},[e("div",{staticClass:"left"},[t._v(t._s(t.$t("invoice.当前采购单付款方式：")))]),e("div",{staticClass:"right radio-wrap"},[t._l(t.$dict.paymentType,(function(i){return[4!=i.val&&5!=i.val&&6!=i.val?[e("el-radio",{key:i.val,attrs:{label:i.val,disabled:!t.$store.state.userInfo.walletOpen&&4==i.val},model:{value:t.dialogSetPayment.payment,callback:function(e){t.$set(t.dialogSetPayment,"payment",e)},expression:"dialogSetPayment.payment"}},[t._v(" "+t._s(t.$t(i.text))+" ")]),2==t.dialogSetPayment.payment&&2==i.val?e("div",{key:i.val+"b",staticStyle:{"margin-bottom":"15px"}},[e("el-input",{staticStyle:{width:"320px"},attrs:{size:"small",placeholder:"请输入速卖通代拍商品链接地址"},model:{value:t.dialogSetPayment.payUrl,callback:function(e){t.$set(t.dialogSetPayment,"payUrl",e)},expression:"dialogSetPayment.payUrl"}})],1):t._e()]:t._e()]}))],2)])]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogSetPayment.isShow=!1}}},[t._v(" "+t._s(t.$t("invoice.取消"))+" ")]),e("el-button",{attrs:{size:"small",type:"primary",loading:t.dialogSetPayment.loading,disabled:t.dialogSetPayment.loading},on:{click:function(e){return t.saveSetPayment()}}},[t._v(" "+t._s(t.$t("invoice.保存设置"))+" ")])],1)],1),e("el-dialog",{attrs:{visible:t.DialogLoadingCnt.isShow,width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(e){return t.$set(t.DialogLoadingCnt,"isShow",e)}}},[e("div",{staticClass:"get-invocie-loading"},[e("i",{staticClass:"el-icon-loading"}),e("span",[t._v("Loading "),e("span",[t._v(t._s(parseInt(100*t.DialogLoadingCnt.loadingCnt))+" %")])])])])],1)},o=[],a=(i("14d9"),i("3c65"),i("b76a")),n=i.n(a),r=i("c0e9"),l=i.n(r),c=i("8200"),p={name:"invoice",data(){return{transferData:[],DesignatedGoodDialog:{isShow:!1,loading:!1,data:[]},tooltipShow:!1,setOtherERPDialog:{isShow:!1,contents:"",loading:!1,uploadLoading:!1,attach:[]},setLotPriceDialog:{loading:!1,isShow:!1,step:1,price:"1",type:"",numbers:"",shippingTypeArr:{},onlyNone:"1",shipTypeStr:"",logType:"1",cntArr:[],sku:"",erpRules:[],ruleId:"",failDetail:!0,successDetail:!0,results:[],addPrice:"",loadingCnt:0},setLotPriceDialogDefault:{},dialogselectProduct:{items:[],selectItems:[],page:1,totalPage:1,goto(t){}},dialogselectProductDefault:"{}",showErrorLog:!1,userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):"",shopData:[],shopName:"",confirmMoneyType:"1",stepActive:2,showType:1,expands:[],confirmsteps:[{target:".confirmStep",header:{title:this.$t("invoice.ERPsystem")},content:`<div style='text-align:left;'>${this.$t("invoice.importerp")}</div>`,params:{placement:"top",highlight:!0}}],confirmsteps1:[{target:".confirmStep1",header:{title:this.$t("invoice.ERPsystem")},content:`<div style='text-align:left;'>${this.$t("invoice.importerp")}</div>`,params:{placement:"top",highlight:!0}}],steps:[{target:".step-sku-1",header:{title:"STEP 1"},content:this.$t("invoice.skuSet"),params:{placement:"bottom",highlight:!0}},{target:".step-price-2",header:{title:"STEP 2"},content:this.$t("invoice.priceSet"),params:{placement:"bottom",highlight:!0}},{target:".set-paytype-3",header:{title:"STEP 3"},content:this.$t("invoice.paymentSet"),params:{placement:"top",highlight:!0}},{target:".step-btn-4",header:{title:"STEP 4"},content:this.$t("invoice.invoiceSend"),params:{placement:"top",highlight:!0}}],myCallbacks:{onStart:()=>{setTimeout(()=>{$(".v-step").css("opacity",1)},200),this.invoiceTour=!1},onPreviousStep:t=>{$(".v-step").css("opacity",0),setTimeout(()=>{$(".v-step").css("opacity",1)},200),this.invoiceTour=!1},onNextStep:t=>{$(".v-step").css("opacity",0),setTimeout(()=>{$(".v-step").css("opacity",1)},200),this.invoiceTour=!1},onStop:()=>{this.invoiceTour=!0}},myOptions:{startTimeout:0},invoiceTour:!0,editCompanyName:"",editCompanyAddress:"",confirmMoneyOpen:!1,payUrl:"",platformRate:"",paymentType:"",msgContent:"",drawer:!1,drawerTitle:"",drawertype:"",drawerinfo:"",modalCustomExport:{tags:[],selectedTitles:[],unselectedTitles:[]},modalCustomExportDefault:"",alreadySet:!1,isCollapse:!0,formNewcustomer:{name:"",email:"",remark:""},formNewcustomerRules:{name:[{required:!0,message:this.$t("invoice.entername"),trigger:"blur"}],email:[{type:"email",message:this.$t("invoice.fillcompanyEmail"),trigger:"change"}]},formEditCompany:{name:"",address:""},formEditCompanyRules:{name:[{required:!0,message:this.$t("invoice.fillcompany"),trigger:"blur"}]},formEditcustomer:{name:"",email:"",remark:"",id:""},formEditcustomerRules:{name:[{required:!0,message:this.$t("invoice.entername"),trigger:"blur"}],email:[{type:"email",message:this.$t("invoice.fillcompanyEmail"),trigger:"change"}]},customerName:"",changeCustomerStatus:!1,activities:[{content:"Business address and contact details, title, and logo",timestamp:"JUNE 2"},{content:"支持自定义颜色",timestamp:"",color:"#5c6ac4"},{content:"支持自定义Business address and contact details, title, and logo",timestamp:"",color:"#5c6ac4"},{content:"默认样式的节点",timestamp:"",color:"#5c6ac4"},{content:"Business address and contact details, title, and logo",timestamp:"",color:"#5c6ac4"},{content:"支持自定义尺寸",timestamp:"",color:"#5c6ac4"},{content:"Business address and contact details, title, and logo节点",timestamp:"",color:"#5c6ac4"}],checked:!0,form:{resource:"1"},formPrice:{resource:"1"},activeName:"1",Amount:"",Shipping:"",tableData:[],addCustomerOpen:!1,editCompanyInfoOpen:!1,editCustomerOpen:!1,activeNames:"1",count:20,loading:!1,pageLoading:!1,uploadLoading:!1,tabActive:1,imageUrl:"",page:this.$route.query.page?Number(this.$route.query.page):1,totalPage:1,rowsPerPage:50,totalCount:0,type:"all",invoiceInfo:"",invoiceData:[],firstLoading:!0,invoiceCnt:"",getListFlag:!0,relationship:[],showLogo:!1,logoUrl:"",shippingAmount:"",itemAmount:"",totalAmount:"",realAmount:"",discount:"",operateLog:[],totalPageLog:1,currentPageLog:1,pageSizeLog:20,currentPageDataLog:[],getLogFlag:!0,messages:[],currentmessages:[],msgpage:1,msgtotalPage:1,msgrowsPerPage:20,msgtotalCount:0,getMsgFlag:!0,pack:"",fileList:[],uploadfileList:[],uniCode:this.$route.query.uniCode?this.$route.query.uniCode:"",tipWithHover:{container:"page-footer-fixed"},invoiceData2:[],invoiceData3:[],sendInvoiceOpen:!1,activeShareName:"shareLink",showCustom:!1,shareTitle:"",shareDesc:"",showDownloadInvoice:!1,stopResource:"1",activeConfirm:"confirmErp",innerVisible:!1,confirmVisible:!1,confirmVisible2:!1,invoiceConfirmTourShow:!1,invoiceConfirmTourShow1:!1,loginShow:!1,loginType:0,loginRId:"",searchName:!1,searchTrack:!1,searchNameInput:"",showTopTip:!1,fromPage:this.$route.query.fromPage?this.$route.query.fromPage:"",secretKeyOpen:!1,DialogEditComment:{loading:!1,uploadLoading:!1,visible:!1,contents:"",shopName:"",attach:[],commentId:"",item:null},DialogEditCommentDefault:"{}",showItemPrice:!0,activeName:"first",exportInvoiceType:"",dialogMarkShipped:{isShow:!1,loading:!1,trackNumber:"",trackCompany:"",realCompany:"",item:null,shopifyCompany:[],trackKey:"",trackUrl:""},dialogMarkShippedDefault:"{}",loadCnt:!1,cnt:null,cntText:"",totalCnt:0,dialogZeroAlert:{isShow:!1,loading:!1,items:[],invoice:null},dialogZeroAlertDefault:"{}",tempCode:"",setLotPriceCallBackTime:0,iframeId:null,setShippingTime:0,dialogSetPayment:{isShow:!1,loading:!1,acceptPayment:[],payment:"",payUrl:""},dialogSetPaymentDefault:"{}",tempCode:"",getInvocieTime:0,DialogLoadingCnt:{isShow:!1,loadingCnt:0}}},computed:{hasAbnormal(){return this.invoiceData.some(t=>1===Number(t.isAbnormal))},noMore(){return!0},disabled(){return this.loading||this.noMore},fullPath(){return this.$route.fullPath}},watch:{$route:"gotoPage",fullPath(){},noMore(){this.noMore&&(this.getOperateLog(this.invoiceInfo.id),this.getMessages(this.invoiceInfo.id))},customerName(){this.changeCustomerName()},uniCode(){sessionStorage.removeItem("tabActiveAll"),sessionStorage.removeItem("tabActiveSku"),sessionStorage.removeItem("tabActiveNotBind"),sessionStorage.removeItem("tabActiveNotDeliver")},drawer(){this.drawer&&setTimeout(()=>{$(".el-drawer__body").scrollTop(0)},100)},realAmount(){Number(this.realAmount)<Number(this.totalAmount)&&Number(this.realAmount)>0?this.discount=this.toFixed(Number(this.totalAmount)-Number(this.realAmount)):this.discount=0},tabActive(){this.searchName=!1,this.searchTrack=!1,this.searchNameInput=""},searchName(){this.searchName&&setTimeout(()=>{this.$refs.searchNameInput.focus()},300)},searchTrack(){this.searchTrack&&setTimeout(()=>{this.$refs.searchNameInput.focus()},300)},invoiceData(){this.invoiceData.length&&this.invoiceData.forEach((t,e)=>{this.$set(t,"previewList",[]),t.imgUrl&&t.previewList.push(t.imgUrl)})}},mounted(){window.addEventListener("message",t=>{t.data.type&&"isVendors"===t.data.type&&(this.iframeId=t.data.id);let e=localStorage.getItem("apiUserId")?localStorage.getItem("apiUserId"):"",i=localStorage.getItem("apiUserToken")?localStorage.getItem("apiUserToken"):"";e&&i||this.iframeId===this.invoiceInfo.customerId&&(this.loginShow=!1)}),this.dialogSetPaymentDefault=JSON.stringify(this.dialogSetPayment),this.dialogZeroAlertDefault=JSON.stringify(this.dialogZeroAlert),this.dialogMarkShippedDefault=JSON.stringify(this.dialogMarkShipped),this.DialogEditCommentDefault=JSON.stringify(this.DialogEditComment),this.setLotPriceDialogDefault=JSON.stringify(this.setLotPriceDialog),this.getDataAll(),3==this.userInfo.source&&this.getErpRules(),this.isCollapse=!0,this.$nextTick(()=>{this.handleScroll(),window.emojiPicker=new EmojiPicker({emojiable_selector:"[data-emojiable=true]",assetsPath:"images/v-emoji",popupButtonClasses:"fa fa-smile-o"}),window.emojiPicker.discover()}),this.shopData=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).erpShops:[],this.modalCustomExportDefault=JSON.stringify(this.modalCustomExport),$("body").on("click",t=>{var e=$(t.target);e.hasClass("el-popover")||0!==e.parent(".el-popover").length||$(".el-popover").remove()})},created(){document.body.ondrop=function(t){t.preventDefault(),t.stopPropagation()}},destroyed(){},components:{draggable:n.a,login:c["a"]},methods:{DesignatedChange(t,e){},setDesignatedGood(){this.DesignatedGoodDialog.isShow=!0},openSelectProducts(){},focusChange(t,e){t.price=void 0,this.$nextTick((function(){this.$refs["refInput"+e].focus()})),console.log(t,e)},blueChange(t,e){void 0==t.price&&(t.price=null,t.tooltipShow=!1),console.log(t,e)},setType(t){this.type=t,this.toPage(1)},gotoPage(){this.page=this.$route.query.page?Number(this.$route.query.page):1,this.getInvoiceData(this.invoiceInfo.id)},toPage(t){if(t!=this.$route.query.page){let e={...this.$route.query,page:t};this.$router.push({query:e})}else this.getInvoiceData(this.invoiceInfo.id)},DisplayToPage(t,e){this.pageLoading=!0,setTimeout(()=>{this.$set(e,"displayItems",e.allItems.slice(50*(t-1),50*t)),this.$set(e,"displayItemsPage",t),this.pageLoading=!1},500)},saveSetLotPrice(){if(2==this.userInfo.source&&1==this.setLotPriceDialog.logType&&!this.setLotPriceDialog.shipTypeStr)return void this.$elementMessage("请填写物流渠道名称","error");if(3==this.setLotPriceDialog.onlyNone&&0==this.DesignatedGoodDialog.data.length)return void this.$elementMessage("请选择指定商品","error");this.tempCode=`${this.invoiceInfo.id}${Date.parse(new Date)}`;let t={invoiceId:this.invoiceInfo.id,shipType:this.setLotPriceDialog.type,shipTypeStr:this.setLotPriceDialog.shipTypeStr,addPricePercent:this.setLotPriceDialog.numbers,onlyNone:this.setLotPriceDialog.onlyNone,tempCode:this.tempCode};if(2==this.setLotPriceDialog.logType){if(!this.setLotPriceDialog.cntArr.length)return void(t.shipTypeArr=[]);let e=[];this.setLotPriceDialog.cntArr.forEach(t=>{e.push({countryCode:t.countryCode,shipType:t.shipType,shipTypeStr:t.shipTypeStr})}),t.shipTypeArr=e,t.shipType="",t.shipTypeStr=""}2==this.setLotPriceDialog.onlyNone&&this.setLotPriceDialog.sku&&(t.sku=this.setLotPriceDialog.sku),3==this.setLotPriceDialog.onlyNone&&this.DesignatedGoodDialog.data.length>0&&(t.ids=this.DesignatedGoodDialog.data),3==this.userInfo.source?(t.ruleId=this.setLotPriceDialog.ruleId,t.priceType=this.setLotPriceDialog.price,t.addPrice=this.setLotPriceDialog.addPrice):t.priceType=this.setLotPriceDialog.price,this.setLotPriceDialog.loading=!0,this.$apiCall("api.Invoice.getErpPrice",t,t=>{}),this.setLotPriceDialog.step=4,this.setLotPriceDialog.loadingCnt=0,this.setLotPriceDialog.loading=!1;let e=0;this.setLotPriceCallBackTime=setInterval(()=>{e++,e>300&&(this.setLotPriceDialog.loading=!1,this.setLotPriceDialog.isShow=!1,this.$elementMessage("批量改价失败","error"),this.tempCode="",clearInterval(this.setLotPriceCallBackTime)),this.$apiCall("api.Invoice.checkPriceResult",{tempCode:this.tempCode},t=>{if("9999"==t.ErrorCode){this.DesignatedGoodDialog.data=[];let e=t.Data.Results;e.result&&e.result.now&&(this.setLotPriceDialog.loadingCnt=e.result.now/e.result.allCnt),1!=e.status&&(this.setLotPriceDialog.loading=!1,3!=e.status&&(this.setLotPriceDialog.isShow=!1),this.tempCode="",clearInterval(this.setLotPriceCallBackTime),2==e.status&&(this.setLotPriceDialog.isShow=!1,this.$elementMessage(e.message,"error")),3==e.status&&(this.setLotPriceDialog.step=3,this.setLotPriceDialog.results=e.result,this.getDataAll()))}})},1e3)},setLotPriceStep(t){if(1===t){let e="https:"==document.location.protocol?"https":"http",i=window.location.host.toLowerCase().indexOf("sandbox")>=0?"sandboxvendor.ourmall.com":"vendor.ourmall.com",s=e+"://"+i+"/mabang-account.html";window.location.host.indexOf("localhost")>-1&&(s=`http://${window.location.host}/mabang-account.html`);let o=encodeURI(s);window.open("http://www.mabangerp.com/index.php?mod=main.login&erp-type=5yoho&backUrl="+o,"mabang-account-window",void 0,!0);window.addEventListener("storage",e=>{if("authorizMabangAccount"==e.key){let e=JSON.parse(localStorage.getItem("authorizMabangAccount"));this.$apiCall("api.User.mbLogin",{employeeId:e.employeeId,cKey:e.cKey},e=>{if("9999"==e.ErrorCode){let i=JSON.parse(JSON.stringify(this.$store.state.userInfo));i.source=e.Data.Results.source,localStorage.setItem("userInfo",JSON.stringify(i)),this.userInfo=JSON.parse(localStorage.getItem("userInfo")),3==e.Data.Results.source&&this.getErpRules(),setTimeout(()=>{this.$hideLoading(),this.setLotPriceDialog.step=t},300)}else this.$hideLoading(),this.$elementMessage(e.Message,"error")})}})}else 2===t&&(this.setOtherERPDialog.loading=!1,this.setOtherERPDialog.uploadLoading=!1,this.setOtherERPDialog.contents="",this.setOtherERPDialog.attach=[],this.setOtherERPDialog.isShow=!0)},getErpRules(){this.$apiCall("api.Invoice.getErpRules",{},t=>{"9999"==t.ErrorCode&&(this.setLotPriceDialog.erpRules=t.Data.Results,this.setLotPriceDialog.erpRules.length&&this.setLotPriceDialog.erpRules.forEach(t=>{this.$set(t,"shippingFeeRuleId",Number(t.shippingFeeRuleId))}),this.setLotPriceDialog.isShow=!1,this.getData())})},unbind(){this.$showLoading(),this.$apiCall("api.User.unbind",{},t=>{if(this.$hideLoading(),"9999"==t.ErrorCode){let e=JSON.parse(JSON.stringify(this.$store.state.userInfo));e.source=t.Data.Results.source,localStorage.setItem("userInfo",JSON.stringify(e)),this.userInfo=JSON.parse(localStorage.getItem("userInfo")),this.$elementMessage("解除绑定成功","success"),this.setLotPriceDialog.step=1}else this.$elementMessage(t.Message,"error")})},changePriceType(){2==this.setLotPriceDialog.price&&(this.setLotPriceDialog.onlyNone="")},setLotPrice(t){this.$showLoading(),t&&t.sku?(this.setLotPriceDialog.sku=t.sku,this.setLotPriceDialog.onlyNone="2"):(this.setLotPriceDialog.sku="",this.setLotPriceDialog.onlyNone="1"),1==this.userInfo.source?(this.setLotPriceDialog.step=1,this.setLotPriceDialog.isShow=!0,this.$hideLoading()):(this.setLotPriceDialog.step=2,this.setLotPriceDialog.loading=!0,this.$apiCall("api.Invoice.getPriceConfig",{invoiceId:this.invoiceInfo.id},t=>{if(this.setLotPriceDialog.loading=!1,"9999"==t.ErrorCode){if(this.setLotPriceDialog.isShow=!0,this.setLotPriceDialog.shippingTypeArr=t.Data.Results.shippingTypeArr,this.setLotPriceDialog.type=t.Data.Results.shipType,this.setLotPriceDialog.numbers=t.Data.Results.addPricePercent,this.setLotPriceDialog.shipTypeStr=t.Data.Results.shipTypeStr,this.setLotPriceDialog.ruleId=t.Data.Results.ruleId?Number(t.Data.Results.ruleId):"",this.setLotPriceDialog.price=t.Data.Results.priceType?t.Data.Results.priceType:"1",2==this.setLotPriceDialog.price&&(this.setLotPriceDialog.onlyNone=""),2==this.showType&&(this.setLotPriceDialog.onlyNone="2"),this.setLotPriceDialog.shipTypeStr&&(this.setLotPriceDialog.type="999"),t.Data.Results.shipTypeArr&&t.Data.Results.shipTypeArr.length){this.setLotPriceDialog.logType="2",t.Data.Results.shipTypeArr.forEach(t=>{t.shipType||this.$set(t,"shipType","999"),this.setLotPriceDialog.cntArr.length&&this.setLotPriceDialog.cntArr.forEach(e=>{e.countryCode==t.countryCode&&(this.$set(e,"shipType",t.shipType),this.$set(e,"shipTypeStr",t.shipTypeStr))})})}this.$hideLoading()}else this.$elementMessage(t.Message,"error")}))},cntOnError(){this.$elementMessage(this.$t("myinvoice.copyFailed"),"error")},cntOnCopy(){this.$elementMessage(this.$t("myinvoice.copyItems"),"success")},getCntCountry(){this.loadCnt=!0,this.$apiCall("api.Invoice.getItemsCountry",{invoiceId:this.invoiceInfo.id},t=>{if(this.loadCnt=!1,"9999"==t.ErrorCode){this.cnt=t.Data.Results;let e=`${this.$t("invoice.Totalpurchases")}${this.totalCnt},`;this.totalCnt=0,this.setLotPriceDialog.cntArr=[],Object.keys(t.Data.Results).forEach(i=>{e+=`${t.Data.Results[i].name}: ${t.Data.Results[i].cnt},`,this.totalCnt+=Number(t.Data.Results[i].cnt),this.setLotPriceDialog.cntArr.push({country:t.Data.Results[i].name,countryCode:i,shipType:"",shipTypeStr:""})}),this.cntText=e.slice(0,e.length-1)}})},saveMarkShipped(){if(!this.dialogMarkShipped.trackNumber)return void this.$elementMessage(this.$t("invoice.logisticsnumber"),"error");if(!this.dialogMarkShipped.trackKey)return void this.$elementMessage(this.$t("invoice.logisticscompany"),"error");if(99==this.dialogMarkShipped.trackKey&&!this.dialogMarkShipped.trackCompany)return void this.$elementMessage(this.$t("invoice.logisticscompany"),"error");let t="";this.dialogMarkShipped.shopifyCompany.forEach(e=>{this.dialogMarkShipped.trackKey==e.key&&(t=99!=this.dialogMarkShipped.trackKey?e.name:this.dialogMarkShipped.trackCompany)}),this.dialogMarkShipped.loading=!0,this.$apiCall("api.Invoice.changeDeliver",{itemId:this.dialogMarkShipped.item.id,trackNumber:this.dialogMarkShipped.trackNumber,trackCompany:this.dialogMarkShipped.trackCompany,trackKey:this.dialogMarkShipped.trackKey,trackUrl:this.dialogMarkShipped.trackUrl},t=>{this.dialogMarkShipped.loading=!1,"9999"==t.ErrorCode?(this.$elementMessage(this.$t("invoice.shippedMark"),"success"),this.dialogMarkShipped.isShow=!1,this.getCnt(this.invoiceInfo.id),this.getData(),this.$apiCall("api.Invoice.getItems",{uniCode:this.invoiceInfo.uniCode,invoiceId:this.invoiceInfo.id,id:this.dialogMarkShipped.item.id},t=>{"9999"==t.ErrorCode?(console.log(t),this.invoiceData.forEach((e,i)=>{e.id==t.Data.Results[0].id&&this.invoiceData.splice(i,1,t.Data.Results[0])})):this.$elementMessage(t.Message,"error")})):this.$elementMessage(t.Message,"error")})},markShippedOpen(t){this.dialogMarkShipped=JSON.parse(this.dialogMarkShippedDefault),this.$showLoading(),this.$apiCall("api.Invoice.getShopifyCompany",{},e=>{this.$hideLoading(),"9999"==e.ErrorCode?(this.dialogMarkShipped.shopifyCompany=e.Data.Results,this.dialogMarkShipped.isShow=!0,this.dialogMarkShipped.item=t):this.$elementMessage(e.Message,"error")})},handleClickTab(t,e){this.exportInvoiceType=t.paneName,"first"!=this.exportInvoiceType&&"third"!=this.exportInvoiceType||(this.$showLoading(),this.getExportTitle())},changeShowItemPrice(){this.$apiCall("api.Invoice.setShowPrice",{uniCode:this.uniCode},t=>{"9999"==t.ErrorCode||(this.showItemPrice=!this.showItemPrice,this.$elementMessage(t.Message,"error"))})},handleRemoveImg(t,e){e.forEach((e,i)=>{e.name==t.name&&this.DialogEditComment.attach.splice(i,1)})},handleChangeImg(t){this.DialogEditComment.loading=!0,this.DialogEditComment.uploadLoading=!0,this.$apiCall("api.Comment.uploadAttach",{"@file":t.raw},t=>{this.DialogEditComment.loading=!1,this.DialogEditComment.uploadLoading=!1,"9999"==t.ErrorCode?this.DialogEditComment.attach.push(t.Data.Results.url):this.$elementMessage(t.Message,"error")})},openAddComment(){this.$refs.uploadFile&&this.$refs.uploadFile.clearFiles(),this.DialogEditComment=JSON.parse(this.DialogEditCommentDefault),this.DialogEditComment.visible=!0},saveComment(){if(!this.DialogEditComment.contents)return this.$message({message:this.$t("invoice.emptyQuestion"),type:"error"}),!1;this.DialogEditComment.loading=!0,this.$apiCall("api.Comment.addByUser",{commentId:this.DialogEditComment.commentId,contents:this.DialogEditComment.contents,shopName:this.DialogEditComment.shopName,attach:this.DialogEditComment.attach},t=>{this.DialogEditComment.loading=!1,9999==t.ErrorCode?(this.DialogEditComment.visible=!1,this.$message({message:this.$t("app._wewillReplyASAP"),type:"success"})):this.$message({message:t.Message,type:"error"})})},openSecretKey(){this.secretKeyOpen=!0},Filter(t,e){if(3==t)!this.searchName&&!this.searchTrack||this.searchNameInput||(this.searchName=!1,this.searchTrack=!1);else if(2==t)this.searchName=!1,this.searchTrack=!1,this.searchNameInput="";else if(1==t&&!this.searchNameInput&&!this.searchTrack)return;this.page=1,this.getInvoiceData(this.invoiceInfo.id,this.searchNameInput)},openSkype(){this.getData();let t=0,e=setInterval(()=>{(function(t,e,i){t.loadSkypeWebSdkAsync=t.loadSkypeWebSdkAsync||function(t){var s,o=e.getElementsByTagName(i)[0];e.getElementById(t.id)||(s=e.createElement(i),s.id=t.id,s.src=t.scriptToLoad,s.onload=t.callback,o.parentNode.insertBefore(s,o))};var s={scriptToLoad:"https://swx.cdn.skype.com/shared/v/latest/skypewebsdk.js",id:"skype_web_sdk"};t.loadSkypeWebSdkAsync(s)})(window,document,"script"),t++,t>10&&clearInterval(e)},300)},isChangeSku(t){return!(!this.invoiceInfo.timeApiGet&&!this.invoiceInfo.timeCreateOrder&&2!=t.fulfillStatus&&9!=this.invoiceInfo.status)},isChangePrice(t){return!(!this.invoiceInfo.timeApiGet&&!this.invoiceInfo.timeCreateOrder&&2!=t.fulfillStatus&&9!=this.invoiceInfo.status&&1!=this.invoiceInfo.customerRead&&1!=this.invoiceInfo.payStatus)},isChangeOther(t){return!!(2==t.isAbnormal&&(this.invoiceInfo.timeApiGet||this.invoiceInfo.timeCreateOrder||2==t.fulfillStatus||9==this.invoiceInfo.status||1==this.invoiceInfo.customerRead||1==this.invoiceInfo.payStatus)||1==t.isAbnormal&&t.trackNumber)},isChangeAmount(){return!(!this.invoiceInfo.timeApiGet&&!this.invoiceInfo.timeCreateOrder&&9!=this.invoiceInfo.status&&1!=this.invoiceInfo.customerRead&&1!=this.invoiceInfo.payStatus)},hidePopoverFn(){$(".el-popover").remove()},showPopover(){this.hasAbnormal||(this.confirmVisible=!0,$(".el-popover").remove(),$("body").off())},showPopover3(){$(".el-popover").remove(),$("body").off()},showPopover2(){this.hasAbnormal||(this.confirmVisible2=!0,$(".el-popover").remove(),$("body").off(),$(".page-footer-fixed").addClass("show-hover"))},hidePopover(){$(".page-footer-fixed").removeClass("show-hover")},downloadInvoice(){this.showDownloadInvoice=!0;let t=1,e=1;this.showLogo=!1,this.logoUrl="",this.$showLoading(),this.$apiCall("api.Invoice.getOne",{uniCode:this.uniCode},i=>{"9999"==i.ErrorCode?(this.invoiceInfo=i.Data.Results,this.shopName=this.invoiceInfo.shopName?this.invoiceInfo.shopName:"",this.invoiceData3=[],this.getDownload(t,e),this.shareTitle=this.invoiceInfo.remark?this.invoiceInfo.remark.title:"",this.shareDesc=this.invoiceInfo.remark?this.invoiceInfo.remark.desc:"",this.invoiceInfo&&this.invoiceInfo.logo&&(this.showLogo=!0,this.logoUrl=this.invoiceInfo.logo),this.payUrl=this.invoiceInfo.payUrl?this.invoiceInfo.payUrl:"",this.platformRate=this.invoiceInfo.platformRate&&this.invoiceInfo.platformRate>0?this.invoiceInfo.platformRate:"",this.paymentType=this.invoiceInfo.paymentType?this.invoiceInfo.paymentType:"",this.shippingAmount=this.invoiceInfo.shippingAmount?this.toFixed(this.invoiceInfo.shippingAmount):"",this.itemAmount=this.invoiceInfo.itemAmount?this.toFixed(this.invoiceInfo.itemAmount):"",this.totalAmount=this.invoiceInfo.totalAmount?this.toFixed(this.invoiceInfo.totalAmount):"",this.realAmount=this.invoiceInfo.realAmount?this.toFixed(this.invoiceInfo.realAmount):""):(this.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||this.$userFailure(this))})},getDownload(t,e){t>e?setTimeout(()=>{this.getCanvas()},1e3):this.$apiCall("api.Invoice.getItems",{invoiceId:this.invoiceInfo.id,type:"all",page:t,rowsPerPage:50},e=>{if("9999"==e.ErrorCode){let i=e.Data.Pagination.totalPage;e.Data.Results.forEach((t,e)=>{t.price?2!=t.fulfillStatus?this.$set(t,"amount",(Number(t.quantity)*Number(t.price)).toFixed(2)):this.$set(t,"amount","0.00"):this.$set(t,"amount",""),this.invoiceData3.push(t)}),t++,this.getDownload(t,i)}else this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this)})},getCanvas(){var t=$(".download-invoice"),e=2;l()(t[0],{dpi:2*window.devicePixelRatio,scale:e,background:"#fff",allowTaint:!0,useCORS:!0}).then(t=>{this.$hideLoading();var e=t.toDataURL("image/jpeg"),i=$("<a>").attr("href",e).attr("download","Invoice # "+this.invoiceInfo.code+".jpg").appendTo("body");i[0].click(),i.remove(),this.showDownloadInvoice=!1})},saveRemark(t){this.$showLoading(),this.$apiCall("api.Invoice.saveRemark",{uniCode:this.uniCode,title:1==t?"":this.shareTitle,desc:1==t?"":this.shareDesc},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.shareTitle=t.Data.Results.title,this.shareDesc=t.Data.Results.desc):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},saveCustomExportSetting(t){if(!this.modalCustomExport.selectedTitles.length)return this.$elementMessage(this.$t("myinvoice.leastOne"),"error"),!1;if(this.modalCustomExport.selectedTitles.some(t=>!t.name))return this.$elementMessage(this.$t("myinvoice.notEmpty"),"error"),!1;this.uploadLoading=!0;let e={};this.modalCustomExport.selectedTitles.forEach(t=>{e[t.key]=t.name});let i="third"==this.exportInvoiceType?"api.Invoice.saveInvoiceTitle":"api.Invoice.saveExportTitle";this.$apiCall(i,{titles:e},i=>{if("9999"==i.ErrorCode)if(t>0){0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let i=t=>{document.getElementById("ifilePro").src=t},s="third"==this.exportInvoiceType?"api.Invoice.exportInvoice":"api.Invoice.exportOrder";this.$apiCall(s,{titles:e,invoiceId:this.invoiceInfo.id,type:1==t?"excel":"csv"},t=>{this.uploadLoading=!1,"9999"==t.ErrorCode?(this.$elementMessage(this.$t("myinvoice.saveSettingAndExport"),"success"),i(t.Data.Results.file)):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})}else this.$elementMessage(this.$t("myinvoice.saveSettingSuccess"),"success");else this.uploadLoading=!1,this.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||this.$userFailure(this)})},saveCustomExportShopify(){this.uploadLoading=!0,0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let t=t=>{document.getElementById("ifilePro").src=t},e="third"==this.exportInvoiceType?"api.Invoice.exportInvoice":"api.Invoice.exportOrder";this.$apiCall(e,{invoiceId:this.invoiceInfo.id,type:"excel"},e=>{this.uploadLoading=!1,"9999"==e.ErrorCode?(this.$elementMessage(this.$t("myinvoice.exportSuccess"),"success"),t(e.Data.Results.file)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},saveCustomExport(t){this.saveCustomExportSetting(t)},customWrapState(){this.showCustom=!this.showCustom},selectTitle(t){this.modalCustomExport.selectedTitles.push(this.modalCustomExport.unselectedTitles[t]),this.modalCustomExport.unselectedTitles.splice(t,1)},removeTitle(t){this.modalCustomExport.unselectedTitles.unshift(this.modalCustomExport.selectedTitles[t]),this.modalCustomExport.selectedTitles.splice(t,1)},downloadFile(){let t="fourth"==this.exportInvoiceType?"/file/shopify_orders_import.csv":"/file/orders_impor.xlsx";0==$("#downloadFile").length&&$("body").append('<iframe id="downloadFile" style="display:none"></iframe>');let e=t=>{document.getElementById("downloadFile").src=t};e(t)},querySearch(t,e){var i=this.shopData,s=t?i.filter(this.createFilter(t)):i;e(s)},createFilter(t){return e=>0===e.value.toLowerCase().indexOf(t.toLowerCase())},handleSelect(t){this.shopName=t.value},getExportTitle(){this.modalCustomExport=JSON.parse(this.modalCustomExportDefault);let t="third"==this.exportInvoiceType?"api.Invoice.exportInvoiceTitle":"api.Invoice.exportTitle";this.$apiCall(t,{},t=>{if(this.$hideLoading(),"9999"==t.ErrorCode){for(var e in t.Data.Results.default){let i={};i.key=e,i.orName=t.Data.Results.default[e],i.name=t.Data.Results.default[e],this.modalCustomExport.tags.push(i)}for(var e in t.Data.Results.titles){let i={};i.key=e,i.orName=t.Data.Results.titles[e],i.name=t.Data.Results.titles[e],this.modalCustomExport.selectedTitles.push(i)}this.modalCustomExport.tags.forEach(t=>{this.modalCustomExport.selectedTitles.some(e=>t.key==e.key)||this.modalCustomExport.unselectedTitles.unshift(t),this.modalCustomExport.selectedTitles.some(e=>{t.key==e.key&&this.$set(e,"orName",t.name)})})}else this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this)})},saveCustomExportSettingOnly(t){if(!this.modalCustomExport.selectedTitles.length)return this.$elementMessage(this.$t("myinvoice.leastOne"),"error"),!1;if(this.modalCustomExport.selectedTitles.some(t=>!t.name))return this.$elementMessage(this.$t("myinvoice.notEmpty"),"error"),!1;this.$showLoading();let e={};this.modalCustomExport.selectedTitles.forEach(t=>{e[t.key]=t.name}),this.$apiCall("api.Invoice.saveExportTitle",{titles:e},e=>{if(this.$hideLoading(),"9999"==e.ErrorCode)if(t>0){0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let e=t=>{document.getElementById("ifilePro").src=t};this.$apiCall("api.Invoice.exportOrder",{invoiceId:this.invoiceInfo.id,type:1==t?"excel":"csv"},t=>{"9999"==t.ErrorCode?(this.innerVisible=!1,this.$elementMessage(this.$t("myinvoice.exportSuccess"),"success"),e(t.Data.Results.file),this.$hideLoading()):(this.$hideLoading(),this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})}else this.innerVisible=!1,this.$elementMessage(this.$t("myinvoice.saveSettingSuccess"),"success"),this.getExportTitle();else this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this)})},saveCustomExportOnly(t){this.saveCustomExportSettingOnly(t)},setExportOnly(){this.$showLoading(),this.showCustom=!1,this.modalCustomExport=JSON.parse(this.modalCustomExportDefault),this.$apiCall("api.Invoice.exportTitle",{},t=>{if(this.$hideLoading(),"9999"==t.ErrorCode){for(var e in this.innerVisible=!0,t.Data.Results.default){let i={};i.key=e,i.orName=t.Data.Results.default[e],i.name=t.Data.Results.default[e],this.modalCustomExport.tags.push(i)}for(var e in t.Data.Results.titles){let i={};i.key=e,i.orName=t.Data.Results.titles[e],i.name=t.Data.Results.titles[e],this.modalCustomExport.selectedTitles.push(i)}this.modalCustomExport.tags.forEach(t=>{this.modalCustomExport.selectedTitles.some(e=>t.key==e.key)||this.modalCustomExport.unselectedTitles.unshift(t),this.modalCustomExport.selectedTitles.some(e=>{t.key==e.key&&this.$set(e,"orName",t.name)})})}else this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this)})},confirmMoney(){this.invoiceConfirmTourShow||this.invoiceConfirmTourShow1||(this.$showLoading(),this.modalCustomExport=JSON.parse(this.modalCustomExportDefault),this.$apiCall("api.Invoice.exportTitle",{},t=>{if(this.$hideLoading(),"9999"==t.ErrorCode){for(var e in this.confirmMoneyOpen=!0,this.confirmMoneyType="1",this.activeConfirm="confirmErp",t.Data.Results.default){let i={};i.key=e,i.orName=t.Data.Results.default[e],i.name=t.Data.Results.default[e],this.modalCustomExport.tags.push(i)}for(var e in t.Data.Results.titles){let i={};i.key=e,i.orName=t.Data.Results.titles[e],i.name=t.Data.Results.titles[e],this.modalCustomExport.selectedTitles.push(i)}this.modalCustomExport.tags.forEach(t=>{this.modalCustomExport.selectedTitles.some(e=>t.key==e.key)||this.modalCustomExport.unselectedTitles.unshift(t),this.modalCustomExport.selectedTitles.some(e=>{t.key==e.key&&this.$set(e,"orName",t.name)})})}else this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this)}))},confirmMoneyFn(){this.tempCode=`${this.invoiceInfo.id}${Date.parse(new Date)}`,this.$apiCall("api.Invoice.setSyncToErp",{invoiceId:this.invoiceInfo.id,shopName:this.shopName,tempCode:this.tempCode},t=>{}),this.DialogLoadingCnt.loadingCnt=0,this.DialogLoadingCnt.isShow=!0,this.getInvocieTime=setInterval(()=>{this.$apiCall("api.Invoice.checkPriceResult",{tempCode:this.tempCode,type:4},t=>{if("9999"==t.ErrorCode){let e=t.Data.Results;Number(e.count)&&Number(e.total)&&(this.DialogLoadingCnt.loadingCnt=e.count/e.total),1!=e.status&&(this.tempCode="",clearInterval(this.getInvocieTime),this.DialogLoadingCnt.isShow=!1,3==e.status&&this.$elementMessage(e.message,"error"),2==e.status&&(this.$elementMessage(this.$t("invoice.storeSet"),"success"),this.confirmMoneyOpen=!1,this.getData()))}})},1e3)},confirmMoneyOnly(t){this.$showLoading(),this.$apiCall("api.Invoice.setPayed",{invoiceId:this.invoiceInfo.id,shopName:this.shopName},e=>{this.$hideLoading(),"9999"==e.ErrorCode?(this.$elementMessage(this.$t("invoice.successConfirm"),"success"),this.getData(),1==t?($("#messageContainer").css("display","none"),setTimeout(()=>{this.invoiceConfirmTourShow1=!0,this.$tours["invoiceConfirmTour1"].start()},1e3)):($(".page-footer-fixed").addClass("show-hover"),this.invoiceConfirmTourShow=!0,setTimeout(()=>{this.$tours["invoiceConfirmTour"].start()},1e3))):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},toSendInvoice(t){this.invoiceTour&&(this.sendInvoiceOpen=!0,this.activeShareName="shareLink",t&&(this.dialogZeroAlert.isShow=!1))},sendInvoice(){this.loading=!0,this.$apiCall("api.Invoice.checkItemPrice",{invoiceId:this.invoiceInfo.id},t=>{if(this.loading=!1,"9999"==t.ErrorCode){let e=t.Data.Results;e.noSkuArr.length||e.nullPriceArr.length||e.zeroPriceArr.length?(this.dialogZeroAlert=JSON.parse(this.dialogZeroAlertDefault),this.dialogZeroAlert.items=e.noSkuArr.concat(e.noSkuArr,e.nullPriceArr,e.zeroPriceArr),this.dialogZeroAlert.isShow=!0):this.toSendInvoice()}else this.$elementMessage(t.Message,"error")})},invoicePreview(t){let e=window.open("/blank.html","invoicePreview");e.location.href=t},changeShowType(t){this.showType!=t&&(this.showType=t,this.tabcChange(this.showType))},getRowKey(t){return t.id},rowClick(t,e,i){if("1"!==t.fulfillStatus)return;const s=i.type.indexOf("expand");0==s&&t.allItems.length<=0?this.expands=[]:t.allItems.length>0&&this.expands.indexOf(t.id)<0&&this.expands.push(t.id)},expandChange(t,e){this.expands=[],e.length?(e.forEach((t,e)=>{"1"===t.fulfillStatus&&this.expands.push(t.id)}),this.expands=Array.from(new Set(this.expands))):this.expands=[]},stopDistributorTour(){this.invoiceTour=!0,this.$tours["invoiceTour"].stop(),localStorage.setItem("invocieTourFlag",!0),$(".el-scrollbar__wrap").scrollTop(0),this.page=1,this.getDataAll()},stopConfirmTour(){this.invoiceConfirmTourShow=!1,this.$tours["invoiceConfirmTour"].stop(),$(".page-footer-fixed").removeClass("show-hover")},stopConfirmTour1(){this.invoiceConfirmTourShow1=!1,this.$tours["invoiceConfirmTour1"].stop(),$("#messageContainer").css("display","block")},opendrawer(t){if(this.drawertype=t,this.$showLoading(),3==t)this.drawerTitle=this.$t("invoice.exportImport"),this.showCustom=!1,this.activeName="first",this.uploadfileList=[],this.modalCustomExport=JSON.parse(this.modalCustomExportDefault),this.$apiCall("api.Invoice.exportTitle",{},t=>{if(this.$hideLoading(),"9999"==t.ErrorCode){for(var e in this.drawer=!0,t.Data.Results.default){let i={};i.key=e,i.orName=t.Data.Results.default[e],i.name=t.Data.Results.default[e],this.modalCustomExport.tags.push(i)}for(var e in t.Data.Results.titles){let i={};i.key=e,i.orName=t.Data.Results.titles[e],i.name=t.Data.Results.titles[e],this.modalCustomExport.selectedTitles.push(i)}this.modalCustomExport.tags.forEach(t=>{this.modalCustomExport.selectedTitles.some(e=>t.key==e.key)||this.modalCustomExport.unselectedTitles.unshift(t),this.modalCustomExport.selectedTitles.some(e=>{t.key==e.key&&this.$set(e,"orName",t.name)})})}else this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this)});else if(2==t)if(this.drawerTitle=this.$t("invoice.Helpcenter"),localStorage.getItem("invocieTourFlag"))this.drawer=!0,this.$hideLoading();else if(2!=this.tabActive){if(!document.querySelectorAll(".step-btn-4").length)for(let t=0;t<this.steps.length;t++)".step-btn-4"==this.steps[t].target&&(this.steps.splice(t,1),t--);this.$tours["invoiceTour"].start()}else this.drawer=!0,this.$hideLoading();else this.drawerTitle=this.$t("invoice.Orderstatistics"),this.$apiCall("api.Invoice.getSummary",{invoiceId:this.invoiceInfo.id},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.drawer=!0,this.drawerinfo=t.Data.Results):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},handleScroll(){let t=this.$refs.myScrollbar1.wrap;$(".invoice #invoiceContainer").offset().top,$(".invoice #invoiceContainer").outerHeight();t.onscroll=()=>{$(".el-popover").remove(),localStorage.getItem("invocieTourFlag")&&($(".el-scrollbar__wrap").scrollTop()>=410?$(".el-scrollbar__wrap").scrollTop()+$(".el-scrollbar__wrap").height()>=$("#invoiceContainer").height()+$(window).height()-400?this.noMore&&setTimeout(()=>{$(".table-fixed").removeClass("scrolling"),$(".invoice-top").css({display:"block",height:"0"})},100):setTimeout(()=>{$(".table-fixed").addClass("scrolling"),$(".invoice-top").css({display:"none",height:"0"})},100):setTimeout(()=>{$(".table-fixed").removeClass("scrolling"),$(".invoice-top").css("display","block"),0==$(".el-scrollbar__wrap").scrollTop()&&$(".invoice-top").css({display:"block",height:"60px"})},100)),$(".el-scrollbar__wrap").scrollTop()+$(".el-scrollbar__wrap").height()>=$("#invoiceContainer").height()-10?this.noMore&&setTimeout(()=>{$(".page-footer-fixed").css("display","none")},100):setTimeout(()=>{$(".page-footer-fixed").css("display","block")},100),$(".el-scrollbar__wrap").scrollTop()+$(".el-scrollbar__wrap").height()>=$(".el-scrollbar__view").height()-100&&this.noMore&&setTimeout(()=>{this.operateLog.length?this.nextPage():this.getOperateLog(this.invoiceInfo.id),this.getMessages(this.invoiceInfo.id)},300)}},previewInvoice(){const{href:t}=this.$router.resolve({name:"preview",query:{uniCode:this.uniCode,preview:1}});window.open(t,"_blank")},setPayment(){this.invoiceTour&&(this.$showLoading(),this.$apiCall("api.Invoice.setPayment",{invoiceId:this.invoiceInfo.id,paymentType:this.paymentType,payUrl:this.payUrl,platformRate:this.platformRate},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.$elementMessage(this.$t("invoice.successPayment"),"success"),this.getData()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))}))},getSkuInfo2(t,e,i){if(!this.invoiceTour)return;window.lazyGetSkuInfo2&&window.clearTimeout(window.lazyGetSkuInfo2);let s="popoverSkuGroup-"+e;this.invoiceData.forEach((t,e)=>{let i="popoverSkuGroup-"+e;this.$refs[i]&&this.$refs[i].doClose()}),window.lazyGetSkuInfo2=setTimeout(()=>{this.$apiCall("api.Invoice.getSameCnt",{invoiceId:this.invoiceInfo.id,customerSku:t.customerSku,type:"sku"},e=>{"9999"==e.ErrorCode?(this.$set(t,"sameCntSku",e.Data.Results.sameCnt),this.$set(t,"noneCntSku",e.Data.Results.noneCnt),e.Data.Results.sameCnt>1&&this.$refs[s]&&this.$refs[s].doShow()):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},400)},getSkuInfo(t,e,i){if(!this.invoiceTour)return;window.lazyGetSkuInfo&&window.clearTimeout(window.lazyGetSkuInfo);let s="popoverSku-"+e;this.invoiceData.forEach((t,e)=>{let i="popoverSku-"+e;this.$refs[i]&&this.$refs[i].doClose()}),window.lazyGetSkuInfo=setTimeout(()=>{this.$apiCall("api.Invoice.getSameCnt",{invoiceId:this.invoiceInfo.id,customerSku:t.customerSku,type:"sku"},e=>{"9999"==e.ErrorCode?(this.$set(t,"sameCntSku",e.Data.Results.sameCnt),this.$set(t,"noneCntSku",e.Data.Results.noneCnt),e.Data.Results.sameCnt>1&&this.$refs[s]&&this.$refs[s].doShow()):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},400)},getPriceInfo(t,e,i){if(!this.invoiceTour)return;if(window.lazyGetPriceInfo&&window.clearTimeout(window.lazyGetPriceInfo),"popoverPriceGroup"==i){let i="popoverPriceGroup-"+e;return this.invoiceData.forEach((t,e)=>{let i="popoverPriceGroup-"+e;this.$refs[i]&&this.$refs[i].doClose()}),void(t.cnt>1&&this.$refs[i]&&this.$refs[i].doShow())}let s="popoverPrice-"+e;this.invoiceData.forEach((t,e)=>{let i="popoverPrice-"+e;this.$refs[i]&&this.$refs[i].doClose()}),window.lazyGetPriceInfo=setTimeout(()=>{this.$apiCall("api.Invoice.getSameCnt",{invoiceId:this.invoiceInfo.id,customerSku:t.customerSku,type:"price"},e=>{"9999"==e.ErrorCode?(this.$set(t,"sameCntPrice",e.Data.Results.sameCnt),this.$set(t,"noneCntPrice",e.Data.Results.noneCnt),e.Data.Results.sameCnt>1&&this.$refs[s]&&this.$refs[s].doShow()):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},400)},getPriceInfo2(t,e,i){if(!this.invoiceTour)return;window.lazyGetPriceInfo2&&window.clearTimeout(window.lazyGetPriceInfo2);let s="popoverPriceGroup-"+e;this.invoiceData.forEach((t,e)=>{let i="popoverPriceGroup-"+e;this.$refs[i]&&this.$refs[i].doClose()}),window.lazyGetPriceInfo2=setTimeout(()=>{this.$apiCall("api.Invoice.getSameCnt",{invoiceId:this.invoiceInfo.id,customerSku:t.customerSku,type:"price"},e=>{"9999"==e.ErrorCode?(this.$set(t,"sameCntPrice",e.Data.Results.sameCnt),this.$set(t,"noneCntPrice",e.Data.Results.noneCnt),e.Data.Results.sameCnt>1&&this.$refs[s]&&this.$refs[s].doShow()):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},400)},selectEmoji(t){console.log(t)},toFixed(t){return t&&""!=t?Number(t).toFixed(2):"0.00"},changeShippingAmount(){this.$apiCall("api.Invoice.changeAmount",{invoiceId:this.invoiceInfo.id,shippingAmount:this.shippingAmount},t=>{"9999"==t.ErrorCode?(this.shippingAmount=t.Data.Results.shippingAmount?this.toFixed(t.Data.Results.shippingAmount):"",this.totalAmount=t.Data.Results.totalAmount?this.toFixed(t.Data.Results.totalAmount):"",this.realAmount=t.Data.Results.realAmount?this.toFixed(t.Data.Results.realAmount):"",Number(this.realAmount)<Number(this.totalAmount)&&Number(this.realAmount)>0?this.discount=this.toFixed(Number(this.totalAmount)-Number(this.realAmount)):this.discount=0):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},changeRealAmount(){if(Number(this.realAmount)>Number(this.totalAmount))return this.$elementMessage(this.$t("invoice.smallnum"),"error"),void(this.discount=0);this.$apiCall("api.Invoice.changeAmount",{invoiceId:this.invoiceInfo.id,realAmount:this.realAmount},t=>{"9999"==t.ErrorCode?(this.shippingAmount=t.Data.Results.shippingAmount?this.toFixed(t.Data.Results.shippingAmount):"",this.totalAmount=t.Data.Results.totalAmount?this.toFixed(t.Data.Results.totalAmount):"",this.realAmount=t.Data.Results.realAmount?this.toFixed(t.Data.Results.realAmount):"",Number(this.realAmount)<Number(this.totalAmount)&&Number(this.realAmount)>0?this.discount=this.toFixed(Number(this.totalAmount)-Number(this.realAmount)):this.discount=0):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},setResource(t){this.form.resource=t},setDefaultResource(){this.stopResource=1},setStopResource(t){this.stopResource=t},setStop(t,e){this.$showLoading();let i={fulfillStatus:e,invoiceId:this.invoiceInfo.id,reason:this.stopResource};if(null==t.allItems)i={...i,itemId:t.id};else{const e=[];t.allItems.forEach(t=>{"1"===t.fulfillStatus&&e.push(t.id)}),i={...i,itemIds:e}}this.$apiCall("api.Invoice.setFulfill",i,i=>{this.$hideLoading(),"9999"==i.ErrorCode?(this.itemAmount=i.Data.Results.itemAmount?this.toFixed(i.Data.Results.itemAmount):"",this.totalAmount=i.Data.Results.totalAmount?this.toFixed(i.Data.Results.totalAmount):"",this.realAmount=i.Data.Results.realAmount?this.toFixed(i.Data.Results.realAmount):"",$(".el-popover").remove(),this.$elementMessage(this.$t("invoice.successModification"),"success"),this.getCnt(this.invoiceInfo.id),null==t.allItems?this.updateSuccessOnly(t.id):(this.invoiceData=this.invoiceData.map(i=>t.customerSku===i.customerSku?{...i,fulfillStatus:e.toString()}:i),this.expands=this.expands.filter(e=>e!==t.id))):(this.$elementMessage(i.Message,"error"),"1002"!=i.ErrorCode&&"1003"!=i.ErrorCode||this.$userFailure(this))})},updateSuccessOnly(t){this.getData(),console.log(3,{invoiceId:this.invoiceInfo.id,id:t}),this.$apiCall("api.Invoice.getItems",{invoiceId:this.invoiceInfo.id,id:t},e=>{if("9999"==e.ErrorCode){if(0==e.Data.Results.length)return;this.invoiceData.forEach((i,s)=>{i.id==t&&this.invoiceData.splice(s,1,e.Data.Results[0])})}else this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this)})},changeSkuBatch(t){this.invoiceTour&&(t.sku?(2!=this.form.resource||0!=t.sameCntSku)&&(1!=this.form.resource||0!=t.noneCntSku)?(window.lazySkuBatch&&window.clearTimeout(window.lazySkuBatch),window.lazySkuBatch=setTimeout(()=>{let e={type:1==this.form.resource?"onlyNone":"batch",invoiceId:this.invoiceInfo.id,customerSku:t.customerSku,sku:t.sku,price:t.price};2==this.tabActive&&(e.fromGroup=!0,e.type="batch"),this.$apiCall("api.Invoice.setSku",e,e=>{"9999"==e.ErrorCode?($(".el-popover").remove(),this.$elementMessage(this.$t("invoice.successsetsku"),"success"),1==this.form.resource?this.invoiceData.forEach((e,i)=>{e.customerSku!=t.customerSku||e.sku||2==e.fulfillStatus||this.$set(e,"sku",t.sku)}):this.invoiceData.forEach((e,i)=>{e.customerSku==t.customerSku&&2!=e.fulfillStatus&&this.$set(e,"sku",t.sku)}),this.getCnt(this.invoiceInfo.id)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},400)):$(".el-popover").remove():this.$elementMessage(this.$t("invoice.fillsku"),"error"))},changeSkuFn(t,e,i){this.invoiceTour&&(t.sku?(window.lazySku&&window.clearTimeout(window.lazySku),window.lazySku=setTimeout(()=>{let e={type:"onlyOne",invoiceId:this.invoiceInfo.id,customerSku:t.customerSku,sku:t.sku,itemId:t.id,price:t.price};2==this.tabActive&&(e.fromGroup=!0,e.type="batch"),this.$apiCall("api.Invoice.setSku",e,e=>{"9999"==e.ErrorCode?(this.getCnt(this.invoiceInfo.id),this.invoiceData.forEach((e,i)=>{e.id==t.id&&e.allItems&&e.allItems.length&&2==this.tabActive&&this.updateAllSuccess(i,"sku")}),"close"==i&&$(".el-popover").remove()):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},400)):this.$elementMessage(this.$t("invoice.fillsku"),"error"))},changeSkuFnBySub(t){this.invoiceTour&&(t.sku?(window.lazySkuSub&&window.clearTimeout(window.lazySkuSub),window.lazySkuSub=setTimeout(()=>{let e={type:"onlyOne",invoiceId:this.invoiceInfo.id,customerSku:t.customerSku,sku:t.sku,itemId:t.id,price:t.price};this.$apiCall("api.Invoice.setSku",e,t=>{"9999"==t.ErrorCode?this.getCnt(this.invoiceInfo.id):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},400)):this.$elementMessage(this.$t("invoice.fillsku"),"error"))},changePriceBatch(t){this.invoiceTour&&t.price&&((2!=this.formPrice.resource||0!=t.sameCntPrice)&&(1!=this.formPrice.resource||0!=t.noneCntPrice)?(window.lazyPriceBatch&&window.clearTimeout(window.lazyPriceBatch),window.lazyPriceBatch=setTimeout(()=>{let e={type:1==this.formPrice.resource?"onlyNone":"batch",invoiceId:this.invoiceInfo.id,customerSku:t.customerSku,price:t.price,sku:t.sku};2==this.tabActive&&(e.fromGroup=!0,e.type="batch"),this.$apiCall("api.Invoice.setPrice",e,e=>{"9999"==e.ErrorCode?($(".el-popover").remove(),this.$elementMessage(this.$t("invoice.successsetprice"),"success"),1==this.formPrice.resource?this.invoiceData.forEach((e,i)=>{e.customerSku!=t.customerSku||e.price||2==e.fulfillStatus||(this.$set(e,"price",Number(t.price).toFixed(2)),e.price?2!=e.fulfillStatus?this.$set(e,"amount",(Number(e.quantity)*Number(e.price)).toFixed(2)):this.$set(e,"amount","0.00"):this.$set(e,"amount",""))}):this.invoiceData.forEach((e,i)=>{e.customerSku==t.customerSku&&2!=e.fulfillStatus&&(this.$set(e,"price",Number(t.price).toFixed(2)),e.price?2!=e.fulfillStatus?this.$set(e,"amount",(Number(e.quantity)*Number(e.price)).toFixed(2)):this.$set(e,"amount","0.00"):this.$set(e,"amount",""))}),this.itemAmount=e.Data.Results.itemAmount?this.toFixed(e.Data.Results.itemAmount):"",this.totalAmount=e.Data.Results.totalAmount?this.toFixed(e.Data.Results.totalAmount):"",this.realAmount=e.Data.Results.realAmount?this.toFixed(e.Data.Results.realAmount):"",this.getCnt(this.invoiceInfo.id)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},400)):$(".el-popover").remove())},changePriceFn(t,e,i){this.expands.length&&(this.expands=[]),this.invoiceTour&&t.price&&(window.lazyPrice&&window.clearTimeout(window.lazyPrice),window.lazyPrice=setTimeout(()=>{let e={type:"onlyOne",invoiceId:this.invoiceInfo.id,customerSku:t.customerSku,price:t.price,itemId:t.id,sku:t.sku};2==this.tabActive&&(e.fromGroup=!0,e.type="batch"),this.$apiCall("api.Invoice.setPrice",e,e=>{"9999"==e.ErrorCode?(this.invoiceData.forEach((e,i)=>{e.id==t.id&&(2!=e.fulfillStatus&&(this.$set(e,"price",Number(t.price).toFixed(2)),e.price?2!=e.fulfillStatus?this.$set(e,"amount",(Number(e.quantity)*Number(e.price)).toFixed(2)):this.$set(e,"amount","0.00"):this.$set(e,"amount","")),e.allItems&&e.allItems.length&&2==this.tabActive&&this.updateAllSuccess(i,"price"))}),this.itemAmount=e.Data.Results.itemAmount?this.toFixed(e.Data.Results.itemAmount):"",this.totalAmount=e.Data.Results.totalAmount?this.toFixed(e.Data.Results.totalAmount):"",this.realAmount=e.Data.Results.realAmount?this.toFixed(e.Data.Results.realAmount):"",this.getCnt(this.invoiceInfo.id),"close"==i&&$(".el-popover").remove()):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},400))},changePriceTotalFn(t,e){this.invoiceTour&&(window.lazyPriceTotal&&window.clearTimeout(window.lazyPriceTotal),window.lazyPriceTotal=setTimeout(()=>{let e={type:"onlyOne",invoiceId:this.invoiceInfo.id,customerSku:t.customerSku,totalPrice:t.amount,itemId:t.id,sku:t.sku};this.$apiCall("api.Invoice.setPrice",e,e=>{"9999"==e.ErrorCode?(this.invoiceData.forEach((i,s)=>{i.id==t.id&&2!=i.fulfillStatus&&(this.$set(i,"price",Number(e.Data.Results.price).toFixed(2)),i.price?2!=i.fulfillStatus?this.$set(i,"amount",(Number(i.quantity)*Number(i.price)).toFixed(2)):this.$set(i,"amount","0.00"):this.$set(i,"amount",""))}),this.itemAmount=e.Data.Results.itemAmount?this.toFixed(e.Data.Results.itemAmount):"",this.totalAmount=e.Data.Results.totalAmount?this.toFixed(e.Data.Results.totalAmount):"",this.realAmount=e.Data.Results.realAmount?this.toFixed(e.Data.Results.realAmount):"",this.getCnt(this.invoiceInfo.id)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},400))},changePriceTotalFnBySub(t,e){let i=t.$index;window.lazyPriceTotalSub&&window.clearTimeout(window.lazyPriceTotalSub),window.lazyPriceTotalSub=setTimeout(()=>{let t={type:"onlyOne",invoiceId:this.invoiceInfo.id,customerSku:e.customerSku,totalPrice:e.amount,itemId:e.id,sku:e.sku};this.$apiCall("api.Invoice.setPrice",t,t=>{"9999"==t.ErrorCode?(this.invoiceData[i].allItems.forEach((i,s)=>{i.id==e.id&&(this.$set(i,"price",Number(t.Data.Results.price).toFixed(2)),i.price?2!=i.fulfillStatus?this.$set(i,"amount",(Number(i.quantity)*Number(i.price)).toFixed(2)):this.$set(i,"amount","0.00"):this.$set(i,"amount",""))}),this.itemAmount=t.Data.Results.itemAmount?this.toFixed(t.Data.Results.itemAmount):"",this.totalAmount=t.Data.Results.totalAmount?this.toFixed(t.Data.Results.totalAmount):"",this.realAmount=t.Data.Results.realAmount?this.toFixed(t.Data.Results.realAmount):"",this.getCnt(this.invoiceInfo.id),this.updateSuccess(i)):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},400)},updateAllSuccess(t,e){this.invoiceData[t].allItems.map(i=>{2!=i.fulfillStatus&&("sku"==e?this.$set(i,"sku",this.invoiceData[t].sku):(this.$set(i,"price",this.invoiceData[t].price),i.price?2!=i.fulfillStatus?this.$set(i,"amount",(Number(i.quantity)*Number(i.price)).toFixed(2)):this.$set(i,"amount","0.00"):this.$set(i,"amount","")))})},setPriceResource(t){this.formPrice.resource=t},removelogo(){this.pageLoading=!0,this.$apiCall("api.User.changeByUser",{invoiceId:this.invoiceInfo.id,logo:""},t=>{this.pageLoading=!1,"9999"==t.ErrorCode?(this.$elementMessage(this.$t("invoice.successdeleted"),"success"),this.getData()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},handleUploadChange(t){this.uploadfileList=[],this.uploadfileList.push(t)},submitUpload(){if("fourth"==this.exportInvoiceType)return this.drawer=!1,void setTimeout(()=>{this.$router.push({name:"importData",query:{rid:this.invoiceInfo.relationshipId,id:this.invoiceInfo.id}}),localStorage.removeItem("fromPageReload")},100);if(!this.uploadfileList.length)return void this.$elementMessage(this.$t("invoice.selectfile"),"error");this.uploadLoading=!0;let t=this.uploadfileList[0].raw;0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let e=t=>{document.getElementById("ifilePro").src=t},i="api.Invoice.deliverImport",s={invoiceId:this.invoiceInfo.id,"@file":t};this.$apiCall(i,s,t=>{this.uploadLoading=!1,"9999"==t.ErrorCode?(this.drawer=!1,this.$elementMessage(this.$t("invoice.successImport"),"success"),e(t.Data.Results.file),this.page=1,this.getDataAll()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},uploadSectionFile2(t){let e=t.file;const i=e.size/1024/1024<.5;i?this.$apiCall("api.User.uploadImg",{"@file":e},t=>{"9999"==t.ErrorCode?this.fileList.push({name:"test",url:t.Data.Results.imgUrl}):(this.pageLoading=!1,this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))}):this.$message.error(this.$t("invoice.size500"))},uploadSectionFile(t){let e=t.file;const i=e.size/1024/1024<.5;i?(this.pageLoading=!0,this.$apiCall("api.User.uploadImg",{"@file":e},t=>{"9999"==t.ErrorCode?this.changeLogoByUser(t.Data.Results.imgUrl):(this.pageLoading=!1,this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})):this.$message.error(this.$t("invoice.size500picture"))},changeLogoByUser(t){this.$apiCall("api.User.changeByUser",{invoiceId:this.invoiceInfo.id,logo:t},t=>{this.pageLoading=!1,"9999"==t.ErrorCode?(this.$elementMessage(this.$t("invoice.successModification"),"success"),this.getData()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},tabcChange(t){switch(this.invoiceData=[],this.tabActive=Number(t),t=Number(t),this.getCnt(this.invoiceInfo.id),t){case 1:this.type="all",this.showType=1;break;case 2:this.type="sku";break;case 3:this.tabActive=1,this.type="notBind",this.showType=1;break;case 4:this.type="notDeliver",this.showType=1;break;case 5:this.type="noQuantity",this.showType=1;break;case 6:this.tabActive=2,this.type="groupNotBind",this.showType=1;break;case 7:this.type="noQuantity",this.showType=1;break;case 8:this.type="deliver",this.showType=1;break;case 9:this.type="abnormal",this.showType=1;break;default:break}this.page=1,this.getInvoiceData(this.invoiceInfo.id)},changeTabByTip(){1==this.tabActive?this.type="notBind":this.type="groupNotBind",this.invoiceData=[],this.page=1,this.getInvoiceData(this.invoiceInfo.id)},onCopy(t){this.$elementMessage(this.$t("successfullyToClipboard"),"success")},onError(t){this.$elementMessage(this.$t("failedToClipboard"),"error")},load(){let t=$(".el-scrollbar__wrap").scrollTop();if(1==this.page)return;if(!this.invoiceInfo)return;this.tabActive;if(!this.getListFlag)return;if(this.page>this.totalPage)return;if(!this.invoiceTour)return;this.loading=!0,this.getListFlag=!1;let e={invoiceId:this.invoiceInfo.id,type:this.type,page:this.page,rowsPerPage:this.rowsPerPage};"abnormal"==this.type&&(e.type="all",e.isAbnormal=1),this.searchTrack&&(e.trackNumber=this.searchNameInput),this.searchName&&(e.keySearch=this.searchNameInput),this.$apiCall("api.Invoice.getItems",e,e=>{$(".el-scrollbar__wrap").animate({scrollTop:t},10),this.getListFlag=!0,"9999"==e.ErrorCode?(this.totalPage=e.Data.Pagination.totalPage,this.totalCount=e.Data.Pagination.totalCount,e.Data.Results.forEach((t,e)=>{t.price?2!=t.fulfillStatus?this.$set(t,"amount",(Number(t.quantity)*Number(t.price)).toFixed(2)):this.$set(t,"amount","0.00"):this.$set(t,"amount",""),null==t.shippingFee&&this.$set(t,"shippingFee",void 0),this.invoiceData.push(t)}),setTimeout(()=>{this.loading=!1,this.page++},300)):(this.loading=!1,this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},isCollapseFn(){this.isCollapse=!this.isCollapse},handleOpen(t,e){console.log(t,e)},handleClose(t,e){console.log(t,e)},getInvoiceData(t,e){let i={invoiceId:t,type:this.type,page:this.page,rowsPerPage:this.rowsPerPage};"abnormal"==this.type&&(i.type="all",i.isAbnormal=1),this.searchTrack&&(i.trackNumber=e),this.searchName&&(i.keySearch=e),this.$showLoading(),this.$apiCall("api.Invoice.getItems",i,t=>{if(this.$nextTick(()=>{this.$hideLoading()}),this.loading=!1,"9999"==t.ErrorCode){if(this.invoiceData=[],this.transferData=[],this.totalPage=t.Data.Pagination.totalPage,this.totalCount=t.Data.Pagination.totalCount,1==this.totalPage&&(this.getOperateLog(this.invoiceInfo.id),this.getMessages(this.invoiceInfo.id)),t.Data.Results.forEach((t,e)=>{t.allItems&&t.allItems.length>0&&(this.$set(t,"displayItems",t.allItems.slice(0,50)),this.$set(t,"displayItemsPage",1)),this.$set(t,"previewList",[]),t.imgUrl&&t.previewList.push(t.imgUrl),t.price?2!=t.fulfillStatus?this.$set(t,"amount",(Number(t.quantity)*Number(t.price)).toFixed(2)):this.$set(t,"amount","0.00"):this.$set(t,"amount",""),null==t.shippingFee&&this.$set(t,"shippingFee",void 0),this.invoiceData.push(t)}),this.invoiceData.forEach((t,e)=>{this.transferData.push({label:""+t.sku,key:t.id,...t})}),!localStorage.getItem("invocieTourFlag")&&2!=this.tabActive){let t=[];t.push(this.invoiceData.shift()),this.invoiceData=t,setTimeout(()=>{if(!document.querySelectorAll(".step-btn-4").length)for(let t=0;t<this.steps.length;t++)".step-btn-4"==this.steps[t].target&&(this.steps.splice(t,1),t--);this.$tours["invoiceTour"].start()},1e3)}this.$refs.myScrollbar1.wrap.scrollTop=0}else this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this)})},getCnt(t){this.$apiCall("api.Invoice.getItemsCnt",{invoiceId:t},t=>{"9999"==t.ErrorCode?(this.invoiceCnt=t.Data.Results,this.invoiceCnt.notBindCnt>0&&(this.stepActive=2),0==this.invoiceCnt.notBindCnt&&(this.stepActive=3),1==this.invoiceInfo.payStatus&&(this.stepActive=4),0==this.invoiceCnt.notDeliverCnt&&(this.stepActive=5)):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},groupBy(t){for(var e={},i=[],s=0;s<t.length;s++){var o=t[s];if(e[o.date])for(var a=0;a<i.length;a++){var n=i[a];if(n.date==o.date){n.listInfo.push(o);break}}else i.push({date:o.date,listInfo:[o]}),e[o.date]=o}return i},getOperateLog(t){let e={invoiceId:t};"en"==this.$i18n.locale&&(e.lang="EN"),this.$apiCall("api.Invoice.getOperateLog",e,t=>{"9999"==t.ErrorCode?(this.operateLog=t.Data.Results,this.operateLog.forEach(t=>{this.$set(t,"date",this.$moment(1e3*t.time).format("MMMM Do")),this.$set(t,"datetime",this.$moment(1e3*t.time).format("h:mm a"))}),this.totalPageLog=Math.ceil(this.operateLog.length/this.pageSizeLog),this.totalPageLog=0==this.totalPageLog?1:this.totalPageLog,this.setCurrentPageData()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},setCurrentPageData(){this.currentPageLog,this.pageSizeLog;let t=this.currentPageLog*this.pageSizeLog;this.currentPageDataLog=this.groupBy(this.operateLog.slice(0,t))},nextPage(){this.getLogFlag&&this.currentPageLog!=this.totalPageLog&&(this.getLogFlag=!1,this.currentPageLog++,this.setCurrentPageData(),this.getLogFlag=!0)},getMessages(t){this.getMsgFlag&&(this.msgpage>this.msgtotalPage||(this.getMsgFlag=!1,this.$apiCall("api.Invoice.getMessages",{invoiceId:t,page:this.msgpage,rowsPerPage:this.msgrowsPerPage},t=>{this.getMsgFlag=!0,"9999"==t.ErrorCode?(this.msgtotalPage=t.Data.Pagination.totalPage,this.msgtotalCount=t.Data.Pagination.totalCount,t.Data.Results.forEach((t,e)=>{this.messages.push(t)}),this.$moment().locale("en"),this.messages.forEach(t=>{this.$set(t,"date",this.$moment(t.timeCreated).format("MMMM Do")),this.$set(t,"datetime",this.$moment(t.timeCreated).format("h:mm a")),this.$set(t,"vname",t.vendorName?t.vendorName.substr(0,1):"n"),this.$set(t,"cname",t.customerName?t.customerName.substr(0,1):"n")}),this.currentmessages=this.groupBy(this.messages),this.currentmessages.forEach(t=>{t.listInfo.forEach(t=>{this.$set(t,"content",this.forMatMsg(t.content))})}),this.msgpage++):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})))},forMatMsg(t){let e=t.split("emoji"),i="";return e.length>0?e.forEach(t=>{""!=t&&(0===t.indexOf(":")&&t.lastIndexOf(":")===t.length-1&&(t=$.emojiarea.createIcon($.emojiarea.icons[t])),i+=`<span>${t}</span>`)}):i=`<span>${t}</span>`,i},addMessage(){let t=[];this.fileList.length&&this.fileList.forEach(e=>{t.push(e.url)});let e=$(".emoji-wysiwyg-editor").html();if(e||this.fileList.length){if(e){let t=/<img.*?(?:>|\/>)/gi,i=/alt=[\'\"]?([^\'\"]*)[\'\"]?/i,s=e.match(t);if(s)for(let o=0;o<s.length;o++){let t=s[o].match(i);t&&t[1]&&(e=e.replace(s[o],"emoji"+t[1]+"emoji"))}else;}this.$showLoading(),this.$apiCall("api.Invoice.addMessage",{invoiceId:this.invoiceInfo.id,content:e,images:t},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.$elementMessage(this.$t("invoice.messageSend"),"success"),this.msgContent="",$(".emoji-wysiwyg-editor").empty(),this.fileList=[],this.msgpage=1,this.messages=[],this.$apiCall("api.Invoice.getMessages",{invoiceId:this.invoiceInfo.id,page:this.msgpage,rowsPerPage:this.msgrowsPerPage},t=>{"9999"==t.ErrorCode?(this.msgtotalPage=t.Data.Pagination.totalPage,this.msgtotalCount=t.Data.Pagination.totalCount,t.Data.Results.forEach((t,e)=>{this.messages.push(t)}),this.$moment().locale("en"),this.messages.forEach(t=>{this.$set(t,"date",this.$moment(t.timeCreated).format("MMMM Do")),this.$set(t,"datetime",this.$moment(t.timeCreated).format("h:mm a")),this.$set(t,"vname",t.vendorName?t.vendorName.substr(0,1):"n"),this.$set(t,"cname",t.customerName?t.customerName.substr(0,1):"n")}),this.currentmessages=this.groupBy(this.messages),this.currentmessages.forEach(t=>{t.listInfo.forEach(t=>{this.$set(t,"content",this.forMatMsg(t.content))})}),this.msgpage++):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})}else this.$elementMessage(this.$t("invoice.messageFill"),"error")},removeMsgImg(t){this.fileList.splice(t,1)},openLogin(){this.loginShow=!0},getDataAll(){this.$showLoading(),$(".el-scrollbar__wrap").scrollTop(0),this.page=1,this.showLogo=!1,this.logoUrl="",this.$apiCall("api.Invoice.getOne",{uniCode:this.uniCode},t=>{if("9999"==t.ErrorCode){if(this.invoiceInfo=t.Data.Results,this.getCntCountry(),this.showItemPrice="1"==this.invoiceInfo.showItemPrice,"20010699"==this.invoiceInfo.code)this.$hideLoading(),this.loginShow=!0,this.loginRId=this.invoiceInfo,this.loginType=3;else if("20010698"==this.invoiceInfo.code)this.$hideLoading(),this.loginShow=!0,this.loginRId=this.invoiceInfo,this.loginType=4;else{let t=localStorage.getItem("apiUserId")?localStorage.getItem("apiUserId"):"",e=localStorage.getItem("apiUserToken")?localStorage.getItem("apiUserToken"):"";t&&e?(1==this.page&&this.getInvoiceData(this.invoiceInfo.id),this.getCnt(this.invoiceInfo.id),this.getRelationship(),this.showTopTip=!0):(this.iframeId!==this.invoiceInfo.customerId&&(this.$hideLoading(),this.loginShow=!0,this.loginRId=this.invoiceInfo,Number(this.invoiceInfo.vendorId)>0?this.loginType=1:this.loginType=2),this.getInvoiceData(this.invoiceInfo.id))}this.shopName=this.invoiceInfo.shopName?this.invoiceInfo.shopName:"",this.shareTitle=this.invoiceInfo.remark?this.invoiceInfo.remark.title:"",this.shareDesc=this.invoiceInfo.remark?this.invoiceInfo.remark.desc:"",this.invoiceInfo&&this.invoiceInfo.logo&&(this.showLogo=!0,this.logoUrl=this.invoiceInfo.logo),this.payUrl=this.invoiceInfo.payUrl?this.invoiceInfo.payUrl:"",this.platformRate=this.invoiceInfo.platformRate&&this.invoiceInfo.platformRate>0?this.invoiceInfo.platformRate:"",this.paymentType=this.invoiceInfo.paymentType?this.invoiceInfo.paymentType:"",this.shippingAmount=this.invoiceInfo.shippingAmount?this.toFixed(this.invoiceInfo.shippingAmount):"",this.itemAmount=this.invoiceInfo.itemAmount?this.toFixed(this.invoiceInfo.itemAmount):"",this.totalAmount=this.invoiceInfo.totalAmount?this.toFixed(this.invoiceInfo.totalAmount):"",this.realAmount=this.invoiceInfo.realAmount?this.toFixed(this.invoiceInfo.realAmount):""}else this.$hideLoading(),this.$elementMessage(t.Message,"error")})},getData(){this.showLogo=!1,this.logoUrl="",this.$apiCall("api.Invoice.getOne",{uniCode:this.uniCode},t=>{"9999"==t.ErrorCode?(this.invoiceInfo=t.Data.Results,this.shopName=this.invoiceInfo.shopName?this.invoiceInfo.shopName:"",this.shareTitle=this.invoiceInfo.remark?this.invoiceInfo.remark.title:"",this.shareDesc=this.invoiceInfo.remark?this.invoiceInfo.remark.desc:"",this.invoiceInfo.logo?(this.showLogo=!0,this.logoUrl=this.invoiceInfo.logo):(this.showLogo=!1,this.logoUrl=""),this.payUrl=this.invoiceInfo.payUrl?this.invoiceInfo.payUrl:"",this.platformRate=this.invoiceInfo.platformRate&&this.invoiceInfo.platformRate>0?this.invoiceInfo.platformRate:"",this.paymentType=this.invoiceInfo.paymentType?this.invoiceInfo.paymentType:"",this.shippingAmount=this.invoiceInfo.shippingAmount?this.toFixed(this.invoiceInfo.shippingAmount):"",this.itemAmount=this.invoiceInfo.itemAmount?this.toFixed(this.invoiceInfo.itemAmount):"",this.totalAmount=this.invoiceInfo.totalAmount?this.toFixed(this.invoiceInfo.totalAmount):"",this.realAmount=this.invoiceInfo.realAmount?this.toFixed(this.invoiceInfo.realAmount):""):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},getRelationship(){this.$apiCall("api.Relationship.getByName",{},t=>{"9999"==t.ErrorCode?this.relationship=t.Data.Results:(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},handleChange(t,e){setTimeout(()=>{this.$apiCall("api.Invoice.changeQuantity",{invoiceId:this.invoiceInfo.id,itemId:t.id,quantity:t.quantity},e=>{"9999"==e.ErrorCode?(this.itemAmount=e.Data.Results.itemAmount?this.toFixed(e.Data.Results.itemAmount):"",this.totalAmount=e.Data.Results.totalAmount?this.toFixed(e.Data.Results.totalAmount):"",this.realAmount=e.Data.Results.realAmount?this.toFixed(e.Data.Results.realAmount):"",this.invoiceData.map(e=>{t.id==e.id&&(this.$set(e,"quantity",Number(t.quantity)),e.price?2!=e.fulfillStatus?this.$set(e,"amount",(Number(e.quantity)*Number(e.price)).toFixed(2)):this.$set(e,"amount","0.00"):this.$set(e,"amount",""))}),this.getCnt(this.invoiceInfo.id)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this))})},1e3)},handleChangeBySub(t,e,i){let s=t.$index;setTimeout(()=>{this.$apiCall("api.Invoice.changeQuantity",{invoiceId:this.invoiceInfo.id,itemId:e.id,quantity:e.quantity},t=>{"9999"==t.ErrorCode?(this.itemAmount=t.Data.Results.itemAmount?this.toFixed(t.Data.Results.itemAmount):"",this.totalAmount=t.Data.Results.totalAmount?this.toFixed(t.Data.Results.totalAmount):"",this.realAmount=t.Data.Results.realAmount?this.toFixed(t.Data.Results.realAmount):"",this.invoiceData[s].allItems.map(t=>{e.id==t.id&&this.$set(t,"quantity",Number(e.quantity))}),this.getCnt(this.invoiceInfo.id),this.updateSuccess(s)):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},1e3)},changePriceFnBySub(t,e){if(!e.price)return;let i=t.$index;window.lazyPriceSub&&window.clearTimeout(window.lazyPriceSub),window.lazyPriceSub=setTimeout(()=>{let t={type:"onlyOne",invoiceId:this.invoiceInfo.id,customerSku:e.customerSku,price:e.price,itemId:e.id,sku:e.sku};this.$apiCall("api.Invoice.setPrice",t,t=>{"9999"==t.ErrorCode?(this.invoiceData[i].allItems.forEach((t,i)=>{t.id==e.id&&(this.$set(t,"price",Number(e.price).toFixed(2)),t.price?2!=t.fulfillStatus?this.$set(t,"amount",(Number(t.quantity)*Number(t.price)).toFixed(2)):this.$set(t,"amount","0.00"):this.$set(t,"amount",""))}),this.itemAmount=t.Data.Results.itemAmount?this.toFixed(t.Data.Results.itemAmount):"",this.totalAmount=t.Data.Results.totalAmount?this.toFixed(t.Data.Results.totalAmount):"",this.realAmount=t.Data.Results.realAmount?this.toFixed(t.Data.Results.realAmount):"",this.getCnt(this.invoiceInfo.id),this.updateSuccess(i)):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},400)},updateSuccess(t){let e=[],i=[],s=[],o=0,a=0,n=0,r=0;this.invoiceData[t].allItems.map(t=>{t.price?2!=t.fulfillStatus?this.$set(t,"amount",(Number(t.quantity)*Number(t.price)).toFixed(2)):this.$set(t,"amount","0.00"):this.$set(t,"amount",""),e.push(Number(t.price)),i.push(Number(t.amount)),s.push(Number(t.quantity))}),i.forEach(t=>{o+=t}),s.forEach(t=>{a+=t}),n=Math.min(...e),r=Math.max(...e),this.$set(this.invoiceData[t],"minPrice",Number(n)),this.$set(this.invoiceData[t],"maxPrice",Number(r)),this.$set(this.invoiceData[t],"quantity",Number(a)),this.$set(this.invoiceData[t],"amount",Number(o))},addCustomer(){this.addCustomerOpen=!0,this.formNewcustomer.name=this.customerName?this.customerName:""},submitAddcustomer(t){this.$refs[t].validate(t=>{if(!t)return!1;this.$showLoading(".addCustomer"),this.$apiCall("api.Relationship.addByVendor",{name:this.formNewcustomer.name,remark:this.formNewcustomer.remark,email:this.formNewcustomer.email},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.$elementMessage(this.$t("invoice.addSuccess"),"success"),this.addCustomerOpen=!1,this.getData()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})})},editCompany(){this.editCompanyInfoOpen=!0,this.formEditCompany.name=this.invoiceInfo.vendorName?this.invoiceInfo.vendorName:"",this.formEditCompany.address=this.invoiceInfo.address?this.invoiceInfo.address:""},submitEditCompany(t){this.$refs[t].validate(t=>{if(!t)return!1;this.$showLoading(".editCustomer"),this.$apiCall("api.User.changeByUser",{invoiceId:this.invoiceInfo.id,name:this.formEditCompany.name,address:this.formEditCompany.address},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.$elementMessage(this.$t("invoice.successModification"),"success"),this.editCompanyInfoOpen=!1,this.getData()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})})},editCompanyByInput(){window.editCompany&&window.clearTimeout(window.editCompany),window.editCompany=setTimeout(()=>{this.$showLoading(),this.$apiCall("api.User.changeByUser",{invoiceId:this.invoiceInfo.id,name:this.editCompanyName,address:this.editCompanyAddress},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.$elementMessage(this.$t("invoice.successModification"),"success"),this.getData()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},400)},editCustomer(){this.editCustomerOpen=!0,this.formEditcustomer.name=this.invoiceInfo.customerName?this.invoiceInfo.customerName:"",this.formEditcustomer.email=this.invoiceInfo.customerEmail?this.invoiceInfo.customerEmail:"",this.formEditcustomer.remark=this.invoiceInfo.customerRemark?this.invoiceInfo.customerRemark:"",this.formEditcustomer.id=this.invoiceInfo.relationshipId},submitEditcustomer(t){this.$refs[t].validate(t=>{if(!t)return!1;this.$showLoading(".editCustomer"),this.$apiCall("api.Relationship.changeByVendor",{relationshipId:this.formEditcustomer.id,name:this.formEditcustomer.name,remark:this.formEditcustomer.remark,email:this.formEditcustomer.email},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.$elementMessage(this.$t("invoice.successCustomer"),"success"),this.editCustomerOpen=!1,this.getData()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})})},changeCustomer(){$(".el-popover").remove(),$("body").off(),this.changeCustomerStatus=!this.changeCustomerStatus,this.customerName="",setTimeout(()=>{this.$refs.customerAutocomplete.focus()},300)},selectCustomer(t){this.$showLoading(),this.$apiCall("api.Invoice.changeCustomer",{invoiceId:this.invoiceInfo.id,relationshipId:t.id},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.$refs.popoverCustomer.doClose(),this.$elementMessage(this.$t("invoice.successChange"),"success"),this.getData()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},changeCustomerName(){window.lazy&&window.clearTimeout(window.lazy),window.lazy=setTimeout(()=>{this.$apiCall("api.Relationship.getByName",{name:this.customerName},t=>{"9999"==t.ErrorCode?this.relationship=t.Data.Results:(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},400)},tableRowClassName({row:t,rowIndex:e}){return this.invoiceData[e]&&2==this.invoiceData[e].fulfillStatus?"warning-row":""},tableRowClassName2({row:t,rowIndex:e}){return this.invoiceData[e]&&2==this.invoiceData[e].fulfillStatus?this.invoiceData[e].allItems&&this.invoiceData[e].allItems.length>0?"showrow warning-row":"hiderow warning-row":this.invoiceData[e].allItems&&this.invoiceData[e].allItems.length>0?"showrow":"hiderow"},getCellClass({row:t,column:e,rowIndex:i,columnIndex:s}){if(0===i)return 0==s?"step-sku-1":3==s?"step-price-2":""},getRowClass({row:t,column:e,rowIndex:i,columnIndex:s}){if(0===i)return 0==s?"padding-left:10px;text-align:left;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":1==s?"text-align:left;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":4==s||5==s?"padding-right:10px;text-align:right;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":"text-align:center;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;"},getRowClass3({row:t,column:e,rowIndex:i,columnIndex:s}){if(0===i)return 0==s?"padding-left:10px;text-align:left;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":1==s||2==s?"text-align:left;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":4==s||5==s?"padding-right:10px;text-align:right;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;":"text-align:center;background:#43467F;color:#fff;font-weight:600;white-space:nowrap;border-right: 0;"},cellStyle({row:t,column:e,rowIndex:i,columnIndex:s}){return 0===s?"padding-left:10px;text-align:left;":4==s||5==s?"padding-right:10px;text-align:right;":"text-align:center;"},getRowClass2({row:t,column:e,rowIndex:i,columnIndex:s}){if(0===i)return 0==s?"padding-left:10px;text-align:left;white-space:nowrap;font-weight: normal;font-size: 12px;color: #303133;border-right:1px solid rgb(217, 220, 239);background: rgb(233, 233, 235);":1==s?"text-align:left;white-space:nowrap;font-weight: normal;font-size: 12px;color: #303133;border-right:1px solid rgb(217, 220, 239);background: rgb(233, 233, 235);":4==s?"padding-right:10px;text-align:right;white-space:nowrap;font-weight: normal;font-size: 12px;color: #303133;background: rgb(233, 233, 235);":"text-align:center;white-space:nowrap;font-weight: normal;font-size: 12px;color: #303133;border-right:1px solid rgb(217, 220, 239);background: rgb(233, 233, 235);"},cellStyle2({row:t,column:e,rowIndex:i,columnIndex:s}){return 0===s?"padding-left:10px;text-align:left;":4==s?"padding-right:10px;text-align:right;border-right:none;":"text-align:center;"},commitOtherERP(){if(""===this.setOtherERPDialog.contents)return this.$message({message:this.$t("ticket.issueCannotEmpty"),type:"error"}),!1;this.setOtherERPDialog.loading=!0,this.$apiCall("api.Comment.addByUser",{contents:this.setOtherERPDialog.contents,attach:this.setOtherERPDialog.attach},t=>{this.setOtherERPDialog.loading=!1,9999==t.ErrorCode?(this.setOtherERPDialog.isShow=!1,this.setLotPriceDialog.isShow=!1,this.setOtherERPDialog.contents="",this.$message({message:"我们已收到您的留言！我们将尽快在“我的OurMall”>>“客服支持”页面回复您。",type:"success"})):this.$message({message:t.Message,type:"error"})})},handleChangeOtherERPDialog(t){this.setOtherERPDialog.loading=!0,this.setOtherERPDialog.uploadLoading=!0,this.$apiCall("api.Comment.uploadAttach",{"@file":t.raw},t=>{this.setOtherERPDialog.loading=!1,this.setOtherERPDialog.uploadLoading=!1,"9999"==t.ErrorCode?this.setOtherERPDialog.attach.push(t.Data.Results.url):this.$elementMessage(t.Message,"error")})},handleRemoveOtherERPDialog(t,e){e.forEach((e,i)=>{e.name==t.name&&this.setOtherERPDialog.attach.splice(i,1)})},changeLang(t){t!=this.$i18n.locale&&(this.$i18n.locale=t,localStorage.setItem("ourmallVendorLang",t),document.title=this.$t(this.$route.meta.title)+"- OurMall Dropshipping App")},setShippingFee(t){let e={invoiceId:this.invoiceInfo.id,itemId:t.id,shippingFee:t.shippingFee||0};this.$apiCall("api.Invoice.setShippingFee",e,e=>{if("9999"==e.ErrorCode){let i=e.Data.Results;this.$set(t,"shippingFee",i.shippingFee),this.realAmount=i.realAmount,this.shippingAmount=i.shippingAmount,this.totalAmount=i.totalAmount}else this.$elementMessage(e.Message,"error")})},itemTotalAmount(t){return(Number(t.quantity)*Number(t.price)+(isNaN(t.shippingFee)?0:Number(t.shippingFee))).toFixed(2)},openSetPayment(){this.dialogSetPayment=JSON.parse(this.dialogSetPaymentDefault),this.dialogSetPayment.acceptPayment=this.invoiceInfo.acceptPayment?this.invoiceInfo.acceptPayment.split(","):[],this.dialogSetPayment.payment=Number(this.invoiceInfo.paymentType),this.dialogSetPayment.payUrl=this.invoiceInfo.payUrl,this.dialogSetPayment.isShow=!0},saveSetPayment(){if(!this.dialogSetPayment.payment)return this.$elementMessage("请选择一个付款方式","error"),!1;let t=this.dialogSetPayment.payUrl;t&&"http://"!=t.substr(0,7).toLowerCase()&&"https://"!=t.substr(0,8).toLowerCase()&&(t="https://"+t),this.dialogSetPayment.loading=!0,this.$apiCall("api.Invoice.setPayment",{invoiceId:this.invoiceInfo.id,paymentType:this.dialogSetPayment.payment,payUrl:t},t=>{this.dialogSetPayment.loading=!1,"9999"==t.ErrorCode?(this.dialogSetPayment.isShow=!1,this.$elementMessage(this.$t("invoice.successPayment"),"success"),this.getData()):this.$elementMessage(t.Message,"error")})},setPriceConfirm(){this.$confirm(this.$t("invoice.是否要确认完成报价?"),"",{confirmButtonText:this.$t("invoice.确定"),cancelButtonText:this.$t("invoice.取消"),type:"warning"}).then(()=>{this.$showLoading(),this.$apiCall("api.Invoice.setPriceConfirm",{invoiceId:this.invoiceInfo.id},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.$elementMessage(this.$t("invoice.确认完成报价成功"),"success"),this.getData()):this.$elementMessage(t.Message,"error")})})},setRestore(t){this.$confirm("删除后可在托管店铺中重新生成, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$showLoading(),this.$apiCall("api.Invoice.itemRestore",{itemId:t.id},e=>{this.$hideLoading(),"9999"==e.ErrorCode&&(this.getCnt(this.invoiceInfo.id),this.invoiceData.some((e,i)=>{if(e.id==t.id)return this.invoiceData.splice(i,1),!0}),this.$elementMessage("删除成功","success"))})})}}},d=p,m=(i("7d62"),i("2f16"),i("2d12"),i("2877")),u=Object(m["a"])(d,s,o,!1,null,"3679a42b",null);e["default"]=u.exports}}]);