(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["settingsLogistics"],{"0405":function(t,e,i){},"0c85":function(t,e,i){var s=i("b51b");t.exports=s((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},"24ce":function(t,e,i){},"2c0d":function(t,e,i){"use strict";i("6f71")},"2f82":function(t,e,i){},"37bb":function(t,e,i){"use strict";i("6451")},3901:function(t,e,i){"use strict";var s=i("6dd3"),a=i("9699"),n=i("4a15"),r=i("14b4"),o=i("9801"),l=i("03e9"),c=i("1de0"),u=i("521d"),d=i("1657"),f=i("3d1e"),p=i("9b46"),g=i("906c"),h=p("slice"),v=f("species"),m=a.Array,y=Math.max;s({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var i,s,a,f=u(this),p=c(f),h=l(t,p),b=l(void 0===e?p:e,p);if(n(f)&&(i=f.constructor,r(i)&&(i===m||n(i.prototype))?i=void 0:o(i)&&(i=i[v],null===i&&(i=void 0)),i===m||void 0===i))return g(f,h,b);for(s=new(void 0===i?m:i)(y(b-h,0)),a=0;h<b;h++,a++)h in f&&d(s,a,f[h]);return s.length=a,s}})},"393e":function(t,e,i){var s=i("b51b");t.exports=!s((function(){return Object.isExtensible(Object.preventExtensions({}))}))},"503d":function(t,e,i){"use strict";i("0405")},"566c":function(t,e,i){var s=i("b51b"),a=i("9801"),n=i("fcde"),r=i("0c85"),o=Object.isExtensible,l=s((function(){o(1)}));t.exports=l||r?function(t){return!!a(t)&&((!r||"ArrayBuffer"!=n(t))&&(!o||o(t)))}:o},6451:function(t,e,i){},6586:function(t,e,i){var s=i("235f"),a=i("0635");t.exports=function(t,e,i,n){try{return n?e(s(i)[0],i[1]):e(i)}catch(r){a(t,"throw",r)}}},6693:function(t,e,i){},6860:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("3901"),i("39dd"),i("5f8e"),i("fc09"),i("55b1"),i("5ede"),i("ccbd");var s=i("a01c");function a(t,e){if(t){if("string"===typeof t)return Object(s["a"])(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(s["a"])(t,e):void 0}}},"6f71":function(t,e,i){},7980:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var s=i("a01c");function a(t){if(Array.isArray(t))return Object(s["a"])(t)}i("5ae2"),i("09be"),i("39dd"),i("00e8"),i("55b1"),i("3946"),i("fc09");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=i("6860");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return a(t)||n(t)||Object(r["a"])(t)||o()}},"7df3":function(t,e,i){},"83ee":function(t,e,i){"use strict";i("ebb4")},a01c:function(t,e,i){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}i.d(e,"a",(function(){return s}))},ab5b:function(t,e,i){"use strict";i("2f82")},d758:function(t,e,i){"use strict";var s=i("dcc6").f,a=i("3ab7"),n=i("1706"),r=i("4f4c"),o=i("f9fa"),l=i("d51a"),c=i("266b"),u=i("f021"),d=i("8e24"),f=i("fda1").fastKey,p=i("647c"),g=p.set,h=p.getterFor;t.exports={getConstructor:function(t,e,i,c){var u=t((function(t,s){o(t,p),g(t,{type:e,index:a(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=s&&l(s,t[c],{that:t,AS_ENTRIES:i})})),p=u.prototype,v=h(e),m=function(t,e,i){var s,a,n=v(t),r=y(t,e);return r?r.value=i:(n.last=r={index:a=f(e,!0),key:e,value:i,previous:s=n.last,next:void 0,removed:!1},n.first||(n.first=r),s&&(s.next=r),d?n.size++:t.size++,"F"!==a&&(n.index[a]=r)),t},y=function(t,e){var i,s=v(t),a=f(e);if("F"!==a)return s.index[a];for(i=s.first;i;i=i.next)if(i.key==e)return i};return n(p,{clear:function(){var t=this,e=v(t),i=e.index,s=e.first;while(s)s.removed=!0,s.previous&&(s.previous=s.previous.next=void 0),delete i[s.index],s=s.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,i=v(e),s=y(e,t);if(s){var a=s.next,n=s.previous;delete i.index[s.index],s.removed=!0,n&&(n.next=a),a&&(a.previous=n),i.first==s&&(i.first=a),i.last==s&&(i.last=n),d?i.size--:e.size--}return!!s},forEach:function(t){var e,i=v(this),s=r(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:i.first){s(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!y(this,t)}}),n(p,i?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),d&&s(p,"size",{get:function(){return v(this).size}}),u},setStrong:function(t,e,i){var s=e+" Iterator",a=h(e),n=h(s);c(t,e,(function(t,e){g(this,{type:s,target:t,state:a(t),kind:e,last:void 0})}),(function(){var t=n(this),e=t.kind,i=t.last;while(i&&i.removed)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),u(e)}}},d902:function(t,e,i){"use strict";var s=i("9699"),a=i("4f4c"),n=i("a22c"),r=i("ed2b"),o=i("6586"),l=i("8d89"),c=i("14b4"),u=i("1de0"),d=i("1657"),f=i("40ec"),p=i("4557"),g=s.Array;t.exports=function(t){var e=r(t),i=c(this),s=arguments.length,h=s>1?arguments[1]:void 0,v=void 0!==h;v&&(h=a(h,s>2?arguments[2]:void 0));var m,y,b,$,_,D,w=p(e),S=0;if(!w||this==g&&l(w))for(m=u(e),y=i?new this(m):g(m);m>S;S++)D=v?h(e[S],S):e[S],d(y,S,D);else for($=f(e,w),_=$.next,y=i?new this:[];!(b=n(_,$)).done;S++)D=v?o($,h,[b.value,S],!0):b.value,d(y,S,D);return y.length=S,y}},d90e:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contentpanel edit-logistics-page"},[i("div",{ref:"pageHeader",staticClass:"pagetitle"},[i("div",{staticClass:"left"},[i("div",{staticClass:"title"},[i("i",{staticClass:"el-icon-guide"}),i("h2",[t._v(" "+t._s(t.id?t.$t("logistics.编辑"):t.$t("logistics.添加"))+t._s(t.$t("logistics.区域方案"))+" ")])])]),i("div",{staticClass:"right"},[i("el-button",{on:{click:function(e){return t.goto("logistics")}}},[t._v(t._s(t.$t("logistics.取消")))]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t.$t("logistics.保存")))])],1)]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[i("el-card",[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{staticClass:"link-a",attrs:{to:{path:"/logistics"}}},[i("i",{staticClass:"el-icon-arrow-right"}),t._v(" "+t._s(t.$t("logistics.返回列表"))+" ")])],1),i("el-divider"),i("div",{staticClass:"project-wrap"},[i("div",{staticClass:"ipt-group"},[i("div",{staticClass:"ipt-label"},[t._v(" "+t._s(t.$t("logistics.区域方案名称 (该名称不会展示给客户查看):"))+" "),i("span",{staticClass:"required"},[t._v("*")])]),i("el-input",{attrs:{placeholder:t.$t("logistics.请输入名称"),maxlength:"50"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.name.length)+" / 50")])])],1),i("div",{staticClass:"shipping-area-wrap"},[i("div",{staticClass:"title"},[i("div",{staticClass:"left"},[t._v(" "+t._s(t.$t("logistics.配送区域"))+" "),i("span",{staticClass:"required"},[t._v("*")]),t._v(" "+t._s(t.$t("logistics.(请添加当前方案适用的国家/地区)"))+" ")]),i("div",{staticClass:"right"},[i("div",{staticClass:"num"},[t._v(" "+t._s(t.$t("logistics.当前已添加"))+" "),i("b",[t._v(t._s(t.countrys.length))]),t._v(" "+t._s(t.$t("logistics.个国家/地区"))+" ")]),i("el-link",{staticClass:"collapse-arr",attrs:{underline:!1},on:{click:t.changeAreaCollapse}},[i("i",{class:t.tabArea?"el-icon-arrow-up":"el-icon-arrow-down"})]),i("el-button",{staticClass:"add-btn",attrs:{type:"primary",size:"small"},on:{click:t.openDrawerSelectCountry}},[t._v(t._s(t.$t("logistics.添加国家/地区")))])],1)]),i("el-collapse",{attrs:{value:t.tabArea}},[i("el-collapse-item",{attrs:{name:"1"}},[i("el-table",{ref:"areaTable",attrs:{height:"280",data:t.countrys,stripe:""}},[i("el-table-column",{attrs:{label:t.$t("logistics.操作"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-link",{staticClass:"mg-r-15",attrs:{type:"danger"},on:{click:function(i){return t.removeArea(e.$index)}}},[t._v(t._s(t.$t("logistics.删除")))]),i("el-link",{attrs:{type:"primary"},on:{click:t.openDrawerSelectCountry}},[t._v(t._s(t.$t("logistics.编辑")))])]}}])}),i("el-table-column",{attrs:{label:t.$t("logistics.国家地区")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"d-flex"},[i("span",{staticClass:"mg-r-20"},[t._v(t._s(e.row.label))]),i("div",{staticClass:"iti-flag",class:e.row.value.toLowerCase()})])]}}])}),i("el-table-column",{attrs:{label:t.$t("logistics.分地区"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" "+t._s(t.$t("logistics.全部"))+" ")]},proxy:!0}])})],1)],1)],1)],1),i("div",{staticClass:"shipping-price-wrap"},[i("div",{staticClass:"title"},[i("div",{staticClass:"left"},[t._v(" "+t._s(t.$t("logistics.运费方案"))+" "),i("span",{staticClass:"required"},[t._v("*")])]),i("div",{staticClass:"right"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.openDrawerShipping}},[t._v(t._s(t.$t("logistics.添加运费方案")))]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.openImportShipping}},[t._v(t._s(t.$t("logistics.导入运费方案")))])],1)]),i("el-table",{ref:"shippingTable",attrs:{data:t.shippings,stripe:""}},[i("el-table-column",{attrs:{label:t.$t("logistics.操作"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-link",{staticClass:"mg-r-15",attrs:{type:"danger"},on:{click:function(i){return t.removeShipping(e.$index)}}},[t._v(t._s(t.$t("logistics.删除")))]),i("el-link",{attrs:{type:"primary"},on:{click:function(i){return t.editShipping(e.row)}}},[t._v(t._s(t.$t("logistics.编辑")))])]}}])}),i("el-table-column",{attrs:{label:t.$t("logistics.方案名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(e.row.name))]),e.row.nameDisplay?i("p",[t._v(t._s(e.row.nameDisplay))]):t._e()]}}])}),i("el-table-column",{attrs:{label:t.$t("logistics.运费"),width:"500"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("TableFreight",{attrs:{item:t.row}})]}}])}),i("el-table-column",{attrs:{label:t.$t("logistics.时效天数")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.agingDaysBegin)+" - "+t._s(e.row.agingDaysEnd)+" "+t._s(t.$t("logistics.天"))+" ")]}}])}),i("el-table-column",{attrs:{label:t.$t("logistics.商品属性")},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.productType,(function(e,s){return i("div",{key:s},[t._v(" "+t._s(t.$dict.productType[e]?t.$t(t.$dict.productType[e].text):"")+" ")])}))}}])}),i("el-table-column",{attrs:{label:t.$t("logistics.计算规则"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("TableWeight",{attrs:{item:t.row}})]}}])})],1)],1)])],1)],1),i("div",{staticClass:"page-footer"},[i("div",[i("el-button",{on:{click:function(e){return t.goto("logistics")}}},[t._v(t._s(t.$t("logistics.取消")))]),t.id?i("el-button",{attrs:{type:"danger"},on:{click:t.delAreaShipping}},[t._v(t._s(t.$t("logistics.删除该区域方案")))]):t._e(),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t.$t("logistics.保存")))])],1)]),i("DrawerSelectCountry",{attrs:{data:t.DrawerSelectCountryData,arr:t.countryArr},on:{setCountry:t.setCountry}}),i("DrawerShipping",{attrs:{data:t.DrawerShippingsData},on:{setShipping:t.setShipping}}),i("DialogImport",{attrs:{data:t.dialogImportData},on:{uploadSuccess:t.uploadSuccess}})],1)},a=[],n=i("7980"),r=(i("ba49"),i("39dd"),i("f433"),i("1b03"),i("fd2d"),i("5f8e"),i("da57"),i("55b1"),i("3946"),i("2027"),i("6693"),i("c895")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-drawer",{staticClass:"drawer-select-country",attrs:{title:t.$t("logistics.区域设置"),visible:t.data.isShow,size:"600","before-close":t.beforeClose},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)},opened:t.opened}},[i("el-divider"),i("div",{staticClass:"d-body"},[i("div",{staticClass:"ipt-wrap"},[i("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:t.$t("logistics.请输入国家/地区名称"),clearable:""},model:{value:t.data.filterText,callback:function(e){t.$set(t.data,"filterText",e)},expression:"data.filterText"}})],1),i("el-tree",{ref:"countryTree",attrs:{data:t.arr,"show-checkbox":"","highlight-current":"","node-key":"value","filter-node-method":t.filterNode,"check-strictly":!1},on:{"check-change":t.changeTree,"node-click":t.nodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.node,a=e.data;return i("span",{staticClass:"custom-tree-node"},[i("span",[t._v(t._s(s.label))]),a.children?i("span",{staticStyle:{color:"#909399"}},[t._v(" ( "),i("span",{staticStyle:{color:"#303133"}},[t._v(t._s(t.selectedData.num[a.id])+" ")]),t._v("/"+t._s(a.children.length)+") ")]):t._e()])}}])})],1),i("div",{staticClass:"drawer-footer"},[i("span",{staticClass:" mg-r-20"},[t._v(t._s(t.$t("logistics.已选择"))+" "+t._s(t.selectedData.arr.length)+" "+t._s(t.$t("logistics.个国家/地区")))]),i("el-button",{on:{click:function(e){t.data.isShow=!1}}},[t._v(t._s(t.$t("logistics.取消")))]),i("el-button",{attrs:{type:"primary",loading:t.data.loading},on:{click:t.setCountry}},[t._v(t._s(t.$t("logistics.保存")))])],1)],1)},l=[],c=(i("3a92"),{props:["data","arr"],data:function(){return{selectedData:{num:{0:0,1:0,2:0,3:0,4:0,5:0},arr:[]}}},watch:{"data.filterText":function(t){this.$refs.countryTree.filter(t)}},methods:{nodeClick:function(t){if(!t.disabled&&t.value){var e=this.$refs.countryTree.getCheckedKeys().filter((function(t){return t}));e.indexOf(t.value)>-1?e=e.filter((function(e){return e!=t.value})):e.push(t.value),this.$refs.countryTree.setCheckedKeys(e)}},changeTree:function(){var t=this,e=function(t){return t.filter(Boolean)};this.selectedData.arr=e(this.$refs.countryTree.getCheckedKeys()),this.selectedData.num={0:0,1:0,2:0,3:0,4:0,5:0},this.arr.forEach((function(e,i){e.children.forEach((function(e){t.selectedData.arr.indexOf(e.value)>-1&&t.selectedData.num[i]++}))}))},filterNode:function(t,e){return!t||-1!==e.label.toLowerCase().indexOf(t.toLowerCase())},setCountry:function(){var t=this;if(this.selectedData.arr.length){var e=[];this.selectedData.arr.forEach((function(i){t.arr.forEach((function(t){t.children.forEach((function(t){t.value==i&&e.push({label:t.label,value:t.value})}))}))})),this.$emit("setCountry",e)}else this.$elementMessage(this.$t("logistics.请选择国家/地区"),"error")},opened:function(){this.$refs.countryTree.setCheckedKeys(this.data.openedArr),this.changeTree()},beforeClose:function(t){this.$confirm(this.$t("logistics.确认关闭？  将不会保存改变。")).then((function(e){t()})).catch((function(t){}))}}}),u=c,d=(i("fb1e"),i("83ee"),i("cba8")),f=Object(d["a"])(u,o,l,!1,null,"c7a81082",null),p=f.exports,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-drawer",{staticClass:"drawer-shipping",attrs:{title:""+(t.data.form.tId?t.$t("logistics.编辑"):t.$t("logistics.添加"))+t.$t("logistics.运费方案"),visible:t.data.isShow,size:"1080px","before-close":t.beforeClose},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)},open:t.open}},[i("el-divider"),i("div",{staticClass:"d-body"},[i("el-form",{ref:"ShoppingForm",attrs:{"label-position":"top",model:t.data.form,"label-width":"120px"}},[i("el-form-item",{attrs:{label:t.$t("logistics.名称"),required:""}},[i("el-input",{attrs:{placeholder:t.$t("logistics.请输入名称"),maxlength:"30"},model:{value:t.data.form.name,callback:function(e){t.$set(t.data.form,"name",e)},expression:"data.form.name"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.data.form.name.length?t.data.form.name.length:0)+" / 30")])])],1),i("el-form-item",{attrs:{label:t.$t("logistics.别名")}},[i("el-input",{attrs:{placeholder:t.$t("logistics.请输入方案别名"),maxlength:"30"},model:{value:t.data.form.nameDisplay,callback:function(e){t.$set(t.data.form,"nameDisplay",e)},expression:"data.form.nameDisplay"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.data.form.nameDisplay?t.data.form.nameDisplay.length:0)+" / 30")])])],1),i("el-form-item",{staticStyle:{position:"relative"},attrs:{label:t.$t("logistics.方案说明")}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:t.$t("logistics.请输入200个字以内的物流方案说明")},model:{value:t.data.form.remark,callback:function(e){t.$set(t.data.form,"remark",e)},expression:"data.form.remark"}}),i("span",{staticClass:"textarea-len",staticStyle:{color:"#909399"}},[i("span",{style:{color:t.data.form.remark&&t.data.form.remark.length>200?"#F56C6C":"#909399"}},[t._v(t._s(t.data.form.remark&&t.data.form.remark.length?t.data.form.remark.length:0))]),t._v(" / 200")])],1),i("el-form-item",{attrs:{label:t.$t("logistics.商品属性"),required:""}},[i("el-checkbox-group",{model:{value:t.data.form.productType,callback:function(e){t.$set(t.data.form,"productType",e)},expression:"data.form.productType"}},t._l(t.productTypeArr,(function(e,s){return i("el-checkbox",{key:s,attrs:{label:e.val,name:"type",value:e.val}},[t._v(t._s(t.$t(e.text)))])})),1)],1),i("el-form-item",{attrs:{label:t.$t("logistics.运费设置")}},[i("div",{staticStyle:{position:"absolute",top:"-40px",left:"80px"}},[i("el-link",{staticClass:"mg-r-15",attrs:{type:"primary",underline:!1},on:{click:function(e){return t.addSetting()}}},[t._v(t._s(t.$t("logistics.添加一组运费设置")))])],1),t.settingArr&&t.settingArr.length?t._l(t.settingArr,(function(e,s){return i("div",{key:s},[i("el-row",{staticClass:"mg-t-15"},[i("el-col",{attrs:{span:2}},[t._v(" "+t._s(t.$t("logistics.重量范围："))+" ")]),i("el-col",{attrs:{span:8}},[i("el-input",{on:{change:function(i){return t.numberChange("rangeBegin",s,e.rangeBegin)}},model:{value:e.rangeBegin,callback:function(i){t.$set(e,"rangeBegin",i)},expression:"setting.rangeBegin"}},[i("template",{slot:"prepend"},[t._v(t._s(t.$t("logistics.起始")))]),i("template",{slot:"append"},[t._v("g")])],2)],1),i("el-col",{attrs:{span:8,offset:1}},[i("el-input",{attrs:{disabled:e.noHeavy&&e.noHeavy.length>0},on:{change:function(i){return t.numberChange("rangeEnd",s,e.rangeEnd)}},model:{value:e.rangeEnd,callback:function(i){t.$set(e,"rangeEnd",i)},expression:"setting.rangeEnd"}},[i("template",{slot:"prepend"},[t._v(t._s(t.$t("logistics.截止")))]),i("template",{slot:"append"},[t._v("g")])],2)],1),t.settingArr.length>1?[i("el-col",{attrs:{span:2,offset:1}},[i("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(e){return t.deleteSetting(s)}}},[t._v(t._s(t.$t("logistics.删除")))])],1)]:t._e(),s==t.settingArr.length-1?[i("el-col",{attrs:{span:2,offset:t.settingArr.length>1?0:1}},[i("el-checkbox-group",{model:{value:e.noHeavy,callback:function(i){t.$set(e,"noHeavy",i)},expression:"setting.noHeavy"}},[i("el-checkbox",{attrs:{label:"1",value:"1"}},[t._v(t._s(t.$t("logistics.不限重")))])],1)],1)]:t._e()],2),i("el-row",{staticClass:"mg-t-15"},[i("el-col",{attrs:{span:2}},[t._v(" "+t._s(t.$t("logistics.首重设置："))+" ")]),i("el-col",{attrs:{span:8}},[i("el-input",{model:{value:e.firstWeight,callback:function(i){t.$set(e,"firstWeight",i)},expression:"setting.firstWeight"}},[i("template",{slot:"prepend"},[t._v(t._s(t.$t("logistics.首重")))]),i("template",{slot:"append"},[t._v("g")])],2)],1),i("el-col",{attrs:{span:8,offset:1}},[i("el-input",{on:{input:function(i){e.firstPrice=t.oninput(e.firstPrice)}},model:{value:e.firstPrice,callback:function(i){t.$set(e,"firstPrice",i)},expression:"setting.firstPrice"}},[i("template",{slot:"prepend"},[t._v(t._s(t.$t("logistics.首重价格")))]),i("template",{slot:"append"},[t._v("USD")])],2)],1)],1),i("el-row",{staticClass:"mg-t-15"},[i("el-col",{attrs:{span:2}},[t._v(" "+t._s(t.$t("logistics.续重设置："))+" ")]),i("el-col",{attrs:{span:8}},[i("el-input",{model:{value:e.nextWeight,callback:function(i){t.$set(e,"nextWeight",i)},expression:"setting.nextWeight"}},[i("template",{slot:"prepend"},[t._v(t._s(t.$t("logistics.续重")))]),i("template",{slot:"append"},[t._v("g")])],2)],1),i("el-col",{attrs:{span:8,offset:1}},[i("el-input",{on:{input:function(i){e.nextPrice=t.oninput(e.nextPrice)}},model:{value:e.nextPrice,callback:function(i){t.$set(e,"nextPrice",i)},expression:"setting.nextPrice"}},[i("template",{slot:"prepend"},[t._v(t._s(t.$t("logistics.续重价格")))]),i("template",{slot:"append"},[t._v("USD")])],2)],1)],1),i("el-row",{staticClass:"mg-t-15 mg-b-15"},[i("el-col",{attrs:{span:2}},[t._v(" "+t._s(t.$t("logistics.挂号费："))+" ")]),i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{placeholder:t.$t("logistics.挂号费")},model:{value:e.registrationFee,callback:function(i){t.$set(e,"registrationFee",i)},expression:"setting.registrationFee"}},[i("template",{slot:"append"},[t._v("USD")])],2)],1)],1),i("el-divider")],1)})):t._e()],2),i("el-form-item",{attrs:{label:t.$t("logistics.其他运费设置")}},[i("el-row",{staticClass:"mg-t-15 mg-b-15"},[i("el-col",{attrs:{span:2}},[i("span",{staticStyle:{color:"#F56C6C"}},[t._v("*")]),t._v(" "+t._s(t.$t("logistics.时效天数："))+" ")]),i("el-col",{attrs:{span:4}},[i("el-input",{model:{value:t.freightObj.agingDaysBegin,callback:function(e){t.$set(t.freightObj,"agingDaysBegin",e)},expression:"freightObj.agingDaysBegin"}},[i("template",{slot:"append"},[t._v("-")])],2)],1),i("el-col",{attrs:{span:4}},[i("el-input",{model:{value:t.freightObj.agingDaysEnd,callback:function(e){t.$set(t.freightObj,"agingDaysEnd",e)},expression:"freightObj.agingDaysEnd"}},[i("template",{slot:"append"},[t._v(t._s(t.$t("logistics.天")))])],2)],1),i("el-col",{attrs:{span:2,offset:1}},[t._v(" "+t._s(t.$t("logistics.附加费："))+" ")]),i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{placeholder:t.$t("logistics.附加费")},model:{value:t.freightObj.operatingFee,callback:function(e){t.$set(t.freightObj,"operatingFee",e)},expression:"freightObj.operatingFee"}},[i("template",{slot:"append"},[t._v("USD")])],2)],1)],1)],1)],1)],1),i("div",{staticClass:"drawer-footer"},[i("el-button",{on:{click:function(e){t.data.isShow=!1}}},[t._v(t._s(t.$t("logistics.取消")))]),i("el-button",{attrs:{type:"primary",loading:t.data.loading},on:{click:t.setShipping}},[t._v(t._s(t.$t("logistics.保存")))])],1)],1)},h=[],v=(i("0d8f"),i("5ede"),i("5972"),{props:["data"],data:function(){return{productTypeArr:this.$dict.productType,freightObj:{registrationFee:"",operatingFee:"",agingDaysBegin:"",agingDaysEnd:""},settingArr:[{rangeBegin:"",rangeEnd:"",firstWeight:"",firstPrice:"",nextWeight:"",nextPrice:"",registrationFee:"",noHeavy:[]}]}},methods:{open:function(){var t=this;this.data.isEdit?(this.settingArr=this.data.form.priceArr,this.freightObj.operatingFee=this.data.form.item.operatingFee,this.freightObj.agingDaysBegin=this.data.form.item.agingDaysBegin,this.freightObj.agingDaysEnd=this.data.form.item.agingDaysEnd,this.settingArr.length&&this.settingArr.forEach((function(e){e.noHeavy&&e.noHeavy.length||t.$set(e,"noHeavy",[])}))):(this.settingArr=[{rangeBegin:"",rangeEnd:"",firstWeight:"",firstPrice:"",nextWeight:"",nextPrice:"",registrationFee:"",noHeavy:[]}],this.freightObj.operatingFee="",this.freightObj.agingDaysBegin="",this.freightObj.agingDaysEnd="")},deleteSetting:function(t){this.settingArr.splice(t,1)},addSetting:function(){this.settingArr.push({rangeBegin:"",rangeEnd:"",firstWeight:"",firstPrice:"",nextWeight:"",nextPrice:"",noHeavy:[]})},numberChange:function(t,e,i){var s=this,a=this.settingArr[e];if("rangeBegin"==t){if(this.settingArr.length>1&&e>0){var n=this.settingArr[e-1];n&&n.rangeEnd&&a.rangeBegin!=n.rangeEnd&&(this.$elementMessage(this.$t("logistics.相邻的阶梯重量，当前组的起始重量必须等于前一组的截止重量"),"error"),this.$set(a,"rangeBegin",n.rangeEnd))}}else{if(a.noHeavy&&a.noHeavy.length)return void(a.rangeEnd="");a.rangeEnd=Number(i),this.$nextTick((function(){a.rangeBegin>0&&a.rangeEnd<a.rangeBegin&&(s.$elementMessage(s.$t("logistics.截止重量需要大于等于起始重量"),"error"),s.$set(a,"rangeEnd",a.rangeBegin))}))}},oninput:function(t){var e=t,i=e.substr(0,1),s=e.substr(1,1);if(e.length>1&&0==i&&"."!=s&&(e=e.substr(1,1)),"."==i&&(e=""),-1!=e.indexOf(".")){var a=e.substr(e.indexOf(".")+1);-1!=a.indexOf(".")&&(e=e.substr(0,e.indexOf(".")+a.indexOf(".")+1))}return e=e.replace(/[^\d^\.]+/g,"").replace(/^\D*([0-9]\d*\.?\d{0,4})?.*$/,"$1"),e},setShipping:function(){var t=this;if(this.data.form.name)if(this.data.form.remark&&this.data.form.remark.length>200)this.$elementMessage(this.$t("logistics.方案说明长度不能超过200"),"error");else if(this.data.form.productType&&this.data.form.productType.length)if(this.freightObj.agingDaysBegin&&this.freightObj.agingDaysEnd){this.settingArr.forEach((function(e){e.noHeavy&&e.noHeavy.length&&t.$set(e,"rangeEnd","")}));var e={id:this.data.form.id,name:this.data.form.name,nameDisplay:this.data.form.nameDisplay,remark:this.data.form.remark,productType:this.data.form.productType,type:this.data.form.type,tId:this.data.form.tId,min:0,max:0,priceArr:this.settingArr,operatingFee:this.freightObj.operatingFee,agingDaysBegin:this.freightObj.agingDaysBegin,agingDaysEnd:this.freightObj.agingDaysEnd};this.$emit("setShipping",e)}else this.$elementMessage(this.$t("logistics.时效天数必须填写"),"error");else this.$elementMessage(this.$t("logistics.请选择商品属性"),"error");else this.$elementMessage(this.$t("logistics.名称必须输入"),"error")},beforeClose:function(t){this.$confirm(this.$t("logistics.确认关闭？  将不会保存改变。")).then((function(e){t()})).catch((function(t){}))}}}),m=v,y=(i("37bb"),i("2c0d"),Object(d["a"])(m,g,h,!1,null,"09d41cd7",null)),b=y.exports,_=i("b879"),D=i("3d50"),w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.data.isShow,title:t.$t("goods.导入商品"),width:"500px"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)}}},[i("el-divider"),i("div",{staticClass:"d-body"},[t.data.filePath?i("div",{staticClass:"path"},[i("p",{staticClass:" mg-b-20 tx-ellipsis3"},[t._v(t._s(t.data.filePath))]),i("div",{staticClass:" tx-center"},[i("el-link",{attrs:{type:"danger"},on:{click:t.clearFile}},[i("i",{staticClass:"el-icon-delete"})])],1)]):i("a",{staticClass:"i-btn",attrs:{href:"javascript:;"},on:{click:t.openUpload}},[i("i",{staticClass:"el-icon-upload"}),i("p",[t._v(t._s(t.$t("goods.选择文件")))])]),i("div",{staticClass:"right"},[i("p",{staticClass:"t1"},[i("span",[t._v(t._s(t.$t("goods.点击下载")))]),t._v(" "),i("el-link",{attrs:{type:"primary",href:"./file/importFreight.xlsx",target:"_blank"}},[t._v(t._s(t.$t("goods.运费导入模板")))])],1),i("p",{staticClass:"t2"},[t._v(" "+t._s(t.$t("goods.请按规范填写表格，仅支持xlsx格式文件"))+" ")])])]),i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"uploadXls",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},on:{change:function(e){return t.fileUpload(e)}}}),i("el-divider"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.data.isShow=!1}}},[t._v(t._s(t.$t("goods.取消")))]),i("el-button",{attrs:{type:"primary",loading:t.data.loading,disabled:!t.data.file},on:{click:t.apiUpload}},[t._v(t._s(t.$t("goods.提交")))])],1)],1)},S=[],x={props:["data"],methods:{clearFile:function(){this.data.file=null,this.data.filePath="",document.getElementById("uploadXls").value=""},fileUpload:function(t){this.data.file=t.target.files[0],this.data.filePath=t.target.value,t.target.value=""},apiUpload:function(){var t=this;this.data.file.size>2097152?this.$message({message:this.$t("goods.文件不能大于10MB"),type:"error"}):this.data.file?(this.$set(this.data,"loading",!0),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>'),this.$apiCall("api.AreaShipping.importAreaShippingDetailExcel",{"@file":this.data.file,id:this.data.params.id||"",name:this.data.params.name,countrys:this.data.params.countrys},(function(e){t.$set(t.data,"loading",!1),9999==e.ErrorCode?e.Data.Results.file?(t.$emit("uploadSuccess","error"),document.getElementById("ifilePro").src=e.Data.Results.file):t.$emit("uploadSuccess"):t.$message({message:e.Message,type:"error"})}))):this.$message({message:this.$t("goods.请上传文件"),type:"error"})},openUpload:function(){document.getElementById("uploadXls").click()}}},C=x,k=(i("ab5b"),Object(d["a"])(C,w,S,!1,null,"6947d33e",null)),E=k.exports,A={data:function(){return{isSave:!1,loading:!1,code2Arr:[],tabArea:"1",id:"",name:"",countrys:[],shippings:[],countryArr:[],DrawerSelectCountryData:{isShow:!1,loading:!1,filterText:"",showTree:!1,openedArr:[]},DrawerShippingsData:{isShow:!1,loading:!1,form:{id:"",name:"",nameDisplay:"",remark:"",productType:[],type:"1",min:void 0,max:void 0,firstWeight:void 0,firstPrice:void 0,nextWeight:void 0,nextPrice:void 0,radio:void 0,priceType:"1",tId:"",minWeight:void 0,priceArr:[{smallerWeight:void 0,greaterWeight:void 0,perPrice:void 0,registrationFee:void 0,surcharge:void 0}]},kg:2,kg2:2},defaultDrawerShippingData:"{}",dialogImportData:{loding:!1,isShow:!1,file:null,filePath:"",params:{}},defaultDialogImportData:"{}"}},components:{DrawerSelectCountry:p,DrawerShipping:b,TableFreight:_["a"],TableWeight:D["a"],DialogImport:E},beforeRouteLeave:function(t,e,i){if(this.isSave)i();else{var s=confirm(this.$t("logistics.当前页面还未保存，确定要离开吗?"));s?i():i(!1)}},mounted:function(){var t=this;this.defaultDrawerShippingData=JSON.stringify(this.DrawerShippingsData),this.defaultDialogImportData=JSON.stringify(this.dialogImportData),Object.keys(r).forEach((function(e,i){var s=[];Object.keys(r[e]).forEach((function(i){s.push({label:r[e][i].nameCN+" "+r[e][i].nameEN,value:r[e][i].code2,labelCN:r[e][i].nameCN,labelEN:r[e][i].nameEN,disabled:!1}),t.code2Arr.push(r[e][i].code2)})),t.countryArr.push({id:i+"",label:e,children:s.map((function(t){return t}))})})),this.$route.query.id?(this.id=this.$route.query.id,this.getDetail()):this.getDisabledCountry()},methods:{uploadSuccess:function(t){var e=this;setTimeout((function(){e.dialogImportData.isShow=!1,"error"==t?e.$message({message:t?e.$t("goods.导入失败，下载查看错误文件"):e.$t("goods.导入成功"),type:t?"error":"success"}):(e.isSave=!0,e.$nextTick((function(){e.$router.push({name:"logistics"})})))}),1e3)},openImportShipping:function(){this.dialogImportData=JSON.parse(this.defaultDialogImportData);var t=this.countrys.map((function(t){return t.value})),e={id:this.id||"",name:this.name,countrys:t};this.dialogImportData.params=e,this.dialogImportData.isShow=!0},getDisabledCountry:function(){var t=this;this.loading=!0,this.$apiCall("api.AreaShipping.checkCountry",{id:this.id,country:this.code2Arr},(function(e){if(t.loading=!1,"9999"==e.ErrorCode){var i=e.Data.Results.map((function(t){return t.country}));i=Object(n["a"])(new Set(i)),t.countryArr.forEach((function(t){t.children.forEach((function(t){t.disabled=i.indexOf(t.value)>-1}))}))}}))},delAreaShipping:function(){var t=this;this.$confirm(this.$t("logistics.是否确定删除该区域方案？"),{type:"warning",confirmButtonText:this.$t("logistics.删除"),cancelButtonText:this.$t("logistics.取消"),confirmButtonClass:"el-button--danger"}).then((function(){t.loading=!0,t.$apiCall("api.AreaShipping.delete",{id:t.id},(function(e){t.loading=!1,"9999"==e.ErrorCode?(t.isSave=!0,t.goto("logistics")):t.$elementMessage(e.Message,"error")}))})).catch((function(){}))},getDetail:function(){var t=this;this.loading=!0,this.$apiCall("api.AreaShipping.findByVendor",{id:this.id},(function(e){if(t.loading=!1,"9999"==e.ErrorCode){var i=e.Data.Results[0];t.id=i.id,t.countrys=[],i.countrys.forEach((function(e){t.countryArr.forEach((function(i){i.children.forEach((function(i){i.value==e&&t.countrys.push({label:i.label,value:i.value})}))}))})),t.name=i.name,t.shippings=i.shippings.map((function(t){return t.tId=t.id,t})),t.getDisabledCountry()}else t.$elementMessage(e.Message,"error")}))},save:function(){var t=this;if(this.name)if(this.countrys.length)if(this.shippings.length){var e=this.countrys.map((function(t){return t.value})),i={id:this.id||"",name:this.name,countrys:e,shippings:this.shippings};this.loading=!0,this.$apiCall("api.AreaShipping.saveByVendor",i,(function(e){t.loading=!1,"9999"==e.ErrorCode?(t.isSave=!0,t.$nextTick((function(){t.$router.push({name:"logistics"})}))):t.$elementMessage(e.Message,"error")}))}else this.$elementMessage(this.$t("logistics.必须创建一个运费方案"),"error");else this.$elementMessage(this.$t("logistics.必须选择一个配送区域"),"error");else this.$elementMessage(this.$t("logistics.方案名必须输入"),"error")},setShipping:function(t){if(t.tId){for(var e=0;e<this.shippings.length;e++)if(this.shippings[e].tId==t.tId){this.shippings.splice(e,1,t);break}}else t.tId=(new Date).getTime(),this.shippings.unshift(t);this.DrawerShippingsData.isShow=!1},openDrawerShipping:function(){this.DrawerShippingsData=JSON.parse(this.defaultDrawerShippingData),this.DrawerShippingsData.isShow=!0},setCountry:function(t){this.DrawerSelectCountryData.isShow=!1,this.countrys=t.map((function(t){return t}))},openDrawerSelectCountry:function(){this.DrawerSelectCountryData.isShow=!0,this.DrawerSelectCountryData.openedArr=this.countrys.map((function(t){return t.value}))},changeAreaCollapse:function(){this.tabArea=this.tabArea?"":"1"},removeArea:function(t){var e=this;this.$confirm(this.$t("logistics.确认要删除吗？"),{confirmButtonClass:"el-button--danger",type:"warning"}).then((function(){e.countrys.splice(t,1)})).catch((function(){}))},removeShipping:function(t){var e=this;this.$confirm(this.$t("logistics.确认要删除吗？"),{confirmButtonClass:"el-button--danger",type:"warning"}).then((function(){e.shippings.splice(t,1)})).catch((function(){}))},editShipping:function(t){this.DrawerShippingsData=JSON.parse(this.defaultDrawerShippingData),this.DrawerShippingsData.form.id=t.id,this.DrawerShippingsData.form.name=t.name,this.DrawerShippingsData.form.nameDisplay=t.nameDisplay,this.DrawerShippingsData.form.remark=t.remark,this.DrawerShippingsData.form.productType=Object(n["a"])(t.productType),this.DrawerShippingsData.form.tId=t.tId,this.DrawerShippingsData.form.priceArr=Object(n["a"])(t.priceArr),this.DrawerShippingsData.form.item=t,this.DrawerShippingsData.isEdit=!0,this.DrawerShippingsData.isShow=!0},goto:function(t){this.$router.push({name:t})}}},O=A,T=(i("503d"),i("e3ab"),Object(d["a"])(O,s,a,!1,null,"245ab26f",null));e["default"]=T.exports},da57:function(t,e,i){"use strict";var s=i("f1d9"),a=i("d758");s("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),a)},e3ab:function(t,e,i){"use strict";i("24ce")},ebb4:function(t,e,i){},f1d9:function(t,e,i){"use strict";var s=i("6dd3"),a=i("9699"),n=i("163f"),r=i("6d38"),o=i("51ad"),l=i("fda1"),c=i("d51a"),u=i("f9fa"),d=i("e1f6"),f=i("9801"),p=i("b51b"),g=i("329e"),h=i("1c6e"),v=i("f537");t.exports=function(t,e,i){var m=-1!==t.indexOf("Map"),y=-1!==t.indexOf("Weak"),b=m?"set":"add",$=a[t],_=$&&$.prototype,D=$,w={},S=function(t){var e=n(_[t]);o(_,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(y&&!f(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return y&&!f(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!f(t))&&e(this,0===t?0:t)}:function(t,i){return e(this,0===t?0:t,i),this})},x=r(t,!d($)||!(y||_.forEach&&!p((function(){(new $).entries().next()}))));if(x)D=i.getConstructor(e,t,m,b),l.enable();else if(r(t,!0)){var C=new D,k=C[b](y?{}:-0,1)!=C,E=p((function(){C.has(1)})),A=g((function(t){new $(t)})),O=!y&&p((function(){var t=new $,e=5;while(e--)t[b](e,e);return!t.has(-0)}));A||(D=e((function(t,e){u(t,_);var i=v(new $,t,D);return void 0!=e&&c(e,i[b],{that:i,AS_ENTRIES:m}),i})),D.prototype=_,_.constructor=D),(E||O)&&(S("delete"),S("has"),m&&S("get")),(O||k)&&S(b),y&&_.clear&&delete _.clear}return w[t]=D,s({global:!0,forced:D!=$},w),h(D,t),y||i.setStrong(D,t,m),D}},fb1e:function(t,e,i){"use strict";i("7df3")},fc09:function(t,e,i){var s=i("6dd3"),a=i("d902"),n=i("329e"),r=!n((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:r},{from:a})},fda1:function(t,e,i){var s=i("6dd3"),a=i("163f"),n=i("d26b"),r=i("9801"),o=i("4c74"),l=i("dcc6").f,c=i("7970"),u=i("854c"),d=i("566c"),f=i("20c1"),p=i("393e"),g=!1,h=f("meta"),v=0,m=function(t){l(t,h,{value:{objectID:"O"+v++,weakData:{}}})},y=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,h)){if(!d(t))return"F";if(!e)return"E";m(t)}return t[h].objectID},b=function(t,e){if(!o(t,h)){if(!d(t))return!0;if(!e)return!1;m(t)}return t[h].weakData},$=function(t){return p&&g&&d(t)&&!o(t,h)&&m(t),t},_=function(){D.enable=function(){},g=!0;var t=c.f,e=a([].splice),i={};i[h]=1,t(i).length&&(c.f=function(i){for(var s=t(i),a=0,n=s.length;a<n;a++)if(s[a]===h){e(s,a,1);break}return s},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},D=t.exports={enable:_,fastKey:y,getWeakData:b,onFreeze:$};n[h]=!0}}]);