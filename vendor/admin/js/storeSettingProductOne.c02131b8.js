(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["storeSettingProductOne"],{"0242":function(t,e,s){},"069c":function(t,e,s){t.exports=s.p+"img/noData.46b81b49.png"},"0a84":function(t,e,s){},"1e77":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.setting?s("div",{staticClass:"setting-page"},[s("el-scrollbar",{staticClass:"left"},[t.setting?s("div",{staticClass:"content"},[s("h1",[s("el-link",{attrs:{icon:"el-icon-arrow-left",underline:!1},on:{click:t.goBack}},[t._v(t._s(t.$t("storeSetting.商品信息")))])],1),s("div",{staticClass:"change-box"},[s("div",{staticClass:"add-product"},[s("div",[t._v(t._s(t.$t("storeSetting.添加商品")))]),t.setting.imgUrl?s("div",{staticClass:"change-product"},[s("div",{staticClass:"category-name"},[t.setting.imgUrl?s("img",{staticClass:"default",attrs:{src:t.setting.imgUrl}}):s("div",{staticClass:"default"}),t.setting.name?s("div",{staticClass:"tx-ellipsis1"},[t._v(t._s(t.setting.name))]):t._e()]),s("div",{staticClass:"action-but"},[s("div",{on:{click:t.openSelect}},[t._v(t._s(t.$t("storeSetting.更换")))]),s("div",{on:{click:t.deleteCate}},[t._v(t._s(t.$t("storeSetting.删除")))])])]):s("div",{staticClass:"select-product",on:{click:t.openSelect}},[s("i",{staticClass:"el-icon-plus"}),s("div",[t._v(t._s(t.$t("storeSetting.选择商品")))])])]),s("div",{staticClass:"change-seach"},[s("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.显示售价")))]),s("el-switch",{model:{value:t.setting.displayPrice,callback:function(e){t.$set(t.setting,"displayPrice",e)},expression:"setting.displayPrice"}})],1),s("div",{staticStyle:{"margin-bottom":"30px"}},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.按钮文案")))]),s("el-input",{model:{value:t.setting.buttonText,callback:function(e){t.$set(t.setting,"buttonText",e)},expression:"setting.buttonText"}})],1),s("div",[s("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.图片展示规则")))]),s("el-select",{attrs:{placeholder:t.$t("storeSetting.请选择")},model:{value:t.setting.pictureRule,callback:function(e){t.$set(t.setting,"pictureRule",e)},expression:"setting.pictureRule"}},t._l(t.rules,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),s("div",{staticClass:"colorChange"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.按钮背景颜色")))]),s("el-color-picker",{staticClass:"color-p",attrs:{size:"mini"},model:{value:t.setting.btnBackground,callback:function(e){t.$set(t.setting,"btnBackground",e)},expression:"setting.btnBackground"}})],1),s("div",{staticClass:"colorChange"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.按钮文字颜色")))]),s("el-color-picker",{staticClass:"color-p",attrs:{size:"mini"},model:{value:t.setting.btnColor,callback:function(e){t.$set(t.setting,"btnColor",e)},expression:"setting.btnColor"}})],1)])]):t._e()]),s("el-scrollbar",{ref:"rightBox",staticClass:"right"},[s("div",{staticClass:"content"},[s("demoHeader",{attrs:{data:t.$store.state.configJson.header,headerMenu:t.headerMenu}}),s("demoBody",{attrs:{data:t.setting,header:t.$store.state.configJson.header}}),s("demoFooter",{attrs:{setting:t.$store.state.configJson.footer}})],1)]),s("div",{staticClass:"action"},[s("el-button",{attrs:{type:"danger",size:"medium"},on:{click:t.del}},[t._v(t._s(t.$t("storeSetting.删除该组件")))]),s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v(t._s(t.$t("storeSetting.完成")))])],1),s("selectProduct",{attrs:{data:t.dialogProductList}})],1):t._e()},a=[],o=(s("d3b7"),s("159b"),s("4e82"),s("e9c4"),s("b0c0"),s("ac1f"),s("5319"),s("d81d"),s("88a7")),n=s("826e"),r=s("8c3c"),l=s("db46"),c={data:function(){return{headerMenu:[],dialogProductList:{isShow:!1,item:null},rules:[{value:"left",label:this.$t("storeSetting.居左")},{value:"right",label:this.$t("storeSetting.居右")}],isSave:!1,exist:!1,setting:{cid:this.$route.query.cid,id:"",btnBackground:"#303133",btnColor:"#C0C4CC",type:"singleProduct",buttonText:"",pictureRule:"left",displayPrice:!0,name:"Product title",cost:"88.88",imgUrl:""}}},components:{selectProduct:o["a"],demoHeader:n["a"],demoBody:r["a"],demoFooter:l["a"]},beforeRouteLeave:function(t,e,s){if(this.isSave)s();else{var i=confirm(this.$t("logistics.当前页面还未保存，确定要离开吗?"));i?s():s(!1)}},created:function(){var t=this;this.$apiCall("api.VendorShop.getShopConfig",{},(function(e){9999==e.ErrorCode&&0!==e.Data.Results.length&&(e.Data.Results.header.activeMenu&&e.Data.Results.menu.forEach((function(s){s.id==e.Data.Results.header.activeMenu&&(t.headerMenu=s)})),t.$store.commit("getShopConfig",e.Data.Results),t.$store.state.configJson.sort.forEach((function(e){e.cid==t.$route.query.cid&&(t.setting=JSON.parse(JSON.stringify(e)),t.getItems("s"),t.exist=!0,t.$nextTick((function(){t.$refs.rightBox.wrap.scrollTop=document.getElementById("row".concat(e.cid)).offsetTop})))})),t.exist||(t.setting={cid:t.$route.query.cid,id:"",btnBackground:"#303133",btnColor:"#C0C4CC",type:"singleProduct",buttonText:"",pictureRule:"left",displayPrice:!0,name:"Product title",cost:"88.88",imgUrl:""},t.exist=!0,t.$store.commit("addStoreComponent",t.setting)))}))},methods:{deleteCate:function(){this.setting.name="Product title",this.setting.cost="88.88",this.setting.imgUrl="",this.setting.id=""},goBack:function(){this.$router.push({name:"storeSettingMain"})},save:function(){var t=this;this.isSave=!0,this.exist?this.$store.commit("setStoreComponent",this.setting):(this.$store.commit("addStoreComponent",this.setting),this.exist=!0),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},(function(e){9999==e.ErrorCode?t.$elementMessage(t.$t("storeSetting.保存成功"),"success"):t.$message({message:e.Message,type:"error"})}))},del:function(){var t=this;this.isSave=!0,this.$store.commit("delComponent",this.setting.cid),this.setting=JSON.parse(JSON.stringify(this.$store.state.configJson)),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},(function(e){9999==e.ErrorCode?(t.$elementMessage("删除成功","success"),t.$router.replace({name:"storeSettingMain"})):t.$message({message:e.Message,type:"error"})}))},openSelect:function(){this.getItems(),this.dialogProductList.isShow=!0},getItems:function(t){var e=this;this.loading=!0,this.$apiCall("api.VendorShop.vendorFindProducts",{productId:t?this.setting.id:"",page:1,rowsPerPage:10},(function(s){if(e.loading=!1,9999==s.ErrorCode){var i=s.Data.Results;e.setting.product=i[0],t&&(e.setting.imgUrl=i[0].imgUrl,e.setting.cost=i[0].cost,e.setting.name=i[0].name),e.dialogProductList.item=i.map((function(t){return t.imgUrlArr=JSON.parse(t.imgUrlJson),t.statusIpt="1"==t.status,t}))}else e.$message({message:s.Message,type:"error"})}))}}},d=c,u=(s("bf4e"),s("d1f4"),s("2877")),g=Object(u["a"])(d,i,a,!1,null,"3e8c6d00",null);e["default"]=g.exports},"54fe":function(t,e,s){},"64bf":function(t,e,s){},"6c91":function(t,e,s){},"871c":function(t,e,s){"use strict";s("0a84")},"88a7":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"select-product"},[i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.data.loading,expression:"data.loading"}],attrs:{visible:t.data.isShow,title:t.$t("storeSetting.选择商品"),width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)},close:t.closeDialog}},[i("el-divider"),i("div",[i("el-form",{staticStyle:{"margin-bottom":"10px !important"},attrs:{inline:!0,size:"mini"}},[t.up?t._e():i("el-form-item",[i("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:t.$t("storeSetting.请选择")},on:{change:function(e){return t.filterGetItem("status")}},model:{value:t.filterData.status,callback:function(e){t.$set(t.filterData,"status",e)},expression:"filterData.status"}},[i("el-option",{attrs:{label:t.$t("storeSetting.全部"),value:""}}),i("el-option",{attrs:{label:t.$t("storeSetting.上架"),value:"1"}}),i("el-option",{attrs:{label:t.$t("storeSetting.下架"),value:"2"}})],1)],1),i("el-form-item",[i("el-input",{staticStyle:{width:"160px"},attrs:{clearable:"",size:"mini",placeholder:t.$t("goods.商品名称")},on:{clear:function(e){return t.clearFilter("name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem()}},model:{value:t.filterData.name,callback:function(e){t.$set(t.filterData,"name",e)},expression:"filterData.name"}})],1),i("el-form-item",{staticStyle:{"margin-bottom":"0"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.filterGetItem()}}},[t._v(t._s(t.$t("myinvoice.filter")))]),i("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.clearFilter()}}},[t._v(t._s(t.$t("goods.重置")))])],1)],1)],1),i("el-divider"),i("div",{staticClass:"action"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.goToGoods}},[t._v(t._s(t.$t("storeSetting.管理商品")))]),i("div",{staticClass:"refresh",on:{click:t.getItems}},[i("i",{staticClass:"el-icon-refresh-right"}),i("span",{staticClass:"mg-l-5"},[t._v(t._s(t.$t("storeSetting.刷新")))])])],1),i("el-divider"),t.data.item&&t.data.item.length?i("el-table",{ref:"productTable",attrs:{data:t.data.item,stripe:"",height:"300px"}},[i("el-table-column",{attrs:{label:"",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.statusIpt?i("el-radio",{staticClass:"none-label",attrs:{label:e.row.id},model:{value:t.productData,callback:function(e){t.productData=e},expression:"productData"}},[t._v(t._s(""))]):t._e()]}}],null,!1,768795816)}),i("el-table-column",{attrs:{label:t.$t("goods.商品图片"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("el-image",{staticStyle:{width:"60px",height:"60px",border:"1px solid #ddd","background-color":"#fff"},attrs:{src:t.row.imgUrl,fit:"contain","scroll-container":".main-scroll .el-scrollbar__wrap","preview-src-list":t.row.imgUrlArr}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline"})])])]}}],null,!1,2968517507)}),i("el-table-column",{attrs:{label:t.$t("goods.商品名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",{staticClass:" tx-ellipsis3",staticStyle:{"line-height":"22px"}},[t._v(t._s(e.row.name))])]}}],null,!1,3350555405)}),i("el-table-column",{attrs:{label:t.$t("storeSetting.状态"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.statusIpt?i("el-tag",[t._v(t._s(t.$t("storeSetting.上架")))]):i("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.$t("storeSetting.下架")))])]}}],null,!1,73026675)})],1):i("div",{staticClass:"no-data"},[i("img",{attrs:{src:s("069c")}}),i("div",[t._v(t._s(t.$t("storeSetting.暂无数据"))+"，"),i("span",{on:{click:t.goToGoods}},[t._v(t._s(t.$t("storeSetting.去添加商品")))])])]),i("div",{ref:"tableFooter",staticStyle:{margin:"10px 0 20px"}},[t.data.item&&t.data.item.length?i("el-row",{attrs:{gutter:20}},[i("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[i("div",[i("el-pagination",{attrs:{small:"","current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSize,"pager-count":Number(5),"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),i("el-divider"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeDialog}},[t._v(t._s(t.$t("storeSetting.取消")))]),i("el-button",{attrs:{type:"primary",disabled:!t.productData},on:{click:t.AddGoods}},[t._v(t._s(t.$t("storeSetting.添加")))])],1)],1)],1)},a=[],o=s("5530"),n=(s("a9e3"),s("b0c0"),s("e9c4"),s("d81d"),s("d3b7"),s("159b"),{props:["data","up"],data:function(){return{host:location.host,productItem:{},productData:"",filterData:{name:"",status:""},defaultFilterData:"{}",pageSize:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("".concat(this.$route.name,"RowsPerPage"))?Number(localStorage.getItem("".concat(this.$route.name,"RowsPerPage"))):10,total:0,totalPage:0,loading:!1}},mounted:function(){this.up&&(this.filterData.status=1),this.getItems(),this.defaultFilterData=JSON.stringify(this.filterData)},watch:{$route:"gotoPage","data.menuData":{deep:!0,handler:function(){this.data.menuData.urlData&&(this.productData=this.data.menuData.urlData.id)}}},methods:{getItems:function(){var t=this;this.loading=!0,this.$apiCall("api.VendorShop.vendorFindProducts",{page:this.page,rowsPerPage:this.rowsPerPage,name:this.filterData.name,status:this.filterData.status},(function(e){t.loading=!1,9999==e.ErrorCode?(t.data.item=e.Data.Results.map((function(t){return t.imgUrlArr=JSON.parse(t.imgUrlJson),t.statusIpt="1"==t.status,t})),t.total=Number(e.Data.Pagination.totalCount),t.totalPage=Number(e.Data.Pagination.totalPage),t.$refs.productTable&&(t.$refs.productTable.bodyWrapper.scrollTop=0)):t.$message({message:e.Message,type:"error"})}))},filterGetItem:function(){this.page=1,this.productData="",this.getItems()},clearFilter:function(t){switch(t){case"name":this.filterData.name="";break;default:this.filterData=JSON.parse(this.defaultFilterData)}"none"!=t&&this.toPage(1)},AddGoods:function(){var t=this;this.productItem?(this.data.item.forEach((function(e){e.id==t.productData&&(t.productItem=e)})),"menuEditor"==this.$route.name?this.$emit("selectedProduct",this.productItem):"quotationGoods"==this.$route.name?(this.$parent.form.id=this.productItem.id,this.$parent.form.imgUrl=this.productItem.imgUrl,this.$parent.form.cost=this.productItem.cost,this.$parent.form=Object(o["a"])({},this.$parent.form)):(this.$parent.setting.name=this.productItem.name,this.$parent.setting.cost=this.productItem.cost,this.$parent.setting.imgUrl=this.productItem.imgUrl,this.$parent.setting.id=this.productItem.id,this.$parent.setting=Object(o["a"])({},this.$parent.setting)),this.closeDialog()):this.$message({message:"请选择一件商品",type:"error"})},goToGoods:function(){this.$router.push("/goods-mgr/all")},gotoPage:function(){var t=this;this.page=this.$route.query.page?this.$route.query.page:1,this.$nextTick((function(){t.getItems()}))},toPage:function(t){t!=this.$route.query.page?this.$router.push({query:{page:t,cid:this.$route.query.cid,id:this.$route.query.id}}):this.getItems()},changePageSize:function(t){this.rowsPerPage=t,localStorage.setItem("".concat(this.$route.name,"RowsPerPage"),t),this.getItems()},closeDialog:function(){this.page=1,"quotationGoods"==this.$route.name?this.$router.push({query:{id:this.$route.query.id}}):this.$router.push({query:{cid:this.$route.query.cid}}),this.data.item={},this.productData="",this.productItem={},this.filterData=JSON.parse(this.defaultFilterData),this.data.isShow=!1}},components:{}}),r=n,l=(s("8a3e"),s("2877")),c=Object(l["a"])(r,i,a,!1,null,"786dd6bc",null);e["a"]=c.exports},"8a3e":function(t,e,s){"use strict";s("54fe")},b06d:function(t,e,s){"use strict";s("0242")},bf4e:function(t,e,s){"use strict";s("6c91")},d1f4:function(t,e,s){"use strict";s("64bf")},d81d:function(t,e,s){"use strict";var i=s("23e7"),a=s("b727").map,o=s("1dde"),n=o("map");i({target:"Array",proto:!0,forced:!n},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},e594:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"setting-page"},[s("el-scrollbar",{staticClass:"left"},[t.setting?s("div",{staticClass:"content"},[s("h1",[s("el-link",{attrs:{icon:"el-icon-arrow-left",underline:!1},on:{click:t.goBack}},[t._v(t._s(t.$t("storeSetting.商品信息")))])],1),s("div",{staticClass:"change-box"},[s("div",{staticClass:"add-product"},[s("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[s("span",[t._v(t._s(t.$t("storeSetting.选择商品类目")))]),s("span",{staticClass:"manage",on:{click:t.goToCategory}},[t._v(t._s(t.$t("storeSetting.管理商品类目")))])]),t.setting&&!t.setting.isOpen?s("div",{staticClass:"select-product",on:{click:t.openSelect}},[s("i",{staticClass:"el-icon-plus"}),s("div",[t._v(t._s(t.$t("storeSetting.选择商品分类")))])]):s("div",{staticClass:"change-product"},[s("div",{staticClass:"category-name"},[t.setting&&t.setting.categoryItem&&t.setting.categoryItem.themeUrl?s("img",{staticClass:"default",attrs:{src:t.setting.categoryItem.themeUrl}}):s("div",{staticClass:"default"}),t.setting&&t.setting.categoryItem?s("div",{staticClass:" tx-ellipsis1"},[t._v(t._s(t.setting.categoryItem.name))]):t._e()]),s("div",{staticClass:"action-but"},[s("div",{on:{click:t.openSelect}},[t._v(t._s(t.$t("storeSetting.更换")))]),s("div",{on:{click:t.deleteCate}},[t._v(t._s(t.$t("storeSetting.删除")))])])])]),s("div",{staticStyle:{margin:"30px 0"}},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.标题")))]),s("el-input",{model:{value:t.setting.listTitle,callback:function(e){t.$set(t.setting,"listTitle",e)},expression:"setting.listTitle"}})],1),s("div",[s("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.展示排数")))]),s("el-slider",{attrs:{min:Number(1),max:Number(4)},model:{value:t.setting.rowNum,callback:function(e){t.$set(t.setting,"rowNum",e)},expression:"setting.rowNum"}})],1),s("div",[s("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.每排展示个数")))]),s("el-slider",{attrs:{min:Number(1),max:Number(4)},model:{value:t.setting.colNum,callback:function(e){t.$set(t.setting,"colNum",e)},expression:"setting.colNum"}})],1),s("div",[s("div",[t._v(t._s(t.$t("storeSetting.文本对齐")))]),s("div",{staticClass:"d-flex"},t._l(t.aligns,(function(e){return s("div",{key:e.id,staticClass:"align-text",class:{active:t.num==e.id},on:{click:function(s){return t.changeAlign(e)}}},[s("i",{class:e.icon})])})),0)]),s("div",{staticStyle:{margin:"30px 0"}},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.更多按钮文案")))]),s("el-input",{model:{value:t.setting.moreText,callback:function(e){t.$set(t.setting,"moreText",e)},expression:"setting.moreText"}})],1),s("div",{staticClass:"change-seach"},[s("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.显示商品价格")))]),s("el-switch",{model:{value:t.setting.displayPrice,callback:function(e){t.$set(t.setting,"displayPrice",e)},expression:"setting.displayPrice"}})],1)])]):t._e()]),s("el-scrollbar",{ref:"rightBox",staticClass:"right"},[s("div",{staticClass:"content"},[s("demoHeader",{attrs:{data:t.$store.state.configJson.header,headerMenu:t.headerMenu}}),s("demoBody",{attrs:{data:t.setting,header:t.$store.state.configJson.header}}),s("demoFooter",{attrs:{setting:t.$store.state.configJson.footer}})],1)]),s("div",{staticClass:"action"},[s("el-button",{attrs:{type:"danger",size:"medium"},on:{click:t.del}},[t._v(t._s(t.$t("storeSetting.删除该组件")))]),s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v(t._s(t.$t("storeSetting.完成")))])],1),s("el-dialog",{attrs:{title:t.$t("storeSetting.商品分类"),width:"300px",visible:t.addCategoryVisible},on:{"update:visible":function(e){t.addCategoryVisible=e}}},[s("div",{staticClass:"dialog-area"},[s("div",{staticClass:"search"},[s("el-input",{attrs:{size:"mini","suffix-icon":"el-icon-search"},on:{input:t.searchCategory},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),s("el-scrollbar",[t.displayItems.length>0?s("div",{staticClass:"item-area"},[t._l(t.displayItems,(function(e,i){return[s("div",{key:i},[s("div",{staticClass:"item-list"},[s("div",{staticClass:"left"},[s("el-image",{staticClass:"image",attrs:{fit:"contain",src:e.themeUrl}}),s("div",{staticClass:"name"},[t._v(t._s(e.name))])],1),s("div",[s("el-radio",{attrs:{label:e},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[s("div",{staticStyle:{display:"none"}},[t._v("1")])])],1)]),s("el-divider")],1)]})),s("div",{staticStyle:{height:"20px"}})],2):t._e()]),0==t.displayItems.length?s("div",{staticClass:"no-category"},[t._v(" "+t._s(t.$t("storeSetting.暂无类目"))+" "),s("router-link",{attrs:{to:"/category-mgr"}},[t._v(t._s(t.$t("storeSetting.前去添加")))])],1):t._e(),s("div",{staticClass:"control"},[s("router-link",{staticClass:"mg-r-20",attrs:{to:"/category-mgr"}},[t._v(t._s(t.$t("storeSetting.管理商品类目")))]),s("i",{staticClass:"refresh mg-r-20 el-icon-refresh",on:{click:t.getCategory}}),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addCategoryHandle}},[t._v(t._s(t.$t("storeSetting.添加")))])],1)],1)])],1)},a=[],o=(s("d3b7"),s("159b"),s("4e82"),s("e9c4"),s("b0c0"),s("ac1f"),s("5319"),s("826e")),n=s("8c3c"),r=s("db46"),l={data:function(){return{selectedItem:{},categoryItem:{},headerMenu:[],keyword:"",addCategoryVisible:!1,displayItems:[],dialogProductList:{isShow:!1,item:null},num:1,aligns:[{value:"left",label:"居左",id:1,icon:"iconfont icon-duiqifangshi_zuo"},{value:"center",label:"居中",id:3,icon:"iconfont icon-duiqifangshi_zhong"},{value:"right",label:"居右",id:2,icon:"iconfont icon-duiqifangshi_you"}],isSave:!1,exist:!1,setting:{cid:this.$route.query.cid,type:"hotProduct",productItems:[],isOpen:!1,listTitle:"",moreText:"",displayPrice:!0,rowNum:3,colNum:3,textAlign:"left",categoryItem:{}}}},components:{demoHeader:o["a"],demoBody:n["a"],demoFooter:r["a"]},beforeRouteLeave:function(t,e,s){if(this.isSave)s();else{var i=confirm(this.$t("logistics.当前页面还未保存，确定要离开吗?"));i?s():s(!1)}},created:function(){var t=this;this.$apiCall("api.VendorShop.getShopConfig",{},(function(e){9999==e.ErrorCode&&0!==e.Data.Results.length&&(e.Data.Results.header.activeMenu&&e.Data.Results.menu.forEach((function(s){s.id==e.Data.Results.header.activeMenu&&(t.headerMenu=s)})),t.$store.commit("getShopConfig",e.Data.Results),t.$store.state.configJson.sort.forEach((function(e){e.cid==t.$route.query.cid&&(t.setting=JSON.parse(JSON.stringify(e)),t.aligns.forEach((function(e){e.value==t.setting.textAlign&&(t.num=e.id)})),t.selectedItem=t.setting.categoryItem,t.addCategoryHandle(),t.exist=!0,t.$nextTick((function(){t.$refs.rightBox.wrap.scrollTop=document.getElementById("row".concat(e.cid)).offsetTop})))})),t.exist||(t.setting={cid:t.$route.query.cid,type:"hotProduct",productItems:[],isOpen:!1,listTitle:"",moreText:"",displayPrice:!0,rowNum:3,colNum:3,textAlign:"left",categoryItem:{}},t.exist=!0,t.$store.commit("addStoreComponent",t.setting)))}))},methods:{goBack:function(){this.$router.push({name:"storeSettingMain"})},deleteCate:function(){this.setting.categoryItem=this.selectedItem=this.categoryItem={},this.setting.productItems=[],this.setting.isOpen=!1},searchCategory:function(t){var e=[];this.items.forEach((function(s){s.name.indexOf(t)>-1&&e.push(s)})),this.displayItems=e,console.log(this.displayItems)},addCategoryHandle:function(){var t=this;this.$apiCall("api.VendorShop.vendorFindProducts",{categoryId:this.selectedItem.id,status:1,page:1,rowsPerPage:16},(function(e){if(9999==e.ErrorCode){var s=[];t.setting.productItems=e.Data.Results,t.setting.productItems.forEach((function(t){1==t.status&&s.push(t)})),t.setting.productItems=s,t.setting.categoryItem=t.selectedItem,t.addCategoryVisible=!1,t.keyword="",t.setting.isOpen=!0}else t.$message({message:e.Message,type:"error"})}))},getCategory:function(){var t=this;this.$apiCall("api.ProductCategory.findByUser",{level:1},(function(e){9999==e.ErrorCode&&(t.items=e.Data.Results,t.displayItems=e.Data.Results)}))},addCategory:function(){this.addCategoryVisible=!0},changeAlign:function(t){this.num=t.id,this.setting.textAlign=t.value},save:function(){var t=this;this.isSave=!0,this.exist&&this.$store.commit("setStoreComponent",this.setting),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},(function(e){9999==e.ErrorCode?t.$elementMessage("保存成功","success"):t.$message({message:e.Message,type:"error"})}))},del:function(){var t=this;this.isSave=!0,this.$store.commit("delComponent",this.setting.cid),this.setting=JSON.parse(JSON.stringify(this.$store.state.configJson)),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},(function(e){9999==e.ErrorCode?(t.$elementMessage("删除成功","success"),t.$router.replace({name:"storeSettingMain"})):t.$message({message:e.Message,type:"error"})}))},openSelect:function(){this.getCategory(),this.addCategoryVisible=!0},goToCategory:function(){this.$router.push("/category-mgr")}}},c=l,d=(s("871c"),s("b06d"),s("2877")),u=Object(d["a"])(c,i,a,!1,null,"c1ecd418",null);e["default"]=u.exports}}]);