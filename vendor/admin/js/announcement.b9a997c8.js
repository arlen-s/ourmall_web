(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["announcement"],{"1e81":function(e,t,a){},2612:function(e,t,a){"use strict";a("bd1b")},"65b3":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));class n{constructor(e,t){let a=this;a.addDom(e),e.on("text-change",(t,n,o)=>{a.replaceSourceEditorContent(e)});let n=document.createElement("button");n.innerHTML=">_",n.onclick=function(){a.showSourceEditor(e)};let o=document.createElement("span");o.setAttribute("class","ql-formats ee-flag-source"),o.appendChild(n),e.container.previousSibling.appendChild(o)}addDom(e){if(!e.container.querySelector(".ql-ee-source")){var t=document.createElement("textarea");t.style.cssText="width: 100%;margin: 0px;background: rgb(29, 29, 29);box-sizing: border-box;color: rgb(204, 204, 204);font-size: 13px;outline: none;padding: 12px 15px;line-height: 1.42;font-family: Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;position: absolute;top: 0;bottom: 0;border: none;";var a=e.addContainer("ql-ee-source");a.style.cssText="display:none",a.appendChild(t)}}replaceSourceEditorContent(e){let t=e.container.querySelector(".ql-editor"),a=e.container.querySelector(".ql-ee-source"),n=a.querySelector("textarea");n.value=t.innerHTML}showSourceEditor(e){let t=e.container.querySelector(".ql-editor"),a=e.container.querySelector(".ql-ee-source"),n=a.querySelector("textarea");"none"===a.style.display?(a.style.display="",n.value=t.innerHTML):(a.style.display="none",t.innerHTML=n.value)}}window.eeSourceBtn=n},9960:function(e,t,a){"use strict";a("1e81")},afe5:function(e,t,a){},bd1b:function(e,t,a){},db2c:function(e,t,a){"use strict";a("afe5")},e40d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box"},[t("el-row",[t("el-col",{staticClass:"header-box"},[t("div",{staticClass:"coles"},[t("img",{attrs:{src:a("f741"),alt:""}}),t("span",{staticClass:"tit"},[e._v(" "+e._s(e.$t("announcement.公告管理")))])]),t("div",{staticClass:"add-box"},[t("i",{staticClass:"el-icon-plus"}),t("span",{staticClass:"add",on:{click:e.handleAdd}},[e._v(e._s(e.$t("announcement.新增")))])])])],1),t("el-card",{staticClass:"box-card mg-b-20"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:e.$t("announcement.标题")}},[t("el-input",{attrs:{placeholder:"公告标题"},model:{value:e.formInline.title,callback:function(t){e.$set(e.formInline,"title",t)},expression:"formInline.title"}})],1),t("el-form-item",{attrs:{label:e.$t("announcement.状态")}},[t("el-select",{attrs:{placeholder:e.$t("announcement.区域")},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},[t("el-option",{attrs:{label:e.$t("announcement.全部"),value:"0"}}),t("el-option",{attrs:{label:e.$t("announcement.上架"),value:"1"}}),t("el-option",{attrs:{label:e.$t("announcement.下架"),value:"2"}})],1)],1),t("el-form-item",{attrs:{label:e.$t("announcement.时间")}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":e.$t("announcement.至"),"start-placeholder":e.$t("announcement.开始日期"),"end-placeholder":e.$t("announcement.结束日期"),"value-format":"yyyy-MM-dd"},model:{value:e.formInline.timer,callback:function(t){e.$set(e.formInline,"timer",t)},expression:"formInline.timer"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.handleInquire}},[e._v(e._s(e.$t("announcement.查询")))]),t("el-button",{attrs:{type:"danger"},on:{click:e.cancel}},[e._v(e._s(e.$t("announcement.取 消")))])],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"title",label:e.$t("announcement.公告标题"),align:"center"}}),t("el-table-column",{attrs:{prop:"status",align:"center",label:e.$t("announcement.状态")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"==t.row.isShow?e.$t("announcement.上架"):e.$t("announcement.下架")))]}}])}),t("el-table-column",{attrs:{prop:"timeCreated",label:e.$t("announcement.创建时间"),align:"center"}}),t("el-table-column",{attrs:{prop:"address",label:e.$t("announcement.操作"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handleAdd("edit",a.row)}}},[e._v(e._s(e.$t("announcement.编辑")))]),t("span",{staticClass:"place"}),t("el-link",{attrs:{type:"danger"},on:{click:function(t){return e.delMsg(a.row)}}},[e._v(e._s(e.$t("announcement.删除")))]),t("br"),"1"==a.row.isShow?t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handleSoldOut(a.row,"2")}}},[e._v(e._s(e.$t("announcement.下架")))]):t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handleSoldOut(a.row,"1")}}},[e._v(e._s(e.$t("announcement.上架")))])]}}])})],1)],1),e.tableData.length?t("el-row",{attrs:{gutter:20}},[t("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[t("div",[t("el-pagination",{attrs:{"current-page":e.pageGroup.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.pageGroup.pageSizes,"page-size":e.pageGroup.rowsPerPage,total:Number(e.pageGroup.totalCount)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e(),t("addAnnouncementDialog",{attrs:{dialogAddData:e.dialogData},on:{closeDialog:e.changeData}})],1)},o=[],i=function(){var e=this,t=e._self._c;return t("div",{},[t("el-dialog",{attrs:{title:e.$t("announcement.公告"),visible:e.dialogAddData.isShow,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.dialogAddData,"isShow",t)}}},[t("el-form",{ref:"form",attrs:{model:e.dialogAddData.data,"label-width":"auto",rules:e.rules}},[t("el-form-item",{attrs:{label:e.$t("announcement.公告标题"),prop:"title"}},[t("el-input",{model:{value:e.dialogAddData.data.title,callback:function(t){e.$set(e.dialogAddData.data,"title",t)},expression:"dialogAddData.data.title"}})],1),t("el-form-item",{attrs:{label:e.$t("announcement.公告内容"),prop:"content"}},[t("div",{staticStyle:{border:"1px solid #ccc"}},[t("quill-editor",{ref:"goodsEditor",staticStyle:{"min-height":"300px"},attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)}},model:{value:e.dialogAddData.data.content,callback:function(t){e.$set(e.dialogAddData.data,"content",t)},expression:"dialogAddData.data.content"}}),t("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"file",id:"uploadEditorImg",accept:"image/jpeg, image/png, image/gif",multiple:""},on:{change:function(t){return e.uploadEditorImgFile(t)}}})],1)])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v(e._s(e.$t("announcement.取 消")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("2")}}},[e._v(e._s(e.$t("announcement.仅保存")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("1")}}},[e._v(e._s(e.$t("announcement.保存并发布")))])],1)],1)],1)},l=[],r=a("65b3"),s=(a("a753"),a("8096"),a("14e1"),a("953d"));s["Quill"].register("modules/eeSourceBtn",r["a"]);var d={props:["dialogAddData"],data(){return{form:{title:"",desc:"",description:""},rules:{title:[{required:!0,message:this.$t("announcement.请输入公告名称"),trigger:"blur"},{max:100,message:this.$t("announcement.长度最大100字符"),trigger:"blur"}],content:[{required:!0,message:this.$t("announcement.请填写公告信息"),trigger:"blur"}]},editorOption:{modules:{syntax:{highlight:e=>hljs.highlightAuto(e).value},eeSourceBtn:{},toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image"]],handlers:{image:e=>{document.getElementById("uploadEditorImg").click()}}}},placeholder:this.$t("goodsEdit.编辑商品描述")}}},components:{quillEditor:s["quillEditor"]},computed:{},watch:{},methods:{handleClose(){this.$emit("closeDialog",!1)},save(e){this.$refs["form"].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={id:this.dialogAddData.data.id||"",title:this.dialogAddData.data.title,content:this.dialogAddData.data.content,isShow:e};this.$apiCall("api.SiteMessage.addMsg",t,e=>{9999==e.ErrorCode&&(this.tableData=e.Data.Results,this.$message.success("success"),this.$emit("closeDialog",!1))})}})},resetForm(e){this.$refs[e].resetFields(),this.$emit("closeDialog",!1)},uploadBase64(e){let t=e.split("base64,").pop(),a=e.match(/data:image\/(.*);base64,.*/)[1],n={imgUrlBase64:t,ext:a};this.$apiCall("api.Comment.uploadImg",n,e=>{if(9999==e.ErrorCode){let t=e.Data.Results.imgUrl,a=this.$refs.goodsEditor.quill,n=a.getSelection().index;a.insertEmbed(n,"image",t),a.setSelection(n+1)}else this.$message({message:e.Message,type:"error"})})},onEditorBlur(){document.querySelector(".ql-editor").setAttribute("data-placeholder",this.$t("goodsEdit.编辑商品描述"))},onEditorFocus(){document.querySelector(".ql-editor").removeAttribute("data-placeholder","")},uploadEditorImgFile(e){e.target.files[0].size&&(this.fileList2(e.target),e.target.value="")},fileList2(e){let t=e.files;for(let a=0;a<t.length;a++){if(t[a].size>2097152)return this.$message({message:this.$t("goodsEdit.图片大小不能超过{num}MB",{num:2}),type:"error"}),t.splice(a,1),void a--;let e=t[a];if(e.type.indexOf("image")>-1){let t=new FileReader;t.readAsDataURL(e),t.onload=e=>{this.uploadBase64(e.target.result)}}else this.$message({message:this.$t("goodsEdit.不能识别此文件"),type:"error"})}}},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){const e=this.editor;null!=e&&e.destroy()},destroyed(){},activated(){}},c=d,u=(a("9960"),a("2877")),g=Object(u["a"])(c,i,l,!1,null,null,null),m=g.exports,p={components:{addAnnouncementDialog:m},data(){return{formInline:{timer:"",status:"0",title:""},loading:!1,tableData:[],dialogData:{isShow:!1,data:{title:"",content:"",id:""}},pageGroup:{pageSizes:[10,20,50,100],page:1,rowsPerPage:20,totalCount:0,totalPage:0}}},computed:{},watch:{},methods:{handleInquire(){this.getList()},cancel(){this.formInline={timer:"",status:"",title:""},this.getList()},handleAdd(e,t){this.dialogData.isShow=!0,"edit"==e&&(this.dialogData.data={...t})},getList(){let e={titleLike:this.formInline.title,isShow:this.formInline.status,page:this.pageGroup.page,rowsPerPage:this.pageGroup.rowsPerPage,timeCreatedFrom:this.formInline.timer[0],timeCreatedTo:this.formInline.timer[1]};this.loading=!0,this.$apiCall("api.SiteMessage.finds",e,e=>{9999==e.ErrorCode&&(this.tableData=e.Data.Results,this.loading=!1,this.pageGroup={...e.Data.Pagination})})},handleSoldOut(e,t){this.$apiCall("api.SiteMessage.addMsg",{isShow:t,id:e.id},e=>{9999==e.ErrorCode&&this.getList()})},toPage(e){this.pageGroup.page=e,this.getList()},changePageSize(e){this.pageGroup.page=rowsPerPage,this.getList()},changeData(e){this.dialogData.isShow=!1,this.dialogData.data={id:"",title:"",content:""},this.getList()},delMsg(e){let t=[];t[0]=e.id,this.$apiCall("api.SiteMessage.delete",{ids:t},e=>{9999==e.ErrorCode&&this.getList()})}},created(){this.getList()},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},h=p,f=(a("2612"),a("db2c"),Object(u["a"])(h,n,o,!1,null,"459854c1",null));t["default"]=f.exports},f741:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAhCAYAAABTERJSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMLSURBVFhHxZcxqE5hGMcPGQwGwx0ohdyBMhgMBoNCGQwGg8FgUAwGg7IY1B3uYDAYDJSRkgyURN1F3cFASZQrRBkotyiK4v873/u/nt7ec3zf+c53/ev3ved7z/nO95zned7neU81YW0V8+K6mGLif2pW/E58EodF71oljoo99bdm7RTfhQ2Cm6JXL10T3Jg/WsNEizYJX28IHQ80ti6IeGP+bBgdFF+Ff3dFjKXTIhoCJWPw1nGxvf72V7tFNOiY6CSSLxphSsbYez/FGRFDgkHOI0byaiSRqNw4GmFKxlwW8Zo5EXPrnPC520wMKyyPrs1pChO1JV7HKrJWi1eCeR5yqLyjaH0U8aY5bTc6IOKD4BGLc54nrNUKgZWH0pjrrMCgNm0WbweHRZEjhIm8+SW4/oNAeGdaLIr1TDwQtrAL0TMUQjzJsl3LRNKM8PVUZSvO89vGxByWaMw94fnHwqsIrzvcX9J3tEP4+pmV+uilEibdEoQCkfgsa/RD3Bgc1h7bNzisngrOIcK1ZFlX8gTmj+zt98IPGxP2FBNJXlXzeKZvPRRXB4fVBlE/sfQyjWhjGpGTeXoSxqDnaUTr0hhXXOzanp+alDFb0og+pxEvWSxly/OLkzCG5kiTRBiyMDhcChd6l0ZkYxb6NobiyV7FfYjc8WrZm0YUQ2Zj6jlneFea6swzYaNYUW8E83RqF0S85etn8cwj0ZfuC+rMXbFffBOIpWyj8ZZz5kga0Wt6E26iFJd60wnh1dCkvDfhDRuB6G1UY3tpm/AyfyKowoSy7k1t2iXatg+QF70okjl2/UvC4t6eZ/8zlKicbf2rZAw5cl7ENwN3bsSIt3wu3562itj6hzklY+L7ErwQMdwnhc+xaxhZpc04lIyJ205C43xB5BCdm3N43E1zZF0U/hNTMgYvsFchxFH5zjHu/Dop39u2JXAUqyYackeMLZLPxQ03xx1dSYSIZI6LgByKoRtL3AgX11vFFlFheeG3EUC7iH1q2RRfhVnm+QvdsoqtJ3mCN/7xllFVfwAYxUWvWHtqCgAAAABJRU5ErkJggg=="}}]);