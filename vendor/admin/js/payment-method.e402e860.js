(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["payment-method"],{"584e":function(a,s,t){"use strict";t("fc53")},bf55:function(a,s,t){"use strict";t.r(s);var e=function(){var a=this,s=a.$createElement,t=a._self._c||s;return a.$store.state.userInfo.canUseWallet?a._e():t("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:a.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"contentpanel"},[t("div",{ref:"pageHeader",staticClass:"pagetitle"},[a._m(0)]),t("div",{staticClass:"pagebody"},[t("el-card",[t("el-row",[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"open-wrap"},[t("div",{staticClass:"title-flex"},[t("h2",[a._v("支付服务提供商")]),2!=a.$store.state.userInfo.source?t("router-link",{attrs:{to:"/billList"}},[a._v("账单详情")]):a._e()],1),t("el-divider"),t("h3",[a._v("您的商店通过以下提供商接受付款：")]),t("div",{staticClass:"type"},[a._v("PayPal Express Checkout")]),t("el-row",[t("el-col",{attrs:{span:12,offset:2}},[t("el-card",[t("div",{staticClass:"title"},[t("div",{staticClass:"icon1"},[t("i",{staticClass:"iconfont icon-paypal-text"})]),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("div",{staticClass:"icon2",style:{background:a.payBind.bg}}),t("div",[a._v(" "+a._s(a.payBind.text)+" ")])])]),2==a.$store.state.userInfo.isPayBind?[t("p",{staticClass:"msg"},[a._v("第三方提供商")]),t("p",{staticClass:"msg"},[a._v("通过PayPal接收外币付款")])]:a._e(),1==a.$store.state.userInfo.isPayBind?[t("div",{staticClass:"flex"},[t("div",[a._v("快速结账")]),t("div",[a._v(" 首笔销售后，PayPal 将通过 "+a._s(a.paypal.username)+" 向您发送电子邮件，说明如何设置 PayPal 商家帐户以及如何提现您的资金。 ")])]),t("div",{staticClass:"flex"},[t("div",[a._v("关联账户")]),t("div",[a._v(a._s(a.paypal.username))])]),t("div",{staticStyle:{"padding-top":"30px","font-weight":"600"}},[a._v(" 信用卡、手续费由Paypal收取 ")])]:a._e(),t("div",{staticClass:"tx-right"},[t("el-button",{attrs:{type:"primary"},on:{click:a.open}},[a._v(a._s(a.payBind.btn))])],1)],2)],1)],1)],1)])],1)],1)],1),t("el-dialog",{attrs:{title:"Binding PayPal payment method",visible:a.bindPayParams.isShow,width:"30%"},on:{"update:visible":function(s){return a.$set(a.bindPayParams,"isShow",s)}}},[t("el-divider"),t("el-form",{ref:"ruleForm",attrs:{"label-width":"100px",model:a.bindPayParams,rules:a.rules}},[t("el-form-item",{attrs:{label:"Account：",prop:"username"}},[t("el-input",{staticStyle:{width:"calc(100% - 40px)"},model:{value:a.bindPayParams.username,callback:function(s){a.$set(a.bindPayParams,"username",s)},expression:"bindPayParams.username"}})],1),t("el-form-item",{attrs:{label:"Password：",prop:"password"}},[t("el-input",{staticStyle:{width:"calc(100% - 40px)"},attrs:{type:"password"},model:{value:a.bindPayParams.password,callback:function(s){a.$set(a.bindPayParams,"password",s)},expression:"bindPayParams.password"}})],1),t("el-form-item",{attrs:{label:"signature：",prop:"signature"}},[t("el-input",{staticStyle:{width:"calc(100% - 40px)"},model:{value:a.bindPayParams.signature,callback:function(s){a.$set(a.bindPayParams,"signature",s)},expression:"bindPayParams.signature"}})],1),t("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"info"}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"paypal-tips"},[t("div",{staticClass:"left"},[t("i",{staticClass:"el-icon-s-opportunity"})]),t("div",{staticClass:"right"},[t("h3",[a._v("Tips")]),t("p",[a._v("Log in to your PayPal account -> Account Settings -> API access -> NVP/SOAP API intergration (Classic), get the account information you need ")])])])])]),t("el-form-item",[t("el-button",{staticStyle:{"margin-right":"80px"},on:{click:function(s){a.bindPayParams.isShow=!1}}},[a._v("取消")]),t("el-button",{attrs:{type:"primary",loading:a.bindPayParams.loading},on:{click:function(s){return a.submitForm("ruleForm")}}},[a._v("确定")])],1)],1)],1),t("el-dialog",{attrs:{title:"停用PayPal收款方式",visible:a.closePayParams.isShow,width:"30%"},on:{"update:visible":function(s){return a.$set(a.closePayParams,"isShow",s)}}},[t("el-divider"),t("div",{staticClass:"dialog-body"},[t("p",[a._v(" 停用此收款方式，客户无法进行线上paypal支付， 您确认停用此收款方式？ ")])]),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(s){a.closePayParams.isShow=!1}}},[a._v("取消")]),t("el-button",{attrs:{type:"primary",loading:a.closePayParams.loading},on:{click:a.closePayPal}},[a._v("确定")])],1)],1)],1)},i=[function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{staticClass:"left d-flex"},[t("div",{staticClass:"title mg-r-20"},[t("i",{staticClass:"fa fa-cog",attrs:{"aria-hidden":"true"}}),t("h2",[a._v("设置收款方式")])]),t("div",{staticClass:"mg-t-10"})])}],r=(t("5ad0"),{data:function(){return{loading:!1,paypal:{},bindPayParams:{isShow:!1,loading:!1,username:"",password:"",signature:""},bindPayParamsDefault:"{}",rules:{username:{required:!0,message:"请输入PayPal账户",trigger:"blur"},password:{required:!0,message:"请输入PayPal密码",trigger:"blur"},signature:{required:!0,message:"请输入加密字符串",trigger:"blur"}},closePayParams:{isShow:!1,loading:!1},closePayParamsDefault:"{}"}},computed:{payBind:function(){var a={};return a=1==this.$store.state.userInfo.isPayBind?{bg:"rgba(0, 168, 84, 1)",text:"已激活",btn:"停用PayPal",tips:"停用成功"}:{bg:"rgba(240, 65, 42, 1)",text:"未激活",btn:"激活PayPal",tips:"激活成功"},a}},mounted:function(){this.bindPayParamsDefault=JSON.stringify(this.bindPayParams),this.closePayParamsDefault=JSON.stringify(this.closePayParams),this.getPayPal()},methods:{getPayPal:function(){var a=this;this.loading=!0,this.$apiCall("api.User.bindAccountPayment",{},(function(s){a.loading=!1,"9999"==s.ErrorCode?a.paypal=s.Data.Results:a.$message({message:s.Message,type:"error"})}))},open:function(){1==this.$store.state.userInfo.isPayBind?(this.closePayParams=JSON.parse(this.closePayParamsDefault),this.closePayParams.isShow=!0):"{}"!=JSON.stringify(this.paypal)&&this.paypal?this.closePayPal():(this.bindPayParams=JSON.parse(this.bindPayParamsDefault),this.bindPayParams.isShow=!0)},submitForm:function(a){var s=this;this.$refs[a].validate((function(a){a&&(s.bindPayParams.loading=!0,s.$apiCall("api.AccountPayment.vendorBindAccountPayment",{username:s.bindPayParams.username,password:s.bindPayParams.password,signature:s.bindPayParams.signature,accountType:3},(function(a){s.bindPayParams.loading=!1,"9999"==a.ErrorCode?(s.$message({message:"绑定成功",type:"success"}),s.getUser(),s.getPayPal(),s.bindPayParams.isShow=!1):s.$message({message:a.Message,type:"error"})})))}))},closePayPal:function(){var a=this;this.closePayParams.loading=!0,this.$apiCall("api.AccountPayment.changeIsPayBind",{},(function(s){a.closePayParams.loading=!1,"9999"==s.ErrorCode?(a.$message({message:a.payBind.tips,type:"success"}),a.getUser(),a.closePayParams.isShow=!1):a.$message({message:s.Message,type:"error"})}))},getUser:function(){var a=this;this.$apiCall("api.User.checkLoginStatus",{},(function(s){localStorage.setItem("apiUserToken",s.Data.Results.apiUserToken),localStorage.setItem("apiUserId",s.Data.Results.id),localStorage.setItem("userInfo",JSON.stringify(s.Data.Results)),localStorage.getItem("userInfo")&&a.$store.commit("setUserInfo",JSON.parse(localStorage.getItem("userInfo")))}))}}}),l=r,n=(t("584e"),t("cba8")),o=Object(n["a"])(l,e,i,!1,null,"eb25481c",null);s["default"]=o.exports},fc53:function(a,s,t){}}]);