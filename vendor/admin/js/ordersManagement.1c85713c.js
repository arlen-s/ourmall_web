(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ordersManagement"],{"033f":function(t,e,i){"use strict";i("934a")},"052c":function(t,e,i){},"13d5":function(t,e,i){"use strict";var a=i("23e7"),s=i("d58f").left,r=i("a640"),o=i("2d00"),l=i("605d"),n=r("reduce"),d=!l&&o>79&&o<83;a({target:"Array",proto:!0,forced:!n||d},{reduce:function(t){var e=arguments.length;return s(this,t,e,e>1?arguments[1]:void 0)}})},"20c6":function(t,e,i){"use strict";i("052c")},"369a":function(t,e,i){"use strict";i("c21e")},4300:function(t,e,i){"use strict";i("97f4")},4706:function(t,e,i){"use strict";i("a60f")},"4fd3":function(t,e,i){"use strict";i("a112")},"4ff8":function(t,e,i){"use strict";i("74a2")},"54de":function(t,e,i){},5538:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.authData.isShow,title:t.$t("orders.mabang"),width:"800px"},on:{"update:visible":function(e){return t.$set(t.authData,"isShow",e)}}},[e("el-divider"),e("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[e("div",[e("div",{staticClass:"mg-y-20"},[e("span",{staticStyle:{margin:"0 16px",display:"inline-block"}},[t._v(t._s(t.$t("invoice.tokenerp")))]),t.isStaff?[e("span",{staticClass:"mg-r-10"},[t._v(" "+t._s(t.authData.staffData&&t.authData.staffData.secretKey?t.authData.staffData.secretKey:"---")+" ")]),t.authData.staffData&&t.authData.staffData.secretKey?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.authData.staffData.secretKey,expression:"authData.staffData.secretKey",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()]:[e("span",{staticClass:"mg-r-10"},[t._v(t._s(t.$store.state.userInfo&&t.$store.state.userInfo.secretKey?t.$store.state.userInfo.secretKey:"---"))]),t.$store.state.userInfo&&t.$store.state.userInfo.secretKey?e("el-button",{attrs:{size:"mini",type:"text"}},[e("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.$store.state.userInfo.secretKey,expression:"$store.state.userInfo.secretKey",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):t._e()],e("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"mini",type:"text"},on:{click:t.openSecretKey}},[t._v(" "+t._s(t.$t("invoice.usertoken"))+" ")])],2),e("el-alert",{attrs:{title:t.isStaff?t.$t("invoice.将员工令牌授权到马帮ERP之前"):t.$t("invoice.如果已经在erp授权了员工令牌"),type:"warning",closable:!1}})],1)]),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.authData.isShow=!1}}},[t._v("取消")])],1)],1)},s=[],r={props:["authData","isStaff"],data(){return{shopName:"",invoiceInfo:{}}},methods:{openSecretKey(){this.$emit("openSecretKey")},querySearch(t,e){var i=this.authData.shopData,a=t?i.filter(this.createFilter(t)):i;e(a)},createFilter(t){return e=>0===e.value.toLowerCase().indexOf(t.toLowerCase())},handleSelect(t){this.shopName=t.value},onCopy(t){this.$elementMessage(this.$t("successfullyToClipboard"),"success")},onError(t){this.$elementMessage(this.$t("failedToClipboard"),"error")},confirmMoneyFn(){this.tempCode=`${this.invoiceInfo.id}${Date.parse(new Date)}`,this.$apiCall("api.Invoice.setSyncToErp",{invoiceId:this.invoiceInfo.id,shopName:this.shopName,tempCode:this.tempCode},t=>{}),this.DialogLoadingCnt.loadingCnt=0,this.DialogLoadingCnt.isShow=!0,this.getInvocieTime=setInterval(()=>{this.$apiCall("api.Invoice.checkPriceResult",{tempCode:this.tempCode,type:4},t=>{if("9999"==t.ErrorCode){let e=t.Data.Results;Number(e.count)&&Number(e.total)&&(this.DialogLoadingCnt.loadingCnt=e.count/e.total),1!=e.status&&(this.tempCode="",clearInterval(this.getInvocieTime),this.DialogLoadingCnt.isShow=!1,3==e.status&&this.$elementMessage(e.message,"error"),2==e.status&&(this.$elementMessage(this.$t("invoice.storeSet"),"success"),this.confirmMoneyOpen=!1,this.getData()))}})},1e3)}}},o=r,l=i("2877"),n=Object(l["a"])(o,a,s,!1,null,"63bb7ade",null);e["a"]=n.exports},"57b3":function(t,e,i){},"5cd9":function(t,e,i){"use strict";i("97e8")},"605d":function(t,e,i){var a=i("c6b6"),s=i("da84");t.exports="process"==a(s.process)},"611f":function(t,e,i){"use strict";i("ec57")},"63a1":function(t,e,i){"use strict";i("57b3")},"69a3":function(t,e,i){t.exports=i.p+"img/secretKey2.9602a74a.jpg"},"74a2":function(t,e,i){},"776b":function(t,e,i){"use strict";i("a117")},"880f":function(t,e,i){"use strict";i("c520")},"8c6c":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.relateData.isShow,title:t.$t("orders.associated"),width:"800px"},on:{"update:visible":function(e){return t.$set(t.relateData,"isShow",e)},open:t.open}},[e("el-divider"),e("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[e("div",{staticClass:"d-flex",staticStyle:{"margin-bottom":"20px"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:t.$t("orders.spuHolder"),clearable:""},on:{clear:function(e){return t.clearFilter("spu")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.spu,callback:function(e){t.spu=e},expression:"spu"}}),e("el-input",{staticStyle:{width:"200px",margin:"0 20px"},attrs:{placeholder:t.$t("orders.skuHolder"),clearable:""},on:{clear:function(e){return t.clearFilter("sku")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.sku,callback:function(e){t.sku=e},expression:"sku"}}),e("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:t.$t("orders.nameHolder"),clearable:""},on:{clear:function(e){return t.clearFilter("name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("orders.filter")))])],1),e("el-table",{staticClass:"no-hover",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.list}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"","show-header":!1,data:i.row.stocks}},[e("el-table-column",{attrs:{label:t.$t("orders.select"),width:"55"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-radio",{attrs:{label:i.row.sku+"||"+i.row.id},model:{value:t.tableRadio,callback:function(e){t.tableRadio=e},expression:"tableRadio"}},[e("i")])]}}],null,!0)}),e("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"d-flex"},[e("img",{attrs:{src:i.row.propertyImage,width:"60",height:"60"}}),e("div",{staticClass:"mg-l-20"},[e("p",[t._v(t._s(i.row.name))]),e("p",[t._v("SKU: "+t._s(i.row.sku))])])])]}}],null,!0)})],1)]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"d-flex"},[e("img",{attrs:{src:i.row.imgUrl,width:"60",height:"60"}}),e("div",{staticClass:"mg-l-20"},[e("p",[t._v(t._s(i.row.name))]),e("p",[t._v("SPU: "+t._s(i.row.sku))])])])]}}])})],1)],1),e("div",{staticClass:"d-flex",staticStyle:{"justify-content":"center",margin:"20px"}},[e("el-pagination",{attrs:{"current-page":t.page,background:!0,layout:"total, prev, pager, next",total:Number(t.total)},on:{"current-change":t.toPage}})],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.relateData.isShow=!1}}},[t._v(t._s(t.$t("orders.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.relateFn}},[t._v(t._s(t.$t("orders.confirm")))])],1)],1)},s=[],r=(i("14d9"),{props:["relateData"],data(){return{tableRadio:"",page:1,rowsPerPage:10,total:0,totalPage:0,items:[],list:[],sku:"",spu:"",name:"",dealRelation:1}},methods:{filterItem(){this.toPage(1)},clearFilter(t){"sku"==t?this.sku="":"spu"==t&&(this.spu=""),this.name="",this.toPage(1)},open(){this.sku="",this.spu="",this.name="",this.page=1,this.tableRadio="",this.total=Number(this.relateData.Pagination.totalCount),this.totalPage=Number(this.relateData.Pagination.totalPage),this.items=this.relateData.items,this.list=this.relateData.list,$(".el-dialog__body").scrollTop(0)},toPage(t){this.page=t,this.$showLoading(),this.$apiCall("api.VendorShop.vendorFindProducts",{page:this.page,rowsPerPage:10,status:1,sku:this.sku,spu:this.spu,name:this.name},t=>{"9999"==t.ErrorCode?(this.tableRadio="",this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage),this.items=[],this.list=[],t.Data.Results.products.forEach(t=>{t.stocks&&t.stocks.length&&t.stocks.forEach(e=>{this.$set(e,"name",t.name),this.items.push(e)}),this.list.push(t)}),$(".el-dialog__body").scrollTop(0)):this.$elementMessage(t.Message,"error"),this.$hideLoading()})},relateFn(){if(!this.tableRadio)return void this.$elementMessage("Please check a SKU first","error");let t=this.tableRadio.split("||");this.$emit("relateFn",t[0])},clickChange(t,e){}}}),o=r,l=(i("20c6"),i("63a1"),i("2877")),n=Object(l["a"])(o,a,s,!1,null,"6ba4a668",null);e["a"]=n.exports},"934a":function(t,e,i){},"97e8":function(t,e,i){},"97f4":function(t,e,i){},a112:function(t,e,i){},a117:function(t,e,i){},a4ce:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel my-custom-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-order"}),e("h2",[t._v(t._s(t.$t("orders.title")))])])]),e("div",{staticClass:"right"},[2==t.status&&3==t.activeName?[e("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitDeliverEdit")},on:{click:t.openImport}},[t._v(t._s(t.$t("orders.shippinginformation")))]),e("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitDeliverEdit")},on:{click:t.openAuth}},[t._v(t._s(t.$t("orders.authorize")))])]:t._e(),2==t.status&&1==t.activeName?[e("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitOfferEdit")},on:{click:t.openCreate}},[t._v(t._s(t.$t("orders.创建订单")))])]:t._e(),2!=t.status||2!=t.activeName?[e("el-button",{attrs:{type:"primary"},on:{click:t.exportOrder}},[t._v(t._s(t.$t("orders.导出订单")))])]:t._e(),311==t.status?[e("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitPayEdit")},on:{click:t.splitOrder}},[t._v(t._s(t.$t("orders.拆分订单")))])]:t._e()],2)]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("el-card",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("div",{ref:"pageFilter",staticClass:"page-filter"},[e("el-form",{attrs:{inline:!0,size:"mini"}},[2==t.status&&2==t.activeName?[e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("orders.paymentCode"),clearable:""},on:{clear:function(e){return t.clearFilter("sysCode")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.sysCode,callback:function(e){t.$set(t.filterParams,"sysCode",e)},expression:"filterParams.sysCode"}})],1),e("el-form-item",{attrs:{label:t.$t("orders.paymentDate")}},[e("el-date-picker",{key:"date2",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(e){return t.clearFilter("date2")},change:t.dateChange2},model:{value:t.filterParams.date2,callback:function(e){t.$set(t.filterParams,"date2",e)},expression:"filterParams.date2"}})],1)]:[e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("orders.third"),clearable:""},on:{clear:function(e){return t.clearFilter("codeName")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.codeName,callback:function(e){t.$set(t.filterParams,"codeName",e)},expression:"filterParams.codeName"}})],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("orders.orderID"),clearable:""},on:{clear:function(e){return t.clearFilter("orderId")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.orderId,callback:function(e){t.$set(t.filterParams,"orderId",e)},expression:"filterParams.orderId"}})],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("orders.receiver"),clearable:""},on:{clear:function(e){return t.clearFilter("receiverName")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.receiverName,callback:function(e){t.$set(t.filterParams,"receiverName",e)},expression:"filterParams.receiverName"}})],1),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&140694!=t.vendorId&&74!=t.vendorId?e("el-table-column",{attrs:{label:t.$t("transaction.仓库")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.warehouseName||"--"))])]}}],null,!1,605806532)}):t._e(),e("el-form-item",{attrs:{label:t.$t("orders.verdorName")+":"}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("relationshipId")}},model:{value:t.filterParams.relationshipId,callback:function(e){t.$set(t.filterParams,"relationshipId",e)},expression:"filterParams.relationshipId"}},t._l(t.vendorList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.customerName,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("orders.storeName")+":"}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("accountIds")}},model:{value:t.filterParams.accountIds,callback:function(e){t.$set(t.filterParams,"accountIds",e)},expression:"filterParams.accountIds"}},t._l(t.storeList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.shopName,value:t.id}})})),1)],1),6==t.status?[e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("orders.paymentCode"),clearable:""},on:{clear:function(e){return t.clearFilter("sysCode")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.sysCode,callback:function(e){t.$set(t.filterParams,"sysCode",e)},expression:"filterParams.sysCode"}})],1),6!=t.status?e("el-form-item",{attrs:{label:t.$t("orders.paymentDate")}},[e("el-date-picker",{key:"date2",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(e){return t.clearFilter("date2")},change:t.dateChange2},model:{value:t.filterParams.date2,callback:function(e){t.$set(t.filterParams,"date2",e)},expression:"filterParams.date2"}})],1):t._e()]:t._e(),e("el-form-item",{attrs:{label:t.$t("orders.CreateDate")}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(e){return t.clearFilter("date")},change:t.dateChange},model:{value:t.filterParams.date,callback:function(e){t.$set(t.filterParams,"date",e)},expression:"filterParams.date"}})],1)],e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("orders.filter")))]),e("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v(t._s(t.$t("orders.clear")))]),3!=t.billStatus?e("el-button",{attrs:{type:"primary"},on:{click:t.handleAllFilter}},[t._v(t._s(t.$t("orders.allFilter"))+" ")]):t._e()],1),e("el-form-item",{staticStyle:{width:"200px"}}),e("el-form-item",{staticClass:"btns-wrap"},[2==t.status&&1==t.activeName?[e("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitOfferEdit")},on:{click:t.quoteFn}},[t._v(t._s(t.$t("orders.Made")))]),e("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitOfferEdit")},on:{click:t.exportFn}},[t._v(t._s(t.$t("orders.导出未关联商品")))]),e("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitOfferEdit")},on:{click:t.importFn}},[t._v(t._s(t.$t("orders.导入关联")))])]:t._e(),2==t.status&&2==t.activeName?[e("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoicePayCheckEdit")},on:{click:t.payFn}},[t._v(t._s(t.$t("orders.receipt")))]),e("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoicePayCheckEdit")},on:{click:t.payCancelFn}},[t._v(t._s(t.$t("orders.notreceived")))])]:t._e(),4==t.status&&1==t.activeName?[e("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceAbnormalEdit")},on:{click:t.syncFn}},[t._v(t._s(t.$t("orders.synchronized")))])]:t._e(),4==t.status&&2==t.activeName?[e("el-button",{attrs:{type:"primary",disabled:!t.$isRole("invoiceAbnormalEdit")},on:{click:t.quoteFn}},[t._v(t._s(t.$t("orders.重新报价")))])]:t._e()],2)],2)],1),t._l(t.tabList,(function(i,a){return 2!=t.status&&t.tabList.length?e("el-tab-pane",{key:a,attrs:{name:i.name+""}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(i.title)+" "),e("span",{staticClass:"tx-danger"},[t._v("("+t._s(t.vendorAllOrderCntText(i.id))+")")])])]):t._e()}))],2)],1)],1),t.isVipOrder?[e("div",{staticClass:"noVip"},[e("i",{staticClass:"el-icon-info mg-r-10"}),t._v(" "+t._s(t.$t("package.暂无数据，该条信息可能已超{num}天",{num:t.vipOrderReserveDay}))+" ")])]:[2==t.status&&2!=t.activeName||4==t.status&&1==t.activeName?[e("el-table",{key:"gridTable",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark","row-key":t=>t.id},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),e("el-table-column",{attrs:{label:t.$t("orders.third"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-popover",{ref:"popover"+i.row.codeName,attrs:{width:"1000",trigger:"hover",placement:"top-start"}},[e("div",{staticClass:"items"},t._l(i.row.items,(function(a,s){return e("div",{key:i.row.orderId+i.row.codeName+s,staticClass:"d-flex mg-b-15"},[e("img",{attrs:{src:a.imgUrl,width:"80",height:"80"}}),e("div",{staticClass:"mg-l-10"},[e("p",{staticClass:"mg-b-10",staticStyle:{width:"600px"}},[a.vendorProductId?e("el-link",{attrs:{type:"primary",href:`//${t.host.indexOf("sandbox")>-1?"sandboxshop":"shop"}${t.$store.state.userInfo.shop.id}.myourmall.com/item/${a.vendorProductId}/${a.vendorProductName}.html`,target:"_blank"}},[t._v(t._s(a.vendorProductName))]):e("span",[t._v(t._s(a.name))])],1),e("p",{staticClass:"mg-b-10"},[2==a.isManage?[e("span",{staticStyle:{width:"500px",display:"inline-block",color:"#F56C6C"}},[t._v(" SKU: "+t._s(a.vendorSku+"Unable to purchase")+" ")])]:[1!=a.status?[e("span",{staticStyle:{width:"500px",display:"inline-block",color:"#F56C6C"}},[t._v(" SKU: "+t._s(a.vendorSku?a.vendorSku+" Products Off shelf":"null Please make an offer")+" ")])]:[e("span",{staticStyle:{width:"500px",display:"inline-block"}},[t._v(" SKU: "+t._s(a.vendorSku||"null Please make an offer")+" ")])]],e("span",{staticStyle:{width:"200px",display:"inline-block"}},[t._v("Weight："+t._s(a.vendorProductWeight||"---")+" g")])],2),e("p",[e("span",{staticStyle:{width:"200px",display:"inline-block"}},[t._v("Shop price："+t._s(i.row.currency)+" "+t._s(Number(a.price).toFixed(2)))]),e("span",{staticStyle:{width:"300px",display:"inline-block"}},[t._v(" Supply unit price： "),a.vendorSku?e("span",[1!=i.row.discountType&&2!=i.row.discountType||2==a.isManage?[t._v("$ "+t._s(Number(a.vendorPrice).toFixed(2)))]:[e("span",[t._v("$ "+t._s(Number((a.amount-a.amount/i.row.productAmount*i.row.couponAmount)/a.quantity).toFixed(2))+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v("$ "+t._s(Number(a.vendorPrice).toFixed(2)))])])]],2):e("span",{staticStyle:{color:"#F56C6C"}},[t._v("Please make an offer")])]),e("span",{staticStyle:{width:"50px",display:"inline-block","text-align":"left"}},[t._v(" * "+t._s(a.quantity)+" ")]),e("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[1!=i.row.discountType&&2!=i.row.discountType||2==a.isManage?[t._v("$ "+t._s(Number(a.quantity*a.vendorPrice).toFixed(2)))]:[e("span",[t._v("$ "+t._s(Number(a.amount-a.amount/i.row.productAmount*i.row.couponAmount).toFixed(2))+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v("$ "+t._s(Number(a.amount).toFixed(2)))])])]],2),2==a.isManage?e("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"right",color:"red"}},[t._v(t._s(t.$t("orders.该商品已被剔除")))]):t._e()])]),2==t.status&&1==t.activeName?e("div",{staticClass:"d-flex",staticStyle:{flex:"1","justify-content":"flex-end","margin-right":"5px"}},[2==a.isManage||a.vendorPrice?t._e():e("el-link",{attrs:{type:"primary",disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{click:function(e){return t.unable(a)}}},[t._v(t._s(t.$t("orders.tabBar5")))])],1):t._e()])})),0),e("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e("span",[t._v(t._s(i.row.codeName))])])])]}}],null,!1,3390302118)}),e("el-table-column",{attrs:{label:t.$t("orders.orderID"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{ref:"popover"+a.row.orderId,attrs:{width:"1000",trigger:"hover",placement:"top-start"}},[e("div",{staticClass:"items"},t._l(a.row.items,(function(i,s){return e("div",{key:a.row.orderId+a.row.codeName+s,staticClass:"d-flex mg-b-15"},[e("img",{attrs:{src:i.imgUrl,width:"80",height:"80"}}),e("div",{staticClass:"mg-l-10"},[e("p",{staticClass:"mg-b-10",staticStyle:{width:"600px"}},[i.vendorProductId?e("el-link",{attrs:{type:"primary",href:`//${t.host.indexOf("sandbox")>-1?"sandboxshop":"shop"}${t.$store.state.userInfo.shop.id}.myourmall.com/item/${i.vendorProductId}/${i.vendorProductName}.html`,target:"_blank"}},[t._v(t._s(i.vendorProductName))]):e("span",[t._v(t._s(i.name))])],1),e("p",{staticClass:"mg-b-10"},[2==i.isManage?[e("span",{staticStyle:{width:"500px",display:"inline-block",color:"#F56C6C"}},[t._v(" SKU: "+t._s(i.vendorSku+"Unable to purchase")+" ")])]:[1!=i.status?[e("span",{staticStyle:{width:"500px",display:"inline-block",color:"#F56C6C"}},[t._v(" SKU: "+t._s(i.vendorSku?i.vendorSku+" Products Off shelf":"null Please make an offer")+" ")])]:[e("span",{staticStyle:{width:"500px",display:"inline-block"}},[t._v(" SKU: "+t._s(i.vendorSku||"null Please make an offer")+" ")])]],e("span",{staticStyle:{width:"200px",display:"inline-block"}},[t._v("Weight："+t._s(i.vendorProductWeight||"---")+" g")])],2),e("p",[e("span",{staticStyle:{width:"200px",display:"inline-block"}},[t._v("Shop price："+t._s(a.row.currency)+" "+t._s(Number(i.price).toFixed(2)))]),e("span",{staticStyle:{width:"300px",display:"inline-block"}},[t._v(" Supply unit price： "),i.vendorSku?e("span",[1!=a.row.discountType&&2!=a.row.discountType||2==i.isManage?[t._v("$ "+t._s(Number(i.vendorPrice).toFixed(2)))]:[e("span",[t._v("$ "+t._s(Number((i.amount-i.amount/a.row.productAmount*a.row.couponAmount)/i.quantity).toFixed(2))+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v("$ "+t._s(Number(i.vendorPrice).toFixed(2)))])])]],2):e("span",{staticStyle:{color:"#F56C6C"}},[t._v("Please make an offer")])]),e("span",{staticStyle:{width:"50px",display:"inline-block","text-align":"left"}},[t._v(" * "+t._s(i.quantity)+" ")]),e("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[1!=a.row.discountType&&2!=a.row.discountType||2==i.isManage?[t._v("$ "+t._s(Number(i.quantity*i.vendorPrice).toFixed(2)))]:[e("span",[t._v("$ "+t._s(Number(i.amount-i.amount/a.row.productAmount*a.row.couponAmount).toFixed(2))+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v("$ "+t._s(Number(i.amount).toFixed(2)))])])]],2),2==i.isManage?e("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"right",color:"red"}},[t._v(t._s(t.$t("orders.该商品已被剔除")))]):t._e()])]),2==t.status&&1==t.activeName?e("div",{staticClass:"d-flex",staticStyle:{flex:"1","justify-content":"flex-end","margin-right":"5px"}},[2==i.isManage||i.vendorPrice?t._e():e("el-link",{attrs:{type:"primary",disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{click:function(e){return t.unable(i)}}},[t._v(t._s(t.$t("orders.tabBar5")))])],1):t._e()])})),0),e("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e("span",[t._v(t._s(a.row.orderId||"---"))]),(2!=t.status||2!=t.activeName&&1!=t.activeName)&&1==a.row.isSplit?["zh"==t.$i18n.locale?e("img",{staticStyle:{"margin-left":"10px"},attrs:{src:i("fb0f")}}):e("img",{staticStyle:{"margin-left":"10px"},attrs:{src:i("c33b")}})]:t._e()],2)])]}}],null,!1,2700652949)}),e("el-table-column",{attrs:{label:t.$t("orders.verdorName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(t._s(i.row.customer?i.row.customer.name:"---"))])]}}],null,!1,2822081424)}),e("el-table-column",{attrs:{label:t.$t("orders.storeName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.store||"---"))])]}}],null,!1,389551764)}),e("el-table-column",{attrs:{label:t.$t("orders.CreateDate"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t.$moment(i.row.timeCreated).format("ll [at] LTS")||"---"))])]}}],null,!1,4292911871)}),e("el-table-column",{attrs:{label:t.$t("orders.address"),"min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.zip?i.row.shippingJsonInfo.zip:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.address1?i.row.shippingJsonInfo.address1:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.city?i.row.shippingJsonInfo.city:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.province?i.row.shippingJsonInfo.province:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.country?i.row.shippingJsonInfo.country:"---")+" ")]),e("span",[t._v(t._s(i.row.receiverAddress||"---"))])])]}}],null,!1,442848476)}),e("el-table-column",{attrs:{label:t.$t("orders.receiver"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.receiverName||"---"))])]}}],null,!1,1004791253)}),4==t.status?[e("el-table-column",{attrs:{label:t.$t("orders.logistics"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.shippingMethodArr&&i.row.shippingMethodArr.length?[e("el-select",{attrs:{size:"small"},on:{change:function(e){return t.filterShippingMethod(e,i.row)}},model:{value:i.row.shippingMethodId,callback:function(e){t.$set(i.row,"shippingMethodId",e)},expression:"scope.row.shippingMethodId"}},t._l(i.row.shippingMethodArr,(function(i){return e("el-option",{key:i.id,attrs:{label:`${i.name} [${i.agingDaysBegin?i.agingDaysBegin:0}-${i.agingDaysEnd?i.agingDaysEnd:0}${t.$t("logistics.天")}]`,value:i.id}})})),1)]:e("span",[t._v("---")])]}}],null,!1,3920950275)}),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&140694!=t.vendorId&&74!=t.vendorId?e("el-table-column",{attrs:{label:t.$t("transaction.仓库")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.warehouseName||"--"))])]}}],null,!1,605806532)}):t._e(),e("el-table-column",{attrs:{label:t.$t("orders.logisticsFee"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[3==i.row.discountType?e("span",[e("span",[t._v("0 ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v(t._s(i.row.shippingMethodItem?i.row.shippingMethodItem.fee:"---"))])])]):e("span",[t._v(t._s(i.row.shippingMethodItem?i.row.shippingMethodItem.fee:"---"))])]}}],null,!1,54970795)}),e("el-table-column",{attrs:{label:t.$t("orders.tradeAmount"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.discountType?e("span",[e("span",[t._v(t._s(i.row.payAmount||"---")+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v(t._s(i.row.realAmount||"---"))])])]):e("span",[t._v(t._s(i.row.realAmount||"---"))])]}}],null,!1,757038887)})]:t._e(),2==t.status&&1==t.activeName?[e("el-table-column",{attrs:{label:t.$t("orders.offerItem"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.unBindQuantity||"---"))])]}}],null,!1,580575434)})]:t._e(),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&140694!=t.vendorId&&74!=t.vendorId?e("el-table-column",{attrs:{label:t.$t("transaction.仓库")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.warehouseName||"--"))])]}}],null,!1,605806532)}):t._e(),2==t.status&&3==t.activeName?[e("el-table-column",{attrs:{label:t.$t("orders.logistics"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(" "+t._s(i.row.trackCompany?`${i.row.trackCompany}${i.row.trackNumber?`:${i.row.trackNumber} [${i.row.agingDaysBegin?i.row.agingDaysBegin:0}-${i.row.agingDaysEnd?i.row.agingDaysEnd:0}${t.$t("logistics.天")}]`:`[${i.row.agingDaysBegin?i.row.agingDaysBegin:0}-${i.row.agingDaysEnd?i.row.agingDaysEnd:0}${t.$t("logistics.天")}]`}`:"---")+" ")])]}}],null,!1,872972531)}),e("el-table-column",{attrs:{label:t.$t("orders.logisticsFee"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[3==i.row.discountType?e("span",[e("span",[t._v("0 ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v(t._s(i.row.trackFee||"---"))])])]):e("span",[t._v(t._s(i.row.trackFee||"---"))])]}}],null,!1,614115627)}),e("el-table-column",{attrs:{label:t.$t("orders.tradeAmount"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.discountType?e("span",[e("span",[t._v(t._s(i.row.payAmount||"---")+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v(t._s(i.row.realAmount||"---"))])])]):e("span",[t._v(t._s(i.row.realAmount||"---"))])]}}],null,!1,757038887)})]:t._e(),e("el-table-column",{attrs:{label:t.$t("orders.operate"),width:"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[2==t.status&&1==t.activeName?e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitOfferEdit")},on:{click:function(e){return t.quoteFn("row",i.row)}}},[t._v(t._s(t.$t("orders.Made")))]):t._e(),2==t.status&&3==t.activeName?e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoiceWaitDeliverEdit")},on:{click:function(e){return t.markShippedOpen(i.row)}}},[t._v(t._s(t.$t("orders.mark")))]):t._e(),4==t.status?e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoiceAbnormalEdit")},on:{click:function(e){return t.syncFn("row",i.row)}}},[t._v(t._s(t.$t("orders.synchronized")))]):t._e()],1)]}}],null,!1,2261769658)}),2!=t.status||2!=t.activeName&&1!=t.activeName?[e("el-table-column",{attrs:{label:t.$t("quotation.备注"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(t._s(i.row.remark||"---"))])]}}],null,!1,627357406)})]:t._e()],2)]:2==t.status&&2==t.activeName?[e("el-table",{key:"gridTable",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark","row-key":t=>t.id},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),e("el-table-column",{attrs:{label:"pay code",width:"300"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.accountPayment&&i.row.accountPayment.sysCode?i.row.accountPayment.sysCode:"---"))])]}}])}),e("el-table-column",{attrs:{label:"pay time",width:"300"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t.$moment.unix(i.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.tradeAmount"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.discountType?e("span",[e("span",[t._v(t._s(i.row.payAmount||"---")+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v(t._s(i.row.totalAmount||"---"))])])]):e("span",[t._v(t._s(i.row.realAmount||"---"))])]}}])}),e("el-table-column",{attrs:{label:"Quantity",width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.shopifyOrderCnt?e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.shopifyOrderCnt(i.row)}}},[t._v(t._s(i.row.shopifyOrderCnt))]):e("span",[t._v("---")])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.voucherUrl")},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.voucherUrl?e("div",{staticClass:"demo-image__preview"},[e("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:i.row.voucherUrl,"preview-src-list":i.row.voucherUrlPreview}})],1):e("span",[t._v("---")])]}}])}),2==t.activeName?e("el-table-column",{attrs:{label:t.$t("orders.operate"),width:"120",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[1==i.row.paymentType?e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoicePayCheckEdit")},on:{click:function(e){return t.payFn("row",i.row)}}},[t._v(t._s(t.$t("orders.receipt")))]):t._e(),1==i.row.paymentType?e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoicePayCheckEdit")},on:{click:function(e){return t.payCancelFn("row",i.row)}}},[t._v(t._s(t.$t("orders.notreceived")))]):t._e()],1)]}}],null,!1,205070949)}):t._e()],1)]:[e("el-table",{key:"gridTable3"+t.activeName,ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark","row-key":t=>t.id},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),e("el-table-column",{attrs:{label:t.$t("orders.third"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-popover",{ref:"popover"+i.row.codeName,attrs:{width:"1000",trigger:"hover",placement:"top-start"}},[e("div",{staticClass:"items"},t._l(i.row.items,(function(a,s){return e("div",{key:i.row.orderId+i.row.codeName+s,staticClass:"d-flex mg-b-15"},[e("img",{attrs:{src:a.imgUrl,width:"80",height:"80"}}),e("div",{staticClass:"mg-l-10"},[e("p",{staticClass:"mg-b-10",staticStyle:{width:"600px"}},[a.vendorProductId?e("el-link",{attrs:{type:"primary",href:`//${t.host.indexOf("sandbox")>-1?"sandboxshop":"shop"}${t.$store.state.userInfo.shop.id}.myourmall.com/item/${a.vendorProductId}/${a.vendorProductName}.html`,target:"_blank"}},[t._v(t._s(a.vendorProductName))]):e("span",[t._v(t._s(a.name))])],1),e("p",{staticClass:"mg-b-10"},[2==a.isManage?[e("span",{staticStyle:{width:"500px",display:"inline-block",color:"#F56C6C"}},[t._v(" SKU: "+t._s(a.vendorSku+"Unable to purchase")+" ")])]:[1!=a.status?[e("span",{staticStyle:{width:"500px",display:"inline-block",color:"#F56C6C"}},[t._v(" SKU: "+t._s(a.vendorSku?a.vendorSku+" Products Off shelf":"null Please make an offer")+" ")])]:[e("span",{staticStyle:{width:"500px",display:"inline-block"}},[t._v(" SKU: "+t._s(a.vendorSku||"null Please make an offer")+" ")])]],e("span",{staticStyle:{width:"200px",display:"inline-block"}},[t._v("Weight："+t._s(a.vendorProductWeight||"---")+" g")])],2),e("p",[e("span",{staticStyle:{width:"200px",display:"inline-block"}},[t._v("Shop price："+t._s(i.row.currency)+" "+t._s(Number(a.price).toFixed(2)))]),e("span",{staticStyle:{width:"300px",display:"inline-block"}},[t._v(" Supply unit price： "),a.vendorSku?e("span",[1!=i.row.discountType&&2!=i.row.discountType||2==a.isManage?[t._v("$ "+t._s(Number(a.vendorPrice).toFixed(2)))]:[e("span",[t._v("$ "+t._s(Number((a.amount-a.amount/i.row.productAmount*i.row.couponAmount)/a.quantity).toFixed(2))+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v("$ "+t._s(Number(a.vendorPrice).toFixed(2)))])])]],2):e("span",{staticStyle:{color:"#F56C6C"}},[t._v("Please make an offer")])]),e("span",{staticStyle:{width:"50px",display:"inline-block","text-align":"left"}},[t._v(" * "+t._s(a.quantity)+" ")]),e("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[1!=i.row.discountType&&2!=i.row.discountType||2==a.isManage?[t._v("$ "+t._s(Number(a.quantity*a.vendorPrice).toFixed(2)))]:[e("span",[t._v("$ "+t._s(Number(a.amount-a.amount/i.row.productAmount*i.row.couponAmount).toFixed(2))+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v("$ "+t._s(Number(a.amount).toFixed(2)))])])]],2),2==a.isManage?e("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"right",color:"red"}},[t._v(t._s(t.$t("orders.该商品已被剔除")))]):t._e()])]),2==t.status&&1==t.activeName?e("div",{staticClass:"d-flex",staticStyle:{flex:"1","justify-content":"flex-end","margin-right":"5px"}},[2==a.isManage||a.vendorPrice?t._e():e("el-link",{attrs:{type:"primary",disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{click:function(e){return t.unable(a)}}},[t._v(t._s(t.$t("orders.tabBar5")))])],1):t._e()])})),0),e("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e("span",[t._v(t._s(i.row.codeName))])])])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.orderID"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{ref:"popover"+a.row.orderId,attrs:{width:"1000",trigger:"hover",placement:"top-start"}},[e("div",{staticClass:"items"},t._l(a.row.items,(function(i,s){return e("div",{key:a.row.orderId+a.row.codeName+s,staticClass:"d-flex mg-b-15"},[e("img",{attrs:{src:i.imgUrl,width:"80",height:"80"}}),e("div",{staticClass:"mg-l-10"},[e("p",{staticClass:"mg-b-10",staticStyle:{width:"600px"}},[i.vendorProductId?e("el-link",{attrs:{type:"primary",href:`//${t.host.indexOf("sandbox")>-1?"sandboxshop":"shop"}${t.$store.state.userInfo.shop.id}.myourmall.com/item/${i.vendorProductId}/${i.vendorProductName}.html`,target:"_blank"}},[t._v(t._s(i.vendorProductName))]):e("span",[t._v(t._s(i.name))])],1),e("p",{staticClass:"mg-b-10"},[2==i.isManage?[e("span",{staticStyle:{width:"500px",display:"inline-block",color:"#F56C6C"}},[t._v(" SKU: "+t._s(i.vendorSku+"Unable to purchase")+" ")])]:[1!=i.status?[e("span",{staticStyle:{width:"500px",display:"inline-block",color:"#F56C6C"}},[t._v(" SKU: "+t._s(i.vendorSku?i.vendorSku+" Products Off shelf":"null Please make an offer")+" ")])]:[e("span",{staticStyle:{width:"500px",display:"inline-block"}},[t._v(" SKU: "+t._s(i.vendorSku||"null Please make an offer")+" ")])]],e("span",{staticStyle:{width:"200px",display:"inline-block"}},[t._v("Weight："+t._s(i.vendorProductWeight||"---")+" g")])],2),e("p",[e("span",{staticStyle:{width:"200px",display:"inline-block"}},[t._v("Shop price："+t._s(a.row.currency)+" "+t._s(Number(i.price).toFixed(2)))]),e("span",{staticStyle:{width:"300px",display:"inline-block"}},[t._v(" Supply unit price： "),i.vendorSku?e("span",[1!=a.row.discountType&&2!=a.row.discountType||2==i.isManage?[t._v("$ "+t._s(Number(i.vendorPrice).toFixed(2)))]:[e("span",[t._v("$ "+t._s(Number((i.amount-i.amount/a.row.productAmount*a.row.couponAmount)/i.quantity).toFixed(2))+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v("$ "+t._s(Number(i.vendorPrice).toFixed(2)))])])]],2):e("span",{staticStyle:{color:"#F56C6C"}},[t._v("Please make an offer")])]),e("span",{staticStyle:{width:"50px",display:"inline-block","text-align":"left"}},[t._v(" * "+t._s(i.quantity)+" ")]),e("span",{staticStyle:{width:"100px",display:"inline-block","text-align":"right"}},[1!=a.row.discountType&&2!=a.row.discountType||2==i.isManage?[t._v("$ "+t._s(Number(i.quantity*i.vendorPrice).toFixed(2)))]:[e("span",[t._v("$ "+t._s(Number(i.amount-i.amount/a.row.productAmount*a.row.couponAmount).toFixed(2))+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v("$ "+t._s(Number(i.amount).toFixed(2)))])])]],2),2==i.isManage?e("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"right",color:"red"}},[t._v(t._s(t.$t("orders.该商品已被剔除")))]):t._e()])]),2==t.status&&1==t.activeName?e("div",{staticClass:"d-flex",staticStyle:{flex:"1","justify-content":"flex-end","margin-right":"5px"}},[2==i.isManage||i.vendorPrice?t._e():e("el-link",{attrs:{type:"primary",disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{click:function(e){return t.unable(i)}}},[t._v(t._s(t.$t("orders.tabBar5")))])],1):t._e()])})),0),e("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e("span",[t._v(t._s(a.row.orderId||"---"))]),(2!=t.status||2!=t.activeName&&1!=t.activeName)&&1==a.row.isSplit?["zh"==t.$i18n.locale?e("img",{staticStyle:{"margin-left":"10px"},attrs:{src:i("fb0f")}}):e("img",{staticStyle:{"margin-left":"10px"},attrs:{src:i("c33b")}})]:t._e()],2)])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.verdorName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(t._s(i.row.customer?i.row.customer.name:"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.storeName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.store||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.CreateDate"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t.$moment(i.row.timeCreated).format("ll [at] LTS")||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.address"),"min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.zip?i.row.shippingJsonInfo.zip:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.address1?i.row.shippingJsonInfo.address1:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.city?i.row.shippingJsonInfo.city:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.province?i.row.shippingJsonInfo.province:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.country?i.row.shippingJsonInfo.country:"---")+" ")]),e("span",[t._v(t._s(i.row.receiverAddress||"---"))])])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.receiver"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.receiverName||"---"))])]}}])}),2!=t.activeName&&3!=t.activeName?[e("el-table-column",{attrs:{label:t.$t("orders.logistics"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(i){return[3==i.row.status?e("span",[i.row.shippingMethodArr?e("span",[i.row.shippingMethodArr.length&&i.row.shippingMethodArr[0]?e("div",[t._v(t._s(i.row.shippingMethodArr[0].name)+" ["+t._s(i.row.shippingMethodArr[0].agingDaysBegin?i.row.shippingMethodArr[0].agingDaysBegin:0)+"-"+t._s(i.row.shippingMethodArr[0].agingDaysEnd?i.row.shippingMethodArr[0].agingDaysEnd:0)+t._s(t.$t("logistics.天"))+"]")]):e("div",{staticClass:"tx-middle"},[t._v(" --- "),e("i",{staticClass:"el-icon-warning mg-l-5",staticStyle:{"font-size":"20px",cursor:"pointer"},on:{click:function(e){return t.shippedFn(i.row)}}})])]):t._e()]):e("span",[t._v(" "+t._s(i.row.trackCompany?`${i.row.trackCompany}${i.row.trackNumber?`:${i.row.trackNumber} [${i.row.agingDaysBegin?i.row.agingDaysBegin:0}-${i.row.agingDaysEnd?i.row.agingDaysEnd:0}${t.$t("logistics.天")}]`:`[${i.row.agingDaysBegin?i.row.agingDaysBegin:0}-${i.row.agingDaysEnd?i.row.agingDaysEnd:0}${t.$t("logistics.天")}]`}`:"---")+" ")])]}}],null,!1,1238121305)}),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&140694!=t.vendorId&&74!=t.vendorId?e("el-table-column",{attrs:{label:t.$t("transaction.仓库")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.warehouseName||"--"))])]}}],null,!1,605806532)}):t._e(),e("el-table-column",{attrs:{label:t.$t("orders.logisticsFee"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[3==i.row.status?e("span",[i.row.shippingMethodArr?e("span",[t._v(t._s(i.row.shippingMethodArr.length&&i.row.shippingMethodArr[0]?i.row.shippingMethodArr[0].fee:"---"))]):t._e()]):e("span",[3==i.row.discountType?e("span",[e("span",[t._v("0 ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v(t._s(i.row.trackFee||"---"))])])]):e("span",[t._v(t._s(i.row.trackFee||"---"))])])]}}],null,!1,2083164091)}),e("el-table-column",{attrs:{label:t.$t("orders.tradeAmount"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[3==i.row.status?e("span",[i.row.shippingMethodArr?e("span",[i.row.itemAmount?e("span",[t._v(t._s(i.row.shippingMethodArr.length&&i.row.shippingMethodArr[0]?(Number(i.row.shippingMethodArr[0].fee)+Number(i.row.itemAmount)).toFixed(2):"---"))]):e("span",[t._v(t._s(i.row.shippingMethodArr.length&&i.row.shippingMethodArr[0]?Number(i.row.shippingMethodArr[0].fee):"---"))])]):e("span",[t._v(t._s(i.row.itemAmount?Number(i.row.itemAmount).toFixed(2):"---"))])]):e("span",[i.row.discountType?e("span",[e("span",[t._v(t._s(i.row.payAmount||"---")+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v(t._s(i.row.realAmount.toFixed(2)||"---"))])])]):e("span",[t._v(t._s(i.row.realAmount.toFixed(2)||"---"))])])]}}],null,!1,1020267375)})]:t._e(),6==t.status?[e("el-table-column",{attrs:{label:t.$t("orders.status"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t.statusArr[i.row.status]?t.statusArr[i.row.status].text:"---"))])]}}],null,!1,2321464157)})]:t._e(),311==t.status?[e("el-table-column",{attrs:{label:t.$t("orders.payStatus"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(i){return[3==i.row.status?e("div",[e("span",[t._v(t._s(t.$t("orders.status1")))])]):11==i.row.status?e("div",[e("span",[t._v(t._s(t.$t("orders.status2")))])]):e("div",[e("span",[t._v("---")])])]}}],null,!1,4134086874)})]:t._e(),4==t.status&&2==t.activeName?[e("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!t.$isRole("invoiceAbnormalEdit")},on:{click:function(e){return t.quoteFn("row",i.row)}}},[t._v(t._s(t.$t("orders.重新报价")))])]}}],null,!1,1262317929)})]:t._e(),2!=t.status||2!=t.activeName&&1!=t.activeName?[e("el-table-column",{attrs:{label:t.$t("quotation.备注"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(t._s(i.row.remark||"---"))])]}}],null,!1,627357406)})]:t._e()],2)]]],2)],1)],1),t.items.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),e("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:120}}),e("dialogQuote",{attrs:{quoteData:t.dialogQuoteInfo},on:{openRelate:t.openRelate}}),e("dialogRelate",{attrs:{relateData:t.dialogRelateInfo},on:{relateFn:t.relateFn}}),e("dialogImport",{attrs:{importData:t.dialoImportInfo},on:{submitUpload:t.submitUpload}}),e("dialogCreateOrder",{attrs:{data:t.dialogCreateInfo},on:{createUpload:t.createUpload}}),e("dialoAuth",{attrs:{authData:t.dialoAuthInfo},on:{openSecretKey:t.openSecretKey}}),e("dialogKey",{attrs:{keyData:t.dialoKeyInfo},on:{openAddComment:t.openAddComment}}),e("dialogLogistic",{attrs:{dialogLogistic:t.dialogLogistic}}),e("dialogAssociation",{attrs:{dialogAssociation:t.dialogAssociation}}),e("DialogEditComment",{attrs:{DialogEditComment:t.DialogEditComment}}),e("dialogMarkShipped",{attrs:{dialogMarkShipped:t.dialogMarkShipped},on:{saveMarkShipped:t.saveMarkShipped}}),e("orderCnt",{attrs:{data:t.dialogOrderCnt}}),e("dialogSplit",{attrs:{keyData:t.dialogSplitInfo},on:{splitOrderFn:t.splitOrderFn}}),e("filterOrder",{attrs:{filterData:t.filterDialog},on:{callBackFilter:t.changeBackData,callBackCloseFilter:t.closeFilter}}),e("order-fail",{attrs:{failData:t.failData},on:{callBackFail:t.changeFail}})],1)},s=[],r=(i("14d9"),function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.dialogLogistic.isShow,width:"800px","show-close":!1,"before-close":t.closeHandle,title:""},on:{"update:visible":function(e){return t.$set(t.dialogLogistic,"isShow",e)}}},[e("el-row",{staticStyle:{"word-break":"break-word"}},[e("el-row",{staticClass:"tx-center pd-15"},[1==t.dialogLogistic.errorType?e("div",[t._v(t._s(t.$t("orders.该收货地址未设置物流方式")))]):t._e(),3==t.dialogLogistic.errorType?e("div",[t._v(t._s(t.$t("orders.该订单低于最低可发货重量"))+"("+t._s(t.dialogLogistic.min)+"g)")]):t._e(),2==t.dialogLogistic.errorType?e("div",[t._v(t._s(t.$t("orders.该订单低于最低可发货体积"))+"("+t._s(t.dialogLogistic.min)+"cm"),e("sup",[t._v("3")]),t._v(")")]):t._e(),5==t.dialogLogistic.errorType?e("div",[t._v(t._s(t.$t("orders.该订单高于最高可发货重量"))+"("+t._s(t.dialogLogistic.max)+"g)")]):t._e(),4==t.dialogLogistic.errorType?e("div",[t._v(t._s(t.$t("orders.该订单高于最高可发货体积"))+"("+t._s(t.dialogLogistic.max)+"cm"),e("sup",[t._v("3")]),t._v(")")]):t._e(),6==t.dialogLogistic.errorType?e("div",[t._v(t._s(t.$t("orders.该订单以下商品属性不符合可发货商品的属性要求")))]):t._e(),7==t.dialogLogistic.errorType?e("div",[t._v(t._s(t.$t("orders.该订单商品总重量不符合可发货要求")))]):t._e()]),3==t.dialogLogistic.errorType||5==t.dialogLogistic.errorType?e("el-row",{staticClass:"tx-center pd-15"},[e("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:t.items}},[e("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),e("el-table-column",{attrs:{label:t.$t("orders.重量")+"(g)",prop:"weight"}}),e("el-table-column",{attrs:{label:t.$t("orders.数量"),prop:"number"}}),e("el-table-column",{attrs:{label:t.$t("orders.总重量")+"(g)",prop:"weightTotal"}})],1)],1):t._e(),2==t.dialogLogistic.errorType||4==t.dialogLogistic.errorType?e("el-row",{staticClass:"tx-center pd-15"},[e("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:t.items}},[e("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),e("el-table-column",{attrs:{prop:"volume"}},[e("template",{slot:"header"},[t._v(" "+t._s(t.$t("orders.体积"))+"(cm"),e("sup",[t._v("3")]),t._v(") ")])],2),e("el-table-column",{attrs:{label:t.$t("orders.数量"),prop:"number"}}),e("el-table-column",{attrs:{prop:"volumeTotal"}},[e("template",{slot:"header"},[t._v(" "+t._s(t.$t("orders.总体积"))+"(cm"),e("sup",[t._v("3")]),t._v(") ")])],2)],1)],1):t._e(),6==t.dialogLogistic.errorType?e("el-row",{staticClass:"tx-center pd-15"},[e("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:t.items}},[e("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),e("el-table-column",{attrs:{label:t.$t("orders.属性")},scopedSlots:t._u([{key:"default",fn:function(i){return t._l(i.row.productType,(function(i,a){return e("div",{key:a},[t._v(" "+t._s(t.$dict.productType[i]?t.$t(t.$dict.productType[i].text):"")+" ")])}))}}],null,!1,2337534688)})],1)],1):t._e(),e("el-row",{staticClass:"tx-center"},[e("el-button",{staticClass:"mt-15",attrs:{type:"primary"},on:{click:t.closeHandle}},[t._v(t._s(t.$t("orders.知道了")))])],1)],1)],1)}),o=[],l={props:["dialogLogistic"],data(){return{items:[]}},watch:{"dialogLogistic.items":{handler(){this.dialogLogistic.items&&(this.items=Object.values(this.dialogLogistic.items))},deep:!0,immediate:!0}},mounted(){},methods:{closeHandle(){this.dialogLogistic.isShow=!1,this.dialogLogistic.items=[],this.dialogLogistic.errorType=null,this.dialogLogistic.min="",this.dialogLogistic.max=""}}},n=l,d=(i("611f"),i("2877")),c=Object(d["a"])(n,r,o,!1,null,"a658c750",null),p=c.exports,u=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"dialog-association",attrs:{visible:t.dialogAssociation.isShow,width:"500px",title:""},on:{"update:visible":function(e){return t.$set(t.dialogAssociation,"isShow",e)}}},[t.dialogAssociation.hasProduct?e("el-row",[e("el-row",{staticClass:"tx-center"},[e("h3",{staticStyle:{padding:"40px 0"}},[t._v(t._s(t.$t("orders.之前已有选中商品尚未被处理，是否继续报价？")))]),e("div",[e("el-button",{staticClass:"mt-15",attrs:{type:"primary"},on:{click:t.giveUpFn}},[t._v(t._s(t.$t("orders.放弃")))]),e("el-button",{staticClass:"mt-15",attrs:{type:"primary"},on:{click:t.continueFn}},[t._v(t._s(t.$t("orders.继续报价")))])],1)])],1):t._e(),t.dialogAssociation.hasProduct?t._e():e("el-row",[e("el-row",{staticClass:"tx-flex"},[e("div",[e("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"","show-file-list":!1,"on-change":t.handleUploadChange,"auto-upload":!1}},[e("i",{staticClass:"el-icon-document-copy"}),e("div",{staticClass:"el-upload__text"},[t._v(t._s(t.$t("orders.选择文件")))])])],1),e("div",{staticStyle:{width:"200px"}},[e("div",[t._v(t._s(t.$t("orders.请按规范填写表格仅支持xlsx格式文件")))]),e("div",[t._v(t._s(t.$t("orders.上传的文件不能超过10M"))+" ")])])]),e("el-row",{staticClass:"tx-right pd-30"},[e("el-button",{on:{click:t.cancelFn}},[t._v(t._s(t.$t("orders.取消")))])],1)],1)],1)},h=[],m={props:["dialogAssociation"],mounted(){},methods:{cancelFn(){this.dialogAssociation.isShow=!1},giveUpFn(){this.$apiCall("api.ShopifyOrder.clearWaitBindItem",{},t=>{9999==t.ErrorCode?this.dialogAssociation.hasProduct=!1:this.$elementMessage(t.Message,"error")})},continueFn(){this.$router.push({path:"/orderAssociation"})},handleUploadChange(t){this.$showLoading(),this.$apiCall("api.ShopifyOrder.importNotBindItem",{"@file":t.raw},t=>{this.$hideLoading(),9999==t.ErrorCode?this.$router.push({path:"/orderAssociation"}):this.$elementMessage(t.Message,"error")})}}},g=m,f=(i("369a"),i("4ff8"),Object(d["a"])(g,u,h,!1,null,"d2c8a382",null)),v=f.exports,y=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.quoteData.isShow,title:t.$t("orders.Made"),width:"800px"},on:{"update:visible":function(e){return t.$set(t.quoteData,"isShow",e)}}},[e("el-divider"),e("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.quoteData.items}},[e("el-table-column",{attrs:{label:t.$t("orders.productinfo"),width:"350"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"d-flex"},[e("img",{attrs:{src:i.row.imgUrl,width:"60",height:"60"}}),e("div",{staticClass:"mg-l-20"},[e("p",[t._v(t._s(i.row.name))]),e("p",[t._v("SPU: "+t._s(i.row.spu))]),e("p",[t._v("SKU: "+t._s(i.row.sku))])])])]}}])}),e("el-table-column",{attrs:{prop:"quantity",label:t.$t("orders.qty"),width:"150"}}),e("el-table-column",{attrs:{label:t.$t("orders.price"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.currency)+" "+t._s(i.row.price||0))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.operate")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:t.goto}},[t._v(" "+t._s(t.$t("orders.putaway"))+" ")]),e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(e){return t.openRelate(i.row)}}},[t._v(" "+t._s(t.$t("orders.relate"))+" ")])],1)]}}])})],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.quoteData.isShow=!1}}},[t._v(t._s(t.$t("orders.cancel")))])],1)],1)},b=[],w={props:["quoteData"],data(){return{}},methods:{goto(){let t=this.$router.resolve({name:"AddGoods"});window.open(t.href,"_blank")},openRelate(t){this.$emit("openRelate",t)}}},_=w,k=(i("4fd3"),Object(d["a"])(_,y,b,!1,null,"f06bbfd6",null)),S=k.exports,I=i("8c6c"),C=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.importData.isShow,title:t.$t("invoice.shippinginformation"),width:"800px"},on:{"update:visible":function(e){return t.$set(t.importData,"isShow",e)}}},[e("el-divider"),e("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[e("div",{staticClass:"draw-alert mg-b-20"},[e("el-alert",{attrs:{type:"warning",closable:!1}},[e("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[e("span",[t._v(t._s(t.$t("invoice.templateprovided")))]),e("el-button",{attrs:{type:"text"},on:{click:t.downloadFile}},[t._v(t._s(t.$t("invoice.template")))])],1)])],1),e("div",{staticStyle:{"margin-top":"40px"}},[e("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","auto-upload":!1,"file-list":t.uploadfileList,"on-change":t.handleUploadChange}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v(t._s(t.$t("invoice.fileSelect")))]),[e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v(" "+t._s(t.$t("invoice.shippinginformation"))+" ")])],e("div",{staticClass:"el-upload__tip mg-y-15",staticStyle:{"margin-top":"20px"},attrs:{slot:"tip"},slot:"tip"},[e("p",[t._v(t._s(t.$t("invoice.shippinginformation1")))]),e("p",[t._v(t._s(t.$t("invoice.shippinginformation2")))])])],2)],1)]),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.importData.isShow=!1}}},[t._v("取消")])],1)],1)},x=[],M={props:["importData"],data(){return{uploadfileList:[]}},methods:{downloadFile(){let t="/newFile/orders_impor.xlsx";0==$("#downloadFile").length&&$("body").append('<iframe id="downloadFile" style="display:none"></iframe>');let e=t=>{document.getElementById("downloadFile").src=t};e(t)},handleUploadChange(t){this.uploadfileList=[],this.uploadfileList.push(t)},submitUpload(){if(!this.uploadfileList.length)return void this.$elementMessage(this.$t("invoice.selectfile"),"error");let t=this.uploadfileList[0].raw;this.$emit("submitUpload",t)}}},D=M,P=Object(d["a"])(D,C,x,!1,null,"570c5446",null),N=P.exports,A=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.data.isShow,title:t.$t("orders.创建订单"),width:"600px"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)},close:t.closeDialog}},[e("el-divider"),e("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[e("el-alert",{attrs:{type:"warning",closable:!1}},[e("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[e("span",[t._v(t._s(t.$t("orders.请按照提供的模板文件创建订单")))]),e("el-button",{attrs:{type:"text"},on:{click:t.downloadFile}},[t._v(t._s(t.$t("invoice.template")))])],1)]),e("div",{staticClass:"mg-t-20"},[e("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","auto-upload":!1,"file-list":t.uploadfileList,"on-change":t.handleUploadChange}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v(t._s(t.$t("invoice.fileSelect")))]),e("div",{staticClass:"el-upload__tip mg-y-15",staticStyle:{"margin-top":"20px"},attrs:{slot:"tip"},slot:"tip"},[e("p",[t._v("1."+t._s(t.$t("orders.请按规范填写表格，仅支持xlsx格式文件")))]),e("p",[t._v("2."+t._s(t.$t("orders.上传的文件不能超过2M，只处理前99条数据")))]),e("p",{staticStyle:{color:"#f56c6c"}},[t._v("3."+t._s(t.$t("orders.订单编号处若填写同一编号为同一订单")))])])],1)],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.data.isShow=!1}}},[t._v(t._s(t.$t("orders.取消")))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createUpload()}}},[t._v(t._s(t.$t("orders.提交")))])],1)],1)},O=[],F={props:["data"],data(){return{uploadfileList:[]}},methods:{closeDialog(){this.uploadfileList=[]},downloadFile(){let t="/newFile/orders_creat.xlsx";0==$("#downloadFileCreate").length&&$("body").append('<iframe id="downloadFileCreate" style="display:none"></iframe>');let e=t=>{document.getElementById("downloadFileCreate").src=t};e(t)},handleUploadChange(t){this.uploadfileList=[],this.uploadfileList.push(t)},createUpload(){if(!this.uploadfileList.length)return void this.$elementMessage(this.$t("invoice.selectfile"),"error");if(this.uploadfileList[0].raw.size/1024/1024>2)return void this.$message({message:this.$t("orders.上传文件不能大于2MB"),type:"error"});let t=this.uploadfileList[0].raw;this.$emit("createUpload",t),this.uploadfileList=[]}}},E=F,L=Object(d["a"])(E,A,O,!1,null,"18e4feaa",null),R=L.exports,T=i("5538"),W=i("fa9e"),B=i("cd22"),Z=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("invoice.shippedMark"),visible:t.dialogMarkShipped.isShow,width:"700px"},on:{"update:visible":function(e){return t.$set(t.dialogMarkShipped,"isShow",e)}}},[e("el-divider"),e("div",{staticClass:"d-body"},[t.dialogMarkShipped.item?e("el-row",{staticClass:"pd-x-20",attrs:{gutter:20}},[e("el-col",{staticStyle:{color:"#303133"},attrs:{span:24}},[t._v(" "+t._s(t.dialogMarkShipped.item.name)+" ")]),e("el-col",{attrs:{span:24}},[e("el-form",{attrs:{"label-width":"160px"}},[e("el-form-item",{attrs:{label:t.$t("invoice.Logisticsnumber"),required:""}},[e("el-input",{attrs:{placeholder:t.$t("invoice.Logisticsnumber")},model:{value:t.dialogMarkShipped.trackNumber,callback:function(e){t.$set(t.dialogMarkShipped,"trackNumber",e)},expression:"dialogMarkShipped.trackNumber"}})],1),e("el-form-item",{attrs:{label:t.$t("invoice.Logisticscompany"),required:""}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("invoice.Logisticscompany")},model:{value:t.dialogMarkShipped.trackKey,callback:function(e){t.$set(t.dialogMarkShipped,"trackKey",e)},expression:"dialogMarkShipped.trackKey"}},t._l(t.dialogMarkShipped.shopifyCompany,(function(t){return e("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),1),99==t.dialogMarkShipped.trackKey?e("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:t.$t("invoice.Logisticscompany")},model:{value:t.dialogMarkShipped.trackCompany,callback:function(e){t.$set(t.dialogMarkShipped,"trackCompany",e)},expression:"dialogMarkShipped.trackCompany"}}):t._e()],1),99==t.dialogMarkShipped.trackKey?e("el-form-item",{attrs:{label:t.$t("invoice.Trackinglinks")}},[e("el-input",{attrs:{placeholder:t.$t("invoice.Trackinglinks")},model:{value:t.dialogMarkShipped.trackUrl,callback:function(e){t.$set(t.dialogMarkShipped,"trackUrl",e)},expression:"dialogMarkShipped.trackUrl"}})],1):t._e()],1)],1)],1):t._e()],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogMarkShipped.isShow=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{type:"primary",loading:t.dialogMarkShipped.loading},on:{click:t.saveMarkShipped}},[t._v(" "+t._s(t.$t("invoice.confirm"))+" ")])],1)],1)},J=[],U={props:["dialogMarkShipped"],data(){return{invoiceInfo:{}}},methods:{saveMarkShipped(){if(!this.dialogMarkShipped.trackNumber)return void this.$elementMessage(this.$t("invoice.logisticsnumber"),"error");if(!this.dialogMarkShipped.trackKey)return void this.$elementMessage(this.$t("invoice.logisticscompany"),"error");if(99==this.dialogMarkShipped.trackKey&&!this.dialogMarkShipped.trackCompany)return void this.$elementMessage(this.$t("invoice.logisticscompany"),"error");let t="";this.dialogMarkShipped.shopifyCompany.forEach(e=>{this.dialogMarkShipped.trackKey==e.key&&(t=99!=this.dialogMarkShipped.trackKey?e.name:this.dialogMarkShipped.trackCompany)}),this.$emit("saveMarkShipped")}}},z=U,j=Object(d["a"])(z,Z,J,!1,null,"e9348b1c",null),G=j.exports,Y=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.data.loading,expression:"data.loading"}],attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,title:"订单信息",visible:t.data.isShow,width:"90%"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)}}},[e("el-divider"),e("div",{staticClass:"pd-x-20 mg-y-30"},[e("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.data.items}},[e("el-table-column",{attrs:{prop:"codeName",label:t.$t("orders.third"),width:"150"}}),e("el-table-column",{attrs:{prop:"orderId",label:t.$t("orders.orderID"),width:"150"}}),e("el-table-column",{attrs:{label:t.$t("orders.verdorName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(t._s(i.row.customer?i.row.customer.name:"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.storeName"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.store||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.CreateDate"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.timeCreated||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.address"),"min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.zip?i.row.shippingJsonInfo.zip:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.address1?i.row.shippingJsonInfo.address1:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.city?i.row.shippingJsonInfo.city:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.province?i.row.shippingJsonInfo.province:"---")+" "+t._s(i.row.shippingJsonInfo&&i.row.shippingJsonInfo.country?i.row.shippingJsonInfo.country:"---")+" ")]),e("span",[t._v(t._s(i.row.receiverAddress||"---"))])])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.receiver"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.receiverName||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.logistics"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.trackCompany?`${i.row.trackCompany}${i.row.trackNumber?"："+i.row.trackNumber:""}`:"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.logisticsFee"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(i){return[3==i.row.discountType?e("span",[e("span",[t._v("0 ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v(t._s(i.row.trackFee||"---"))])])]):e("span",[t._v(t._s(i.row.trackFee||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.tradeAmount"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.discountType?e("span",[e("span",[t._v(t._s(i.row.payAmount||"---")+" ")]),e("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[e("span",{staticStyle:{color:"#606266"}},[t._v(t._s(i.row.realAmount||"---"))])])]):e("span",[t._v(t._s(i.row.realAmount||"---"))])]}}])})],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},on:{click:function(e){t.data.isShow=!1}},slot:"footer"},[e("el-button",[t._v(" "+t._s(t.$t("orders.cancel"))+" ")])],1)],1)],1)},Q=[],V={props:["data"],data(){return{}},created(){},mounted(){},methods:{}},X=V,K=(i("4706"),Object(d["a"])(X,Y,Q,!1,null,"1f62c399",null)),H=K.exports,q=function(){var t=this,e=t._self._c;return e("div",{},[e("el-dialog",{attrs:{title:"批量筛选",visible:t.filterData.isShowDialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){return t.$set(t.filterData,"isShowDialog",e)}}},[e("el-row",{staticClass:"pd20"},[e("el-col",{staticClass:"pm20"},[e("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[e("el-radio",{attrs:{label:3}},[t._v("第三方交易号")]),e("el-radio",{attrs:{label:4}},[t._v("订单编号")])],1)],1),e("el-col",[e("el-input",{attrs:{type:"textarea",rows:6,placeholder:"每行一个订单编号（支持excel复制黏贴）,一次最多支持2000个"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("确 定")])],1)],1)],1)},tt=[],et={components:{},props:["filterData"],data(){return{radio:3,textarea:"",param:{show:!1}}},computed:{},watch:{},methods:{handleOk(){if(!this.textarea)return void this.$message.error("请填写内容");let t=this.textarea.split("\n").map(t=>t.replace(/\s+/g,"")).filter(t=>t);3===this.radio?(this.param.ok=1,this.param.order=t):(this.param.ok=2,this.param.order=t),this.textarea="",this.radio=3,this.$emit("callBackFilter",this.param)},handleClose(){this.textarea="",this.radio=3,this.$emit("callBackCloseFilter",this.param)}},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},it=et,at=(i("5cd9"),Object(d["a"])(it,q,tt,!1,null,"bf4b02e0",null)),st=at.exports,rt=function(){var t=this,e=t._self._c;return e("div",{},[e("el-dialog",{attrs:{title:"返回结果",visible:t.failData.isShowDialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){return t.$set(t.failData,"isShowDialog",e)}}},[e("el-row",{staticClass:"pd20"},[e("el-col",{staticClass:"pm20"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.failData.obj,border:""}},[e("el-table-column",{attrs:{label:"编号"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row))])]}}])}),e("el-table-column",{attrs:{prop:"name",label:"描述"}},[[e("span",[t._v("订单不存在或者不满足搜索要求")])]],2)],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.handleClose}},[t._v("确 定")])],1)],1)],1)},ot=[],lt={components:{},props:["failData"],data(){return{tableData:""}},computed:{},watch:{},methods:{handleClose(){this.$emit("callBackFail",this.param)}},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},nt=lt,dt=(i("033f"),Object(d["a"])(nt,rt,ot,!1,null,"fedd14c6",null)),ct=dt.exports,pt=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("orders.拆分订单"),visible:t.keyData.isShow,width:"1000px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.keyData,"isShow",e)}}},[e("el-divider"),e("div",{staticClass:"d-body"},[t._l(t.keyData.items,(function(i,a){return e("el-card",{key:i.id,staticClass:"mg-t-20",attrs:{shadow:"never"}},[e("div",{staticClass:"clearfix d-flex justify-content-between",attrs:{slot:"header"},slot:"header"},[e("div",[t._v(" "+t._s(t.$t("orders.订单编号：{num1}，订单重量：{num2} g",{num1:i.orderId,num2:t.countTotal(i.items,"totalWe")}))+" ")]),e("div",[t._v(" "+t._s(t.$t("orders.新订单将包含{num1}个商品，商品重量 {num2} g，总重量 {num3} g",{num1:i.checkIds?i.checkIds.length:0,num2:i.checkIdsWeight||0,num3:i.checkIdsWeight||0}))+" ")])]),e("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:i.items,"row-key":t=>t.id},on:{"selection-change":function(e){return t.handleSelectionChange(e,i)}}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{label:t.$t("quotation.图片")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-image",{attrs:{src:i.row.imgUrl,width:"50",height:"50"}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),e("span",{staticClass:"dot"},[t._v("...")])]),e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"})])])]}}],null,!0)}),e("el-table-column",{attrs:{label:t.$t("orders.SKU/name"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(" "+t._s(i.row.vendorSku||"--")+" ")]),e("div",[t._v(" "+t._s(i.row.vendorProductName||"--")+" ")])]}}],null,!0)}),e("el-table-column",{attrs:{label:t.$t("quotation.价格")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(" "+t._s(i.row.currency||"")+" "+t._s(i.row.vendorPrice||"--")+" ")])]}}],null,!0)}),e("el-table-column",{attrs:{label:t.$t("orders.总重量")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(" "+t._s(i.row.totalWe||"--")+" g ")])]}}],null,!0)}),e("el-table-column",{attrs:{label:t.$t("orders.数量")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(" "+t._s(i.row.quantity||"--")+" ")])]}}],null,!0)}),e("el-table-column",{attrs:{label:t.$t("orders.库存")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(" "+t._s(i.row.inventory||"--")+" ")])]}}],null,!0)}),e("el-table-column",{attrs:{label:t.$t("orders.拆分数量")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-input-number",{staticStyle:{width:"50px"},attrs:{step:1,"step-strictly":!0,min:1,max:a.row.qty,controls:!1,size:"small"},on:{change:function(e){return t.changeWeight(e,a.row,i)}},model:{value:a.row.splitQty,callback:function(e){t.$set(a.row,"splitQty",e)},expression:"scope.row.splitQty"}})],1)]}}],null,!0)})],1)],1)})),e("div",{staticClass:"mg-t-20"},[e("el-input",{attrs:{placeholder:t.$t("quotation.备注"),width:"500"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],2),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.keyData.isShow=!1}}},[t._v(t._s(t.$t("orders.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.splitOrderFn()}}},[t._v(t._s(t.$t("orders.confirm")))])],1)],1)},ut=[],ht=(i("13d5"),{props:["keyData"],data(){return{remark:""}},methods:{splitOrderFn(){let t=[],e={};if(this.keyData.items.forEach(i=>{i.checkIds&&(i.checkIds.length==i.items.length&&i.items.every(t=>t.splitQty&&t.splitQty==t.qty)&&t.push(i),i.checkIds.forEach(t=>{i.items.forEach(i=>{t==i.id&&(e[t]=i.splitQty)})}))}),t.length){let e=t.map(t=>t.orderId);return void this.$elementMessage(this.$t("orders.{num} 拆分的新订单商品信息同原来一致，拆单无效",{num:e}),"error")}let i={remark:this.remark,itemSplit:JSON.stringify(e)};console.log(i),this.$emit("splitOrderFn",i)},handleSelectionChange(t,e){t.length||(this.$set(e,"checkIds",[]),this.$set(e,"checkIdsWeight",0)),t.forEach(t=>{this.$set(t,"checkIdsWeight",(t.vendorProductWeight?Number(t.vendorProductWeight):0)*(t.splitQty?Number(t.splitQty):0))}),this.$set(e,"checkIds",t.map(t=>t.id)),this.$set(e,"checkIdsWeight",this.countTotal(t,"checkIdsWeight"))},changeWeight(t,e,i){this.$set(e,"checkIdsWeight",(e.vendorProductWeight?Number(e.vendorProductWeight):0)*(e.splitQty?Number(e.splitQty):0)),this.$set(i,"checkIdsWeight",this.countTotal(i.items,"checkIdsWeight"))},countTotal(t,e){let i=0;return i=t.reduce((t,i,a,s)=>i[e]?t+Number(i[e]):t,0),i}}}),mt=ht,gt=(i("880f"),Object(d["a"])(mt,pt,ut,!1,null,"0c558022",null)),ft=gt.exports,vt={data(){return{host:location.host,vipOrderReserveDay:this.$root.$children[0].vipNowData.orderReserveDay,isVipUp:!1,loading:!1,vendorId:localStorage.getItem("vendorId"),filterDialog:{isShowDialog:!1,obj:{}},failData:{isShowDialog:!1,obj:{}},billStatus:1,tableHeight:400,reSizeTime:0,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("ordersRowsPerPage")?Number(localStorage.getItem("ordersRowsPerPage")):10,items:[],total:0,totalPage:0,status:this.$route.params.status?Number(this.$route.params.status):1,activeName:"1",tabList:[],storeList:[],vendorList:[],checkIds:[],checkItems:[],vendorAllOrderCnt:{},filterParams:{date:[],dateFrom:"",dateTo:"",date2:[],dateFrom2:"",dateTo2:"",accountIds:"",relationshipId:"",orderId:"",codeName:"",receiverName:"",sysCode:""},filterParamsDefault:"{}",dialogAssociationDefault:"{}",dialogAssociation:{isShow:!1,hasProduct:!1},dialogLogisticDefault:"{}",dialogLogistic:{isShow:!1,errorType:null,items:[],max:"",min:""},dialogQuoteInfo:{isShow:!1,loading:!1,items:[]},dialogQuoteInfoDefault:"{}",dialogRelateInfo:{isShow:!1,loading:!1,items:[],Pagination:{},item:"",list:[]},dialogRelateInfoDefault:"{}",dialogSplitInfo:{isShow:!1,loading:!1,items:[]},dialogSplitInfoDefault:"{}",dialoImportInfo:{isShow:!1,loading:!1},dialogImportInfoDefault:"{}",dialoAuthInfo:{isShow:!1,loading:!1,shopData:[]},dialogAuthInfoDefault:"{}",dialogCreateInfo:{isShow:!1,loading:!1},dialogCreateInfoDefault:"{}",dialoKeyInfo:{isShow:!1,loading:!1},dialogKeyInfoDefault:"{}",DialogEditComment:{loading:!1,uploadLoading:!1,visible:!1,contents:"",shopName:"",attach:[],commentId:"",item:null},DialogEditCommentDefault:"{}",dialogMarkShipped:{isShow:!1,loading:!1,trackNumber:"",trackCompany:"",realCompany:"",item:null,shopifyCompany:[],trackKey:"",trackUrl:""},dialogMarkShippedDefault:"{}",dialogOrderCnt:{isShow:!1,items:[]},statusArr:{1:{text:this.$t("orders.tabBar14"),type:"warning",val:1},2:{text:this.$t("orders.tabBar1"),type:"warning",val:2},3:{text:this.$t("orders.tabBar13"),type:"warning",val:3},4:{text:this.$t("orders.tabBar2"),type:"warning",val:4},5:{text:this.$t("orders.tabBar3"),type:"warning",val:5},6:{text:this.$t("orders.ordersMenu2"),type:"success",val:6},7:{text:this.$t("orders.ordersMenu4"),type:"success",val:7},8:{text:this.$t("orders.tabBar4"),type:"info",val:8},9:{text:this.$t("orders.tabBar5"),type:"info",val:9},10:{text:this.$t("orders.tabBar6"),type:"info",val:10},11:{text:this.$t("orders.tabBar11"),type:"info",val:11},12:{text:this.$t("orders.tabBar12"),type:"info",val:12},14:{text:this.$t("orders.tabBar144"),type:"info",val:14}},statusPayArr:{1:{text:this.$t("orders.obligation"),type:"danger",val:1},4:{text:this.$t("orders.payFail"),type:"warning",val:4},5:{text:this.$t("orders.suppliernot"),type:"warning",val:5}},checkIds:[],checkItems:[]}},computed:{isVipOrder(){let t=!1;return t=!!(this.filterParams.date[0]&&this.GetDateStr(this.vipOrderReserveDay)>=new Date(this.filterParams.date[0]).getTime())&&0!=this.vipOrderReserveDay,t}},components:{dialogAssociation:v,dialogLogistic:p,dialogQuote:S,dialogRelate:I["a"],dialogImport:N,dialogCreateOrder:R,dialoAuth:T["a"],dialogKey:W["a"],DialogEditComment:B["a"],dialogMarkShipped:G,orderCnt:H,dialogSplit:ft,filterOrder:st,orderFail:ct},watch:{status(){this.$refs.gridTable.clearSelection(),this.filterParams=JSON.parse(this.filterParamsDefault),this.activeName=this.$route.params.active},$route(t,e){this.activeName=this.$route.params.active,this.status=this.$route.params.status?Number(this.$route.params.status):1,t.params.status!==e.params.status&&(this.filterParams=JSON.parse(this.filterParamsDefault)),this.vipOrderReserveDay=this.$root.$children[0].vipNowData.orderReserveDay,this.changeRole(),this.gotoPage()},activeName(){this.$refs.gridTable.clearSelection(),this.toPage(1)}},created(){},mounted(){this.isVip(),this.activeName=this.$route.params.active,this.changeRole(),this.filterParamsDefault=JSON.stringify(this.filterParams),this.dialogAssociationDefault=JSON.stringify(this.dialogAssociation),this.dialogQuoteInfoDefault=JSON.stringify(this.dialogQuoteInfo),this.dialogLogisticDefault=JSON.stringify(this.dialogLogistic),this.dialogRelateInfoDefault=JSON.stringify(this.dialogRelateInfo),this.dialogImportInfoDefault=JSON.stringify(this.dialoImportInfo),this.dialogCreateInfoDefault=JSON.stringify(this.dialogCreateInfo),this.dialogAuthInfoDefault=JSON.stringify(this.dialoAuthInfo),this.dialogKeyInfoDefault=JSON.stringify(this.dialoKeyInfo),this.DialogEditCommentDefault=JSON.stringify(this.DialogEditComment),this.dialogMarkShippedDefault=JSON.stringify(this.dialogMarkShipped),this.dialogSplitInfoDefault=JSON.stringify(this.dialogSplitInfo),this.getItem()},beforeDestroy(){},methods:{splitOrder(){this.checkIds.length?(this.dialogSplitInfo.isShow=!0,this.checkItems.forEach(t=>{t.items.forEach(t=>{this.$set(t,"qty",Number(t.quantity)),this.$set(t,"totalWe",(Number(t.quantity)*Number(t.vendorProductWeight)).toFixed(2))})}),this.dialogSplitInfo.items=this.checkItems):this.$elementMessage("Please select an order first","error")},splitOrderFn(t){this.$showLoading(),this.$apiCall("api.ShopifyOrder.splitShopifyOrder",t,t=>{"9999"==t.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.dialogSplitInfo=JSON.parse(this.dialogSplitInfoDefault),this.$refs.gridTable.clearSelection(),this.getItem()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this)),this.$hideLoading()})},exportOrder(){this.checkIds.length||this.$elementMessage("Please select an order first","error"),this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let t=t=>{document.getElementById("ifilePro").src=t},e="api.ShopifyOrder.exportShopifyOrder2";this.$apiCall(e,{idList:this.checkIds},e=>{"9999"==e.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),t(e.Data.Results)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this)),this.$hideLoading()})},shippedFn(t){this.dialogLogistic.errorType=t.shippingMethodArr.errorType,t.shippingMethodArr.errorSkuList&&(this.dialogLogistic.items=t.shippingMethodArr.errorSkuList),this.dialogLogistic.max=t.shippingMethodArr.max,this.dialogLogistic.min=t.shippingMethodArr.min,this.dialogLogistic.isShow=!0},importFn(){this.$apiCall("api.ShopifyOrder.getWaitBindItem",{},t=>{9999==t.ErrorCode?(t.Data.Results.length>0&&(this.dialogAssociation.hasProduct=!0),this.dialogAssociation.isShow=!0):this.$elementMessage(t.Message,"error")})},exportFn(){this.checkIds.length?this.$apiCall("api.ShopifyOrder.exportNotBindItem",{ids:this.checkIds},t=>{9999==t.ErrorCode?(window.open(t.Data.Results),this.$refs.gridTable.clearSelection(),this.checkIds=[]):this.$elementMessage(t.Message,"error")}):this.$elementMessage(this.$t("orders.selectOrder"),"error")},unable(t){this.$confirm(this.$t("orders.确定将该商品无法采购?"),"Tips",{confirmButtonText:this.$t("shop.确定"),cancelButtonText:this.$t("shop.取消"),type:"warning"}).then(()=>{this.$apiCall("api.ShopifyOrder.setUnableToPurchase",{itemId:t.id},t=>{9999==t.ErrorCode?(this.getItem(),this.$elementMessage(this.$t("orders.已添加到无法采购"),"success")):this.$elementMessage(t.Message,"error")})}).catch(()=>{this.$message({type:"info",message:this.$t("orders.已取消")})})},show(t){this.$refs["popover"+t.orderId].showPopper=!0,this.$nextTick(()=>{this.$refs["popover"+t.orderId].updatePopper()})},enter(t){this.show(t)},leave(t){this.$refs["popover"+t.orderId].showPopper=!1},changeRole(){this.$route.params.status&&2!=this.$route.params.status?3==this.$route.params.status?this.$route.meta.roleWrite="invoiceDeliverEdit":4==this.$route.params.status?this.$route.meta.roleWrite="invoiceAbnormalEdit":5==this.$route.params.status?this.$route.meta.roleWrite="invoiceCompleteEdit":6==this.$route.params.status&&(this.$route.meta.roleWrite="invoiceAllEdit"):this.$route.meta.roleWrite="invoiceWaitEdit"},GetDateStr(t){var e=new Date;return e.setDate(e.getDate()-t),e.getTime()},isVip(){this.$apiCall("api.Admin.getWaitShopifyOrder",{},t=>{9999==t.ErrorCode&&(this.isVipUp=t.Data.Results)})},handleAllFilter(){this.filterDialog.isShowDialog=!0},goToUP(){this.$router.push({name:"pricingUp"})},shopifyOrderCnt(t){this.$showLoading(),this.$apiCall("api.ShopifyOrder.findByVendor",{invoiceId:t.id},t=>{"9999"==t.ErrorCode?(t.Data.Results.length&&t.Data.Results.forEach(t=>{this.$set(t,"shippingJsonInfo",t.shippingJson?JSON.parse(t.shippingJson):"")}),this.dialogOrderCnt.items=t.Data.Results,this.dialogOrderCnt.isShow=!0):this.$elementMessage(t.Message,"error"),this.$hideLoading()})},selectable(t,e){setTimeout(()=>!(!t||!t.paymentType||1!=t.paymentType),1e3)},async saveMarkShipped(){this.dialogMarkShipped.loading=!0;let t=[],e=[],i=this.dialogMarkShipped.item.items.map(t=>({id:t.id,isManage:t.isManage}));for(let a=0;a<i.length;a++)1==i[a].isManage&&(t.push(i[a]),await this.saveMarkShippedItem(i[a].id).then(t=>{e.push(t)}));e.length==t.length&&(this.$elementMessage(this.$t("orders.success"),"success"),this.dialogMarkShipped.isShow=!1,this.getItem())},saveMarkShippedItem(t){return new Promise((e,i)=>{this.$apiCall("api.ShopifyOrder.changeDeliver",{itemId:t,trackNumber:this.dialogMarkShipped.trackNumber,trackCompany:this.dialogMarkShipped.trackCompany,trackKey:this.dialogMarkShipped.trackKey,trackUrl:this.dialogMarkShipped.trackUrl},a=>{"9999"==a.ErrorCode?e(t):i(t)})})},markShippedOpen(t){this.dialogMarkShipped=JSON.parse(this.dialogMarkShippedDefault),this.$showLoading(),this.$apiCall("api.Invoice.getShopifyCompany",{},e=>{this.$hideLoading(),"9999"==e.ErrorCode?(this.dialogMarkShipped.shopifyCompany=e.Data.Results,this.dialogMarkShipped.isShow=!0,this.dialogMarkShipped.item=t):this.$elementMessage(e.Message,"error")})},changeFail(t){this.failData.isShowDialog=!1},openAddComment(){this.$refs.uploadFile&&this.$refs.uploadFile.clearFiles(),this.DialogEditComment=JSON.parse(this.DialogEditCommentDefault),this.DialogEditComment.visible=!0},openSecretKey(){this.dialoKeyInfo=JSON.parse(this.dialogKeyInfoDefault),this.dialoKeyInfo.isShow=!0},openAuth(){this.dialoAuthInfo=JSON.parse(this.dialogAuthInfoDefault),this.dialoAuthInfo.shopData=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).erpShops:[],this.dialoAuthInfo.isShow=!0},submitUpload(t){this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let e=t=>{document.getElementById("ifilePro").src=t},i="api.ShopifyOrder.deliverImportNew",a={"@file":t};this.$apiCall(i,a,t=>{"9999"==t.ErrorCode?(this.$elementMessage(this.$t("invoice.successImport"),"success"),e(t.Data.Results.file),this.dialoImportInfo=JSON.parse(this.dialogImportInfoDefault),this.getItem()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this)),this.$hideLoading()})},createUpload(t){this.$showLoading(),0==$("#ifileProCreate").length&&$("body").append('<iframe id="ifileProCreate" style="display:none"></iframe>');let e=t=>{document.getElementById("ifileProCreate").src=t},i="api.ShopifyOrder.importOrderExcel",a={"@file":t};this.$apiCall(i,a,t=>{"9999"==t.ErrorCode?(this.$elementMessage("创建成功","success"),e(t.Data.Results.file),this.dialogCreateInfo=JSON.stringify(this.dialogCreateInfoDefault),this.getItem()):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this)),this.$hideLoading()})},openImport(){this.dialoImportInfo=JSON.parse(this.dialogImportInfoDefault),this.dialoImportInfo.isShow=!0},openCreate(){this.dialogCreateInfo=JSON.parse(this.dialogCreateInfoDefault),this.dialogCreateInfo.isShow=!0},relateFn(t){this.$showLoading(),this.$apiCall("api.ShopifyOrder.setSkuRelation",{customerSku:this.dialogRelateInfo.item.variableId,customerId:this.dialogRelateInfo.item.customerId,vendorSku:t},t=>{"9999"==t.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.dialogQuoteInfo=JSON.parse(this.dialogQuoteInfoDefault),this.dialogRelateInfo=JSON.parse(this.dialogRelateInfoDefault),this.$refs.gridTable.clearSelection(),this.getItem()):this.$elementMessage(t.Message,"error"),this.$hideLoading()})},openRelate(t){this.$showLoading(),this.$apiCall("api.VendorShop.vendorFindProducts",{page:1,rowsPerPage:10,status:1},e=>{if("9999"==e.ErrorCode){if(!e.Data.Results.products||!e.Data.Results.products.length)return;this.dialogRelateInfo=JSON.parse(this.dialogRelateInfoDefault),this.dialogRelateInfo.isShow=!0,this.dialogRelateInfo.item=t,this.dialogRelateInfo.Pagination=e.Data.Pagination,this.dialogRelateInfo.items=[],this.dialogRelateInfo.list=[],e.Data.Results.products.forEach(t=>{t.stocks&&t.stocks.length&&t.stocks.forEach(e=>{this.$set(e,"name",t.name),this.dialogRelateInfo.items.push(e)}),this.dialogRelateInfo.list.push(t)})}else this.$elementMessage(e.Message,"error");this.$hideLoading()})},syncFn(t,e){"row"==t?this.sync(t,e):this.checkIds.length?this.sync():this.$elementMessage(this.$t("orders.selectOrder"),"error")},sync(t,e){let i=[];"row"==t?i.push(e.id):i=this.checkIds,this.$showLoading(),this.$apiCall("api.ShopifyOrder.setNotAbnormal",{ids:i},t=>{"9999"==t.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.getItem()):this.$elementMessage(t.Message,"error"),this.$hideLoading()})},payFn(t,e){if("row"==t)this.pay(t,e);else if(this.checkIds.length){let t=0;this.checkItems.forEach(e=>{1==e.paymentType&&t++}),t==this.checkIds.length?this.pay():this.$elementMessage("只有线下付款的订单支持确认收款","error")}else this.$elementMessage(this.$t("orders.selectOrder"),"error")},pay(t,e){this.$confirm(this.$t("orders.confirmRe"),"",{confirmButtonText:this.$t("orders.confirm"),cancelButtonText:this.$t("orders.cancel"),type:""}).then(()=>{let i=[];"row"==t?i.push(e.id):i=this.checkIds,this.payConfirm(i)}).catch(()=>{})},async payConfirm(t){this.$showLoading();let e=[];for(let i=0;i<t.length;i++)await this.payConfirmItem(t[i]).then(t=>{e.push(t)});e.length==t.length&&(this.$elementMessage(this.$t("orders.success"),"success"),this.$hideLoading(),this.getItem())},payConfirmItem(t){return new Promise((e,i)=>{this.$apiCall("api.ShopifyOrder.setPaid",{id:t},a=>{"9999"==a.ErrorCode?e(t):(this.$hideLoading(),this.$elementMessage(a.Message,"error"),i(t))})})},payCancelFn(t,e){"row"==t?this.payCancel(t,e):this.checkIds.length?this.payCancel():this.$elementMessage(this.$t("orders.selectOrder"),"error")},payCancel(t,e){this.$confirm(this.$t("orders.payagain"),"",{confirmButtonText:this.$t("orders.confirm"),cancelButtonText:this.$t("orders.cancel"),type:""}).then(()=>{let i=[];"row"==t?i.push(e.id):i=this.checkIds,this.payCanceled(i)}).catch(()=>{})},async payCanceled(t){this.$showLoading();let e=[];for(let i=0;i<t.length;i++)await this.payCancelItem(t[i]).then(t=>{e.push(t)});e.length==t.length&&(this.$elementMessage(this.$t("orders.success"),"success"),this.$hideLoading(),this.getItem())},payCancelItem(t){return new Promise((e,i)=>{this.$apiCall("api.ShopifyOrder.setNotPaid",{id:t},a=>{"9999"==a.ErrorCode?e(t):(this.$hideLoading(),this.$elementMessage(a.Message,"error"),i(t))})})},quoteFn(t,e){"row"==t?this.quote(t,e):this.checkIds.length?this.quote():this.$elementMessage(this.$t("orders.selectOrder"),"error")},quote(t,e){let i=[];"row"==t?i.push(e.id):i=this.checkIds,this.$showLoading(),this.$apiCall("api.ShopifyOrder.getOfferShopifyItems",{ids:i},t=>{if("9999"==t.ErrorCode){let e=Object.values(t.Data.Results);if(!e||!e.length)return this.$hideLoading(),void this.$elementMessage("No data","error");localStorage.setItem("needQuoteOrders",JSON.stringify(e)),this.$router.push({name:"orderQuote",params:{ids:i}})}else this.$elementMessage(t.Message,"error");this.$hideLoading()})},getStatus(){let t="";if(3==this.status)t=6;else if(5==this.status)t=7;else if(6==this.status)t="";else if(311==this.status)t=311;else{let e=this.tabList.filter(t=>t.name==this.activeName);t=e[0].id,2==this.status&&2==this.activeName&&(t=3)}return t},changeBackData(t){if(this.filterDialog.isShowDialog=t.show,t.ok){this.isFitterOrder=!0;let e={status:this.getStatus(),page:this.page,rowsPerPage:this.rowsPerPage};1==t.ok?e.codeNameList=t.order:e.orderIdList=t.order,this.filterDialog.obj=e,this.filterOrderFun(e)}},filterOrderFun(t){this.$apiCall("api.ShopifyOrder.findByVendor",t,t=>{9999==t.ErrorCode?(console.log(t.Data.Results,"asd1r.Data.Results"),this.items=t.Data.Results.searchResult,this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage),this.page=t.Data.Pagination.page,t.Data.Results.noSearchList&&(this.failData.isShowDialog=!0,this.failData.obj=t.Data.Results.noSearchList)):this.$message({message:t.Message,type:"error"})})},closeFilter(t){this.filterDialog.isShowDialog=t.show},changeFail(t){this.failData.isShowDialog=!1},quoteCancelFn(){this.checkIds.length?this.$confirm(this.$t("orders.waive"),"",{confirmButtonText:this.$t("orders.confirm"),cancelButtonText:this.$t("orders.cancel"),type:""}).then(()=>{this.$showLoading(),this.$apiCall("api.ShopifyOrder.cancel",{ids:this.checkIds},t=>{"9999"==t.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.$refs.gridTable.clearSelection(),this.getItem()):this.$elementMessage(t.Message,"error"),this.$hideLoading()})}).catch(()=>{}):this.$elementMessage(this.$t("orders.selectOrder"),"error")},handleSelectionChange(t){this.checkIds=[],this.checkItems=[],t.length&&t.forEach(t=>{this.checkItems.push(t),this.checkIds.push(t.id)})},dateChange(){this.filterParams.date.length>1&&(this.filterParams.dateFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.dateTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem())},dateChange2(){this.filterParams.date2&&this.filterParams.date2.length>1?(this.filterParams.dateFrom2=this.$moment(this.filterParams.date2[0]).format("YYYY-MM-DD"),this.filterParams.dateTo2=this.$moment(this.filterParams.date2[1]).format("YYYY-MM-DD"),this.filterItem()):this.clearFilter("date2")},clearFilter(t){switch(t){case"codeName":this.filterParams.codeName="";break;case"orderId":this.filterParams.orderId="";break;case"receiverName":this.filterParams.receiverName="";break;case"accountIds":this.filterParams.accountIds="";break;case"relationshipId":this.filterParams.relationshipId="";break;case"date":this.filterParams.date=[],this.filterParams.dateFrom="",this.filterParams.dateTo="";break;case"date2":this.filterParams.date2=[],this.filterParams.dateFrom2="",this.filterParams.dateTo2="";break;case"sysCode":this.filterParams.sysCode="";break;default:this.filterParams=JSON.parse(this.filterParamsDefault);break}this.filterItem()},filterItem(t){1==this.$route.query.page?this.getItem():this.$router.push({path:`/ordersManage/${Number(this.status)}/${Number(this.activeName)}`,query:{page:1}})},gettabList(){switch(this.status){case 2:this.tabList=[{id:2,name:1,title:this.$t("orders.tabBar1")},{id:22,name:2,title:this.$t("orders.tabBar2")},{id:5,name:3,title:this.$t("orders.tabBar3")}];break;case 4:this.tabList=[{id:8,name:1,title:this.$t("orders.tabBar4")},{id:9,name:2,title:this.$t("orders.tabBar5")},{id:10,name:3,title:this.$t("orders.tabBar6")}];break;default:this.tabList=[];break}},remoteMethodCustom(){this.vendorList=[],this.$apiCall("api.Relationship.findByVendor",{},t=>{9999==t.ErrorCode?this.vendorList=t.Data.Results:this.$message({message:t.Message,type:"error"})})},getShopName(){this.storeList=[],this.$apiCall("api.Invoice.findStoreByVendor",{},t=>{9999==t.ErrorCode?this.storeList=t.Data.Results:this.$message({message:t.Message,type:"error"})})},getVendorAllOrderCnt(){this.$apiCall("api.ShopifyOrder.getVendorAllOrderCnt",{},t=>{9999==t.ErrorCode?this.vendorAllOrderCnt=t.Data.Results:this.$message({message:t.Message,type:"error"})})},vendorAllOrderCntText(t){let e=0;return e=22==t?this.vendorAllOrderCnt.waitVendorConfirmCnt?this.vendorAllOrderCnt.waitVendorConfirmCnt:0:this.vendorAllOrderCnt[t]?this.vendorAllOrderCnt[t]:0,e},getItem(t){this.isFitterOrder=!1,this.gettabList(),this.remoteMethodCustom(),this.getShopName(),this.getVendorAllOrderCnt(),this.items=[];let e,i="",a="api.ShopifyOrder.findByVendor",s={page:this.page,rowsPerPage:this.rowsPerPage,status:i,dateFrom:this.filterParams.dateFrom,dateTo:this.filterParams.dateTo,accountIds:this.filterParams.accountIds?[this.filterParams.accountIds]:"",relationshipId:this.filterParams.relationshipId,orderId:this.filterParams.orderId,keywords:this.filterParams.codeName,receiverName:this.filterParams.receiverName},r={page:this.page,rowsPerPage:this.rowsPerPage,status:i,sysCode:this.filterParams.sysCode,timeCreatedFrom:this.filterParams.dateFrom2,timeCreatedTo:this.filterParams.dateTo2};if(e=s,3==this.status)i=6;else if(5==this.status)i=7;else if(6==this.status)i="",e=Object.assign(s,r);else if(311==this.status)i=311;else{let t=this.tabList.filter(t=>t.name==this.activeName);i=t[0].id,2==this.status&&2==this.activeName&&(i=3,e=r,a="api.ShopifyOrder.findByInvoice")}this.billStatus=i,this.loading=!0,e.status=i,this.$apiCall(a,e,e=>{this.loading=!1,9999==e.ErrorCode?(this.items=e.Data.Results,this.items.forEach(t=>{this.$set(t,"shippingJsonInfo",t.shippingJson?JSON.parse(t.shippingJson):""),t.accountPayment&&t.accountPayment.extJson&&(this.$set(t,"voucherUrl",t.accountPayment.extJson.voucherUrl||""),this.$set(t,"voucherUrlPreview",[t.accountPayment.extJson.voucherUrl]))}),this.total=Number(e.Data.Pagination.totalCount),this.totalPage=Number(e.Data.Pagination.totalPage),this.$getTableHeight(this),t||(this.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0)):this.$message({message:e.Message,type:"error"})})},toPage(t){this.isFitterOrder?(this.filterDialog.obj.page=t,this.filterOrderFun(this.filterDialog.obj)):t!=this.$route.query.page&&this.$router.push({path:`/ordersManage/${Number(this.status)}/${Number(this.activeName)}`,query:{page:t}})},changePageSize(t){this.rowsPerPage=t,localStorage.setItem("ordersRowsPerPage",t),this.isFitterOrder?(this.filterDialog.obj.rowsPerPage=t,this.filterOrderFun(this.filterDialog.obj)):this.getItem()},gotoPage(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()},handleClick(t,e){this.filterParams=JSON.parse(this.filterParamsDefault),this.getItem()}}},yt=vt,bt=(i("ce71"),i("776b"),Object(d["a"])(yt,a,s,!1,null,"f04d32e6",null));e["default"]=bt.exports},a60f:function(t,e,i){},a640:function(t,e,i){"use strict";var a=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&a((function(){i.call(null,e||function(){return 1},1)}))}},afed:function(t,e,i){t.exports=i.p+"img/secretKey1.5bdafac9.png"},c21e:function(t,e,i){},c33b:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGtmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0MzUyLCAyMDIwLzAxLzMwLTE1OjUwOjM4ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTEyLTI5VDEzOjUzOjU2KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0xMi0yOVQxMzo1ODoyMCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0xMi0yOVQxMzo1ODoyMCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjBhZmZlYzktMjhhNC0wNjQxLTk3NTEtMWEzM2RhNWJlYTlkIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZWNhNGVhYWItYWQzNy0yZjQ5LTlkMjAtMzlmOTQ3MDM0MTQzIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6N2IzOTMyZmMtNzZmMS05ZTQzLWExZjItMTcyOGVjOTZhNzE2Ij4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJTcGxpdCIgcGhvdG9zaG9wOkxheWVyVGV4dD0iU3BsaXQiLz4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdiMzkzMmZjLTc2ZjEtOWU0My1hMWYyLTE3MjhlYzk2YTcxNiIgc3RFdnQ6d2hlbj0iMjAyMS0xMi0yOVQxMzo1Mzo1NiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjYwYWZmZWM5LTI4YTQtMDY0MS05NzUxLTFhMzNkYTViZWE5ZCIgc3RFdnQ6d2hlbj0iMjAyMS0xMi0yOVQxMzo1ODoyMCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgfBp04AAADQSURBVDiNYwyK28BALmAiW+eoZjLAsZMP////f+HS86C4Df9hYMOW6w3tB////x8UtwGC/v//39B+EKIYrobF0kwuOW873Ky+KScYGBiKcizu3v+AZg0vD1vP1PPWp54V5VgEx29kYGBgevLsU0W+GbIiHh7W799/E+Xn+o6j37797m60h/CLcixiw/UWr7xElGYGBoYNW28JCXLBnR2TsW3n/ifEaGaZO8mTgYFh49YbEP7nL7+QGWsX+jMwMBRX74WLwBUwMDAwjmaMoaIZAAa0bJKUrm/sAAAAAElFTkSuQmCC"},c520:function(t,e,i){},cd22:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("ticket.submitTicket"),visible:t.DialogEditComment.visible,width:"800px","append-to-body":""},on:{"update:visible":function(e){return t.$set(t.DialogEditComment,"visible",e)},closed:function(e){return t.$refs.uploadFile.clearFiles()}}},[e("el-divider"),e("div",[e("el-form",{ref:"CommentForm"},[e("el-form-item",{attrs:{label:t.$t("ticket.problemsOrRequirements")}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.DialogEditComment.contents,callback:function(e){t.$set(t.DialogEditComment,"contents",e)},expression:"DialogEditComment.contents"}})],1),e("el-form-item",{attrs:{label:""}},[e("div",{staticStyle:{"font-size":"16px","font-weight":"bold",margin:"20px 0 0"}},[t._v(" "+t._s(t.$t("ticket.uploadImageAttachment"))+" ")])]),e("el-form-item",{attrs:{label:""}},[e("el-upload",{ref:"uploadFile",staticClass:"upload-file",attrs:{"on-change":t.handleChangeImg,"before-remove":t.handleRemoveImg,action:"","auto-upload":!1,accept:"image/gif,image/jpeg,image/jpg,image/png"}},[e("el-button",{ref:"uploadBtn",attrs:{size:"small",type:"primary",loading:t.DialogEditComment.uploadLoading}},[t._v(t._s(t.$t("ticket.browse")))])],1)],1)],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[e("div",{staticClass:"mg-r-15"},[e("el-button",{attrs:{size:"small",type:"primary",loading:t.DialogEditComment.loading},on:{click:t.saveComment}},[t._v(t._s(t.$t("ticket.submitTicket")))])],1),e("div",[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.DialogEditComment.visible=!1}}},[t._v(" "+t._s(t.$t("invoice.cancel")))])],1)])],1)},s=[],r=(i("14d9"),{props:["DialogEditComment"],data(){return{}},methods:{handleRemoveImg(t,e){e.forEach((e,i)=>{e.name==t.name&&this.DialogEditComment.attach.splice(i,1)})},handleChangeImg(t){this.DialogEditComment.loading=!0,this.DialogEditComment.uploadLoading=!0,this.$apiCall("api.Comment.uploadAttach",{"@file":t.raw},t=>{this.DialogEditComment.loading=!1,this.DialogEditComment.uploadLoading=!1,"9999"==t.ErrorCode?this.DialogEditComment.attach.push(t.Data.Results.url):this.$elementMessage(t.Message,"error")})},saveComment(){if(!this.DialogEditComment.contents)return this.$message({message:this.$t("invoice.emptyQuestion"),type:"error"}),!1;this.DialogEditComment.loading=!0,this.$apiCall("api.Comment.addByUser",{commentId:this.DialogEditComment.commentId,contents:this.DialogEditComment.contents,shopName:this.DialogEditComment.shopName,attach:this.DialogEditComment.attach},t=>{this.DialogEditComment.loading=!1,9999==t.ErrorCode?(this.DialogEditComment.visible=!1,this.$message({message:this.$t("app._wewillReplyASAP"),type:"success"})):this.$message({message:t.Message,type:"error"})})}}}),o=r,l=i("2877"),n=Object(l["a"])(o,a,s,!1,null,null,null);e["a"]=n.exports},ce71:function(t,e,i){"use strict";i("54de")},d58f:function(t,e,i){var a=i("59ed"),s=i("7b0b"),r=i("44ad"),o=i("07fa"),l=TypeError,n=function(t){return function(e,i,n,d){a(i);var c=s(e),p=r(c),u=o(c),h=t?u-1:0,m=t?-1:1;if(n<2)while(1){if(h in p){d=p[h],h+=m;break}if(h+=m,t?h<0:u<=h)throw l("Reduce of empty array with no initial value")}for(;t?h>=0:u>h;h+=m)h in p&&(d=i(d,p[h],h,c));return d}};t.exports={left:n(!1),right:n(!0)}},ec57:function(t,e,i){},fa9e:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("invoice.usertoken"),visible:t.keyData.isShow,width:"800px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.keyData,"isShow",e)}}},[e("el-divider"),e("div",{staticStyle:{margin:"20px",color:"#303133"}},[e("p",[t._v(" "+t._s(t.$t("invoice.software"))+" ")])]),e("div",{staticClass:"d-body"},[e("p",[t._v(" "+t._s(t.$t("invoice.pastetoken"))+" ")]),e("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-around",margin:"15px 0"}},[e("div",{staticStyle:{width:"48%","margin-right":"2%"}},[e("p",{staticClass:"mg-y-10"},[t._v(t._s(t.$t("invoice.Picture1")))]),e("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:i("afed")}})]),e("div",{staticStyle:{width:"48%","margin-left":"2%"}},[e("p",{staticClass:"mg-y-10"},[t._v(t._s(t.$t("invoice.Picture2")))]),e("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:i("69a3")}})])]),e("p",{staticStyle:{"margin-top":"10px"}},[t._v(" "+t._s(t.$t("invoice.present"))+" "),e("el-link",{attrs:{target:"_blank",type:"primary",underline:!1,href:"//www.mabangerp.com/"}},[t._v("马帮ERP ")]),t._v(" "+t._s(t.$t("invoice.soon"))+" ")],1)]),e("div",{staticStyle:{margin:"20px",color:"rgb(153, 153, 153)"}},[e("p",[t._v(" "+t._s(t.$t("invoice.sametime"))+" "),e("el-link",{attrs:{type:"primary",underline:!1},on:{click:t.openAddComment}},[t._v(" "+t._s(t.$t("invoice.contact"))+" ")]),t._v("。 ")],1)]),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.keyData.isShow=!1}}},[t._v(" "+t._s(t.$t("importdata.gotIt"))+" ")])],1)],1)},s=[],r={props:["keyData"],data(){return{}},methods:{openAddComment(){this.$emit("openAddComment")}}},o=r,l=(i("4300"),i("2877")),n=Object(l["a"])(o,a,s,!1,null,"af075a7e",null);e["a"]=n.exports},fb0f:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGsmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0MzUyLCAyMDIwLzAxLzMwLTE1OjUwOjM4ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTEyLTI5VDEzOjUzOjU2KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0xMi0yOVQxMzo1NjoyMCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0xMi0yOVQxMzo1NjoyMCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MmVkOGUwMGMtODBlMS03MzQzLWI1NzEtY2NiOTg0ZGYzNzU1IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YmQyZTI0MjItNjE3OS1kYTQyLWIxY2YtZGVmZDJhMWNiYjlhIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NjQ0YTVlMGItZDhhYS0zMjRjLWJkZGQtMjUwOWEwM2U1NjkzIj4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSLmi4YiIHBob3Rvc2hvcDpMYXllclRleHQ9IuaLhiIvPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOlRleHRMYXllcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjQ0YTVlMGItZDhhYS0zMjRjLWJkZGQtMjUwOWEwM2U1NjkzIiBzdEV2dDp3aGVuPSIyMDIxLTEyLTI5VDEzOjUzOjU2KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MmVkOGUwMGMtODBlMS03MzQzLWI1NzEtY2NiOTg0ZGYzNzU1IiBzdEV2dDp3aGVuPSIyMDIxLTEyLTI5VDEzOjU2OjIwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+R3UFIgAAAg5JREFUOI1jDIrbwEAuYCJbJwMDAwsyR4CfrSLf7Nu33009J5HFFWR41FUFlBQE5GUFKpqOYNf84eMvVWXhi5dfQAxqrLDm4mQREuRCVhMXpr5o1U0smiHg2/dfEIaMFN+TZ58OH7vx8vXX5y++Pnr29cPHXwL8bOg262kKGuiKff32m4GBQUSYOy5M/dCxpwwMDI+ffIDbA3cdumZVZUF/bw0YW1hVWfju/Q9YgoiBQUGG58GTLxA2IzyqBPjZPnz8tXah//FTj+YsuQphY9W/bPXltVvuofgZ2T0CvGwQ7pNnn86ef8bAwODvrXH77ttrN15zc7PevvseZ4Cpq4q01EjWtBxC9rO/t8a1G6/R/M8C94mdlbSxoRQDAwMnB+vRk48+fP4F946zrQxW9yNSmL+3BhcnCwMDw4XLz6fPvyLAy8bAwPDq9bfIILWoUF0GBgZublbsmh88+bJs9eXUgt1wCT5eVgYGhq/ffk+ff2XWgrMMDAwuDspxYerYbYYEIByoKgsyMDC8ePmVgYFh5/4nDAwM37//9vfWmNjuCE8nWAIMArQ1RL9//3309Eu4yK59d79++60ozw+PF4TmYB8lbQ1RCFtBhkdfV+L4qUdoJqK5DuHsFy+/6utKPHn2ac3G23ZW0t+//16z8TayUswAY0QuDJCTHiTBIbvr9t33l66/x6mZVEBRSQIAdqbS1AmjY0YAAAAASUVORK5CYII="}}]);