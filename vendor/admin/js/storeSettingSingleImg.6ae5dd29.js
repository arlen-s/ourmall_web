(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["storeSettingSingleImg"],{d5cb:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"setting-page"},[e("el-scrollbar",{staticClass:"left"},[e("div",{staticClass:"content"},[e("h1",[e("el-link",{attrs:{icon:"el-icon-arrow-left",underline:!1},on:{click:t.goBack}},[t._v(t._s(t.$t("storeSetting.单图")))])],1),e("el-card",{attrs:{"body-style":{padding:"20px 10px"}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.imgLoading,expression:"imgLoading"}],staticClass:"img-box"},[e("div",{staticClass:"title"},[e("h2",[t._v(t._s(t.$t("storeSetting.图片")))]),e("p",{staticClass:"msg"},[t._v("("+t._s(t.$t("storeSetting.建议尺寸990px * 742px"))+")")])]),t.setting.img?e("div",{staticClass:"has-img"},[e("div",{staticClass:"img-wrap",style:{backgroundImage:`url(${t.setting.img})`}}),e("div",{staticClass:"action"},[e("el-link",{attrs:{type:"primary"},on:{click:t.openUploadImg}},[t._v(t._s(t.$t("storeSetting.更改")))]),e("el-link",{attrs:{type:"danger"},on:{click:t.delImg}},[t._v(t._s(t.$t("storeSetting.删除")))])],1)]):e("a",{staticClass:"upload-box",attrs:{href:"javascript:;"},on:{click:t.openUploadImg}},[e("i",{staticClass:"el-icon-circle-plus"}),t._v(t._s(t.$t("storeSetting.添加图片"))+" ")]),e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"uploadImgSing",accept:"image/jpeg, image/png, image/gif, image/webp"},on:{change:function(e){return t.Base64(e)}}})]),e("el-form",[e("el-form-item",{attrs:{label:t.$t("storeSetting.跳转链接")}},[e("el-select",{attrs:{size:"small"},model:{value:t.setting.link,callback:function(e){t.$set(t.setting,"link",e)},expression:"setting.link"}},t._l(t.optLinkArr,(function(s){return e("el-option",{key:s.value,attrs:{label:t.$t(s.label),value:s}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("storeSetting.图片高度")}},[e("el-select",{attrs:{size:"small"},model:{value:t.setting.height,callback:function(e){t.$set(t.setting,"height",e)},expression:"setting.height"}},t._l(t.optImgSize,(function(s){return e("el-option",{key:s.value,attrs:{label:t.$t(s.label),value:s.value}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("storeSetting.标题")}},[e("el-input",{model:{value:t.setting.title,callback:function(e){t.$set(t.setting,"title",e)},expression:"setting.title"}})],1),e("el-form-item",{attrs:{label:t.$t("storeSetting.副标题")}},[e("el-input",{attrs:{type:"textarea",rows:2},model:{value:t.setting.subTitle,callback:function(e){t.$set(t.setting,"subTitle",e)},expression:"setting.subTitle"}})],1),e("el-form-item",{attrs:{label:t.$t("storeSetting.文字大小")}},[e("el-select",{attrs:{size:"small"},model:{value:t.setting.size,callback:function(e){t.$set(t.setting,"size",e)},expression:"setting.size"}},t._l(t.optFontSize,(function(s){return e("el-option",{key:s.value,attrs:{label:t.$t(s.label),value:s.value}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("storeSetting.文本对齐")}},[e("el-button-group",{staticStyle:{width:"100%"}},[e("el-button",{class:{active:"left"==t.setting.align},attrs:{plain:"",size:"medium"},on:{click:function(e){return t.changeAlign("left")}}},[e("i",{staticClass:"fa fa-align-left",attrs:{"aria-hidden":"true"}})]),e("el-button",{class:{active:"center"==t.setting.align},attrs:{plain:"",size:"medium"},on:{click:function(e){return t.changeAlign("center")}}},[e("i",{staticClass:"fa fa-align-justify",attrs:{"aria-hidden":"true"}})]),e("el-button",{class:{active:"right"==t.setting.align},attrs:{plain:"",size:"medium"},on:{click:function(e){return t.changeAlign("right")}}},[e("i",{staticClass:"fa fa-align-right",attrs:{"aria-hidden":"true"}})])],1)],1),e("el-form-item",{attrs:{label:t.$t("storeSetting.文本颜色")}},[e("el-color-picker",{staticClass:"color-p",attrs:{size:"mini"},model:{value:t.setting.color,callback:function(e){t.$set(t.setting,"color",e)},expression:"setting.color"}})],1),e("el-form-item",{attrs:{label:t.$t("storeSetting.按钮文案")}},[e("el-input",{model:{value:t.setting.btnText,callback:function(e){t.$set(t.setting,"btnText",e)},expression:"setting.btnText"}})],1),e("el-form-item",{attrs:{label:t.$t("storeSetting.按钮背景颜色")}},[e("el-color-picker",{staticClass:"color-p",attrs:{size:"mini"},model:{value:t.setting.btnBackground,callback:function(e){t.$set(t.setting,"btnBackground",e)},expression:"setting.btnBackground"}})],1),e("el-form-item",{attrs:{label:t.$t("storeSetting.按钮文字颜色")}},[e("el-color-picker",{staticClass:"color-p",attrs:{size:"mini"},model:{value:t.setting.btnColor,callback:function(e){t.$set(t.setting,"btnColor",e)},expression:"setting.btnColor"}})],1)],1)],1)],1)]),e("el-scrollbar",{ref:"rightBox",staticClass:"right"},[e("div",{staticClass:"content"},[e("demoHeader",{attrs:{data:t.$store.state.configJson.header,headerMenu:t.headerMenu}}),e("demoBody",{attrs:{data:t.setting,header:t.$store.state.configJson.header}}),e("demoFooter",{attrs:{setting:t.$store.state.configJson.footer}})],1)]),e("div",{staticClass:"action"},[e("el-button",{attrs:{type:"danger",size:"medium"},on:{click:t.del}},[t._v(t._s(t.$t("storeSetting.删除该组件")))]),e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v(t._s(t.$t("storeSetting.完成")))])],1)],1)},a=[],l=(s("14d9"),s("826e")),n=s("8c3c"),o=(s("784e"),s("db46")),r={data(){return{isSave:!1,exist:!1,imgLoading:!1,headerMenu:[],setting:{cid:this.$route.query.cid,type:"singleImg",img:"",link:"Products",height:371,title:" ",subTitle:"",size:14,align:"center",color:"#606266",btnText:"",btnColor:"#C0C4CC",btnBackground:"#303133"},optLinkArr:[{label:"storeSetting.Home",value:"home",url:"home"},{label:"storeSetting.Products",value:"products",url:"productsMarketHome"}],optImgSize:[{label:"storeSetting.大",value:446},{label:"storeSetting.中",value:371},{label:"storeSetting.小",value:267},{label:"storeSetting.自适应",value:0}],optFontSize:[{label:"storeSetting.大",value:16},{label:"storeSetting.中",value:14},{label:"storeSetting.小",value:12}]}},components:{demoHeader:l["a"],demoBody:n["a"],demoFooter:o["a"]},created(){this.$apiCall("api.VendorShop.getShopConfig",{},t=>{9999==t.ErrorCode?0!==t.Data.Results.length&&(t.Data.Results.header.activeMenu&&t.Data.Results.menu.forEach(e=>{e.id==t.Data.Results.header.activeMenu&&(this.headerMenu=e)}),this.$store.commit("getShopConfig",t.Data.Results),this.$store.state.configJson.sort.forEach(t=>{t.cid==this.$route.query.cid&&(this.exist=!0,this.setting=JSON.parse(JSON.stringify(t)))}),this.$nextTick(()=>{this.$refs.rightBox.wrap.scrollTop=document.getElementById("row"+this.$route.query.cid).offsetTop}),this.exist||(this.setting={cid:this.$route.query.cid,type:"singleImg",img:"",link:"Products",height:371,title:" ",subTitle:"",size:14,align:"center",color:"#606266",btnText:"",btnColor:"#C0C4CC",btnBackground:"#303133"},this.exist=!0,this.$store.commit("addStoreComponent",this.setting))):this.$message({message:t.Message,type:"error"})})},beforeRouteLeave(t,e,s){if(this.isSave)s();else{let t=confirm(this.$t("logistics.当前页面还未保存，确定要离开吗?"));t?s():s(!1)}},methods:{ccc(t){console.log(t)},save(){this.isSave=!0,this.exist&&this.$store.commit("setStoreComponent",this.setting),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},t=>{9999==t.ErrorCode?this.$elementMessage(this.$t("storeSetting.保存成功"),"success"):this.$message({message:t.Message,type:"error"})})},del(){this.isSave=!0,this.$store.commit("delComponent",this.setting.cid),this.setting=JSON.parse(JSON.stringify(this.$store.state.configJson)),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},t=>{9999==t.ErrorCode?(this.$elementMessage("删除成功","success"),this.$router.replace({name:"storeSettingMain"})):this.$message({message:t.Message,type:"error"})})},changeAlign(t){this.setting.align=t},delImg(){this.setting.img=""},uploadImgBase64(t,e){this.imgLoading=!0,this.$apiCall("api.Comment.uploadImg",{imgUrlBase64:t,ext:e},t=>{this.imgLoading=!1,document.getElementById("uploadImgSing").value="",9999==t.ErrorCode?this.setting.img=t.Data.Results.imgUrl:this.$message({message:t.Message,type:"error"})})},Base64(t){if(t.target.value){if(t.target.files[0].size/1024/1024>1)return this.$message({message:this.$t("category.上传文件不能大于1MB"),type:"error"}),void(t.target.value="");let e=new FileReader,s=new Image,i="";e.onload=t=>{s.src=t.target.result;let e=t.target.result.match(/data:image\/(.*);base64,.*/);i=e[1],this.uploadImgBase64(t.target.result.split(",").pop(),i)},e.readAsDataURL(t.target.files[0])}},openUploadImg(){document.getElementById("uploadImgSing").click()},goBack(){this.$router.push({name:"storeSettingMain"})}}},g=r,c=(s("dc76"),s("2877")),u=Object(c["a"])(g,i,a,!1,null,"4b01658a",null);e["default"]=u.exports},dc76:function(t,e,s){"use strict";s("ea1b")},ea1b:function(t,e,s){}}]);