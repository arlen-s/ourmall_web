(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["transactionDetail"],{"1b64":function(t,e,a){"use strict";a("8adb")},"2aab":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel transaction-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-finance"}),e("h2",[t._v(t._s(t.$t("withdraw.客户明细")))])])]),e("div",{staticClass:"right"})]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("el-card",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{ref:"pageFilter",staticClass:"page-filter"},[e("el-form",{attrs:{inline:!0,size:"mini"}},[e("el-form-item",{attrs:{label:t.$t("withdraw.上传物流单号时间")}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placement:"top",type:"daterange",align:"right","unlink-panels":"","range-separator":t.$t("myinvoice.to"),"start-placeholder":t.$t("myinvoice.startDate"),"end-placeholder":t.$t("myinvoice.endDate")},on:{change:t.dateChange},model:{value:t.filterParams.date,callback:function(e){t.$set(t.filterParams,"date",e)},expression:"filterParams.date"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("transaction.filter")))])],1)],1)],1)])],1),e("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark","row-key":t=>t.id}},[e("el-table-column",{attrs:{label:t.$t("mycustomer.customersName")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.funcName||"--"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("withdraw.发货物流票数")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.quantity))])]}}])})],1),t.items.length?e("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.gotoPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1)],1)],1)],1)])},s=[],i={data(){return{loading:!1,vendorId:localStorage.getItem("vendorId"),pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("transactionRowsPerPage")?Number(localStorage.getItem("transactionRowsPerPage")):10,items:[],selectLoading:!1,selectArr:[],total:0,totalPage:0,filterParams:{date:[],timeCreatedFrom:"",timeCreatedTo:""}}},components:{},watch:{},mounted(){this.getItem()},methods:{gotoPage(t){this.page=t,this.getItem()},dateChange(){null==this.filterParams.date&&(this.filterParams.date=[],this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="",this.filterItem()),this.filterParams.date.length>1&&(this.filterParams.timeCreatedFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem())},filterItem(){this.getItem()},getItem(){this.loading=!0,this.$apiCall("api.Invoice.getOrderNumber",{pageNum:this.page,pageRow:this.rowsPerPage,timeFrom:this.filterParams.timeCreatedFrom,timeTo:this.filterParams.timeCreatedTo},t=>{this.loading=!1,9999==t.ErrorCode?(this.items=t.Data.Results.data,this.total=Number(t.Data.Results.totalCount),this.totalPage=Number(t.Data.Results.pageNum)):this.$message({message:t.Message,type:"error"})})}}},l=i,o=(a("55d3"),a("2877")),n=Object(o["a"])(l,r,s,!1,null,"1bc7d6e8",null);e["default"]=n.exports},"3b15":function(t,e,a){},"50d5":function(t,e,a){},"55d3":function(t,e,a){"use strict";a("dcc0")},"617b":function(t,e,a){},8081:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel transaction-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-finance"}),e("h2",[t._v(t._s(t.$t("withdraw.店铺销量统计")))])])]),e("div",{staticClass:"right"},[e("el-button",{attrs:{type:"primary"},on:{click:t.exportOrder}},[t._v(t._s(t.$t("quotation.导出")))])],1)]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("el-card",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{ref:"pageFilter",staticClass:"page-filter"},[e("el-form",{attrs:{inline:!0,size:"mini"}},[e("el-form-item",{attrs:{label:t.$t("withdraw.店长名称")+":"}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("accountIds")}},model:{value:t.filterParams.accountIds,callback:function(e){t.$set(t.filterParams,"accountIds",e)},expression:"filterParams.accountIds"}},t._l(t.storeList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.customerName,value:t.customerId}})})),1)],1),e("el-form-item",[e("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"",placement:t.placement,"range-separator":"-","start-placeholder":t.$t("bill.开始日期"),"end-placeholder":t.$t("bill.结束日期"),"value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.timer,callback:function(e){t.timer=e},expression:"timer"}})],1)],1)],1)])],1),e("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark"}},[e("el-table-column",{attrs:{label:t.$t("withdraw.店长名称")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.customerName||"--"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("withdraw.销售数量")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.saleNum))])]}}])}),e("el-table-column",{attrs:{label:t.$t("withdraw.销售总金额")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.totalAmount))])]}}])}),e("el-table-column",{attrs:{label:t.$t("withdraw.历史总佣金")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.totalHistoricalCommission))])]}}])}),e("el-table-column",{attrs:{label:t.$t("withdraw.当前未提现佣金")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.commissionBalance))])]}}])}),e("el-table-column",{attrs:{label:t.$t("withdraw.历史已提现佣金")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.totalHistoricalWithdrawnCommission))])]}}])}),e("el-table-column",{attrs:{label:t.$t("withdraw.创建时间")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.timeCreated))])]}}])})],1),t.items.length?e("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1)],1)],1)],1)])},s=[],i=(a("14d9"),{data(){return{loading:!1,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("transactionRowsPerPage")?Number(localStorage.getItem("transactionRowsPerPage")):10,items:[],selectLoading:!1,selectArr:[],total:0,totalPage:0,filterParams:{accountIds:""},timer:"",storeList:[],placement:"bottom-end"}},components:{},watch:{},mounted(){this.getItem(),this.getShopName()},methods:{getShopName(){this.storeList=[],this.$apiCall("api.Relationship.findByVendor",{},t=>{9999==t.ErrorCode?this.storeList=t.Data.Results:this.$message({message:t.Message,type:"error"})})},exportOrder(){this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let t=t=>{document.getElementById("ifilePro").src=t};this.$apiCall("api.AccountPayment.findByVendorGroupDate",{timeCreatedFrom:this.timer?this.timer[0]:"",timeCreatedTo:this.timer?this.timer[1]:"",customerId:this.filterParams.accountIds,isExport:1},e=>{"9999"==e.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),t(e.Data.Results)):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this)),this.$hideLoading()})},toPage(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},changePageSize(t){this.rowsPerPage=t,localStorage.setItem("transactionRowsPerPage",t),this.getItem()},gotoPage(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()},changeDate(){this.getItem()},filterItem(){this.getItem()},getItem(){this.loading=!0,this.$apiCall("api.AccountPayment.findByVendorGroupDate",{page:this.page,rowsPerPage:this.rowsPerPage,timeCreatedFrom:this.timer?this.timer[0]:"",timeCreatedTo:this.timer?this.timer[1]:"",customerId:this.filterParams.accountIds},t=>{this.loading=!1,9999==t.ErrorCode?(this.items=t.Data.Results,this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage)):this.$message({message:t.Message,type:"error"})})}}}),l=i,o=(a("d133"),a("2877")),n=Object(o["a"])(l,r,s,!1,null,"6941dde5",null);e["default"]=n.exports},"8adb":function(t,e,a){},"9f36":function(t,e,a){"use strict";a("3b15")},a27e:function(t,e,a){"use strict";a("50d5")},b24b:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel transaction-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-finance"}),e("h2",[t._v(t._s(t.$t("withdraw.提现列表")))])])]),e("div",{staticClass:"right"})]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("el-card",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{ref:"pageFilter",staticClass:"page-filter"},[e("el-form",{attrs:{inline:!0,size:"mini"}},[e("el-form-item",[e("el-select",{attrs:{filterable:"",remote:"","remote-method":t.remoteMethodCustom,loading:t.selectLoading,placeholder:t.$t("myinvoice.pleaseCusName"),clearable:""},on:{change:function(e){return t.filterItem("relationshipId")},clear:t.close},model:{value:t.filterParams.name,callback:function(e){t.$set(t.filterParams,"name",e)},expression:"filterParams.name"}},t._l(t.selectArr,(function(t){return e("el-option",{key:t.id,attrs:{label:t.customerName,value:t.customerName}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("withdraw.提现方式")}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("drawType")}},model:{value:t.filterParams.drawType,callback:function(e){t.$set(t.filterParams,"drawType",e)},expression:"filterParams.drawType"}},t._l(t.typeArrMail,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("transaction.CreateDate")}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placement:"top",type:"daterange",align:"right","unlink-panels":"","range-separator":t.$t("myinvoice.to"),"start-placeholder":t.$t("myinvoice.startDate"),"end-placeholder":t.$t("myinvoice.endDate")},on:{clear:function(e){return t.clearFilter("date")},change:t.dateChange},model:{value:t.filterParams.date,callback:function(e){t.$set(t.filterParams,"date",e)},expression:"filterParams.date"}})],1),e("el-form-item",{attrs:{label:t.$t("withdraw.accountPayee")}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("accountPayee")}},model:{value:t.filterParams.accountPayee,callback:function(e){t.$set(t.filterParams,"accountPayee",e)},expression:"filterParams.accountPayee"}},t._l(t.accountPayeeArr,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("transaction.filter"))+" ")]),e("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v(t._s(t.$t("transaction.clear"))+" ")])],1)],1)],1)])],1),e("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark","row-key":t=>t.id}},[e("el-table-column",{attrs:{label:t.$t("mycustomer.customersName")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.customerName||"--"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("withdraw.提现方式")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(1==a.row.drawType?t.$t("余额"):t.$t("线下")))])]}}])}),e("el-table-column",{attrs:{label:t.$t("withdraw.状态")},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.drawStatus?e("span",[t._v("待审核")]):2==a.row.drawStatus?e("span",[t._v("通过")]):e("span",[t._v("拒绝")])]}}])}),e("el-table-column",{attrs:{label:""+t.$t("withdraw.tradeAmount")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.amount||"--"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("quotation.备注")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.remark||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.operate"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.drawStatus?e("div",[e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(e){return t.changeStatus("2",a.row)}}},[t._v(" "+t._s(t.$t("withdraw.agree"))+" ")]),e("el-link",{staticClass:"mg-r-20",attrs:{type:"danger"},on:{click:function(e){return t.changeStatus("3",a.row)}}},[t._v(" "+t._s(t.$t("withdraw.reject"))+" ")])],1):t._e()]}}])})],1),t.items.length?e("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1)],1)],1)],1)])},s=[],i=(a("14d9"),{data(){return{loading:!1,vendorId:localStorage.getItem("vendorId"),pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("transactionRowsPerPage")?Number(localStorage.getItem("transactionRowsPerPage")):10,items:[],selectLoading:!1,selectArr:[],total:0,totalPage:0,typeArrMail:[{value:"1",label:"余额"},{value:"2",label:"线下"}],filterParams:{name:"",accountPayee:"",tradeStatus:"",tradeType:"",date:[],drawType:"",timeCreatedFrom:"",timeCreatedTo:"",creditStatus:"2",relationshipId:""},accountPayeeArr:[{id:1,name:"待审批"},{id:2,name:"已审批"}],selectArr:[],filterParamsDefault:"{}"}},components:{},watch:{},mounted(){this.getItem(),this.filterParamsDefault=JSON.stringify(this.filterParams)},methods:{remoteMethodCustom(t){this.selectArr=[],t&&(this.selectLoading=!0,this.$apiCall("api.Relationship.findByVendor",{name:t},t=>{this.selectLoading=!1,9999==t.ErrorCode?this.selectArr=t.Data.Results:this.$message({message:t.Message,type:"error"})}))},toPage(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},changeStatus(t,e){this.$apiCall("api.CustomerWithdrawal.checkStatus",{drawStatus:t,id:e.id},t=>{this.selectLoading=!1,9999==t.ErrorCode?this.getItem():this.$message({message:t.Message,type:"error"})})},changePageSize(t){this.rowsPerPage=t,localStorage.setItem("transactionRowsPerPage",t),this.getItem()},gotoPage(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()},dateChange(){this.filterParams.date.length>1&&(this.filterParams.timeCreatedFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem())},clearFilter(t){switch(t){case"tradeStatus":this.filterParams.tradeStatus="";break;case"accountPayee":this.filterParams.accountPayee="";break;case"date":this.filterParams.date=[],this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="";break;default:this.filterParams=JSON.parse(this.filterParamsDefault);break}this.filterItem()},filterItem(t){this.$refs.gridTable.clearSelection(),"relationshipId"==t?(this.selectArr.forEach(t=>{t.customerName==this.filterParams.name&&(this.filterParams.relationshipId=t.id)}),this.getItem()):1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}}),1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},close(){this.selectArr=[],this.filterParams.relationshipId="",this.getItem()},getItem(t){console.log(this.filterParams.creditStatus,"this.filterParams.creditStatus"),this.loading=!0,this.$apiCall("api.CustomerWithdrawal.get",{page:this.page,rowsPerPage:this.rowsPerPage,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,customerId:this.filterParams.relationshipId,drawType:this.filterParams.drawType,drawStatus:this.filterParams.accountPayee},t=>{this.loading=!1,9999==t.ErrorCode?(this.items=t.Data.Results,this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage)):this.$message({message:t.Message,type:"error"})})}}}),l=i,o=(a("a27e"),a("2877")),n=Object(o["a"])(l,r,s,!1,null,"5bbc44b4",null);e["default"]=n.exports},c330:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel transaction-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-finance"}),e("h2",[t._v(t._s(t.$t("transaction.title")))])])]),e("div",{staticClass:"right"})]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("transaction.正常账单"),name:"2"}},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("el-card",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{ref:"pageFilter",staticClass:"page-filter"},[e("el-form",{attrs:{inline:!0,size:"mini"}},[e("el-form-item",{attrs:{label:t.$t("transaction.CreateDate")}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":t.$t("myinvoice.to"),"start-placeholder":t.$t("myinvoice.startDate"),"end-placeholder":t.$t("myinvoice.endDate")},on:{clear:function(e){return t.clearFilter("date")},change:t.dateChange},model:{value:t.filterParams.date,callback:function(e){t.$set(t.filterParams,"date",e)},expression:"filterParams.date"}})],1),e("el-form-item",[e("el-radio-group",{attrs:{size:"mini"},on:{change:t.filterDate},model:{value:t.dateFilter,callback:function(e){t.dateFilter=e},expression:"dateFilter"}},[e("el-radio-button",{attrs:{label:"1"}},[t._v(t._s(t.$t("transaction.today")))]),e("el-radio-button",{attrs:{label:"2"}},[t._v(t._s(t.$t("transaction.yestoday"))+" ")]),e("el-radio-button",{attrs:{label:"3"}},[t._v(t._s(t.$t("transaction.last7Days"))+" ")]),e("el-radio-button",{attrs:{label:"4"}},[t._v(t._s(t.$t("transaction.last30Days"))+" ")])],1)],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("transaction.paymentCode"),clearable:""},on:{clear:function(e){return t.clearFilter("paymentCode")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.paymentCode,callback:function(e){t.$set(t.filterParams,"paymentCode",e)},expression:"filterParams.paymentCode"}})],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("transaction.third"),clearable:""},on:{clear:function(e){return t.clearFilter("code")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.code,callback:function(e){t.$set(t.filterParams,"code",e)},expression:"filterParams.code"}})],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("transaction.vendorName"),clearable:""},on:{clear:function(e){return t.clearFilter("vendorName")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.vendorName,callback:function(e){t.$set(t.filterParams,"vendorName",e)},expression:"filterParams.vendorName"}})],1),e("el-form-item",{attrs:{label:t.$t("transaction.tradeType")}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("tradeType")}},model:{value:t.filterParams.tradeType,callback:function(e){t.$set(t.filterParams,"tradeType",e)},expression:"filterParams.tradeType"}},t._l(t.tradeTypeArr,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("transaction.tradeStatus")}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("tradeStatus")}},model:{value:t.filterParams.tradeStatus,callback:function(e){t.$set(t.filterParams,"tradeStatus",e)},expression:"filterParams.tradeStatus"}},t._l(t.tradeStatusArr,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("transaction.accountPayee")}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("accountPayee")}},model:{value:t.filterParams.accountPayee,callback:function(e){t.$set(t.filterParams,"accountPayee",e)},expression:"filterParams.accountPayee"}},t._l(t.accountPayeeArr,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("discount.订单编号"),clearable:""},on:{clear:function(e){return t.clearFilter("shopifyOrder")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.shopifyOrder,callback:function(e){t.$set(t.filterParams,"shopifyOrder",e)},expression:"filterParams.shopifyOrder"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("transaction.filter"))+" ")]),e("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v(t._s(t.$t("transaction.clear"))+" ")])],1)],1)],1)])],1),e("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark","row-key":t=>t.id}},[e("el-table-column",{attrs:{label:t.$t("transaction.CreateDate")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.$moment.unix(a.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.paymentCode")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.sysCode||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.third")},scopedSlots:t._u([{key:"default",fn:function(a){return["96"==a.row.code||"97"==a.row.code||"98"==a.row.code||"99"==a.row.code?e("span",[t._v("---")]):e("span",[t._v(t._s(a.row.code||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.vendorName")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.customerName||"---"))])]}}])}),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?e("el-table-column",{attrs:{label:t.$t("transaction.仓库")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.warehouseName||"--"))])]}}],null,!1,605806532)}):t._e(),e("el-table-column",{attrs:{label:t.$t("transaction.tradeType")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.filterText("tradeType",a.row.type)))])]}}])}),e("el-table-column",{attrs:{label:`${t.$t("transaction.tradeAmount")}(${t.$store.state.country.symbol})`},scopedSlots:t._u([{key:"default",fn:function(a){return[3==a.row.status?e("span",{staticClass:"tx-danger"},[t._v("- "+t._s(a.row.totalAmount))]):e("span",[t._v(t._s(a.row.totalAmount))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.tradeStatus")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.filterText("tradeStatus",a.row.status)))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.paymentType")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.filterText("platformType",a.row.platformType)))])]}}])}),e("el-table-column",{attrs:{label:t.$t("quotation.备注")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.remark||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.operate"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-link",{staticClass:"mg-r-20",attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite)||"1"!=a.row.type,type:"primary"},on:{click:function(e){return t.openExportDetail(a.row)}}},[t._v(" "+t._s(t.$t("transaction.detailView"))+" ")])],1)]}}])})],1)],1)],1)],1),t.items.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),e("el-tab-pane",{attrs:{label:t.$t("transaction.异常账单"),name:"1"}},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("el-card",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{ref:"pageFilter",staticClass:"page-filter"},[e("el-form",{attrs:{inline:!0,size:"mini"}},[e("el-form-item",[e("el-radio-group",{attrs:{size:"mini"},on:{change:t.filterDate},model:{value:t.dateFilter,callback:function(e){t.dateFilter=e},expression:"dateFilter"}},[e("el-radio-button",{attrs:{label:"1"}},[t._v(t._s(t.$t("transaction.today")))]),e("el-radio-button",{attrs:{label:"2"}},[t._v(t._s(t.$t("transaction.yestoday"))+" ")]),e("el-radio-button",{attrs:{label:"3"}},[t._v(t._s(t.$t("transaction.last7Days"))+" ")]),e("el-radio-button",{attrs:{label:"4"}},[t._v(t._s(t.$t("transaction.last30Days"))+" ")])],1)],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("transaction.paymentCode"),clearable:""},on:{clear:function(e){return t.clearFilter("paymentCode")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.paymentCode,callback:function(e){t.$set(t.filterParams,"paymentCode",e)},expression:"filterParams.paymentCode"}})],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("transaction.third"),clearable:""},on:{clear:function(e){return t.clearFilter("code")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.code,callback:function(e){t.$set(t.filterParams,"code",e)},expression:"filterParams.code"}})],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("transaction.vendorName"),clearable:""},on:{clear:function(e){return t.clearFilter("vendorName")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.vendorName,callback:function(e){t.$set(t.filterParams,"vendorName",e)},expression:"filterParams.vendorName"}})],1),e("el-form-item",{attrs:{label:t.$t("transaction.tradeType")}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("tradeType")}},model:{value:t.filterParams.tradeType,callback:function(e){t.$set(t.filterParams,"tradeType",e)},expression:"filterParams.tradeType"}},t._l(t.tradeTypeArr,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("transaction.tradeStatus")}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("tradeStatus")}},model:{value:t.filterParams.tradeStatus,callback:function(e){t.$set(t.filterParams,"tradeStatus",e)},expression:"filterParams.tradeStatus"}},t._l(t.tradeStatusArr,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("transaction.accountPayee")}},[e("el-select",{attrs:{filterable:"",remote:"",placeholder:t.$t("transaction.all"),clearable:""},on:{change:t.filterItem,clear:function(e){return t.clearFilter("accountPayee")}},model:{value:t.filterParams.accountPayee,callback:function(e){t.$set(t.filterParams,"accountPayee",e)},expression:"filterParams.accountPayee"}},t._l(t.accountPayeeArr,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("discount.订单编号"),clearable:""},on:{clear:function(e){return t.clearFilter("shopifyOrder")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.filterParams.shopifyOrder,callback:function(e){t.$set(t.filterParams,"shopifyOrder",e)},expression:"filterParams.shopifyOrder"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("transaction.filter"))+" ")]),e("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v(t._s(t.$t("transaction.clear"))+" ")])],1)],1)],1)])],1),e("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"tooltip-effect":"dark","row-key":t=>t.id}},[e("el-table-column",{attrs:{label:t.$t("transaction.CreateDate")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.$moment.unix(a.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.paymentCode")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.sysCode||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.third")},scopedSlots:t._u([{key:"default",fn:function(a){return["96"==a.row.code||"97"==a.row.code||"98"==a.row.code||"99"==a.row.code?e("span",[t._v("---")]):e("span",[t._v(t._s(a.row.code||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.vendorName")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.customerName||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.tradeType")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.filterText("tradeType",a.row.type)))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.交易"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"tx-danger"},[t._v(" "+t._s(Number(a.row.bonusAmount).toFixed(2)))]),t._v(" "),e("br"),e("span",[t._v(t._s(Number(a.row.creditAmount).toFixed(2)))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.tradeStatus")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.filterText("tradeStatus",a.row.status)))])]}}])}),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?e("el-table-column",{attrs:{label:t.$t("transaction.仓库")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.warehouseName||"--"))])]}}],null,!1,605806532)}):t._e(),e("el-table-column",{attrs:{label:t.$t("transaction.paymentType")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t.filterText("platformType",a.row.platformType)))])]}}])}),e("el-table-column",{attrs:{label:t.$t("quotation.备注")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.remark||"---"))])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.operate"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-link",{staticClass:"mg-r-20",attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite)||"1"!=a.row.type,type:"primary"},on:{click:function(e){return t.openExportDetail(a.row)}}},[t._v(" "+t._s(t.$t("transaction.detailView"))+" ")]),t._v(" "),e("br"),e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.setOrder(a.row)}}},[t._v("处理")])],1)]}}])})],1)],1)],1)],1),t.items.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1)],1)],1),e("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:20}}),e("el-dialog",{staticClass:"dialog-open-custom",attrs:{title:t.$t("transaction.exportTitle"),visible:t.viewDetail.isShow,width:"50%"},on:{close:function(e){t.viewDetail.isShow=!1}}},[e("el-divider"),e("div",{staticClass:"dialog-body"},[e("el-row",{staticClass:"tltle"},[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.exportTime"))+"："+t._s(t.$moment().format("YYYY-MM-DD HH:mm:ss"))+" ")])]),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.Petitioner"))+"："+t._s(t.$store.state.userInfo.name)+" ")])])],1),t._l(t.viewDetail.items,(function(a,r){return e("div",{key:r,staticClass:"item-wrap"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.CreateDate"))+"："+t._s(t.$moment.unix(a.timeCreated).format("YYYY-MM-DD HH:mm:ss"))+" ")])]),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.paymentCode"))+"："+t._s(a.sysCode)+" ")])])],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.tradeType"))+"："+t._s(t.filterText("tradeType",a.type))+" ")])]),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content"},[t._v(" "+t._s(`${t.$t("transaction.tradeAmount")}(${t.$store.state.country.symbol})`)+"："+t._s(a.totalAmount)+" ")])])],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content"},[t._v(" "+t._s(t.$t("transaction.third"))+"："+t._s(a.code)+" ")])])],1)],1)}))],2),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.viewDetail.isShow=!1}}},[t._v(t._s(t.$t("transaction.cancel")))]),e("el-button",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary",loading:t.viewDetail.exportLoading},on:{click:t.exportDetailFn}},[t._v(" "+t._s(t.$t("transaction.export"))+" ")])],1)],1),e("DialogDetail",{attrs:{data:t.dialogDetailData}})],1)},s=[],i=(a("14d9"),function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("transaction.支付明细"),visible:t.data.isShow,width:"990px","custom-class":"d-detail"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)}}},[e("el-divider"),e("div",{staticClass:"d-body"},[e("div",{staticClass:"t-table"},[e("div",{staticClass:"t-header"},[e("div",{staticClass:"c c1"},[t._v(t._s(t.$t("transaction.订单类型")))]),e("div",{staticClass:"c c1"},[t._v(t._s(t.$t("transaction.第三方订单")))]),e("div",{staticClass:"c c2"},[t._v(t._s(t.$t("transaction.平台订单号")))]),e("div",{staticClass:"c c3"},[t._v(t._s(t.$t("transaction.实际支付总额"))+"("+t._s(t.$store.state.country.shopCurrency)+")")]),e("div",{staticClass:"c c4"},[t._v(t._s(t.$t("transaction.实际支付运费"))+"("+t._s(t.$store.state.country.shopCurrency)+")")]),e("div",{staticClass:"c c5"},[t._v(t._s(t.$t("transaction.实际支付商品总额"))+"("+t._s(t.$store.state.country.shopCurrency)+")")]),e("div",{staticClass:"c c6"},[t._v(t._s(t.$t("transaction.SKU明细")))]),e("div",{staticClass:"c c7"},[t._v(t._s(t.$t("transaction.实际支付商品单价"))+"("+t._s(t.$store.state.country.shopCurrency)+")")]),e("div",{staticClass:"c c8"},[t._v(t._s(t.$t("transaction.商品数量")))]),e("div",{staticClass:"c c9"},[t._v(t._s(t.$t("transaction.重量"))+"(g)")])]),e("div",{staticClass:"t-body"},t._l(t.data.items,(function(a){return e("div",{key:a.id,staticClass:"t-row"},[e("div",{staticClass:"c c1"},[t._v(t._s(1==a.shippingType?t.$t("transaction.批发单"):t.$t("transaction.自提单")))]),e("div",{staticClass:"c c1"},[t._v(t._s(a.codeName))]),e("div",{staticClass:"c c2"},[t._v(t._s(a.orderId))]),e("div",{staticClass:"c c3"},[t._v(t._s(a.payTotalAmount))]),e("div",{staticClass:"c c4"},[t._v(t._s(a.shippingAllAmount))]),e("div",{staticClass:"c c5"},[t._v(t._s(a.itemAllAmount))]),e("div",{staticClass:"c c6-9"},t._l(a.items,(function(a){return e("div",{key:a.id,staticClass:"c-sub"},[e("div",{staticClass:"c c6"},[t._v(t._s(a.vendorSku))]),e("div",{staticClass:"c c7"},[t._v(t._s(a.vendorPrice))]),e("div",{staticClass:"c c8"},[t._v(t._s(a.quantity))]),e("div",{staticClass:"c c9"},[t._v(t._s(Number(a.weight)*Number(a.quantity)))])])})),0)])})),0)])]),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.data.isShow=!1}}},[t._v(t._s(t.$t("transaction.cancel")))]),e("el-button",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary",loading:t.data.loading},on:{click:t.exportDetailFn}},[t._v(" "+t._s(t.$t("transaction.export"))+" ")])],1)],1)}),l=[],o={props:["data"],methods:{exportDetailFn(){this.data.loading=!0,0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>'),console.log(this.data.ids),this.$apiCall("api.AccountPayment.exportPayment",{ids:this.data.ids,isNew:1},t=>{this.data.loading=!1,"9999"==t.ErrorCode?(document.getElementById("ifilePro").src=t.Data.Results.file,this.$elementMessage(this.$t("myinvoice.exportSuccess"),"success"),this.data.isShow=!1):this.$elementMessage(t.Message,"error")})}}},n=o,c=(a("9f36"),a("2877")),d=Object(c["a"])(n,i,l,!1,null,"0f03337f",null),m=d.exports,u={data(){return{loading:!1,vendorId:localStorage.getItem("vendorId"),pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("transactionRowsPerPage")?Number(localStorage.getItem("transactionRowsPerPage")):10,items:[],total:0,activeName:"2",totalPage:0,filterParams:{vendorName:"",accountIds:"",paymentCode:"",code:"",accountPayee:"",tradeStatus:"",tradeType:"",date:[],timeCreatedFrom:"",timeCreatedTo:"",shopifyOrder:"",creditStatus:"2"},filterParamsDefault:"{}",dateFilter:"",viewDetail:{isShow:!1,exportLoading:!1,items:[]},tradeTypeArr:[{id:1,name:this.$t("transaction.type1")},{id:6,name:this.$t("transaction.type6")},{id:7,name:this.$t("transaction.type7")},{id:8,name:this.$t("transaction.type8")}],tradeStatusArr:[{id:1,name:this.$t("transaction.status1")},{id:2,name:this.$t("transaction.status2")},{id:3,name:this.$t("transaction.status3")},{id:9,name:this.$t("transaction.status9")}],accountPayeeArr:[{id:1,name:"stripe"},{id:2,name:"ebanx"},{id:3,name:"PayPal"},{id:4,name:"checkout"},{id:6,name:this.$t("transaction.payment6")},{id:7,name:this.$t("transaction.payment7")},{id:8,name:this.$t("transaction.payment8")},{id:10,name:"dLocal"},{id:11,name:"PAYONEER"},{id:12,name:this.$t("transaction.payment12")}],checkItems:[],storeList:[],dialogDetailData:{isShow:!1,loading:!1,ids:[],items:[]},defaultDialogDetailData:"{}"}},components:{DialogDetail:m},watch:{$route:"gotoPage"},mounted(){this.defaultDialogDetailData=JSON.stringify(this.dialogDetailData),this.filterParamsDefault=JSON.stringify(this.filterParams),this.getItem(),this.getShopName()},methods:{openExportDetail(t){this.loading=!0,this.$apiCall("api.AccountPayment.getInvoiceShopifyInfo",{id:t.id},e=>{this.loading=!1,"9999"==e.ErrorCode?(this.dialogDetailData=JSON.parse(this.defaultDialogDetailData),this.dialogDetailData.ids=[t.id],this.dialogDetailData.items=Object.keys(e.Data.Results).map(t=>e.Data.Results[t]),this.dialogDetailData.isShow=!0):this.$elementMessage(e.Message,"error")})},handleClick(t,e){this.filterParams={vendorName:"",paymentCode:"",code:"",accountPayee:"",tradeStatus:"",tradeType:"",date:[],timeCreatedFrom:"",timeCreatedTo:"",shopifyOrder:"",creditStatus:t.name},this.$refs.gridTable.clearSelection(),this.getItem()},exportDetailFn(){let t=[];if(!this.viewDetail.items.length)return;this.viewDetail.items.forEach(e=>{t.push(e.id)}),this.viewDetail.exportLoading=!0,0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let e=t=>{document.getElementById("ifilePro").src=t},a="api.AccountPayment.exportPayment";this.$apiCall(a,{ids:t,isNew:1},t=>{this.viewDetail.exportLoading=!1,"9999"==t.ErrorCode?(this.$elementMessage(this.$t("myinvoice.exportSuccess"),"success"),e(t.Data.Results.file)):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this))})},handleSelectionChange(t){this.viewDetail.items=[],this.checkItems=[],t.length&&(this.viewDetail.items=t,this.checkItems=t)},viewDetailFn(t,e){this.viewDetail.isShow=!0,"row"==t&&(this.viewDetail.items=[],this.viewDetail.items.push(e))},filterText(t,e){let a;switch(t){case"tradeType":this.tradeTypeArr.forEach(t=>{t.id==e&&(a=t)});break;case"tradeStatus":this.tradeStatusArr.forEach(t=>{t.id==e&&(a=t)});break;case"platformType":this.accountPayeeArr.forEach(t=>{t.id==e&&(a=t)});break;default:break}return a?a.name:"---"},setOrder(t){this.$apiCall("api.AccountPayment.changeCreditStatus",{id:t.id},t=>{this.loading=!1,"9999"==t.ErrorCode?(this.$elementMessage(t.Message,"success"),this.getItem()):this.$elementMessage(t.Message,"error")})},toPage(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},changePageSize(t){this.rowsPerPage=t,localStorage.setItem("transactionRowsPerPage",t),this.getItem()},gotoPage(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()},filterDate(){let t=Number(this.dateFilter),e=this.$moment().format("YYYY-MM-DD"),a=this.$moment().add(-1,"days").format("YYYY-MM-DD"),r=this.$moment().add(-6,"days").format("YYYY-MM-DD"),s=this.$moment().add(-29,"days").format("YYYY-MM-DD");switch(this.filterParams.timeCreatedTo=e,t){case 1:this.filterParams.timeCreatedFrom=e;break;case 2:this.filterParams.timeCreatedFrom=a,this.filterParams.timeCreatedTo=a;break;case 3:this.filterParams.timeCreatedFrom=r;break;case 4:this.filterParams.timeCreatedFrom=s;break;default:break}this.filterItem()},dateChange(){this.filterParams.date.length>1&&(this.filterParams.timeCreatedFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.timeCreatedTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem())},clearFilter(t){switch(t){case"paymentCode":this.filterParams.paymentCode="";break;case"code":this.filterParams.code="";break;case"vendorName":this.filterParams.vendorName="";break;case"shopifyOrder":this.filterParams.shopifyOrder="";break;case"accountIds":this.filterParams.accountIds="";break;case"tradeType":this.filterParams.tradeType="";break;case"tradeStatus":this.filterParams.tradeStatus="";break;case"accountPayee":this.filterParams.accountPayee="";break;case"date":this.filterParams.date=[],this.filterParams.timeCreatedFrom="",this.filterParams.timeCreatedTo="";break;default:this.dateFilter="",this.filterParams=JSON.parse(this.filterParamsDefault);break}this.filterItem()},getShopName(){this.storeList=[],this.$apiCall("api.Invoice.findStoreByVendor",{},t=>{9999==t.ErrorCode?this.storeList=t.Data.Results:this.$message({message:t.Message,type:"error"})})},filterItem(t){this.$refs.gridTable.clearSelection(),1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},getItem(t){this.loading=!0,this.$apiCall("api.AccountPayment.findByVendor",{page:this.page,rowsPerPage:this.rowsPerPage,timeCreatedFrom:this.filterParams.timeCreatedFrom,timeCreatedTo:this.filterParams.timeCreatedTo,sysCode:this.filterParams.paymentCode,code:this.filterParams.code,nameLike:this.filterParams.vendorName,shopifyOrder:this.filterParams.shopifyOrder,platformType:this.filterParams.accountPayee,paymentType:this.filterParams.tradeType,status:this.filterParams.tradeStatus,creditStatus:this.activeName},t=>{this.loading=!1,9999==t.ErrorCode?(this.items=t.Data.Results,this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage)):this.$message({message:t.Message,type:"error"})})}}},p=u,f=(a("1b64"),Object(c["a"])(p,r,s,!1,null,"ad677ea2",null));e["default"]=f.exports},d133:function(t,e,a){"use strict";a("617b")},dcc0:function(t,e,a){}}]);