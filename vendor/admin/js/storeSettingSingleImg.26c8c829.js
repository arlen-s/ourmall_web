(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["storeSettingSingleImg"],{"287c":function(t,e,i){"use strict";i("7160")},7160:function(t,e,i){},d5cb:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"setting-page"},[i("el-scrollbar",{staticClass:"left"},[i("div",{staticClass:"content"},[i("h1",[i("el-link",{attrs:{icon:"el-icon-arrow-left",underline:!1},on:{click:t.goBack}},[t._v(t._s(t.$t("storeSetting.单图")))])],1),i("el-card",{attrs:{"body-style":{padding:"20px 10px"}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.imgLoading,expression:"imgLoading"}],staticClass:"img-box"},[i("div",{staticClass:"title"},[i("h2",[t._v(t._s(t.$t("storeSetting.图片")))]),i("p",{staticClass:"msg"},[t._v("("+t._s(t.$t("storeSetting.建议尺寸990px * 742px"))+")")])]),t.setting.img?i("div",{staticClass:"has-img"},[i("div",{staticClass:"img-wrap",style:{backgroundImage:"url("+t.setting.img+")"}}),i("div",{staticClass:"action"},[i("el-link",{attrs:{type:"primary"},on:{click:t.openUploadImg}},[t._v(t._s(t.$t("storeSetting.更改")))]),i("el-link",{attrs:{type:"danger"},on:{click:t.delImg}},[t._v(t._s(t.$t("storeSetting.删除")))])],1)]):i("a",{staticClass:"upload-box",attrs:{href:"javascript:;"},on:{click:t.openUploadImg}},[i("i",{staticClass:"el-icon-circle-plus"}),t._v(t._s(t.$t("storeSetting.添加图片"))+" ")]),i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"uploadImgSing",accept:"image/jpeg, image/png, image/gif, image/webp"},on:{change:function(e){return t.Base64(e)}}})]),i("el-form",[i("el-form-item",{attrs:{label:t.$t("storeSetting.跳转链接")}},[i("el-select",{attrs:{size:"small"},model:{value:t.setting.link,callback:function(e){t.$set(t.setting,"link",e)},expression:"setting.link"}},t._l(t.optLinkArr,(function(e){return i("el-option",{key:e.value,attrs:{label:t.$t(e.label),value:e}})})),1)],1),i("el-form-item",{attrs:{label:t.$t("storeSetting.图片高度")}},[i("el-select",{attrs:{size:"small"},model:{value:t.setting.height,callback:function(e){t.$set(t.setting,"height",e)},expression:"setting.height"}},t._l(t.optImgSize,(function(e){return i("el-option",{key:e.value,attrs:{label:t.$t(e.label),value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:t.$t("storeSetting.标题")}},[i("el-input",{model:{value:t.setting.title,callback:function(e){t.$set(t.setting,"title",e)},expression:"setting.title"}})],1),i("el-form-item",{attrs:{label:t.$t("storeSetting.副标题")}},[i("el-input",{attrs:{type:"textarea",rows:2},model:{value:t.setting.subTitle,callback:function(e){t.$set(t.setting,"subTitle",e)},expression:"setting.subTitle"}})],1),i("el-form-item",{attrs:{label:t.$t("storeSetting.文字大小")}},[i("el-select",{attrs:{size:"small"},model:{value:t.setting.size,callback:function(e){t.$set(t.setting,"size",e)},expression:"setting.size"}},t._l(t.optFontSize,(function(e){return i("el-option",{key:e.value,attrs:{label:t.$t(e.label),value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:t.$t("storeSetting.文本对齐")}},[i("el-button-group",{staticStyle:{width:"100%"}},[i("el-button",{class:{active:"left"==t.setting.align},attrs:{plain:"",size:"medium"},on:{click:function(e){return t.changeAlign("left")}}},[i("i",{staticClass:"fa fa-align-left",attrs:{"aria-hidden":"true"}})]),i("el-button",{class:{active:"center"==t.setting.align},attrs:{plain:"",size:"medium"},on:{click:function(e){return t.changeAlign("center")}}},[i("i",{staticClass:"fa fa-align-justify",attrs:{"aria-hidden":"true"}})]),i("el-button",{class:{active:"right"==t.setting.align},attrs:{plain:"",size:"medium"},on:{click:function(e){return t.changeAlign("right")}}},[i("i",{staticClass:"fa fa-align-right",attrs:{"aria-hidden":"true"}})])],1)],1),i("el-form-item",{attrs:{label:t.$t("storeSetting.文本颜色")}},[i("el-color-picker",{staticClass:"color-p",attrs:{size:"mini"},model:{value:t.setting.color,callback:function(e){t.$set(t.setting,"color",e)},expression:"setting.color"}})],1),i("el-form-item",{attrs:{label:t.$t("storeSetting.按钮文案")}},[i("el-input",{model:{value:t.setting.btnText,callback:function(e){t.$set(t.setting,"btnText",e)},expression:"setting.btnText"}})],1),i("el-form-item",{attrs:{label:t.$t("storeSetting.按钮背景颜色")}},[i("el-color-picker",{staticClass:"color-p",attrs:{size:"mini"},model:{value:t.setting.btnBackground,callback:function(e){t.$set(t.setting,"btnBackground",e)},expression:"setting.btnBackground"}})],1),i("el-form-item",{attrs:{label:t.$t("storeSetting.按钮文字颜色")}},[i("el-color-picker",{staticClass:"color-p",attrs:{size:"mini"},model:{value:t.setting.btnColor,callback:function(e){t.$set(t.setting,"btnColor",e)},expression:"setting.btnColor"}})],1)],1)],1)],1)]),i("el-scrollbar",{ref:"rightBox",staticClass:"right"},[i("div",{staticClass:"content"},[i("demoHeader",{attrs:{data:t.$store.state.configJson.header,headerMenu:t.headerMenu}}),i("demoBody",{attrs:{data:t.setting,header:t.$store.state.configJson.header}}),i("demoFooter",{attrs:{setting:t.$store.state.configJson.footer}})],1)]),i("div",{staticClass:"action"},[i("el-button",{attrs:{type:"danger",size:"medium"},on:{click:t.del}},[t._v(t._s(t.$t("storeSetting.删除该组件")))]),i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v(t._s(t.$t("storeSetting.完成")))])],1)],1)},a=[],n=(i("d3b7"),i("159b"),i("4e82"),i("e9c4"),i("ac1f"),i("5319"),i("466d"),i("1276"),i("826e")),o=i("8c3c"),l=(i("784e"),i("db46")),r={data:function(){return{isSave:!1,exist:!1,imgLoading:!1,headerMenu:[],setting:{cid:this.$route.query.cid,type:"singleImg",img:"",link:"Products",height:371,title:" ",subTitle:"",size:14,align:"center",color:"#606266",btnText:"",btnColor:"#C0C4CC",btnBackground:"#303133"},optLinkArr:[{label:"storeSetting.Home",value:"home",url:"home"},{label:"storeSetting.Products",value:"products",url:"productsMarketHome"}],optImgSize:[{label:"storeSetting.大",value:446},{label:"storeSetting.中",value:371},{label:"storeSetting.小",value:267},{label:"storeSetting.自适应",value:0}],optFontSize:[{label:"storeSetting.大",value:16},{label:"storeSetting.中",value:14},{label:"storeSetting.小",value:12}]}},components:{demoHeader:n["a"],demoBody:o["a"],demoFooter:l["a"]},created:function(){var t=this;this.$apiCall("api.VendorShop.getShopConfig",{},(function(e){9999==e.ErrorCode?0!==e.Data.Results.length&&(e.Data.Results.header.activeMenu&&e.Data.Results.menu.forEach((function(i){i.id==e.Data.Results.header.activeMenu&&(t.headerMenu=i)})),t.$store.commit("getShopConfig",e.Data.Results),t.$store.state.configJson.sort.forEach((function(e){e.cid==t.$route.query.cid&&(t.exist=!0,t.setting=JSON.parse(JSON.stringify(e)))})),t.$nextTick((function(){t.$refs.rightBox.wrap.scrollTop=document.getElementById("row".concat(t.$route.query.cid)).offsetTop})),t.exist||(t.setting={cid:t.$route.query.cid,type:"singleImg",img:"",link:"Products",height:371,title:" ",subTitle:"",size:14,align:"center",color:"#606266",btnText:"",btnColor:"#C0C4CC",btnBackground:"#303133"},t.exist=!0,t.$store.commit("addStoreComponent",t.setting))):t.$message({message:e.Message,type:"error"})}))},beforeRouteLeave:function(t,e,i){if(this.isSave)i();else{var s=confirm(this.$t("logistics.当前页面还未保存，确定要离开吗?"));s?i():i(!1)}},methods:{ccc:function(t){console.log(t)},save:function(){var t=this;this.isSave=!0,this.exist&&this.$store.commit("setStoreComponent",this.setting),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},(function(e){9999==e.ErrorCode?t.$elementMessage(t.$t("storeSetting.保存成功"),"success"):t.$message({message:e.Message,type:"error"})}))},del:function(){var t=this;this.isSave=!0,this.$store.commit("delComponent",this.setting.cid),this.setting=JSON.parse(JSON.stringify(this.$store.state.configJson)),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},(function(e){9999==e.ErrorCode?(t.$elementMessage("删除成功","success"),t.$router.replace({name:"storeSettingMain"})):t.$message({message:e.Message,type:"error"})}))},changeAlign:function(t){this.setting.align=t},delImg:function(){this.setting.img=""},uploadImgBase64:function(t,e){var i=this;this.imgLoading=!0,this.$apiCall("api.Comment.uploadImg",{imgUrlBase64:t,ext:e},(function(t){i.imgLoading=!1,document.getElementById("uploadImgSing").value="",9999==t.ErrorCode?i.setting.img=t.Data.Results.imgUrl:i.$message({message:t.Message,type:"error"})}))},Base64:function(t){var e=this;if(t.target.value){if(t.target.files[0].size/1024/1024>1)return this.$message({message:this.$t("category.上传文件不能大于1MB"),type:"error"}),void(t.target.value="");var i=new FileReader,s=new Image,a="";i.onload=function(t){s.src=t.target.result;var i=t.target.result.match(/data:image\/(.*);base64,.*/);a=i[1],e.uploadImgBase64(t.target.result.split(",").pop(),a)},i.readAsDataURL(t.target.files[0])}},openUploadImg:function(){document.getElementById("uploadImgSing").click()},goBack:function(){this.$router.push({name:"storeSettingMain"})}}},c=r,g=(i("287c"),i("2877")),u=Object(g["a"])(c,s,a,!1,null,"4b01658a",null);e["default"]=u.exports}}]);