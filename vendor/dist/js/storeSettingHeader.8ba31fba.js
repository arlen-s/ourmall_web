(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["storeSettingHeader"],{"10ce":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.setting?s("div",{staticClass:"setting-page"},[s("el-scrollbar",{staticClass:"left"},[s("div",{staticClass:"content"},[s("h1",{on:{click:t.goBack}},[s("el-link",{attrs:{icon:"el-icon-arrow-left",underline:!1}},[t._v(t._s(t.$t("storeSetting.全站页头")))])],1),s("el-card",[s("uploadLogo",{staticClass:" mg-b-20",attrs:{logo:t.setting.logo},on:{changeLogo:t.changeLogo}}),s("div",{staticClass:"logo-w"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.自定义Logo宽度")))]),s("div",{staticClass:"value"},[s("el-slider",{attrs:{min:60,max:400,"show-tooltip":!1},model:{value:t.setting.logoWidth,callback:function(e){t.$set(t.setting,"logoWidth",e)},expression:"setting.logoWidth"}}),s("span",[t._v(t._s(t.setting.logoWidth)+"px")])],1)]),s("div",{staticClass:"change-color-box"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.setting.isTransparent,expression:"!setting.isTransparent"}]},[s("div",{staticClass:"row-color mg-b-10"},[s("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.背景颜色")))]),s("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.setting.backgroundColor,callback:function(e){t.$set(t.setting,"backgroundColor",e)},expression:"setting.backgroundColor"}})],1),s("div",{staticClass:"row-color mg-b-20"},[s("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.文字颜色")))]),s("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.setting.color,callback:function(e){t.$set(t.setting,"color",e)},expression:"setting.color"}})],1)]),s("div",{staticClass:"row-color mg-b-10"},[s("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.启用透明页头")))]),s("el-switch",{model:{value:t.setting.isTransparent,callback:function(e){t.$set(t.setting,"isTransparent",e)},expression:"setting.isTransparent"}})],1),s("p",{staticClass:" mg-b-10",staticStyle:{color:"#909399","font-size":"12px"}},[t._v(t._s(t.$t("storeSetting.在顶部部分是轮播图时适用,透明页头可以直接叠加在轮播图上")))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.setting.isTransparent,expression:"setting.isTransparent"}],staticClass:"row-color"},[s("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.透明页头文字颜色")))]),s("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.setting.transparentColor,callback:function(e){t.$set(t.setting,"transparentColor",e)},expression:"setting.transparentColor"}})],1)]),s("div",{staticClass:"selectedNav"},[s("h2",[t._v(t._s(t.$t("storeSetting.选择导航菜单")))]),s("div",[s("el-radio-group",{model:{value:t.setting.activeMenu,callback:function(e){t.$set(t.setting,"activeMenu",e)},expression:"setting.activeMenu"}},t._l(t.$store.state.configJson.menu,(function(e){return s("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))])})),1),s("el-divider"),s("div",{staticClass:"action-wrap"},[s("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({name:"menuSetting"})}}},[s("i",{staticClass:"el-icon-circle-plus"}),t._v(" "+t._s(t.$t("storeSetting.创建导航菜单")))])],1)],1)]),s("div",{staticClass:"change-seach"},[s("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.展示搜索入口")))]),s("el-switch",{model:{value:t.setting.isVisibleSearch,callback:function(e){t.$set(t.setting,"isVisibleSearch",e)},expression:"setting.isVisibleSearch"}})],1)],1)],1)]),s("el-scrollbar",{staticClass:"right"},[s("div",{staticClass:"content"},[s("domeHeader",{attrs:{data:t.setting,headerMenu:t.headerMenu}}),s("demoBody",{attrs:{data:t.$store.state.configJson.sort,header:t.setting}}),s("demoFooter",{attrs:{setting:t.$store.state.configJson.footer}})],1)]),s("div",{staticClass:"action"},[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v(t._s(t.$t("storeSetting.完成")))])],1)],1):t._e()},a=[],o=(s("e456"),s("af46"),s("5ad0"),s("cf10"),s("0d90"),s("3335")),n=s.n(o),r=s("eeb0"),l=s("826e"),c=s("8c3c"),g=s("db46"),u={data:function(){return{isSave:!1,headerMenu:[],setting:{logo:"",logoWidth:60,backgroundColor:"#fff",color:"#606266",isTransparent:!1,transparentColor:"#606266",menu:[],isVisibleSearch:!0,activeMenu:""}}},components:{draggable:n.a,uploadLogo:r["a"],domeHeader:l["a"],demoBody:c["a"],demoFooter:g["a"]},watch:{"setting.activeMenu":{handler:function(){var t=this;this.setting.activeMenu&&this.$store.state.configJson.menu.forEach((function(e){e.id==t.setting.activeMenu&&(t.headerMenu=e)}))},deep:!0,immediate:!0}},beforeRouteLeave:function(t,e,s){if(this.isSave)s();else{var i=confirm(this.$t("logistics.当前页面还未保存，确定要离开吗?"));i?s():s(!1)}},created:function(){var t=this;this.$apiCall("api.VendorShop.getShopConfig",{},(function(e){9999==e.ErrorCode&&(0!==e.Data.Results.length&&t.$store.commit("getShopConfig",e.Data.Results),t.setting=JSON.parse(JSON.stringify(t.$store.state.configJson.header)))}))},methods:{goBack:function(){this.$router.push({name:"storeSettingMain"})},save:function(){var t=this;this.isSave=!0,this.setting.menu.forEach((function(t){"9998"==t.link.value&&(t.link.url=t.url)})),this.$store.commit("setStoreHeader",this.setting),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},(function(e){9999==e.ErrorCode?(t.setVonderLogo(),t.$elementMessage(t.$t("storeSetting.保存成功"),"success")):t.$message({message:e.Message,type:"error"})}))},setVonderLogo:function(){var t=this;this.$apiCall("api.VendorShop.changeByVendor",{logo:this.setting.logo||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAA3NCSVQICAjb4U/gAAAAXVBMVEX////////////////////////////////////////////////////////////y8vLl5eXZ2dnMzMy/v7+ysrKlpaWZmZmMjIx/f39ycnJmZmZZWVlMTEw/Pz8zMzMXc/8wAAAAH3RSTlMAIjNEVWZ3iJmqu8zd7v//////////////////////812x6gAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDgvMjUvMjElHVhBAAAC10lEQVRogc2a7ZaCIBCGLb9KE9PUiFXu/zIXRF1FSUSYs++fpDnxBDMDCHiepvwoTlI0KU3iyNf9rZaCeFb9XGkc2CGE923AqHt4luDfsu8Irux2puPCZJ8glJg2J3zoIrgeJhhfuxVTaw53WnwUwRUfQgQa7t5SdiCijZpxrDEXRebpKb3oMK6GXTUqu+4zwnMIrt1gtsDYpVhh7FAsMb5SrDG+UK72GAgpYuxyMnaXyrbz5VQOrpVuMU6MJdvaGGEC2wyE1qOlVYcIZc47i0vqMN8FA6HlXHl4rtVTMmdYTPWl5ol/aF1yRA+Ahsyb4sgjXJNXHIWW0BhgN5eQm7tk/1Pm3O1cwvU77x9nde8hbhkIORrjlwpcjb9z8bHY8qy7Vqp0SUFIZYuiTPeS0sYWxPci95BI5XebkFg1AsuQZ1mWc3NZ5mqrpEQVXEtI3VKm7j1U3HS8+KaUbFlXSlX5voBgVgV+s6p+8rH4xhxENqwb0oFU4vf5R3w3FItOQCSrKYT9ySf/zDvasY+foVgJiGQ1hDzHvkcfXl8+FfsHyWoK+XtsKC1nxb56yfqvIQWlWDyxOCq4RRRFv0lWUwhiHhXB2XLXsrrbvjQ4fmk1huDhz9biO0JpzRvSCohkPQhpSa8C5SxoSfXCQ7qxDqK47NOcQyTrJkQ9rAxizsyJePyIWl79qDINK5J1rVQ1QOblqP6nRd009ZQFedWXpgxZWldKTkzxL93ZIFZNWhoiyryQFBmstivM0yHHU2/tyTdY27HM7ggLKXU0STJZEhWYE6j2aiaFWtyBLFNBFtwwrw4gL0Egr3MwL6Ygr9ggmwUw2x4gGzgwW1Egm2ow24MgG50wW7Ywm88g2+gwBwIwRxsghzQwx00wB2cwR4Awh5kwx7IwB8wwR+UeyKG/B3N9wbQxxy5ieDBXSjyQyzE9xv01Hy6AC0uiOc6vXgm5v0Q26Mx1uF+/ksTeg/ksIQAAAABJRU5ErkJggg=="},(function(e){9999==e.ErrorCode||t.$message({message:e.Message,type:"error"})}))},delNav:function(t){this.setting.menu.splice(t,1)},changeLogo:function(t){this.setting.logo=t},addNav:function(){this.setting.menu.push({timestamp:(new Date).getTime(),name:"",link:null,url:""}),this.$nextTick((function(){var t=document.querySelectorAll(".ipt-nav-box .ipt-name input");t[t.length-1].focus()}))}}},d=u,p=(s("d5c3"),s("4e98"),s("cba8")),v=Object(p["a"])(d,i,a,!1,null,"13867534",null);e["default"]=v.exports},"2fb8":function(t,e,s){},"4e98":function(t,e,s){"use strict";s("7a0a")},"7a0a":function(t,e,s){},8986:function(t,e,s){},a3de:function(t,e,s){var i=s("add7"),a=s("0448"),o=s("9145"),n=/"/g,r=i("".replace);t.exports=function(t,e,s,i){var l=o(a(t)),c="<"+e;return""!==s&&(c+=" "+s+'="'+r(o(i),n,"&quot;")+'"'),c+">"+l+"</"+e+">"}},bfd5:function(t,e,s){"use strict";s("8986")},cf10:function(t,e,s){"use strict";var i=s("7e70"),a=s("a3de"),o=s("df7e");i({target:"String",proto:!0,forced:o("link")},{link:function(t){return a(this,"a","href",t)}})},d5c3:function(t,e,s){"use strict";s("2fb8")},df7e:function(t,e,s){var i=s("137b");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},eeb0:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"upload-logo"},[t._m(0),t.logo?s("div",{staticClass:"logo-preview"},[s("div",{staticClass:"img-box",style:{backgroundImage:"url("+t.logo+")"}}),s("div",{staticClass:"action"},[s("el-link",{attrs:{type:"primary"},on:{click:t.openUploadImg}},[t._v(t._s(t.$t("storeSetting.更改")))]),s("el-link",{attrs:{type:"danger"},on:{click:t.delImg}},[t._v(t._s(t.$t("storeSetting.删除")))])],1)]):s("div",{staticClass:"upload-box"},[s("a",{staticClass:"upload-btn",attrs:{href:"javascript:;"},on:{click:t.openUploadImg}},[s("i",{staticClass:"el-icon-plus"}),t._v(t._s(t.$t("storeSetting.添加图片"))+" ")])]),s("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"uploadImg",accept:"image/jpeg, image/png, image/gif, image/webp"},on:{change:function(e){return t.Base64(e)}}})])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[s("h2",[t._v("Logo")])])}],o=(s("cf33"),s("d183"),s("8f10"),{props:["logo"],data:function(){return{loading:!1}},methods:{delImg:function(){this.$emit("changeLogo","")},uploadImgBase64:function(t,e){var s=this;this.loading=!0,this.$apiCall("api.Comment.uploadImg",{imgUrlBase64:t,ext:e},(function(t){s.loading=!1,document.getElementById("uploadImg").value="",9999==t.ErrorCode?s.$emit("changeLogo",t.Data.Results.imgUrl):s.$message({message:t.Message,type:"error"})}))},Base64:function(t){var e=this;if(t.target.value){if(t.target.files[0].size/1024/1024>1)return this.$message({message:this.$t("category.上传文件不能大于1MB"),type:"error"}),void(t.target.value="");var s=new FileReader,i=new Image,a="";s.onload=function(t){i.src=t.target.result;var s=t.target.result.match(/data:image\/(.*);base64,.*/);a=s[1],e.uploadImgBase64(t.target.result.split(",").pop(),a)},s.readAsDataURL(t.target.files[0])}},openUploadImg:function(){document.getElementById("uploadImg").click()}}}),n=o,r=(s("bfd5"),s("cba8")),l=Object(r["a"])(n,i,a,!1,null,"9996928e",null);e["a"]=l.exports}}]);