(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["myCustom"],{"00ee":function(t,e,a){"use strict";var s=a("b622"),o=s("toStringTag"),r={};r[o]="z",t.exports="[object z]"===String(r)},"069c":function(t,e,a){t.exports=a.p+"img/noData.46b81b49.png"},"0d26":function(t,e,a){"use strict";var s=a("e330"),o=Error,r=s("".replace),i=function(t){return String(new o(t).stack)}("zxcasd"),l=/\n\s*at [^:]*:[^\n]*/,n=l.test(i);t.exports=function(t,e){if(n&&"string"==typeof t&&!o.prepareStackTrace)while(e--)t=r(t,l,"");return t}},"0d8f":function(t,e,a){},1787:function(t,e,a){"use strict";var s=a("861d");t.exports=function(t){return s(t)||null===t}},2884:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel my-custom-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-custom"}),e("h2",[t._v(t._s(t.$t("mycustomer.customers")))])])]),e("div",{staticClass:"right"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.openBatchVendor}},[t._v(" "+t._s(t.$t("mycustomer.batchSettings"))+" ")]),e("el-button",{attrs:{type:"primary",size:"medium",disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{click:t.openAddVendor}},[t._v(" "+t._s(t.$t("mycustomer.customersAdd"))+" ")])],1)]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("el-card",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{ref:"pageFilter",staticClass:"page-filter"},[e("el-form",{attrs:{inline:!0,size:"mini"}},[e("el-form-item",[e("el-select",{attrs:{filterable:"",remote:"","remote-method":t.remoteMethodCustom,loading:t.selectLoading,placeholder:t.$t("myinvoice.pleaseCusName"),clearable:""},on:{change:function(e){return t.filterGetItem("relationshipId")},clear:t.close},model:{value:t.filterParams.name,callback:function(e){t.$set(t.filterParams,"name",e)},expression:"filterParams.name"}},t._l(t.selectArr,(function(t){return e("el-option",{key:t.id,attrs:{label:t.customerName,value:t.customerName}})})),1)],1),(t.apiUserId,t._e()),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("mycustomer.customersContact")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem.apply(null,arguments)}},model:{value:t.filterParams.customerPhone,callback:function(e){t.$set(t.filterParams,"customerPhone",e)},expression:"filterParams.customerPhone"}})],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("mycustomer.店铺名称")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem.apply(null,arguments)}},model:{value:t.filterParams.accountName,callback:function(e){t.$set(t.filterParams,"accountName",e)},expression:"filterParams.accountName"}})],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("mycustomer.电子邮箱")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem.apply(null,arguments)}},model:{value:t.filterParams.email,callback:function(e){t.$set(t.filterParams,"email",e)},expression:"filterParams.email"}})],1),e("el-form-item",[e("el-date-picker",{attrs:{type:"daterange","range-separator":t.$t("mycustomer.至"),"start-placeholder":t.$t("mycustomer.开始日期"),"end-placeholder":t.$t("mycustomer.结束日期")},model:{value:t.filterParams.timeCreated,callback:function(e){t.$set(t.filterParams,"timeCreated",e)},expression:"filterParams.timeCreated"}})],1),e("el-form-item",[e("el-input",{attrs:{placeholder:t.$t("mycustomer.我已合作的商品SKU编号")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem.apply(null,arguments)}},model:{value:t.filterParams.vendorSku,callback:function(e){t.$set(t.filterParams,"vendorSku",e)},expression:"filterParams.vendorSku"}})],1),e("el-form-item",[e("el-autocomplete",{staticClass:"mg-r-10",attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:t.$t("请输入员工名称")},model:{value:t.supplierName,callback:function(e){t.supplierName=e},expression:"supplierName"}})],1),e("el-form-item",{attrs:{label:t.$t("mycustomer.storeAuthorized")}},[e("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:t.$t("mycustomer.all")},on:{change:t.filterGetItem},model:{value:t.filterParams.isAuth,callback:function(e){t.$set(t.filterParams,"isAuth",e)},expression:"filterParams.isAuth"}},[e("el-option",{attrs:{label:t.$t("mycustomer.all"),value:""}}),e("el-option",{attrs:{label:t.$t("mycustomer.yes"),value:"true"}}),e("el-option",{attrs:{label:t.$t("mycustomer.no"),value:"false"}})],1)],1),e("el-form-item",{attrs:{label:t.$t("mycustomer.客户等级")}},[e("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:t.$t("mycustomer.请选择客户等级")},on:{change:t.filterGetItem},model:{value:t.filterParams.clientGrade,callback:function(e){t.$set(t.filterParams,"clientGrade",e)},expression:"filterParams.clientGrade"}},[e("el-option",{attrs:{label:t.$t("mycustomer.all"),value:""}}),e("el-option",{attrs:{label:t.$t("mycustomer.一级"),value:"1"}}),e("el-option",{attrs:{label:t.$t("mycustomer.二级"),value:"2"}}),e("el-option",{attrs:{label:t.$t("mycustomer.三级"),value:"3"}})],1)],1),e("el-form-item",{attrs:{label:t.$t("mycustomer.客户活跃度")}},[e("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:t.$t("mycustomer.all")},on:{change:t.filterGetItem},model:{value:t.filterParams.dynamic,callback:function(e){t.$set(t.filterParams,"dynamic",e)},expression:"filterParams.dynamic"}},[e("el-option",{attrs:{label:t.$t("mycustomer.all"),value:""}}),e("el-option",{attrs:{label:t.$t("mycustomer.活跃"),value:"1"}}),e("el-option",{attrs:{label:t.$t("mycustomer.非活跃"),value:"2"}})],1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.filterGetItem}},[t._v(" "+t._s(t.$t("mycustomer.filter"))+" ")]),e("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v(" "+t._s(t.$t("mycustomer.clear"))+" ")])],1)],1)],1)])],1),e("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:"","row-key":"id"}},[e("el-table-column",{attrs:{prop:"customerName",label:t.$t("mycustomer.customersName")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("b",[t._v(t._s(a.row.customerName))]),a.row.customerRemark?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.row.customerRemark,placement:"right"}},[e("i",{staticClass:"el-icon-chat-line-square"})]):t._e()],1),e("div",[t._v(" "+t._s(t.$t("mycustomer.授权Shopify"))+": "),a.row.shops&&a.row.shops.length?e("el-popover",{attrs:{trigger:"hover",placement:"right"}},[e("div",{staticStyle:{"font-size":"12px"},attrs:{slot:""},slot:"default"},t._l(a.row.shops,(function(a){return e("div",{key:a.url,staticClass:"d-flex mg-b-10"},[e("span",[t._v(t._s(t.$t("mycustomer.shopName")))]),e("a",{staticClass:"text-primary",attrs:{href:"//"+a.url,target:"_blank"}},[t._v(t._s(a.name))])])})),0),e("span",{attrs:{slot:"reference"},slot:"reference"},[e("a",{staticStyle:{color:"#5c6ac4"},attrs:{href:"javascript:;"},on:{click:function(e){return t.editShopName(a.row)}}},[t._v(t._s(a.row.customerAuthCnt))])])]):e("span",[t._v(t._s(a.row.customerAuthCnt))])],1)]}}])}),148797==t.apiUserId?e("el-table-column",{attrs:{label:t.$t("mycustomer.站长外部编号")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.customCode||"--"))]}}],null,!1,271774915)}):t._e(),e("el-table-column",{attrs:{label:t.$t("mycustomer.手机号")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.customerPhone||"--"))]}}])}),e("el-table-column",{attrs:{label:t.$t("mycustomer.员工名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.inviterName||"--"))]}}])}),e("el-table-column",{attrs:{label:t.$t("mycustomer.是否开启二级分销商")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-switch",{attrs:{"active-value":"1","inactive-value":"2","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(e){return t.changeSwitch(e,a.row.id,a.row.customerName)}},model:{value:a.row.distributionSwitch,callback:function(e){t.$set(a.row,"distributionSwitch",e)},expression:"scope.row.distributionSwitch"}})]}}])}),e("el-table-column",{attrs:{label:t.$t("mycustomer.分销商佣金")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(" "+t._s(a.row.commissionBalance||"--")+" ")])]}}])}),e("el-table-column",{attrs:{label:t.$t("mycustomer.customersContact")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"customer-info-box"},[a.row.customerEmail?e("div",[e("span",{staticStyle:{color:"#606266"}},[e("i",{staticClass:"iconfont icon-email"})]),e("a",{attrs:{href:"mailto:"+a.row.customerEmail,target:"_blank"}},[t._v(t._s(a.row.customerEmail))])]):t._e(),a.row.customerWeChat?e("div",[e("span",{staticStyle:{color:"#55a947"}},[e("i",{staticClass:"iconfont icon-wechat"})]),t._v(" "+t._s(a.row.customerWeChat)+" ")]):t._e(),a.row.customerSkype?e("div",[e("span",{staticStyle:{color:"#00b0f6"}},[e("i",{staticClass:"iconfont icon-skype"})]),e("a",{attrs:{href:`skype:${a.row.customerSkype}?chat`,target:"_blank"}},[t._v(t._s(a.row.customerSkype))])]):t._e(),a.row.customerLine?e("div",[e("span",{staticStyle:{color:"#00c300"}},[e("i",{staticClass:"iconfont icon-line"})]),t._v(" "+t._s(a.row.customerLine)+" ")]):t._e(),a.row.customerQQ?e("div",[e("span",{staticStyle:{color:"#1e6fff"}},[e("i",{staticClass:"iconfont icon-qq"})]),e("a",{attrs:{href:`tencent://message/?uin=${a.row.customerQQ}&Site=5yoho&Menu=yes`}},[t._v(t._s(a.row.customerQQ))])]):t._e(),a.row.customerWangwang?e("div",[e("span",{staticStyle:{color:"#009fff"}},[e("i",{staticClass:"iconfont icon-wangwang"})]),e("a",{attrs:{href:`http://amos.alicdn.com/msg.aw?v=2&uid=${a.row.customerWangwang}&site=cnalichn&s=11&charset=UTF-8`,target:"_blank"}},[t._v(t._s(a.row.customerWangwang))])]):t._e(),a.row.customerWhatsapp?e("div",[e("span",{staticStyle:{color:"#109d58"}},[e("i",{staticClass:"iconfont icon-whatsapp"})]),e("a",{attrs:{href:"https://wa.me/"+a.row.customerWhatsapp,target:"_blank"}},[t._v(t._s(a.row.customerWhatsapp))])]):t._e()])]}}])}),1!=t.$store.state.userInfo.walletOpen?e("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v(t._s(a.row.bonus||0))]),e("div",[[e("el-link",{staticClass:"mg-r-20",attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:(1==a.row.bonusStatus?"danger":2==a.row.bonusStatus&&"primary")||"primary"},on:{click:function(e){return t.showBonus(a.row,1)}}},[t._v(" "+t._s(1==a.row.bonusStatus&&t.$t("mycustomer.停用")||2==a.row.bonusStatus&&t.$t("mycustomer.启用")||t.$t("mycustomer.启用"))+" ")]),e("el-link",{staticClass:"mg-r-20",attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary"},on:{click:function(e){return t.showBonus(a.row,2)}}},[t._v(" "+t._s(t.$t("mycustomer.充值"))+" ")]),e("el-link",{attrs:{disabled:!a.row.bonus||!t.$isRole(t.$route.meta.roleWrite),type:"primary"},on:{click:function(e){return t.openDeduction(a.row)}}},[t._v(" "+t._s(t.$t("mycustomer.扣款"))+" ")]),e("br")]],2)]}}],null,!1,3596797583)},[e("template",{slot:"header"},[e("span",[t._v(t._s(t.$t("mycustomer.客户Bonus余额"))+"("+t._s(t.$store.state.country.symbol)+")")]),e("el-tooltip",{attrs:{content:t.$t("mycustomer.您客户账户的预充值金额，如客户线下提前支付给您100美金，您可为其Bonus账户充值100美金，且开启Bonus功能后，您的客户即可在支付订单是用Bonus直接抵扣。"),placement:"bottom"}},[e("i",{staticClass:"el-icon-info"})])],1)],2):t._e(),e("el-table-column",{attrs:{label:t.$t("mycustomer.已授权店铺")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("b",{staticStyle:{"font-size":"13px"},attrs:{type:"primary"}},[t._v(t._s(a.row.customerAuthCnt))])]),e("div",[e("el-link",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary"},on:{click:function(e){return t.openInvitation(a.row)}}},[t._v(t._s(t.$t("mycustomer.storeInvite")))])],1)]}}])}),e("el-table-column",{attrs:{label:t.$t("mycustomer.注册时间"),prop:"timeCreated"}}),e("el-table-column",{attrs:{label:`${t.$t("mycustomer.总信用额度")}/${t.$t("mycustomer.剩余信用额度")}`,align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("p",[t._v(t._s(Number(a.row.creditAmount).toFixed(2)))]),e("p",[t._v(t._s((Number(a.row.creditAmount)-Number(a.row.usedCreditAmount)).toFixed(2)))])]}}])}),e("el-table-column",{attrs:{label:t.$t("mycustomer.operate"),width:"230"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-link",{staticClass:"mg-r-20",attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary"},on:{click:function(e){return t.editVendor(a.row)}}},[t._v(t._s(t.$t("mycustomer.modify")))]),a.row.canDelete?e("el-link",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"danger"},on:{click:function(e){return t.delVendor(a.row)}}},[t._v(t._s(t.$t("mycustomer.delete")))]):t._e()],1),a.row.shops&&0!=a.row.shops.length?e("div",[e("el-link",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary"},on:{click:function(e){return t.editShopName(a.row)}}},[t._v(" "+t._s(t.$t("mycustomer.管理店铺别名"))+" ")])],1):t._e(),a.row.shops&&0!=a.row.shops.length?e("div",[e("el-link",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite),type:"primary"},on:{click:function(e){return t.openSetIOSS(a.row)}}},[t._v("IOSS setting")])],1):t._e(),e("div",[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.openTX(a.row)}}},[t._v("withdrawals")])],1)]}}])})],1)],1)],1)],1),t.items.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":t.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),e("DialogAddVendor",{attrs:{addVendorDialog:t.addVendorDialog},on:{saveSuccess:function(e){return t.addVendorSaveSuccess()},openInvite:t.openInvite}}),e("el-dialog",{attrs:{title:t.$t("mycustomer.customersInvite"),visible:t.dialogInvite.isShow},on:{"update:visible":function(e){return t.$set(t.dialogInvite,"isShow",e)},opened:t.inviteOpened}},[e("el-divider"),e("div",[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogInvite.wordLoading,expression:"dialogInvite.wordLoading"}],staticClass:"mg-b-15",attrs:{"label-width":"120px"}},[e("el-form-item",{attrs:{label:t.$t("mycustomer.messageEnter")}},[e("el-input",{staticStyle:{"font-size":"14px"},attrs:{type:"textarea",resize:"none",autosize:{minRows:3,maxRows:6},size:"small",placeholder:t.$t("mycustomer.messageInvitation")},on:{change:t.setInvoiceWord},model:{value:t.dialogInvite.words,callback:function(e){t.$set(t.dialogInvite,"words",e)},expression:"dialogInvite.words"}})],1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"mg-b-15",attrs:{span:24}},[e("div",{staticClass:"d-flex"},[e("span",{staticClass:"tx-right mg-r-10",staticStyle:{width:"120px"}},[t._v(" "+t._s(t.$t("mycustomer.appSocial"))+" ")]),e("div",{staticClass:"skype-share mg-r-10",attrs:{"data-href":t.dialogInvite.inviteUrl,"data-lang":"en-US","data-text":`${t.dialogInvite.words} ${t.dialogInvite.inviteUrl}`,"data-style":"large"}}),e("div",[e("el-tooltip",{attrs:{placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("p",{staticClass:"tx-center mg-b-10"},[t._v(t._s(t.$t("mycustomer.scan")))]),e("img",{attrs:{src:t.dialogInvite.qrcode,width:"130"}})]),e("a",{staticClass:"share-weixin",attrs:{href:"javascript:;"}},[e("i",{staticClass:"fa fa-weixin"}),t._v(" "+t._s(t.$t("mycustomer.share"))+" ")])])],1)])]),e("el-col",{attrs:{span:24}},[e("div",{staticClass:"d-flex"},[e("span",{staticClass:"tx-right mg-r-10",staticStyle:{width:"120px"}},[t._v(" "+t._s(t.$t("mycustomer.urlInvite"))+" ")]),e("a",{staticClass:"mg-r-15",attrs:{href:t.dialogInvite.inviteUrl,target:"_blank"}},[t._v(t._s(t.dialogInvite.inviteUrl))]),e("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.dialogInvite.inviteUrl,expression:"dialogInvite.inviteUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{size:"mini",type:"success"}},[t._v(t._s(t.$t("mycustomer.urlCopy")))])],1)])],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[e("el-link",{staticClass:"mg-r-30",attrs:{type:"primary"}},[t._v(" "+t._s(t.$t("mycustomer.document"))+" ")]),e("el-button",{on:{click:function(e){t.dialogInvite.isShow=!1}}},[t._v(" "+t._s(t.$t("mycustomer.close"))+" ")])],1)],1),e("el-dialog",{attrs:{title:t.$t("mycustomer.客户Shopify店铺别名管理"),visible:t.ShopifyNameEdit},on:{"update:visible":function(e){t.ShopifyNameEdit=e}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.aliasLoading,expression:"aliasLoading"}],staticClass:"mg-l-20 mg-b-20 mg-r-20"},[e("el-table",{attrs:{data:t.ShopOtherName}},[e("el-table-column",{attrs:{property:"name",label:t.$t("mycustomer.店铺名称"),width:"200"}}),e("el-table-column",{attrs:{property:"url",label:t.$t("mycustomer.店铺地址")},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.url?e("a",{staticClass:"text-primary",attrs:{href:"//"+a.row.url,target:"_blank"}},[t._v(t._s(a.row.url))]):e("span",[t._v("---")])]}}])}),e("el-table-column",{attrs:{property:"alias",label:t.$t("mycustomer.店铺别名")},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.alias?e("span",[t._v(t._s(a.row.alias))]):e("span",[t._v("---")])]}}])}),e("el-table-column",{attrs:{property:"active",label:t.$t("mycustomer.操作"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.alias?e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.editOtherName(a)}}},[t._v(t._s(t.$t("mycustomer.修改店铺别名")))]):t._e(),a.row.alias?t._e():e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.editOtherName(a)}}},[t._v(t._s(t.$t("mycustomer.添加店铺别名")))]),e("br"),a.row.alias?e("el-link",{attrs:{type:"danger"},on:{click:function(e){return t.deleteAlias(a)}}},[t._v(t._s(t.$t("mycustomer.删除店铺别名")))]):t._e()]}}])})],1)],1),e("el-dialog",{attrs:{width:"30%","show-close":!1,visible:t.EditInput,"append-to-body":""},on:{"update:visible":function(e){t.EditInput=e},close:function(e){t.OtherName=""}}},[e("el-form",{attrs:{"label-position":"left"}},[e("el-form-item",{attrs:{label:t.$t("mycustomer.请输入店铺别名:"),"label-width":"150px"}},[e("el-input",{model:{value:t.OtherName,callback:function(e){t.OtherName=e},expression:"OtherName"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.EditInput=!1}}},[t._v(" "+t._s(t.$t("mycustomer.取 消"))+" ")]),e("el-button",{attrs:{type:"primary"},on:{click:t.ChangeEdit}},[t._v(" "+t._s(t.$t("mycustomer.确定"))+" ")])],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.ShopifyNameEdit=!1}}},[t._v(" "+t._s(t.$t("mycustomer.关 闭"))+" ")])],1)],1),e("el-dialog",{staticClass:"dialog-open-custom",attrs:{title:t.$t("mycustomer.提示"),visible:t.bonusParams.isShow&&1==t.bonusParams.type,width:"30%"},on:{close:function(e){t.bonusParams.isShow=!1}}},[e("el-divider"),e("div",{staticClass:"dialog-body"},[e("p",[t._v(" "+t._s(1==t.bonusParams.status?t.$t("mycustomer.确定为 {name} 客户关闭Bonus抵扣功能？",{name:t.bonusParams.name}):t.$t("mycustomer.确定为 {name} 客户开启Bonus抵扣功能？",{name:t.bonusParams.name}))+" ")])]),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.bonusParams.isShow=!1}}},[t._v(t._s(t.$t("mycustomer.取 消")))]),e("el-button",{attrs:{type:"primary",loading:t.bonusParams.loading},on:{click:t.updateBonus}},[t._v(t._s(t.$t("mycustomer.确定")))])],1)],1),e("el-dialog",{staticClass:"dialog-open-custom",attrs:{title:t.$t("mycustomer.为{name}客户充值Bonus",{name:t.bonusParams.name}),visible:t.bonusParams.isShow&&2==t.bonusParams.type,width:"50%"},on:{close:function(e){t.bonusParams.isShow=!1}}},[e("el-divider"),e("div",{staticClass:"dialog-body"},[e("el-form",[e("el-form-item",{attrs:{label:t.$t("mycustomer.请输入金额："),required:""}},[e("el-input-number",{attrs:{min:0,precision:2,controls:!1},model:{value:t.bonusParams.num,callback:function(e){t.$set(t.bonusParams,"num",e)},expression:"bonusParams.num"}})],1),e("el-form-item",[e("i",{staticClass:"el-icon-info"}),t._v(" "+t._s(t.$t("mycustomer.bonusTips"))+" ")]),e("el-form-item",{staticClass:"d-flex bonusRemark",attrs:{label:t.$t("mycustomer.备注：")}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.bonusParams.remark,callback:function(e){t.$set(t.bonusParams,"remark",e)},expression:"bonusParams.remark"}})],1)],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.bonusParams.isShow=!1}}},[t._v(t._s(t.$t("mycustomer.取 消")))]),e("el-button",{attrs:{type:"primary",loading:t.bonusParams.loading},on:{click:t.addBonusNum}},[t._v(t._s(t.$t("mycustomer.确定")))])],1)],1),e("el-dialog",{attrs:{title:t.$t("mycustomer.batchSettings"),visible:t.dialogEmailVisible,width:"30%"},on:{"update:visible":function(e){t.dialogEmailVisible=e}}},[e("div",{staticClass:"email-box"},[e("span",{staticClass:"txt"},[t._v("是否允许推送shopifly邮件")]),e("el-switch",{on:{change:t.switchEmail},model:{value:t.sendEmailFlag,callback:function(e){t.sendEmailFlag=e},expression:"sendEmailFlag"}})],1),e("div",{staticClass:"email-box"},[e("span",{staticClass:"txt"},[t._v("佣金批量设置")]),e("el-input-number",{staticStyle:{width:"150px"},attrs:{type:"number",precision:4,controls:!1,autocomplete:"off"},on:{change:t.rageTick},model:{value:t.BathBrokerage,callback:function(e){t.BathBrokerage=e},expression:"BathBrokerage"}})],1)]),e("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:20}}),e("DialogSettingIOSS",{attrs:{data:t.dialogSettingIossData}}),e("dialogDeduction",{attrs:{data:t.dialogDeductionData},on:{saveDeduction:t.saveDeduction}}),e("el-dialog",{attrs:{title:t.$t("mycustomer.分销商佣金提现"),"before-close":t.cleanClose,visible:t.visibleTX,width:"550px","close-on-click-modal":!1},on:{"update:visible":function(e){t.visibleTX=e}}},[e("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:t.dynamicValidateForm,"label-width":"100px"}},[e("el-form-item",{attrs:{prop:"itemTotal",label:t.$t("mycustomer.提现金额"),rules:[{required:!0,message:t.$t("mycustomer.请输入佣金提现金额"),trigger:"blur"}]}},[e("el-input",{staticStyle:{width:"250px"},attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')"},model:{value:t.dynamicValidateForm.itemTotal,callback:function(e){t.$set(t.dynamicValidateForm,"itemTotal",e)},expression:"dynamicValidateForm.itemTotal"}},[e("el-button",{attrs:{slot:"append"},slot:"append"},[t._v("￥")])],1)],1),e("el-form-item",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.submitForm("dynamicValidateForm")}}},[t._v(t._s(t.$t("mycustomer.confirm")))]),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.resetForm("dynamicValidateForm")}}},[t._v(t._s(t.$t("mycustomer.cancel")))])],1)],1)],1)],1)},o=[],r=(a("14d9"),function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{staticClass:"add-vendor-dialog",attrs:{title:t.addVendorDialog.id?t.$t("mycustomer.Modify"):Number(t.$store.state.cnt.customerCnt)?""+t.$t("mycustomer.addNumCustomer",{num:Number(t.$store.state.cnt.customerCnt)+1}):t.$t("mycustomer.laststep"),visible:t.addVendorDialog.isShow,width:"920px","show-close":!!t.$store.state.cnt.customerCnt,"close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.addVendorDialog,"isShow",e)},closed:t.closed}},[e("el-divider"),t.visibleMask?e("div",{staticClass:"mask"},[e("div",{staticClass:"mask-content"},[e("i",{staticClass:"tx-success el-icon-success"}),e("div",[e("div",{staticClass:"tx1"},[t._v(t._s(t.$t("mycustomer.customernum",{num:t.$store.state.cnt.customerCnt})))]),e("div",{staticClass:"tx2"},[t._v(t._s(t.$t("mycustomer.youcan")))]),e("ul",[e("li",[e("i",{staticClass:"el-icon-arrow-right"}),e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.action(2)}}},[t._v(t._s(t.$t("mycustomer.Invitecustomers2")))]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("mycustomer.一键邀请提示"),placement:"top"}},[e("i",{staticClass:"fa fa-question-circle-o"})])],1),e("li",[e("i",{staticClass:"el-icon-arrow-right"}),e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.action(3)}}},[t._v(t._s(t.$t("mycustomer.Viewcustomer")))])],1)])]),e("div",{staticClass:"bottom-btn-avd"},[e("el-button",{on:{click:function(e){t.addVendorDialog.isShow=!1}}},[t._v(t._s(t.$t("mycustomer.Remindme")))])],1)])]):t._e(),e("el-row",[Number(t.$store.state.cnt.customerCnt)?t._e():e("el-col",{staticClass:"row1-avd",attrs:{span:24}},[t._v(" "+t._s(t.$t("mycustomer.Justcreate"))+" ")]),e("el-tabs",{staticClass:"vendor-tab",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("mycustomer.基础信息"),name:"first"}},[e("el-form",[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:t.addVendorDialog.id?12:24}},[e("el-form-item",{attrs:{label:t.$t("mycustomer.customersName"),"label-width":t.addVendorDialog.labelW,required:""}},[e("el-input",{attrs:{placeholder:t.$t("mycustomer.given"),"auto-complete":"off"},model:{value:t.addVendorDialog.name,callback:function(e){t.$set(t.addVendorDialog,"name",e)},expression:"addVendorDialog.name"}})],1)],1),e("el-col",{attrs:{span:t.addVendorDialog.id?12:24}},[e("el-form-item",{attrs:{label:t.$t("importdata.cusEmail"),"label-width":t.addVendorDialog.labelW}},[e("el-input",{attrs:{placeholder:t.$t("mycustomer.Automaticallynotify"),disabled:t.addVendorDialog.isEdit,"auto-complete":"off"},model:{value:t.addVendorDialog.email,callback:function(e){t.$set(t.addVendorDialog,"email",e)},expression:"addVendorDialog.email"}})],1)],1)],1),t.addVendorDialog.id?[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:t.$t("mycustomer.Wechat"),"label-width":t.addVendorDialog.labelW}},[e("el-input",{attrs:{placeholder:t.$t("mycustomer.CustomersWechat"),"auto-complete":"off"},model:{value:t.addVendorDialog.weChat,callback:function(e){t.$set(t.addVendorDialog,"weChat",e)},expression:"addVendorDialog.weChat"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Skype","label-width":t.addVendorDialog.labelW}},[e("el-input",{attrs:{placeholder:t.$t("mycustomer.CustomersSkype"),"auto-complete":"off"},model:{value:t.addVendorDialog.skype,callback:function(e){t.$set(t.addVendorDialog,"skype",e)},expression:"addVendorDialog.skype"}})],1)],1)],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Line","label-width":t.addVendorDialog.labelW}},[e("el-input",{attrs:{placeholder:t.$t("mycustomer.CustomersLine"),"auto-complete":"off"},model:{value:t.addVendorDialog.line,callback:function(e){t.$set(t.addVendorDialog,"line",e)},expression:"addVendorDialog.line"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"QQ","label-width":t.addVendorDialog.labelW}},[e("el-input",{attrs:{placeholder:t.$t("mycustomer.CustomersQQ"),"auto-complete":"off"},model:{value:t.addVendorDialog.QQ,callback:function(e){t.$set(t.addVendorDialog,"QQ",e)},expression:"addVendorDialog.QQ"}})],1)],1)],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:t.$t("mycustomer.wang"),"label-width":t.addVendorDialog.labelW}},[e("el-input",{attrs:{placeholder:t.$t("mycustomer.CustomersWangwang"),"auto-complete":"off"},model:{value:t.addVendorDialog.wangwang,callback:function(e){t.$set(t.addVendorDialog,"wangwang",e)},expression:"addVendorDialog.wangwang"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Whatsapp","label-width":t.addVendorDialog.labelW}},[e("el-input",{attrs:{placeholder:t.$t("mycustomer.CustomersWhatsApp"),"auto-complete":"off"},model:{value:t.addVendorDialog.whatsapp,callback:function(e){t.$set(t.addVendorDialog,"whatsapp",e)},expression:"addVendorDialog.whatsapp"}})],1)],1)],1),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:t.$t("mycustomer.客户等级"),"label-width":t.addVendorDialog.labelW}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addVendorDialog.clientGrade,callback:function(e){t.$set(t.addVendorDialog,"clientGrade",e)},expression:"addVendorDialog.clientGrade"}},t._l(t.optionsLevel,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:t.$t("mycustomer.手机号"),"label-width":t.addVendorDialog.labelW}},[e("el-input",{attrs:{placeholder:t.$t("mycustomer.CustomersWhatsApp"),"auto-complete":"off"},model:{value:t.addVendorDialog.customerPhone,callback:function(e){t.$set(t.addVendorDialog,"customerPhone",e)},expression:"addVendorDialog.customerPhone"}})],1)],1)],1)]:t._e(),e("el-form-item",{attrs:{label:t.$t("mycustomer.客户备注"),"label-width":t.addVendorDialog.labelW}},[e("el-input",{attrs:{placeholder:t.$t("mycustomer.(选填)  您可以对您的客户进行信息备注"),"auto-complete":"off"},model:{value:t.addVendorDialog.remark,callback:function(e){t.$set(t.addVendorDialog,"remark",e)},expression:"addVendorDialog.remark"}})],1),148797==t.apiUserId?e("el-form-item",{attrs:{label:t.$t("站长外部编号"),"label-width":t.addVendorDialog.labelW}},[e("el-input",{attrs:{placeholder:t.$t("站长外部编号"),"auto-complete":"off"},model:{value:t.addVendorDialog.customCode,callback:function(e){t.$set(t.addVendorDialog,"customCode",e)},expression:"addVendorDialog.customCode"}})],1):t._e()],2)],1),e("div"),e("el-tab-pane",{attrs:{label:t.$t("mycustomer.信用额度"),name:"second"}},[e("div",[e("span",{staticStyle:{"padding-left":"35px"}},[t._v(t._s(t.$t("mycustomer.是否允许分销商使用信用额度")))]),e("el-switch",{staticStyle:{"margin-left":"30px"},attrs:{"active-color":"#7d88d0"},model:{value:t.addVendorDialog.creditStatus,callback:function(e){t.$set(t.addVendorDialog,"creditStatus",e)},expression:"addVendorDialog.creditStatus"}})],1),e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"status-icon":"","label-width":"100px"}},[e("el-form-item",{attrs:{label:`${t.$t("mycustomer.信用额度")}${t.$store.state.country.symbol}`}},[e("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.addVendorDialog.creditAmount,callback:function(e){t.$set(t.addVendorDialog,"creditAmount",e)},expression:"addVendorDialog.creditAmount"}})],1)],1)],1),e("el-tab-pane",{attrs:{label:t.$t("mycustomer.佣金设置"),name:"Third"}},[e("div",{staticStyle:{"padding-left":"20px"}},[t._v(" "+t._s(t.$t("mycustomer.佣金返回设置"))+" ")]),e("el-form",{ref:"ruleFormTD",staticClass:"demo-ruleForm",attrs:{"status-icon":"","label-width":"100px"}},[e("el-form-item",{attrs:{label:t.$t("mycustomer.佣金费用")}},[e("el-input-number",{staticStyle:{width:"150px"},attrs:{type:"number",precision:4,controls:!1,autocomplete:"off"},model:{value:t.addVendorDialog.brokerage,callback:function(e){t.$set(t.addVendorDialog,"brokerage",e)},expression:"addVendorDialog.brokerage"}})],1)],1)],1)],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.$store.state.cnt.customerCnt?e("el-button",{on:{click:function(e){t.addVendorDialog.isShow=!1}}},[t._v(t._s(t.$t("mycustomer.cancel")))]):t._e(),e("el-button",{attrs:{type:"primary",loading:t.addVendorDialog.loading},on:{click:function(e){return t.saveVendor()}}},[t._v(t._s(t.$t("mycustomer.confirm")))])],1)],1)],1)}),i=[],l={props:["addVendorDialog"],data(){return{visibleMask:!1,newName:"",flag:!0,activeName:"first",apiUserId:JSON.parse(localStorage.getItem("userInfo")).id,optionsLevel:[{value:"1",label:this.$t("mycustomer.一级")},{value:"2",label:this.$t("mycustomer.二级")},{value:"3",label:this.$t("mycustomer.三级")}]}},methods:{closed(){this.visibleMask=!1},handleClick(){},action(t){switch(t){case 1:this.$router.push({name:"importData",query:{rid:this.newRid}});break;case 2:"myCustom"==this.$route.name?this.$emit("openInvite",this.newName):this.$router.push({name:"myCustom",params:{name:this.newName,openInvite:!0}});break;case 3:"myCustom"!=this.$route.name&&this.$router.push({name:"myCustom"});break}this.addVendorDialog.isShow=!1},saveVendor(){if(!this.addVendorDialog.name)return void this.$message({message:this.$t("importdata.cusNameFilled"),type:"error"});if(!this.addVendorDialog.creditAmount)return void this.$message({message:this.$t("importdata.errorLimit"),type:"error"});this.addVendorDialog.loading=!0;let t="api.Relationship.addByVendor",e={name:this.addVendorDialog.name,email:this.addVendorDialog.email,remark:this.addVendorDialog.remark,weChat:this.addVendorDialog.weChat,skype:this.addVendorDialog.skype,line:this.addVendorDialog.line,clientGrade:this.addVendorDialog.clientGrade,customerPhone:this.addVendorDialog.customerPhone,QQ:this.addVendorDialog.QQ,creditAmount:this.addVendorDialog.creditAmount,creditStatus:1==this.addVendorDialog.creditStatus?1:2,wangwang:this.addVendorDialog.wangwang,whatsapp:this.addVendorDialog.whatsapp,customCode:this.addVendorDialog.customCode,brokerage:this.addVendorDialog.brokerage};this.addVendorDialog.id&&(e.relationshipId=this.addVendorDialog.id,t="api.Relationship.changeByVendor"),console.log(e),this.$apiCall(t,e,t=>{this.addVendorDialog.loading=!1,9999==t.ErrorCode?(this.$message({message:this.addVendorDialog.id?this.$t("mycustomer.Modification"):this.$t("importdata.addSuccess"),type:"success"}),this.$emit("saveSuccess"),this.$root.$children[0].getCnt(),this.addVendorDialog.id||(this.newName=this.addVendorDialog.name,this.newRid=t.Data.Results,this.$message({message:"success",type:"success"})),this.addVendorDialog.isShow=!1):this.$message({message:t.Message,type:"error"})})}}},n=l,d=(a("ef91"),a("2877")),c=Object(d["a"])(n,r,i,!1,null,null,null),u=c.exports,m=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.data.loading,expression:"data.loading"}],attrs:{title:"IOSS Set",visible:t.data.isShow,"close-on-click-modal":!1,width:"920px"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)},open:t.opened}},[e("el-divider"),e("div",{staticClass:"d-body"},[e("div",{staticClass:"action-row"},[e("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:function(e){return t.openEditIOSS()}}},[t._v("Add IOSS")])],1),e("el-table",{staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{data:t.data.items,stripe:"",height:"300px"}},[e("el-table-column",{attrs:{label:"descriptive",prop:"name"}}),e("el-table-column",{attrs:{label:"IOSS ID",prop:"iossId",width:"200"}}),e("el-table-column",{attrs:{label:"associated country"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",t._l(a.row.countrys,(function(a){return e("el-tag",{key:a,staticStyle:{margin:"5px"}},[t._v(" "+t._s(t.showCountry(a))+" ")])})),1)]}}])}),e("el-table-column",{attrs:{label:"opera",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-link",{staticStyle:{"margin-right":"10px"},attrs:{icon:"el-icon-edit",type:"primary"},on:{click:function(e){return t.openEditIOSS(a.row)}}}),e("el-link",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(e){return t.delIOSS(a.row,a.$index)}}})],1)]}}])})],1),e("div",{staticClass:"options-wrap"},[e("el-radio",{attrs:{label:!1},model:{value:t.data.isOpenIoss,callback:function(e){t.$set(t.data,"isOpenIoss",e)},expression:"data.isOpenIoss"}},[t._v("NO IOSS")]),e("p",{staticClass:"mg-b-15"},[t._v("When the parcel arrives in the EU destination country, the amount of the order (including shipping costs) will be declared and customs will ask the recipient to pay VAT.")]),e("el-radio",{attrs:{label:!0},model:{value:t.data.isOpenIoss,callback:function(e){t.$set(t.data,"isOpenIoss",e)},expression:"data.isOpenIoss"}},[t._v("Using the customer's IOSS")]),e("p",[t._v("Please enter the correct and valid IOSS ID that should be associated with the corresponding destination country. If the destination country is not associated with the correct IOSS ID, the IOSS ID will not be applied")])],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.data.isShow=!1}}},[t._v("cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.changeIoss}},[t._v("Instant Updates")])],1)],1),e("DialogEditIOSS",{attrs:{relationshipId:t.data.id,countryArr:t.countryArr,linked:t.linked,data:t.dialogEditIOSSData},on:{saveIOSSSuccess:t.saveIOSSSuccess}})],1)},p=[],h=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:(t.data.id?"edit":"add")+" IOSS",visible:t.data.isShow,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)},open:t.opened,close:t.closed}},[e("el-divider"),e("div",{staticClass:"d-body"},[e("el-form",{ref:"ruleForm",attrs:{model:t.data.form,rules:t.rules,"label-width":"150px"}},[e("el-form-item",{attrs:{label:"descriptive:",prop:"name"}},[e("el-input",{attrs:{placeholder:"Please enter a description"},model:{value:t.data.form.name,callback:function(e){t.$set(t.data.form,"name",e)},expression:"data.form.name"}})],1),e("el-form-item",{attrs:{label:"IOSS ID:",prop:"iossId"}},[e("el-input",{attrs:{placeholder:"Please enter IOSS ID"},model:{value:t.data.form.iossId,callback:function(e){t.$set(t.data.form,"iossId",e)},expression:"data.form.iossId"}})],1),e("el-form-item",{attrs:{label:"Destination country:",prop:"countrys",required:""}},[e("el-select",{staticStyle:{width:"412px"},attrs:{multiple:"",filterable:"","default-first-option":"",placeholder:"Please select the country of destination"},model:{value:t.data.form.countrys,callback:function(e){t.$set(t.data.form,"countrys",e)},expression:"data.form.countrys"}},t._l(t.countryArr,(function(a){return e("el-option",{key:a.value,attrs:{label:a.labelCN,value:a.value,disabled:t.linked.arr.indexOf(a.value)>-1&&t.data.oldCountrys.indexOf(a.value)<0}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(a.labelCN))]),e("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(a.label))])])})),1)],1)],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.data.isShow=!1}}},[t._v("cancel")]),e("el-button",{attrs:{loading:t.data.loading,type:"primary"},on:{click:function(e){return t.save("ruleForm")}}},[t._v("save")])],1)],1)},g=[],f=(a("d9e2"),{props:["data","countryArr","linked","relationshipId"],data(){let t=(t,e,a)=>{setTimeout(()=>{e&&e.length||a(new Error("Select at least one country region")),a()},100)},e=(t,e,a)=>{setTimeout(()=>{(!e||e.length<12||!/^[0-9A-Za-z]*$/.test(e))&&a(new Error("IOSS ID must be entered. Letters or numbers of at least 12 characters")),a()},100)};return{rules:{name:[{required:!0,message:"Description must be entered",trigger:"blur"}],iossId:[{required:!0,message:"IOSS ID must be entered. Letters or numbers of at least 12 characters",trigger:"blur"},{validator:e,trigger:"blur"}],countrys:[{validator:t,trigger:"change"}]}}},methods:{save(t){this.data.loading=!0,this.$refs[t].validate(t=>{if(!t)return this.data.loading=!1,!1;{let t={relationshipId:this.relationshipId,name:this.data.form.name,iossId:this.data.form.iossId,countrys:this.data.form.countrys.join(",")};this.data.id&&(t.id=this.data.id),this.$confirm("The IOSS of orders that have been imported to ERP and shipped orders cannot be changed, updating the IOSS will overwrite the IOSS of your customer's order, so please be careful!",{confirmButtonText:"ok",cancelButtonText:"cancel",type:"info"}).then(()=>{this.setSave(t)}).catch(()=>{this.data.loading=!1})}})},setSave(t){this.$apiCall("api.User.editIoss",t,t=>{this.data.loading=!1,"9999"==t.ErrorCode?this.$emit("saveIOSSSuccess"):this.$message({message:t.Message,type:"error"})})},opened(){setTimeout(()=>{this.$refs["ruleForm"].clearValidate()},150)},closed(){this.$refs["ruleForm"].clearValidate()}}}),b=f,y=Object(d["a"])(b,h,g,!1,null,null,null),v=y.exports,$={props:["data"],data(){return{dialogEditIOSSData:{isShow:!1,loading:!1,id:"",form:{name:"",iossId:"",countrys:[]},oldCountrys:[]},defaultDialogEditIOSSData:"{}",countryArr:[{value:"AT",label:"Austria",labelCN:"奥地利"},{value:"BE",label:"Belgium",labelCN:"比利时"},{value:"BG",label:"Bulgaria",labelCN:"保加利亚"},{value:"CY",label:"Cyprus",labelCN:"塞浦路斯"},{value:"CZ",label:"Czechia",labelCN:"捷克"},{value:"DE",label:"Germany",labelCN:"德国"},{value:"DK",label:"Denmark",labelCN:"丹麦"},{value:"EE",label:"Estonia",labelCN:"爱沙尼亚"},{value:"ES",label:"Spain",labelCN:"西班牙"},{value:"FI",label:"Finland",labelCN:"芬兰"},{value:"FR",label:"France",labelCN:"法国"},{value:"GR",label:"Greece",labelCN:"希腊"},{value:"HR",label:"Croatia",labelCN:"克罗地亚"},{value:"HU",label:"Hungary",labelCN:"匈牙利"},{value:"IE",label:"Ireland",labelCN:"爱尔兰"},{value:"IT",label:"Italy",labelCN:"意大利"},{value:"LT",label:"Lithuania",labelCN:"立陶宛"},{value:"LU",label:"Luxembourg",labelCN:"卢森堡"},{value:"LV",label:"Latvia",labelCN:"拉脱维亚"},{value:"MT",label:"Malta",labelCN:"马耳他"},{value:"NL",label:"Netherlands (the)",labelCN:"荷兰"},{value:"PL",label:"Poland",labelCN:"波兰"},{value:"PT",label:"Portugal",labelCN:"葡萄牙"},{value:"RO",label:"Romania",labelCN:"罗马尼亚"},{value:"SE",label:"Sweden",labelCN:"瑞典"},{value:"SI",label:"Slovenia",labelCN:"斯洛文尼亚"},{value:"SK",label:"Slovakia",labelCN:"斯洛伐克"}]}},components:{DialogEditIOSS:v},computed:{linked(){let t=[];return this.data.items.forEach(e=>{t=t.concat(e.countrys)}),t=[...new Set(t)],{arr:t,linkedNum:t.length,unlinkedNum:this.countryArr.length-t.length}}},mounted(){this.defaultDialogEditIOSSData=JSON.stringify(this.dialogEditIOSSData)},methods:{changeIoss(){this.$confirm("已导入至ERP订单和已发货订单IOSS无法更改，更新IOSS会覆盖您客户订单的IOSS，请谨慎操作！",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$apiCall("api.User.setIoss",{isOpenIoss:this.data.isOpenIoss,relationshipId:this.data.id},t=>{"9999"==t.ErrorCode?(this.data.isShow=!1,this.$message({message:"保存成功",type:"success"})):(this.data.isOpenIoss=!this.data.isOpenIoss,this.$message({message:t.Message,type:"error"}))})}).catch()},openEditIOSS(t){this.dialogEditIOSSData=JSON.parse(this.defaultDialogEditIOSSData),t&&(this.dialogEditIOSSData.form.name=t.name,this.dialogEditIOSSData.form.iossId=t.iossId,this.dialogEditIOSSData.id=t.id,this.dialogEditIOSSData.isShow=!0,this.dialogEditIOSSData.oldCountrys=JSON.parse(JSON.stringify(t.countrys)),setTimeout(()=>{this.$set(this.dialogEditIOSSData.form,"countrys",JSON.parse(JSON.stringify(t.countrys)))},100)),this.dialogEditIOSSData.isShow=!0},delIOSS(t,e){this.$confirm("已导入至ERP订单和已发货订单IOSS无法更改，更新IOSS会覆盖您客户订单的IOSS，请谨慎操作！","确定删除该条IOSS？",{confirmButtonText:"删除",cancelButtonText:"取消",confirmButtonClass:" el-button--danger",type:"warning"}).then(()=>{this.loading=!0,this.$apiCall("api.User.deleteIoss",{relationshipId:this.data.id,id:t.id},t=>{this.loading=!1,"9999"==t.ErrorCode?this.data.items.splice(e,1):this.$message({message:t.Message,type:"error"})})}).catch()},saveIOSSSuccess(){this.dialogEditIOSSData.isShow=!1,this.getData()},getData(){this.data.loading=!0,this.$apiCall("api.User.getIoss",{relationshipId:this.data.id},t=>{if(this.data.loading=!1,"9999"==t.ErrorCode){let e=t.Data.Results;this.data.isOpenIoss=!!e.isOpenIoss,this.data.items=e.iossSettings.length?e.iossSettings.map(t=>(t.countrys=t.countrys.split(","),t)):[]}else this.$message({message:t.Message,type:"error"})})},opened(){this.getData()},showCountry(t){let e="";return this.countryArr.forEach(a=>{a.value==t&&(e=a.labelCN)}),e}}},S=$,w=(a("94dc"),Object(d["a"])(S,m,p,!1,null,"526cc4a0",null)),k=w.exports,_=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.$t("mycustomer.扣款"),visible:t.data.isShow,width:"700px"},on:{"update:visible":function(e){return t.$set(t.data,"isShow",e)},open:t.opened}},[e("el-divider"),e("div",{staticClass:"d-body"},[e("el-row",{staticClass:"pd-x-20",attrs:{gutter:30}},[e("el-col",{attrs:{span:24}},[e("el-form",{attrs:{"label-width":"100px"}},[e("el-form-item",{attrs:{label:t.$t("mycustomer.customersName")}},[e("span",{staticStyle:{color:"#303133"}},[t._v(t._s(t.data.item.customerName?t.data.item.customerName:"---"))])]),e("el-form-item",{attrs:{label:t.$t("mycustomer.扣款"),required:""}},[e("el-input",{attrs:{placeholder:""},model:{value:t.dialogData.amount,callback:function(e){t.$set(t.dialogData,"amount",e)},expression:"dialogData.amount"}}),e("span",[t._v("("+t._s(t.$t("mycustomer.客户Bonus余额"))+"("+t._s(t.$store.state.country.symbol)+"): "+t._s(t.data.item.bonus||0)+")")])],1),e("el-form-item",{attrs:{label:t.$t("mycustomer.扣款说明"),required:""}},[e("el-input",{attrs:{placeholder:"",type:"textarea",rows:3},model:{value:t.dialogData.remark,callback:function(e){t.$set(t.dialogData,"remark",e)},expression:"dialogData.remark"}})],1),e("el-form-item",{attrs:{label:t.$t("mycustomer.相关单号")}},[e("el-input",{attrs:{placeholder:t.$t("mycustomer.请填写关联订单")},model:{value:t.dialogData.order,callback:function(e){t.$set(t.dialogData,"order",e)},expression:"dialogData.order"}})],1)],1)],1)],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.data.isShow=!1}}},[t._v(t._s(t.$t("invoice.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveDeduction}},[t._v(" "+t._s(t.$t("invoice.confirm"))+" ")])],1)],1)},C=[],I={props:["data"],data(){return{dialogData:{amount:"",remark:"",order:""}}},methods:{opened(){this.dialogData.amount="",this.dialogData.remark="",this.dialogData.order=""},saveDeduction(){if(Number(this.data.item.bonus)<Number(this.dialogData.amount))return void this.$message({message:this.$t("mycustomer.扣款金额不能大于客户bonus余额"),type:"error"});if(!this.dialogData.amount||!this.dialogData.remark)return void this.$message({message:this.$t("mycustomer.请完善扣款明细"),type:"error"});let t={relationshipId:this.data.item.id,bonus:this.dialogData.amount,remark:this.dialogData.remark,paymentCode:this.dialogData.order};this.$emit("saveDeduction",t)}}},P=I,D=Object(d["a"])(P,_,C,!1,null,"ee78cb44",null),x=D.exports,N={data(){return{searchList:[],supplierName:"",aliasLoading:!1,dialogEmailVisible:!1,OtherName:"",shopId:"",shopIndex:"",uploading:!1,visibleTX:!1,loading:!1,sendEmailFlag:!0,ShopifyNameEdit:!1,EditInput:!1,BathBrokerage:"",dynamicValidateForm:{itemTotal:"",remark:"",certificate_urls:""},tableHeight:400,reSizeTime:0,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("myCustomRowsPerPage")?Number(localStorage.getItem("myInvoiceRowsPerPage")):10,items:[],total:0,totalPage:0,ShopOtherName:[],addVendorDialog:{isEdit:!1,isShow:!1,loading:!1,creditStatus:!0,creditAmount:0,labelW:"100px",name:"",remark:"",email:"",id:"",weChat:"",skype:"",line:"",QQ:"",wangwang:"",whatsapp:"",customCode:"",customerPhone:"",clientGrade:"",brokerage:""},gridData:[{date:"2016-05-02",name:"王小虎",price:"14.5"},{date:"2016-05-04",name:"王小虎",price:"14.5"},{date:"2016-05-01",name:"王小虎",price:"14.5"},{date:"2016-05-03",name:"王小虎",price:"14.5"}],filterParams:{customCode:"",customerId:"",vendorSku:"",name:"",email:"",isAuth:"",dynamic:"",customerLike:"",relationshipId:"",inviterUserId:"",shopName:"",clientGrade:"",customerPhone:"",timeCreated:"",createTimeFrom:"",createTimeTo:"",accountName:"",clientGrade:""},customerId:"",filterParamsDefault:"{}",dialogInvite:{isShow:!1,loading:!1,wordLoading:!1,words:"",inviteUrl:"",qrcode:""},dialogInviteDefault:"{}",selectLoading:!1,selectArr:[],bonusParams:{remark:"",type:"",isShow:!1,loading:!1,id:"",status:"",name:"",num:void 0},bonusParamsDefault:"{}",dialogSettingIossData:{isShow:!1,loading:!1,isOpenIoss:!1,items:[],id:""},defaultDialogSettingIossData:"{}",dialogDeductionData:{isShow:!1,loading:!1,item:""},defaultDialogDeductionData:"{}",apiUserId:JSON.parse(localStorage.getItem("userInfo")).id}},components:{DialogAddVendor:u,DialogSettingIOSS:k,dialogDeduction:x},watch:{$route:"gotoPage"},mounted(){setTimeout(()=>{let t=JSON.parse(localStorage.getItem("userInfo")).configJson,e=JSON.parse(t).deliverNotifyCustomer;this.BathBrokerage=JSON.parse(t).brokerage,e&&(console.log(111111,e),this.sendEmailFlag="2"!==e,console.log(111121651511,this.sendEmailFlag))},1e3),this.$route.query.id&&(this.filterParams.relationshipId=this.$route.query.id),this.filterParams.isAuth=this.$route.query.isAuth?this.$route.query.isAuth:"",this.addVendorDialogDefault=JSON.stringify(this.addVendorDialog),this.filterParamsDefault=JSON.stringify(this.filterParams),this.dialogInviteDefault=JSON.stringify(this.dialogInvite),this.bonusParamsDefault=JSON.stringify(this.bonusParams),this.defaultDialogSettingIossData=JSON.stringify(this.dialogSettingIossData),this.defaultDialogDeductionData=JSON.stringify(this.dialogDeductionData),this.getItem()},methods:{querySearchAsync(t,e){if(!t)return!1;this.$apiCall("api.SubUser.findByUser",{nameLike:t,page:1,rowsPerPage:10},a=>{if("9999"==a.ErrorCode){0==a.Data.Results.length&&this.$message.error(this.$t("supplier.搜索不到数据")),this.searchList=a.Data.Results;var s=t?this.searchList.filter(e=>e.name.indexOf(t)>-1):this.searchList;s=s.map(t=>({value:t.name})),e(s)}else this.$message.error(a.Message)})},cleanClose(){this.visibleTX=!1},openTX(t){this.customerId=t.id,this.visibleTX=!0},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={relationshipId:this.customerId,amount:this.dynamicValidateForm.itemTotal};this.$apiCall("api.Relationship.commissionWithdrawal",t,t=>{9999==t.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.visibleTX=!1,this.getItem(!0)):this.$message({message:t.Message,type:"error"})})}})},resetForm(t){this.$refs[t].resetFields(),this.visibleTX=!1},openDeduction(t){this.dialogDeductionData=JSON.parse(this.defaultDialogDeductionData),this.dialogDeductionData.item=t,this.dialogDeductionData.isShow=!0},saveDeduction(t){this.dialogDeductionData.loading=!0,this.$apiCall("api.Relationship.reduceBonusVendor",t,t=>{this.dialogDeductionData.loading=!1,9999==t.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.dialogDeductionData.isShow=!1,this.getItem(!0)):this.$message({message:t.Message,type:"error"})})},changeSwitch(t,e,a){let s={relationshipId:e,distributionSwitch:t,name:a};this.$apiCall("api.Relationship.changeByVendor",s,t=>{this.addVendorDialog.loading=!1,9999==t.ErrorCode?(this.$message({message:"success",type:"success"}),this.getItem()):this.$message({message:t.Message,type:"error"})})},openSetIOSS(t){this.dialogSettingIossData=JSON.parse(this.defaultDialogSettingIossData),this.dialogSettingIossData.id=t.id,this.dialogSettingIossData.isShow=!0},deleteAlias(t){this.aliasLoading=!0,this.$apiCall("api.ShopifyAccount.changeAlias",{id:t.row.id,name:""},e=>{this.aliasLoading=!1,9999==e.ErrorCode?(this.ShopOtherName[t.$index].alias="",this.$message({message:this.$t("mycustomer.删除成功"),type:"success"})):this.$message({message:e.Message,type:"error"})})},openBatchVendor(){this.dialogEmailVisible=!0},beforeAvatarUpload(t){console.log(t),this.imgName=t.name,this.nowFile=t},httpRequest(t){const e="image/jpeg"===t.file.type||"image/jpg"===t.file.type||"image/png"===t.file.type,a=t.file.size/1024/1024<2;e?a?this.getBase64(t.file).then(t=>{this.fileBase64=t.split(",")[1];let e=t.match(/data:image\/(.*);base64,.*/)[1];console.log(this.tempUrl,"this.tempUrl"),this.getUploadImgUrl(this.fileBase64,e)}):this.$message.error("上传文件大小不能超过 2MB!"):this.$message.error("上传头像图片只能是 JPG、PNG、JPEG 格式!")},handleRemove(t,e){},getUploadImgUrl(t,e){this.$apiCall("api.Comment.uploadImg",{imgUrlBase64:t,ext:e},t=>{9999==t.ErrorCode?this.dynamicValidateForm.certificate_urls=t.Data.Results.imgUrl:this.$message({message:t.Message,type:"error"})})},getBase64(t){return new Promise((e,a)=>{let s=new FileReader,o="";s.readAsDataURL(t),s.onload=function(){o=s.result},s.onerror=function(t){a(t)},s.onloadend=function(){e(o)}})},switchEmail(t){let e=1==t?1:2;this.$apiCall("api.User.changeByUser",{deliverNotifyCustomer:e},t=>{9999==t.ErrorCode?this.$message({message:t.Message,type:"success"}):this.$message({message:t.Message,type:"error"})})},ChangeEdit(){this.aliasLoading=!0;let t=this.OtherName;this.$apiCall("api.ShopifyAccount.changeAlias",{id:this.shopId,name:t},e=>{this.EditInput=!1,this.aliasLoading=!1,9999==e.ErrorCode?(this.ShopOtherName[this.shopIndex].alias=t,this.$message({message:this.$t("mycustomer.修改成功"),type:"success"})):this.$message({message:e.Message,type:"error"})})},editOtherName(t){this.EditInput=!0,this.shopId=t.row.id,this.shopIndex=t.$index},editShopName(t){this.ShopifyNameEdit=!0,this.ShopOtherName=t.shops},close(){this.selectArr=[],this.filterParams.relationshipId="",this.getItem()},rageTick(){this.$apiCall("api.User.changeByUser",{brokerage:this.BathBrokerage},t=>{9999==t.ErrorCode?(this.$message({message:t.Message,type:"success"}),this.dialogEmailVisible=!1,this.getItem()):this.$message({message:t.Message,type:"error"})})},goTo(t,e){this.$router.push({name:t,params:{id:e.id,customerName:e.customerName}})},remoteMethodCustom(t){this.selectArr=[],t&&(this.selectLoading=!0,this.$apiCall("api.Relationship.findByVendor",{name:t},t=>{this.selectLoading=!1,9999==t.ErrorCode?this.selectArr=t.Data.Results:this.$message({message:t.Message,type:"error"})}))},setInvoiceWord(){this.dialogInvite.wordLoading=!0,this.$apiCall("api.User.setWords",{words:this.dialogInvite.words},t=>{if(this.dialogInvite.wordLoading=!1,9999==t.ErrorCode){this.$message({message:this.$t("mycustomer.savedSuccess"),type:"success"});let t=this.$store.state.userInfo;t.inviteWords=this.dialogInvite.words,this.$store.commit("setUserInfo",t),localStorage.setItem("userInfo",JSON.stringify(t))}else this.$message({message:t.Message,type:"error"})})},onCopy(){this.$elementMessage(this.$t("mycustomer.copiedSuccess"),"success")},onError(){this.$elementMessage(this.$t("mycustomer.copiedFailed"),"error")},inviteOpened(){(function(t,e,a){t.loadSkypeWebSdkAsync=t.loadSkypeWebSdkAsync||function(t){var s,o=e.getElementsByTagName(a)[0];e.getElementById(t.id)||(s=e.createElement(a),s.id=t.id,s.src=t.scriptToLoad,s.onload=t.callback,o.parentNode.insertBefore(s,o))};var s={scriptToLoad:"https://swx.cdn.skype.com/shared/v/latest/skypewebsdk.js",id:"skype_web_sdk"};t.loadSkypeWebSdkAsync(s)})(window,document,"script")},openInvite(t){this.items.some(e=>{if(e.customerName==t)return this.openInvitation(e),!0})},openInvitation(t){this.dialogInvite=JSON.parse(this.dialogInviteDefault),this.dialogInvite.isShow=!0,this.dialogInvite.words=this.$store.state.userInfo.inviteWords,this.dialogInvite.inviteUrl=`${location.host.indexOf("sandbox")>-1?"sandbox":""}${this.$store.state.userInfo.shop.subDomain}.bcndropshippingelite.com/`,this.dialogInvite.qrcode=t.qrcodeBase64},clearFilter(){this.supplierName="",this.filterParams=JSON.parse(this.filterParamsDefault),this.selectArr=[],1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},filterGetItem(t){"relationshipId"==t?(this.selectArr.forEach(t=>{t.customerName==this.filterParams.name&&(this.filterParams.relationshipId=t.id)}),this.getItem()):1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},gotoImport(t){this.$router.push({name:"importData",query:{rid:t.id}})},delVendor(t){this.$confirm(this.$t("mycustomer.confirmToCancel"),"",{confirmButtonText:this.$t("mycustomer.delete"),cancelButtonText:this.$t("mycustomer.cancel"),type:"error"}).then(()=>{this.$apiCall("api.Relationship.deleteByVendor",{relationshipId:t.id},t=>{9999==t.ErrorCode?(this.$root,this.$message({message:this.$t("mycustomer.cancelSuccess"),type:"success"}),this.$root.$children[0].getCnt(),this.getItem(!0)):this.$message({message:t.Message,type:"error"})})}).catch(()=>{})},editVendor(t){this.addVendorDialog=JSON.parse(this.addVendorDialogDefault),this.addVendorDialog.name=t.customerName,this.addVendorDialog.email=t.customerEmail,this.addVendorDialog.remark=t.customerRemark,this.addVendorDialog.id=t.id,this.addVendorDialog.weChat=t.customerWeChat,this.addVendorDialog.customerPhone=t.customerPhone,this.addVendorDialog.clientGrade=t.clientGrade,this.addVendorDialog.skype=t.customerSkype,this.addVendorDialog.line=t.customerLine,this.addVendorDialog.QQ=t.customerQQ,this.addVendorDialog.wangwang=t.customerWangwang,this.addVendorDialog.creditStatus="2"!=t.creditStatus,this.addVendorDialog.creditAmount=t.creditAmount,this.addVendorDialog.whatsapp=t.customerWhatsapp,this.addVendorDialog.isShow=!0,this.addVendorDialog.isEdit=!!t.customerEmail,this.addVendorDialog.customCode=t.customCode||"",this.addVendorDialog.brokerage=t.brokerage||""},openAddVendor(){this.addVendorDialog=JSON.parse(this.addVendorDialogDefault),this.addVendorDialog.isShow=!0},addVendorSaveSuccess(){this.clearFilter()},getItem(t){this.loading=!0,this.supplierName&&(this.filterParams.inviterUserId=this.searchList.find(t=>t.name==this.supplierName).subUserId),this.$apiCall("api.Relationship.findByVendor",{page:this.page,rowsPerPage:this.rowsPerPage,name:this.filterParams.name,accountName:this.filterParams.accountName,customerId:this.filterParams.customerId,customCode:this.filterParams.customCode,customerPhone:this.filterParams.customerPhone,vendorSku:this.filterParams.vendorSku,email:this.filterParams.email,isAuth:this.filterParams.isAuth,actDegree:this.filterParams.dynamic,customerLike:"",clientGrade:this.filterParams.clientGrade,relationshipId:this.filterParams.relationshipId,inviterUserId:this.filterParams.inviterUserId,createTimeFrom:this.filterParams.timeCreated?this.filterParams.timeCreated[0]:"",createTimeTo:this.filterParams.timeCreated?this.filterParams.timeCreated[1]:"",status:1},e=>{this.loading=!1,9999==e.ErrorCode?(this.items=e.Data.Results,this.items.forEach(t=>{this.$apiCall("api.Relationship.getCntDetail",{relationshipId:t.id},e=>{9999==e.ErrorCode&&(t.invoiceCnt=e.Data.Results.invoiceCnt,t.totalAmount=e.Data.Results.totalAmount,t.orderCnt=e.Data.Results.orderCnt,t.skuCnt=e.Data.Results.skuCnt,t.offerSkuCnt=e.Data.Results.offerSkuCnt,this.items=[...this.items])})}),this.total=Number(e.Data.Pagination.totalCount),this.totalPage=Number(e.Data.Pagination.totalPage),t||(this.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0),this.$route.params.openInvite&&this.items.some(t=>{if(t.customerName==this.$route.params.name)return this.openInvitation(t),this.$route.params.openInvite=!1,!0}),this.$route.params.item&&(this.openInvitation(this.$route.params.item),this.$route.params.item=null),this.$route.query.id&&0!=this.items.length&&(this.filterParams.relationshipId="",this.openInvitation(this.items[0]))):this.$message({message:e.Message,type:"error"})})},toPage(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},changePageSize(t){this.rowsPerPage=t,localStorage.setItem("myCustomRowsPerPage",t),this.getItem()},gotoPage(){this.page=this.$route.query.page?Number(this.$route.query.page):1,this.getItem()},showBonus(t,e){this.bonusParams=JSON.parse(this.bonusParamsDefault),this.bonusParams.type=e,this.bonusParams.id=t.id,this.bonusParams.name=t.customerName,1==e&&(this.bonusParams.status=t.bonusStatus),this.bonusParams.isShow=!0},updateBonus(){this.bonusParams.loading=!0,this.$apiCall("api.Relationship.changeBonusStatusVendor",{relationshipId:this.bonusParams.id},t=>{this.bonusParams.loading=!1,9999==t.ErrorCode?(this.$message({message:1==this.bonusParams.status?this.$t("mycustomer.停用成功"):this.$t("mycustomer.启用成功"),type:"success"}),this.bonusParams.isShow=!1,this.getItem(!0)):this.$message({message:t.Message,type:"error"})})},addBonusNum(){this.bonusParams.num?(this.bonusParams.loading=!0,this.$apiCall("api.Relationship.addBonusVendor",{relationshipId:this.bonusParams.id,bonus:this.bonusParams.num,remark:this.bonusParams.remark},t=>{this.bonusParams.loading=!1,9999==t.ErrorCode?(this.$message({message:this.$t("mycustomer.充值成功"),type:"success"}),this.bonusParams.isShow=!1,this.getItem(!0)):this.$message({message:t.Message,type:"error"})})):this.$message({message:this.$t("mycustomer.充值金额必须填写"),type:"error"})}}},V=N,O=(a("6704"),Object(d["a"])(V,s,o,!1,null,"4cd0096e",null));e["default"]=O.exports},"2ba4":function(t,e,a){"use strict";var s=a("40d5"),o=Function.prototype,r=o.apply,i=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(s?i.bind(r):function(){return i.apply(r,arguments)})},"3bbe":function(t,e,a){"use strict";var s=a("1787"),o=String,r=TypeError;t.exports=function(t){if(s(t))return t;throw new r("Can't set "+o(t)+" as a prototype")}},"3d01":function(t,e,a){},4550:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-product"},[e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.data.loading,expression:"data.loading"}],attrs:{visible:t.data.isShow,title:t.$t("storeSetting.选择商品"),width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{open:function(e){return t.open()},"update:visible":function(e){return t.$set(t.data,"isShow",e)},close:t.closeDialog}},[e("el-divider"),e("div",[e("el-form",{staticStyle:{"margin-bottom":"10px !important"},attrs:{inline:!0,size:"mini"}},[t.up?t._e():e("el-form-item",[e("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:t.$t("storeSetting.请选择")},on:{change:function(e){return t.filterGetItem("status")}},model:{value:t.filterData.status,callback:function(e){t.$set(t.filterData,"status",e)},expression:"filterData.status"}},[e("el-option",{attrs:{label:t.$t("storeSetting.全部"),value:""}}),e("el-option",{attrs:{label:t.$t("storeSetting.上架"),value:"1"}}),e("el-option",{attrs:{label:t.$t("storeSetting.下架"),value:"2"}})],1)],1),e("el-form-item",[e("el-input",{staticStyle:{width:"160px"},attrs:{clearable:"",size:"mini",placeholder:t.$t("goods.商品名称")},on:{clear:function(e){return t.clearFilter("name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem()}},model:{value:t.filterData.name,callback:function(e){t.$set(t.filterData,"name",e)},expression:"filterData.name"}})],1),e("el-form-item",{staticStyle:{"margin-bottom":"0"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.filterGetItem()}}},[t._v(t._s(t.$t("myinvoice.filter")))]),e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.clearFilter()}}},[t._v(t._s(t.$t("goods.重置")))])],1)],1)],1),e("el-divider"),e("div",{staticClass:"action"},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.goToGoods}},[t._v(t._s(t.$t("storeSetting.管理商品")))]),e("div",{staticClass:"refresh",on:{click:t.getItems}},[e("i",{staticClass:"el-icon-refresh-right"}),e("span",{staticClass:"mg-l-5"},[t._v(t._s(t.$t("storeSetting.刷新")))])])],1),e("el-divider"),e("div"),t.data.item&&t.data.item.length&&null==t.data.variableId?e("el-table",{ref:"productTable",attrs:{data:t.data.item,stripe:"",height:"300px"}},[e("el-table-column",{attrs:{label:"",width:"60"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.statusIpt?e("el-radio",{staticClass:"none-label",attrs:{label:a.row.id},model:{value:t.productData,callback:function(e){t.productData=e},expression:"productData"}},[t._v(t._s(""))]):t._e()]}}],null,!1,768795816)}),e("el-table-column",{attrs:{label:t.$t("goods.商品图片"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"60px",height:"60px",border:"1px solid #ddd","background-color":"#fff"},attrs:{src:t.row.imgUrl,fit:"contain","scroll-container":".main-scroll .el-scrollbar__wrap","preview-src-list":t.row.imgUrlArr}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"})])])]}}],null,!1,2968517507)}),e("el-table-column",{attrs:{label:t.$t("goods.商品名称")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("p",{staticClass:"tx-ellipsis3",staticStyle:{"line-height":"22px"}},[t._v(t._s(a.row.name))])]}}],null,!1,2941362605)}),e("el-table-column",{attrs:{label:t.$t("storeSetting.状态"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.statusIpt?e("el-tag",[t._v(t._s(t.$t("storeSetting.上架")))]):e("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.$t("storeSetting.下架")))])]}}],null,!1,73026675)})],1):t.data.item&&t.data.item.length&&t.data.variableId?e("div",[e("el-table",{staticClass:"no-hover",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.data.item,height:"300px"}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"","show-header":!1,data:a.row.stocks}},[e("el-table-column",{attrs:{label:t.$t("orders.select"),width:"55"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-radio",{attrs:{label:s.row.sku},on:{change:function(e){return t.changeHandler(s.row.sku,a.row)}},model:{value:t.tableRadio,callback:function(e){t.tableRadio=e},expression:"tableRadio"}},[e("i")])]}}],null,!0)}),e("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"d-flex"},[e("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:a.row.propertyImage,fit:"cover"}}),e("div",{staticClass:"mg-l-20"},[e("p",[t._v(t._s(a.row.name))]),e("p",[t._v("SKU: "+t._s(a.row.sku))])])],1)]}}],null,!0)})],1)]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"d-flex"},[e("img",{attrs:{src:a.row.imgUrl,width:"60",height:"60"}}),e("div",{staticClass:"mg-l-20"},[e("p",[t._v(t._s(a.row.name))]),e("p",[t._v("SPU: "+t._s(a.row.sku))])])])]}}])})],1)],1):e("div",{staticClass:"no-data"},[e("img",{attrs:{src:a("069c")}}),e("div",[t._v(t._s(t.$t("storeSetting.暂无数据"))+"，"),e("span",{on:{click:t.goToGoods}},[t._v(t._s(t.$t("storeSetting.去添加商品")))])])]),e("div",{ref:"tableFooter",staticStyle:{margin:"10px 0 20px"}},[t.data.item&&t.data.item.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{small:"","current-page":Number(t.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSize,"pager-count":Number(5),"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeDialog}},[t._v(t._s(t.$t("storeSetting.取消")))]),e("el-button",{attrs:{type:"primary",disabled:t.data.variableId?!t.tableRadio:!t.productData},on:{click:t.AddGoods}},[t._v(t._s(t.$t("storeSetting.添加")))])],1)],1)],1)},o=[],r=(a("14d9"),{props:["data","up"],data(){return{host:location.host,productItem:{},productData:"",filterData:{name:"",status:""},showDialog:!1,tableRadio:"",defaultFilterData:"{}",pageSize:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem(this.$route.name+"RowsPerPage")?Number(localStorage.getItem(this.$route.name+"RowsPerPage")):10,total:0,totalPage:0,loading:!1}},mounted(){this.up&&(this.filterData.status=1),this.getItems(),this.defaultFilterData=JSON.stringify(this.filterData)},watch:{$route:"gotoPage","data.menuData":{deep:!0,handler(){this.data.menuData.urlData&&(this.productData=this.data.menuData.urlData.id)}}},methods:{open(){this.showDialog=this.data.isShow,console.log(this.data.item,"data.item")},getItems(){this.loading=!0,this.$apiCall("api.VendorShop.vendorFindProducts",{page:this.page,rowsPerPage:this.rowsPerPage,name:this.filterData.name,status:this.filterData.status},t=>{this.tableRadio="",this.loading=!1,9999==t.ErrorCode?(this.data.item=t.Data.Results.products.map(t=>(t.imgUrlArr=JSON.parse(t.imgUrlJson),t.statusIpt="1"==t.status,t)),this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage),this.$refs.productTable&&(this.$refs.productTable.bodyWrapper.scrollTop=0)):this.$message({message:t.Message,type:"error"})})},changeHandler(t,e){this.productItem=e,console.log(this.tableRadio,"vcvsdf"),console.log(e)},filterGetItem(){this.page=1,this.productData="",this.getItems()},clearFilter(t){switch(t){case"name":this.filterData.name="";break;default:this.filterData=JSON.parse(this.defaultFilterData)}"none"!=t&&this.toPage(1)},AddGoods(){this.productItem?(this.data.item.forEach(t=>{t.id==this.productData&&(this.productItem=t)}),"1"==this.data.type?(this.$parent.addShopForm.mainProductId=this.productItem.id,this.$parent.addShopForm.imgUrl=this.productItem.imgUrl,this.$parent.addShopForm={...this.$parent.addShopForm}):(this.$parent.addShopForm.productId=this.productItem.id,this.$parent.addShopForm.imgUrlBuild=this.productItem.imgUrl,this.$parent.addShopForm.sku=this.tableRadio,this.$parent.setting={...this.$parent.setting}),this.closeDialog()):this.$message({message:"请选择一件商品",type:"error"})},goToGoods(){this.$router.push("/goods-mgr/all")},gotoPage(){this.page=this.$route.query.page?this.$route.query.page:1,this.$nextTick(()=>{this.getItems()})},toPage(t){t!=this.$route.query.page?this.$router.push({query:{page:t,cid:this.$route.query.cid,id:this.$route.query.id}}):this.getItems()},changePageSize(t){this.rowsPerPage=t,localStorage.setItem(this.$route.name+"RowsPerPage",t),this.getItems()},closeDialog(){this.page=1,this.productData="",this.productItem={},this.tableRadio="",this.filterData=JSON.parse(this.defaultFilterData),this.data.isShow=!1}},components:{}}),i=r,l=(a("8dee"),a("2877")),n=Object(l["a"])(i,s,o,!1,null,"41a24f50",null);e["a"]=n.exports},5218:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel my-custom-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-el-icon-s-goods"}),e("h2",[t._v(t._s(t.$t("mycustomer.售后工单")))])])]),e("div",{staticClass:"right"})]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("el-card",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{ref:"pageFilter",staticClass:"page-filter"},[e("el-form",{attrs:{inline:!0,size:"mini"}},[e("el-form-item",{attrs:{label:t.$t("transaction.工单类型")}},[e("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:t.$t("mycustomer.all")},model:{value:t.filterParams.type,callback:function(e){t.$set(t.filterParams,"type",e)},expression:"filterParams.type"}},[e("el-option",{attrs:{label:t.$t("mycustomer.all"),value:""}}),e("el-option",{attrs:{label:t.$t("transaction.退款"),value:"1"}}),e("el-option",{attrs:{label:t.$t("transaction.更换"),value:"2"}})],1)],1),e("el-form-item",{attrs:{label:t.$t("transaction.状态")}},[e("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:t.$t("mycustomer.all")},model:{value:t.filterParams.status,callback:function(e){t.$set(t.filterParams,"status",e)},expression:"filterParams.status"}},[e("el-option",{attrs:{label:t.$t("mycustomer.all"),value:""}}),e("el-option",{attrs:{label:t.$t("transaction.待审核"),value:"1"}}),e("el-option",{attrs:{label:t.$t("transaction.同意"),value:"2"}}),e("el-option",{attrs:{label:t.$t("transaction.拒绝"),value:"3"}})],1)],1),e("el-form-item",{attrs:{label:t.$t("transaction.工单号")}},[e("el-input",{attrs:{placeholder:t.$t("transaction.请输入"),clearable:""},model:{value:t.filterParams.orderNumber,callback:function(e){t.$set(t.filterParams,"orderNumber",e)},expression:"filterParams.orderNumber"}})],1),e("el-form-item",{attrs:{label:t.$t("transaction.订单编号")}},[e("el-input",{attrs:{placeholder:t.$t("transaction.请输入"),clearable:""},model:{value:t.filterParams.orderId,callback:function(e){t.$set(t.filterParams,"orderId",e)},expression:"filterParams.orderId"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v("Filter")]),e("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v("Clear")])],1)],1)],1)])],1),e("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:"","row-key":"id",height:"650"}},[e("el-table-column",{attrs:{label:t.$t("transaction.工单号")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("b",[t._v(t._s(a.row.orderNumber))])])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.订单编号")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("b",[t._v(t._s(a.row.orderId))])])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.客户名称")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.customerName||"--"))]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.交易类型")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1==e.row.type?t.$t("transaction.退款"):t.$t("transaction.更换")))]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.问题类型")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getType(e.row)))]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.问题描述")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.description||"--"))]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.创建时间")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.timeCreated||"--"))]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.备注")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.remark||"--"))]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.状态")},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.status?e("span",[t._v(t._s(t.$t("transaction.待审核")))]):2==a.row.status?e("span",[t._v(t._s(t.$t("transaction.同意")))]):e("span",[t._v(t._s(t.$t("transaction.拒绝")))])]}}])}),e("el-table-column",{attrs:{label:t.$t("mycustomer.operate"),width:"230"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{directives:[{name:"show",rawName:"v-show",value:1==a.row.status,expression:"scope.row.status ==1"}]},[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.operaTg(a.row,"2")}}},[t._v(t._s(t.$t("transaction.通过")))]),e("el-link",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger"},on:{click:function(e){return t.operaTg(a.row,"3")}}},[t._v(t._s(t.$t("transaction.拒绝")))])],1)]}}])})],1)],1)],1)],1),t.items.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":t.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),e("el-dialog",{attrs:{title:t.$t("transaction.审核操作"),visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"form",attrs:{model:t.formMay,"label-width":"80px"}},[1==t.orderType&&2==t.OStatus?e("el-form-item",{attrs:{label:t.$t("transaction.退款金额")}},[e("el-input",{attrs:{type:"number"},model:{value:t.formMay.ORefundAmount,callback:function(e){t.$set(t.formMay,"ORefundAmount",e)},expression:"formMay.ORefundAmount"}})],1):t._e(),e("el-form-item",{attrs:{label:t.$t("transaction.备注")}},[e("el-input",{model:{value:t.formMay.ORemark,callback:function(e){t.$set(t.formMay,"ORemark",e)},expression:"formMay.ORemark"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){return t.handleClose()}}},[t._v(t._s(t.$t("transaction.取消")))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.tall()}}},[t._v(t._s(t.$t("transaction.保存")))])],1)],1)],1)},o=[],r=(a("14d9"),{data(){return{loading:!1,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("myCustomRowsPerPage")?Number(localStorage.getItem("myInvoiceRowsPerPage")):10,items:[],total:0,totalPage:0,filterParams:{orderNumber:"",status:"",type:"",orderId:""},orderType:1,formMay:{ORefundAmount:"",ORemark:""},dialogVisible:!1,orderId:"",OStatus:"",OType:"",ORefundAmount:"",ORemark:"",questionList:[{label:this.$t("修改客户相关信息"),id:1},{label:this.$t("取消订单"),id:2},{label:this.$t("无跟踪信息"),id:3},{label:this.$t("跟踪信息长时间未更新"),id:4},{label:this.$t("物品损坏"),id:5},{label:this.$t("物品丢失"),id:6},{label:this.$t("发送错误产品"),id:7},{label:this.$t("发送错误地址"),id:8},{label:this.$t("订单暂停"),id:9}]}},components:{},watch:{$route:"gotoPage"},mounted(){this.getItem()},methods:{getItem(t){this.loading=!0,this.$apiCall("api.OrderRefund.getList",{page:this.page,rowsPerPage:this.rowsPerPage,type:this.filterParams.type,orderNumber:this.filterParams.orderNumber,status:this.filterParams.status,orderId:this.filterParams.orderId},t=>{this.loading=!1,9999==t.ErrorCode?(this.items=t.Data.Results,this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage)):this.$message({message:t.Message,type:"error"})})},toPage(t){console.log(3556),t!=this.$route.query.page&&this.$router.push({query:{page:t}})},changePageSize(t){this.rowsPerPage=t,localStorage.setItem("myCustomRowsPerPage",t),console.log(3525),this.getItem()},gotoPage(){this.page=this.$route.query.page?Number(this.$route.query.page):1,console.log(3525),this.getItem()},filterItem(){this.page=1,this.getItem()},handleClose(){this.dialogVisible=!1,this.formMay.ORefundAmount="",this.formMay.ORemark=""},clearFilter(){this.filterParams={orderNumber:"",status:"",type:""},this.page=1,this.getItem()},getType(t){let e=this.questionList.filter(e=>e.id==t.reasonType);return e[0].label},tall(){this.$apiCall("api.OrderRefund.changeStatus",{id:this.orderId,status:this.OStatus,refundAmount:this.formMay.ORefundAmount,remark:this.formMay.ORemark},t=>{this.dialogVisible=!1,9999==t.ErrorCode?(this.$message({message:t.Message,type:"success"}),this.filterParams={orderNumber:"",status:"",type:""},this.page=1,this.getItem()):this.$message({message:t.Message,type:"error"})})},operaTg(t,e){this.dialogVisible=!0,this.OStatus=e,this.orderId=t.id,this.orderType=t.type}}}),i=r,l=(a("c618"),a("2877")),n=Object(l["a"])(i,s,o,!1,null,"67ee933d",null);e["default"]=n.exports},"56b8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel my-custom-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-el-icon-s-goods"}),e("h2",[t._v(t._s(t.$t("transaction.绑定商品列表")))])])]),e("div",{staticClass:"right"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.open()}}},[t._v(" "+t._s(t.$t("transaction.绑定新商品"))+" ")])],1)]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("el-card",[e("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:"","row-key":"id",height:"650"}},[e("el-table-column",{attrs:{prop:"customerName",label:t.$t("transaction.客户邮箱")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("b",[t._v(t._s(a.row.customer))])])]}}])}),e("el-table-column",{attrs:{prop:"customerName",label:t.$t("transaction.绑定SKU")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("b",[t._v(t._s(a.row.stock.sku))])])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.绑定SKU图片")},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.stock.propertyImage,fit:"fit"}})]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.被绑定SKU")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.mainProduct.sku))]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.被绑定SKU图片")},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.mainProduct.imgUrl,fit:"fit"}})]}}])}),e("el-table-column",{attrs:{label:t.$t("mycustomer.operate"),width:"230"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-popconfirm",{key:a.row.id,attrs:{title:"Are you sure you want to delete it?","confirm-button-text":"Confirm","cancel-button-text":"Cancel"},on:{confirm:function(e){return t.cancel(a.row)}}},[e("el-link",{staticStyle:{"margin-left":"5px"},attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v(t._s(t.$t("transaction.删除")))])],1)],1)]}}])})],1)],1)],1)],1),t.items.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":t.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),e("el-dialog",{attrs:{title:t.$t("transaction.新增绑定商品"),visible:t.dialogVisibleAdd,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleAdd=e},open:function(e){return t.open()}}},[e("div",[e("el-form",{ref:"replyForm",staticClass:"mg-t-20",attrs:{"label-position":"left"}},[e("el-form-item",{attrs:{label:t.$t("quotation.客户选择"),"label-width":"150px",required:""}},[e("el-select",{attrs:{filterable:"",remote:"","remote-method":t.remoteMethodCustom,loading:t.selectLoading,placeholder:t.$t("myinvoice.pleaseCusName"),clearable:""},on:{change:function(e){return t.filterGetItem()},clear:t.close},model:{value:t.addShopForm.name,callback:function(e){t.$set(t.addShopForm,"name",e)},expression:"addShopForm.name"}},t._l(t.selectArr,(function(t){return e("el-option",{key:t.id,attrs:{label:t.customerName,value:t.customerName}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("quotation.添加被绑定商品"),"label-width":"150px",required:""}},[e("div",{staticClass:"d-flex"},[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.openSelect("1")}}},[t._v(t._s(t.$t("quotation.选择商品")))])],1)]),e("el-form-item",{attrs:{label:t.$t("quotation.商品图片"),"label-width":"150px",required:""}},[e("div",{staticClass:"upload"},[t.addShopForm.imgUrl?e("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.addShopForm.imgUrl,fit:"cover"}}):e("i",{staticClass:"el-icon-plus"})],1)]),e("el-form-item",{attrs:{label:t.$t("quotation.添加绑定商品"),"label-width":"150px",required:""}},[e("div",{staticClass:"d-flex"},[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.openSelect("2")}}},[t._v(t._s(t.$t("quotation.选择商品")))])],1)]),e("el-form-item",{attrs:{label:t.$t("quotation.绑定商品图片"),"label-width":"150px",required:""}},[e("div",{staticClass:"upload"},[t.addShopForm.imgUrlBuild?e("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.addShopForm.imgUrlBuild,fit:"cover"}}):e("i",{staticClass:"el-icon-plus"})],1)])],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("div",{staticClass:"mg-t-20"},[e("el-button",{on:{click:t.handleClose}},[t._v(t._s(t.$t("quotation.取消")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.quote}},[t._v(t._s(t.$t("quotation.确定")))])],1)])]),e("selectProduct",{attrs:{data:t.dialogProductList,up:"up"}})],1)},o=[],r=(a("14d9"),a("4550")),i={data(){return{loading:!1,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("myCustomRowsPerPage")?Number(localStorage.getItem("myInvoiceRowsPerPage")):10,items:[],total:0,totalPage:0,dialogVisibleAdd:!1,selectLoading:!1,selectArr:[],addShopForm:{name:"",imgUrlBuild:"",imgUrl:"",customerId:"",mainProductId:"",productId:"",sku:""},dialogProductList:{item:null,items:[],isShow:!1,variableId:null,type:1}}},components:{selectProduct:r["a"]},watch:{},mounted(){this.getItem()},methods:{getItem(){this.loading=!0,this.$apiCall("api.VendorShopProductBundling.getList",{page:this.page,rowsPerPage:this.rowsPerPage},t=>{this.loading=!1,9999==t.ErrorCode?(this.items=t.Data.Results,this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage)):this.$message({message:t.Message,type:"error"})})},toPage(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},open(){this.dialogVisibleAdd=!0},handleClose(){this.addShopForm={name:"",imgUrlBuild:"",imgUrl:"",customerId:"",mainProductId:"",productId:"",sku:""},this.dialogVisibleAdd=!1},changePageSize(t){this.rowsPerPage=t,localStorage.setItem("myCustomRowsPerPage",t),this.getItem()},filterGetItem(){this.selectArr.forEach(t=>{t.customerName==this.addShopForm.name&&(this.addShopForm.customerId=t.customerId)})},close(){this.selectArr=[]},cancel(t){this.$apiCall("api.VendorShopProductBundling.delBunding",{id:t.id},t=>{9999==t.ErrorCode?this.getItem():this.$message({message:t.Message,type:"error"})})},remoteMethodCustom(t){this.selectArr=[],t&&(this.selectLoading=!0,this.$apiCall("api.Relationship.findByVendor",{name:t},t=>{this.selectLoading=!1,9999==t.ErrorCode?this.selectArr=t.Data.Results:this.$message({message:t.Message,type:"error"})}))},getProduct(){this.$apiCall("api.VendorShop.vendorFindProducts",{status:1,page:1,rowsPerPage:10},t=>{if(9999==t.ErrorCode){let e=t.Data.Results.products.map(t=>(t.imgUrlArr=JSON.parse(t.imgUrlJson),t.statusIpt="1"==t.status,t));console.log(e,"tempArr"),e.forEach(t=>{t.stocks&&t.stocks.length&&t.stocks.forEach(e=>{this.$set(e,"name",t.name),this.dialogProductList.items.push(e)}),this.dialogProductList.item.push(t)})}else this.$message({message:t.Message,type:"error"})})},openSelect(t){this.getProduct(),this.dialogProductList.variableId=2==t?21:null,this.dialogProductList.type=t,this.dialogProductList.isShow=!0},quote(){this.addShopForm.customerId?this.addShopForm.mainProductId&&this.addShopForm.productId?this.$apiCall("api.VendorShopProductBundling.addBunding",{customerId:this.addShopForm.customerId,mainProductId:this.addShopForm.mainProductId,productId:this.addShopForm.productId,sku:this.addShopForm.sku},t=>{9999==t.ErrorCode?(this.addShopForm={name:"",imgUrlBuild:"",imgUrl:"",customerId:"",mainProductId:"",productId:"",sku:""},this.dialogVisibleAdd=!1,this.getItem()):this.$message({message:t.Message,type:"error"})}):this.$message({message:this.$t("transaction.请选择商品"),type:"error"}):this.$message({message:this.$t("transaction.请选择客户"),type:"error"})}}},l=i,n=(a("f27f"),a("2877")),d=Object(n["a"])(l,s,o,!1,null,"3a0fc4c2",null);e["default"]=d.exports},"577e":function(t,e,a){"use strict";var s=a("f5df"),o=String;t.exports=function(t){if("Symbol"===s(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},6704:function(t,e,a){"use strict";a("6aac")},"6aac":function(t,e,a){},"6f19":function(t,e,a){"use strict";var s=a("9112"),o=a("0d26"),r=a("b980"),i=Error.captureStackTrace;t.exports=function(t,e,a,l){r&&(i?i(t,e):s(t,"stack",o(a,l)))}},7156:function(t,e,a){"use strict";var s=a("1626"),o=a("861d"),r=a("d2bb");t.exports=function(t,e,a){var i,l;return r&&s(i=e.constructor)&&i!==a&&o(l=i.prototype)&&l!==a.prototype&&r(t,l),t}},7282:function(t,e,a){"use strict";var s=a("e330"),o=a("59ed");t.exports=function(t,e,a){try{return s(o(Object.getOwnPropertyDescriptor(t,e)[a]))}catch(r){}}},7827:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel my-custom-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-order"}),e("h2",[t._v(t._s("Pre-order stock order"))])])]),e("div",{staticClass:"right"})]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("el-card",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-form",{attrs:{inline:!0,size:"mini"}},[e("el-form-item",{attrs:{label:t.$t("SKU")}},[e("el-input",{attrs:{placeholder:"SKU",clearable:""},on:{change:t.changeSku},model:{value:t.filterParams.sku,callback:function(e){t.$set(t.filterParams,"sku",e)},expression:"filterParams.sku"}})],1)],1)],1)],1),e("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"","tooltip-effect":"dark"}},[e("el-table-column",{attrs:{prop:"customer",label:"customer",width:"180"}}),e("el-table-column",{attrs:{prop:"sku",label:"sku",width:"180"}}),e("el-table-column",{attrs:{label:t.$t("mycustomer.商品图片"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.stock.propertyImage,fit:"fit"}})]}}])}),e("el-table-column",{attrs:{label:t.$t("mycustomer.仓库"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.warehouse.name))]}}])}),e("el-table-column",{attrs:{label:t.$t("mycustomer.库存"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.inventory))]}}])}),e("el-table-column",{attrs:{prop:"timeCreated",label:t.$t("mycustomer.创建时间")}})],1)],1)],1)],1)],1),t.tableData.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":t.tableData,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1)},o=[],r={components:{},data(){return{pageSizes:[10,20,50,100],page:1,rowsPerPage:10,loading:!1,total:0,filterParams:{sku:""},tableData:[]}},computed:{},watch:{},methods:{changeSku(){this.getData()},getData(){this.loading=!0,this.$apiCall("api.PrePurchaseInventory.getList",{sku:this.filterParams.sku,page:this.page,rowsPerPage:this.rowsPerPage},t=>{this.loading=!1,9999==t.ErrorCode&&(console.log(t,"222"),this.tableData=t.Data.Results)})},changePageSize(t){this.rowsPerPage=t,this.getData()},toPage(t){this.page=t,this.getData()}},created(){this.getData()},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},i=r,l=a("2877"),n=Object(l["a"])(i,s,o,!1,null,"118fd164",null);e["default"]=n.exports},"7baa":function(t,e,a){},"7ce9":function(t,e,a){},"8dee":function(t,e,a){"use strict";a("0d8f")},"94dc":function(t,e,a){"use strict";a("c946")},ab36:function(t,e,a){"use strict";var s=a("861d"),o=a("9112");t.exports=function(t,e){s(e)&&"cause"in e&&o(t,"cause",e.cause)}},aeb0:function(t,e,a){"use strict";var s=a("9bf2").f;t.exports=function(t,e,a){a in t||s(t,a,{configurable:!0,get:function(){return e[a]},set:function(t){e[a]=t}})}},b980:function(t,e,a){"use strict";var s=a("d039"),o=a("5c6c");t.exports=!s((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},c618:function(t,e,a){"use strict";a("7ce9")},c652:function(t,e,a){},c946:function(t,e,a){},cd9e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel my-custom-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-el-icon-s-goods"}),e("h2",[t._v(t._s(t.$t("transaction.绑定商品列表")))])])]),e("div",{staticClass:"right"})]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{attrs:{span:24}},[e("el-card",[e("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:t.items,stripe:"","row-key":"id",height:"650"}},[e("el-table-column",{attrs:{prop:"customerName",label:t.$t("transaction.客户邮箱")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("b",[t._v(t._s(a.row.customer))])])]}}])}),e("el-table-column",{attrs:{prop:"accountName",label:t.$t("transaction.店铺名称")}}),e("el-table-column",{attrs:{prop:"customerName",label:t.$t("transaction.绑定SKU")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("b",[t._v(t._s(a.row.stock.sku))])])]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.绑定SKU图片")},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.stock.propertyImage,fit:"fit"}})]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.被绑定SKU")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.mainProduct?e.row.mainProduct.name:""))]}}])}),e("el-table-column",{attrs:{label:t.$t("transaction.被绑定SKU图片")},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.mainProduct.imgsJson?t.row.mainProduct.imgsJson[0]:"",fit:"fit"}})]}}])}),e("el-table-column",{attrs:{label:t.$t("mycustomer.operate"),width:"230"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-popconfirm",{key:a.row.id,attrs:{title:"Are you sure you want to delete it?","confirm-button-text":"Confirm","cancel-button-text":"Cancel"},on:{confirm:function(e){return t.cancel(a.row)}}},[e("el-link",{staticStyle:{"margin-left":"5px"},attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v(t._s(t.$t("transaction.删除")))])],1)],1)]}}])})],1)],1)],1)],1),t.items.length?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[e("div",[e("el-pagination",{attrs:{"current-page":t.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":t.pageSizes,"page-size":t.rowsPerPage,total:Number(t.total)},on:{"current-change":t.toPage,"size-change":t.changePageSize}})],1)])],1):t._e()],1),e("el-dialog",{attrs:{title:t.$t("transaction.新增绑定商品"),visible:t.dialogVisibleAdd,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleAdd=e},open:function(e){return t.open()}}},[e("div",[e("el-form",{ref:"replyForm",staticClass:"mg-t-20",attrs:{"label-position":"left"}},[e("el-form-item",{attrs:{label:t.$t("quotation.客户选择"),"label-width":"150px",required:""}},[e("el-select",{attrs:{filterable:"",remote:"","remote-method":t.remoteMethodCustom,loading:t.selectLoading,placeholder:t.$t("myinvoice.pleaseCusName"),clearable:""},on:{change:function(e){return t.filterGetItem()},clear:t.close},model:{value:t.addShopForm.name,callback:function(e){t.$set(t.addShopForm,"name",e)},expression:"addShopForm.name"}},t._l(t.selectArr,(function(t){return e("el-option",{key:t.id,attrs:{label:t.customerName,value:t.customerName}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("quotation.添加被绑定商品"),"label-width":"150px",required:""}},[e("div",{staticClass:"d-flex"},[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.openSelect("1")}}},[t._v(t._s(t.$t("quotation.选择商品")))])],1)]),e("el-form-item",{attrs:{label:t.$t("quotation.商品图片"),"label-width":"150px",required:""}},[e("div",{staticClass:"upload"},[t.addShopForm.imgUrl?e("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.addShopForm.imgUrl,fit:"cover"}}):e("i",{staticClass:"el-icon-plus"})],1)]),e("el-form-item",{attrs:{label:t.$t("quotation.添加绑定商品"),"label-width":"150px",required:""}},[e("div",{staticClass:"d-flex"},[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.openSelect("2")}}},[t._v(t._s(t.$t("quotation.选择商品")))])],1)]),e("el-form-item",{attrs:{label:t.$t("quotation.绑定商品图片"),"label-width":"150px",required:""}},[e("div",{staticClass:"upload"},[t.addShopForm.imgUrlBuild?e("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.addShopForm.imgUrlBuild,fit:"cover"}}):e("i",{staticClass:"el-icon-plus"})],1)])],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("div",{staticClass:"mg-t-20"},[e("el-button",{on:{click:t.handleClose}},[t._v(t._s(t.$t("quotation.取消")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.quote}},[t._v(t._s(t.$t("quotation.确定")))])],1)])]),e("selectProduct",{attrs:{data:t.dialogProductList,up:"up"}})],1)},o=[],r=(a("14d9"),a("4550")),i={data(){return{loading:!1,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("myCustomRowsPerPage")?Number(localStorage.getItem("myInvoiceRowsPerPage")):10,items:[],total:0,totalPage:0,dialogVisibleAdd:!1,selectLoading:!1,selectArr:[],addShopForm:{name:"",imgUrlBuild:"",imgUrl:"",customerId:"",mainProductId:"",productId:"",sku:""},dialogProductList:{item:null,items:[],isShow:!1,variableId:null,type:1}}},components:{selectProduct:r["a"]},watch:{},mounted(){this.getItem()},methods:{getItem(){this.loading=!0,this.$apiCall("api.ShopifyProductBundling.getList",{page:this.page,rowsPerPage:this.rowsPerPage},t=>{this.loading=!1,9999==t.ErrorCode?(this.items=t.Data.Results,this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage)):this.$message({message:t.Message,type:"error"})})},toPage(t){t!=this.$route.query.page&&this.$router.push({query:{page:t}})},open(){this.dialogVisibleAdd=!0},handleClose(){this.addShopForm={name:"",imgUrlBuild:"",imgUrl:"",customerId:"",mainProductId:"",productId:"",sku:""},this.dialogVisibleAdd=!1},changePageSize(t){this.rowsPerPage=t,localStorage.setItem("myCustomRowsPerPage",t),this.getItem()},filterGetItem(){this.selectArr.forEach(t=>{t.customerName==this.addShopForm.name&&(this.addShopForm.customerId=t.customerId)})},close(){this.selectArr=[]},cancel(t){this.$apiCall("api.ShopifyProductBundling.delBunding",{id:t.id},t=>{9999==t.ErrorCode?this.getItem():this.$message({message:t.Message,type:"error"})})},remoteMethodCustom(t){this.selectArr=[],t&&(this.selectLoading=!0,this.$apiCall("api.Relationship.findByVendor",{name:t},t=>{this.selectLoading=!1,9999==t.ErrorCode?this.selectArr=t.Data.Results:this.$message({message:t.Message,type:"error"})}))},getProduct(){this.$apiCall("api.VendorShop.vendorFindProducts",{status:1,page:1,rowsPerPage:10},t=>{if(9999==t.ErrorCode){let e=t.Data.Results.products.map(t=>(t.imgUrlArr=JSON.parse(t.imgUrlJson),t.statusIpt="1"==t.status,t));console.log(e,"tempArr"),e.forEach(t=>{t.stocks&&t.stocks.length&&t.stocks.forEach(e=>{this.$set(e,"name",t.name),this.dialogProductList.items.push(e)}),this.dialogProductList.item.push(t)})}else this.$message({message:t.Message,type:"error"})})},openSelect(t){this.getProduct(),this.dialogProductList.variableId=2==t?21:null,this.dialogProductList.type=t,this.dialogProductList.isShow=!0},quote(){this.addShopForm.customerId?this.addShopForm.mainProductId&&this.addShopForm.productId?this.$apiCall("api.VendorShopProductBundling.addBunding",{customerId:this.addShopForm.customerId,mainProductId:this.addShopForm.mainProductId,productId:this.addShopForm.productId,sku:this.addShopForm.sku},t=>{9999==t.ErrorCode?(this.addShopForm={name:"",imgUrlBuild:"",imgUrl:"",customerId:"",mainProductId:"",productId:"",sku:""},this.dialogVisibleAdd=!1,this.getItem()):this.$message({message:t.Message,type:"error"})}):this.$message({message:this.$t("transaction.请选择商品"),type:"error"}):this.$message({message:this.$t("transaction.请选择客户"),type:"error"})}}},l=i,n=(a("e4aa"),a("2877")),d=Object(n["a"])(l,s,o,!1,null,"72f9449d",null);e["default"]=d.exports},d2bb:function(t,e,a){"use strict";var s=a("7282"),o=a("825a"),r=a("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,a={};try{t=s(Object.prototype,"__proto__","set"),t(a,[]),e=a instanceof Array}catch(i){}return function(a,s){return o(a),r(s),e?t(a,s):a.__proto__=s,a}}():void 0)},d9e2:function(t,e,a){"use strict";var s=a("23e7"),o=a("da84"),r=a("2ba4"),i=a("e5cb"),l="WebAssembly",n=o[l],d=7!==new Error("e",{cause:7}).cause,c=function(t,e){var a={};a[t]=i(t,e,d),s({global:!0,constructor:!0,arity:1,forced:d},a)},u=function(t,e){if(n&&n[t]){var a={};a[t]=i(l+"."+t,e,d),s({target:l,stat:!0,constructor:!0,arity:1,forced:d},a)}};c("Error",(function(t){return function(e){return r(t,this,arguments)}})),c("EvalError",(function(t){return function(e){return r(t,this,arguments)}})),c("RangeError",(function(t){return function(e){return r(t,this,arguments)}})),c("ReferenceError",(function(t){return function(e){return r(t,this,arguments)}})),c("SyntaxError",(function(t){return function(e){return r(t,this,arguments)}})),c("TypeError",(function(t){return function(e){return r(t,this,arguments)}})),c("URIError",(function(t){return function(e){return r(t,this,arguments)}})),u("CompileError",(function(t){return function(e){return r(t,this,arguments)}})),u("LinkError",(function(t){return function(e){return r(t,this,arguments)}})),u("RuntimeError",(function(t){return function(e){return r(t,this,arguments)}}))},e391:function(t,e,a){"use strict";var s=a("577e");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:s(t)}},e4aa:function(t,e,a){"use strict";a("c652")},e5cb:function(t,e,a){"use strict";var s=a("d066"),o=a("1a2d"),r=a("9112"),i=a("3a9b"),l=a("d2bb"),n=a("e893"),d=a("aeb0"),c=a("7156"),u=a("e391"),m=a("ab36"),p=a("6f19"),h=a("83ab"),g=a("c430");t.exports=function(t,e,a,f){var b="stackTraceLimit",y=f?2:1,v=t.split("."),$=v[v.length-1],S=s.apply(null,v);if(S){var w=S.prototype;if(!g&&o(w,"cause")&&delete w.cause,!a)return S;var k=s("Error"),_=e((function(t,e){var a=u(f?e:t,void 0),s=f?new S(t):new S;return void 0!==a&&r(s,"message",a),p(s,_,s.stack,2),this&&i(w,this)&&c(s,this,_),arguments.length>y&&m(s,arguments[y]),s}));if(_.prototype=w,"Error"!==$?l?l(_,k):n(_,k,{name:!0}):h&&b in S&&(d(_,S,b),d(_,S,"prepareStackTrace")),n(_,S),!g)try{w.name!==$&&r(w,"name",$),w.constructor=_}catch(C){}return _}}},ef91:function(t,e,a){"use strict";a("3d01")},f27f:function(t,e,a){"use strict";a("7baa")},f5df:function(t,e,a){"use strict";var s=a("00ee"),o=a("1626"),r=a("c6b6"),i=a("b622"),l=i("toStringTag"),n=Object,d="Arguments"===r(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(a){}};t.exports=s?r:function(t){var e,a,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=c(e=n(t),l))?a:d?r(e):"Object"===(s=r(e))&&o(e.callee)?"Arguments":s}}}]);