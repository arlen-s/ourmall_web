(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["payment-method"],{"28ad0":function(a,s,t){"use strict";t("9da6")},"9da6":function(a,s,t){},bf55:function(a,s,t){"use strict";t.r(s);var e=function(){var a=this,s=a._self._c;return a.$store.state.userInfo.canUseWallet?a._e():s("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:a.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"contentpanel"},[s("div",{ref:"pageHeader",staticClass:"pagetitle"},[a._m(0)]),s("div",{staticClass:"pagebody"},[s("el-card",[s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"open-wrap"},[s("div",{staticClass:"title-flex"},[s("h2",[a._v("支付服务提供商")]),2!=a.$store.state.userInfo.source?s("router-link",{attrs:{to:"/billList"}},[a._v("账单详情")]):a._e()],1),s("el-divider"),s("h3",[a._v("您的商店通过以下提供商接受付款：")]),s("div",{staticClass:"type"},[a._v("PayPal Express Checkout")]),s("el-row",[s("el-col",{attrs:{span:12,offset:2}},[s("el-card",[s("div",{staticClass:"title"},[s("div",{staticClass:"icon1"},[s("i",{staticClass:"iconfont icon-paypal-text"})]),s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("div",{staticClass:"icon2",style:{background:a.payBind.bg}}),s("div",[a._v(" "+a._s(a.payBind.text)+" ")])])]),2==a.$store.state.userInfo.isPayBind?[s("p",{staticClass:"msg"},[a._v("第三方提供商")]),s("p",{staticClass:"msg"},[a._v("通过PayPal接收外币付款")])]:a._e(),1==a.$store.state.userInfo.isPayBind?[s("div",{staticClass:"flex"},[s("div",[a._v("快速结账")]),s("div",[a._v(" 首笔销售后，PayPal 将通过 "+a._s(a.paypal.username)+" 向您发送电子邮件，说明如何设置 PayPal 商家帐户以及如何提现您的资金。 ")])]),s("div",{staticClass:"flex"},[s("div",[a._v("关联账户")]),s("div",[a._v(a._s(a.paypal.username))])]),s("div",{staticStyle:{"padding-top":"30px","font-weight":"600"}},[a._v(" 信用卡、手续费由Paypal收取 ")])]:a._e(),s("div",{staticClass:"tx-right"},[s("el-button",{attrs:{type:"primary"},on:{click:a.open}},[a._v(a._s(a.payBind.btn))])],1)],2)],1)],1)],1)])],1)],1)],1),s("el-dialog",{attrs:{title:"Binding PayPal payment method",visible:a.bindPayParams.isShow,width:"30%"},on:{"update:visible":function(s){return a.$set(a.bindPayParams,"isShow",s)}}},[s("el-divider"),s("el-form",{ref:"ruleForm",attrs:{"label-width":"100px",model:a.bindPayParams,rules:a.rules}},[s("el-form-item",{attrs:{label:"Account：",prop:"username"}},[s("el-input",{staticStyle:{width:"calc(100% - 40px)"},model:{value:a.bindPayParams.username,callback:function(s){a.$set(a.bindPayParams,"username",s)},expression:"bindPayParams.username"}})],1),s("el-form-item",{attrs:{label:"Password：",prop:"password"}},[s("el-input",{staticStyle:{width:"calc(100% - 40px)"},attrs:{type:"password"},model:{value:a.bindPayParams.password,callback:function(s){a.$set(a.bindPayParams,"password",s)},expression:"bindPayParams.password"}})],1),s("el-form-item",{attrs:{label:"signature：",prop:"signature"}},[s("el-input",{staticStyle:{width:"calc(100% - 40px)"},model:{value:a.bindPayParams.signature,callback:function(s){a.$set(a.bindPayParams,"signature",s)},expression:"bindPayParams.signature"}})],1),s("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"info"}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"paypal-tips"},[s("div",{staticClass:"left"},[s("i",{staticClass:"el-icon-s-opportunity"})]),s("div",{staticClass:"right"},[s("h3",[a._v("Tips")]),s("p",[a._v("Log in to your PayPal account -> Account Settings -> API access -> NVP/SOAP API intergration (Classic), get the account information you need ")])])])])]),s("el-form-item",[s("el-button",{staticStyle:{"margin-right":"80px"},on:{click:function(s){a.bindPayParams.isShow=!1}}},[a._v("取消")]),s("el-button",{attrs:{type:"primary",loading:a.bindPayParams.loading},on:{click:function(s){return a.submitForm("ruleForm")}}},[a._v("确定")])],1)],1)],1),s("el-dialog",{attrs:{title:"停用PayPal收款方式",visible:a.closePayParams.isShow,width:"30%"},on:{"update:visible":function(s){return a.$set(a.closePayParams,"isShow",s)}}},[s("el-divider"),s("div",{staticClass:"dialog-body"},[s("p",[a._v(" 停用此收款方式，客户无法进行线上paypal支付， 您确认停用此收款方式？ ")])]),s("el-divider"),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(s){a.closePayParams.isShow=!1}}},[a._v("取消")]),s("el-button",{attrs:{type:"primary",loading:a.closePayParams.loading},on:{click:a.closePayPal}},[a._v("确定")])],1)],1)],1)},i=[function(){var a=this,s=a._self._c;return s("div",{staticClass:"left d-flex"},[s("div",{staticClass:"title mg-r-20"},[s("i",{staticClass:"fa fa-cog",attrs:{"aria-hidden":"true"}}),s("h2",[a._v("设置收款方式")])]),s("div",{staticClass:"mg-t-10"})])}],r={data(){return{loading:!1,paypal:{},bindPayParams:{isShow:!1,loading:!1,username:"",password:"",signature:""},bindPayParamsDefault:"{}",rules:{username:{required:!0,message:"请输入PayPal账户",trigger:"blur"},password:{required:!0,message:"请输入PayPal密码",trigger:"blur"},signature:{required:!0,message:"请输入加密字符串",trigger:"blur"}},closePayParams:{isShow:!1,loading:!1},closePayParamsDefault:"{}"}},computed:{payBind(){let a={};return a=1==this.$store.state.userInfo.isPayBind?{bg:"rgba(0, 168, 84, 1)",text:"已激活",btn:"停用PayPal",tips:"停用成功"}:{bg:"rgba(240, 65, 42, 1)",text:"未激活",btn:"激活PayPal",tips:"激活成功"},a}},mounted(){this.bindPayParamsDefault=JSON.stringify(this.bindPayParams),this.closePayParamsDefault=JSON.stringify(this.closePayParams),this.getPayPal()},methods:{getPayPal(){this.loading=!0,this.$apiCall("api.User.bindAccountPayment",{},a=>{this.loading=!1,"9999"==a.ErrorCode?this.paypal=a.Data.Results:this.$message({message:a.Message,type:"error"})})},open(){1==this.$store.state.userInfo.isPayBind?(this.closePayParams=JSON.parse(this.closePayParamsDefault),this.closePayParams.isShow=!0):"{}"!=JSON.stringify(this.paypal)&&this.paypal?this.closePayPal():(this.bindPayParams=JSON.parse(this.bindPayParamsDefault),this.bindPayParams.isShow=!0)},submitForm(a){this.$refs[a].validate(a=>{a&&(this.bindPayParams.loading=!0,this.$apiCall("api.AccountPayment.vendorBindAccountPayment",{username:this.bindPayParams.username,password:this.bindPayParams.password,signature:this.bindPayParams.signature,accountType:3},a=>{this.bindPayParams.loading=!1,"9999"==a.ErrorCode?(this.$message({message:"绑定成功",type:"success"}),this.getUser(),this.getPayPal(),this.bindPayParams.isShow=!1):this.$message({message:a.Message,type:"error"})}))})},closePayPal(){this.closePayParams.loading=!0,this.$apiCall("api.AccountPayment.changeIsPayBind",{},a=>{this.closePayParams.loading=!1,"9999"==a.ErrorCode?(this.$message({message:this.payBind.tips,type:"success"}),this.getUser(),this.closePayParams.isShow=!1):this.$message({message:a.Message,type:"error"})})},getUser(){this.$apiCall("api.User.checkLoginStatus",{},a=>{localStorage.setItem("apiUserToken",a.Data.Results.apiUserToken),localStorage.setItem("apiUserId",a.Data.Results.id),localStorage.setItem("userInfo",JSON.stringify(a.Data.Results)),localStorage.getItem("userInfo")&&this.$store.commit("setUserInfo",JSON.parse(localStorage.getItem("userInfo")))})}}},l=r,o=(t("28ad0"),t("2877")),n=Object(o["a"])(l,e,i,!1,null,"eb25481c",null);s["default"]=n.exports}}]);