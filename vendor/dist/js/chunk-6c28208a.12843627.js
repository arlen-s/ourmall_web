(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c28208a"],{"0ec9":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"house-box"},[t("el-card",{staticClass:"box-card"},[t("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:e.$t("storehouse.请输入仓库名称")},on:{change:e.search},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}})],1),t("el-row",[t("el-col",{staticClass:"btn-col"},[t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.addHouse}},[e._v(e._s(e.$t("storehouse.创建仓库")))])],1)],1),t("el-card",{staticClass:"box-card"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{align:"center",prop:"id",label:e.$t("storehouse.序号"),width:"180"}}),t("el-table-column",{attrs:{align:"center",prop:"name",label:e.$t("storehouse.仓库名称"),width:"180"}}),t("el-table-column",{attrs:{align:"center",prop:"countryName",label:e.$t("storehouse.国家")}}),t("el-table-column",{attrs:{align:"center",prop:"contact",label:e.$t("storehouse.负责人")}}),t("el-table-column",{attrs:{prop:"telephone",align:"center",label:e.$t("storehouse.联系电话")}}),t("el-table-column",{attrs:{align:"center",label:e.$t("storehouse.状态")},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.status?t("span",[e._v(e._s(e.$t("storehouse.启用")))]):t("span",{staticStyle:{color:"red"}},[e._v(e._s(e.$t("storehouse.停用")))])]}}])}),t("el-table-column",{attrs:{prop:"stockQuantity",align:"center",label:e.$t("storehouse.关联库存SKU数")}}),t("el-table-column",{attrs:{prop:"createdAt",align:"center",label:e.$t("storehouse.创建时间")}}),t("el-table-column",{attrs:{label:e.$t("storehouse.操作"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.edit(a.row)}}},[e._v(e._s(e.$t("storehouse.编辑")))]),t("el-link",{staticStyle:{"margin-right":"5px"},attrs:{type:"danger"},on:{click:function(t){return e.deleteFun(a.row)}}},[e._v(e._s(e.$t("storehouse.删除")))]),1==a.row.status?t("el-link",{attrs:{type:"danger"},on:{click:function(t){return e.handleStatus(a.row)}}},[e._v(e._s(e.$t("storehouse.停用")))]):t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handleStatus(a.row)}}},[e._v(e._s(e.$t("storehouse.启用")))])]}}])})],1)],1),t("el-row",{staticClass:"pagination mg-t-20"},[t("el-pagination",{attrs:{"current-page":e.pagination.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.pagination.pageSize,"page-size":e.pagination.rowsPerPage,total:e.pagination.totalCount},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1),t("createdHouseDialog",{attrs:{dialogAddData:e.dialogObj},on:{addSucc:e.getChild}})],1)},s=[],r=function(){var e=this,t=e._self._c;return t("div",{},[t("el-dialog",{attrs:{title:e.dialogAddData.isEdit?e.$t("storehouse.修改仓库信息"):e.$t("storehouse.创建仓库"),visible:e.dialogAddData.isShow,width:"40%","before-close":e.resetForm},on:{"update:visible":function(t){return e.$set(e.dialogAddData,"isShow",t)},open:function(t){return e.open()}}},[t("el-form",{ref:"form",attrs:{model:e.dialogAddData.data,"label-width":"auto",rules:e.rules}},[t("el-form-item",{attrs:{label:e.$t("storehouse.仓库名称"),required:!0}},[t("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:e.$t("storehouse.请输入仓库名称")},model:{value:e.dialogAddData.form.name,callback:function(t){e.$set(e.dialogAddData.form,"name",t)},expression:"dialogAddData.form.name"}})],1),t("el-form-item",{attrs:{label:e.$t("storehouse.仓库所在国家"),required:!0}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.dialogAddData.form.nation,callback:function(t){e.$set(e.dialogAddData.form,"nation",t)},expression:"dialogAddData.form.nation"}},e._l(e.options,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),t("el-form-item",{attrs:{label:e.$t("storehouse.详细地址"),required:!0}},[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:e.$t("storehouse.请输入")},model:{value:e.dialogAddData.form.address,callback:function(t){e.$set(e.dialogAddData.form,"address",t)},expression:"dialogAddData.form.address"}}),t("p",{staticStyle:{color:"#ccc"}},[e._v(e._s(e.$t("storehouse.用于告知分销商自提地址")))])],1),t("el-form-item",{attrs:{label:e.$t("storehouse.负责人")}},[t("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:e.$t("storehouse.请输入负责人姓名")},model:{value:e.dialogAddData.form.role,callback:function(t){e.$set(e.dialogAddData.form,"role",t)},expression:"dialogAddData.form.role"}})],1),t("el-form-item",{attrs:{label:e.$t("storehouse.联系电话")}},[t("el-input",{staticStyle:{width:"50%"},attrs:{type:"number",placeholder:e.$t("storehouse.请输入联系电话")},model:{value:e.dialogAddData.form.tel,callback:function(t){e.$set(e.dialogAddData.form,"tel",t)},expression:"dialogAddData.form.tel"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.resetForm}},[e._v(e._s(e.$t("storehouse.取消")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("storehouse.创建")))])],1)],1)],1)},i=[],l={props:["dialogAddData"],data(){return{rules:{name:[{required:!0,message:"error",trigger:"blur"}],password:[{required:!0,message:"error",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}]},options:[]}},components:{},computed:{},watch:{},methods:{save(){if(""==this.dialogAddData.form.name)return this.$message.error(this.$t("storehouse.请填写仓库名称")),!1;if(""==this.dialogAddData.form.nation)return this.$message.error(this.$t("storehouse.请选择国家")),!1;if(""==this.dialogAddData.form.address)return this.$message.error(this.$t("storehouse.请填写详细地址")),!1;let e={name:this.dialogAddData.form.name,countryCode:this.dialogAddData.form.nation,contact:this.dialogAddData.form.role,telephone:this.dialogAddData.form.tel,id:this.dialogAddData.form.id,address:this.dialogAddData.form.address};this.$apiCall("api.Warehouse.save",e,e=>{9999==e.ErrorCode?(this.$elementMessage(e.Message,"success"),this.$emit("addSucc")):this.$elementMessage(e.Message,"error")})},resetForm(){this.$emit("addSucc")},open(){let e={};this.$apiCall("api.CountryCode.list",e,e=>{9999==e.ErrorCode&&(this.options=e.Data.Results)})}},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},n=l,d=(a("6efc"),a("2877")),u=Object(d["a"])(n,r,i,!1,null,null,null),c=u.exports,g={components:{createdHouseDialog:c},data(){return{searchVal:"",tableData:[],dialogObj:{isShow:!1,isEdit:!1,form:{name:"",nation:"",role:"",tel:"",id:"",address:""}},pagination:{totalCount:0,pageSize:[10,20,50,100],rowsPerPage:10,page:1},loading:!0}},computed:{},watch:{},methods:{getInfo(){let e={rowsPerPage:this.pagination.rowsPerPage,page:this.pagination.page,name:this.searchVal};this.$apiCall("api.Warehouse.finds",e,e=>{this.loading=!1,9999==e.ErrorCode?(this.pagination.totalCount=Number(e.Data.Pagination.totalCount),this.pagination.page=e.Data.Pagination.page,this.pagination.rowsPerPage=e.Data.Pagination.rowsPerPage,this.tableData=e.Data.Results):this.$message({message:e.Message,type:"error"})})},deleteFun(e){if(e.stockQuantity>0)return void this.$message.error({message:this.$t("storehouse.存在关联SKU，不能删除！")});let t={id:e.id};this.$apiCall("api.Warehouse.delete",t,e=>{this.loading=!1,9999==e.ErrorCode?(this.$message({message:e.Message,type:"success"}),this.getInfo()):this.$message({message:e.Message,type:"error"})})},changePageSize(e){this.pagination.rowsPerPage=e,this.getInfo()},toPage(e){this.pagination.page=e,this.getInfo()},search(){this.getInfo()},edit(e){this.dialogObj={isShow:!0,isEdit:!0,form:{name:e.name,nation:e.countryCode,nationName:e.countryName,role:e.contact,tel:e.telephone,id:e.id,address:e.address}}},addHouse(){this.dialogObj.isShow=!0},handleStatus(e){let t={id:e.id};this.$apiCall("api.Warehouse.change",t,e=>{this.loading=!1,9999==e.ErrorCode?(this.$message({message:e.Message,type:"success"}),this.getInfo()):this.$message({message:e.Message,type:"error"})})},getChild(){this.dialogObj={isShow:!1,form:{name:"",nation:"",role:"",tel:"",address:""}},this.getInfo()}},created(){this.getInfo()},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},h=g,p=(a("490a"),Object(d["a"])(h,o,s,!1,null,"86a03468",null));t["default"]=p.exports},"490a":function(e,t,a){"use strict";a("f87c")},"6efc":function(e,t,a){"use strict";a("7166")},7166:function(e,t,a){},f87c:function(e,t,a){}}]);