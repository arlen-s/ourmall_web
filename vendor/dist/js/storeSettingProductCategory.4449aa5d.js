(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["storeSettingProductCategory"],{"05ff":function(t,e,r){"use strict";r("dd18")},"06c5":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("fb6a"),r("d3b7"),r("b0c0"),r("a630"),r("3ca3"),r("ac1f"),r("00b4");var s=r("6b75");function i(t,e){if(t){if("string"===typeof t)return Object(s["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(s["a"])(t,e):void 0}}},"1c7e":function(t,e,r){var s=r("b622"),i=s("iterator"),n=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){n=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}t.exports=function(t,e){if(!e&&!n)return!1;var r=!1;try{var s={};s[i]=function(){return{next:function(){return{done:r=!0}}}},t(s)}catch(c){}return r}},2909:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var s=r("6b75");function i(t){if(Array.isArray(t))return Object(s["a"])(t)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=r("06c5");r("d9e2");function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||n(t)||Object(o["a"])(t)||a()}},"2a62":function(t,e,r){var s=r("c65b"),i=r("825a"),n=r("dc4a");t.exports=function(t,e,r){var o,a;i(t);try{if(o=n(t,"return"),!o){if("throw"===e)throw r;return r}o=s(o,t)}catch(c){a=!0,o=c}if("throw"===e)throw r;if(a)throw o;return i(o),r}},"308b":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"setting-page"},[r("el-scrollbar",{staticClass:"left"},[r("div",{staticClass:"content"},[r("h1",{on:{click:t.goBack}},[r("el-link",{attrs:{icon:"el-icon-arrow-left",underline:!1}},[t._v(t._s(t.$t("storeSetting.商品类目")))])],1),r("div",{staticClass:"change-content"},[r("div",[t._v(t._s(t.$t("storeSetting.商品类目"))+" "+t._s(t.setting.categorys.length)+"/"+t._s(t.setting.cntPerRows*this.setting.rows))]),r("div",{staticClass:"category-p"},[t._v(t._s(t.$t("storeSetting.如需更换分类封面图可前往商品分类管理进行配置"))+" "),r("router-link",{attrs:{to:"/category-mgr"}},[t._v(t._s(t.$t("storeSetting.立即前往")))])],1),r("draggable",{attrs:{handle:".draggable-i"},model:{value:t.setting.categorys,callback:function(e){t.$set(t.setting,"categorys",e)},expression:"setting.categorys"}},t._l(t.setting.categorys,(function(e,s){return r("div",{key:s,staticClass:"category-select draggable-i"},[r("i",{staticClass:"iconfont icon-draggable"}),r("el-image",{staticClass:"mg-l-5 img",attrs:{src:e.themeUrl,fit:"contain"}}),r("div",{staticClass:"mg-l-5 name"},[t._v(t._s(e.name))]),r("i",{staticClass:"delete el-icon-delete",on:{click:function(e){return t.deleteCategory(s)}}})],1)})),0),t.selectedIds.length<t.setting.rows*t.setting.cntPerRows?r("div",{staticClass:"add-category",on:{click:t.addCategory}},[r("i",{staticClass:"el-icon-circle-plus"}),r("div",{staticClass:"mg-l-5"},[t._v(t._s(t.$t("storeSetting.添加商品分类")))])]):r("div",{staticClass:"notice"},[t._v(" "+t._s(t.$t("storeSetting.类目已经达到上限请先删除再添加"))+" ")])],1),r("div",{staticClass:"change-content mt-20"},[r("el-form",{ref:"category-form",attrs:{size:"mini"}},[r("el-form-item",{attrs:{label:t.$t("storeSetting.标题")}},[r("el-input",{staticStyle:{width:"210px"},model:{value:t.setting.title,callback:function(e){t.$set(t.setting,"title",e)},expression:"setting.title"}})],1),r("el-form-item",{attrs:{label:t.$t("storeSetting.展示排数(最多可展示4排)")}},[r("el-input-number",{staticStyle:{width:"210px"},attrs:{"controls-position":"right",min:1,max:4},on:{change:t.rowsChange},model:{value:t.setting.rows,callback:function(e){t.$set(t.setting,"rows",e)},expression:"setting.rows"}})],1),r("el-form-item",{attrs:{label:t.$t("storeSetting.每排展示个数(每排最多可展示4排)")}},[r("el-input-number",{staticStyle:{width:"210px"},attrs:{"controls-position":"right",min:1,max:6},on:{change:t.perChange},model:{value:t.setting.cntPerRows,callback:function(e){t.$set(t.setting,"cntPerRows",e)},expression:"setting.cntPerRows"}})],1),r("el-form-item",{attrs:{label:t.$t("storeSetting.更多按钮文案")}},[r("el-input",{staticStyle:{width:"210px"},model:{value:t.setting.moreText,callback:function(e){t.$set(t.setting,"moreText",e)},expression:"setting.moreText"}})],1),r("el-form-item",{attrs:{label:t.$t("storeSetting.图片比例")}},[r("el-select",{staticStyle:{width:"210px"},model:{value:t.setting.proportion,callback:function(e){t.$set(t.setting,"proportion",e)},expression:"setting.proportion"}},[r("el-option",{attrs:{value:"1",label:"1:1"}}),r("el-option",{attrs:{value:"1.5",label:"2:3"}}),r("el-option",{attrs:{value:"0.666",label:"3:2"}}),r("el-option",{attrs:{value:"1.333",label:"3:4"}}),r("el-option",{attrs:{value:"0.75",label:"4:3"}})],1)],1),r("el-form-item",{attrs:{label:t.$t("storeSetting.图片填充方式")}},[r("el-select",{staticStyle:{width:"210px"},model:{value:t.setting.fillWay,callback:function(e){t.$set(t.setting,"fillWay",e)},expression:"setting.fillWay"}},[r("el-option",{attrs:{value:"fill",label:"$t('storeSetting.填充')"}}),r("el-option",{attrs:{value:"contain",label:"$t('storeSetting.适应')"}})],1)],1),r("el-form-item",{attrs:{label:t.$t("storeSetting.链接打开方式")}},[r("el-radio-group",{model:{value:t.setting.target,callback:function(e){t.$set(t.setting,"target",e)},expression:"setting.target"}},[r("el-radio",{attrs:{label:"_self"}},[t._v(t._s(t.$t("storeSetting.当前页面打开链接")))]),r("el-radio",{attrs:{label:"_blank"}},[t._v(t._s(t.$t("storeSetting.新开窗口打开链接")))])],1)],1)],1)],1)])]),r("div",{staticClass:"action"},[r("el-button",{attrs:{type:"danger",size:"medium"},on:{click:t.del}},[t._v(t._s(t.$t("storeSetting.删除该组件")))]),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.saveData}},[t._v(t._s(t.$t("storeSetting.完成")))])],1),r("el-scrollbar",{ref:"rightBox",staticClass:"right"},[r("div",{staticClass:"content"},[r("demoHeader",{attrs:{data:t.$store.state.configJson.header,headerMenu:t.headerMenu}}),r("demoBody",{attrs:{data:t.setting,header:t.$store.state.configJson.header}}),r("demoFooter",{attrs:{setting:t.$store.state.configJson.footer}})],1)]),r("el-dialog",{attrs:{title:t.$t("storeSetting.商品分类"),width:"300px",visible:t.addCategoryVisible},on:{"update:visible":function(e){t.addCategoryVisible=e}}},[r("div",{staticClass:"dialog-area"},[r("div",{staticClass:"search"},[r("el-input",{attrs:{size:"mini","suffix-icon":"el-icon-search"},on:{input:t.searchCategory},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),r("el-scrollbar",[t.displayItems.length>0?r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.cLoading,expression:"cLoading"}],staticClass:"item-area"},[t._l(t.displayItems,(function(e,s){return[-1==t.selectedIds.indexOf(e.id)?r("div",{key:s},[r("div",{staticClass:"item-list"},[r("div",{staticClass:"left"},[r("el-image",{staticClass:"image",attrs:{fit:"contain",src:e.themeUrl}}),r("div",{staticClass:"name"},[t._v(t._s(e.name))])],1),r("div",[r("el-checkbox",{attrs:{label:e},model:{value:t.selectedItems,callback:function(e){t.selectedItems=e},expression:"selectedItems"}},[r("div",{staticStyle:{display:"none"}},[t._v("1")])])],1)]),r("el-divider")],1):t._e()]})),t.selectedIds.length==t.displayItems.length?r("div",{staticClass:"no-category"},[t._v(" "+t._s(t.$t("storeSetting.暂无更多类目"))+" ")]):t._e(),r("div",{staticStyle:{height:"20px"}})],2):t._e()]),0==t.displayItems.length?r("div",{staticClass:"no-category"},[t._v(" "+t._s(t.$t("storeSetting.暂无类目"))+" "),r("router-link",{attrs:{to:"/category-mgr"}},[t._v(t._s(t.$t("storeSetting.前去添加")))])],1):t._e(),r("div",{staticClass:"control"},[r("router-link",{staticClass:"mg-r-20",attrs:{to:"/category-mgr"}},[t._v(t._s(t.$t("storeSetting.管理商品类目")))]),r("i",{staticClass:"refresh mg-r-20 el-icon-refresh",on:{click:t.getCategory}}),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addCategoryHandle}},[t._v(t._s(t.$t("storeSetting.添加"))+" ")])],1)],1)])],1)},i=[],n=r("2909"),o=(r("a434"),r("e9c4"),r("ac1f"),r("5319"),r("d3b7"),r("159b"),r("b0c0"),r("4e82"),r("4f85")),a=r("826e"),c=r("db46"),l=r("8c3c"),u=r("b76a"),d=r.n(u),g={data:function(){return{keyword:"",selectedIds:[],cLoading:!1,selectedItems:[],headerMenu:[],addCategoryVisible:!1,editorOption:{modules:{syntax:{highlight:function(t){return hljs.highlightAuto(t).value}},toolbar:{container:[["bold","italic","underline","strike"]]}},placeholder:this.$t("goodsEdit.编辑商品描述")},isSave:!1,setting:{cid:this.$route.query.cid,type:"productCategory",title:"",rows:2,cntPerRows:3,moreText:"",proportion:"1",fillWay:"cover",target:"_blank",categorys:[]},items:[],exist:!1,displayItems:[]}},components:{Category:o["a"],demoHeader:a["a"],draggable:d.a,demoBody:l["a"],demoFooter:c["a"]},beforeRouteLeave:function(t,e,r){if(this.isSave)r();else{var s=confirm(this.$t("logistics.当前页面还未保存，确定要离开吗?"));s?r():r(!1)}},created:function(){this.getCategory()},methods:{rowsChange:function(t,e){t*this.setting.cntPerRows<this.setting.categorys.length&&(this.setting.categorys.splice(t*this.setting.cntPerRows-1,this.setting.categorys.length-t*this.setting.cntPerRows),this.selectedIds.splice(t*this.setting.cntPerRows-1,this.selectedIds.length-t*this.setting.cntPerRows))},perChange:function(t,e){t*this.setting.rows<this.setting.categorys.length&&(this.setting.categorys.splice(t*this.setting.rows-1,this.setting.categorys.length-t*this.setting.rows),this.selectedIds.splice(t*this.setting.rows-1,this.selectedIds.length-t*this.setting.rows))},del:function(){var t=this;this.isSave=!0,this.$store.commit("delComponent",this.setting.cid),this.setting=JSON.parse(JSON.stringify(this.$store.state.configJson)),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},(function(e){9999==e.ErrorCode?(t.$elementMessage("删除成功","success"),t.$router.replace({name:"storeSettingMain"})):t.$message({message:e.Message,type:"error"})}))},deleteCategory:function(t){this.selectedIds.splice(t,1),this.setting.categorys.splice(t,1)},searchCategory:function(t){var e=[];this.items.forEach((function(r){r.name.indexOf(t)>-1&&e.push(r)})),this.displayItems=e,console.log(this.displayItems)},addCategoryHandle:function(){var t,e=this,r=this.setting.rows*this.setting.cntPerRows;this.selectedIds.length+this.selectedItems.length>r?this.$elementMessage(this.$t("storeSetting.超出限制数量"),"error"):(this.selectedItems.forEach((function(t){e.selectedIds.push(t.id)})),(t=this.setting.categorys).push.apply(t,Object(n["a"])(this.selectedItems)),this.selectedItems=[],this.addCategoryVisible=!1)},getCategory:function(){var t=this;this.cLoading=!0,this.$apiCall("api.ProductCategory.findByUser",{level:1},(function(e){setTimeout((function(){t.cLoading=!1}),500),9999==e.ErrorCode&&(t.items=e.Data.Results,t.displayItems=e.Data.Results,t.$apiCall("api.VendorShop.getShopConfig",{},(function(e){9999==e.ErrorCode&&0!==e.Data.Results.length&&(e.Data.Results.sort.forEach((function(e){if(e.cid==t.$route.query.cid){var r=[];e.categorys.forEach((function(e){t.items.forEach((function(s){e.id==s.id&&(r.push(s),t.selectedIds.push(s.id))}))})),e.categorys=r,t.setting=JSON.parse(JSON.stringify(e)),t.exist=!0,t.$nextTick((function(){t.$refs.rightBox.wrap.scrollTop=document.getElementById("row".concat(e.cid)).offsetTop}))}})),t.$store.commit("getShopConfig",e.Data.Results),t.exist||(t.setting={cid:t.$route.query.cid,type:"productCategory",title:"",rows:2,cntPerRows:3,moreText:"",proportion:"1",fillWay:"cover",target:"_blank",categorys:[]},t.exist=!0,t.$store.commit("addStoreComponent",t.setting)))})))}))},addCategory:function(){this.addCategoryVisible=!0},goBack:function(){this.$router.push({name:"storeSettingMain"})},saveData:function(){var t=this;this.isSave=!0,this.exist&&(this.$store.commit("setStoreComponent",this.setting),this.$elementMessage("保存成功","success")),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},(function(e){9999==e.ErrorCode?t.$elementMessage("保存成功","success"):t.$message({message:e.Message,type:"error"})}))}}},f=g,h=(r("be9f"),r("05ff"),r("2877")),p=Object(h["a"])(f,s,i,!1,null,"1c2433f1",null);e["default"]=p.exports},"35a1":function(t,e,r){var s=r("f5df"),i=r("dc4a"),n=r("3f8c"),o=r("b622"),a=o("iterator");t.exports=function(t){if(void 0!=t)return i(t,a)||i(t,"@@iterator")||n[s(t)]}},"40f6":function(t,e,r){},"4df4":function(t,e,r){"use strict";var s=r("0366"),i=r("c65b"),n=r("7b0b"),o=r("9bdd"),a=r("e95a"),c=r("68ee"),l=r("07fa"),u=r("8418"),d=r("9a1f"),g=r("35a1"),f=Array;t.exports=function(t){var e=n(t),r=c(this),h=arguments.length,p=h>1?arguments[1]:void 0,m=void 0!==p;m&&(p=s(p,h>2?arguments[2]:void 0));var v,y,b,C,w,S,$=g(e),x=0;if(!$||this===f&&a($))for(v=l(e),y=r?new this(v):f(v);v>x;x++)S=m?p(e[x],x):e[x],u(y,x,S);else for(C=d(e,$),w=C.next,y=r?new this:[];!(b=i(w,C)).done;x++)S=m?o(C,p,[b.value,x],!0):b.value,u(y,x,S);return y.length=x,y}},"6b75":function(t,e,r){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}r.d(e,"a",(function(){return s}))},"9a1f":function(t,e,r){var s=r("c65b"),i=r("59ed"),n=r("825a"),o=r("0d51"),a=r("35a1"),c=TypeError;t.exports=function(t,e){var r=arguments.length<2?a(t):e;if(i(r))return n(s(r,t));throw c(o(t)+" is not iterable")}},"9bdd":function(t,e,r){var s=r("825a"),i=r("2a62");t.exports=function(t,e,r,n){try{return n?e(s(r)[0],r[1]):e(r)}catch(o){i(t,"throw",o)}}},a630:function(t,e,r){var s=r("23e7"),i=r("4df4"),n=r("1c7e"),o=!n((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:o},{from:i})},ab36:function(t,e,r){var s=r("861d"),i=r("9112");t.exports=function(t,e){s(e)&&"cause"in e&&i(t,"cause",e.cause)}},aeb0:function(t,e,r){var s=r("9bf2").f;t.exports=function(t,e,r){r in t||s(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},b980:function(t,e,r){var s=r("d039"),i=r("5c6c");t.exports=!s((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",i(1,7)),7!==t.stack)}))},be9f:function(t,e,r){"use strict";r("40f6")},c770:function(t,e,r){var s=r("e330"),i=Error,n=s("".replace),o=function(t){return String(i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(o);t.exports=function(t,e){if(c&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=n(t,a,"");return t}},d9e2:function(t,e,r){var s=r("23e7"),i=r("da84"),n=r("2ba4"),o=r("e5cb"),a="WebAssembly",c=i[a],l=7!==Error("e",{cause:7}).cause,u=function(t,e){var r={};r[t]=o(t,e,l),s({global:!0,constructor:!0,arity:1,forced:l},r)},d=function(t,e){if(c&&c[t]){var r={};r[t]=o(a+"."+t,e,l),s({target:a,stat:!0,constructor:!0,arity:1,forced:l},r)}};u("Error",(function(t){return function(e){return n(t,this,arguments)}})),u("EvalError",(function(t){return function(e){return n(t,this,arguments)}})),u("RangeError",(function(t){return function(e){return n(t,this,arguments)}})),u("ReferenceError",(function(t){return function(e){return n(t,this,arguments)}})),u("SyntaxError",(function(t){return function(e){return n(t,this,arguments)}})),u("TypeError",(function(t){return function(e){return n(t,this,arguments)}})),u("URIError",(function(t){return function(e){return n(t,this,arguments)}})),d("CompileError",(function(t){return function(e){return n(t,this,arguments)}})),d("LinkError",(function(t){return function(e){return n(t,this,arguments)}})),d("RuntimeError",(function(t){return function(e){return n(t,this,arguments)}}))},dd18:function(t,e,r){},e391:function(t,e,r){var s=r("577e");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:s(t)}},e5cb:function(t,e,r){"use strict";var s=r("d066"),i=r("1a2d"),n=r("9112"),o=r("3a9b"),a=r("d2bb"),c=r("e893"),l=r("aeb0"),u=r("7156"),d=r("e391"),g=r("ab36"),f=r("c770"),h=r("b980"),p=r("83ab"),m=r("c430");t.exports=function(t,e,r,v){var y="stackTraceLimit",b=v?2:1,C=t.split("."),w=C[C.length-1],S=s.apply(null,C);if(S){var $=S.prototype;if(!m&&i($,"cause")&&delete $.cause,!r)return S;var x=s("Error"),_=e((function(t,e){var r=d(v?e:t,void 0),s=v?new S(t):new S;return void 0!==r&&n(s,"message",r),h&&n(s,"stack",f(s.stack,2)),this&&o($,this)&&u(s,this,_),arguments.length>b&&g(s,arguments[b]),s}));if(_.prototype=$,"Error"!==w?a?a(_,x):c(_,x,{name:!0}):p&&y in S&&(l(_,S,y),l(_,S,"prepareStackTrace")),c(_,S),!m)try{$.name!==w&&n($,"name",w),$.constructor=_}catch(k){}return _}}},e95a:function(t,e,r){var s=r("b622"),i=r("3f8c"),n=s("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[n]===t)}},fb6a:function(t,e,r){"use strict";var s=r("23e7"),i=r("e8b5"),n=r("68ee"),o=r("861d"),a=r("23cb"),c=r("07fa"),l=r("fc6a"),u=r("8418"),d=r("b622"),g=r("1dde"),f=r("f36a"),h=g("slice"),p=d("species"),m=Array,v=Math.max;s({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var r,s,d,g=l(this),h=c(g),y=a(t,h),b=a(void 0===e?h:e,h);if(i(g)&&(r=g.constructor,n(r)&&(r===m||i(r.prototype))?r=void 0:o(r)&&(r=r[p],null===r&&(r=void 0)),r===m||void 0===r))return f(g,y,b);for(s=new(void 0===r?m:r)(v(b-y,0)),d=0;y<b;y++,d++)y in g&&u(s,d,g[y]);return s.length=d,s}})}}]);