(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["billDetails"],{"060a":function(t,a,i){t.exports=i.p+"img/alipay.a10c0d49.png"},"0cac":function(t,a,i){"use strict";i.r(a);var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"contentpanel transaction-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.goto()}}},[t._v(t._s(t.$t("bill.返回到购买套餐")))]),a("span",{staticStyle:{margin:"0 20px"}},[t._v("/")]),a("h2",[t._v(t._s(t.$t("bill.账单详情")))])],1)]),a("div",{staticClass:"right"})]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pagebody"},[a("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("p",[t._v(t._s(t.$t("bill.订单信息")))]),a("el-divider"),a("div",{staticClass:"info"},[a("div",{staticClass:"tit"},[t._v(t._s(t.$t("bill.订单编号：")))]),a("div",{staticClass:"txt"},[t._v(t._s(t.data.payCode))])]),a("div",{staticClass:"info"},[a("div",{staticClass:"tit"},[t._v(t._s(t.$t("bill.购买内容：")))]),a("div",{staticClass:"txt"},[t._v(t._s(t.data.tradeName))])]),a("div",{staticClass:"info"},[a("div",{staticClass:"tit"},[t._v(t._s(t.$t("bill.支付方式：")))]),a("div",{staticClass:"txt"},[a("img",{attrs:{src:i("060a")}})])]),a("div",{staticClass:"amount"},[a("div",{staticClass:"tit"},[t._v(t._s(t.$t("bill.订单金额")))]),a("div",{staticClass:"num"},[t._v("¥"+t._s(t.data.amount))])])],1),a("el-card",{staticClass:"mg-t-30"},[a("div",{staticClass:"qrcode"},[a("iframe",{attrs:{width:"150",height:"150",frameborder:"0",scrolling:"auto",srcdoc:t.data.payurl}})]),a("div",{staticClass:"tips"},[a("div",{staticClass:"icon"},[a("i",{staticClass:"iconfont icon-scan"})]),a("div",{staticClass:"txt"},[t._v(t._s(t.$t("bill.打开手机支付宝扫一扫继续付款")))])])])],1)],1)],1)])},e=[],l=(i("14d9"),{data(){return{loading:!1,data:{},interval:null}},mounted(){this.getDetail()},methods:{goto(){this.$route.query.serviceType?this.$router.push({path:"/pricingUp",query:{serviceType:this.$route.query.serviceType}}):this.$router.push({path:"/pricingUp"})},getDetail(){let t=/^sandbox/;this.$route.query.vipType?(this.loading=!0,this.$apiCall("api.Admin.payVip",{vipType:this.$route.query.vipType},a=>{if(this.loading=!1,"9999"==a.ErrorCode){if(this.data=a.Data.Results,t.test(window.location.host)){const{href:t}=this.$router.resolve({name:"Alipay",query:{htmlData:a.Data.Results.payurl}});window.open(t,"_blank")}this.checkPayStatus()}})):(this.loading=!0,this.$apiCall("api.Admin.payService",{serviceType:this.$route.query.serviceType,number:this.$route.query.number},a=>{if(this.loading=!1,"9999"==a.ErrorCode){if(this.data=a.Data.Results,t.test(window.location.host)){const{href:t}=this.$router.resolve({name:"Alipay",query:{htmlData:a.Data.Results.payurl}});window.open(t,"_blank")}this.checkPayStatus()}}))},checkPayStatus(){this.interval=setInterval(()=>{this.$apiCall("api.Admin.checkPayStatus",{code:this.data.payCode},t=>{"9999"==t.ErrorCode&&2==t.Data.Results&&(clearInterval(this.interval),this.interval=null,this.$elementMessage(this.$t("bill.支付成功，3秒后自动跳到首页"),"success"),setTimeout(()=>{this.$root.$children[0].getVipDetail(),this.$router.replace("/dashboard")},3e3))})},2e3)}},beforeDestroy(){clearInterval(this.interval),this.interval=null}}),r=l,n=(i("6b5b"),i("2877")),o=Object(n["a"])(r,s,e,!1,null,"94ba739a",null);a["default"]=o.exports},2237:function(t,a,i){},"6b5b":function(t,a,i){"use strict";i("2237")}}]);