(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderQuote"],{"0fd7":function(t,e,a){"use strict";a("fd9e")},"2ea1":function(t,e,a){},3933:function(t,e,a){},"42ae":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel transaction-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("el-link",{attrs:{type:"primary"},on:{click:t.goback}},[t._v(t._s(t.$t("orders.back")))]),e("span",{staticStyle:{margin:"0 20px"}},[t._v("/")]),e("h2",[t._v(t._s(t.$t("orders.Made")))])],1)]),e("div",{staticClass:"right"})]),e("div",{staticClass:"pagebody mg-t-30"},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{staticClass:"mg-b-30 mg-t-10",attrs:{span:24}},[e("el-card",[e("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.items,"max-height":"450"}},[e("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"d-flex"},[e("img",{attrs:{src:a.row.imgUrl,width:"60",height:"60"}}),e("div",{staticClass:"mg-l-20"},[e("p",[t._v(t._s(a.row.name))]),e("p",[t._v("Shop SPU: "+t._s(a.row.spu))]),e("p",[t._v("Shop SKU: "+t._s(a.row.sku))])])])]}}])}),e("el-table-column",{attrs:{prop:"quantity",label:t.$t("orders.qty"),width:"200"}}),e("el-table-column",{attrs:{label:t.$t("orders.price"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.currency)+" "+t._s(a.row.price||0))])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.operate"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:t.goto}},[t._v(" "+t._s(t.$t("orders.putaway"))+" ")]),e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(e){return t.openRelate(a.row)}}},[t._v(" "+t._s(t.$t("orders.relate"))+" ")]),e("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(e){return t.openDetail(a.row)}}},[t._v(" "+t._s(t.$t("orders.查看详情"))+" ")])],1)]}}])})],1)],1)],1)],1)],1),e("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:20}}),e("dialogRelate",{attrs:{relateData:t.dialogRelateInfo},on:{relateFn:t.relateFn}}),e("dialogDetail",{attrs:{detailData:t.dialogDetailInfo}})],1)},i=[],l=(a("14d9"),a("8c6c")),o=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.detailData.isShow,title:"",width:"800px"},on:{"update:visible":function(e){return t.$set(t.detailData,"isShow",e)},open:function(e){return t.open()}}},[e("div",{staticClass:"d-body",staticStyle:{margin:"0 20px 20px"}},[e("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("orders.基础商品"),name:"1"}},[e("el-form",{ref:"baseForm",attrs:{"label-position":"left"}},[e("el-form-item",{staticClass:"img-box",attrs:{label:t.$t("quotation.图片："),"label-width":"150px"}},[t.detailData.data.imgUrlArr?e("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[e("div",{staticClass:"upload"},[e("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.detailData.data.imgUrlArr[0],"z-index":9999,fit:"cover"}})],1)]):t._e()]),e("el-form-item",{attrs:{label:t.$t("quotation.商品名称")+":","label-width":"150px"}},[t.detailData.data.name?e("span",[t._v(t._s(t.detailData.data.name))]):e("span",[t._v("---")])]),e("el-form-item",{attrs:{label:t.$t("quotation.描述")+":","label-width":"150px"}},[t.detailData.data.description?e("quill-editor",{ref:"goodsEditor",attrs:{options:t.editorOption},model:{value:t.detailData.data.description,callback:function(e){t.$set(t.detailData.data,"description",e)},expression:"detailData.data.description"}}):e("span",[t._v("---")])],1)],1)],1),e("el-tab-pane",{attrs:{label:t.$t("orders.多属性"),name:"2"}},[e("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:t.detailData.data.stocks}},[e("el-table-column",{attrs:{label:t.$t("quotation.图片")},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.propertyImage?e("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},[e("div",{staticClass:"upload"},[e("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a.row.propertyImage,"z-index":9999,fit:"cover"}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"})])])],1)]):t._e()]}}])}),e("el-table-column",{attrs:{label:"SKU"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v(" "+t._s(a.row.sku||"--")+" ")])]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.属性")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v(" "+t._s(a.row.propertyValue||"--")+" ")])]}}])}),e("el-table-column",{attrs:{label:t.$t("quotation.价格")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v(" "+t._s(a.row.currency||"")+" "+t._s(a.row.price||"--")+" ")])]}}])})],1)],1),e("el-tab-pane",{attrs:{label:t.$t("orders.图片集"),name:"3"}},[3==t.activeName&&t.detailData.data.imgUrlArr.length?e("div",{staticClass:"d-flex",staticStyle:{"flex-wrap":"wrap"}},t._l(t.detailData.data.imgUrlArr,(function(a){return e("div",{key:a,staticClass:"upload"},[e("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a,"z-index":9999,fit:"cover",lazy:""}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" Loading"),e("span",{staticClass:"dot"},[t._v("...")])]),e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"})])])],1)})),0):t._e()])],1)],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-link",{attrs:{type:"danger"}},[t._v("注意：shopify商品下架会导致复制的商品图片丢失！")]),e("el-button",{on:{click:function(e){t.detailData.isShow=!1}}},[t._v(t._s(t.$t("orders.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.copy()}}},[t._v(t._s(t.$t("orders.复制商品")))])],1)],1)},r=[],n=a("65b3"),d=(a("a753"),a("8096"),a("14e1"),a("953d"));d["Quill"].register("modules/eeSourceBtn",n["a"]);var c={props:["detailData"],data(){return{editorOption:{modules:{toolbar:{container:[]}}},activeName:"1",vendorId:localStorage.getItem("vendorId")}},components:{quillEditor:d["quillEditor"]},methods:{open(){this.activeName="1"},copy(){if("148982"!=this.vendorId&&"146428"!=this.vendorId&&"144875"!=this.vendorId&&"144843"!=this.vendorId&&"143779"!=this.vendorId&&"143654"!=this.vendorId&&"74"!=this.vendorId){this.$router.push({name:"AddGoods2",query:{id:this.detailData.variableId}});let t=this.$router.resolve({name:"AddGoods2",query:{id:this.detailData.variableId,isCopy:1}});window.open(t.href,"_blank")}else{let t=this.$router.resolve({name:"AddGoods",query:{id:this.detailData.variableId,isCopy:1}});window.open(t.href,"_blank")}}}},u=c,h=(a("0fd7"),a("2877")),p=Object(h["a"])(u,o,r,!1,null,"a088eac0",null),g=p.exports,m={data(){return{dialogRelateInfo:{isShow:!1,loading:!1,items:[],Pagination:{},item:"",list:[]},dialogRelateInfoDefault:"{}",dialogDetailInfo:{isShow:!1,loading:!1,data:{},variableId:""},dialogDetailInfoDefault:"{}",items:[]}},components:{dialogRelate:l["a"],dialogDetail:g},watch:{},mounted(){this.dialogRelateInfoDefault=JSON.stringify(this.dialogRelateInfo),this.dialogDetailInfoDefault=JSON.stringify(this.dialogDetailInfo),this.getItems()},methods:{openDetail(t){this.$showLoading(),this.$apiCall("api.ShopifyOrder.getCustomerProductDetail",{variableId:t.variableId},e=>{"9999"==e.ErrorCode?(this.dialogDetailInfo=JSON.parse(this.dialogDetailInfoDefault),this.dialogDetailInfo.data=e.Data.Results,this.$set(this.dialogDetailInfo.data,"imgUrlArr",this.dialogDetailInfo.data.imgsJson?JSON.parse(this.dialogDetailInfo.data.imgsJson):[]),this.dialogDetailInfo.variableId=t.variableId,this.dialogDetailInfo.isShow=!0):this.$elementMessage(e.Message,"error"),this.$hideLoading()})},goback(){this.$router.push({path:"ordersManage/2/1"})},getItems(){let t=localStorage.getItem("needQuoteOrders")?JSON.parse(localStorage.getItem("needQuoteOrders")):"";t&&(this.items=t||[])},goto(){if("148982"!=this.vendorId&&"146428"!=this.vendorId&&"144875"!=this.vendorId&&"144843"!=this.vendorId&&"143779"!=this.vendorId&&"143654"!=this.vendorId&&"74"!=this.vendorId){let t=this.$router.resolve({name:"AddGoods2"});window.open(t.href,"_blank")}else{let t=this.$router.resolve({name:"AddGoods"});window.open(t.href,"_blank")}},openRelate(t){this.$showLoading(),this.$apiCall("api.VendorShop.vendorFindProducts",{page:1,rowsPerPage:10,status:1},e=>{if("9999"==e.ErrorCode){if(!e.Data.Results.products||!e.Data.Results.products.length)return this.$hideLoading(),void this.$elementMessage("No data","error");this.dialogRelateInfo=JSON.parse(this.dialogRelateInfoDefault),this.dialogRelateInfo.isShow=!0,this.dialogRelateInfo.item=t,this.dialogRelateInfo.Pagination=e.Data.Pagination,this.dialogRelateInfo.items=[],this.dialogRelateInfo.list=[],e.Data.Results.products.forEach(t=>{t.stocks&&t.stocks.length&&t.stocks.forEach(e=>{this.$set(e,"name",t.name),this.dialogRelateInfo.items.push(e)}),this.dialogRelateInfo.list.push(t)})}else this.$elementMessage(e.Message,"error");this.$hideLoading()})},relateFn(t){this.$showLoading(),this.$apiCall("api.ShopifyOrder.setSkuRelation",{customerSku:this.dialogRelateInfo.item.variableId,customerId:this.dialogRelateInfo.item.customerId,vendorSku:t.sku,warehouseId:t.Hid},t=>{"9999"==t.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.dialogRelateInfo=JSON.parse(this.dialogRelateInfoDefault),this.updateItems()):this.$elementMessage(t.Message,"error"),this.$hideLoading()})},updateItems(){this.$apiCall("api.ShopifyOrder.getOfferShopifyItems",{ids:this.$route.params.ids},t=>{if("9999"==t.ErrorCode){if(!t.Data||!t.Data.Results)return void this.$router.push({path:"ordersManage/2/1"});let e=Object.values(t.Data.Results);if(!e||!e.length)return void this.$router.push({path:"ordersManage/2/1"});this.items=e||[]}else this.$router.push({path:"ordersManage/2/1"})})}}},f=m,b=Object(h["a"])(f,s,i,!1,null,"44385b70",null);e["default"]=b.exports},"65b3":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));class s{constructor(t,e){let a=this;a.addDom(t),t.on("text-change",(e,s,i)=>{a.replaceSourceEditorContent(t)});let s=document.createElement("button");s.innerHTML=">_",s.onclick=function(){a.showSourceEditor(t)};let i=document.createElement("span");i.setAttribute("class","ql-formats ee-flag-source"),i.appendChild(s),t.container.previousSibling.appendChild(i)}addDom(t){if(!t.container.querySelector(".ql-ee-source")){var e=document.createElement("textarea");e.style.cssText="width: 100%;margin: 0px;background: rgb(29, 29, 29);box-sizing: border-box;color: rgb(204, 204, 204);font-size: 13px;outline: none;padding: 12px 15px;line-height: 1.42;font-family: Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;position: absolute;top: 0;bottom: 0;border: none;";var a=t.addContainer("ql-ee-source");a.style.cssText="display:none",a.appendChild(e)}}replaceSourceEditorContent(t){let e=t.container.querySelector(".ql-editor"),a=t.container.querySelector(".ql-ee-source"),s=a.querySelector("textarea");s.value=e.innerHTML}showSourceEditor(t){let e=t.container.querySelector(".ql-editor"),a=t.container.querySelector(".ql-ee-source"),s=a.querySelector("textarea");"none"===a.style.display?(a.style.display="",s.value=e.innerHTML):(a.style.display="none",e.innerHTML=s.value)}}window.eeSourceBtn=s},"72ff":function(t,e,a){"use strict";a("3933")},8953:function(t,e,a){},"8c6c":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.relateData.isShow,title:t.$t("orders.associated"),width:"800px"},on:{"update:visible":function(e){return t.$set(t.relateData,"isShow",e)},open:t.open}},[e("el-divider"),e("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[e("div",{staticClass:"d-flex",staticStyle:{"margin-bottom":"20px"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:t.$t("orders.spuHolder"),clearable:""},on:{clear:function(e){return t.clearFilter("spu")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.spu,callback:function(e){t.spu=e},expression:"spu"}}),e("el-input",{staticStyle:{width:"200px",margin:"0 20px"},attrs:{placeholder:t.$t("orders.skuHolder"),clearable:""},on:{clear:function(e){return t.clearFilter("sku")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.sku,callback:function(e){t.sku=e},expression:"sku"}}),e("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:t.$t("orders.nameHolder"),clearable:""},on:{clear:function(e){return t.clearFilter("name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("orders.filter")))])],1),e("div",{staticClass:"d-flex",staticStyle:{"margin-bottom":"20px"}},[e("el-select",{attrs:{placeholder:"请选择仓库"},model:{value:t.warehouse,callback:function(e){t.warehouse=e},expression:"warehouse"}},t._l(t.warehouseList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-table",{staticClass:"no-hover",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.list,height:"350"}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"","show-header":!1,data:a.row.stocks}},[e("el-table-column",{attrs:{label:t.$t("orders.select"),width:"55"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-radio",{attrs:{label:a.row.sku+"||"+a.row.id},model:{value:t.tableRadio,callback:function(e){t.tableRadio=e},expression:"tableRadio"}},[e("i")])]}}],null,!0)}),e("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"d-flex"},[e("img",{attrs:{src:a.row.propertyImage,width:"60",height:"60"}}),e("div",{staticClass:"mg-l-20"},[e("p",[t._v(t._s(a.row.name))]),e("p",[t._v("SKU: "+t._s(a.row.sku))])])])]}}],null,!0)})],1)]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"d-flex"},[e("img",{attrs:{src:a.row.imgUrl,width:"60",height:"60"}}),e("div",{staticClass:"mg-l-20"},[e("p",[t._v(t._s(a.row.name))]),e("p",[t._v("SPU: "+t._s(a.row.sku))])])])]}}])})],1)],1),e("div",{staticClass:"d-flex",staticStyle:{"justify-content":"center",margin:"20px"}},[e("el-pagination",{attrs:{"current-page":t.page,background:!0,layout:"total, prev, pager, next",total:Number(t.total)},on:{"current-change":t.toPage}})],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.relateData.isShow=!1}}},[t._v(t._s(t.$t("orders.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.relateFn}},[t._v(t._s(t.$t("orders.confirm")))])],1)],1)},i=[],l=(a("14d9"),{props:["relateData"],data(){return{tableRadio:"",page:1,rowsPerPage:10,total:0,totalPage:0,items:[],list:[],sku:"",warehouse:"",spu:"",name:"",dealRelation:1,warehouseList:[]}},methods:{filterItem(){this.toPage(1)},clearFilter(t){"sku"==t?this.sku="":"spu"==t&&(this.spu=""),this.name="",this.toPage(1)},open(){this.sku="",this.spu="",this.name="",this.page=1,this.tableRadio="",this.total=Number(this.relateData.Pagination.totalCount),this.totalPage=Number(this.relateData.Pagination.totalPage),this.items=this.relateData.items,this.list=this.relateData.list,$(".el-dialog__body").scrollTop(0),this.getHouseList()},getHouseList(){this.$apiCall("api.Warehouse.finds",{},t=>{9999==t.ErrorCode?(this.warehouseList=t.Data.Results,0==t.Data.Results.length&&this.$message.error("There is no warehouse, please go to add！")):this.$message({message:t.Message,type:"error"})})},toPage(t){this.page=t,this.$showLoading(),this.$apiCall("api.VendorShop.vendorFindProducts",{page:this.page,rowsPerPage:10,status:1,sku:this.sku,spu:this.spu,name:this.name},t=>{"9999"==t.ErrorCode?(this.tableRadio="",this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage),this.items=[],this.list=[],t.Data.Results.products.forEach(t=>{t.stocks&&t.stocks.length&&t.stocks.forEach(e=>{this.$set(e,"name",t.name),this.items.push(e)}),this.list.push(t)}),$(".el-dialog__body").scrollTop(0)):this.$elementMessage(t.Message,"error"),this.$hideLoading()})},relateFn(){if(!this.tableRadio)return void this.$elementMessage("Please check a SKU first","error");let t=this.tableRadio.split("||"),e={sku:t[0],Hid:this.warehouse};console.log(e,"transData"),this.$emit("relateFn",e)},clickChange(t,e){}}}),o=l,r=(a("bef8"),a("72ff"),a("2877")),n=Object(r["a"])(o,s,i,!1,null,"be376e36",null);e["a"]=n.exports},a331:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contentpanel transaction-page"},[e("div",{ref:"pageHeader",staticClass:"pagetitle"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("el-link",{attrs:{type:"primary"},on:{click:t.goback}},[t._v(t._s(t.$t("orders.back")))]),e("span",{staticStyle:{margin:"0 20px"}},[t._v("/")]),e("h2",[t._v(t._s(t.$t("orders.导入确认")))])],1)]),e("div",{staticClass:"right"},[e("el-button",{attrs:{type:"primary"},on:{click:t.waitSubmit}},[t._v(t._s(t.$t("orders.提交")))])],1)]),e("div",{staticClass:"mg-t-20"},[e("el-button",{on:{click:t.batchDelete}},[t._v(t._s(t.$t("orders.批量删除")))])],1),e("div",{staticClass:"pagebody"},[e("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[e("el-col",{staticClass:"mg-b-30 mg-t-10",attrs:{span:24}},[e("el-card",[e("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.items},on:{"selection-change":t.selectionChange}},[e("el-table-column",{attrs:{align:"center",type:"selection"}}),e("el-table-column",{attrs:{width:"80",align:"center",label:t.$t("orders.商品id"),prop:"itemId"}}),e("el-table-column",{attrs:{width:"140",align:"center",label:t.$t("orders.商品图片链接")},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.imgUrl}})]}}])}),e("el-table-column",{attrs:{width:"400",align:"center",label:t.$t("orders.店铺商品名称"),prop:"itemName"}}),e("el-table-column",{attrs:{width:"200",align:"center",label:t.$t("orders.店铺sku"),prop:"itemSku"}}),e("el-table-column",{attrs:{align:"center",label:t.$t("orders.客户名称"),prop:"customerName"}}),e("el-table-column",{attrs:{align:"center",label:t.$t("orders.店铺"),prop:"shopName"}}),e("el-table-column",{attrs:{align:"center",label:t.$t("orders.供应商sku"),prop:"vendorSku"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{style:{color:1==a.row.vendorSkuStatus?"":"red"}},[t._v(t._s(a.row.vendorSku))]),1==a.row.vendorSkuStatus?e("div"):t._e(),2==a.row.vendorSkuStatus?e("div",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("orders.商品下架")))]):t._e(),3==a.row.vendorSkuStatus?e("div",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("orders.商品不存在")))]):t._e()]}}])}),e("el-table-column",{attrs:{width:"100",align:"center",label:""+t.$t("orders.店铺售价")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v(t._s(a.row.currency)+" "+t._s(a.row.itemPrice))])]}}])}),e("el-table-column",{attrs:{align:"center",label:t.$t("orders.状态")},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.matchStatus?e("div",[t._v(t._s(t.$t("orders.匹配成功")))]):t._e(),2==a.row.matchStatus?e("div",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("orders.匹配失败")))]):t._e()]}}])}),e("el-table-column",{attrs:{align:"center",label:t.$t("orders.operate")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(e){return t.openRelate(a.row)}}},[t._v(t._s(t.$t("orders.关联")))]),e("br"),e("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(e){return t.deleteFn(a.row)}}},[t._v(t._s(t.$t("orders.删除")))])]}}])})],1)],1)],1)],1)],1),e("dialogAssRelate",{attrs:{relateData:t.dialogRelateInfo},on:{relateFn:t.relateFn}}),e("el-dialog",{attrs:{width:"500px",visible:t.dialogDelete.isShow},on:{"update:visible":function(e){return t.$set(t.dialogDelete,"isShow",e)}}},[e("el-row",{staticClass:"tx-center"},[e("h3",[t._v(t._s(t.$t("orders.是否确认删除所选的商品,删除后需重新关联")))]),e("div",{staticClass:"mg-t-20"},[e("el-button",{on:{click:t.deleteHandle}},[t._v(t._s(t.$t("orders.知道了")))])],1)])],1)],1)},i=[],l=(a("14d9"),function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.relateData.isShow,title:t.$t("orders.associated"),width:"800px"},on:{"update:visible":function(e){return t.$set(t.relateData,"isShow",e)},open:t.open}},[e("el-divider"),e("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[e("div",{staticClass:"d-flex",staticStyle:{"margin-bottom":"20px"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:t.$t("orders.skuHolder"),clearable:""},on:{clear:function(e){return t.clearFilter("sku")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.sku,callback:function(e){t.sku=e},expression:"sku"}}),e("el-input",{staticStyle:{width:"200px",margin:"0 20px"},attrs:{placeholder:t.$t("orders.nameHolder"),clearable:""},on:{clear:function(e){return t.clearFilter("name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterItem.apply(null,arguments)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.filterItem}},[t._v(t._s(t.$t("orders.filter")))])],1),e("el-table",{staticClass:"no-hover",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.list,height:"350"}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"","show-header":!1,data:a.row.stocks}},[e("el-table-column",{attrs:{label:t.$t("orders.select"),width:"55"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-radio",{attrs:{label:a.row.sku+"||"+a.row.id},model:{value:t.tableRadio,callback:function(e){t.tableRadio=e},expression:"tableRadio"}},[e("i")])]}}],null,!0)}),e("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"d-flex"},[e("img",{attrs:{src:a.row.propertyImage,width:"60",height:"60"}}),e("div",{staticClass:"mg-l-20"},[e("p",[t._v(t._s(a.row.name))]),e("p",[t._v("SKU: "+t._s(a.row.sku))])])])]}}],null,!0)})],1)]}}])}),e("el-table-column",{attrs:{label:t.$t("orders.productinfo")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"d-flex"},[e("img",{attrs:{src:a.row.imgUrl,width:"60",height:"60"}}),e("div",{staticClass:"mg-l-20"},[e("p",[t._v(t._s(a.row.name))]),e("p",[t._v("SKU: "+t._s(a.row.sku))])])])]}}])})],1)],1),e("div",{staticClass:"d-flex",staticStyle:{"justify-content":"center",margin:"20px"}},[e("el-pagination",{attrs:{"current-page":t.page,background:!0,layout:"total, prev, pager, next",total:Number(t.total)},on:{"current-change":t.toPage}})],1),e("el-divider"),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.relateData.isShow=!1}}},[t._v(t._s(t.$t("orders.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.relateFn}},[t._v(t._s(t.$t("orders.confirm")))])],1)],1)}),o=[],r={props:["relateData"],data(){return{tableRadio:"",page:1,rowsPerPage:10,total:0,totalPage:0,items:[],list:[],sku:"",name:"",dealRelation:1}},methods:{filterItem(){this.toPage(1)},clearFilter(t){"sku"==t?this.sku="":this.name="",this.toPage(1)},open(){this.sku="",this.name="",this.page=1,this.tableRadio="",this.total=Number(this.relateData.Pagination.totalCount),this.totalPage=Number(this.relateData.Pagination.totalPage),this.items=this.relateData.items,this.list=this.relateData.list,$(".el-dialog__body").scrollTop(0)},toPage(t){this.page=t,this.$showLoading(),this.$apiCall("api.VendorShop.vendorFindProducts",{page:this.page,rowsPerPage:10,status:1,dealRelation:this.dealRelation,sku:this.sku,name:this.name},t=>{"9999"==t.ErrorCode?(this.tableRadio="",this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage),this.items=[],this.list=[],t.Data.Results.products.forEach(t=>{t.stocks&&t.stocks.length&&t.stocks.forEach(e=>{this.$set(e,"name",t.name),this.items.push(e)}),this.list.push(t)}),$(".el-dialog__body").scrollTop(0)):this.$elementMessage(t.Message,"error"),this.$hideLoading()})},relateFn(){if(!this.tableRadio)return void this.$elementMessage("Please check a SKU first","error");let t=this.tableRadio.split("||");this.$emit("relateFn",t[0])},clickChange(t,e){}}},n=r,d=(a("dc4c"),a("ed95"),a("2877")),c=Object(d["a"])(n,l,o,!1,null,"25ae5478",null),u=c.exports,h={data(){return{dialogDelete:{isShow:!1,item:null},dialogRelateInfo:{isShow:!1,loading:!1,items:[],Pagination:{},item:"",list:[]},dialogRelateInfoDefault:"{}",items:[],selectionIds:[],batchDeleteStatus:!1,isSave:!1}},components:{dialogAssRelate:u},watch:{},mounted(){this.dialogRelateInfoDefault=JSON.stringify(this.dialogRelateInfo),this.getItems()},beforeRouteLeave(t,e,a){if("orderAssociation"!=t.name)if(this.isSave)a();else{let t=confirm(this.$t("orders.需点击提交后，才能完成报价"));t?a():a(!1)}else a()},methods:{waitSubmit(){this.$apiCall("api.ShopifyOrder.setSkuRelationWaitBindItem",{},t=>{9999==t.ErrorCode?(this.isSave=!0,this.$router.push({path:"/ordersManage/2/1"})):this.$elementMessage(t.Message,"error")})},selectionChange(t){console.log(t),this.selectionIds=[],t.forEach(t=>{this.selectionIds.push(t.variableId)})},batchDelete(){0!=this.selectionIds.length?(this.batchDeleteStatus=!0,this.dialogDelete.isShow=!0):this.$elementMessage(this.$t("orders.请选择需要删除的数据"),"error")},deleteFn(t){this.dialogDelete.isShow=!0,this.dialogDelete.item=t},deleteHandle(){let t=[];t=this.batchDeleteStatus?this.selectionIds:[this.dialogDelete.item.variableId],this.$apiCall("api.ShopifyOrder.delWaitBindItem",{ids:t},t=>{this.batchDeleteStatus=!1,9999==t.ErrorCode?(this.$elementMessage(this.$t("orders.删除成功"),"success"),this.dialogDelete.isShow=!1,this.dialogDelete.item=null,this.getItems()):this.$elementMessage(t.Message,"error")})},goback(){this.$router.push({path:"ordersManage/2/1"})},handleSizeChange(t){this.pagination.pageSize=t,this.getItems()},handleCurrentChange(t){this.pagination.currentPage=t,this.getItems()},getItems(){this.$apiCall("api.ShopifyOrder.getWaitBindItem",{},t=>{9999==t.ErrorCode?this.items=t.Data.Results:this.$elementMessage(t.Message,"error")})},openRelate(t){this.$showLoading(),this.$apiCall("api.VendorShop.vendorFindProducts",{page:1,rowsPerPage:10,status:1},e=>{if("9999"==e.ErrorCode){if(!e.Data.Results.products||!e.Data.Results.products.length)return this.$hideLoading(),void this.$elementMessage("No data","error");this.dialogRelateInfo=JSON.parse(this.dialogRelateInfoDefault),this.dialogRelateInfo.isShow=!0,this.dialogRelateInfo.item=t,this.dialogRelateInfo.Pagination=e.Data.Pagination,this.dialogRelateInfo.items=[],this.dialogRelateInfo.list=[],e.Data.Results.products.forEach(t=>{t.stocks&&t.stocks.length&&t.stocks.forEach(e=>{this.$set(e,"name",t.name),this.dialogRelateInfo.items.push(e)}),this.dialogRelateInfo.list.push(t)})}else this.$elementMessage(e.Message,"error");this.$hideLoading()})},relateFn(t){this.$showLoading(),this.$apiCall("api.ShopifyOrder.setSkuRelation",{customerSku:this.dialogRelateInfo.item.variableId,customerId:this.dialogRelateInfo.item.customerId,vendorSku:t},t=>{"9999"==t.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.dialogRelateInfo=JSON.parse(this.dialogRelateInfoDefault),this.getItems()):this.$elementMessage(t.Message,"error"),this.$hideLoading()})}}},p=h,g=Object(d["a"])(p,s,i,!1,null,"2b1c1e3c",null);e["default"]=g.exports},bd2a:function(t,e,a){},bef8:function(t,e,a){"use strict";a("8953")},dc4c:function(t,e,a){"use strict";a("bd2a")},ed95:function(t,e,a){"use strict";a("2ea1")},fd9e:function(t,e,a){}}]);