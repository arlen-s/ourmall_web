(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["myInvoice"],{"162e":function(e,t,i){},"1c54":function(e,t,i){},4480:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"contentpanel my-invoice-page"},[i("div",{ref:"pageHeader",staticClass:"pagetitle"},[i("div",{staticClass:"left d-flex align-items-center"},[i("div",{staticClass:"title",staticStyle:{"margin-right":"20px"}},[i("i",{staticClass:"el-icon-s-order"}),i("h2",[e._v(e._s(e.$t("myinvoice.purchaseOrders")))])]),i("div",{staticStyle:{"margin-top":"8px"}},[1==e.cancelStatus?i("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.filterGetItem2(2)}}},[e._v(e._s(e.$t("myinvoice.viewCancelled")))]):e._e(),2==e.cancelStatus?i("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.filterGetItem2(1)}}},[e._v(e._s(e.$t("myinvoice.viewAll")))]):e._e()],1)]),i("div",{staticClass:"right"},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.gotoImport}},[e._v(e._s(e.$t("myinvoice.createCus")))])],1)]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pagebody"},[i("el-row",{staticClass:" mg-b-20",attrs:{gutter:15}},[i("el-col",{attrs:{span:24}},[i("el-card",[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("div",{ref:"pageFilter",staticClass:"page-filter"},[i("el-form",{attrs:{inline:!0,size:"mini"}},[i("el-form-item",{staticClass:" mg-r-5",attrs:{label:"#"}},[i("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:e.$t("myinvoice.invoiceNum")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterGetItem.apply(null,arguments)}},model:{value:e.filterParams.code,callback:function(t){e.$set(e.filterParams,"code",t)},expression:"filterParams.code"}})],1),i("el-form-item",{staticClass:" mg-r-5"},[i("el-select",{attrs:{filterable:"",remote:"","remote-method":e.remoteMethodCustom,loading:e.selectLoading,placeholder:e.$t("myinvoice.pleaseCusName")},on:{change:e.filterGetItem},model:{value:e.filterParams.id,callback:function(t){e.$set(e.filterParams,"id",t)},expression:"filterParams.id"}},e._l(e.selectArr,(function(e){return i("el-option",{key:e.id,attrs:{label:e.customerName,value:e.id}})})),1)],1),i("el-form-item",{staticClass:" mg-r-5"},[i("el-select",{attrs:{filterable:"",remote:"","remote-method":e.getShopName,loading:e.getShopNameInput.loading,placeholder:"请输入查询店铺名"},on:{change:e.filterGetItem},model:{value:e.filterParams.accountId,callback:function(t){e.$set(e.filterParams,"accountId",t)},expression:"filterParams.accountId"}},e._l(e.getShopNameInput.shopList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.shopName,value:e.id}})})),1)],1),i("el-form-item",{staticClass:" mg-r-5"},[i("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:e.$t("myinvoice.losNum")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterGetItem.apply(null,arguments)}},model:{value:e.filterParams.trackNumber,callback:function(t){e.$set(e.filterParams,"trackNumber",t)},expression:"filterParams.trackNumber"}})],1),i("el-form-item",{staticClass:" mg-r-5"},[i("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:e.$t("myinvoice.shopifyNum")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterGetItem.apply(null,arguments)}},model:{value:e.filterParams.codeName,callback:function(t){e.$set(e.filterParams,"codeName",t)},expression:"filterParams.codeName"}})],1),i("el-form-item",{staticClass:" mg-r-20"},[i("el-select",{staticClass:" mg-r-5",staticStyle:{width:"170px"},attrs:{placeholder:e.$t("myinvoice.filterTime")},model:{value:e.filterParams.timeFilter,callback:function(t){e.$set(e.filterParams,"timeFilter",t)},expression:"filterParams.timeFilter"}},e._l(e.filterParams.timeOption,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e.filterParams.timeFilter?i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":e.$t("myinvoice.to"),"start-placeholder":e.$t("myinvoice.startDate"),"end-placeholder":e.$t("myinvoice.endDate")},on:{change:e.dateChange},model:{value:e.filterParams.date,callback:function(t){e.$set(e.filterParams,"date",t)},expression:"filterParams.date"}}):e._e()],1),i("el-form-item",{attrs:{label:e.$t("myinvoice.orderStatus")}},[i("el-select",{attrs:{placeholder:e.$t("myinvoice.pleaseSelect")},on:{change:e.filterGetItem},model:{value:e.filterParams.status,callback:function(t){e.$set(e.filterParams,"status",t)},expression:"filterParams.status"}},[i("el-option",{attrs:{label:e.$t("importdata.all"),value:""}}),e._l(e.$dict.invoiceStatus,(function(t){return 9!=t.val?i("el-option",{key:t.text,attrs:{label:e.$t(t.text),value:t.val}}):e._e()}))],2)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.filterGetItem}},[e._v(e._s(e.$t("myinvoice.filter")))]),i("el-button",{attrs:{type:"danger"},on:{click:e.clearFilter}},[e._v(e._s(e.$t("myinvoice.clear")))])],1)],1)],1)])],1),i("el-table",{ref:"gridTable",staticStyle:{width:"100%"},attrs:{data:e.items,"row-key":"id",stripe:"",height:e.tableHeight,"row-class-name":e.tableRowClassName}},[i("el-table-column",{attrs:{label:e.$t("myinvoice.invoiceNum"),prop:"code",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"d-flex align-items-center"},[e._v(" "+e._s(t.row.code)+" "),4!=t.row.status&&5!=t.row.status&&6!=t.row.status?[i("el-tooltip",{attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t.row.extraJson&&t.row.extraJson.importErrorLog&&t.row.extraJson.importErrorLog.length?e._l(t.row.extraJson.importErrorLog,(function(t){return i("p",[e._v(" "+e._s(t)+" ")])})):e._e()],2),1==t.row.importError?i("i",{staticClass:"el-icon-warning tx-danger",staticStyle:{"font-size":"14px","margin-left":"5px"}}):e._e()])]:e._e()],2),i("p",{staticClass:"tx-gray-600",staticStyle:{"white-space":"nowrap"}},[i("span",{domProps:{innerHTML:e._s(e.$t("myinvoice.includeNum",{num:Number(t.row.orderCnt)}))}}),e._v(" / "),t.row.totalCnt?i("el-popover",{attrs:{trigger:"hover",placement:"right"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.row.loadCnt,expression:"scope.row.loadCnt"}],staticStyle:{"min-height":"50px","font-size":"12px"},attrs:{slot:""},slot:"default"},[i("div",{staticStyle:{"margin-bottom":"5px"}},[e._v(e._s(e.$t("myinvoice.totalOrders"))),i("b",[e._v(e._s(t.row.totalCnt))]),e._v(" "+e._s(e.$t("myinvoice.pros")))]),t.row.cnt?[i("div",{staticStyle:{"margin-bottom":"15px","padding-left":"10px"}},e._l(t.row.cnt,(function(t,a){return i("div",{key:a},[i("span",{staticStyle:{"white-space":"nowrap"}},[e._v(e._s(t.name)+" :")]),e._v(" "),i("span",{staticStyle:{color:"#606266","white-space":"nowrap"}},[e._v(e._s(t.cnt))])])})),0),i("div",{staticStyle:{"text-align":"right"}},[i("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.cntText,expression:"scope.row.cntText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.cntOnCopy,expression:"cntOnCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.cntOnError,expression:"cntOnError",arg:"error"}],staticStyle:{color:"#5c6ac4"},attrs:{href:"javascript:;"}},[e._v(e._s(e.$t("myinvoice.copyData")))])])]:e._e()],2),i("a",{staticStyle:{color:"#5c6ac4"},attrs:{slot:"reference",href:"javascript:;"},on:{mouseenter:function(i){return e.getCntCountry(t.row)}},slot:"reference"},[e._v(e._s(t.row.totalCnt))])]):i("span",{staticStyle:{color:"#606266"}},[e._v("0")]),e._v(" "+e._s(e.$t("myinvoice.pros"))+" / "),t.row.shops.length?i("el-popover",{attrs:{trigger:"hover",placement:"right"}},[i("div",{staticStyle:{"min-height":"50px","font-size":"12px"}},[i("div",{staticStyle:{"margin-bottom":"5px"}},[e._v("总共店铺数："),i("b",[e._v(e._s(t.row.shops.length))]),e._v("店铺")]),e._l(t.row.shops,(function(t){return i("div",{key:t.id},[e._v(e._s(t.shopName))])}))],2),i("a",{staticStyle:{color:"#5c6ac4"},attrs:{slot:"reference",href:"javascript:;"},slot:"reference"},[e._v(e._s(t.row.shops.length))])]):i("span",{staticStyle:{color:"#606266"}},[e._v("0")]),e._v(" 个店铺 ")],1)]}}])}),i("el-table-column",{attrs:{label:e.$t("myinvoice.cus"),prop:"customerName",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(t.row.customerName))]),i("div",[e._v(e._s(t.row.customerRemark))])]}}])}),i("el-table-column",{attrs:{label:e.$t("myinvoice.skuKinds"),prop:"itemCnt",align:"center",width:"120"}}),i("el-table-column",{attrs:{label:e.$t("myinvoice.originalAndDiscount"),width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[Number(t.row.totalAmount)?i("div",[e._v("US$ "+e._s(t.row.totalAmount))]):i("div",[e._v(e._s(e.$t("myinvoice.setUp")))]),i("div",{staticClass:" tx-success"},[e._v("- US$ "+e._s((Number(t.row.totalAmount)-Number(t.row.realAmount)).toFixed(2)))])]}}])}),i("el-table-column",{attrs:{label:e.$t("myinvoice.actualAmount"),prop:"realAmount",width:"200",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:" tx-danger"},[Number(t.row.realAmount)?i("span",[e._v("US$ "+e._s(t.row.realAmount))]):i("div",[e._v(e._s(e.$t("myinvoice.setUp")))])])]}}])}),i("el-table-column",{attrs:{label:e.$t("myinvoice.statistics"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"white-space":"nowrap"}},[i("span",{},[e._v(e._s(e.$t("myinvoice.shippedAndDelivered")))]),i("span",[e._v(e._s(t.row.orderStatusCnt?t.row.orderStatusCnt.undeliveredCnt:"---"))]),e._v(" / "),i("span",[e._v(e._s(t.row.orderStatusCnt?t.row.orderStatusCnt.deliveredCnt:"---"))])]),t.row.orderStatusCnt&&Number(t.row.orderStatusCnt.notSyncCnt)>0?i("div",{staticStyle:{"white-space":"nowrap"}},[[i("span",{staticClass:"tx-warning"},[i("el-popover",{attrs:{placement:"bottom",title:e.$t("myinvoice.Download"),width:"500",trigger:"hover"}},[i("div",{staticClass:"mg-t-15 mg-b-15",staticStyle:{"white-space":"nowrap"}},[i("span",{staticClass:" tx-gray-600"},[e._v(e._s(e.$t("myinvoice.shippedquantity"))+" ")]),i("a",{attrs:{href:"javascript:;"}},[e._v(e._s(t.row.orderStatusCnt?t.row.orderStatusCnt.deliveredCnt:"---"))]),t.row.orderStatusCnt&&Number(t.row.orderStatusCnt.notSyncCnt)>0?i("span",{staticClass:"mg-l-10"},[e._v(" （"),i("a",{attrs:{href:"javascript:;"}},[e._v(e._s(t.row.orderStatusCnt?Number(t.row.orderStatusCnt.notSyncCnt):"---"))]),e._v(" "+e._s(e.$t("myinvoice.syncShopify"))+"） ")]):e._e()]),i("el-alert",{staticClass:"icon-color",attrs:{closable:!1,title:e.$t("myinvoice.Downloadtext"),type:"info","show-icon":""}}),i("div",{staticClass:"mg-t-15 d-flex justify-content-center"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return e.exportDeliver(t.row.id,1)}}},[e._v(e._s(e.$t("myinvoice.Downloadall")))]),t.row.orderStatusCnt&&Number(t.row.orderStatusCnt.notSyncCnt)>0?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return e.exportDeliver(t.row.id,2)}}},[e._v(e._s(e.$t("myinvoice.Downloadallunsync")))]):e._e()],1),i("a",{attrs:{slot:"reference",href:"javascript:;"},slot:"reference"},[e._v(e._s(t.row.orderStatusCnt?Number(t.row.orderStatusCnt.notSyncCnt):"---"))])],1),e._v(" "+e._s(e.$t("myinvoice.syncShopify"))+" ")],1)]],2):e._e(),t.row.orderStatusCnt&&Number(t.row.orderStatusCnt.abnormalCnt)>0&&6!=t.row.status?i("div",{staticStyle:{"white-space":"nowrap"}},[i("span",{staticClass:" tx-danger"},[e._v(e._s(t.row.orderStatusCnt?t.row.orderStatusCnt.abnormalCnt:"---"))]),e._v(" "+e._s(e.$t("myinvoice.abnormal"))+" ")]):e._e()]}}])}),i("el-table-column",{attrs:{label:e.$t("myinvoice.status"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$dict.invoiceStatus[t.row.status]?i("span",{class:"tx-"+e.$dict.invoiceStatus[t.row.status].type},[e._v(e._s(e.$t(e.$dict.invoiceStatus[t.row.status].text)))]):e._e()]}}])}),i("el-table-column",{attrs:{label:e.$t("myinvoice.dateTime"),width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.timeCreated?i("div",{staticStyle:{"white-space":"nowrap"}},[i("span",{staticClass:" tx-gray-600"},[e._v(e._s(e.$t("myinvoice.orderCreate")))]),i("span",[e._v(e._s(e.$moment.unix(t.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")))])]):e._e(),t.row.timeRead?i("div",{staticStyle:{"white-space":"nowrap"}},[i("span",{staticClass:" tx-gray-600"},[e._v(e._s(e.$t("myinvoice.orderPaid")))]),i("span",[e._v(e._s(e.$moment.unix(t.row.timeRead).format("YYYY-MM-DD HH:mm:ss")))])]):e._e(),t.row.timePaid?i("div",{staticStyle:{"white-space":"nowrap"}},[i("span",{staticClass:" tx-gray-600"},[e._v(e._s(e.$t("myinvoice.orderConfirm")))]),i("span",[e._v(e._s(e.$moment.unix(t.row.timePaid).format("YYYY-MM-DD HH:mm:ss")))])]):e._e()]}}])}),i("el-table-column",{attrs:{fixed:"right",label:e.$t("myinvoice.action"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[3!=t.row.status&&4!=t.row.status&&5!=t.row.status&&6!=t.row.status&&9!=t.row.status?i("el-dropdown",{attrs:{size:"mini","split-button":"",type:"text"},on:{click:function(i){return e.gotoInvoice(t.row)},command:e.handleCommand}},[e._v(" "+e._s(e.$t("myinvoice.viewDetail"))+" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:e.beforeHandleCommand(t.row,"b")}},[e._v(e._s(e.$t("myinvoice.exportShopify")))]),i("el-dropdown-item",{attrs:{command:e.beforeHandleCommand(t.row,"a")}},[e._v(e._s(e.$t("myinvoice.importInfo")))])],1)],1):i("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:function(i){return e.gotoInvoice(t.row)}}},[e._v(e._s(e.$t("myinvoice.viewDetail")))])],1),9!=t.row.status&&1!=t.row.status?i("div",[i("el-link",{staticStyle:{"font-size":"12px"},attrs:{disabled:t.row.submitLoading,type:"primary"},on:{click:function(i){return e.sendInvoice(t.row)}}},[e._v(e._s(e.$t("myinvoice.sendCus")))])],1):e._e(),1!=t.row.status&&2!=t.row.status&&3!=t.row.status?i("div",[i("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:function(i){return e.handleCommandFn(t.row,"c")}}},[e._v(e._s(e.$t("myinvoice.exportt")))])],1):e._e(),1==t.row.status||2==t.row.status?i("div",[i("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"danger"},on:{click:function(i){return e.cancelInvoice(t.row)}}},[e._v(e._s(e.$t("myinvoice.cancelOrder")))])],1):e._e()]}}])})],1)],1)],1)],1),e.items.length?i("el-row",{ref:"pageFooter",attrs:{gutter:20}},[i("el-col",{staticClass:" d-flex justify-content-center",attrs:{span:24}},[i("div",[i("el-pagination",{attrs:{"current-page":e.page,background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.pageSizes,"page-size":e.rowsPerPage,total:Number(e.total)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e()],1),i("el-dialog",{attrs:{width:"80%",title:"b"==e.exportInvoiceType?e.$t("myinvoice.exportShopify"):e.$t("myinvoice.exportOrder"),visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[i("div",{staticClass:"modal-export"},[i("el-divider"),i("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[i("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3F4EAE","padding-left":"10px"}},[e._v(e._s(e.$t("myinvoice.exportFields"))),i("span",{staticClass:"mg-l-5"},[e._v(e._s(e.$t("myinvoice.dragging")))])]),i("div",{staticClass:" draggable-wrap"},[i("draggable",{attrs:{list:e.modalCustomExport.selectedTitles,draggable:".dargDiv",options:{animation:300},group:"tags"}},e._l(e.modalCustomExport.selectedTitles,(function(t,a){return i("el-tag",{key:t.name,staticClass:"dargDiv",attrs:{closable:"","disable-transitions":!1},on:{close:function(t){return e.removeTitle(a)}}},[e._v(" "+e._s(t.name)+" ")])})),1),e.modalCustomExport.selectedTitles.length?e._e():i("div",{staticClass:" w-100 justify-content-center"},[i("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.$t("myinvoice.PleaseSelectBelow")))])])],1)]),i("el-divider"),i("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[i("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3F4EAE","padding-left":"10px"}},[e._v(e._s(e.$t("myinvoice.optionalfields"))+" "),i("span",{staticClass:" tx-danger tx-12",staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.$t("myinvoice.notExport")))])]),i("div",{staticClass:"tag-wrap"},[i("draggable",{attrs:{list:e.modalCustomExport.unselectedTitles,draggable:".uns-tag",options:{animation:300},group:"tags"}},e._l(e.modalCustomExport.unselectedTitles,(function(t,a){return i("el-tag",{key:t.orName,attrs:{effect:"dark"},on:{click:function(t){return e.selectTitle(a)}}},[e._v(" "+e._s(t.orName)+" ")])})),1)],1)]),i("el-divider"),i("div",{staticClass:"border-bottom-1 mg-b-15 pd-b-15"},[i("h6",{staticClass:"mg-b-15",staticStyle:{"border-left":"4px solid #3F4EAE","padding-left":"10px"}},[e._v(" "+e._s(e.$t("myinvoice.customField"))+" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("myinvoice.rename"),placement:"top"}},[i("i",{staticClass:"fa fa-question-circle-o",staticStyle:{color:"#5C6AC4","text-decoration":"none"}})]),i("a",{staticClass:"mg-l-20",staticStyle:{color:"#5C6AC4","text-decoration":"none"},attrs:{href:"javascript:;"},on:{click:function(t){e.showCustom=!e.showCustom}}},[e._v(e._s(e.showCustom?e.$t("myinvoice.hideFields"):e.$t("myinvoice.showFields")))])],1),i("div",{staticClass:"row custom-wrap",class:{hide:!e.showCustom}},[i("el-row",{staticStyle:{margin:"0"},attrs:{gutter:20}},e._l(e.modalCustomExport.selectedTitles,(function(t){return i("el-col",{key:t.orName,staticStyle:{"margin-top":"10px"},attrs:{span:12}},[i("div",{staticClass:"grid-content",staticStyle:{display:"flex","align-items":"center"}},[i("label",{staticStyle:{width:"200px","white-space":"nowrap","text-align":"right","margin-right":"10px",color:"#999"}},[e._v("["+e._s(t.orName)+"]"+e._s(e.$t("myinvoice.showAs"))+"：")]),i("div",{staticClass:"col-6"},[i("el-input",{attrs:{placeholder:t.orName,size:"small"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"title.name"}})],1)])])})),1)],1)]),i("el-divider")],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.innerVisible=!1}}},[e._v(e._s(e.$t("myinvoice.discard")))]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveCustomExportSettingOnly}},[e._v(e._s(e.$t("myinvoice.saveSetting")))]),1!=e.exportItem.payStatus&&"c"==e.exportInvoiceType?[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.$t("myinvoice.confirmReceipt"))+" ")]),i("el-button",{staticStyle:{"background-color":"#b3e19d","border-color":"#b3e19d",cursor:"not-allowed"},attrs:{type:"success",size:"small"}},[e._v(" "+e._s(e.$t("myinvoice.saveSettingExcel"))+" ")])],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.$t("myinvoice.confirmReceipt"))+" ")]),i("el-button",{staticStyle:{"background-color":"#b3e19d","border-color":"#b3e19d",cursor:"not-allowed"},attrs:{type:"success",size:"small"}},[e._v(" "+e._s(e.$t("myinvoice.saveSettingCsv"))+" ")])],1)]:[i("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.saveCustomExport("1")}}},[e._v(e._s(e.$t("myinvoice.saveSettingExcel")))]),i("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.saveCustomExport("2")}}},[e._v(e._s(e.$t("myinvoice.saveSettingCsv")))])]],2)]),i("el-dialog",{attrs:{"custom-class":"sendInvoice",title:e.$t("myinvoice.sendInvoice"),visible:e.sendInvoiceOpen,width:"50%"},on:{open:e.openSkype,"update:visible":function(t){e.sendInvoiceOpen=t}}},[[i("div",{staticStyle:{position:"relative","z-index":"1"}},[i("div",{staticStyle:{position:"absolute",right:"30px",top:"15px"}},[i("el-switch",{on:{change:e.changeShowItemPrice},model:{value:e.showItemPrice,callback:function(t){e.showItemPrice=t},expression:"showItemPrice"}}),e._v(" "+e._s(e.$t("myinvoice.showPrice"))+" ")],1)]),i("el-tabs",{staticStyle:{"margin-left":"20px","margin-top":"10px"},attrs:{type:"card"},model:{value:e.activeShareName,callback:function(t){e.activeShareName=t},expression:"activeShareName"}},[i("el-tab-pane",{attrs:{name:"shareLink"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-link"}),e._v(" "+e._s(e.$t("myinvoice.shareLink")))]),i("div",{staticClass:"d-flex mg-y-20"},[i("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[e._v(e._s(e.$t("myinvoice.shareUrl")))]),i("div",[i("span",[e._v(e._s(e.invoiceInfo.url))])])]),i("div",{staticClass:"d-flex mg-y-20"},[i("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}}),i("div",[i("div",[i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.invoiceInfo.url,expression:"invoiceInfo.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],attrs:{size:"mini",type:"success"}},[e._v(e._s(e.$t("myinvoice.shareCopy")))])],1)])])]),i("el-tab-pane",{attrs:{name:"shareWeixin"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-shejiao"}),e._v(" "+e._s(e.$t("myinvoice.showApp")))]),i("div",[i("div",{staticClass:"d-flex mg-y-20"},[i("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[e._v(e._s(e.$t("myinvoice.setTitle")))]),i("div",{staticStyle:{width:"70%"}},[i("el-input",{attrs:{type:"text",size:"small"},on:{change:function(t){return e.saveRemark("2")}},model:{value:e.shareTitle,callback:function(t){e.shareTitle=t},expression:"shareTitle"}})],1)]),i("div",{staticClass:"d-flex mg-y-20 align-items-center"},[i("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[e._v(e._s(e.$t("myinvoice.setContent")))]),i("div",{staticStyle:{width:"70%"}},[i("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:3,maxRows:6},size:"small"},on:{change:function(t){return e.saveRemark("2")}},model:{value:e.shareDesc,callback:function(t){e.shareDesc=t},expression:"shareDesc"}})],1)]),i("div",{staticClass:"d-flex mg-y-20"},[i("div",{staticStyle:{color:"#999",width:"150px","text-align":"right","margin-right":"10px","white-space":"nowrap"}},[e._v(e._s(e.$t("myinvoice.setType")))]),i("div",{staticClass:"d-flex",staticStyle:{width:"70%"}},[i("div",{staticClass:"skype-share",staticStyle:{"margin-right":"30px"},attrs:{"data-href":e.shareTitle+e.shareDesc,"data-lang":"en-US","data-text":e.invoiceInfo.url,"data-style":"large"}}),i("div",[i("el-tooltip",{attrs:{placement:"bottom"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("p",{staticClass:"tx-center mg-b-10"},[e._v(e._s(e.$t("myinvoice.scan")))]),i("img",{attrs:{src:e.invoiceInfo.qrcodeBase64,width:"130"}}),i("img",{staticStyle:{position:"absolute",left:"50%",top:"50%","margin-left":"-15px","margin-top":"-4px"},attrs:{src:"images/weixin.png",width:"30px"}})]),i("a",{staticClass:"share-weixin",attrs:{href:"javascript:;"}},[i("i",{staticClass:"fa fa-weixin"}),e._v(" "+e._s(e.$t("myinvoice.share"))+" ")])])],1)])])])])],1)],i("el-divider"),i("div",{staticClass:"dialog-footer d-flex justify-content-between",attrs:{slot:"footer"},slot:"footer"},[i("div",[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"shareWeixin"==e.activeShareName,expression:"activeShareName == 'shareWeixin'"}],attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.saveRemark("1")}}},[e._v(e._s(e.$t("myinvoice.reset")))])],1),i("div",[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.sendInvoiceOpen=!1}}},[e._v(e._s(e.$t("myinvoice.cancel")))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.invoicePreview(e.invoiceInfo.url)}}},[e._v(e._s(e.$t("myinvoice.previewInvocie")))])],1)])],2),i("el-dialog",{attrs:{title:"您当前采购订单中有 0 元供货价的商品",visible:e.dialogZeroAlert.isShow,width:"600px"},on:{"update:visible":function(t){return e.$set(e.dialogZeroAlert,"isShow",t)}}},[i("div",{staticStyle:{padding:"0 20px"}},[i("div",{staticClass:" mg-b-10"},[e._v(" 您当前的采购订单中有设置为 0 元供货价的商品： ")]),e._l(e.dialogZeroAlert.items,(function(t){return i("div",{key:t.id,staticStyle:{"margin-bottom":"5px","padding-left":"15px",color:"#909399"}},[e._v(" "+e._s(t.codeName)+" - "+e._s(t.sku)+" × "+e._s(t.quantity)+" ")])})),i("div",{staticClass:" mg-t-30"},[i("el-alert",{attrs:{title:"确定要发送当前发票发送给客户吗",type:"warning",closable:!1}})],1)],2),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogZeroAlert.isShow=!1}}},[e._v(" 我再看看 ")]),i("el-button",{attrs:{size:"small",type:"primary",loading:e.dialogZeroAlert.loading},on:{click:function(t){return e.toSendInvoice(e.dialogZeroAlert.invoice,!0)}}},[e._v(" 确定 ")])],1)])],1)},s=[],o=i("80ee"),r=(i("6351"),i("2c45"),i("1fbe"),i("390f"),i("fd7d"),i("f6be"),i("f95d"),i("ca52"),i("3d7e"),i("3335")),n=i.n(r),l={data:function(){var e;return e={getShopNameInput:{loading:!1,shopList:[]},orderOtherStatus:0,loading:!1,reSizeTime:0,tableHeight:400,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("myInvoiceRowsPerPage")?Number(localStorage.getItem("myInvoiceRowsPerPage")):10,items:[],total:0,totalPage:0,filterParams:{timeOption:[{label:this.$t("myinvoice.createdTime"),value:"timeCreated"},{label:this.$t("myinvoice.confirmedTime"),value:"timePaid"},{label:this.$t("myinvoice.downloadTime"),value:"timeApiGet"},{label:this.$t("myinvoice.paidTime"),value:"timeRead"}],timeFilter:"",date:[],dateFrom:"",dateTo:"",code:"",status:this.$route.query.status?Number(this.$route.query.status):"",customerRead:"",payStatus:"",name:"",id:"",trackNumber:"",codeName:"",accountId:""},selectLoading:!1,selectArr:[],selectedCustomerId:"",cancelStatus:1,innerVisible:!1,showCustom:!1,modalCustomExport:{tags:[],selectedTitles:[],unselectedTitles:[]},modalCustomExportDefault:"",exportItem:"",exportInvoiceType:"",sendInvoiceOpen:!1,activeShareName:"shareLink"},Object(o["a"])(e,"showCustom",!1),Object(o["a"])(e,"shareTitle",""),Object(o["a"])(e,"shareDesc",""),Object(o["a"])(e,"showDownloadInvoice",!1),Object(o["a"])(e,"stopResource","1"),Object(o["a"])(e,"activeConfirm","confirmErp"),Object(o["a"])(e,"showItemPrice",!0),Object(o["a"])(e,"invoiceInfo",""),Object(o["a"])(e,"dialogZeroAlert",{isShow:!1,loading:!1,items:[],invoice:null}),Object(o["a"])(e,"dialogZeroAlertDefault","{}"),e},watch:{items:function(){var e=this;this.items.forEach((function(e,t){e.isLoadOrderCnt||(e.isLoadOrderCnt=0)})),setTimeout((function(){e.loadCnt()}),500)},$route:"gotoPage"},components:{draggable:n.a},mounted:function(){var e=this;if(this.dialogZeroAlertDefault=JSON.stringify(this.dialogZeroAlert),console.log(null!=this.$route.query.orderStatus),null!=this.$route.query.orderStatus){var t=this.$route.query.orderStatus;Number(t)>=10?this.orderOtherStatus=Number(t):this.filterParams.status=Number(t)}this.filterParamsDefault=JSON.stringify(this.filterParams),this.$route.params.id&&(this.filterParams.name=this.$route.params.customerName?this.$route.params.customerName:"",this.filterParams.id=this.$route.params.id?this.$route.params.id:"",this.selectArr=[{id:this.$route.params.id,customerName:this.$route.params.customerName}]),this.getItem(),window.onresize=function(){e.$getTableHeight(e)},this.modalCustomExportDefault=JSON.stringify(this.modalCustomExport);var i,a=this.$refs.gridTable.bodyWrapper;a.onscroll=function(){setTimeout((function(){e.loadCnt()}),100)},$(window).scroll((function(){clearTimeout(i),i=setTimeout((function(){e.loadCnt()}),100)})).resize((function(){clearTimeout(i),i=setTimeout((function(){e.loadCnt()}),100)}))},beforeDestroy:function(){window.onresize=function(){}},methods:{getShopName:function(e){var t=this;this.getShopNameInput.shopList=[],e&&(this.getShopNameInput.loading=!0,this.$apiCall("api.Invoice.findStoreByVendor",{shopName:e},(function(e){t.getShopNameInput.loading=!1,9999==e.ErrorCode?t.getShopNameInput.shopList=e.Data.Results:t.$message({message:e.Message,type:"error"})})))},exportDeliver:function(e,t){var i=this;this.$showLoading(),this.$apiCall("api.Invoice.exportDeliverTitle",{invoiceId:e},(function(a){if("9999"==a.ErrorCode){var s=[];for(var o in a.Data.Results.titles){var r={};r.key=o,r.orName=a.Data.Results.titles[o],r.name=a.Data.Results.titles[o],s.push(r)}var n={};s.forEach((function(e){n[e.key]=e.name}));var l={invoiceId:e,titles:n,onlyDelivered:!0};2==t&&(l.onlyNotSync=!0),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var c=function(e){document.getElementById("ifilePro").src=e};i.$apiCall("api.Invoice.exportDeliver",l,(function(e){i.$hideLoading(),"9999"==e.ErrorCode?(i.$elementMessage("下载成功","success"),c(e.Data.Results.file)):(i.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||i.$userFailure())}))}else i.$elementMessage(a.Message,"error"),"1002"!=a.ErrorCode&&"1003"!=a.ErrorCode||his.$userFailure()}))},cntOnError:function(){this.$elementMessage(this.$t("myinvoice.copyFailed"),"error")},cntOnCopy:function(){this.$elementMessage(this.$t("myinvoice.copyItems"),"success")},getCntCountry:function(e){e.cnt||(e.loadCnt=!0),this.$apiCall("api.Invoice.getItemsCountry",{invoiceId:e.id},(function(t){if(e.loadCnt=!1,"9999"==t.ErrorCode){e.cnt=t.Data.Results;var i="总共采购商品数：".concat(e.totalCnt,",");Object.keys(t.Data.Results).forEach((function(e){i+="".concat(t.Data.Results[e].name,": ").concat(t.Data.Results[e].cnt,",")})),e.cntText=i.slice(0,i.length-1)}}))},tableRowClassName:function(e){e.row;var t=e.rowIndex;return"data-invocieid invocieid".concat(this.items[t].id)},loadCnt:function(){var e=this;if(this.$refs.gridTable){var t=this.$refs.gridTable.bodyWrapper,i=t.scrollHeight,a=t.scrollTop;$(".el-table__body-wrapper .data-invocieid").each((function(t){$(".el-table__body-wrapper .data-invocieid").eq(t);var s=$(".el-table__body-wrapper .data-invocieid").eq(t).offset().top-200;if(s<i+a&&s>a){var o=e.items[t].id;e.items.some((function(t){t.id==o&&(t.isLoadOrderCnt||e.getOrderCnt(o))}))}}))}},getOrderCnt:function(e){var t,i=this,a=!1;this.items.some((function(i){if(i.id==e)return i.isLoadOrderCnt?!0:t=i,!0})),a||(t.isLoadOrderCnt=1,this.$apiCall("api.Invoice.getSummary",{invoiceId:e},(function(e){i.$hideLoading(),"9999"==e.ErrorCode?i.$set(t,"orderStatusCnt",e.Data.Results):(i.$elementMessage(e.Message,"error"),t.isLoadOrderCnt=2)})))},onCopy:function(e){this.$elementMessage(this.$t("successfullyToClipboard"),"success")},onError:function(e){this.$elementMessage(this.$t("failedToClipboard"),"error")},saveRemark:function(e){var t=this;this.$showLoading(),this.$apiCall("api.Invoice.saveRemark",{uniCode:this.invoiceInfo.uniCode,title:1==e?"":this.shareTitle,desc:1==e?"":this.shareDesc},(function(e){t.$hideLoading(),"9999"==e.ErrorCode?(t.shareTitle=e.Data.Results.title,t.shareDesc=e.Data.Results.desc):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))},invoicePreview:function(e){var t=window.open("/blank.html","invoicePreview");t.location.href=e},openSkype:function(){var e=0,t=setInterval((function(){(function(e,t,i){e.loadSkypeWebSdkAsync=e.loadSkypeWebSdkAsync||function(e){var a,s=t.getElementsByTagName(i)[0];t.getElementById(e.id)||(a=t.createElement(i),a.id=e.id,a.src=e.scriptToLoad,a.onload=e.callback,s.parentNode.insertBefore(a,s))};var a={scriptToLoad:"https://swx.cdn.skype.com/shared/v/latest/skypewebsdk.js",id:"skype_web_sdk"};e.loadSkypeWebSdkAsync(a)})(window,document,"script"),e++,e>10&&clearInterval(t)}),300)},toSendInvoice:function(e,t){var i=this;this.showItemPrice="1"==e.showItemPrice,this.sendInvoiceOpen=!0,this.activeShareName="shareLink",t&&(this.dialogZeroAlert.loading=!0),this.$apiCall("api.Invoice.getShareUrl",{invoiceId:e.id},(function(e){i.$hideLoading(),"9999"==e.ErrorCode?(i.invoiceInfo=e.Data.Results,i.shareTitle=i.invoiceInfo.remark?i.invoiceInfo.remark.title:"",i.shareDesc=i.invoiceInfo.remark?i.invoiceInfo.remark.desc:"",i.sendInvoiceOpen=!0,i.activeShareName="shareLink",t&&(i.dialogZeroAlert.isShow=!1)):(i.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||i.$userFailure())}))},sendInvoice:function(e){var t=this;e.submitLoading=!0,this.$apiCall("api.Invoice.checkItemPrice",{invoiceId:e.id},(function(i){if(e.submitLoading=!1,"9999"==i.ErrorCode){var a=i.Data.Results;a.noSkuArr.length||a.nullPriceArr.length||a.zeroPriceArr.length?(t.dialogZeroAlert=JSON.parse(t.dialogZeroAlertDefault),t.dialogZeroAlert.items=a.noSkuArr.concat(a.noSkuArr,a.nullPriceArr,a.zeroPriceArr),t.dialogZeroAlert.isShow=!0,t.dialogZeroAlert.invoice=e):t.toSendInvoice(e)}else t.$elementMessage(i.Message,"error")}))},changeShowItemPrice:function(){var e=this;this.$apiCall("api.Invoice.setShowPrice",{uniCode:this.invoiceInfo.uniCode},(function(t){"9999"==t.ErrorCode?e.getItem(!0):(e.showItemPrice=!e.showItemPrice,e.$elementMessage(t.Message,"error"))}))},selectTitle:function(e){this.modalCustomExport.selectedTitles.push(this.modalCustomExport.unselectedTitles[e]),this.modalCustomExport.unselectedTitles.splice(e,1)},removeTitle:function(e){this.modalCustomExport.unselectedTitles.unshift(this.modalCustomExport.selectedTitles[e]),this.modalCustomExport.selectedTitles.splice(e,1)},saveCustomExport:function(e){this.saveCustomExportSettingOnly(e)},saveCustomExportSettingOnly:function(e){var t=this;if(!this.modalCustomExport.selectedTitles.length)return this.$elementMessage(this.$t("myinvoice.leastOne"),"error"),!1;if(this.modalCustomExport.selectedTitles.some((function(e){return!e.name})))return this.$elementMessage(this.$t("myinvoice.notEmpty"),"error"),!1;this.$showLoading();var i={};this.modalCustomExport.selectedTitles.forEach((function(e){i[e.key]=e.name}));var a="b"==this.exportInvoiceType?"api.Invoice.saveInvoiceTitle":"api.Invoice.saveExportTitle";this.$apiCall(a,{titles:i},(function(a){if("9999"==a.ErrorCode)if(e>0){0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var s=function(e){document.getElementById("ifilePro").src=e},o="b"==t.exportInvoiceType?"api.Invoice.exportInvoice":"api.Invoice.exportOrder";t.$apiCall(o,{titles:i,invoiceId:t.exportItem.id,type:1==e?"excel":"csv"},(function(e){t.$hideLoading(),"9999"==e.ErrorCode?(t.innerVisible=!1,t.$elementMessage(t.$t("myinvoice.saveSettingAndExport"),"success"),s(e.Data.Results.file)):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}))}else t.$elementMessage(t.$t("myinvoice.saveSettingSuccess"),"success"),t.innerVisible=!1;else t.$hideLoading(),t.$elementMessage(a.Message,"error"),"1002"!=a.ErrorCode&&"1003"!=a.ErrorCode||t.$userFailure(t)}))},setExportOnly:function(e){var t=this;this.exportInvoiceType=e,this.$showLoading(),this.showCustom=!1,this.modalCustomExport=JSON.parse(this.modalCustomExportDefault);var i="b"==this.exportInvoiceType?"api.Invoice.exportInvoiceTitle":"api.Invoice.exportTitle";this.$apiCall(i,{},(function(e){if(t.$hideLoading(),"9999"==e.ErrorCode){for(var i in t.innerVisible=!0,e.Data.Results.default){var a={};a.key=i,a.orName=e.Data.Results.default[i],a.name=e.Data.Results.default[i],t.modalCustomExport.tags.push(a)}for(var i in e.Data.Results.titles){var s={};s.key=i,s.orName=e.Data.Results.titles[i],s.name=e.Data.Results.titles[i],t.modalCustomExport.selectedTitles.push(s)}t.modalCustomExport.tags.forEach((function(e){t.modalCustomExport.selectedTitles.some((function(t){return e.key==t.key}))||t.modalCustomExport.unselectedTitles.unshift(e),t.modalCustomExport.selectedTitles.some((function(i){e.key==i.key&&t.$set(i,"orName",e.name)}))}))}else t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t)}))},beforeHandleCommand:function(e,t){return{row:e,command:t}},handleCommandFn:function(e,t){this.exportItem=e,this.exportInvoiceType=t,this.setExportOnly(t)},handleCommand:function(e){var t=this;switch(this.exportItem=e.row,this.exportInvoiceType=e.command,e.command){case"a":this.$router.push({name:"importData",query:{rid:this.exportItem.relationshipId,id:this.exportItem.id}});break;case"b":this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');var i=function(e){document.getElementById("ifilePro").src=e},a="b"==this.exportInvoiceType?"api.Invoice.exportInvoice":"api.Invoice.exportOrder";this.$apiCall(a,{invoiceId:this.exportItem.id,type:"excel"},(function(e){t.$hideLoading(),"9999"==e.ErrorCode?(t.$elementMessage(t.$t("myinvoice.exportSuccess"),"success"),i(e.Data.Results.file)):(t.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||t.$userFailure(t))}));break;case"c":this.setExportOnly("c");break}},remoteMethodCustom:function(e){var t=this;this.selectArr=[],e&&(this.selectLoading=!0,this.$apiCall("api.Relationship.findByVendor",{name:e},(function(e){t.selectLoading=!1,9999==e.ErrorCode?t.selectArr=e.Data.Results:t.$message({message:e.Message,type:"error"})})))},clearFilter:function(){this.selectArr=[],this.filterParams=JSON.parse(this.filterParamsDefault),1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},filterGetItem:function(){this.orderOtherStatus=0,1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},filterGetItem2:function(e){this.cancelStatus=e,1==this.$route.query.page?this.getItem():this.$router.push({query:{page:1}})},dateChange:function(){this.filterParams.date.length>1&&(this.filterParams.dateFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.dateTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterGetItem())},cancelInvoice:function(e){var t=this;this.$confirm(this.$t("myinvoice.confirmToCancel"),"",{confirmButtonText:this.$t("myinvoice.cancel"),cancelButtonText:this.$t("myinvoice.discard"),type:"error"}).then((function(){t.loading=!0,t.$apiCall("api.Invoice.cancel",{invoiceId:e.id},(function(e){t.loading=!1,9999==e.ErrorCode?(t.$message({message:t.$t("myinvoice.cancelSuccess"),type:"success"}),t.getItem(!0)):t.$message({message:e.Message,type:"error"})}))})).catch((function(){}))},getItem:function(e){var t=this;this.loading=!0,this.$apiCall("api.Invoice.findByVendor",{page:this.page,rowsPerPage:this.rowsPerPage,timeFilter:this.filterParams.timeFilter,dateFrom:this.filterParams.dateFrom,dateTo:this.filterParams.dateTo,code:this.filterParams.code,status:2==this.cancelStatus?9:this.filterParams.status,customerRead:this.filterParams.customerRead,payStatus:this.filterParams.payStatus,relationshipId:this.filterParams.id,trackNumber:this.filterParams.trackNumber,codeName:this.filterParams.codeName,isAbnormal:10===this.orderOtherStatus,syncFail:11===this.orderOtherStatus,accountId:this.filterParams.accountId},(function(i){t.loading=!1,9999==i.ErrorCode?(t.items=[],i.Data.Results.forEach((function(e){7!=e.status&&(e.loadCnt=!1),e.cnt=null,e.cntText="",e.submitLoading=!1,t.items.push(e)})),t.total=Number(i.Data.Pagination.totalCount),t.totalPage=Number(i.Data.Pagination.totalPage),t.$getTableHeight(t),e||(t.$refs.gridTable.bodyWrapper.scrollTop=0)):t.$message({message:i.Message,type:"error"})}))},toPage:function(e){e!=this.$route.query.page&&this.$router.push({query:{page:e}})},changePageSize:function(e){this.rowsPerPage=e,localStorage.setItem("myInvoiceRowsPerPage",e),this.getItem()},gotoPage:function(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()},gotoImport:function(){this.$router.push({name:"importData"})},gotoInvoice:function(e){var t=this.$router.resolve({name:"Invoice",query:{uniCode:e.uniCode,fromPage:1}});window.open(t.href,"_blank")}}},c=l,d=(i("52ed"),i("50ee"),i("cba8")),m=Object(d["a"])(c,a,s,!1,null,"a4ecb86e",null);t["default"]=m.exports},"50ee":function(e,t,i){"use strict";i("162e")},"52ed":function(e,t,i){"use strict";i("1c54")},ca52:function(e,t,i){"use strict";var a=i("9277"),s=i("72ae"),o=i("b467"),r=i("f4b3"),n=i("be72"),l=i("dd3f"),c=i("191d"),d=i("753b"),m=i("b8af"),u=i("ec39"),p=i("ee76"),v=i("b92c"),h=p("slice"),f=u("species"),g=s.Array,y=Math.max;a({target:"Array",proto:!0,forced:!h},{slice:function(e,t){var i,a,s,u=d(this),p=c(u),h=l(e,p),w=l(void 0===t?p:t,p);if(o(u)&&(i=u.constructor,r(i)&&(i===g||o(i.prototype))?i=void 0:n(i)&&(i=i[f],null===i&&(i=void 0)),i===g||void 0===i))return v(u,h,w);for(a=new(void 0===i?g:i)(y(w-h,0)),s=0;h<w;h++,s++)h in u&&m(a,s,u[h]);return a.length=s,a}})}}]);