(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods-mgr-list"],{"236a":function(t,e,o){},"38e3":function(t,e,o){"use strict";o("df40")},"7e7e":function(t,e,o){"use strict";o.r(e);var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"goods-list-page"},[e("div",{ref:"tablefilter"},[e("div",{ref:"pageFilter",staticClass:"page-filter",staticStyle:{"border-bottom":"none"}},[e("el-form",{attrs:{inline:!0,size:"mini"}},[e("el-form-item",[e("el-input",{staticStyle:{width:"160px"},attrs:{clearable:"",size:"mini",placeholder:t.$t("goods.商品名称")},on:{clear:function(e){return t.clearFilter("name")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem()}},model:{value:t.filterData.nameIpt,callback:function(e){t.$set(t.filterData,"nameIpt",e)},expression:"filterData.nameIpt"}})],1),e("el-form-item",[e("el-input",{staticStyle:{width:"160px"},attrs:{clearable:"",size:"mini",placeholder:"sku"},on:{clear:function(e){return t.clearFilter("sku")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem()}},model:{value:t.filterData.sku,callback:function(e){t.$set(t.filterData,"sku",e)},expression:"filterData.sku"}})],1),e("el-form-item",[e("el-input",{staticStyle:{width:"160px"},attrs:{clearable:"",size:"mini",placeholder:"spu"},on:{clear:function(e){return t.clearFilter("spu")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGetItem()}},model:{value:t.filterData.spu,callback:function(e){t.$set(t.filterData,"spu",e)},expression:"filterData.spu"}})],1),e("el-cascader",{ref:"cascaderHandle",staticClass:"mg-r-15",attrs:{options:t.categroyArr,props:{expandTrigger:"hover",checkStrictly:!0},placeholder:t.$t("goods.商品分类"),size:"mini",filterable:"",clearable:"","show-all-levels":!1},on:{change:t.changeCategory},scopedSlots:t._u([{key:"default",fn:function({data:o}){return e("span",{on:{click:t.clickNode}},[t._v(t._s(o.label))])}}]),model:{value:t.filterData.categroyPath,callback:function(e){t.$set(t.filterData,"categroyPath",e)},expression:"filterData.categroyPath"}}),e("el-form-item",{staticStyle:{"padding-left":"0"},attrs:{label:t.$t("goods.商品金额：")}},[e("el-input-number",{staticStyle:{width:"80px"},attrs:{min:0,precision:2,controls:!1,placeholder:t.$t("goods.最小")},model:{value:t.filterData.costFromIpt,callback:function(e){t.$set(t.filterData,"costFromIpt",e)},expression:"filterData.costFromIpt"}})],1),e("span",{staticClass:"mg-r-10"},[t._v("-")]),e("el-form-item",{staticStyle:{"margin-right":"20px"}},[e("el-input-number",{staticStyle:{width:"80px"},attrs:{min:0,precision:2,controls:!1,placeholder:t.$t("goods.最大")},model:{value:t.filterData.costToIpt,callback:function(e){t.$set(t.filterData,"costToIpt",e)},expression:"filterData.costToIpt"}})],1),e("el-form-item",{staticStyle:{"margin-right":"25px"}},[e("el-select",{attrs:{placeholder:t.$t("goods.请选择 - 商品类型")},on:{change:function(e){return t.filterGetItem("productType")}},model:{value:t.filterData.productType,callback:function(e){t.$set(t.filterData,"productType",e)},expression:"filterData.productType"}},t._l(t.productTypeArr,(function(o){return e("el-option",{key:o.value,attrs:{label:t.$t(o.label),value:o.value}})})),1)],1),e("el-form-item",{staticStyle:{"margin-bottom":"0"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.filterGetItem()}}},[t._v(t._s(t.$t("myinvoice.filter")))]),e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.clearFilter()}}},[t._v(t._s(t.$t("goods.重置")))])],1)],1)],1),e("div",{staticClass:"mg-b-10"},[t.filterData.name?e("el-tag",{staticClass:"mg-r-5",attrs:{size:"small",type:"info",closable:""},on:{close:function(e){return t.clearFilter("name")}}},[t._v(t._s(t.$t("goods.商品名称："))),e("b",{staticStyle:{color:"#5c6ac4"}},[t._v(t._s(t.filterData.name))])]):t._e(),t.filterData.categoryId?e("el-tag",{staticClass:"mg-r-5",attrs:{size:"small",type:"info",closable:""},on:{close:function(e){return t.clearFilter("categoryId")}}},[t._v(t._s(t.$t("goods.商品分类："))),e("b",{staticStyle:{color:"#5c6ac4"}},[t._v(t._s(t.showCategroyText(t.filterData.categoryId)))])]):t._e(),t.filterData.costFrom||t.filterData.costTo?e("el-tag",{staticClass:"mg-r-5",attrs:{size:"small",type:"info",closable:""},on:{close:function(e){return t.clearFilter("cost")}}},[t._v(t._s(t.$t("goods.商品金额："))),e("b",{staticStyle:{color:"#5c6ac4"}},[t._v(t._s(t.filterData.costFrom?Number(t.filterData.costFrom).toFixed(2):"min")+" - "+t._s(t.filterData.costTo?Number(t.filterData.costTo).toFixed(2):"max"))])]):t._e(),t.filterData.productType?e("el-tag",{staticClass:"mg-r-5",attrs:{size:"small",type:"info",closable:""},on:{close:function(e){return t.clearFilter("productType")}}},[t._v(" "+t._s(t.$t("goods.商品类型: "))),e("b",{staticStyle:{color:"#5c6ac4"}},[t._v(t._s(t.showProductType(t.filterData.productType)))])]):t._e()],1)]),e("div",{staticClass:"table-wrap",staticStyle:{"border-top":"1px #ebeef5 solid","padding-top":"5px"}},[t.items.length?e("div",{staticClass:"table-action"},[e("div",{staticClass:"mg-r-15"},[e("el-checkbox",{on:{change:t.changeAllCheckbox},model:{value:t.isAllCheck,callback:function(e){t.isAllCheck=e},expression:"isAllCheck"}},[e("span",{staticStyle:{color:"#606266","font-size":"12px"}},[t._v(t._s(t.$t("goods.全选/全不选"))+" ("+t._s(t.checkboxArr.length)+")")])])],1),e("div",[e("el-button",{attrs:{type:"primary",size:"mini",disabled:!t.$isRole(t.$route.meta.roleWrite)||!t.checkboxArr.length},on:{click:function(e){return t.confirmShelvesAll(!0)}}},[t._v(t._s(t.$t("goods.批量上架")))]),e("el-button",{attrs:{type:"info",plain:"",size:"mini",disabled:!t.$isRole(t.$route.meta.roleWrite)||!t.checkboxArr.length},on:{click:function(e){return t.confirmShelvesAll(!1)}}},[t._v(t._s(t.$t("goods.批量下架")))]),e("el-button",{attrs:{type:"danger",size:"mini",disabled:!t.$isRole(t.$route.meta.roleWrite)||!t.checkboxArr.length},on:{click:t.delSelected}},[t._v(t._s(t.$t("goods.删除")))]),e("el-button",{attrs:{type:"primary",size:"mini",disabled:!t.$isRole(t.$route.meta.roleWrite)||!t.checkboxArr.length},on:{click:t.openChangeCategory}},[t._v(" "+t._s(t.$t("goods.批量修改类目"))+" ")])],1)]):t._e(),t.items.length||t.loading?e("el-table",{ref:"gridTable",attrs:{data:t.items,stripe:""}},[e("el-table-column",{attrs:{label:"",width:"40"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-checkbox",{staticClass:"none-label",attrs:{label:o.row.id},model:{value:t.checkboxArr,callback:function(e){t.checkboxArr=e},expression:"checkboxArr"}})]}}],null,!1,2613777098)}),e("el-table-column",{attrs:{label:t.$t("goods.操作"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:function(e){return t.gotoEdit(o.row.id)}}},[t._v(t._s(t.$t("goods.编辑")))]),"1"==o.row.status?[e("br"),148982!=t.vendorId&&146428!=t.vendorId&&144875!=t.vendorId&&144843!=t.vendorId&&143779!=t.vendorId&&143654!=t.vendorId&&74!=t.vendorId?e("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary",href:`//${t.host.indexOf("sandbox")>-1?"sandboxshop":"shop"}${o.row.shopId}.myourmall.com/item/${o.row.id}/${o.row.name}.html`,target:"_blank"}},[t._v(" "+t._s(t.$t("goods.预览"))+" ")]):e("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary",href:`//${t.host.indexOf("sandbox")>-1?"sandboxshop":"shop"}${o.row.shopId}.myourmall.com/itemOld/${o.row.id}/${o.row.name}.html`,target:"_blank"}},[t._v(" "+t._s(t.$t("goods.预览"))+" ")])]:t._e(),e("br"),e("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:function(e){return t.lookLog(o.row.id)}}},[t._v(t._s(t.$t("goods.日志")))])]}}],null,!1,3232353248)}),e("el-table-column",{attrs:{label:t.$t("goods.商品图片"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"80px",height:"80px",border:"1px solid #ddd","background-color":"#fff"},attrs:{src:t.row.imgUrl,fit:"contain","scroll-container":".main-scroll .el-scrollbar__wrap","preview-src-list":t.row.imgUrlArr,lazy:""}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"})])])]}}],null,!1,2165552219)}),e("el-table-column",{attrs:{label:t.$t("goods.商品名称")},scopedSlots:t._u([{key:"default",fn:function(o){return[e("p",{staticClass:"tx-ellipsis3",staticStyle:{"line-height":"22px"}},[t._v(t._s(o.row.name))])]}}],null,!1,2941362605)}),e("el-table-column",{attrs:{label:t.$t("goods.可见范围")},scopedSlots:t._u([{key:"default",fn:function(o){return[o.row.isAllVisible?e("div",[t._v(t._s(t.$t("goods.全部可见")))]):e("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(e){return t.openVisiableCus(o.row.id)}}},[t._v(t._s(t.$t("goods.指定客户可见")))])]}}],null,!1,2487963515)}),e("el-table-column",{attrs:{label:`${t.$t("goods.创建时间")}/ ${t.$t("goods.修改时间")}`,width:"180"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("p",[t._v(t._s(o.row.timeCreated))]),e("p",[t._v(t._s(o.row.timeLastGet))])]}}],null,!1,499139432)}),e("el-table-column",{attrs:{label:t.$t("goods.是否上架"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-switch",{attrs:{disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{change:function(e){return t.confirmShelves(o.row)}},model:{value:o.row.statusIpt,callback:function(e){t.$set(o.row,"statusIpt",e)},expression:"scope.row.statusIpt"}})]}}],null,!1,1059800648)})],1):e("div",["GoodsMgrAll"!=t.$route.name||t.filterData.categoryId||t.filterData.name||t.filterData.costFrom||t.filterData.costTo||t.filterData.productType?e("div",{staticClass:"none-goods"},[e("p",{staticStyle:{color:"#909399"}},[t._v(t._s(t.$t("goods.暂无商品")))])]):e("div",{staticClass:"none-goods"},[e("div",{staticClass:"i"}),e("p",{staticClass:"p1"},[t._v(t._s(t.$t("goods.新建并上架你的商品")))]),e("p",{staticClass:"p2"},[t._v(t._s(t.$t("goods.新建并上架你的第一件商品，上架完你的优质商品后，用户才可以在你的网站上进行购物。")))]),e("div",{staticClass:"action"},[e("el-button",{attrs:{type:"primary",size:"small",disabled:!t.$isRole(t.$route.meta.roleWrite)},on:{click:function(e){return t.goto("AddGoods")}}},[t._v(t._s(t.$t("goods.新建商品")))])],1)])])],1),e("el-dialog",{attrs:{title:t.$t("goods.商品日志"),width:"35%",visible:t.dialogVisibleLog},on:{"update:visible":function(e){t.dialogVisibleLog=e}}},[e("el-card",{staticClass:"box-card"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableLogData,border:""}},[e("el-table-column",{attrs:{prop:"userName",label:t.$t("goods.操作者"),width:"180"}}),e("el-table-column",{attrs:{prop:"content",label:t.$t("goods.操作描述")}}),e("el-table-column",{attrs:{prop:"timeCreated",label:t.$t("goods.操作时间")}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleLog=!1}}},[t._v(t._s(t.$t("goods.确定")))])],1)],1)],1)},s=[],r=(o("14d9"),{props:["loading","items","categroyArr","filterData"],data(){return{host:location.host,isAllCheck:!1,checkboxArr:[],productTypeArr:this.$dict.productTypeArr,vendorId:localStorage.getItem("vendorId"),showLog:!1,dialogVisibleLog:!1,tableLogData:[]}},watch:{checkboxArr(){this.isAllCheck=this.items.length&&this.items.length==this.checkboxArr.length}},methods:{openVisiableCus(t){this.$emit("openVisiableCus",t)},openChangeCategory(){this.$emit("openChangeCategory",this.checkboxArr)},showProductType(t){let e="";return this.$dict.productTypeArr.forEach(o=>{o.value==t&&(e=o.label)}),this.$t(e)},lookLog(t){this.dialogVisibleLog=!0,this.$apiCall("api.ProductLog.finds",{productId:t},t=>{9999==t.ErrorCode&&(this.tableLogData=t.Data.Results)})},gotoEdit(t){"148982"!=this.vendorId&&"146428"!=this.vendorId&&"144875"!=this.vendorId&&"144843"!=this.vendorId&&"143779"!=this.vendorId&&"143654"!=this.vendorId&&"74"!=this.vendorId?this.$router.push({name:"AddGoods2",query:{id:t}}):this.$router.push({name:"AddGoods",query:{id:t}})},filterGetItem(){this.$emit("filterGetItem")},clearFilter(t){this.$emit("clearFilter",t)},delSelected(){this.checkboxArr.length?this.$confirm(this.$t("goods.确定要删除选中的{len}个商品吗？",{len:this.checkboxArr.length}),{confirmButtonText:this.$t("goods.删除"),cancelButtonText:this.$t("goods.取消"),confirmButtonClass:"el-button--danger",type:"warning"}).then(()=>{this.$emit("delSelected",this.checkboxArr)}).catch():this.$message({message:this.$t("goods.请先选择一个要操作的商品"),type:"error"})},confirmShelvesAll(t){this.checkboxArr.length?this.$confirm(this.$t("goods.确定要{s1}选中的商品吗？ 选中的商品将{s2}展示在您的网站上。",{s1:t?this.$t("goods.上架"):this.$t("goods.下架"),s2:t?"":this.$t("goods.不再")}),{confirmButtonText:this.$t("goods.确定"),cancelButtonText:this.$t("goods.取消"),type:"warning"}).then(()=>{this.$emit("changeStatusAll",this.checkboxArr,t)}).catch():this.$message({message:this.$t("goods.请先选择一个要操作的商品"),type:"error"})},confirmShelves(t){this.$confirm(this.$t("goods.已{s1}的商品将{s2}展示在您的网站上?, 是否{s1}",{s1:t.statusIpt?this.$t("goods.上架"):this.$t("goods.下架"),s2:t.statusIpt?"":this.$t("goods.不再")}),{confirmButtonText:this.$t("goods.确定"),cancelButtonText:this.$t("goods.取消"),type:"warning"}).then(()=>{this.$emit("changeStatus",t)}).catch(()=>{t.statusIpt=!t.statusIpt})},changeAllCheckbox(t){this.checkboxArr=t?this.items.map(t=>t.id):[]},showCategroyText(t){if(t){let e="";return this.categroyArr.forEach(o=>{o.id==t&&(e=o.label),o.children&&o.children.length&&o.children.forEach(o=>{o.id==t&&(e=o.label),o.children&&o.children.length&&o.children.forEach(o=>{o.id==t&&(e=o.label)})})}),e||"???"}return"--"},clickNode(t){t.target.parentElement.parentElement.firstElementChild.click()},changeCategory(){this.$refs.cascaderHandle.dropDownVisible=!1,this.filterData.categroyPath.length?this.filterGetItem():this.clearFilter("categoryId")},goto(t){this.$emit("goto",t)}}}),i=r,a=(o("38e3"),o("ae1e"),o("2877")),n=Object(a["a"])(i,l,s,!1,null,"4905c73c",null);e["default"]=n.exports},ae1e:function(t,e,o){"use strict";o("236a")},df40:function(t,e,o){}}]);