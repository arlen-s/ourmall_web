(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["storeSettingHeader"],{"10ce":function(t,e,s){"use strict";s.r(e);s("14d9");var i=function(){var t=this,e=t._self._c;return t.setting?e("div",{staticClass:"setting-page"},[e("el-scrollbar",{staticClass:"left"},[e("div",{staticClass:"content"},[e("h1",{on:{click:t.goBack}},[e("el-link",{attrs:{icon:"el-icon-arrow-left",underline:!1}},[t._v(t._s(t.$t("storeSetting.全站页头")))])],1),e("el-card",[e("uploadLogo",{staticClass:"mg-b-20",attrs:{logo:t.setting.logo},on:{changeLogo:t.changeLogo}}),e("div",{staticClass:"logo-w"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.自定义Logo宽度")))]),e("div",{staticClass:"value"},[e("el-slider",{attrs:{min:60,max:400,"show-tooltip":!1},model:{value:t.setting.logoWidth,callback:function(e){t.$set(t.setting,"logoWidth",e)},expression:"setting.logoWidth"}}),e("span",[t._v(t._s(t.setting.logoWidth)+"px")])],1)]),e("div",{staticClass:"change-color-box"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.setting.isTransparent,expression:"!setting.isTransparent"}]},[e("div",{staticClass:"row-color mg-b-10"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.背景颜色")))]),e("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.setting.backgroundColor,callback:function(e){t.$set(t.setting,"backgroundColor",e)},expression:"setting.backgroundColor"}})],1),e("div",{staticClass:"row-color mg-b-20"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.文字颜色")))]),e("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.setting.color,callback:function(e){t.$set(t.setting,"color",e)},expression:"setting.color"}})],1)]),e("div",{staticClass:"row-color mg-b-10"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.启用透明页头")))]),e("el-switch",{model:{value:t.setting.isTransparent,callback:function(e){t.$set(t.setting,"isTransparent",e)},expression:"setting.isTransparent"}})],1),e("p",{staticClass:"mg-b-10",staticStyle:{color:"#909399","font-size":"12px"}},[t._v(t._s(t.$t("storeSetting.在顶部部分是轮播图时适用,透明页头可以直接叠加在轮播图上")))]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.setting.isTransparent,expression:"setting.isTransparent"}],staticClass:"row-color"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.透明页头文字颜色")))]),e("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.setting.transparentColor,callback:function(e){t.$set(t.setting,"transparentColor",e)},expression:"setting.transparentColor"}})],1)]),e("div",{staticClass:"selectedNav"},[e("h2",[t._v(t._s(t.$t("storeSetting.选择导航菜单")))]),e("div",[e("el-radio-group",{model:{value:t.setting.activeMenu,callback:function(e){t.$set(t.setting,"activeMenu",e)},expression:"setting.activeMenu"}},t._l(t.$store.state.configJson.menu,(function(s){return e("el-radio",{key:s.id,attrs:{label:s.id}},[t._v(t._s(s.name))])})),1),e("el-divider"),e("div",{staticClass:"action-wrap"},[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({name:"menuSetting"})}}},[e("i",{staticClass:"el-icon-circle-plus"}),t._v(" "+t._s(t.$t("storeSetting.创建导航菜单")))])],1)],1)]),e("div",{staticClass:"change-seach"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("storeSetting.展示搜索入口")))]),e("el-switch",{model:{value:t.setting.isVisibleSearch,callback:function(e){t.$set(t.setting,"isVisibleSearch",e)},expression:"setting.isVisibleSearch"}})],1)],1)],1)]),e("el-scrollbar",{staticClass:"right"},[e("div",{staticClass:"content"},[e("domeHeader",{attrs:{data:t.setting,headerMenu:t.headerMenu}}),e("demoBody",{attrs:{data:t.$store.state.configJson.sort,header:t.setting}}),e("demoFooter",{attrs:{setting:t.$store.state.configJson.footer}})],1)]),e("div",{staticClass:"action"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v(t._s(t.$t("storeSetting.完成")))])],1)],1):t._e()},a=[],o=s("b76a"),n=s.n(o),l=s("eeb0"),r=s("826e"),g=s("8c3c"),c=s("db46"),d={data(){return{isSave:!1,headerMenu:[],setting:{logo:"",logoWidth:60,backgroundColor:"#fff",color:"#606266",isTransparent:!1,transparentColor:"#606266",menu:[],isVisibleSearch:!0,activeMenu:""}}},components:{draggable:n.a,uploadLogo:l["a"],domeHeader:r["a"],demoBody:g["a"],demoFooter:c["a"]},watch:{"setting.activeMenu":{handler(){this.setting.activeMenu&&this.$store.state.configJson.menu.forEach(t=>{t.id==this.setting.activeMenu&&(this.headerMenu=t)})},deep:!0,immediate:!0}},beforeRouteLeave(t,e,s){if(this.isSave)s();else{let t=confirm(this.$t("logistics.当前页面还未保存，确定要离开吗?"));t?s():s(!1)}},created(){this.$apiCall("api.VendorShop.getShopConfig",{},t=>{9999==t.ErrorCode&&(0!==t.Data.Results.length&&this.$store.commit("getShopConfig",t.Data.Results),this.setting=JSON.parse(JSON.stringify(this.$store.state.configJson.header)))})},methods:{goBack(){this.$router.push({name:"storeSettingMain"})},save(){this.isSave=!0,this.setting.menu.forEach(t=>{"9998"==t.link.value&&(t.link.url=t.url)}),this.$store.commit("setStoreHeader",this.setting),this.$apiCall("api.VendorShop.setShopConfig",{configJson:JSON.stringify(this.$store.state.configJson)},t=>{9999==t.ErrorCode?(this.setVonderLogo(),this.$elementMessage(this.$t("storeSetting.保存成功"),"success")):this.$message({message:t.Message,type:"error"})})},setVonderLogo(){this.$apiCall("api.VendorShop.changeByVendor",{logo:this.setting.logo||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAA3NCSVQICAjb4U/gAAAAXVBMVEX////////////////////////////////////////////////////////////y8vLl5eXZ2dnMzMy/v7+ysrKlpaWZmZmMjIx/f39ycnJmZmZZWVlMTEw/Pz8zMzMXc/8wAAAAH3RSTlMAIjNEVWZ3iJmqu8zd7v//////////////////////812x6gAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDgvMjUvMjElHVhBAAAC10lEQVRogc2a7ZaCIBCGLb9KE9PUiFXu/zIXRF1FSUSYs++fpDnxBDMDCHiepvwoTlI0KU3iyNf9rZaCeFb9XGkc2CGE923AqHt4luDfsu8Irux2puPCZJ8glJg2J3zoIrgeJhhfuxVTaw53WnwUwRUfQgQa7t5SdiCijZpxrDEXRebpKb3oMK6GXTUqu+4zwnMIrt1gtsDYpVhh7FAsMb5SrDG+UK72GAgpYuxyMnaXyrbz5VQOrpVuMU6MJdvaGGEC2wyE1qOlVYcIZc47i0vqMN8FA6HlXHl4rtVTMmdYTPWl5ol/aF1yRA+Ahsyb4sgjXJNXHIWW0BhgN5eQm7tk/1Pm3O1cwvU77x9nde8hbhkIORrjlwpcjb9z8bHY8qy7Vqp0SUFIZYuiTPeS0sYWxPci95BI5XebkFg1AsuQZ1mWc3NZ5mqrpEQVXEtI3VKm7j1U3HS8+KaUbFlXSlX5voBgVgV+s6p+8rH4xhxENqwb0oFU4vf5R3w3FItOQCSrKYT9ySf/zDvasY+foVgJiGQ1hDzHvkcfXl8+FfsHyWoK+XtsKC1nxb56yfqvIQWlWDyxOCq4RRRFv0lWUwhiHhXB2XLXsrrbvjQ4fmk1huDhz9biO0JpzRvSCohkPQhpSa8C5SxoSfXCQ7qxDqK47NOcQyTrJkQ9rAxizsyJePyIWl79qDINK5J1rVQ1QOblqP6nRd009ZQFedWXpgxZWldKTkzxL93ZIFZNWhoiyryQFBmstivM0yHHU2/tyTdY27HM7ggLKXU0STJZEhWYE6j2aiaFWtyBLFNBFtwwrw4gL0Egr3MwL6Ygr9ggmwUw2x4gGzgwW1Egm2ow24MgG50wW7Ywm88g2+gwBwIwRxsghzQwx00wB2cwR4Awh5kwx7IwB8wwR+UeyKG/B3N9wbQxxy5ieDBXSjyQyzE9xv01Hy6AC0uiOc6vXgm5v0Q26Mx1uF+/ksTeg/ksIQAAAABJRU5ErkJggg=="},t=>{9999==t.ErrorCode||this.$message({message:t.Message,type:"error"})})},delNav(t){this.setting.menu.splice(t,1)},changeLogo(t){this.setting.logo=t},addNav(){this.setting.menu.push({timestamp:(new Date).getTime(),name:"",link:null,url:""}),this.$nextTick(()=>{let t=document.querySelectorAll(".ipt-nav-box .ipt-name input");t[t.length-1].focus()})}}},u=d,p=(s("ccfd"),s("eb36"),s("2877")),h=Object(p["a"])(u,i,a,!1,null,"2c1e0252",null);e["default"]=h.exports},"1cfd":function(t,e,s){},2899:function(t,e,s){"use strict";s("9f06")},"2da2":function(t,e,s){},"9f06":function(t,e,s){},ccfd:function(t,e,s){"use strict";s("1cfd")},eb36:function(t,e,s){"use strict";s("2da2")},eeb0:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"upload-logo"},[t._m(0),t.logo?e("div",{staticClass:"logo-preview"},[e("div",{staticClass:"img-box",style:{backgroundImage:`url(${t.logo})`}}),e("div",{staticClass:"action"},[e("el-link",{attrs:{type:"primary"},on:{click:t.openUploadImg}},[t._v(t._s(t.$t("storeSetting.更改")))]),e("el-link",{attrs:{type:"danger"},on:{click:t.delImg}},[t._v(t._s(t.$t("storeSetting.删除")))])],1)]):e("div",{staticClass:"upload-box"},[e("a",{staticClass:"upload-btn",attrs:{href:"javascript:;"},on:{click:t.openUploadImg}},[e("i",{staticClass:"el-icon-plus"}),t._v(t._s(t.$t("storeSetting.添加图片"))+" ")])]),e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"uploadImg",accept:"image/jpeg, image/png, image/gif, image/webp"},on:{change:function(e){return t.Base64(e)}}})])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("h2",[t._v("Logo")])])}],o={props:["logo"],data(){return{loading:!1}},methods:{delImg(){this.$emit("changeLogo","")},uploadImgBase64(t,e){this.loading=!0,this.$apiCall("api.Comment.uploadImg",{imgUrlBase64:t,ext:e},t=>{this.loading=!1,document.getElementById("uploadImg").value="",9999==t.ErrorCode?this.$emit("changeLogo",t.Data.Results.imgUrl):this.$message({message:t.Message,type:"error"})})},Base64(t){if(t.target.value){if(t.target.files[0].size/1024/1024>1)return this.$message({message:this.$t("category.上传文件不能大于1MB"),type:"error"}),void(t.target.value="");let e=new FileReader,s=new Image,i="";e.onload=t=>{s.src=t.target.result;let e=t.target.result.match(/data:image\/(.*);base64,.*/);i=e[1],this.uploadImgBase64(t.target.result.split(",").pop(),i)},e.readAsDataURL(t.target.files[0])}},openUploadImg(){document.getElementById("uploadImg").click()}}},n=o,l=(s("2899"),s("2877")),r=Object(l["a"])(n,i,a,!1,null,"9996928e",null);e["a"]=r.exports}}]);