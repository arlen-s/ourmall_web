(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orders"],{"8e7d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$store.state.userInfo.canUseWallet?a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"contentpanel",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.3)"}},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[e._m(0),a("div",{staticClass:"right"},[e.$store.state.userInfo.walletOpen?a("el-button",{attrs:{size:"small",icon:"el-icon-setting"},on:{click:e.closeWallet}},[e._v("停用")]):e._e()],1)]),a("div",{staticClass:"pagebody"},[a("el-card",[a("el-row",[e.$store.state.userInfo.walletOpen?a("el-col",{ref:"pageTabs",attrs:{span:24}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$t("router.账户概览"),name:"finance-account"}}),a("el-tab-pane",{attrs:{label:"提现明细",name:"list-withdraw"}}),a("el-tab-pane",{attrs:{label:"扣款明细",name:"list-withhold"}}),a("el-tab-pane",{attrs:{label:"冻结明细",name:"list-frozen"}}),a("el-tab-pane",{attrs:{label:"订单结算明细",name:"list-settle"}}),a("el-tab-pane",{attrs:{label:"订单流水记录",name:"list"}})],1)],1):e._e(),a("el-col",{attrs:{span:24}},[a("router-view",{key:e.pageKey,ref:"subPage",attrs:{activeName:e.activeName}})],1)],1)],1)],1)]):e._e()},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left d-flex"},[a("div",{staticClass:"title mg-r-20"},[a("i",{staticClass:"el-icon-s-finance"}),a("h2",[e._v("我的钱包")])]),a("div",{staticClass:"mg-t-10"})])}],i=(a("10dd"),{data:function(){return{loading:!1,pageKey:(new Date).valueOf(),activeName:""}},mounted:function(){this.activeName=this.$route.name},methods:{closeWallet:function(){var e=this;this.$confirm("是否要关闭线上支付方式？","",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"el-button--danger"}).then((function(){e.loading=!0,e.$apiCall("api.User.openWallet",{},(function(t){"9999"==t.ErrorCode?(e.$message({message:"激活关闭成功",type:"success"}),"finance-account"!=e.$route.name&&e.$router.push({name:"finance-account"}),setTimeout((function(){location.reload()}),2e3)):e.$message({message:t.Message,type:"error"})}))})).catch((function(){}))},handleClick:function(e){e.name==this.$route.name?this.pageKey=(new Date).valueOf():this.$router.push({name:e.name})}}}),l=i,r=a("cba8"),c=Object(r["a"])(l,n,s,!1,null,null,null);t["default"]=c.exports},a78a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentpanel orders-page"},[a("div",{ref:"pageHeader",staticClass:"pagetitle"},[a("div",{staticClass:"left d-flex"},[a("div",{staticClass:"title mg-r-20"},[a("i",{staticClass:"el-icon-s-order"}),a("h2",[e._v(e._s(e.$t("myinvoice.purchaseOrders")))])]),a("div",{staticClass:"mg-t-10"},[1==e.cancelStatus?a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.filterGetItem(2)}}},[e._v(e._s(e.$t("myinvoice.viewCancelled")))]):e._e(),2==e.cancelStatus?a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.filterGetItem(1)}}},[e._v(e._s(e.$t("myinvoice.viewAll")))]):e._e()],1)]),a("div",{staticClass:"right"},["waitingForOffer"==e.activeName||"waitingForPayment"==e.activeName?a("el-button",{attrs:{disabled:!(e.checkboxArr.length>1),type:"success",size:"small"},on:{click:e.toMergeInvoice}},[e._v(e._s(e.$t("myinvoice.合并订单"))+" "+e._s(e.checkboxArr.length>1?e.checkboxArr.length:""))]):e._e(),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.gotoImport}},[e._v(e._s(e.$t("myinvoice.手工创建采购单")))])],1)]),a("div",{staticClass:"pagebody"},[a("el-card",[a("el-row",[a("el-col",{ref:"pageTabs",attrs:{span:24}},[1==e.cancelStatus?a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$t("myinvoice.全部订单"),name:"allOrders"}}),a("el-tab-pane",{attrs:{label:e.$t("myinvoice.待我报价"),name:"waitingForOffer"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("myinvoice.待我报价"))+" "),a("span",{staticClass:"tx-danger"},[e._v("("+e._s(e.cnt.waitCompleteCnt)+")")])])]),a("el-tab-pane",{attrs:{label:e.$t("myinvoice.待客户付款"),name:"waitingForPayment"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("myinvoice.待客户付款"))+" "),a("span",{staticClass:"tx-warning"},[e._v("("+e._s(e.cnt.waitCustomerPayCnt)+")")])])]),a("el-tab-pane",{attrs:{label:e.$t("myinvoice.待我确认收款"),name:"waitingForConfirm"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("myinvoice.待我确认收款"))+" "),a("span",{staticClass:"tx-warning"},[e._v("("+e._s(e.cnt.waitPayCnt)+")")])])]),a("el-tab-pane",{attrs:{label:e.$t("myinvoice.已付款待发货"),name:"waitingForDelivery"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("myinvoice.已付款待发货"))+" "),a("span",{staticClass:"tx-warning"},[e._v("("+e._s(e.cnt.waitDeliverCnt)+")")])])]),a("el-tab-pane",{attrs:{label:e.$t("myinvoice.全部发货"),name:"fullDeliveryOrder"}}),a("el-tab-pane",{attrs:{label:e.$t("myinvoice.有异常"),name:"abnormal"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("myinvoice.有异常"))+" "),a("span",{staticClass:"tx-danger"},[e._v("("+e._s(e.cnt.abnormalCnt)+")")])])])],1):e._e()],1),a("el-col",{attrs:{span:24}},[a("router-view",{key:e.pageKey,ref:"subPage",attrs:{cancelStatus:e.cancelStatus,activeName:e.activeName},on:{getTableHeight:e.getTableHeight,getNum:e.getNum,checkedArr:e.checkedArr}})],1)],1)],1)],1)])},s=[],i=a("f026"),l=(a("10dd"),a("51b3"),{data:function(){return{isShow:!1,pageKey:(new Date).valueOf(),activeName:"",cancelStatus:1,cnt:{abnormalCnt:0},checkboxArr:[]}},mounted:function(){this.activeName=this.$route.name,this.getNum()},watch:{$route:function(){this.activeName=this.$route.name,this.getNum()}},methods:{toMergeInvoice:function(){var e=this;this.$confirm("确认要合并采购单吗？","订单合并",{confirmButtonText:"合并",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,e.$apiCall("api.Invoice.mergeInvoice",{invoiceIds:e.checkboxArr},(function(t){"9999"==t.ErrorCode?(e.loading=!1,e.checkboxArr=[],e.$elementMessage("合并成功","success"),e.$refs.subPage.checkboxArr=[],e.$refs.subPage.clearFilter()):e.$elementMessage(t.Message,"error")}))}))},checkedArr:function(e){this.checkboxArr=e},filterGetItem:function(e){this.$router.push({name:"allOrders"}),this.activeName="allOrders",this.cancelStatus=e},getNum:function(){var e=this;this.$apiCall("api.Invoice.vendorInvoiceCnt",{},(function(t){if("9999"==t.ErrorCode)for(var a in e.cnt=Object(i["a"])({},t.Data.Results),e.cnt)e.cnt[a]=Number(e.cnt[a]);else e.$elementMessage(t.Message,"error")}))},gotoImport:function(){this.$router.push({name:"importData"})},handleClick:function(e){this.checkboxArr=[],e.name==this.$route.name?this.pageKey=(new Date).valueOf():this.$router.push({name:e.name})},getTableHeight:function(e){var t=this;clearTimeout(this.reSizeTime),this.reSizeTime=setTimeout((function(){var a=t.$root.$children[0].$refs.mainScroll.wrap.offsetHeight-(t.$refs.pageHeader.offsetHeight+t.$refs.pageTabs.$el.offsetHeight+e.$refs.tablefilter.offsetHeight+e.$refs.tableFooter.offsetHeight)-120;e.tableHeight=a>200?a:200}),500)}}}),r=l,c=a("cba8"),o=Object(c["a"])(r,n,s,!1,null,null,null);t["default"]=o.exports}}]);