(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ordersManagement"],{"0136":function(e,t,s){},"07f3":function(e,t,s){},"13d5":function(e,t,s){"use strict";var a=s("23e7"),i=s("d58f").left,r=s("a640"),o=s("2d00"),l=s("605d"),n=!l&&o>79&&o<83,d=n||!r("reduce");a({target:"Array",proto:!0,forced:d},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},"1efd":function(e,t,s){"use strict";s("abbe")},"1fce":function(e,t,s){},2418:function(e,t,s){"use strict";s("a4a5")},3933:function(e,t,s){},4383:function(e,t,s){},"4e6e":function(e,t,s){"use strict";s("4383")},5538:function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.authData.isShow,title:e.$t("orders.mabang"),width:"800px"},on:{"update:visible":function(t){return e.$set(e.authData,"isShow",t)}}},[t("el-divider"),t("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[t("div",[t("div",{staticClass:"mg-y-20"},[t("span",{staticStyle:{margin:"0 16px",display:"inline-block"}},[e._v(e._s(e.$t("invoice.tokenerp")))]),e.isStaff?[t("span",{staticClass:"mg-r-10"},[e._v(" "+e._s(e.authData.staffData&&e.authData.staffData.secretKey?e.authData.staffData.secretKey:"---")+" ")]),e.authData.staffData&&e.authData.staffData.secretKey?t("el-button",{attrs:{size:"mini",type:"text"}},[t("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.authData.staffData.secretKey,expression:"authData.staffData.secretKey",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):e._e()]:[t("span",{staticClass:"mg-r-10"},[e._v(e._s(e.$store.state.userInfo&&e.$store.state.userInfo.secretKey?e.$store.state.userInfo.secretKey:"---"))]),e.$store.state.userInfo&&e.$store.state.userInfo.secretKey?t("el-button",{attrs:{size:"mini",type:"text"}},[t("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.$store.state.userInfo.secretKey,expression:"$store.state.userInfo.secretKey",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]):e._e()],t("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"mini",type:"text"},on:{click:e.openSecretKey}},[e._v(" "+e._s(e.$t("invoice.usertoken"))+" ")])],2),t("el-alert",{attrs:{title:e.isStaff?e.$t("invoice.将员工令牌授权到马帮ERP之前"):e.$t("invoice.如果已经在erp授权了员工令牌"),type:"warning",closable:!1}})],1)]),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.authData.isShow=!1}}},[e._v("取消")])],1)],1)},i=[],r={props:["authData","isStaff"],data(){return{shopName:"",invoiceInfo:{}}},methods:{openSecretKey(){this.$emit("openSecretKey")},querySearch(e,t){var s=this.authData.shopData,a=e?s.filter(this.createFilter(e)):s;t(a)},createFilter(e){return t=>0===t.value.toLowerCase().indexOf(e.toLowerCase())},handleSelect(e){this.shopName=e.value},onCopy(e){this.$elementMessage(this.$t("successfullyToClipboard"),"success")},onError(e){this.$elementMessage(this.$t("failedToClipboard"),"error")},confirmMoneyFn(){this.tempCode=`${this.invoiceInfo.id}${Date.parse(new Date)}`,this.$apiCall("api.Invoice.setSyncToErp",{invoiceId:this.invoiceInfo.id,shopName:this.shopName,tempCode:this.tempCode},e=>{}),this.DialogLoadingCnt.loadingCnt=0,this.DialogLoadingCnt.isShow=!0,this.getInvocieTime=setInterval(()=>{this.$apiCall("api.Invoice.checkPriceResult",{tempCode:this.tempCode,type:4},e=>{if("9999"==e.ErrorCode){let t=e.Data.Results;Number(t.count)&&Number(t.total)&&(this.DialogLoadingCnt.loadingCnt=t.count/t.total),1!=t.status&&(this.tempCode="",clearInterval(this.getInvocieTime),this.DialogLoadingCnt.isShow=!1,3==t.status&&this.$elementMessage(t.message,"error"),2==t.status&&(this.$elementMessage(this.$t("invoice.storeSet"),"success"),this.confirmMoneyOpen=!1,this.getData()))}})},1e3)}}},o=r,l=s("2877"),n=Object(l["a"])(o,a,i,!1,null,"63bb7ade",null);t["a"]=n.exports},"605d":function(e,t,s){"use strict";var a=s("da84"),i=s("c6b6");e.exports="process"===i(a.process)},"69a3":function(e,t,s){e.exports=s.p+"img/secretKey2.9602a74a.jpg"},"702a":function(e,t,s){"use strict";s("e03e")},"72ff":function(e,t,s){"use strict";s("3933")},"76d4":function(e,t,s){},"79b8":function(e,t,s){"use strict";s("1fce")},"7ebc":function(e,t,s){"use strict";s("e60f")},8953:function(e,t,s){},"8c6c":function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.relateData.isShow,title:e.$t("orders.associated"),width:"800px"},on:{"update:visible":function(t){return e.$set(e.relateData,"isShow",t)},open:e.open}},[t("el-divider"),t("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[t("div",{staticClass:"d-flex",staticStyle:{"margin-bottom":"20px"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:e.$t("orders.spuHolder"),clearable:""},on:{clear:function(t){return e.clearFilter("spu")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.spu,callback:function(t){e.spu=t},expression:"spu"}}),t("el-input",{staticStyle:{width:"200px",margin:"0 20px"},attrs:{placeholder:e.$t("orders.skuHolder"),clearable:""},on:{clear:function(t){return e.clearFilter("sku")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.sku,callback:function(t){e.sku=t},expression:"sku"}}),t("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:e.$t("orders.nameHolder"),clearable:""},on:{clear:function(t){return e.clearFilter("name")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t("el-button",{attrs:{type:"primary"},on:{click:e.filterItem}},[e._v(e._s(e.$t("orders.filter")))])],1),t("div",{staticClass:"d-flex",staticStyle:{"margin-bottom":"20px"}},[t("el-select",{attrs:{placeholder:"请选择仓库"},model:{value:e.warehouse,callback:function(t){e.warehouse=t},expression:"warehouse"}},e._l(e.warehouseList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-table",{staticClass:"no-hover",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.list,height:"350"}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"","show-header":!1,data:s.row.stocks}},[t("el-table-column",{attrs:{label:e.$t("orders.select"),width:"55"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-radio",{attrs:{label:s.row.sku+"||"+s.row.id},model:{value:e.tableRadio,callback:function(t){e.tableRadio=t},expression:"tableRadio"}},[t("i")])]}}],null,!0)}),t("el-table-column",{attrs:{label:e.$t("orders.productinfo")},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"d-flex"},[t("img",{attrs:{src:s.row.propertyImage,width:"60",height:"60"}}),t("div",{staticClass:"mg-l-20"},[t("p",[e._v(e._s(s.row.name))]),t("p",[e._v("SKU: "+e._s(s.row.sku))])])])]}}],null,!0)})],1)]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.productinfo")},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"d-flex"},[t("img",{attrs:{src:s.row.imgUrl,width:"60",height:"60"}}),t("div",{staticClass:"mg-l-20"},[t("p",[e._v(e._s(s.row.name))]),t("p",[e._v("SPU: "+e._s(s.row.sku))])])])]}}])})],1)],1),t("div",{staticClass:"d-flex",staticStyle:{"justify-content":"center",margin:"20px"}},[t("el-pagination",{attrs:{"current-page":e.page,background:!0,layout:"total, prev, pager, next",total:Number(e.total)},on:{"current-change":e.toPage}})],1),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.relateData.isShow=!1}}},[e._v(e._s(e.$t("orders.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.relateFn}},[e._v(e._s(e.$t("orders.confirm")))])],1)],1)},i=[],r=(s("14d9"),{props:["relateData"],data(){return{tableRadio:"",page:1,rowsPerPage:10,total:0,totalPage:0,items:[],list:[],sku:"",warehouse:"",spu:"",name:"",dealRelation:1,warehouseList:[]}},methods:{filterItem(){this.toPage(1)},clearFilter(e){"sku"==e?this.sku="":"spu"==e&&(this.spu=""),this.name="",this.toPage(1)},open(){this.sku="",this.spu="",this.name="",this.page=1,this.tableRadio="",this.total=Number(this.relateData.Pagination.totalCount),this.totalPage=Number(this.relateData.Pagination.totalPage),this.items=this.relateData.items,this.list=this.relateData.list,$(".el-dialog__body").scrollTop(0),this.getHouseList()},getHouseList(){this.$apiCall("api.Warehouse.finds",{},e=>{9999==e.ErrorCode?(this.warehouseList=e.Data.Results,0==e.Data.Results.length&&this.$message.error("There is no warehouse, please go to add！")):this.$message({message:e.Message,type:"error"})})},toPage(e){this.page=e,this.$showLoading(),this.$apiCall("api.VendorShop.vendorFindProducts",{page:this.page,rowsPerPage:10,status:1,sku:this.sku,spu:this.spu,name:this.name},e=>{"9999"==e.ErrorCode?(this.tableRadio="",this.total=Number(e.Data.Pagination.totalCount),this.totalPage=Number(e.Data.Pagination.totalPage),this.items=[],this.list=[],e.Data.Results.products.forEach(e=>{e.stocks&&e.stocks.length&&e.stocks.forEach(t=>{this.$set(t,"name",e.name),this.items.push(t)}),this.list.push(e)}),$(".el-dialog__body").scrollTop(0)):this.$elementMessage(e.Message,"error"),this.$hideLoading()})},relateFn(){if(!this.tableRadio)return void this.$elementMessage("Please check a SKU first","error");let e=this.tableRadio.split("||"),t={sku:e[0],Hid:this.warehouse};console.log(t,"transData"),this.$emit("relateFn",t)},clickChange(e,t){}}}),o=r,l=(s("bef8"),s("72ff"),s("2877")),n=Object(l["a"])(o,a,i,!1,null,"be376e36",null);t["a"]=n.exports},a439:function(e,t,s){"use strict";s("76d4")},a4a5:function(e,t,s){},a4ce:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"contentpanel my-custom-page"},[t("div",{ref:"pageHeader",staticClass:"pagetitle"},[t("div",{staticClass:"left"},[t("div",{staticClass:"title"},[t("i",{staticClass:"el-icon-s-order"}),t("h2",[e._v(e._s(e.$t("orders.title")))])])]),t("div",{staticClass:"right"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.batchUnbundling()}}},[e._v(e._s(e.$t("orders.批量解绑商品")))]),2==e.status&&3==e.activeName?[t("el-button",{attrs:{type:"primary",disabled:!e.$isRole("invoiceWaitDeliverEdit")},on:{click:e.openImport}},[e._v(e._s(e.$t("orders.shippinginformation")))]),t("el-button",{attrs:{type:"primary",disabled:!e.$isRole("invoiceWaitDeliverEdit")},on:{click:e.openAuth}},[e._v(e._s(e.$t("orders.authorize")))])]:e._e(),2==e.status&&3==e.activeName||3==e.status&&1==e.activeName?[t("el-dropdown",{staticStyle:{margin:"0 10px"}},[t("el-button",{attrs:{type:"primary"}},[e._v(" "+e._s(e.$t("orders.发票"))),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("span",{on:{click:function(t){return e.downPdf()}}},[e._v(e._s(e.$t("orders.下载")))])]),t("el-dropdown-item",[t("span",{on:{click:function(t){return e.sendEmail()}}},[e._v(e._s(e.$t("orders.发送邮箱")))])])],1)],1)]:e._e(),2==e.status&&1==e.activeName?[t("el-button",{attrs:{type:"primary",disabled:!e.$isRole("invoiceWaitOfferEdit")},on:{click:e.openCreate}},[e._v(e._s(e.$t("orders.创建订单")))])]:e._e(),2!=e.status||2!=e.activeName?[t("el-button",{attrs:{type:"primary"},on:{click:e.exportOrder}},[e._v(e._s(e.$t("orders.导出订单")))])]:e._e(),15==e.status?[t("el-button",{attrs:{type:"primary",disabled:!e.$isRole("invoiceWaitPayEdit")},on:{click:e.batchWareHouse}},[e._v(e._s(e.$t("orders.批量关联仓库")))])]:e._e()],2)]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pagebody"},[2==e.status&&3==e.activeName&&148982!=e.vendorId&&146428!=e.vendorId&&144875!=e.vendorId&&144843!=e.vendorId&&143779!=e.vendorId&&143654!=e.vendorId&&74!=e.vendorId?t("el-row",{staticClass:"mg-b-20",attrs:{gutter:15,type:"flex"}},[t("el-col",{attrs:{span:2}},[t("el-button",{on:{click:function(t){return e.handleTypeOrder(1)}}},[e._v(e._s(e.$t("orders.批发单"))+"("+e._s(e.batchNum)+")")])],1),t("el-col",{attrs:{span:2}},[t("el-button",{on:{click:function(t){return e.handleTypeOrder(2)}}},[e._v(e._s(e.$t("orders.自提单"))+"("+e._s(e.offlineNum)+")")])],1)],1):e._e(),t("el-row",{staticClass:"mg-b-20",attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("el-card",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("div",{ref:"pageFilter",staticClass:"page-filter"},[t("el-form",{attrs:{inline:!0,size:"mini"}},[2==e.status&&2==e.activeName?[t("el-form-item",[t("el-input",{attrs:{placeholder:e.$t("orders.paymentCode"),clearable:""},on:{clear:function(t){return e.clearFilter("sysCode")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.filterParams.sysCode,callback:function(t){e.$set(e.filterParams,"sysCode",t)},expression:"filterParams.sysCode"}})],1),t("el-form-item",{attrs:{label:e.$t("orders.paymentDate")}},[t("el-date-picker",{key:"date2",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(t){return e.clearFilter("date2")},change:e.dateChange2},model:{value:e.filterParams.date2,callback:function(t){e.$set(e.filterParams,"date2",t)},expression:"filterParams.date2"}})],1)]:[t("el-form-item",[t("el-input",{attrs:{placeholder:e.$t("orders.third"),clearable:""},on:{clear:function(t){return e.clearFilter("codeName")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.filterParams.codeName,callback:function(t){e.$set(e.filterParams,"codeName",t)},expression:"filterParams.codeName"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:e.$t("orders.orderID"),clearable:""},on:{clear:function(t){return e.clearFilter("orderId")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.filterParams.orderId,callback:function(t){e.$set(e.filterParams,"orderId",t)},expression:"filterParams.orderId"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:e.$t("orders.receiver"),clearable:""},on:{clear:function(t){return e.clearFilter("receiverName")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.filterParams.receiverName,callback:function(t){e.$set(e.filterParams,"receiverName",t)},expression:"filterParams.receiverName"}})],1),t("el-form-item",{attrs:{label:e.$t("orders.vendorName")+":"}},[t("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:e.filterItem,clear:function(t){return e.clearFilter("relationshipId")}},model:{value:e.filterParams.relationshipId,callback:function(t){e.$set(e.filterParams,"relationshipId",t)},expression:"filterParams.relationshipId"}},e._l(e.vendorList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.customerName,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:e.$t("orders.storeName")+":"}},[t("el-select",{attrs:{filterable:"",remote:"",placeholder:"all",clearable:""},on:{change:e.filterItem,clear:function(t){return e.clearFilter("accountIds")}},model:{value:e.filterParams.accountIds,callback:function(t){e.$set(e.filterParams,"accountIds",t)},expression:"filterParams.accountIds"}},e._l(e.storeList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.shopName,value:e.id}})})),1)],1),6==e.status?[t("el-form-item",[t("el-input",{attrs:{placeholder:e.$t("orders.paymentCode"),clearable:""},on:{clear:function(t){return e.clearFilter("sysCode")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItem.apply(null,arguments)}},model:{value:e.filterParams.sysCode,callback:function(t){e.$set(e.filterParams,"sysCode",t)},expression:"filterParams.sysCode"}})],1),6!=e.status?t("el-form-item",{attrs:{label:e.$t("orders.paymentDate")}},[t("el-date-picker",{key:"date2",attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(t){return e.clearFilter("date2")},change:e.dateChange2},model:{value:e.filterParams.date2,callback:function(t){e.$set(e.filterParams,"date2",t)},expression:"filterParams.date2"}})],1):e._e()]:e._e(),t("el-form-item",{attrs:{label:e.$t("orders.CreateDate")}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","start-placeholder":"Start","end-placeholder":"End"},on:{clear:function(t){return e.clearFilter("date")},change:e.dateChange},model:{value:e.filterParams.date,callback:function(t){e.$set(e.filterParams,"date",t)},expression:"filterParams.date"}})],1)],t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.filterItem}},[e._v(e._s(e.$t("orders.filter")))]),t("el-button",{attrs:{type:"danger"},on:{click:e.clearFilter}},[e._v(e._s(e.$t("orders.clear")))]),3!=e.billStatus?t("el-button",{attrs:{type:"primary"},on:{click:e.handleAllFilter}},[e._v(e._s(e.$t("orders.allFilter"))+" ")]):e._e()],1),t("el-form-item",{staticStyle:{width:"200px"}}),t("el-form-item",{staticClass:"btns-wrap"},[2==e.status&&1==e.activeName?[t("el-button",{attrs:{type:"primary",disabled:!e.$isRole("invoiceWaitOfferEdit")},on:{click:e.quoteFn}},[e._v(e._s(e.$t("orders.Made")))]),t("el-button",{attrs:{type:"primary",disabled:!e.$isRole("invoiceWaitOfferEdit")},on:{click:e.exportFn}},[e._v(e._s(e.$t("orders.导出未关联商品")))]),t("el-button",{attrs:{type:"primary",disabled:!e.$isRole("invoiceWaitOfferEdit")},on:{click:e.importFn}},[e._v(e._s(e.$t("orders.导入关联")))])]:e._e(),2==e.status&&2==e.activeName?[t("el-button",{attrs:{type:"primary",disabled:!e.$isRole("invoicePayCheckEdit")},on:{click:e.payFn}},[e._v(e._s(e.$t("orders.receipt")))]),t("el-button",{attrs:{type:"primary",disabled:!e.$isRole("invoicePayCheckEdit")},on:{click:e.payCancelFn}},[e._v(e._s(e.$t("orders.notreceived")))])]:e._e(),4==e.status&&1==e.activeName?[t("el-button",{attrs:{type:"primary",disabled:!e.$isRole("invoiceAbnormalEdit")},on:{click:e.syncFn}},[e._v(e._s(e.$t("orders.synchronized")))])]:e._e(),4==e.status&&2==e.activeName?[t("el-button",{attrs:{type:"primary",disabled:!e.$isRole("invoiceAbnormalEdit")},on:{click:e.quoteFn}},[e._v(e._s(e.$t("orders.重新报价")))])]:e._e()],2)],2)],1),e._l(e.tabList,(function(s,a){return 2!=e.status&&e.tabList.length?t("el-tab-pane",{key:a,attrs:{name:s.name+""}},[t("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(s.title)+" "),t("span",{staticClass:"tx-danger"},[e._v("("+e._s(e.vendorAllOrderCntText(s.id))+")")])])]):e._e()}))],2)],1)],1),e.isVipOrder?[t("div",{staticClass:"noVip"},[t("i",{staticClass:"el-icon-info mg-r-10"}),e._v(" "+e._s(e.$t("package.暂无数据，该条信息可能已超{num}天",{num:e.vipOrderReserveDay}))+" ")])]:[2==e.status&&2!=e.activeName||4==e.status&&1==e.activeName?[t("el-table",{key:"gridTable",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,"tooltip-effect":"dark",height:"500","row-key":e=>e.id},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),t("el-table-column",{attrs:{type:"expand",width:"25"},scopedSlots:e._u([{key:"header",fn:function(){return[e.isExpansion?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[t("i",{staticClass:"el-icon-minus"})]):e._e(),e.isExpansion?e._e():t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[t("i",{staticClass:"el-icon-plus"})])]},proxy:!0},{key:"default",fn:function(s){return[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-left":"0"},attrs:{data:s.row.items,"max-height":"360","row-style":e.rowStyle,"header-cell-style":e.rowStyle,"cell-style":e.rowStyle,"cell-class-name":e.cellClassName}},[t("el-table-column",{attrs:{label:e.$t("orders.orderID"),width:"140",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.orderId))])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"",label:e.$t("orders.产品图片"),width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.row.imgUrl,fit:"cover"}})]}}],null,!0)}),t("el-table-column",{attrs:{prop:"vendorProductName",label:e.$t("orders.SKU编号/数量/名称"),width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[2==s.row.isManage||s.row.vendorPrice?e._e():t("el-link",{attrs:{type:"primary",disabled:!e.$isRole(e.$route.meta.roleWrite)},on:{click:function(t){return e.unable(s.row)}}},[e._v(e._s(e.$t("orders.tabBar5")))]),t("p",{},[2==s.row.isManage?[t("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(s.row.vendorSku+"Unable to purchase")+" "),t("span",[t("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),t("el-badge",{staticClass:"mark",attrs:{value:s.row.quantity}})],1)])]:[1!=s.row.status?[t("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(s.row.vendorSku?s.row.vendorSku+" Products Off shelf":"null Please make an offer")+" "),t("span",[t("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),t("el-badge",{staticClass:"mark",attrs:{value:s.row.quantity}})],1)])]:[t("span",{staticStyle:{display:"inline-block"}},[e._v(" "+e._s(s.row.vendorSku||"null Please make an offer")+" "),t("span",[t("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),t("el-badge",{staticClass:"mark",attrs:{value:s.row.quantity}})],1)])]]],2),t("span",[e._v(e._s(s.row.name))])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"",label:e.$t("orders.属性值"),width:"180",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.propertyValue||"--"))])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"vendorSku",label:e.$t("orders.供应商价格"),width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{display:"inline-block"}},[a.row.vendorSku?t("span",[1!=s.row.discountType&&2!=s.row.discountType||2==a.row.isManage?[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))]:[t("span",[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number((a.row.amount-a.row.amount/s.row.productAmount*s.row.couponAmount)/a.row.quantity).toFixed(2))+" ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))])])]],2):t("span",{staticStyle:{color:"#F56C6C"}},[e._v("Please make an offer")])])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"phone",label:e.$t("orders.客户售价"),width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(s.row.currency)+" "+e._s(Number(a.row.price).toFixed(2)))])]}}],null,!0)}),t("el-table-column",{attrs:{label:""}})],1)]}}],null,!1,833631488)}),t("el-table-column",{attrs:{label:e.$t("orders.storeName"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.store||"---"))])]}}],null,!1,389551764)}),t("el-table-column",{attrs:{label:e.$t("orders.third"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.codeName))])]}}],null,!1,2865335244)}),t("el-table-column",{attrs:{label:e.$t("orders.orderID"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.orderId||"---"))])]}}],null,!1,2950158824)}),t("el-table-column",{attrs:{label:e.$t("orders.vendorName"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(e._s(s.row.customer?s.row.customer.name:"---"))])]}}],null,!1,2822081424)}),t("el-table-column",{attrs:{label:e.$t("orders.CreateDate"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.$moment(s.row.timeCreated).format("ll [at] LTS")||"---"))])]}}],null,!1,4292911871)}),t("el-table-column",{attrs:{label:e.$t("orders.address"),"min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.zip?s.row.shippingJsonInfo.zip:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.address1?s.row.shippingJsonInfo.address1:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.city?s.row.shippingJsonInfo.city:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.province?s.row.shippingJsonInfo.province:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.country?s.row.shippingJsonInfo.country:"---")+" ")]),t("span",[e._v(e._s(s.row.receiverAddress||"---"))])])]}}],null,!1,442848476)}),t("el-table-column",{attrs:{label:e.$t("orders.receiver"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.receiverName||"---"))])]}}],null,!1,1004791253)}),4==e.status?[t("el-table-column",{attrs:{label:e.$t("orders.logistics"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.shippingMethodArr&&s.row.shippingMethodArr.length?[t("el-select",{attrs:{size:"small"},on:{change:function(t){return e.filterShippingMethod(t,s.row)}},model:{value:s.row.shippingMethodId,callback:function(t){e.$set(s.row,"shippingMethodId",t)},expression:"scope.row.shippingMethodId"}},e._l(s.row.shippingMethodArr,(function(s){return t("el-option",{key:s.id,attrs:{label:`${s.name} [${s.agingDaysBegin?s.agingDaysBegin:0}-${s.agingDaysEnd?s.agingDaysEnd:0}${e.$t("logistics.天")}]`,value:s.id}})})),1)]:t("span",[e._v("---")])]}}],null,!1,3920950275)}),148982!=e.vendorId&&146428!=e.vendorId&&144875!=e.vendorId&&144843!=e.vendorId&&143779!=e.vendorId&&143654!=e.vendorId&&74!=e.vendorId?t("el-table-column",{attrs:{label:e.$t("orders.仓库")},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.warehouseName||"--"))])]}}],null,!1,605806532)}):e._e(),t("el-table-column",{attrs:{label:`${e.$t("orders.logisticsFee")}(${e.$store.state.country.symbol})`,width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[3==s.row.discountType?t("span",[t("span",[e._v("0 ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(s.row.shippingMethodItem?s.row.shippingMethodItem.fee:"---"))])])]):t("span",[e._v(e._s(s.row.shippingMethodItem?s.row.shippingMethodItem.fee:"---"))])]}}],null,!1,54970795)}),t("el-table-column",{attrs:{label:`${e.$t("orders.tradeAmount")}(${e.$store.state.country.symbol})`,width:"100"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.discountType?t("span",[t("span",[e._v(e._s(s.row.payAmount||"---")+" ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(s.row.realAmount||"---"))])])]):t("span",[e._v(e._s(s.row.realAmount||"---"))])]}}],null,!1,757038887)})]:e._e(),2==e.status&&1==e.activeName?[t("el-table-column",{attrs:{label:e.$t("orders.offerItem"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.unBindQuantity||"---"))])]}}],null,!1,580575434)})]:e._e(),148982!=e.vendorId&&146428!=e.vendorId&&144875!=e.vendorId&&144843!=e.vendorId&&143779!=e.vendorId&&143654!=e.vendorId&&74!=e.vendorId?t("el-table-column",{attrs:{label:e.$t("orders.仓库")},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.warehouseName||"--"))])]}}],null,!1,605806532)}):e._e(),2==e.status&&3==e.activeName?[t("el-table-column",{attrs:{label:e.$t("orders.logistics"),width:"250"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(" "+e._s(s.row.trackCompany?`${s.row.trackCompany}${s.row.trackNumber?`:${s.row.trackNumber} [${s.row.agingDaysBegin?s.row.agingDaysBegin:0}-${s.row.agingDaysEnd?s.row.agingDaysEnd:0}${e.$t("logistics.天")}]`:`[${s.row.agingDaysBegin?s.row.agingDaysBegin:0}-${s.row.agingDaysEnd?s.row.agingDaysEnd:0}${e.$t("logistics.天")}]`}`:"---")+" ")])]}}],null,!1,872972531)}),t("el-table-column",{attrs:{label:`${e.$t("orders.logisticsFee")}(${e.$store.state.country.symbol})`,width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[3==s.row.discountType?t("span",[t("span",[e._v("0 ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(s.row.trackFee||"---"))])])]):t("span",[e._v(e._s(s.row.trackFee||"---"))])]}}],null,!1,614115627)}),t("el-table-column",{attrs:{label:`${e.$t("orders.tradeAmount")}(${e.$store.state.country.symbol})`,width:"100"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.discountType?t("span",[t("span",[e._v(e._s(s.row.payAmount||"---")+" ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(s.row.realAmount||"---"))])])]):t("span",[e._v(e._s(s.row.realAmount||"---"))])]}}],null,!1,757038887)})]:e._e(),t("el-table-column",{attrs:{label:e.$t("orders.operate"),width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[2==e.status&&1==e.activeName?t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!e.$isRole("invoiceWaitOfferEdit")},on:{click:function(t){return e.quoteFn("row",s.row)}}},[e._v(e._s(e.$t("orders.Made")))]):e._e(),2==e.status&&3==e.activeName?t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!e.$isRole("invoiceWaitDeliverEdit")},on:{click:function(t){return e.markShippedOpen(s.row)}}},[e._v(e._s(e.$t("orders.mark")))]):e._e(),2==e.status&&3==e.activeName||3==e.status&&1==e.activeName?t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(t){return e.downPdf(s.row,"1")}}},[e._v(e._s(e.$t("orders.下载发票")))]):e._e(),2==e.status&&3==e.activeName||3==e.status&&1==e.activeName?t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(t){return e.sendEmail(s.row,"1")}}},[e._v(e._s(e.$t("orders.发送发票到邮箱")))]):e._e(),4==e.status?t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!e.$isRole("invoiceAbnormalEdit")},on:{click:function(t){return e.syncFn("row",s.row)}}},[e._v(e._s(e.$t("orders.synchronized")))]):e._e()],1)]}}],null,!1,1762511427)}),2!=e.status||2!=e.activeName&&1!=e.activeName?[t("el-table-column",{attrs:{label:e.$t("quotation.备注"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(e._s(s.row.remark||"---"))])]}}],null,!1,627357406)})]:e._e()],2)]:2==e.status&&2==e.activeName?[t("el-table",{key:"gridTable",ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,"tooltip-effect":"dark",height:"500","row-key":e=>e.id},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),t("el-table-column",{attrs:{type:"expand",width:"25"},scopedSlots:e._u([{key:"header",fn:function(){return[e.isExpansion?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[t("i",{staticClass:"el-icon-minus"})]):e._e(),e.isExpansion?e._e():t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[t("i",{staticClass:"el-icon-plus"})])]},proxy:!0},{key:"default",fn:function(s){return[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-left":"0"},attrs:{data:s.row.items,"max-height":"360","row-style":e.rowStyle,"header-cell-style":e.rowStyle,"cell-style":e.rowStyle,"cell-class-name":e.cellClassName}},[t("el-table-column",{attrs:{label:e.$t("orders.orderID"),width:"140",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.orderId))])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"",label:e.$t("orders.产品图片"),width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.row.imgUrl,fit:"cover"}})]}}],null,!0)}),t("el-table-column",{attrs:{prop:"vendorProductName",label:e.$t("orders.SKU编号/数量/名称"),width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[2==s.row.isManage||s.row.vendorPrice?e._e():t("el-link",{attrs:{type:"primary",disabled:!e.$isRole(e.$route.meta.roleWrite)},on:{click:function(t){return e.unable(s.row)}}},[e._v(e._s(e.$t("orders.tabBar5")))]),t("p",{},[2==s.row.isManage?[t("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(s.row.vendorSku+"Unable to purchase")+" "),t("span",[t("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),t("el-badge",{staticClass:"mark",attrs:{value:s.row.quantity}})],1)])]:[1!=s.row.status?[t("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(s.row.vendorSku?s.row.vendorSku+" Products Off shelf":"null Please make an offer")+" "),t("span",[t("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),t("el-badge",{staticClass:"mark",attrs:{value:s.row.quantity}})],1)])]:[t("span",{staticStyle:{display:"inline-block"}},[e._v(" "+e._s(s.row.vendorSku||"null Please make an offer")+" "),t("span",[t("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),t("el-badge",{staticClass:"mark",attrs:{value:s.row.quantity}})],1)])]]],2),t("span",[e._v(e._s(s.row.name))])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"",label:e.$t("orders.属性值"),width:"180",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.propertyValue||"--"))])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"vendorSku",label:e.$t("orders.供应商价格"),width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{display:"inline-block"}},[a.row.vendorSku?t("span",[1!=s.row.discountType&&2!=s.row.discountType||2==a.row.isManage?[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))]:[t("span",[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number((a.row.amount-a.row.amount/s.row.productAmount*s.row.couponAmount)/a.row.quantity).toFixed(2))+" ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))])])]],2):t("span",{staticStyle:{color:"#F56C6C"}},[e._v("Please make an offer")])])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"phone",label:e.$t("orders.客户售价"),width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(s.row.currency)+" "+e._s(Number(a.row.price).toFixed(2)))])]}}],null,!0)}),t("el-table-column",{attrs:{label:""}})],1)]}}])}),t("el-table-column",{attrs:{label:"pay code",width:"300"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.accountPayment&&s.row.accountPayment.sysCode?s.row.accountPayment.sysCode:"---"))])]}}])}),t("el-table-column",{attrs:{label:"pay time",width:"300"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.$moment.unix(s.row.timeCreated).format("YYYY-MM-DD HH:mm:ss")||"---"))])]}}])}),t("el-table-column",{attrs:{label:`${e.$t("orders.tradeAmount")}(${e.$store.state.country.symbol})`,width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.discountType?t("span",[t("span",[e._v(e._s(s.row.payAmount||"---")+" ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(s.row.totalAmount||"---"))])])]):t("span",[e._v(e._s(s.row.realAmount||"---"))])]}}])}),t("el-table-column",{attrs:{label:"Quantity",width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.shopifyOrderCnt?t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.shopifyOrderCnt(s.row)}}},[e._v(e._s(s.row.shopifyOrderCnt))]):t("span",[e._v("---")])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.voucherUrl")},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.voucherUrl?t("div",{staticClass:"demo-image__preview"},[t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:s.row.voucherUrl,"preview-src-list":s.row.voucherUrlPreview}})],1):t("span",[e._v("---")])]}}])}),2==e.activeName?t("el-table-column",{attrs:{label:e.$t("orders.operate"),width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[1==s.row.paymentType?t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!e.$isRole("invoicePayCheckEdit")},on:{click:function(t){return e.payFn("row",s.row)}}},[e._v(e._s(e.$t("orders.receipt")))]):e._e(),1==s.row.paymentType?t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!e.$isRole("invoicePayCheckEdit")},on:{click:function(t){return e.payCancelFn("row",s.row)}}},[e._v(e._s(e.$t("orders.notreceived")))]):e._e()],1)]}}],null,!1,205070949)}):e._e()],1)]:[t("el-table",{key:"gridTable3"+e.activeName,ref:"gridTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.items,height:"500","tooltip-effect":"dark","row-key":e=>e.id},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),t("el-table-column",{attrs:{type:"expand",width:"25"},scopedSlots:e._u([{key:"header",fn:function(){return[e.isExpansion?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[t("i",{staticClass:"el-icon-minus"})]):e._e(),e.isExpansion?e._e():t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.toggleRowExpansion}},[t("i",{staticClass:"el-icon-plus"})])]},proxy:!0},{key:"default",fn:function(s){return[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-left":"0"},attrs:{data:s.row.items,"max-height":"360","row-style":e.rowStyle,"header-cell-style":e.rowStyle,"cell-style":e.rowStyle,"cell-class-name":e.cellClassName}},[t("el-table-column",{attrs:{label:e.$t("orders.orderID"),width:"140",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.orderId))])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"",label:e.$t("orders.产品图片"),width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.row.imgUrl,fit:"cover"}})]}}],null,!0)}),t("el-table-column",{attrs:{prop:"vendorProductName",label:e.$t("orders.SKU编号/数量/名称"),width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[2==s.row.isManage||s.row.vendorPrice?e._e():t("el-link",{attrs:{type:"primary",disabled:!e.$isRole(e.$route.meta.roleWrite)},on:{click:function(t){return e.unable(s.row)}}},[e._v(e._s(e.$t("orders.tabBar5")))]),t("p",{},[2==s.row.isManage?[t("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(s.row.vendorSku+"Unable to purchase")+" "),t("span",[t("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),t("el-badge",{staticClass:"mark",attrs:{value:s.row.quantity}})],1)])]:[1!=s.row.status?[t("span",{staticStyle:{display:"inline-block",color:"#F56C6C"}},[e._v(" "+e._s(s.row.vendorSku?s.row.vendorSku+" Products Off shelf":"null Please make an offer")+" "),t("span",[t("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),t("el-badge",{staticClass:"mark",attrs:{value:s.row.quantity}})],1)])]:[t("span",{staticStyle:{display:"inline-block"}},[e._v(" "+e._s(s.row.vendorSku||"null Please make an offer")+" "),t("span",[t("b",{staticClass:"text-danger",staticStyle:{"font-size":"16px"}},[e._v("×")]),t("el-badge",{staticClass:"mark",attrs:{value:s.row.quantity}})],1)])]]],2),t("span",[e._v(e._s(s.row.name))])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"",label:e.$t("orders.属性值"),width:"180",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.propertyValue||"--"))])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"vendorSku",label:e.$t("orders.供应商价格"),width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{display:"inline-block"}},[a.row.vendorSku?t("span",[1!=s.row.discountType&&2!=s.row.discountType||2==a.row.isManage?[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))]:[t("span",[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number((a.row.amount-a.row.amount/s.row.productAmount*s.row.couponAmount)/a.row.quantity).toFixed(2))+" ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(e.$store.state.country.symbol)+" "+e._s(Number(a.row.vendorPrice).toFixed(2)))])])]],2):t("span",{staticStyle:{color:"#F56C6C"}},[e._v("Please make an offer")])])]}}],null,!0)}),t("el-table-column",{attrs:{prop:"phone",label:e.$t("orders.客户售价"),width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(s.row.currency)+" "+e._s(Number(a.row.price).toFixed(2)))])]}}],null,!0)}),t("el-table-column",{attrs:{label:""}})],1)]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.storeName"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.store||"---"))])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.third"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.codeName))])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.orderID"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.orderId||"---"))])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.vendorName"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(e._s(s.row.customer?s.row.customer.name:"---"))])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.CreateDate"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.$moment(s.row.timeCreated).format("ll [at] LTS")||"---"))])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.address"),"min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.zip?s.row.shippingJsonInfo.zip:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.address1?s.row.shippingJsonInfo.address1:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.city?s.row.shippingJsonInfo.city:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.province?s.row.shippingJsonInfo.province:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.country?s.row.shippingJsonInfo.country:"---")+" ")]),t("span",[e._v(e._s(s.row.receiverAddress||"---"))])])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.receiver"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.receiverName||"---"))])]}}])}),2!=e.activeName&&3!=e.activeName?[t("el-table-column",{attrs:{label:e.$t("orders.logistics"),width:"250"},scopedSlots:e._u([{key:"default",fn:function(s){return[3==s.row.status?t("span",[s.row.shippingMethodArr?t("span",[s.row.shippingMethodArr.length&&s.row.shippingMethodArr[0]?t("div",[e._v(e._s(s.row.shippingMethodArr[0].name)+" ["+e._s(s.row.shippingMethodArr[0].agingDaysBegin?s.row.shippingMethodArr[0].agingDaysBegin:0)+"-"+e._s(s.row.shippingMethodArr[0].agingDaysEnd?s.row.shippingMethodArr[0].agingDaysEnd:0)+e._s(e.$t("logistics.天"))+"]")]):t("div",{staticClass:"tx-middle"},[e._v(" --- "),t("i",{staticClass:"el-icon-warning mg-l-5",staticStyle:{"font-size":"20px",cursor:"pointer"},on:{click:function(t){return e.shippedFn(s.row)}}})])]):e._e()]):t("span",[e._v(" "+e._s(s.row.trackCompany?`${s.row.trackCompany}${s.row.trackNumber?`:${s.row.trackNumber} [${s.row.agingDaysBegin?s.row.agingDaysBegin:0}-${s.row.agingDaysEnd?s.row.agingDaysEnd:0}${e.$t("logistics.天")}]`:`[${s.row.agingDaysBegin?s.row.agingDaysBegin:0}-${s.row.agingDaysEnd?s.row.agingDaysEnd:0}${e.$t("logistics.天")}]`}`:"---")+" ")])]}}],null,!1,1238121305)}),148982!=e.vendorId&&146428!=e.vendorId&&144875!=e.vendorId&&144843!=e.vendorId&&143779!=e.vendorId&&143654!=e.vendorId&&74!=e.vendorId?t("el-table-column",{attrs:{label:e.$t("orders.仓库")},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.warehouseName||"--"))])]}}],null,!1,605806532)}):e._e(),t("el-table-column",{attrs:{label:`${e.$t("orders.logisticsFee")}(${e.$store.state.country.symbol})`,width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[3==s.row.status?t("span",[s.row.shippingMethodArr?t("span",[e._v(e._s(s.row.shippingMethodArr.length&&s.row.shippingMethodArr[0]?s.row.shippingMethodArr[0].fee:"---"))]):e._e()]):t("span",[3==s.row.discountType?t("span",[t("span",[e._v("0 ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(s.row.trackFee||"---"))])])]):t("span",[e._v(e._s(s.row.trackFee||"---"))])])]}}],null,!1,2083164091)}),t("el-table-column",{attrs:{label:`${e.$t("orders.tradeAmount")}(${e.$store.state.country.symbol})`,width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[3==s.row.status?t("span",[s.row.shippingMethodArr?t("span",[s.row.itemAmount?t("span",[e._v(e._s(s.row.payAmount?s.row.payAmount:s.row.shippingMethodArr.length&&s.row.shippingMethodArr[0]?(Number(s.row.shippingMethodArr[0].fee)+Number(s.row.itemAmount)).toFixed(2):"---"))]):t("span",[e._v(e._s(s.row.payAmount?s.row.payAmount:s.row.shippingMethodArr.length&&s.row.shippingMethodArr[0]?Number(s.row.shippingMethodArr[0].fee):"---"))])]):t("span",[e._v(e._s(s.row.itemAmount?Number(s.row.itemAmount).toFixed(2):"---"))])]):t("span",[s.row.discountType?t("span",[t("span",[e._v(e._s(s.row.payAmount||"---")+" ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(s.row.realAmount.toFixed(2)||"---"))])])]):t("span",[e._v(e._s(s.row.realAmount.toFixed(2)||"---"))])])]}}],null,!1,2989309583)})]:e._e(),6==e.status?[t("el-table-column",{attrs:{label:e.$t("orders.status"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.statusArr[s.row.status]?e.statusArr[s.row.status].text:"---"))])]}}],null,!1,2321464157)})]:e._e(),311==e.status?[t("el-table-column",{attrs:{label:e.$t("orders.payStatus"),width:"250"},scopedSlots:e._u([{key:"default",fn:function(s){return[3==s.row.status?t("div",[t("span",[e._v(e._s(e.$t("orders.status1")))])]):11==s.row.status?t("div",[t("span",[e._v(e._s(e.$t("orders.status2")))])]):t("div",[t("span",[e._v("---")])])]}}],null,!1,4134086874)})]:e._e(),355==e.status?[t("el-table-column",{attrs:{label:e.$t("orders.payStatus"),width:"250"},scopedSlots:e._u([{key:"default",fn:function(s){return[3==s.row.status?t("div",[t("span",[e._v(e._s(e.$t("orders.status1")))])]):11==s.row.status?t("div",[t("span",[e._v(e._s(e.$t("orders.status2")))])]):t("div",[t("span",[e._v(e._s(e.statusArr[s.row.status]?e.statusArr[s.row.status].text:"---"))])])]}}],null,!1,2135475425)})]:e._e(),4==e.status&&2==e.activeName?[t("el-table-column",{attrs:{label:e.$t("orders.operate"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary",disabled:!e.$isRole("invoiceAbnormalEdit")},on:{click:function(t){return e.quoteFn("row",s.row)}}},[e._v(e._s(e.$t("orders.重新报价")))])]}}],null,!1,1262317929)})]:e._e(),2!=e.status||2!=e.activeName&&1!=e.activeName?[t("el-table-column",{attrs:{label:e.$t("quotation.备注"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(e._s(s.row.remark||"---"))])]}}],null,!1,627357406)})]:e._e(),t("el-table-column",{attrs:{label:e.$t("orders.operate"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[1==s.row.isFirstOrder?t("div",[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handleSplit(s.row)}}},[e._v(e._s(e.$t("orders.拆分订单")))])],1):e._e(),t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(t){return e.openCustomer(s.row.customerUrl)}}},[e._v(e._s(e.$t("orders.分销点付款")))]),16==e.status?t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.changeAor(s.row)}}},[e._v(e._s(e.$t("orders.recover")))]):e._e()]}}])})],2)]]],2)],1)],1),e.items.length?t("el-row",{attrs:{gutter:20}},[t("el-col",{staticClass:"d-flex justify-content-center",attrs:{span:24}},[t("div",[t("el-pagination",{attrs:{"current-page":Number(e.page),background:!0,layout:"sizes, total, prev, pager, next, jumper","page-sizes":e.pageSizes,"page-size":e.rowsPerPage,total:Number(e.total)},on:{"current-change":e.toPage,"size-change":e.changePageSize}})],1)])],1):e._e()],1),t("el-backtop",{staticClass:"goto-top",attrs:{target:".main-scroll  .el-scrollbar__wrap",right:20,bottom:120}}),t("el-dialog",{attrs:{title:e.$t("orders.选择仓库"),"close-on-click-modal":!1,visible:e.dialogVisibleHouse,width:"30%"},on:{"update:visible":function(t){e.dialogVisibleHouse=t},open:function(t){return e.openStorehouse()}}},[t("el-row",[t("el-col",[t("el-form",{ref:"form",attrs:{model:e.formHouse,"label-width":"100px"}},[t("el-form-item",{attrs:{label:e.$t("orders.仓库")+":"}},[t("el-radio-group",{model:{value:e.formHouse.type,callback:function(t){e.$set(e.formHouse,"type",t)},expression:"formHouse.type"}},e._l(e.storehouseList,(function(s){return t("el-radio",{key:s.id,staticStyle:{padding:"10px",width:"100px",overflow:"hidden","text-overflow":"ellipsis"},attrs:{label:s.id,name:"type"}},[e._v(e._s(s.name))])})),1)],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelHouseDialog}},[e._v(e._s(e.$t("orders.取消")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.buildOrder}},[e._v(e._s(e.$t("orders.提交")))])],1)],1),t("el-dialog",{attrs:{title:e.$t("orders.批量解绑商品"),visible:e.bathBundDialog,width:"30%","before-close":e.handleCloseBund},on:{"update:visible":function(t){e.bathBundDialog=t}}},[t("div",{staticClass:"sina-box"},[t("el-link",{attrs:{type:"danger",underline:!1}},[e._v(e._s(e.$t("orders.注意：你现在操作解绑国内，有可能会影响已付款的订单，请确认操作")))]),t("p"),t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{model:e.formInline}},[t("el-form-item",{attrs:{label:e.$t("orders.下载解绑模板：")}},[t("el-button",{attrs:{type:"text"},on:{click:e.downloadFileBuild}},[e._v(e._s(e.$t("orders.解绑模板")))])],1),t("el-form-item",{attrs:{label:e.$t("orders.导入解绑文档")}},[t("el-input",{staticStyle:{width:"65%"},attrs:{type:"text","auto-complete":"off",placeholder:e.$t("orders.请上传模板文件"),readonly:"readonly"},model:{value:e.formInline.templateFile,callback:function(t){e.$set(e.formInline,"templateFile",t)},expression:"formInline.templateFile"}},[t("el-button",{attrs:{slot:"append",type:"success"},on:{click:e.uploadFileClick},slot:"append"},[t("i",{staticClass:"el-icon-upload"}),e._v(" "+e._s(e.$t("orders.选择本地Excel文件")))])],1)],1),t("input",{staticStyle:{display:"none"},attrs:{id:"uploadFile",type:"file",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},on:{change:function(t){return e.uploadExcel(t)}}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setDialog()}}},[e._v(e._s(e.$t("confirm")))])],1)]),t("el-dialog",{attrs:{title:"解除拆分订单",visible:e.rowData.visible,width:"40%","before-close":e.handleCloseSP},on:{"update:visible":function(t){return e.$set(e.rowData,"visible",t)},open:function(t){return e.openSP()}}},[t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataSP,border:""},on:{"selection-change":e.handleSelectionChangeSP}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"childOrderId",label:e.$t("Order Number"),width:"180"}}),t("el-table-column",{attrs:{label:e.$t("Created Time"),prop:"timeCreated"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleCloseSP}},[e._v(e._s(e.$t("取消")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveSP}},[e._v(e._s(e.$t("确定")))])],1)]),t("dialogQuote",{attrs:{quoteData:e.dialogQuoteInfo},on:{openRelate:e.openRelate}}),t("dialogRelate",{attrs:{relateData:e.dialogRelateInfo},on:{relateFn:e.relateFn}}),t("dialogImport",{attrs:{importData:e.dialoImportInfo},on:{submitUpload:e.submitUpload}}),t("dialogCreateOrder",{attrs:{data:e.dialogCreateInfo},on:{createUpload:e.createUpload}}),t("dialoAuth",{attrs:{authData:e.dialoAuthInfo},on:{openSecretKey:e.openSecretKey}}),t("dialogKey",{attrs:{keyData:e.dialoKeyInfo},on:{openAddComment:e.openAddComment}}),t("dialogLogistic",{attrs:{dialogLogistic:e.dialogLogistic}}),t("dialogAssociation",{attrs:{dialogAssociation:e.dialogAssociation}}),t("DialogEditComment",{attrs:{DialogEditComment:e.DialogEditComment}}),t("dialogMarkShipped",{attrs:{dialogMarkShipped:e.dialogMarkShipped},on:{saveMarkShipped:e.saveMarkShipped}}),t("orderCnt",{attrs:{data:e.dialogOrderCnt}}),t("dialogSplit",{attrs:{keyData:e.dialogSplitInfo},on:{splitOrderFn:e.splitOrderFn}}),t("filterOrder",{attrs:{filterData:e.filterDialog},on:{callBackFilter:e.changeBackData,callBackCloseFilter:e.closeFilter}}),t("order-fail",{attrs:{failData:e.failData},on:{callBackFail:e.changeFail}})],1)},i=[],r=(s("14d9"),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.dialogLogistic.isShow,width:"800px","show-close":!1,"before-close":e.closeHandle,title:""},on:{"update:visible":function(t){return e.$set(e.dialogLogistic,"isShow",t)}}},[t("el-row",{staticStyle:{"word-break":"break-word"}},[t("el-row",{staticClass:"tx-center pd-15"},[1==e.dialogLogistic.errorType?t("div",[e._v(e._s(e.$t("orders.该收货地址未设置物流方式")))]):e._e(),3==e.dialogLogistic.errorType?t("div",[e._v(e._s(e.$t("orders.该订单低于最低可发货重量"))+"("+e._s(e.dialogLogistic.min)+"g)")]):e._e(),2==e.dialogLogistic.errorType?t("div",[e._v(e._s(e.$t("orders.该订单低于最低可发货体积"))+"("+e._s(e.dialogLogistic.min)+"cm"),t("sup",[e._v("3")]),e._v(")")]):e._e(),5==e.dialogLogistic.errorType?t("div",[e._v(e._s(e.$t("orders.该订单高于最高可发货重量"))+"("+e._s(e.dialogLogistic.max)+"g)")]):e._e(),4==e.dialogLogistic.errorType?t("div",[e._v(e._s(e.$t("orders.该订单高于最高可发货体积"))+"("+e._s(e.dialogLogistic.max)+"cm"),t("sup",[e._v("3")]),e._v(")")]):e._e(),6==e.dialogLogistic.errorType?t("div",[e._v(e._s(e.$t("orders.该订单以下商品属性不符合可发货商品的属性要求")))]):e._e(),7==e.dialogLogistic.errorType?t("div",[e._v(e._s(e.$t("orders.该订单商品总重量不符合可发货要求")))]):e._e()]),3==e.dialogLogistic.errorType||5==e.dialogLogistic.errorType?t("el-row",{staticClass:"tx-center pd-15"},[t("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:e.items}},[t("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),t("el-table-column",{attrs:{label:e.$t("orders.重量")+"(g)",prop:"weight"}}),t("el-table-column",{attrs:{label:e.$t("orders.数量"),prop:"number"}}),t("el-table-column",{attrs:{label:e.$t("orders.总重量")+"(g)",prop:"weightTotal"}})],1)],1):e._e(),2==e.dialogLogistic.errorType||4==e.dialogLogistic.errorType?t("el-row",{staticClass:"tx-center pd-15"},[t("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:e.items}},[t("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),t("el-table-column",{attrs:{prop:"volume"}},[t("template",{slot:"header"},[e._v(" "+e._s(e.$t("orders.体积"))+"(cm"),t("sup",[e._v("3")]),e._v(") ")])],2),t("el-table-column",{attrs:{label:e.$t("orders.数量"),prop:"number"}}),t("el-table-column",{attrs:{prop:"volumeTotal"}},[t("template",{slot:"header"},[e._v(" "+e._s(e.$t("orders.总体积"))+"(cm"),t("sup",[e._v("3")]),e._v(") ")])],2)],1)],1):e._e(),6==e.dialogLogistic.errorType?t("el-row",{staticClass:"tx-center pd-15"},[t("el-table",{staticClass:"mg-t-20",attrs:{border:"",data:e.items}},[t("el-table-column",{attrs:{label:"SKU",prop:"vendorSku"}}),t("el-table-column",{attrs:{label:e.$t("orders.属性")},scopedSlots:e._u([{key:"default",fn:function(s){return e._l(s.row.productType,(function(s,a){return t("div",{key:a},[e._v(" "+e._s(e.$dict.productType[s]?e.$t(e.$dict.productType[s].text):"")+" ")])}))}}],null,!1,2337534688)})],1)],1):e._e(),t("el-row",{staticClass:"tx-center"},[t("el-button",{staticClass:"mt-15",attrs:{type:"primary"},on:{click:e.closeHandle}},[e._v(e._s(e.$t("orders.知道了")))])],1)],1)],1)}),o=[],l={props:["dialogLogistic"],data(){return{items:[]}},watch:{"dialogLogistic.items":{handler(){this.dialogLogistic.items&&(this.items=Object.values(this.dialogLogistic.items))},deep:!0,immediate:!0}},mounted(){},methods:{closeHandle(){this.dialogLogistic.isShow=!1,this.dialogLogistic.items=[],this.dialogLogistic.errorType=null,this.dialogLogistic.min="",this.dialogLogistic.max=""}}},n=l,d=(s("79b8"),s("2877")),c=Object(d["a"])(n,r,o,!1,null,"a658c750",null),u=c.exports,p=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"dialog-association",attrs:{visible:e.dialogAssociation.isShow,width:"500px",title:""},on:{"update:visible":function(t){return e.$set(e.dialogAssociation,"isShow",t)}}},[e.dialogAssociation.hasProduct?t("el-row",[t("el-row",{staticClass:"tx-center"},[t("h3",{staticStyle:{padding:"40px 0"}},[e._v(e._s(e.$t("orders.之前已有选中商品尚未被处理，是否继续报价？")))]),t("div",[t("el-button",{staticClass:"mt-15",attrs:{type:"primary"},on:{click:e.giveUpFn}},[e._v(e._s(e.$t("orders.放弃")))]),t("el-button",{staticClass:"mt-15",attrs:{type:"primary"},on:{click:e.continueFn}},[e._v(e._s(e.$t("orders.继续报价")))])],1)])],1):e._e(),e.dialogAssociation.hasProduct?e._e():t("el-row",[t("el-row",{staticClass:"tx-flex"},[t("div",[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"","show-file-list":!1,"on-change":e.handleUploadChange,"auto-upload":!1}},[t("i",{staticClass:"el-icon-document-copy"}),t("div",{staticClass:"el-upload__text"},[e._v(e._s(e.$t("orders.选择文件")))])])],1),t("div",{staticStyle:{width:"200px"}},[t("div",[e._v(e._s(e.$t("orders.请按规范填写表格仅支持xlsx格式文件")))]),t("div",[e._v(e._s(e.$t("orders.上传的文件不能超过10M"))+" ")])])]),t("el-row",{staticClass:"tx-right pd-30"},[t("el-button",{on:{click:e.cancelFn}},[e._v(e._s(e.$t("orders.取消")))])],1)],1)],1)},h=[],m={props:["dialogAssociation"],mounted(){},methods:{cancelFn(){this.dialogAssociation.isShow=!1},giveUpFn(){this.$apiCall("api.ShopifyOrder.clearWaitBindItem",{},e=>{9999==e.ErrorCode?this.dialogAssociation.hasProduct=!1:this.$elementMessage(e.Message,"error")})},continueFn(){this.$router.push({path:"/orderAssociation"})},handleUploadChange(e){this.$showLoading(),this.$apiCall("api.ShopifyOrder.importNotBindItem",{"@file":e.raw},e=>{this.$hideLoading(),9999==e.ErrorCode?this.$router.push({path:"/orderAssociation"}):this.$elementMessage(e.Message,"error")})}}},g=m,f=(s("c77a"),s("702a"),Object(d["a"])(g,p,h,!1,null,"d2c8a382",null)),y=f.exports,v=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.quoteData.isShow,title:e.$t("orders.Made"),width:"800px"},on:{"update:visible":function(t){return e.$set(e.quoteData,"isShow",t)}}},[t("el-divider"),t("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.quoteData.items}},[t("el-table-column",{attrs:{label:e.$t("orders.productinfo"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"d-flex"},[t("img",{attrs:{src:s.row.imgUrl,width:"60",height:"60"}}),t("div",{staticClass:"mg-l-20"},[t("p",[e._v(e._s(s.row.name))]),t("p",[e._v("SPU: "+e._s(s.row.spu))]),t("p",[e._v("SKU: "+e._s(s.row.sku))])])])]}}])}),t("el-table-column",{attrs:{prop:"quantity",label:e.$t("orders.qty"),width:"150"}}),t("el-table-column",{attrs:{label:e.$t("orders.price"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.currency)+" "+e._s(s.row.price||0))])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.operate")},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:e.goto}},[e._v(" "+e._s(e.$t("orders.putaway"))+" ")]),t("el-link",{staticClass:"mg-r-20",attrs:{type:"primary"},on:{click:function(t){return e.openRelate(s.row)}}},[e._v(" "+e._s(e.$t("orders.relate"))+" ")])],1)]}}])})],1)],1),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.quoteData.isShow=!1}}},[e._v(e._s(e.$t("orders.cancel")))])],1)],1)},b=[],w={props:["quoteData"],data(){return{vendorId:localStorage.getItem("vendorId")}},methods:{goto(){if("148982"!=this.vendorId&&"146428"!=this.vendorId&&"144875"!=this.vendorId&&"144843"!=this.vendorId&&"143779"!=this.vendorId&&"143654"!=this.vendorId&&"74"!=this.vendorId){let e=this.$router.resolve({name:"AddGoods2"});window.open(e.href,"_blank")}else{let e=this.$router.resolve({name:"AddGoods"});window.open(e.href,"_blank")}},openRelate(e){this.$emit("openRelate",e)}}},_=w,k=(s("4e6e"),Object(d["a"])(_,v,b,!1,null,"ce4300fc",null)),S=k.exports,C=s("8c6c"),I=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.importData.isShow,title:e.$t("invoice.shippinginformation"),width:"800px"},on:{"update:visible":function(t){return e.$set(e.importData,"isShow",t)}}},[t("el-divider"),t("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[t("div",{staticClass:"draw-alert mg-b-20"},[t("el-alert",{attrs:{type:"warning",closable:!1}},[t("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[t("span",[e._v(e._s(e.$t("invoice.templateprovided")))]),t("el-button",{attrs:{type:"text"},on:{click:e.downloadFile}},[e._v(e._s(e.$t("invoice.template")))])],1)])],1),t("div",{staticStyle:{"margin-top":"40px"}},[t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","auto-upload":!1,"file-list":e.uploadfileList,"on-change":e.handleUploadChange}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.$t("invoice.fileSelect")))]),[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v(" "+e._s(e.$t("invoice.shippinginformation"))+" ")])],t("div",{staticClass:"el-upload__tip mg-y-15",staticStyle:{"margin-top":"20px"},attrs:{slot:"tip"},slot:"tip"},[t("p",[e._v(e._s(e.$t("invoice.shippinginformation1")))]),t("p",[e._v(e._s(e.$t("invoice.shippinginformation2")))])])],2)],1)]),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.importData.isShow=!1}}},[e._v("取消")])],1)],1)},x=[],D={props:["importData"],data(){return{uploadfileList:[]}},methods:{downloadFile(){let e="/newFile/orders_impor.xlsx";0==$("#downloadFile").length&&$("body").append('<iframe id="downloadFile" style="display:none"></iframe>');let t=e=>{document.getElementById("downloadFile").src=e};t(e)},handleUploadChange(e){this.uploadfileList=[],this.uploadfileList.push(e)},submitUpload(){if(!this.uploadfileList.length)return void this.$elementMessage(this.$t("invoice.selectfile"),"error");let e=this.uploadfileList[0].raw;this.$emit("submitUpload",e)}}},P=D,M=Object(d["a"])(P,I,x,!1,null,"570c5446",null),N=M.exports,E=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.data.isShow,title:e.$t("orders.创建订单"),width:"600px"},on:{"update:visible":function(t){return e.$set(e.data,"isShow",t)},close:e.closeDialog}},[t("el-divider"),t("div",{staticClass:"d-body",staticStyle:{margin:"20px"}},[t("el-alert",{attrs:{type:"warning",closable:!1}},[t("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-between"}},[t("span",[e._v(e._s(e.$t("orders.请按照提供的模板文件创建订单")))]),t("el-button",{attrs:{type:"text"},on:{click:e.downloadFile}},[e._v(e._s(e.$t("invoice.template")))])],1)]),t("div",{staticClass:"mg-t-20"},[t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","auto-upload":!1,"file-list":e.uploadfileList,"on-change":e.handleUploadChange}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.$t("invoice.fileSelect")))]),t("div",{staticClass:"el-upload__tip mg-y-15",staticStyle:{"margin-top":"20px"},attrs:{slot:"tip"},slot:"tip"},[t("p",[e._v("1."+e._s(e.$t("orders.请按规范填写表格，仅支持xlsx格式文件")))]),t("p",[e._v("2."+e._s(e.$t("orders.上传的文件不能超过2M，只处理前99条数据")))]),t("p",{staticStyle:{color:"#f56c6c"}},[e._v("3."+e._s(e.$t("orders.订单编号处若填写同一编号为同一订单")))])])],1)],1)],1),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.data.isShow=!1}}},[e._v(e._s(e.$t("orders.取消")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createUpload()}}},[e._v(e._s(e.$t("orders.提交")))])],1)],1)},O=[],F={props:["data"],data(){return{uploadfileList:[]}},methods:{closeDialog(){this.uploadfileList=[]},downloadFile(){let e="/newFile/orders_creat.xlsx";0==$("#downloadFileCreate").length&&$("body").append('<iframe id="downloadFileCreate" style="display:none"></iframe>');let t=e=>{document.getElementById("downloadFileCreate").src=e};t(e)},handleUploadChange(e){this.uploadfileList=[],this.uploadfileList.push(e)},createUpload(){if(!this.uploadfileList.length)return void this.$elementMessage(this.$t("invoice.selectfile"),"error");if(this.uploadfileList[0].raw.size/1024/1024>2)return void this.$message({message:this.$t("orders.上传文件不能大于2MB"),type:"error"});let e=this.uploadfileList[0].raw;this.$emit("createUpload",e),this.uploadfileList=[]}}},A=F,L=Object(d["a"])(A,E,O,!1,null,"18e4feaa",null),R=L.exports,T=s("5538"),J=s("fa9e"),B=s("cd22"),U=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("invoice.shippedMark"),visible:e.dialogMarkShipped.isShow,width:"700px"},on:{"update:visible":function(t){return e.$set(e.dialogMarkShipped,"isShow",t)}}},[t("el-divider"),t("div",{staticClass:"d-body"},[e.dialogMarkShipped.item?t("el-row",{staticClass:"pd-x-20",attrs:{gutter:20}},[t("el-col",{staticStyle:{color:"#303133"},attrs:{span:24}},[e._v(" "+e._s(e.dialogMarkShipped.item.name)+" ")]),t("el-col",{attrs:{span:24}},[t("el-form",{attrs:{"label-width":"160px"}},[t("el-form-item",{attrs:{label:e.$t("invoice.Logisticsnumber"),required:""}},[t("el-input",{attrs:{placeholder:e.$t("invoice.Logisticsnumber")},model:{value:e.dialogMarkShipped.trackNumber,callback:function(t){e.$set(e.dialogMarkShipped,"trackNumber",t)},expression:"dialogMarkShipped.trackNumber"}})],1),t("el-form-item",{attrs:{label:e.$t("invoice.Logisticscompany"),required:""}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("invoice.Logisticscompany")},model:{value:e.dialogMarkShipped.trackKey,callback:function(t){e.$set(e.dialogMarkShipped,"trackKey",t)},expression:"dialogMarkShipped.trackKey"}},e._l(e.dialogMarkShipped.shopifyCompany,(function(e){return t("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})})),1),99==e.dialogMarkShipped.trackKey?t("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:e.$t("invoice.Logisticscompany")},model:{value:e.dialogMarkShipped.trackCompany,callback:function(t){e.$set(e.dialogMarkShipped,"trackCompany",t)},expression:"dialogMarkShipped.trackCompany"}}):e._e()],1),99==e.dialogMarkShipped.trackKey?t("el-form-item",{attrs:{label:e.$t("invoice.Trackinglinks")}},[t("el-input",{attrs:{placeholder:e.$t("invoice.Trackinglinks")},model:{value:e.dialogMarkShipped.trackUrl,callback:function(t){e.$set(e.dialogMarkShipped,"trackUrl",t)},expression:"dialogMarkShipped.trackUrl"}})],1):e._e()],1)],1)],1):e._e()],1),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogMarkShipped.isShow=!1}}},[e._v(e._s(e.$t("invoice.cancel")))]),t("el-button",{attrs:{type:"primary",loading:e.dialogMarkShipped.loading},on:{click:e.saveMarkShipped}},[e._v(" "+e._s(e.$t("invoice.confirm"))+" ")])],1)],1)},q=[],K={props:["dialogMarkShipped"],data(){return{invoiceInfo:{}}},methods:{saveMarkShipped(){if(!this.dialogMarkShipped.trackNumber)return void this.$elementMessage(this.$t("invoice.logisticsnumber"),"error");if(!this.dialogMarkShipped.trackKey)return void this.$elementMessage(this.$t("invoice.logisticscompany"),"error");if(99==this.dialogMarkShipped.trackKey&&!this.dialogMarkShipped.trackCompany)return void this.$elementMessage(this.$t("invoice.logisticscompany"),"error");let e="";this.dialogMarkShipped.shopifyCompany.forEach(t=>{this.dialogMarkShipped.trackKey==t.key&&(e=99!=this.dialogMarkShipped.trackKey?t.name:this.dialogMarkShipped.trackCompany)}),this.$emit("saveMarkShipped")}}},z=K,W=Object(d["a"])(z,U,q,!1,null,"e9348b1c",null),j=W.exports,H=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.data.loading,expression:"data.loading"}],attrs:{"close-on-press-escape":!1,"close-on-click-modal":!1,title:"订单信息",visible:e.data.isShow,width:"90%"},on:{"update:visible":function(t){return e.$set(e.data,"isShow",t)}}},[t("el-divider"),t("div",{staticClass:"pd-x-20 mg-y-30"},[t("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.data.items}},[t("el-table-column",{attrs:{prop:"codeName",label:e.$t("orders.third"),width:"150"}}),t("el-table-column",{attrs:{prop:"orderId",label:e.$t("orders.orderID"),width:"150"}}),t("el-table-column",{attrs:{label:e.$t("orders.vendorName"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(e._s(s.row.customer?s.row.customer.name:"---"))])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.storeName"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.store||"---"))])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.CreateDate"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.timeCreated||"---"))])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.address"),"min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.zip?s.row.shippingJsonInfo.zip:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.address1?s.row.shippingJsonInfo.address1:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.city?s.row.shippingJsonInfo.city:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.province?s.row.shippingJsonInfo.province:"---")+" "+e._s(s.row.shippingJsonInfo&&s.row.shippingJsonInfo.country?s.row.shippingJsonInfo.country:"---")+" ")]),t("span",[e._v(e._s(s.row.receiverAddress||"---"))])])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.receiver"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.receiverName||"---"))])]}}])}),t("el-table-column",{attrs:{label:e.$t("orders.logistics"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.trackCompany?`${s.row.trackCompany}${s.row.trackNumber?"："+s.row.trackNumber:""}`:"---"))])]}}])}),t("el-table-column",{attrs:{label:`${e.$t("orders.logisticsFee")}(${e.$store.state.country.symbol})`,width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[3==s.row.discountType?t("span",[t("span",[e._v("0 ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(s.row.trackFee||"---"))])])]):t("span",[e._v(e._s(s.row.trackFee||"---"))])]}}])}),t("el-table-column",{attrs:{label:`${e.$t("orders.tradeAmount")}(${e.$store.state.country.symbol})`,width:"100"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.discountType?t("span",[t("span",[e._v(e._s(s.row.payAmount||"---")+" ")]),t("span",{staticStyle:{color:"red","text-decoration":"line-through"}},[t("span",{staticStyle:{color:"#606266"}},[e._v(e._s(s.row.realAmount||"---"))])])]):t("span",[e._v(e._s(s.row.realAmount||"---"))])]}}])})],1)],1),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},on:{click:function(t){e.data.isShow=!1}},slot:"footer"},[t("el-button",[e._v(" "+e._s(e.$t("orders.cancel"))+" ")])],1)],1)],1)},V=[],Q={props:["data"],data(){return{}},created(){},mounted(){},methods:{}},Y=Q,G=(s("a439"),Object(d["a"])(Y,H,V,!1,null,"026aafdb",null)),X=G.exports,Z=function(){var e=this,t=e._self._c;return t("div",{},[t("el-dialog",{attrs:{title:"批量筛选",visible:e.filterData.isShowDialog,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.filterData,"isShowDialog",t)}}},[t("el-row",{staticClass:"pd20"},[t("el-col",{staticClass:"pm20"},[t("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[t("el-radio",{attrs:{label:3}},[e._v("第三方交易号")]),t("el-radio",{attrs:{label:4}},[e._v("订单编号")])],1)],1),t("el-col",[t("el-input",{attrs:{type:"textarea",rows:6,placeholder:"每行一个订单编号（支持excel复制黏贴）,一次最多支持2000个"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("确 定")])],1)],1)],1)},ee=[],te={components:{},props:["filterData"],data(){return{radio:3,textarea:"",param:{show:!1}}},computed:{},watch:{},methods:{handleOk(){if(!this.textarea)return void this.$message.error("请填写内容");let e=this.textarea.split("\n").map(e=>e.replace(/\s+/g,"")).filter(e=>e);3===this.radio?(this.param.ok=1,this.param.order=e):(this.param.ok=2,this.param.order=e),this.textarea="",this.radio=3,this.$emit("callBackFilter",this.param)},handleClose(){this.textarea="",this.radio=3,this.$emit("callBackCloseFilter",this.param)}},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},se=te,ae=(s("cdfc"),Object(d["a"])(se,Z,ee,!1,null,"bf4b02e0",null)),ie=ae.exports,re=function(){var e=this,t=e._self._c;return t("div",{},[t("el-dialog",{attrs:{title:"返回结果",visible:e.failData.isShowDialog,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.failData,"isShowDialog",t)}}},[t("el-row",{staticClass:"pd20"},[t("el-col",{staticClass:"pm20"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.failData.obj,border:""}},[t("el-table-column",{attrs:{label:"编号"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row))])]}}])}),t("el-table-column",{attrs:{prop:"name",label:"描述"}},[[t("span",[e._v("订单不存在或者不满足搜索要求")])]],2)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleClose}},[e._v("确 定")])],1)],1)],1)},oe=[],le={components:{},props:["failData"],data(){return{tableData:""}},computed:{},watch:{},methods:{handleClose(){this.$emit("callBackFail",this.param)}},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},ne=le,de=(s("7ebc"),Object(d["a"])(ne,re,oe,!1,null,"fedd14c6",null)),ce=de.exports,ue=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("orders.拆分订单"),visible:e.keyData.isShow,width:"1000px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.keyData,"isShow",t)}}},[t("el-divider"),t("div",{staticClass:"d-body"},[e._l(e.keyData.items,(function(s,a){return t("el-card",{key:s.id,staticClass:"mg-t-20",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix d-flex justify-content-between",attrs:{slot:"header"},slot:"header"},[t("div",[e._v(" "+e._s(e.$t("orders.订单编号：{num1}，订单重量：{num2} g",{num1:s.orderId,num2:e.countTotal(s.items,"totalWe")}))+" ")]),t("div",[e._v(" "+e._s(e.$t("orders.新订单将包含{num1}个商品，商品重量 {num2} g，总重量 {num3} g",{num1:s.checkIds?s.checkIds.length:0,num2:s.checkIdsWeight||0,num3:s.checkIdsWeight||0}))+" ")])]),t("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:s.items,"row-key":e=>e.id},on:{"selection-change":function(t){return e.handleSelectionChange(t,s)}}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:e.$t("quotation.图片")},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-image",{attrs:{src:s.row.imgUrl,width:"50",height:"50"}},[t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),t("span",{staticClass:"dot"},[e._v("...")])]),t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])]}}],null,!0)}),t("el-table-column",{attrs:{label:e.$t("orders.SKU/name"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(" "+e._s(s.row.vendorSku||"--")+" ")]),t("div",[e._v(" "+e._s(s.row.vendorProductName||"--")+" ")])]}}],null,!0)}),t("el-table-column",{attrs:{label:e.$t("quotation.价格")},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(" "+e._s(s.row.currency||"")+" "+e._s(s.row.vendorPrice||"--")+" ")])]}}],null,!0)}),t("el-table-column",{attrs:{label:e.$t("orders.总重量")},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(" "+e._s(s.row.totalWe||"--")+" g ")])]}}],null,!0)}),t("el-table-column",{attrs:{label:e.$t("orders.数量")},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(" "+e._s(s.row.quantity||"--")+" ")])]}}],null,!0)}),t("el-table-column",{attrs:{label:e.$t("orders.库存")},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(" "+e._s(s.row.inventory||"--")+" ")])]}}],null,!0)}),t("el-table-column",{attrs:{label:e.$t("orders.拆分数量")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[t("el-input-number",{staticStyle:{width:"50px"},attrs:{step:1,"step-strictly":!0,min:1,max:a.row.qty,controls:!1,size:"small"},on:{change:function(t){return e.changeWeight(t,a.row,s)}},model:{value:a.row.splitQty,callback:function(t){e.$set(a.row,"splitQty",t)},expression:"scope.row.splitQty"}})],1)]}}],null,!0)})],1)],1)})),t("div",{staticClass:"mg-t-20"},[t("el-input",{attrs:{placeholder:e.$t("quotation.备注"),width:"500"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],2),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.keyData.isShow=!1}}},[e._v(e._s(e.$t("orders.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.splitOrderFn()}}},[e._v(e._s(e.$t("orders.confirm")))])],1)],1)},pe=[],he=(s("13d5"),{props:["keyData"],data(){return{remark:""}},methods:{splitOrderFn(){let e=[],t={};if(this.keyData.items.forEach(s=>{s.checkIds&&(s.checkIds.length==s.items.length&&s.items.every(e=>e.splitQty&&e.splitQty==e.qty)&&e.push(s),s.checkIds.forEach(e=>{s.items.forEach(s=>{e==s.id&&(t[e]=s.splitQty)})}))}),e.length){let t=e.map(e=>e.orderId);return void this.$elementMessage(this.$t("orders.{num} 拆分的新订单商品信息同原来一致，拆单无效",{num:t}),"error")}let s={remark:this.remark,itemSplit:JSON.stringify(t)};console.log(s),this.$emit("splitOrderFn",s)},handleSelectionChange(e,t){e.length||(this.$set(t,"checkIds",[]),this.$set(t,"checkIdsWeight",0)),e.forEach(e=>{this.$set(e,"checkIdsWeight",(e.vendorProductWeight?Number(e.vendorProductWeight):0)*(e.splitQty?Number(e.splitQty):0))}),this.$set(t,"checkIds",e.map(e=>e.id)),this.$set(t,"checkIdsWeight",this.countTotal(e,"checkIdsWeight"))},changeWeight(e,t,s){this.$set(t,"checkIdsWeight",(t.vendorProductWeight?Number(t.vendorProductWeight):0)*(t.splitQty?Number(t.splitQty):0)),this.$set(s,"checkIdsWeight",this.countTotal(s.items,"checkIdsWeight"))},countTotal(e,t){let s=0;return s=e.reduce((e,s,a,i)=>s[t]?e+Number(s[t]):e,0),s}}}),me=he,ge=(s("f09a"),Object(d["a"])(me,ue,pe,!1,null,"0c558022",null)),fe=ge.exports,ye=(s("bc3a"),{data(){return{host:location.host,dialogVisibleHouse:!1,formHouse:{type:""},tableDataSP:[],multipleSelectionSP:[],formInline:{templateFile:""},rowData:{visible:!1,customerId:"",accountId:"",parentOrderId:""},afterData:{dialogVisible:!1,shopifyAccountId:"",orderId:""},isExpansion:!0,bathBundDialog:!1,batchNum:0,offlineNum:0,vipOrderReserveDay:this.$root.$children[0].vipNowData.orderReserveDay,isVipUp:!1,loading:!1,vendorId:localStorage.getItem("vendorId"),filterDialog:{isShowDialog:!1,obj:{}},failData:{isShowDialog:!1,obj:{}},billStatus:1,tableHeight:400,reSizeTime:0,batchType:1,pageSizes:[10,20,50,100],page:this.$route.query.page?Number(this.$route.query.page):1,rowsPerPage:localStorage.getItem("ordersRowsPerPage")?Number(localStorage.getItem("ordersRowsPerPage")):10,items:[],total:0,totalPage:0,status:this.$route.params.status?Number(this.$route.params.status):1,activeName:"1",tabList:[],storeList:[],vendorList:[],checkIds:[],checkItems:[],vendorAllOrderCnt:{},filterParams:{date:[],dateFrom:"",dateTo:"",date2:[],dateFrom2:"",dateTo2:"",accountIds:"",relationshipId:"",orderId:"",codeName:"",receiverName:"",sysCode:""},filterParamsDefault:"{}",dialogAssociationDefault:"{}",dialogAssociation:{isShow:!1,hasProduct:!1},dialogLogisticDefault:"{}",dialogLogistic:{isShow:!1,errorType:null,items:[],max:"",min:""},dialogQuoteInfo:{isShow:!1,loading:!1,items:[]},dialogQuoteInfoDefault:"{}",dialogRelateInfo:{isShow:!1,loading:!1,items:[],Pagination:{},item:"",list:[]},dialogRelateInfoDefault:"{}",dialogSplitInfo:{isShow:!1,loading:!1,items:[]},dialogSplitInfoDefault:"{}",dialoImportInfo:{isShow:!1,loading:!1},dialogImportInfoDefault:"{}",dialoAuthInfo:{isShow:!1,loading:!1,shopData:[]},dialogAuthInfoDefault:"{}",dialogCreateInfo:{isShow:!1,loading:!1},dialogCreateInfoDefault:"{}",dialoKeyInfo:{isShow:!1,loading:!1},dialogKeyInfoDefault:"{}",DialogEditComment:{loading:!1,uploadLoading:!1,visible:!1,contents:"",shopName:"",attach:[],commentId:"",item:null},DialogEditCommentDefault:"{}",dialogMarkShipped:{isShow:!1,loading:!1,trackNumber:"",trackCompany:"",realCompany:"",item:null,shopifyCompany:[],trackKey:"",trackUrl:""},dialogMarkShippedDefault:"{}",dialogOrderCnt:{isShow:!1,items:[]},statusArr:{1:{text:this.$t("orders.tabBar14"),type:"warning",val:1},2:{text:this.$t("orders.tabBar1"),type:"warning",val:2},3:{text:this.$t("orders.tabBar13"),type:"warning",val:3},4:{text:this.$t("orders.tabBar2"),type:"warning",val:4},5:{text:this.$t("orders.tabBar3"),type:"warning",val:5},6:{text:this.$t("orders.ordersMenu2"),type:"success",val:6},7:{text:this.$t("orders.ordersMenu4"),type:"success",val:7},8:{text:this.$t("orders.tabBar4"),type:"info",val:8},9:{text:this.$t("orders.tabBar5"),type:"info",val:9},10:{text:this.$t("orders.tabBar6"),type:"info",val:10},11:{text:this.$t("orders.tabBar11"),type:"info",val:11},12:{text:this.$t("orders.tabBar12"),type:"info",val:12},14:{text:this.$t("orders.tabBar144"),type:"info",val:14}},storehouseList:[],statusPayArr:{1:{text:this.$t("orders.obligation"),type:"danger",val:1},4:{text:this.$t("orders.payFail"),type:"warning",val:4},5:{text:this.$t("orders.suppliernot"),type:"warning",val:5}},checkIds:[],checkItems:[]}},computed:{isVipOrder(){let e=!1;return e=!!(this.filterParams.date[0]&&this.GetDateStr(this.vipOrderReserveDay)>=new Date(this.filterParams.date[0]).getTime())&&0!=this.vipOrderReserveDay,e}},components:{dialogAssociation:y,dialogLogistic:u,dialogQuote:S,dialogRelate:C["a"],dialogImport:N,dialogCreateOrder:R,dialoAuth:T["a"],dialogKey:J["a"],DialogEditComment:B["a"],dialogMarkShipped:j,orderCnt:X,dialogSplit:fe,filterOrder:ie,orderFail:ce},watch:{status(){this.$refs.gridTable.clearSelection(),this.filterParams=JSON.parse(this.filterParamsDefault),this.activeName=this.$route.params.active},$route(e,t){this.activeName=this.$route.params.active,this.status=this.$route.params.status?Number(this.$route.params.status):1,e.params.status!==t.params.status&&(this.filterParams=JSON.parse(this.filterParamsDefault),this.batchType=1),this.vipOrderReserveDay=this.$root.$children[0].vipNowData.orderReserveDay,this.changeRole(),this.gotoPage()},activeName(){this.$refs.gridTable.clearSelection(),this.toPage(1)}},created(){},mounted(){this.isVip(),this.activeName=this.$route.params.active,this.changeRole(),this.batchType=1,this.filterParamsDefault=JSON.stringify(this.filterParams),this.dialogAssociationDefault=JSON.stringify(this.dialogAssociation),this.dialogQuoteInfoDefault=JSON.stringify(this.dialogQuoteInfo),this.dialogLogisticDefault=JSON.stringify(this.dialogLogistic),this.dialogRelateInfoDefault=JSON.stringify(this.dialogRelateInfo),this.dialogImportInfoDefault=JSON.stringify(this.dialoImportInfo),this.dialogCreateInfoDefault=JSON.stringify(this.dialogCreateInfo),this.dialogAuthInfoDefault=JSON.stringify(this.dialoAuthInfo),this.dialogKeyInfoDefault=JSON.stringify(this.dialoKeyInfo),this.DialogEditCommentDefault=JSON.stringify(this.DialogEditComment),this.dialogMarkShippedDefault=JSON.stringify(this.dialogMarkShipped),this.dialogSplitInfoDefault=JSON.stringify(this.dialogSplitInfo),this.getItem()},beforeDestroy(){},methods:{splitOrder(){this.checkIds.length?(this.dialogSplitInfo.isShow=!0,this.checkItems.forEach(e=>{e.items.forEach(e=>{this.$set(e,"qty",Number(e.quantity)),this.$set(e,"totalWe",(Number(e.quantity)*Number(e.vendorProductWeight)).toFixed(2))})}),this.dialogSplitInfo.items=this.checkItems):this.$elementMessage("Please select an order first","error")},handleSplit(e){this.rowData={visible:!0,customerId:e.customerId,accountId:e.shopifyAccountId,parentOrderId:e.orderId}},changeAor(e){this.$apiCall("api.ShopifyOrder.orderStatusChange",{orderId:e.orderId,type:3},e=>{9999==e.ErrorCode?"SUCCESS"==e.Message&&this.getItem():this.$message.error(e.Message)})},success(){this.rowData={visible:!1,customerId:"",accountId:"",parentOrderId:""},this.getItem()},batchUnbundling(){this.bathBundDialog=!0},handleCloseBund(){this.bathBundDialog=!1,this.formInline.templateFile=""},handleCloseSP(){this.success()},handleSelectionChangeSP(e){this.multipleSelectionSP=e},saveSP(){this.multipleSelectionSP.length?this.$apiCall("api.OrderMerge.cancelMerge",{cancelList:this.multipleSelectionSP.map(e=>e.id)},e=>{9999==e.ErrorCode?this.success():this.$message({message:e.Message,type:"error"})}):this.$elementMessage(this.$t("Please select an order first"),"error")},openSP(){let e={accountId:this.rowData.accountId,parentOrderId:this.rowData.parentOrderId,customerId:this.rowData.customerId};this.$apiCall("api.OrderMerge.getList",e,e=>{9999==e.ErrorCode?this.tableDataSP=e.Data.Results:this.$message({message:e.Message,type:"error"})})},toggleRowExpansion(){this.items.length&&(this.isExpansion=!this.isExpansion,this.toggleRowExpansionAll(this.items,this.isExpansion))},toggleRowExpansionAll(e,t){e.forEach(e=>{this.$refs.gridTable.toggleRowExpansion(e,t),void 0!==e.items&&null!==e.items&&this.toggleRowExpansionAll(e.items,t)})},handleExpandChange(e,t){this.items.length==t.length?this.isExpansion=!0:this.isExpansion=!1},rowStyle({row:e,rowIndex:t}){let s={background:"#DDDFEF",borderBottom:"1px solid #d9d9d9",fontWeight:"500"};return s},cellClassName({row:e,column:t,rowIndex:s,columnIndex:a}){return 0===a?"sub-table-cell":""},downloadFileBuild(){const e="/file/UnbundTemp.xlsx";fetch(e).then(e=>e.blob()).then(e=>{new File([e],"my-excel-file.xlsx",{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})}).catch(e=>{console.log(e)})},uploadFileClick(){document.getElementById("uploadFile").click()},setDialog(){if(0==this.formInline.templateFile.length)return this.$message.error("请上传文件"),!1;let e=document.getElementById("uploadFile").files[0];console.log(e,"this.formInline.templateFile.");let t={"@file":e};this.$apiCall("api.ShopifyOrder.cancelRelationships",t,e=>{9999==e.ErrorCode?(this.$message.success("Binding succeeded!"),this.bathBundDialog=!1,this.formInline.templateFile="",this.getItem()):this.$message({message:e.Message,type:"error"})})},uploadExcel(e){let t=this,s=e.currentTarget.files[0];t.formInline.templateFile=s.name},batchWareHouse(){0!=this.checkIds.length?this.dialogVisibleHouse=!0:this.$message.error("Please select an order")},cancelHouseDialog(){this.dialogVisibleHouse=!1,this.formHouse.type=[]},buildOrder(){let e={id:this.checkIds,warehouseId:Number(this.formHouse.type)};this.$apiCall("api.ShopifyOrder.orderChooseWarehouse",e,e=>{9999==e.ErrorCode?(this.$message.success("Binding succeeded!"),this.dialogVisibleHouse=!1,this.formHouse.type=[],this.checkIds=[],this.getItem()):this.$message({message:e.Message,type:"error"})})},openStorehouse(){this.$apiCall("api.Warehouse.finds",{},e=>{9999==e.ErrorCode?(this.storehouseList=e.Data.Results,0==e.Data.Results.length&&this.$message.error("There is no warehouse, please go to add！")):this.$message({message:e.Message,type:"error"})})},splitOrderFn(e){this.$showLoading(),this.$apiCall("api.ShopifyOrder.splitShopifyOrder",e,e=>{"9999"==e.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.dialogSplitInfo=JSON.parse(this.dialogSplitInfoDefault),this.$refs.gridTable.clearSelection(),this.getItem()):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this)),this.$hideLoading()})},exportOrder(){this.checkIds.length||this.$elementMessage("Please select an order first","error"),this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let e=e=>{document.getElementById("ifilePro").src=e},t="api.ShopifyOrder.exportShopifyOrder2";this.$apiCall(t,{idList:this.checkIds},t=>{"9999"==t.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),e(t.Data.Results)):(this.$elementMessage(t.Message,"error"),"1002"!=t.ErrorCode&&"1003"!=t.ErrorCode||this.$userFailure(this)),this.$hideLoading()})},shippedFn(e){this.dialogLogistic.errorType=e.shippingMethodArr.errorType,e.shippingMethodArr.errorSkuList&&(this.dialogLogistic.items=e.shippingMethodArr.errorSkuList),this.dialogLogistic.max=e.shippingMethodArr.max,this.dialogLogistic.min=e.shippingMethodArr.min,this.dialogLogistic.isShow=!0},importFn(){this.$apiCall("api.ShopifyOrder.getWaitBindItem",{},e=>{9999==e.ErrorCode?(e.Data.Results.length>0&&(this.dialogAssociation.hasProduct=!0),this.dialogAssociation.isShow=!0):this.$elementMessage(e.Message,"error")})},exportFn(){this.checkIds.length?this.$apiCall("api.ShopifyOrder.exportNotBindItem",{ids:this.checkIds},e=>{9999==e.ErrorCode?(window.open(e.Data.Results),this.$refs.gridTable.clearSelection(),this.checkIds=[]):this.$elementMessage(e.Message,"error")}):this.$elementMessage(this.$t("orders.selectOrder"),"error")},openCustomer(e){console.log(e,"333"),window.open(e,"_blank","my-window")},unable(e){this.$confirm(this.$t("orders.确定将该商品无法采购?"),"Tips",{confirmButtonText:this.$t("shop.确定"),cancelButtonText:this.$t("shop.取消"),type:"warning"}).then(()=>{this.$apiCall("api.ShopifyOrder.setUnableToPurchase",{itemId:e.id},e=>{9999==e.ErrorCode?(this.getItem(),this.$elementMessage(this.$t("orders.已添加到无法采购"),"success")):this.$elementMessage(e.Message,"error")})}).catch(()=>{this.$message({type:"info",message:this.$t("orders.已取消")})})},show(e){this.$refs["popover"+e.orderId].showPopper=!0,this.$nextTick(()=>{this.$refs["popover"+e.orderId].updatePopper()})},enter(e){this.show(e)},leave(e){this.$refs["popover"+e.orderId].showPopper=!1},changeRole(){this.$route.params.status&&2!=this.$route.params.status?3==this.$route.params.status?this.$route.meta.roleWrite="invoiceDeliverEdit":4==this.$route.params.status?this.$route.meta.roleWrite="invoiceAbnormalEdit":5==this.$route.params.status?this.$route.meta.roleWrite="invoiceCompleteEdit":6==this.$route.params.status&&(this.$route.meta.roleWrite="invoiceAllEdit"):this.$route.meta.roleWrite="invoiceWaitEdit"},handleTypeOrder(e){this.batchType=e,this.getItem()},GetDateStr(e){var t=new Date;return t.setDate(t.getDate()-e),t.getTime()},isVip(){this.$apiCall("api.Admin.getWaitShopifyOrder",{},e=>{9999==e.ErrorCode&&(this.isVipUp=e.Data.Results)})},handleAllFilter(){this.filterDialog.isShowDialog=!0},goToUP(){this.$router.push({name:"pricingUp"})},shopifyOrderCnt(e){this.$showLoading(),this.$apiCall("api.ShopifyOrder.findByVendor",{invoiceId:e.id},e=>{"9999"==e.ErrorCode?(e.Data.Results.length&&e.Data.Results.forEach(e=>{this.$set(e,"shippingJsonInfo",e.shippingJson?JSON.parse(e.shippingJson):"")}),this.dialogOrderCnt.items=e.Data.Results,this.dialogOrderCnt.isShow=!0):this.$elementMessage(e.Message,"error"),this.$hideLoading()})},selectable(e,t){setTimeout(()=>!(!e||!e.paymentType||1!=e.paymentType),1e3)},async saveMarkShipped(){this.dialogMarkShipped.loading=!0;let e=[],t=[];console.log(464646464,this.dialogMarkShipped.item);let s=this.dialogMarkShipped.item.items.map(e=>({id:e.id,isManage:e.isManage}));for(let a=0;a<s.length;a++)e.push(s[a]),await this.saveMarkShippedItem(s[a].id).then(e=>{t.push(e)});t.length==e.length&&(this.$elementMessage(this.$t("orders.success"),"success"),this.dialogMarkShipped.isShow=!1,this.getItem())},saveMarkShippedItem(e){return new Promise((t,s)=>{this.$apiCall("api.ShopifyOrder.changeDeliver",{itemId:e,trackNumber:this.dialogMarkShipped.trackNumber,trackCompany:this.dialogMarkShipped.trackCompany,trackKey:this.dialogMarkShipped.trackKey,trackUrl:this.dialogMarkShipped.trackUrl},a=>{"9999"==a.ErrorCode?t(e):s(e)})})},downPdf(e,t){let s=[];t?s=[{accountId:e.shopifyAccountId,orderId:e.orderId}]:(this.checkIds.length||this.$elementMessage("Please select an order first","error"),this.$showLoading(),s=this.checkItems.map(e=>{let t={accountId:e.shopifyAccountId,orderId:e.orderId};return t})),this.$apiCall("api.BillSet.exportBill",{orderInfo:s},e=>{if("9999"==e.ErrorCode){let t=document.createElement("a");t.href=e.Data.Results.url,t.click()}else this.$elementMessage(e.Message,"error");this.$hideLoading()})},sendEmail(e,t){let s=[];if(t)s=[{accountId:e.shopifyAccountId,orderId:e.orderId}];else{if(!this.checkIds.length)return void this.$elementMessage("Please select an order first","error");this.$showLoading(),console.log(this.checkItems,"111"),s=this.checkItems.map(e=>{let t={accountId:e.shopifyAccountId,orderId:e.orderId};return t})}this.$apiCall("api.BillSet.exportBill",{orderInfo:s,isSend:1},e=>{"9999"==e.ErrorCode?this.$elementMessage("send success","success"):this.$elementMessage(e.Message,"error"),this.$hideLoading()})},markShippedOpen(e){this.dialogMarkShipped=JSON.parse(this.dialogMarkShippedDefault),this.$showLoading(),this.$apiCall("api.Invoice.getShopifyCompany",{},t=>{this.$hideLoading(),"9999"==t.ErrorCode?(this.dialogMarkShipped.shopifyCompany=t.Data.Results,this.dialogMarkShipped.isShow=!0,this.dialogMarkShipped.item=e):this.$elementMessage(t.Message,"error")})},changeFail(e){this.failData.isShowDialog=!1},openAddComment(){this.$refs.uploadFile&&this.$refs.uploadFile.clearFiles(),this.DialogEditComment=JSON.parse(this.DialogEditCommentDefault),this.DialogEditComment.visible=!0},openSecretKey(){this.dialoKeyInfo=JSON.parse(this.dialogKeyInfoDefault),this.dialoKeyInfo.isShow=!0},openAuth(){this.dialoAuthInfo=JSON.parse(this.dialogAuthInfoDefault),this.dialoAuthInfo.shopData=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")).erpShops:[],this.dialoAuthInfo.isShow=!0},submitUpload(e){this.$showLoading(),0==$("#ifilePro").length&&$("body").append('<iframe id="ifilePro" style="display:none"></iframe>');let t=e=>{document.getElementById("ifilePro").src=e},s="api.ShopifyOrder.deliverImportNew",a={"@file":e};this.$apiCall(s,a,e=>{"9999"==e.ErrorCode?(this.$elementMessage(this.$t("invoice.successImport"),"success"),t(e.Data.Results.file),this.dialoImportInfo=JSON.parse(this.dialogImportInfoDefault),this.getItem()):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this)),this.$hideLoading()})},createUpload(e){this.$showLoading(),0==$("#ifileProCreate").length&&$("body").append('<iframe id="ifileProCreate" style="display:none"></iframe>');let t=e=>{document.getElementById("ifileProCreate").src=e},s="api.ShopifyOrder.importOrderExcel",a={"@file":e};this.$apiCall(s,a,e=>{"9999"==e.ErrorCode?(this.$elementMessage("创建成功","success"),t(e.Data.Results.file),this.dialogCreateInfo=JSON.stringify(this.dialogCreateInfoDefault),this.getItem()):(this.$elementMessage(e.Message,"error"),"1002"!=e.ErrorCode&&"1003"!=e.ErrorCode||this.$userFailure(this)),this.$hideLoading()})},openImport(){this.dialoImportInfo=JSON.parse(this.dialogImportInfoDefault),this.dialoImportInfo.isShow=!0},openCreate(){this.dialogCreateInfo=JSON.parse(this.dialogCreateInfoDefault),this.dialogCreateInfo.isShow=!0},relateFn(e){this.$showLoading(),console.log(e.sku,"sku.sku"),this.$apiCall("api.ShopifyOrder.setSkuRelation",{customerSku:this.dialogRelateInfo.item.variableId,customerId:this.dialogRelateInfo.item.customerId,vendorSku:e.sku,warehouseId:e.Hid},e=>{"9999"==e.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.dialogQuoteInfo=JSON.parse(this.dialogQuoteInfoDefault),this.dialogRelateInfo=JSON.parse(this.dialogRelateInfoDefault),this.$refs.gridTable.clearSelection(),this.getItem()):this.$elementMessage(e.Message,"error"),this.$hideLoading()})},openRelate(e){this.$showLoading(),this.$apiCall("api.VendorShop.vendorFindProducts",{page:1,rowsPerPage:10,status:1},t=>{if("9999"==t.ErrorCode){if(!t.Data.Results.products||!t.Data.Results.products.length)return;this.dialogRelateInfo=JSON.parse(this.dialogRelateInfoDefault),this.dialogRelateInfo.isShow=!0,this.dialogRelateInfo.item=e,this.dialogRelateInfo.Pagination=t.Data.Pagination,this.dialogRelateInfo.items=[],this.dialogRelateInfo.list=[],t.Data.Results.products.forEach(e=>{e.stocks&&e.stocks.length&&e.stocks.forEach(t=>{this.$set(t,"name",e.name),this.dialogRelateInfo.items.push(t)}),this.dialogRelateInfo.list.push(e)})}else this.$elementMessage(t.Message,"error");this.$hideLoading()})},syncFn(e,t){"row"==e?this.sync(e,t):this.checkIds.length?this.sync():this.$elementMessage(this.$t("orders.selectOrder"),"error")},sync(e,t){let s=[];"row"==e?s.push(t.id):s=this.checkIds,this.$showLoading(),this.$apiCall("api.ShopifyOrder.setNotAbnormal",{ids:s},e=>{"9999"==e.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.getItem()):this.$elementMessage(e.Message,"error"),this.$hideLoading()})},payFn(e,t){if("row"==e)this.pay(e,t);else if(this.checkIds.length){let e=0;this.checkItems.forEach(t=>{1==t.paymentType&&e++}),e==this.checkIds.length?this.pay():this.$elementMessage("只有线下付款的订单支持确认收款","error")}else this.$elementMessage(this.$t("orders.selectOrder"),"error")},pay(e,t){this.$confirm(this.$t("orders.confirmRe"),"",{confirmButtonText:this.$t("orders.confirm"),cancelButtonText:this.$t("orders.cancel"),type:""}).then(()=>{let s=[];"row"==e?s.push(t.id):s=this.checkIds,this.payConfirm(s)}).catch(()=>{})},async payConfirm(e){this.$showLoading();let t=[];for(let s=0;s<e.length;s++)await this.payConfirmItem(e[s]).then(e=>{t.push(e)});t.length==e.length&&(this.$elementMessage(this.$t("orders.success"),"success"),this.$hideLoading(),this.getItem())},payConfirmItem(e){return new Promise((t,s)=>{this.$apiCall("api.ShopifyOrder.setPaid",{id:e},a=>{"9999"==a.ErrorCode?t(e):(this.$hideLoading(),this.$elementMessage(a.Message,"error"),s(e))})})},payCancelFn(e,t){"row"==e?this.payCancel(e,t):this.checkIds.length?this.payCancel():this.$elementMessage(this.$t("orders.selectOrder"),"error")},payCancel(e,t){this.$confirm(this.$t("orders.payagain"),"",{confirmButtonText:this.$t("orders.confirm"),cancelButtonText:this.$t("orders.cancel"),type:""}).then(()=>{let s=[];"row"==e?s.push(t.id):s=this.checkIds,this.payCanceled(s)}).catch(()=>{})},async payCanceled(e){this.$showLoading();let t=[];for(let s=0;s<e.length;s++)await this.payCancelItem(e[s]).then(e=>{t.push(e)});t.length==e.length&&(this.$elementMessage(this.$t("orders.success"),"success"),this.$hideLoading(),this.getItem())},payCancelItem(e){return new Promise((t,s)=>{this.$apiCall("api.ShopifyOrder.setNotPaid",{id:e},a=>{"9999"==a.ErrorCode?t(e):(this.$hideLoading(),this.$elementMessage(a.Message,"error"),s(e))})})},quoteFn(e,t){"row"==e?this.quote(e,t):this.checkIds.length?this.quote():this.$elementMessage(this.$t("orders.selectOrder"),"error")},quote(e,t){let s=[];"row"==e?s.push(t.id):s=this.checkIds,this.$showLoading(),this.$apiCall("api.ShopifyOrder.getOfferShopifyItems",{ids:s},e=>{if("9999"==e.ErrorCode){let t=Object.values(e.Data.Results);if(!t||!t.length)return this.$hideLoading(),void this.$elementMessage("No data","error");localStorage.setItem("needQuoteOrders",JSON.stringify(t)),this.$router.push({name:"orderQuote",params:{ids:s}})}else this.$elementMessage(e.Message,"error");this.$hideLoading()})},getStatus(){let e="";if(3==this.status)e=6;else if(5==this.status)e=7;else if(6==this.status)e="";else if(311==this.status)e=311;else if(355==this.status)e="2,3,11,15";else if(15==this.status)e=15;else{let t=this.tabList.filter(e=>e.name==this.activeName);e=t[0].id,2==this.status&&2==this.activeName&&(e=3)}return e},changeBackData(e){if(this.filterDialog.isShowDialog=e.show,e.ok){this.isFitterOrder=!0;let t={status:this.getStatus(),page:this.page,rowsPerPage:this.rowsPerPage};1==e.ok?t.codeNameList=e.order:t.orderIdList=e.order,this.filterDialog.obj=t,this.filterOrderFun(t)}},filterOrderFun(e){console.log(e,"param"),this.$apiCall("api.ShopifyOrder.findByVendor",e,e=>{9999==e.ErrorCode?(console.log(e.Data.Results,"asd1r.Data.Results"),this.items=e.Data.Results.searchResult,this.total=Number(e.Data.Pagination.totalCount),this.totalPage=Number(e.Data.Pagination.totalPage),this.page=e.Data.Pagination.page,e.Data.Results.noSearchList&&(this.failData.isShowDialog=!0,this.failData.obj=e.Data.Results.noSearchList)):this.$message({message:e.Message,type:"error"})})},closeFilter(e){this.filterDialog.isShowDialog=e.show},changeFail(e){this.failData.isShowDialog=!1},quoteCancelFn(){this.checkIds.length?this.$confirm(this.$t("orders.waive"),"",{confirmButtonText:this.$t("orders.confirm"),cancelButtonText:this.$t("orders.cancel"),type:""}).then(()=>{this.$showLoading(),this.$apiCall("api.ShopifyOrder.cancel",{ids:this.checkIds},e=>{"9999"==e.ErrorCode?(this.$elementMessage(this.$t("orders.success"),"success"),this.$refs.gridTable.clearSelection(),this.getItem()):this.$elementMessage(e.Message,"error"),this.$hideLoading()})}).catch(()=>{}):this.$elementMessage(this.$t("orders.selectOrder"),"error")},handleSelectionChange(e){this.checkIds=[],this.checkItems=[],e.length&&e.forEach(e=>{this.checkItems.push(e),this.checkIds.push(e.id)})},dateChange(){this.filterParams.date.length>1&&(this.filterParams.dateFrom=this.$moment(this.filterParams.date[0]).format("YYYY-MM-DD"),this.filterParams.dateTo=this.$moment(this.filterParams.date[1]).format("YYYY-MM-DD"),this.filterItem())},dateChange2(){this.filterParams.date2&&this.filterParams.date2.length>1?(this.filterParams.dateFrom2=this.$moment(this.filterParams.date2[0]).format("YYYY-MM-DD"),this.filterParams.dateTo2=this.$moment(this.filterParams.date2[1]).format("YYYY-MM-DD"),this.filterItem()):this.clearFilter("date2")},clearFilter(e){switch(e){case"codeName":this.filterParams.codeName="";break;case"orderId":this.filterParams.orderId="";break;case"receiverName":this.filterParams.receiverName="";break;case"accountIds":this.filterParams.accountIds="";break;case"relationshipId":this.filterParams.relationshipId="";break;case"date":this.filterParams.date=[],this.filterParams.dateFrom="",this.filterParams.dateTo="";break;case"date2":this.filterParams.date2=[],this.filterParams.dateFrom2="",this.filterParams.dateTo2="";break;case"sysCode":this.filterParams.sysCode="";break;default:this.filterParams=JSON.parse(this.filterParamsDefault);break}this.filterItem()},filterItem(e){1==this.$route.query.page?this.getItem():this.$router.push({path:`/ordersManage/${Number(this.status)}/${Number(this.activeName)}`,query:{page:1}})},gettabList(){switch(this.status){case 2:this.tabList=[{id:2,name:1,title:this.$t("orders.tabBar1")},{id:22,name:2,title:this.$t("orders.tabBar2")},{id:5,name:3,title:this.$t("orders.tabBar3")}];break;case 4:this.tabList=[{id:8,name:1,title:this.$t("orders.tabBar4")},{id:9,name:2,title:this.$t("orders.tabBar5")},{id:10,name:3,title:this.$t("orders.tabBar6")}];break;default:this.tabList=[];break}},remoteMethodCustom(){this.vendorList=[],this.$apiCall("api.Relationship.findByVendor",{},e=>{9999==e.ErrorCode?this.vendorList=e.Data.Results:this.$message({message:e.Message,type:"error"})})},getShopName(){this.storeList=[],this.$apiCall("api.Invoice.findStoreByVendor",{},e=>{9999==e.ErrorCode?this.storeList=e.Data.Results:this.$message({message:e.Message,type:"error"})})},getVendorAllOrderCnt(){this.$apiCall("api.ShopifyOrder.getVendorAllOrderCnt",{},e=>{9999==e.ErrorCode?this.vendorAllOrderCnt=e.Data.Results:this.$message({message:e.Message,type:"error"})})},getVendorOrderCnt(e){this.$apiCall("api.ShopifyOrder.getVendorAllOrderCnt",{status:5,shippingType:e},t=>{9999==t.ErrorCode?(1==e?this.batchNum=t.Data.Results[5]:this.offlineNum=t.Data.Results[5],this.vendorAllOrderCnt=t.Data.Results):this.$message({message:t.Message,type:"error"})})},vendorAllOrderCntText(e){let t=0;return t=22==e?this.vendorAllOrderCnt.waitVendorConfirmCnt?this.vendorAllOrderCnt.waitVendorConfirmCnt:0:this.vendorAllOrderCnt[e]?this.vendorAllOrderCnt[e]:0,t},getItem(e){this.isFitterOrder=!1,this.gettabList(),this.remoteMethodCustom(),this.getShopName(),this.getVendorAllOrderCnt(),this.items=[];let t,s="",a="api.ShopifyOrder.findByVendor",i={page:this.page,rowsPerPage:this.rowsPerPage,status:s,dateFrom:this.filterParams.dateFrom,dateTo:this.filterParams.dateTo,accountIds:this.filterParams.accountIds?[this.filterParams.accountIds]:"",relationshipId:this.filterParams.relationshipId,orderId:this.filterParams.orderId,keywords:this.filterParams.codeName,receiverName:this.filterParams.receiverName},r={page:this.page,rowsPerPage:this.rowsPerPage,status:s,sysCode:this.filterParams.sysCode,timeCreatedFrom:this.filterParams.dateFrom2,timeCreatedTo:this.filterParams.dateTo2};if(t=i,3==this.status)s=6;else if(5==this.status)s=7;else if(6==this.status)s="",t=Object.assign(i,r);else if(311==this.status)s=311;else if(355==this.status)s="2,3,11,15";else if(15==this.status)s=15;else if(16==this.status)s=16;else if(17==this.status)s=17;else{let e=this.tabList.filter(e=>e.name==this.activeName);console.log(e,"item"),s=e.length>0?e[0].id:"",2==this.status&&2==this.activeName&&(s=3,t=r,a="api.ShopifyOrder.findByInvoice")}this.billStatus=s,t.shippingType=5==s?this.batchType:"",this.loading=!0,t.status=s,this.$apiCall(a,t,t=>{this.loading=!1,9999==t.ErrorCode?(this.items=t.Data.Results,this.items.forEach(e=>{this.$set(e,"shippingJsonInfo",e.shippingJson?JSON.parse(e.shippingJson):""),e.accountPayment&&e.accountPayment.extJson&&(this.$set(e,"voucherUrl",e.accountPayment.extJson.voucherUrl||""),this.$set(e,"voucherUrlPreview",[e.accountPayment.extJson.voucherUrl]))}),this.total=Number(t.Data.Pagination.totalCount),this.totalPage=Number(t.Data.Pagination.totalPage),this.$getTableHeight(this),this.isExpansion=!0,this.toggleRowExpansionAll(this.items,!0),e||(this.$root.$children[0].$refs.mainScroll.wrap.scrollTop=0)):this.$message({message:t.Message,type:"error"})}),2==this.status&&3==this.activeName&&(this.getVendorOrderCnt(1),this.getVendorOrderCnt(2))},toPage(e){this.isFitterOrder?(this.filterDialog.obj.page=e,this.filterOrderFun(this.filterDialog.obj)):e!=this.$route.query.page&&this.$router.push({path:`/ordersManage/${Number(this.status)}/${Number(this.activeName)}`,query:{page:e}})},changePageSize(e){this.rowsPerPage=e,localStorage.setItem("ordersRowsPerPage",e),this.isFitterOrder?(this.filterDialog.obj.rowsPerPage=e,this.filterOrderFun(this.filterDialog.obj)):this.getItem()},gotoPage(){this.page=this.$route.query.page?this.$route.query.page:1,this.getItem()},handleClick(e,t){this.filterParams=JSON.parse(this.filterParamsDefault),this.getItem()}}}),ve=ye,be=(s("ce11"),s("1efd"),Object(d["a"])(ve,a,i,!1,null,"7f189147",null));t["default"]=be.exports},a640:function(e,t,s){"use strict";var a=s("d039");e.exports=function(e,t){var s=[][e];return!!s&&a((function(){s.call(null,t||function(){return 1},1)}))}},abbe:function(e,t,s){},afed:function(e,t,s){e.exports=s.p+"img/secretKey1.5bdafac9.png"},bef8:function(e,t,s){"use strict";s("8953")},c77a:function(e,t,s){"use strict";s("e609")},cd22:function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("ticket.submitTicket"),visible:e.DialogEditComment.visible,width:"800px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.DialogEditComment,"visible",t)},closed:function(t){return e.$refs.uploadFile.clearFiles()}}},[t("el-divider"),t("div",[t("el-form",{ref:"CommentForm"},[t("el-form-item",{attrs:{label:e.$t("ticket.problemsOrRequirements")}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.DialogEditComment.contents,callback:function(t){e.$set(e.DialogEditComment,"contents",t)},expression:"DialogEditComment.contents"}})],1),t("el-form-item",{attrs:{label:""}},[t("div",{staticStyle:{"font-size":"16px","font-weight":"bold",margin:"20px 0 0"}},[e._v(" "+e._s(e.$t("ticket.uploadImageAttachment"))+" ")])]),t("el-form-item",{attrs:{label:""}},[t("el-upload",{ref:"uploadFile",staticClass:"upload-file",attrs:{"on-change":e.handleChangeImg,"before-remove":e.handleRemoveImg,action:"","auto-upload":!1,accept:"image/gif,image/jpeg,image/jpg,image/png"}},[t("el-button",{ref:"uploadBtn",attrs:{size:"small",type:"primary",loading:e.DialogEditComment.uploadLoading}},[e._v(e._s(e.$t("ticket.browse")))])],1)],1)],1)],1),t("el-divider"),t("div",{staticClass:"dialog-footer d-flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"mg-r-15"},[t("el-button",{attrs:{size:"small",type:"primary",loading:e.DialogEditComment.loading},on:{click:e.saveComment}},[e._v(e._s(e.$t("ticket.submitTicket")))])],1),t("div",[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.DialogEditComment.visible=!1}}},[e._v(" "+e._s(e.$t("invoice.cancel")))])],1)])],1)},i=[],r=(s("14d9"),{props:["DialogEditComment"],data(){return{}},methods:{handleRemoveImg(e,t){t.forEach((t,s)=>{t.name==e.name&&this.DialogEditComment.attach.splice(s,1)})},handleChangeImg(e){this.DialogEditComment.loading=!0,this.DialogEditComment.uploadLoading=!0,this.$apiCall("api.Comment.uploadAttach",{"@file":e.raw},e=>{this.DialogEditComment.loading=!1,this.DialogEditComment.uploadLoading=!1,"9999"==e.ErrorCode?this.DialogEditComment.attach.push(e.Data.Results.url):this.$elementMessage(e.Message,"error")})},saveComment(){if(!this.DialogEditComment.contents)return this.$message({message:this.$t("invoice.emptyQuestion"),type:"error"}),!1;this.DialogEditComment.loading=!0,this.$apiCall("api.Comment.addByUser",{commentId:this.DialogEditComment.commentId,contents:this.DialogEditComment.contents,shopName:this.DialogEditComment.shopName,attach:this.DialogEditComment.attach},e=>{this.DialogEditComment.loading=!1,9999==e.ErrorCode?(this.DialogEditComment.visible=!1,this.$message({message:this.$t("app._wewillReplyASAP"),type:"success"})):this.$message({message:e.Message,type:"error"})})}}}),o=r,l=s("2877"),n=Object(l["a"])(o,a,i,!1,null,null,null);t["a"]=n.exports},cdfc:function(e,t,s){"use strict";s("07f3")},ce11:function(e,t,s){"use strict";s("d9e8")},d58f:function(e,t,s){"use strict";var a=s("59ed"),i=s("7b0b"),r=s("44ad"),o=s("07fa"),l=TypeError,n="Reduce of empty array with no initial value",d=function(e){return function(t,s,d,c){var u=i(t),p=r(u),h=o(u);if(a(s),0===h&&d<2)throw new l(n);var m=e?h-1:0,g=e?-1:1;if(d<2)while(1){if(m in p){c=p[m],m+=g;break}if(m+=g,e?m<0:h<=m)throw new l(n)}for(;e?m>=0:h>m;m+=g)m in p&&(c=s(c,p[m],m,u));return c}};e.exports={left:d(!1),right:d(!0)}},d9e8:function(e,t,s){},e03e:function(e,t,s){},e609:function(e,t,s){},e60f:function(e,t,s){},f09a:function(e,t,s){"use strict";s("0136")},fa9e:function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("invoice.usertoken"),visible:e.keyData.isShow,width:"800px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.keyData,"isShow",t)}}},[t("el-divider"),t("div",{staticStyle:{margin:"20px",color:"#303133"}},[t("p",[e._v(" "+e._s(e.$t("invoice.software"))+" ")])]),t("div",{staticClass:"d-body"},[t("p",[e._v(" "+e._s(e.$t("invoice.pastetoken"))+" ")]),t("div",{staticClass:"d-flex",staticStyle:{"justify-content":"space-around",margin:"15px 0"}},[t("div",{staticStyle:{width:"48%","margin-right":"2%"}},[t("p",{staticClass:"mg-y-10"},[e._v(e._s(e.$t("invoice.Picture1")))]),t("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:s("afed")}})]),t("div",{staticStyle:{width:"48%","margin-left":"2%"}},[t("p",{staticClass:"mg-y-10"},[e._v(e._s(e.$t("invoice.Picture2")))]),t("img",{staticStyle:{border:"1px solid #ddd"},attrs:{width:"100%",src:s("69a3")}})])]),t("p",{staticStyle:{"margin-top":"10px"}},[e._v(" "+e._s(e.$t("invoice.present"))+" "),t("el-link",{attrs:{target:"_blank",type:"primary",underline:!1,href:"//www.mabangerp.com/"}},[e._v("马帮ERP ")]),e._v(" "+e._s(e.$t("invoice.soon"))+" ")],1)]),t("div",{staticStyle:{margin:"20px",color:"rgb(153, 153, 153)"}},[t("p",[e._v(" "+e._s(e.$t("invoice.sametime"))+" "),t("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.openAddComment}},[e._v(" "+e._s(e.$t("invoice.contact"))+" ")]),e._v("。 ")],1)]),t("el-divider"),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.keyData.isShow=!1}}},[e._v(" "+e._s(e.$t("importdata.gotIt"))+" ")])],1)],1)},i=[],r={props:["keyData"],data(){return{}},methods:{openAddComment(){this.$emit("openAddComment")}}},o=r,l=(s("2418"),s("2877")),n=Object(l["a"])(o,a,i,!1,null,"af075a7e",null);t["a"]=n.exports}}]);